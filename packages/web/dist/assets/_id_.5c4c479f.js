import{p as ot,u as W,b as V,_ as p,k as S,$ as rt,H as N,v as R,a0 as ut,a as st,Q as ct,F as dt}from"./index.ac02f68f.js";import{bD as F,bf as U,bg as P,l as y,bm as t,H as u,cH as H,r as f,n as $,j as r,F as b,cs as I,cI as pt,t as ht,cG as Y,G as q,w as mt,q as ft}from"./bundle.f4813fa2.js";import{r as yt}from"./Period.d7f0205f.js";import{r as bt}from"./Stage.c11ca763.js";import{u as z,e as lt}from"./vue.5bd64dc7.js";import{B as M,u as L,P as it,A as vt,a as xt,b as gt}from"./Unapprove.f6f6b723.js";import{U as w,b as x,a as Ct,A,P as j}from"./bounty.b5687463.js";import{c as B}from"./wallet.4184d84f.js";import{r as Dt}from"./useShare.dac42af0.js";import{r as _t}from"./ArrowDown.fce4ad7c.js";import{r as wt}from"./ArrowUp.6fcf9bbd.js";import{g as kt}from"./index.b512b944.js";import{a as St,g as Tt,c as J}from"./util.25bcdacb.js";import{$ as It}from"./ui.e26017cf.js";import{C as Q}from"./index.2dbd4b40.js";import{S as At}from"./index.9ccd904a.js";import{S as $t}from"./index.50b02406.js";import{g as Bt}from"./startup.3b3d8368.js";import{S as Rt}from"./ButtonGroup.19624d09.js";import{g as Pt}from"./etherscan.83df9912.js";import"./tools.becc2b88.js";import"./ethers.043ad920.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";import"./bountyFactory.4905ecc7.js";import"./MinusCircle.5e3a505f.js";import"./index.160e8328.js";import"./useTags.f9c969ef.js";import"./valid.935dd966.js";import"./share.51f4a725.js";import"./erc20.e9c36ea3.js";import"./Github.2bf272eb.js";import"./Twitter.88072fb4.js";const Nt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},Ot=P("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 12V9C12 8.44772 11.5523 8 11 8C10.4477 8 10 8.44772 10 9V13C10 13.5523 10.4477 14 11 14H15C15.5523 14 16 13.5523 16 13C16 12.4477 15.5523 12 15 12H12Z",fill:"currentColor"},null,-1),Et=[Ot];function Mt(e,s){return F(),U("svg",Nt,Et)}const Lt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},Ft=P("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0333 1.7542C12.6953 1.33265 11.2648 1.43854 9.99512 2.04855C8.72812 2.65726 7.71316 3.72262 7.10667 5.04164C6.76857 5.77694 6.66043 6.66774 6.6212 7.50912C6.59319 8.11005 6.59916 8.76147 6.60485 9.38136C6.60491 9.38757 6.60496 9.3938 6.60502 9.40001H5.5C4.39543 9.40001 3.5 10.2954 3.5 11.4V20.4C3.5 21.5046 4.39543 22.4 5.5 22.4H18.5C19.6046 22.4 20.5 21.5046 20.5 20.4V11.4C20.5 10.2954 19.6046 9.40001 18.5 9.40001H18.0853C18.0808 8.54045 18.0627 7.69399 17.9908 6.93242C17.9014 5.98538 17.7193 5.02853 17.2734 4.31329C16.5096 3.08822 15.369 2.17502 14.0333 1.7542ZM16.2852 9.40001C16.2807 8.56079 16.2633 7.7848 16.1988 7.10155C16.114 6.20363 15.9577 5.60519 15.7459 5.26556C15.1944 4.38089 14.3924 3.75457 13.4924 3.47101C12.5947 3.18819 11.6361 3.25711 10.7746 3.67101C9.9104 4.08621 9.18522 4.82984 8.74207 5.79361C8.55534 6.19971 8.45621 6.8001 8.41925 7.59294C8.39368 8.14134 8.39896 8.71064 8.40449 9.30775C8.40478 9.33843 8.40506 9.36918 8.40534 9.40001H16.2852ZM5.5 11.2H18.5C18.6105 11.2 18.7 11.2895 18.7 11.4V20.4C18.7 20.5105 18.6105 20.6 18.5 20.6H5.5C5.38954 20.6 5.3 20.5105 5.3 20.4V11.4C5.3 11.2895 5.38954 11.2 5.5 11.2Z",fill:"#DF4F51"},null,-1),Ut=P("path",{d:"M12.4932 16.317C13.0793 16.1131 13.5 15.5557 13.5 14.9C13.5 14.0716 12.8284 13.4 12 13.4C11.1716 13.4 10.5 14.0716 10.5 14.9C10.5 15.5557 10.9207 16.1131 11.5068 16.317C11.5023 16.344 11.5 16.3717 11.5 16.4V17.9C11.5 18.1761 11.7239 18.4 12 18.4C12.2761 18.4 12.5 18.1761 12.5 17.9V16.4C12.5 16.3717 12.4977 16.344 12.4932 16.317Z",fill:"#DF4F51"},null,-1),zt=[Ft,Ut];function Ht(e,s){return F(),U("svg",Lt,zt)}const Vt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},qt=P("path",{d:"M13.5 14.9C13.5 15.5557 13.0793 16.1131 12.4932 16.3171C12.4977 16.3441 12.5 16.3718 12.5 16.4V17.9C12.5 18.1762 12.2761 18.4 12 18.4C11.7239 18.4 11.5 18.1762 11.5 17.9V16.4C11.5 16.3718 11.5023 16.3441 11.5068 16.3171C10.9207 16.1131 10.5 15.5557 10.5 14.9C10.5 14.0716 11.1716 13.4 12 13.4C12.8284 13.4 13.5 14.0716 13.5 14.9Z",fill:"#65b400"},null,-1),jt=P("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.1089 2.04855C11.3786 1.43854 12.809 1.33265 14.1471 1.7542C15.4828 2.17502 16.6234 3.08822 17.3872 4.31329C17.6502 4.73509 17.5214 5.2902 17.0996 5.55316C16.6778 5.81613 16.1227 5.68736 15.8597 5.26556C15.3082 4.38089 14.5062 3.75457 13.6062 3.47101C12.7085 3.18819 11.7499 3.25711 10.8884 3.67101C10.0242 4.08621 9.29902 4.82984 8.85586 5.79361C8.66914 6.19971 8.57001 6.8001 8.53305 7.59294C8.50748 8.14134 8.51276 8.71065 8.51829 9.30776L8.51914 9.40002H18.5C19.6046 9.40002 20.5 10.2955 20.5 11.4V20.4C20.5 21.5046 19.6046 22.4 18.5 22.4H5.5C4.39543 22.4 3.5 21.5046 3.5 20.4V11.4C3.5 10.2955 4.39543 9.40002 5.5 9.40002H6.71882L6.71865 9.38145C6.71296 8.76155 6.70698 8.11005 6.735 7.50912C6.77422 6.66774 6.88236 5.77694 7.22046 5.04164C7.82696 3.72262 8.84192 2.65726 10.1089 2.04855ZM18.5 11.2H5.5C5.38954 11.2 5.3 11.2896 5.3 11.4V20.4C5.3 20.5105 5.38954 20.6 5.5 20.6H18.5C18.6105 20.6 18.7 20.5105 18.7 20.4V11.4C18.7 11.2896 18.6105 11.2 18.5 11.2Z",fill:"#65b400"},null,-1),Wt=[qt,jt];function Zt(e,s){return F(),U("svg",Vt,Wt)}const Yt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Kt=P("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.5039 14.6537C13.6991 14.4585 13.6991 14.1419 13.5039 13.9466L9.63472 10.0775L13.3997 6.31249C13.595 6.11723 13.595 5.80065 13.3997 5.60538L12.3391 4.54472C12.1438 4.34946 11.8272 4.34946 11.6319 4.54472L6.44649 9.73019C6.25123 9.92545 6.25123 10.242 6.4465 10.4373L7.50716 11.498C7.52989 11.5207 7.55426 11.5408 7.5799 11.5582L11.7361 15.7144C11.9313 15.9097 12.2479 15.9097 12.4432 15.7144L13.5039 14.6537Z",fill:"#C0C0C0"},null,-1),Gt=[Kt];function Jt(e,s){return F(),U("svg",Yt,Gt)}const Qt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Xt=P("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.49615 5.34627C6.30089 5.54153 6.30089 5.85811 6.49615 6.05337L10.3653 9.9225L6.60029 13.6875C6.40502 13.8828 6.40502 14.1994 6.60029 14.3946L7.66095 15.4553C7.85621 15.6505 8.17279 15.6505 8.36805 15.4553L13.5535 10.2698C13.7488 10.0746 13.7488 9.75797 13.5535 9.56271L12.4928 8.50204C12.4701 8.47931 12.4457 8.45923 12.4201 8.44179L8.26392 4.28561C8.06865 4.09034 7.75207 4.09034 7.55681 4.28561L6.49615 5.34627Z",fill:"#C0C0C0"},null,-1),te=[Xt];function ee(e,s){return F(),U("svg",Qt,te)}const se={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none"},le=P("path",{d:"M19.1498 1.85977C18.7678 1.47033 18.2833 1.19698 17.7524 1.07134C17.2215 0.945697 16.6659 0.972887 16.1498 1.14977L1.9998 5.87977C1.42912 6.06657 0.930493 6.42591 0.572758 6.9082C0.215023 7.39049 0.0158211 7.97193 0.00265102 8.57227C-0.010519 9.1726 0.162992 9.76223 0.499233 10.2597C0.835473 10.7572 1.31786 11.1381 1.87981 11.3498L7.1198 13.3498C7.23912 13.3954 7.34776 13.4651 7.43895 13.5546C7.53014 13.644 7.60191 13.7513 7.6498 13.8698L9.64981 19.1198C9.85339 19.6738 10.2228 20.1515 10.7078 20.4879C11.1927 20.8244 11.7696 21.0031 12.3598 20.9998H12.4298C13.0308 20.9888 13.6134 20.7901 14.0958 20.4314C14.5781 20.0728 14.9362 19.5722 15.1198 18.9998L19.8498 4.82977C20.0218 4.3187 20.0474 3.76971 19.9237 3.24485C19.8 2.72 19.5319 2.24022 19.1498 1.85977ZM17.9998 4.19977L13.2198 18.3798C13.1643 18.5592 13.0528 18.7162 12.9017 18.8278C12.7505 18.9394 12.5677 18.9996 12.3798 18.9998C12.1931 19.0028 12.0098 18.949 11.8544 18.8454C11.699 18.7418 11.5788 18.5933 11.5098 18.4198L9.50981 13.1698C9.36481 12.7883 9.14119 12.4416 8.85349 12.1521C8.56578 11.8627 8.22041 11.637 7.83981 11.4898L2.58981 9.48977C2.4127 9.42487 2.26046 9.30597 2.15459 9.14985C2.04872 8.99374 1.99458 8.80832 1.9998 8.61977C1.99996 8.43191 2.06022 8.24903 2.17178 8.09789C2.28334 7.94675 2.44034 7.83527 2.6198 7.77977L16.7998 3.04977C16.9626 2.98341 17.1411 2.96564 17.3138 2.99859C17.4865 3.03154 17.646 3.11381 17.7729 3.23545C17.8998 3.35709 17.9888 3.5129 18.0291 3.68403C18.0693 3.85516 18.0592 4.03429 17.9998 4.19977Z",fill:"currentColor"},null,-1),ie=[le];function ae(e,s){return F(),U("svg",se,ie)}const at=y({props:{avatar:{type:String,required:!0}},emits:["clickAvatar"],render(){return t("div",{class:"u-lazy-image-img rounded-1/2 h-15 w-15 cursor-pointer overflow-hidden",onClick:()=>{this.$emit("clickAvatar")}},[t(ot,{src:this.avatar||"",class:"h-full w-full"},null)])}}),K=y({props:{avatar:{type:String,default:()=>"https://comunion-avatars.s3.ap-northeast-1.amazonaws.com/avatar1.svg"},comerId:{type:Number,require:!0}},render(){const e=s=>()=>{s?this.$router.push({path:"/builder",query:{id:s}}):console.warn("toComerDetail(): missing param [id]")};return t("div",{class:"flex"},[t(at,{class:"!h-9 !w-9",avatar:this.avatar,onClickAvatar:e(this.comerId)},null),this.$slots.default?this.$slots.default():null])}}),ne=y({props:{depositInfo:{type:Object,required:!0},tokenSymbol:{type:String,required:!0}},setup(e){return{depositFn:u(()=>{var a,o;let l="+";const i=e.tokenSymbol||"--",n=String(((a=e.depositInfo)==null?void 0:a.amount)||0);return((o=e.depositInfo)==null?void 0:o.mode)===2&&(l="-"),()=>{var c;return t("div",{class:`flex font-medium ${((c=e.depositInfo)==null?void 0:c.mode)===1?"text-success":"text-warning"} items-center`},[`${l}${n.split(".")[1]&&n.split(".")[1].length>4?n.split(".")[0]+"."+n.split(".")[1].substring(0,4)+"...":n}${i}`])}})}},render(){var e,s;return t(K,{avatar:(e=this.depositInfo.comer)==null?void 0:e.avatar,comerId:(s=this.depositInfo.comer)==null?void 0:s.id},{default:()=>{var l;return t("div",{class:"flex flex-1 items-center"},[t("div",{class:"flex-1 mx-4 overflow-hidden"},[t("p",{class:" mb-2 truncate u-h4"},[(l=this.depositInfo.comer)==null?void 0:l.name]),t("p",{class:"text-grey3 u-num2 !font-400"},[H(Number(this.depositInfo.created_at),"comunionTimeAgo")])]),this.depositFn()])}})}}),oe="_approve_dxxi5_1",re={approve:oe},G=e=>e?e.replace(/\n/g,"<br/>"):"",ue=y({name:"ApplicantBubble",props:{applicant:{type:Object,required:!0},detailChainId:{type:Number,default:()=>0}},setup(e){const s=z(),l=f(!1),i=W(),n=V().connected,a=$("bountyDetail"),o=$("paramBountyId"),c=u(()=>{var C;return H(new Date(Number((C=e.applicant)==null?void 0:C.apply_at)),"comunionTimeAgo")}),m=u(()=>{var C;return(a==null?void 0:a.value.my_role)!==w.FOUNDER||(a==null?void 0:a.value.status)>=x.WORKSTARTED||((C=e.applicant)==null?void 0:C.status)!==1}),v=u(()=>a==null?void 0:a.value.status);return{bountyRole:u(()=>a==null?void 0:a.value.my_role),visible:l,profile:i.profile,formatDate:c,approveDisabled:m,bountyStatus:v,route:s,paramBountyId:o,bountyDetail:a,walletConnected:n}},render(){var l,i,n,a;if(!this.bountyDetail)return null;const e=()=>{this.visible=!this.visible},s=o=>async()=>{var m,v,_,C;if(o==="cancel"){e();return}if(!await B(this.detailChainId)){console.warn("checkSupportNetwork: detailChainId not Support",this.detailChainId);return}if(this.walletConnected){const{bountyContract:g}=L(this.bountyDetail),d=await g.approveApplicant(((v=(m=this.applicant)==null?void 0:m.comer)==null?void 0:v.address)||"","Approve for the applicant to work for this bounty.",`Successfully approve ${((C=(_=this.applicant)==null?void 0:_.comer)==null?void 0:C.name)||"applicant"}.`);if(console.warn("approveApplicant",d),d)return e()}};return t(b,null,[t(M,{title:"Approve the applicant?",content:"Other applicant's deposits will be released at once you approve the applicant",visible:this.visible,onTriggerDialog:e},{btns:()=>t("div",{class:"flex justify-end"},[t(p,{class:"mr-16px w-164px",type:"default",onClick:s("cancel")},{default:()=>[r("Cancel")]}),t(p,{class:"w-164px",type:"primary",onClick:s("submit")},{default:()=>[r("Yes")]})])}),t(K,{class:"mb-10",avatar:(i=(l=this.applicant)==null?void 0:l.comer)==null?void 0:i.avatar,comerId:(a=(n=this.applicant)==null?void 0:n.comer)==null?void 0:a.id},{default:()=>{var o,c,m,v,_;return t("div",{class:"flex-1 ml-4"},[t("div",{class:"flex items-center"},[t("div",{class:"flex-1"},[t("p",{class:"mb-2 text-color1 u-h4"},[(c=(o=this.applicant)==null?void 0:o.comer)==null?void 0:c.name]),t("p",{class:"text-color3 u-h7"},[this.formatDate])]),this.bountyRole===w.FOUNDER&&((m=this.bountyDetail)==null?void 0:m.status)&&((v=this.bountyDetail)==null?void 0:v.status)<x.WORKSTARTED&&(this.approveDisabled?t(S,null,{trigger:()=>t("div",null,[t(p,{disabled:!0,color:"rgba(0,0,0,0.1)",class:"w-30",type:"primary",size:"small",onClick:e},{default:()=>[r("Approve")]})]),default:()=>"The applicant has canceled to apply for bounty who cannot be approved."}):t(p,{class:"w-30",type:"primary",size:"small",onClick:e},{default:()=>[r("Approve")]}))]),t("div",{class:`bg-purple rounded mt-2 p-4 ${re.approve} <lg:-ml-14`},[t("div",{class:"max-h-20 text-color2 overflow-auto u-h5",innerHTML:G((_=this.applicant)==null?void 0:_.description)},null)])])}})])}});function ce(e){return t("div",{class:"flex-1 ml-4"},[t("div",{class:"mb-4 items-center"},[t("p",{class:" font-semibold mb-1 text-4"},[e.name]),t("p",{class:" mr-16px text-14px text-color3"},[e.date])]),t("div",{class:"bg-purple rounded-md  mt-3 py-4 px-6 <lg:-ml-14"},[t("div",{class:" text-black u-h5 max-h-20 overflow-auto",innerHTML:G(e.content)},null)])])}function de(e){return t("div",{class:"flex-1 ml-4"},[t("div",{class:"mb-4 items-center"},[t("p",{class:" font-semibold mb-1 text-4"},[e.name]),t("p",{class:" mr-16px text-14px text-color3"},[e.date])]),t("p",{class:"bg-purple flex rounded-8px text-black p-6 overflow-hidden items-center  <lg:-ml-14"},[t("div",{class:"flex items-center"},[t("div",{class:"bg-white flex rounded-20px h-40px w-40px justify-center items-center"},[t(ae,{class:"text-primary"},null)]),t("div",{class:"border-solid border-color-border flex flex-col border-r-1px h-16 ml-3 pr-6 justify-center"},[t("p",{class:" font-semibold text-16px text-[##333333]"},[r("Send")]),t("p",{class:"mt-10px text-14px text-grey3"},[e.dateTime])])]),t("div",{class:"flex flex-col flex-1 ml-6 overflow-hidden"},[t("p",{class:"text-color1 u-title2"},[e.content.token1_amount||0,r(" "),e.content.token1_symbol,e.content.token2_symbol&&t(b,null,[r("+"),e.content.token2_amount||0,r(" "),e.content.token2_symbol])]),t("p",{class:" font-400 mt-4px"},[r("Txn Hash\uFF1A")]),e.content.url?t("a",{href:`${e.content.url+e.content.transactionHash1}`,target:"_blank",class:" font-400 mt-4px text-primary"},[e.content.transactionHash1]):t("span",{class:"cursor-default  font-400 mt-4px text-primary"},[e.content.transactionHash1]),e.content.transactionHash2&&e.content.url&&t("a",{href:`${e.content.url+e.content.transactionHash2}`,target:"_blank",class:"cursor-default  font-400 mt-4px text-primary"},[e.content.transactionHash2]),e.content.transactionHash2&&!e.content.url&&t("span",{class:"cursor-default  font-400 mt-4px text-primary"},[e.content.transactionHash2])])])])}const pe=y({name:"ActivityBubble",props:{activity:{type:Object,required:!0}},setup(e){return{fn:u(()=>{var l,i;if(e.activity.type===1){const n={name:((l=e.activity.comer)==null?void 0:l.name)||"",date:H(e.activity.created_at||"","comunionTimeAgo"),content:e.activity.content||""};return()=>t(b,null,[ce(n)])}else if(e.activity.type===2){const n={name:((i=e.activity.comer)==null?void 0:i.name)||"",date:H(e.activity.created_at||"","comunionTimeAgo"),dateTime:I(e.activity.created_at||"").format("MMM D"),content:JSON.parse(e.activity.content)};return()=>t(b,null,[de(n)])}return()=>t("span",null,[r("error type $"),e.activity.type])})}},render(){var e,s;return t(b,null,[t(K,{class:"mb-10",avatar:((e=this.activity.comer)==null?void 0:e.avatar)||"",comerId:(s=this.activity.comer)==null?void 0:s.id},{default:this.fn})])}}),he=y({props:{content:{type:String,required:!0}},setup(){return{showTooltipRef:f(!1)}},render(){return t("span",{class:"u-address__copy",onClick:e=>{e.stopPropagation(),this.showTooltipRef=pt(this.content||"")},onMouseleave:e=>{e.stopPropagation(),this.showTooltipRef=!1}},[t(S,{show:this.showTooltipRef},{trigger:()=>t(Dt,{class:"u-address__icon w-4 mt-3px"},null),default:()=>"Copied!"})])}});const O=y({name:"paragraph",props:{label:{type:String,required:!0},content:{type:String,requred:!0},foldAble:{type:Boolean,required:!1,default:()=>!1},fold:{type:Boolean,required:!1,default:()=>!1},contentClass:{type:String,required:!1,default:()=>"text-primary2"},maxHeight:{type:Number,default:()=>120},pasteboard:{type:Boolean,default:()=>!1},isLink:{type:Boolean,default:()=>!1}},setup(e,s){const l=u(()=>`u-h5 ${e.contentClass}`),i=u(()=>{const c="whitespace-pre-wrap break-all overflow-hidden";return e.fold?`${c} overflow-ellipsis line-clamp-3 ${l.value}`:`${c} ${l.value}`}),n=f(!1),a=f();return s.expose({ele:a}),{contentClass:l,foldClass:i,showTooltipRef:n,ele:a,handleClick:()=>{e.isLink&&window.open(e.content)}}},render(){return t("div",{class:"flex"},[t("div",{class:" max-w-1/2 text-color1 w-42 "},[this.label]),t("div",{class:" flex-1 overflow-hidden"},[this.foldAble?t(rt,null,{default:()=>[t("p",{class:this.foldClass,ref:e=>this.ele=e,innerHTML:this.content},null)]}):t("p",{class:`${this.contentClass} ${this.isLink?"cursor-pointer":""}`,onClick:this.handleClick},[this.content,this.pasteboard?t(he,{content:this.content||""},null):null])])])}}),me=y({props:{fold:{type:Boolean,required:!0}},emits:["more"],setup(e){return{btnText:u(()=>e.fold?"View all":"Pack up")}},render(){return t("div",{class:"w-110px flex justify-end items-center text-primary cursor-pointer",onClick:()=>{this.$emit("more")}},[t("span",{class:"text-[14px] mr-2 text-primary"},[this.btnText]),this.fold?t(_t,{class:"w-4 h-4"},null):t(wt,{class:"w-4 h-4"},null)])}}),fe=y({name:"Info",props:{bountyDetail:{type:Object,required:!0}},setup(e){const s=f(!0),l=()=>{s.value=!s.value},i=u(()=>Ct[kt(e.bountyDetail)]),n=u(()=>e.bountyDetail.created_at?H(e.bountyDetail.created_at,"comunionTimeAgo"):""),a=f(),o=f();return ht(()=>{a.value.ele.scrollHeight>60&&(o.value=!0)}),{created_at:n,handleMore:l,fold:s,bountyStatus:i,pRef:a,showMoreBtn:o}},render(){return t(R,null,{default:()=>{var e;return[t("div",{class:"flex"},[t("div",{class:"flex flex-col flex-grow flex-1 overflow-hidden"},[t(S,{width:400,placement:"top-start",trigger:"hover"},{trigger:()=>t("span",{class:"text-[#333333] truncate u-h3"},[this.bountyDetail.title]),default:()=>this.bountyDetail.title}),t("div",{class:"flex flex-wrap mt-5 gap-2"},[Array.isArray(this.bountyDetail.skills)&&this.bountyDetail.skills.map(s=>t(N,{key:s.id,class:"text-[#211B42]"},{default:()=>{var l;return[(l=s.tag)==null?void 0:l.name]}}))])]),t("div",{class:"leading-[24px]"},[this.bountyStatus&&t(N,{class:"ml-4"},{default:()=>[this.bountyStatus.label]})])]),t(O,{class:"mt-6 items-center",label:"Created :",content:this.created_at,contentClass:"text-color2"},null),(e=this.bountyDetail.contacts)==null?void 0:e.map(s=>{var l;return t(O,{class:"mt-2.5 items-center",label:`${(l=St(s.type))==null?void 0:l.label}`,content:s.value,contentClass:"text-primary flex items-center",pasteboard:!0},null)}),this.bountyDetail.discussion_link&&t(O,{class:"mt-2.5 items-center",label:"Discussion link",content:this.bountyDetail.discussion_link,contentClass:"text-primary flex items-center",isLink:!0},null),t(O,{class:"mt-2.5 items-center",label:"Apply Cutoff Date :",content:I.utc(Number(this.bountyDetail.apply_deadline)).format("YYYY-MM-DD HH:mm UTC"),contentClass:"text-color2 "},null),t(O,{class:"mt-2.5 items-center",label:"Applicants deposit :",content:`${this.bountyDetail.applicant_min_deposit} ${this.bountyDetail.deposit_contract_token_symbol}`,contentClass:"text-color2 "},null),t(O,{class:"mt-2.5",label:"Description :",content:this.bountyDetail.description,foldAble:!0,fold:this.fold,maxHeight:300,contentClass:"text-color3 ",ref:s=>this.pRef=s},null),this.showMoreBtn&&t("div",{class:"flex mt-6 justify-end"},[t(me,{onMore:this.handleMore,fold:this.fold},null)])]}})}}),nt=y({name:"PayedMask",render(){return t("div",{class:"flex bg-[rgba(83,49,244,.4)] inset-0 z-9 absolute justify-center items-center"},[t("div",{class:"bg-white rounded cursor-default h-8 text-warning text-center  transform leading-8 w-18 -rotate-15 u-title2"},[r("PAID")])])}}),E=y({props:{value:{type:String,default:()=>"0"},enhance:{type:Number,default:()=>24},unit:{type:String,default:()=>""},plus:{type:Boolean,default:()=>!1},half:{type:Boolean,default:()=>!1},textColor:{type:String,default:"text-primary"},digit:{type:Number,default:0},unitClass:{type:String}},setup(e){const s=u(()=>e.plus?t("span",{class:"font-sans font-normal right-full bottom-1 text-[24px] absolute","data-name":"placeholder"},[r("+")]):null);return{formatText:u(()=>{const i=e.value.includes("."),n=e.value.replace(".","").length;let a="";if(e.digit>n){const o=e.digit-n;a=new Array(o).fill("0").join("")}return t("strong",{class:" leading-none px-1 text-9 truncate relative",style:{fontSize:`${e.enhance}px`}},[s.value,e.value,i?"":".",a])})}},render(){const e=this.value==="0"?"text-grey5":this.textColor;return t("p",{class:`text-primary align-text-bottom ${this.plus?"pl-4":""} ${e}`},[this.formatText,t("span",{class:`text-[12px] truncate ${this.unitClass}`},[this.unit])])}}),ye=y({name:"ProjectCardWithDialog",props:{info:{type:Object,require:!0},payMode:{type:String,require:!0},detailChainId:{type:Number,default:()=>0}},setup(){return{visible:f(!1)}},render(){const e=()=>{this.visible=!this.visible};return t(b,null,[t(it,{detailChainId:this.detailChainId,onTriggerDialog:e,visible:this.visible,paymentInfo:this.info},null),t(be,{info:this.info,onPay:e},null)])}}),be=y({name:"ProjectCard",props:{info:{type:Object}},emits:["pay"],setup(e){const s=$("bountyDetail"),l=u(()=>{var o;if((o=e.info)!=null&&o.sort_index){if(e.info.sort_index>3)return`${e.info.sort_index}TH`;if(e.info.sort_index===3)return"3RD";if(e.info.sort_index===2)return"2ND";if(e.info.sort_index===1)return"1ST"}return"err"}),i=u(()=>"flex flex-col relative items-center w-63 bg-purple border-purple border-1 border-solid rounded-8px mt-10px ml-2 mr-6 h-57"),n=u(()=>((s==null?void 0:s.value.status)||0)>=x.WORKSTARTED),a=u(()=>n.value?null:((s==null?void 0:s.value.status)||0)>=x.COMPLETED?"The pay button is unavailable when the bounty completed":"The pay button will be actived after the applicant is approvied.");return{index:l,payBtnAbled:n,wrapperClass:i,bountyDetail:s,tooltip:a}},render(){var s,l,i,n;const e=()=>{this.$emit("pay",this.info)};return t("div",{class:"bg-purple border-purple border-solid rounded-sm border-1 mt-2 relative"},[t("div",{class:"bg-purple-light rounded-br-md flex h-7 text-primary w-11.5 z-1 absolute justify-center items-center u-h5 "},[this.index]),t("div",{class:"rounded-sm flex flex-col h-full w-full items-center relative overflow-hidden"},[((s=this.info)==null?void 0:s.status)===1&&t(nt,null,null),t("div",{class:"flex flex-1 items-end"},[t("div",null,[((l=this.info)==null?void 0:l.token1_symbol)&&t(E,{class:"my-8 w-full",half:!0,unit:this.info.token1_symbol,value:`${this.info.token1_amount||0}`,enhance:36,digit:3,unitClass:"text-color1"},null),((i=this.info)==null?void 0:i.token2_amount)&&this.info.token2_amount>0&&t(E,{class:"-mt-5 mb-8 w-full",half:!0,unit:this.info.token2_symbol,value:`${this.info.token2_amount}`,plus:!0,enhance:36,digit:3,unitClass:"text-color1"},null),((n=this.bountyDetail)==null?void 0:n.my_role)===w.FOUNDER&&t("div",{class:"flex my-8 "},[this.payBtnAbled?t(p,{secondary:!this.payBtnAbled,disabled:!this.payBtnAbled,class:"bg-white flex-1",type:"default",size:"small",onClick:e},{default:()=>[r("Pay")]}):t(S,{trigger:"hover",placement:"top"},{trigger:()=>t("div",{class:"w-full"},[t(p,{secondary:!this.payBtnAbled,disabled:!0,class:"bg-white flex-1 w-full",type:"default",size:"small",onClick:e},{default:()=>[r("Pay")]})]),default:()=>this.tooltip})])])])])])}}),ve=y({props:{width:{type:Number,require:!0},total:{type:Number,require:!0,default:()=>0}},setup(){return{carousel:f()}},render(){const e=()=>{this.carousel.prev()},s=()=>{this.carousel.next()};return t("div",{class:"relative",style:{maxWidth:`${this.width}px`}},[this.total>3&&t(b,null,[t("div",{class:"cursor-pointer flex bg-gray-100 h-48px -mt-24px top-1/2 -left-20px w-20px absolute items-center",onClick:e},[t(Jt,null,null)]),t("div",{class:"cursor-pointer flex bg-gray-100 h-48px -mt-24px top-1/2 -right-20px w-20px absolute items-center",onClick:s},[t(ee,null,null)])]),t("div",{class:this.total>3?"mx-4":""},[t(ut,{ref:l=>this.carousel=l,slidesPerView:Math.min(3,this.total),spaceBetween:24,loop:!0,draggable:!0,showDots:!1},{default:()=>{var l,i;return[(i=(l=this.$slots).default)==null?void 0:i.call(l)]}})])])}}),X=y({props:{disabled:{type:Boolean,require:!0},detailChainId:{type:Number,default:()=>0}},setup(){const e=z(),s=f(!1),l=W(),i=V(),n=$("bountyDetail");return{visible:s,bountyDetail:n,chainId:i.chainId,walletConnectd:i.connected,userStore:l,route:e}},render(){if(!this.bountyDetail)return null;const e=async()=>{var a;if(!((a=this.bountyDetail)!=null&&a.chain_id?await B(this.bountyDetail.chain_id):!1))return console.warn("chain id not match");if(!this.walletConnectd)return this.userStore.logout();const{bountyContract:i}=L(this.bountyDetail),n=await i.releaseMyDeposit("Waiting to submit all contents to blockchain for release my deposit","Release my deposit succeedes");if(s(),!n)return console.warn("releaseMyDeposit error")},s=async()=>{!await B(this.detailChainId)||(this.visible=!this.visible)};return t(b,null,[t(M,{visible:this.visible,title:"Release your deposits ?",content:"All deposits will be released to your wallet, meanwhile your application will be canceled.",onTriggerDialog:s},{btns:()=>t("div",{class:"flex mt-10 justify-end"},[t(p,{type:"default",class:"mr-16px w-164px",size:"small",onClick:s},{default:()=>[r("Cancel")]}),t(p,{type:"primary",class:"w-164px",size:"small",onClick:e},{default:()=>[r("Yes")]})])}),this.disabled?t(S,{trigger:"hover",placement:"top"},{trigger:()=>t("div",{class:"w-[100%]"},[t(p,{type:"tertiary",class:`w-[100%] ${this.$attrs.class}`,disabled:this.disabled},{default:()=>[r("Release my deposit")]})]),default:()=>"Not any deposit is in the contract."}):t(p,{type:"primary",class:`${this.$attrs.class}`,onClick:s,disabled:this.disabled},{default:()=>[r("Release my deposit")]})])}}),xe=y({name:"StageTerm",props:{item:{type:Object},detailChainId:{type:Number,default:()=>0}},emits:["pay"],setup(e){const s=$("bountyDetail"),l=f(!1),i=u(()=>{var o;if((o=e.item)!=null&&o.sort_index){if(e.item.sort_index>3)return`${e.item.sort_index}th`;if(e.item.sort_index===3)return"3rd";if(e.item.sort_index===2)return"2nd";if(e.item.sort_index===1)return"1st"}return"err"}),n=u(()=>((s==null?void 0:s.value.status)||0)===x.WORKSTARTED),a=u(()=>n.value?null:((s==null?void 0:s.value.status)||0)>=x.COMPLETED?"The pay button is unavailable when the bounty completed":"The pay button will be actived after the applicant is approvied.");return{flagStr:i,visible:l,bountyDetail:s,payBtnAbled:n,tooltip:a}},render(){var s,l,i,n,a,o,c,m,v;const e=()=>{this.visible=!this.visible};return t(b,null,[t(it,{detailChainId:this.detailChainId,onTriggerDialog:e,visible:this.visible,paymentInfo:this.item},null),t("div",{class:"border rounded-sm bg-[#F5F6FA] border-[#D5CFF4] mb-6 py-6 px-16 relative"},[((s=this.item)==null?void 0:s.status)===1&&t(nt,null,null),t("span",{class:"rounded-br-md bg-[#D5CFF4] text-primary py-1 px-4 top-[-1px] left-[-1px] absolute u-h4"},[this.flagStr]),t("div",{class:"flex items-center"},[t("p",{class:"flex-1 text-primary"},[t("span",{class:"u-h2"},[((l=this.item)==null?void 0:l.token1_amount)||0]),t("span",{class:"ml-2 u-h6"},[(i=this.item)==null?void 0:i.token1_symbol]),((n=this.item)==null?void 0:n.token2_amount)&&((a=this.item)==null?void 0:a.token2_amount)>0&&t("span",null,[t("span",{class:"font-sans mx-2 text-24px"},[r("+")]),t("span",{class:"u-h2"},[(o=this.item)==null?void 0:o.token2_amount]),t("span",{class:"ml-2 u-h6"},[(c=this.item)==null?void 0:c.token2_symbol])])]),((m=this.bountyDetail)==null?void 0:m.my_role)===w.FOUNDER&&(this.payBtnAbled?t(p,{class:"h-9 w-30  font-semibold  -mr-8 px-8 text-primary border-1 border-[#65b400] border-solid rounded-sm !hover:text-primary",type:"default",size:"small",onClick:e},{default:()=>[r("Pay")]}):t(S,null,{trigger:()=>t("div",null,[t(p,{disabled:!0,class:"h-9 w-30  font-semibold  -mr-8 px-8 text-[#FFFFFF]",color:"rgba(0,0,0,0.1)",type:"default",size:"small"},{default:()=>[r("Pay")]})]),default:()=>this.tooltip}))]),t("div",{class:" mt-4 text-thin text-color2",innerHTML:G((v=this.item)==null?void 0:v.terms)},null)])])}}),ge=y({props:{detailChainId:{type:Number,default:()=>0},bountyDetail:{type:Object,required:!0,default:()=>null}},setup(e){const s=f(!1),l=u(()=>e.bountyDetail),i=u(()=>l.value.founder_deposit===0&&l.value.my_deposit===0&&l.value.status===0),n=u(()=>l.value.status!==x.READYTOWORK||i.value),a=f("The deposit is locked and cannot be increased");return{visible:s,disabled:n,disableMessage:a}},render(){const e=async()=>{!await B(this.detailChainId)||(this.visible=!this.visible)};return t(b,null,[t(vt,{detailChainId:this.detailChainId,visible:this.visible,onTriggerDialog:e},null),this.disabled?t(S,{trigger:"hover",placement:"top"},{trigger:()=>t("div",{class:"flex-1"},[t(p,{class:`w-full ${this.$attrs.class}`,ghost:!0,disabled:!0,size:"small"},{default:()=>[r("+ Deposit")]})]),default:()=>this.disableMessage}):t(p,{class:`${this.$attrs.class}`,ghost:!0,onClick:e,size:"small"},{default:()=>[r("+ Deposit")]})])}}),Ce=y({name:"applyBounty",props:{disabled:{type:Boolean,default:()=>!1},detailChainId:{type:Number,default:()=>0},applicantDepositMinAmount:{type:Number,default:()=>0},applicantApplyStatus:{type:Number,required:!0},bountyExpired:{type:Boolean,default:!1}},setup(e){const s=f(!1),l=$("bountyDetail"),i=u(()=>{if((l==null?void 0:l.value.status)===x.COMPLETED)return"Completed";switch(!0){case e.applicantApplyStatus===A.APPLIED:return"Awaiting approval";case e.applicantApplyStatus===A.APPROVED:return"Started working";default:return"Apply"}});return{applyBountyDialogVisible:s,ApplicantApplyDesc:i}},render(){const e=async()=>{await B(this.detailChainId)&&(this.applyBountyDialogVisible=!this.applyBountyDialogVisible)};return t(b,null,[t(xt,{title:"Apply",detailChainId:this.detailChainId,visible:this.applyBountyDialogVisible,onTriggerDialog:e,deposit:this.applicantDepositMinAmount},null),this.disabled&&this.ApplicantApplyDesc==="Apply"?t(S,{trigger:"hover",placement:"top"},{trigger:()=>t("div",{class:"w-[100%]"},[t(p,{type:"primary",class:`${this.disabled&&"text-white w-[100%]"} ${this.$attrs.class}`,disabled:!0},{default:()=>[this.ApplicantApplyDesc]})]),default:()=>this.bountyExpired?"This expired bounty cannot be applied for.":"This bounty has been won by another applicant."}):t(p,{type:"primary",class:`${this.disabled&&"text-white"} ${this.$attrs.class}`,onClick:e,disabled:this.disabled},{default:()=>[this.ApplicantApplyDesc]})])}}),De=y({props:{detailChainId:{type:Number,default:()=>0},bountyDetail:{type:Object,required:!0}},setup(e){const s=It(),l=z(),i=f(!1),n=f(!1),a=$("refreshData"),o=u(()=>e.bountyDetail.status===x.COMPLETED),c=u(()=>e.bountyDetail.status===x.COMPLETED?"Completed":"Close bounty");return{visibleFailCloseBounty:i,visibleConfirmCloseBounty:n,disabled:o,closeDesc:c,route:l,dialog:s,refreshData:a}},render(){const e=async()=>{const n=this.bountyDetail.founder_deposit,a=this.bountyDetail.applicant_deposit;Number(n)===0&&Number(a)===0?this.visibleConfirmCloseBounty=!0:this.visibleFailCloseBounty=!0},s=()=>{this.visibleFailCloseBounty=!1},l=()=>{this.visibleConfirmCloseBounty=!1},i=async()=>{const{error:n}=await st["Bounty@close-bounty"]({bounty_id:this.bountyDetail.id});n&&console.warn("bounty close fail by error",n),l(),this.refreshData&&this.refreshData()};return t(b,null,[t(M,{visible:this.visibleFailCloseBounty,title:"Failed to close bounty",content:"The bounty cannot be closed until you release all deposits.",onTriggerDialog:s},{btns:()=>t("div",{class:"flex mt-10 justify-end"},[t(p,{type:"primary",class:"w-164px",size:"small",onClick:s},{default:()=>[r("OK")]})])}),t(M,{visible:this.visibleConfirmCloseBounty,title:"Close the bounty?",content:"The bounty will be closed once you click 'Yes'.",onTriggerDialog:l},{btns:()=>t("div",{class:"flex mt-10 gap-2 justify-end"},[t(p,{class:"w-164px",size:"small",onClick:l},{default:()=>[r("Cancel")]}),t(p,{type:"primary",class:"w-164px",size:"small",onClick:i},{default:()=>[r("Yes")]})])}),t(p,{ghost:!0,class:`${this.$attrs.class}`,disabled:this.disabled,onClick:e,size:"small"},{default:()=>[this.closeDesc]})])}}),tt=y({props:{detailChainId:{type:Number,default:()=>0}},setup(){const e=V().connected,s=W(),l=z(),i=f(!1),n=$("bountyDetail"),a=u(()=>n==null?void 0:n.value.is_lock),o=u(()=>((n==null?void 0:n.value.status)||0)>=x.COMPLETED);return{visible:i,bountyDetail:n,is_lock:a,isCompleted:o,route:l,walletConnected:e,userStore:s}},render(){if(!this.bountyDetail)return null;const e=()=>{this.visible=!this.visible},s=async()=>{if(!await B(this.detailChainId))return;if(!this.walletConnected)return this.userStore.logout();const{bountyContract:n}=L(this.bountyDetail);await n.unlock("Unlock the deposits from bounty contract.","Successfully unlock."),e()},l=async()=>{if(!await B(this.detailChainId))return;if(!this.walletConnected)return this.userStore.logout();const{bountyContract:n}=L(this.bountyDetail);await n.lock("Lock the deposits into bounty contract.","Successfully lock.")};return t(b,null,[t(M,{visible:this.visible,title:"Unlock the deposit?",content:"Make sure that you have received rewards before unlocking the deposit.",onTriggerDialog:e},{btns:()=>t("div",{class:"flex mt-10 justify-end"},[t(p,{type:"default",class:"mr-16px w-164px",size:"small",onClick:e},{default:()=>[r("Cancel")]}),t(p,{type:"primary",class:"w-164px",size:"small",onClick:s},{default:()=>[this.is_lock?"Yes":"Submit"]})])}),this.is_lock?t(p,{disabled:this.isCompleted,type:"primary",class:`${this.$attrs.class}`,onClick:e},{default:()=>[r("UnLock")]}):t(p,{disabled:this.isCompleted,type:"primary",class:`${this.$attrs.class}`,onClick:l},{default:()=>[r("Lock")]})])}}),_e=y({props:{detailChainId:{type:Number,default:()=>0},bountyDetail:{type:Object,required:!0}},setup(e){const s=z(),l=f(!1),i=V().connected,n=W(),a=u(()=>e.bountyDetail.founder_deposit===0&&e.bountyDetail.my_deposit===0&&e.bountyDetail.status===0),o=u(()=>!!e.bountyDetail.is_lock||e.bountyDetail.status>=x.COMPLETED||e.bountyDetail.status===x.COMPLETED||a.value||e.bountyDetail.founder_deposit==0&&e.bountyDetail.applicant_deposit==0),c=u(()=>e.bountyDetail.founder_deposit==0&&e.bountyDetail.applicant_deposit==0?"Not any deposit is in the contract.":null);return{visible:l,disabled:o,route:s,disabledText:c,walletConnectd:i,userStore:n}},render(){const e=async()=>{!await B(this.detailChainId)||(this.visible=!this.visible)},s=async()=>{if(!await B(this.detailChainId))return;if(!this.walletConnectd)return this.userStore.logout();const{bountyContract:i}=L(this.bountyDetail),n=await i.release("The deposits are releasing.","Successfully release.");e(),n||console.warn("handleReleaseDeposit error")};return t(b,null,[t(M,{visible:this.visible,title:"Release the deposit?",content:"All deposits will be released at once you click 'Yes'.",onTriggerDialog:e},{btns:()=>t("div",{class:"flex mt-10 justify-end"},[t(p,{type:"default",class:"mr-16px w-164px",size:"small",onClick:e},{default:()=>[r("Cancel")]}),t(p,{type:"primary",class:"w-164px",size:"small",onClick:s},{default:()=>[r("Yes")]})])}),this.disabledText?t(S,null,{trigger:()=>t("div",{class:`${this.$attrs.class}`},[t(p,{class:`${this.$attrs.class} w-full`,type:"primary",disabled:!0,size:"small"},{default:()=>[r("Release")]})]),default:()=>this.disabledText}):t(p,{class:`${this.$attrs.class}`,type:"primary",disabled:this.disabled,onClick:e,size:"small"},{default:()=>[r("Release")]})])}});const we=e=>{const s=j.findIndex(l=>l.value===e);return s!==-1?j[s].type:""},ke=y({name:"Payment",props:{bountyDetail:{type:Object,required:!0},bountyExpired:{type:Boolean,default:!1}},setup(e){const s=u(()=>{var c;return((c=e.bountyDetail)==null?void 0:c.chain_id)||0}),l=u(()=>e.bountyDetail.payment_mode===1?"stage":"period"),i=u(()=>e.bountyDetail.applicant_deposit),n=f(0),a=()=>{n.value=Date.now(),setTimeout(a,1e3)};a();const o=$("rewordsInfo");return{payMode:l,bountyApplicantAmount:i,currentClientTime:n,detailChainId:s,rewordsInfo:o}},render(){var l,i,n,a,o,c,m,v,_,C;const e=we(((l=this.bountyDetail)==null?void 0:l.payment_mode)||1),s=((i=this.bountyDetail.terms)==null?void 0:i.length)||0;return t(b,null,[t("div",{class:"flex <lg:block"},[t(Q,{class:"flex-1 mr-6 <lg:mb-6",title:"Rewards"},{default:()=>{var g,d,h,D,k;return[t("div",{class:"flex flex-col h-38 mt-2 items-center"},[t("div",{class:"flex flex-1 items-end"},[t("div",null,[t(E,{value:`${((g=this.rewordsInfo)==null?void 0:g.token1_amount)||0}`,unit:(d=this.rewordsInfo)==null?void 0:d.token1_symbol,enhance:24,digit:4},null),t(E,{value:`${((h=this.rewordsInfo)==null?void 0:h.token2_amount)||0}`,class:"mt-10",unit:((D=this.rewordsInfo)==null?void 0:D.token2_symbol)||"TOKEN",plus:!0,enhance:24,digit:4},null)])])]),(this.bountyDetail.my_role!=w.FOUNDER||this.bountyDetail.my_role===w.FOUNDER)&&t("div",{class:"flex mt-6"},[this.bountyDetail.my_role!=w.FOUNDER&&t(Ce,{class:"flex-1",disabled:this.bountyDetail.my_status===A.APPLIED||this.bountyDetail.status>=x.WORKSTARTED||Number((k=this.bountyDetail)==null?void 0:k.apply_deadline)<=this.currentClientTime,bountyExpired:this.bountyExpired,detailChainId:this.detailChainId,applicantApplyStatus:this.bountyDetail.my_status,applicantDepositMinAmount:this.bountyDetail.applicant_min_deposit},null),this.bountyDetail.my_role===w.FOUNDER&&t(De,{class:"flex-1",detailChainId:this.detailChainId,bountyDetail:this.bountyDetail},null)])]}}),t(Q,{class:"flex-1",lock:!!this.bountyDetail.is_lock},{default:()=>{var g;return[t("div",{class:"flex flex-col h-38 items-center"},[t("div",{class:"flex flex-1 items-end"},[t("div",null,[t("p",{class:"h-6 px-1 text-grey3 u-body4"},[r("Founder ")]),t(E,{textColor:"text-warning",value:`${this.bountyDetail.founder_deposit||0}`,unit:this.bountyDetail.deposit_contract_token_symbol,enhance:24,digit:4},null),t("p",{class:"h-6 mt-4 px-1 text-grey3 u-body4"},[r("Applicant ")]),t(E,{textColor:"text-warning",value:`${this.bountyApplicantAmount}`,enhance:24,digit:4,unit:this.bountyDetail.deposit_contract_token_symbol},null)])])]),t("div",{class:"flex mt-6"},[this.bountyDetail.my_role!=w.FOUNDER&&t(b,null,[this.bountyDetail.status<x.WORKSTARTED&&t(X,{class:"flex-1",detailChainId:this.detailChainId,disabled:this.bountyDetail.my_status!==A.APPLIED},null),this.bountyDetail.status>=x.WORKSTARTED&&this.bountyDetail.my_status!==A.APPROVED&&this.bountyDetail.my_status!==A.UNAPPROVED&&t(X,{class:"flex-1",detailChainId:this.detailChainId,disabled:!0},null),(this.bountyDetail.my_status===A.APPROVED||this.bountyDetail.my_status===A.UNAPPROVED)&&t(tt,{detailChainId:this.detailChainId,class:"flex-1"},null)]),this.bountyDetail.my_role===w.FOUNDER&&t(b,null,[((g=this.bountyDetail.approved)==null?void 0:g.status)===A.APPROVED&&Number(this.bountyDetail.expired_time)>0&&this.currentClientTime-Number(this.bountyDetail.expired_time)>=0&&this.bountyDetail.is_lock?t(tt,{detailChainId:this.detailChainId,class:"flex-1"},null):t("div",{class:"flex flex-1 gap-4"},[t(ge,{detailChainId:this.detailChainId,bountyDetail:this.bountyDetail,class:"flex-1"},null),t(_e,{detailChainId:this.detailChainId,bountyDetail:this.bountyDetail,class:"flex-1"},null)])])])]},title:()=>t("div",{class:`flex items-center overflow-hidden border-b p-4 ${this.bountyDetail.is_lock?"bg-[#fbeaea] border-error":"bg-purple border-b border-color-border"}`},[t("div",{class:"flex-1 text-color1 u-h4"},[r("Deposit")]),this.bountyDetail.is_lock?t(S,null,{trigger:()=>t(Ht,null,null),default:()=>t("div",null,[t("p",null,[r("The deposit is locked \uFF01")]),t("p",null,[r("1.The deposit can be unlocked by approved appicant and be released by founder.")]),t("p",null,[r("2.The approved applicant need to post update at least 1 time within 5 days in the working for bounty")])])}):t(Zt,null,null)])})]),t("div",{class:"flex mt-10 mb-6 justify-between items-center"},[t("div",{class:" font-medium text-color3"},[r("Terms")]),this.payMode==="stage"&&t("div",{class:"mt-2 u-h7 <lg:mt-0"},[t("span",{class:"text-color3"},[r("Total Stage: ")]),t("span",{class:"text-primary "},[((n=this.bountyDetail.terms)==null?void 0:n.length)||0])]),this.payMode==="period"&&t("div",{class:"mt-2 u-h7 <lg:mt-0"},[t("span",{class:"text-color3"},[r("Total Period: ")]),t("span",{class:"text-primary"},[`${s} ${s>1?Y(e):e}`]),t("span",{class:" ml-10 text-grey3"},[r("Daily working: ")]),t("span",{class:"text-primary"},[`${((o=(a=this.bountyDetail)==null?void 0:a.period)==null?void 0:o.hours_per_day)||0} ${(((m=(c=this.bountyDetail)==null?void 0:c.period)==null?void 0:m.hours_per_day)||0)>1?Y("Hour"):"Hour"}`])])]),this.payMode==="stage"&&this.bountyDetail.terms&&this.bountyDetail.terms.map(g=>t(xe,{item:g,detailChainId:this.detailChainId},null)),this.payMode==="period"&&t(ve,{total:((v=this.bountyDetail.terms)==null?void 0:v.length)||0},{default:()=>[this.bountyDetail.terms&&this.bountyDetail.terms.map(g=>t(ye,{info:g},null))]}),this.payMode==="period"&&t("div",{class:"border-solid border-color-border border-width-1px rounded-sm mt-24px max-h-258px p-24px overflow-hidden"},[t("p",{class:"mb-6 text-color3 u-h3"},[r("Target")]),t("p",{class:"font-[14px] text-color max-h-[162px] overflow-y-scroll",innerHTML:(C=(_=this.bountyDetail)==null?void 0:_.period)==null?void 0:C.terms},null)])])}}),et=y({name:"PersonalCard",props:{profile:{type:Object,require:!0}},setup(e){const s=lt(),l=u(()=>{var i,n,a,o,c,m;return{skills:(i=e.profile)==null?void 0:i.skills,comerId:(n=e.profile)==null?void 0:n.id,name:(a=e.profile)==null?void 0:a.name,avatar:((o=e.profile)==null?void 0:o.avatar)||"",location:(c=e.profile)==null?void 0:c.location,timeZone:(m=e.profile)==null?void 0:m.time_zone}});return{router:s,normalize:l}},render(){const e=()=>{var s;this.router.push({path:"/builder",query:{id:(s=this.normalize)==null?void 0:s.comerId}})};return t("div",{class:"flex"},[t(at,{avatar:this.normalize.avatar,onClickAvatar:e,class:"!h-9 !w-9"},null),t("div",{class:"flex-1 ml-4 overflow-hidden"},[t("div",{class:" mb-2 truncate u-h3"},[this.normalize.name]),t("div",{class:"flex flex-wrap mb-2 gap-2 items-center"},[Array.isArray(this.normalize.skills)&&t(b,null,[this.normalize.skills.map((s,l)=>l+1<4?t(N,{class:"text-[#211B42]",key:s.id},{default:()=>{var i;return[(i=s.tag)==null?void 0:i.name]}}):null),this.normalize.skills.length-4>0?t(N,{class:"text-[#211B42]"},{default:()=>[r("+ "),this.normalize.skills.length-4]}):null])]),t("div",{class:"mb-2 text-color3 text-[14px] leading-4 u-h6"},[this.normalize.location?`${this.normalize.location} \xB7 `:"",this.normalize.timeZone])])])}}),Se=y({name:"PostUpdate",props:{disabled:{type:Boolean,require:!0,default:()=>!1},gapValue:{type:Number,required:!0,default:0},bountyContractInfo:{type:Object},postUpdate:{type:Function,require:!0,default:()=>!1},bountyDetail:{type:Object,required:!0}},emits:["updateStatus"],setup(e,s){const l=f(!1),i=u(()=>e.bountyDetail.my_role===w.FOUNDER?e.bountyDetail.status>x.WORKSTARTED:e.bountyDetail.my_role===w.APPLICANT?e.bountyDetail.status!==x.WORKSTARTED:!0),n=u(()=>i.value?e.bountyDetail.status>=x.COMPLETED?"The update button is unavailable when the bounty completed":"The update button can only be available to be approved applicant.":null);return{visible:l,disabled:i,tooltip:n}},render(){const e=()=>{this.visible=!this.visible};return t("div",{class:"<lg:flex <lg:justify-end"},[t(gt,{gapValue:this.gapValue,postUpdate:this.postUpdate,visible:this.visible,bountyDetail:this.bountyDetail,onTriggerDialog:s=>{e(),this.$emit("updateStatus",s)}},null),this.tooltip?t(S,{trigger:"hover",placement:"top"},{trigger:()=>t("div",null,[t(p,{type:"primary",size:"small",class:"w-35",disabled:this.disabled,color:"rgba(0,0,0,0.1)"},{default:()=>[r("Post update")]})]),default:()=>this.tooltip}):t(p,{type:"primary",size:"small",class:"w-35",onClick:e,disabled:this.disabled,color:this.disabled?"rgba(0,0,0,0.1)":""},{default:()=>[r("Post update")]})])}}),Te=y({name:"StartupCard",props:{startup:{type:Object,require:!0}},setup(e){const s=lt(),l=()=>{var a,o;(a=e.startup)!=null&&a.id&&s.push({path:`/project/${(o=e.startup)==null?void 0:o.id}`})},i=u(()=>{var a;return Bt(((a=e.startup)==null?void 0:a.type)||0)}),n=u(()=>(e.startup?Tt(e.startup.socials):[]).map(a=>{const o=J.findIndex(c=>c.value===a.type);return{...a,label:o===-1?"":J[o].label}}).filter(a=>a.value));return{modeName:i,toComerDetail:l,socialList:n}},render(){var s;const e=((s=this.startup)==null?void 0:s.tags)||[];return t(R,null,{default:()=>{var l,i,n,a,o;return[t("div",{class:"flex "},[t($t,{src:((l=this.startup)==null?void 0:l.logo)||"",class:"cursor-pointer h-15 mr-6 w-15",onClick:this.toComerDetail},null),t("div",{class:"flex-1 overflow-hidden"},[t("div",{class:"mb-2 text-color1 truncate u-h3"},[(i=this.startup)==null?void 0:i.name]),t("div",{class:"flex items-center"},[(((n=this.startup)==null?void 0:n.type)||0)>0&&t(N,{class:"text-color2"},{default:()=>[this.modeName]})])])]),e.length>0&&t("div",{class:"flex flex-wrap mt-4 text-[#211B42] gap-2"},[e.slice(0,4).map(c=>t(N,{key:c.id},{default:()=>{var m;return[(m=c.tag)==null?void 0:m.name]}})),e.length-4>0?t(N,null,{default:()=>[r("+ "),e.length-4]}):null]),((a=this.startup)==null?void 0:a.mission)&&t("p",{class:"mt-2 text-color2 u-h5 line-clamp-3"},[(o=this.startup)==null?void 0:o.mission]),t("div",{class:"flex mt-4 gap-6"},[this.socialList.map(c=>t(At,{icon:c.label,disable:!c.value,address:c.value},null))])]}})}}),Z=f(!1);function Ie(e){const s=f(),l=async(i=!1)=>{if(e){if(!s.value&&!Z.value||i){Z.value=!0;const{error:n,data:a}=await st["Bounty@get-bounty-info"]({bounty_id:e});Z.value=!1,n||(s.value=a)}return s}else return console.warn("useBounty() missing param [bounty_id]")};return l(),{reload:()=>l(!0),detail:s,applicants:u(()=>{var i;return(i=s.value)==null?void 0:i.applicants}),post_updates:u(()=>{var i;return(i=s.value)==null?void 0:i.post_updates}),startup:u(()=>{var i;return(i=s.value)==null?void 0:i.startup}),founder:u(()=>{var i;return(i=s.value)==null?void 0:i.founder}),approved:u(()=>{var i;return(i=s.value)==null?void 0:i.approved}),deposit_records:u(()=>{var i;return(i=s.value)==null?void 0:i.deposit_records})}}const rs=y({name:"BountyDetail",setup(){const e=z(),s=Number(e.params.id),l=ct(),i=V(),n=f(!1),a=Ie(s),o=f(),c=f(),m=f(0),v=f("day"),_=u(()=>{var d;return(d=a.detail.value)!=null&&d.chain_id?Pt(a.detail.value.chain_id):null}),C=u(()=>{var T;const d=I().utcOffset(0).unix(),h=I.utc(((T=a.detail.value)==null?void 0:T.apply_deadline)||"").unix(),D=!a.applicants.value||a.applicants.value.length==0;return!!(h>0&&d>0&&d>=h&&D)}),g=u(()=>{var d,h,D;return Array.isArray((d=a.detail.value)==null?void 0:d.terms)?(h=a.detail.value)==null?void 0:h.terms.reduce((k,T)=>({token1_amount:Number(k.token1_amount)+Number(T.token1_amount),token1_symbol:T.token1_symbol,token2_amount:Number(k.token2_amount)+Number(T.token2_amount),token2_symbol:T.token2_symbol}),{token1_amount:0,token1_symbol:"--",token2_amount:0,token2_symbol:"--"}):((D=a.detail.value)==null?void 0:D.period)||{token1_amount:0,token1_symbol:"--",token2_amount:0,token2_symbol:"--"}});return q("paramBountyId",s),q("bountyDetail",u(()=>a.detail.value)),q("refreshData",a.reload),q("rewordsInfo",g),mt(()=>a.detail.value,d=>{if(!d)n.value=!0;else{if(n.value=!1,(d==null?void 0:d.contract_address)&&!c.value&&i.connected){const{bountyContract:h}=L(d);c.value=h.postUpdate}if(d!=null&&d.expired_time){const h=new Date(Number(d.expired_time)),D=I(h).diff(I(new Date),"day");if(D>0)v.value="day",m.value=D;else{const k=I(new Date(h)).diff(I(new Date),"hour");k>0?(v.value="hour",m.value=k):(v.value="minute",m.value=I(new Date(h)).diff(I(new Date),"minute"))}}}},{immediate:!0}),ft(()=>{l.unsubscribe("bounty",2)}),l.init().then(d=>{l.subscribe("bounty",2,h=>{console.log("subscribe bounty",h,s),h.topic==="subscribe"&&h.data.target_id===s&&(console.warn("socket get detail change, do update...",s),a.reload())},s)}),{bountyContract:o,postUpdate:c,bountySection:a,loading:n,gapValue:m,gapUnit:v,chainInfo:_,bountyExpired:C,rewordsInfo:g}},render(){var l,i;const e=n=>{const a=j.findIndex(o=>o.value===n);return a!==-1?j[a].type.toUpperCase():""},s=Number((l=this.bountySection.detail.value)==null?void 0:l.founder_deposit)+Number((i=this.bountySection.detail.value)==null?void 0:i.applicant_deposit);return t(dt,{show:this.loading},{default:()=>{var n,a,o,c,m,v,_,C,g;return[t("div",{class:"flex gap-6 relative <lg:pt-10 <lg:block"},[((n=this.bountySection.detail.value)==null?void 0:n.startup)&&this.bountySection.detail.value.startup.name&&t(Rt,{class:"top-0 left-[100%] absolute <lg:left-auto <lg:right-0",generate:{banner:this.bountySection.detail.value.startup.banner,logo:this.bountySection.detail.value.startup.logo,name:this.bountySection.detail.value.startup.name+"-Bounty",infos:[{count:((a=this.rewordsInfo)==null?void 0:a.token1_amount)||0,unit:(o=this.rewordsInfo)==null?void 0:o.token1_symbol,label:"Rewards"},{count:s,unit:this.bountySection.detail.value.deposit_contract_token_symbol,label:"Deposit"}]},route:window.location.href,title:((c=this.bountySection.detail.value.startup)==null?void 0:c.name)+"--Bounty | GoRollux",description:"Check out the bounty on GoRollux, The lead building launchpad on Rollux and Syscoin",text:`${this.bountySection.detail.value.startup.name} just posted a #bounty that pays out ${((m=this.rewordsInfo)==null?void 0:m.token1_amount)||0} ${(v=this.rewordsInfo)==null?void 0:v.token1_symbol}${(_=this.rewordsInfo)!=null&&_.token2_amount?"+"+((C=this.rewordsInfo)==null?void 0:C.token2_amount)+" "+((g=this.rewordsInfo)==null?void 0:g.token2_symbol):""}, check out this #rewards on #GoRollux Network: `,tipPlacement:"right"},null),t("div",{class:"w-86 overflow-hidden <lg:w-auto"},[this.bountySection.startup.value&&t(Te,{startup:this.bountySection.startup.value,class:"mb-6"},null),t(R,{title:"Founder",class:"mb-6"},{default:()=>[this.bountySection.founder.value&&t(et,{profile:this.bountySection.founder.value},null)]}),t(R,{title:"Approved",class:"mb-6"},{default:()=>{var d,h;return[(((d=this.bountySection.approved.value)==null?void 0:d.comer_id)||0)>0&&t(et,{profile:(h=this.bountySection.approved.value)==null?void 0:h.comer},null)]}}),t(R,{title:"Deposit records",class:"<lg:mb-6"},{default:()=>[this.bountySection.deposit_records.value&&this.bountySection.deposit_records.value.length>0&&t(b,null,[this.bountySection.deposit_records.value.map((d,h)=>{var D;return t(ne,{class:"mb-4",depositInfo:d,key:d.id,tokenSymbol:" "+(((D=this.bountySection.detail.value)==null?void 0:D.deposit_contract_token_symbol)||"")},null)})])]})]),t("div",{class:" flex-1 overflow-hidden"},[this.bountySection.detail.value&&t(fe,{bountyDetail:this.bountySection.detail.value,class:"mb-6"},null),t(R,{title:"payment",class:"mb-6"},{default:()=>[this.bountySection.detail.value&&t(ke,{bountyDetail:this.bountySection.detail.value,bountyExpired:this.bountyExpired},null)],header:()=>{var d,h,D,k,T;return t("div",{class:"flex justify-between <lg:block"},[t("p",{class:"flex items-center"},[t("span",{class:"flex-1 mr-6 text-color2 u-h5"},[r("Payment")]),((d=this.bountySection.detail.value)==null?void 0:d.payment_mode)===1?t(b,null,[t(bt,{class:"h-4 w-4"},null),t("p",{class:"font-medium text-primary ml-2"},[r("Stage")])]):t(b,null,[t(yt,{class:"h-4 text-primary w-4"},null),t("p",{class:"font-medium text-primary ml-2"},[r("Period:")," ",e(((D=(h=this.bountySection.detail.value)==null?void 0:h.period)==null?void 0:D.period_type)||1)])])]),t("div",{class:"flex items-center <lg:justify-end"},[t("img",{src:(k=this.chainInfo)==null?void 0:k.logo,class:"h-4 w-4"},null)," ",t("span",{class:"font-thin  ml-2 tracking-normal text-color2"},[(T=this.chainInfo)==null?void 0:T.name])])])}}),t(R,{title:"Activities",class:"mb-6"},{default:()=>[this.bountySection.post_updates.value&&this.bountySection.post_updates.value.length>0&&t(b,null,[this.bountySection.post_updates.value.map(d=>t(pe,{activity:d},null))])],"header-extra":()=>t("div",{class:"flex items-center <lg:block"},[this.bountySection.detail.value&&this.bountySection.detail.value.status!==void 0&&this.bountySection.detail.value.status>=x.WORKSTARTED&&t(b,null,[this.bountySection.detail.value.my_role!==w.FOUNDER&&(this.gapValue>=0?t(S,{trigger:"hover",placement:"bottom"},{trigger:()=>t("div",{class:"flex items-center"},[t(Mt,{class:`${this.gapValue>=0?"text-color3":"text-error"} w-4 h-4 mr-2.5`},null),t("p",{class:"flex mr-4 text-grey3 items-center "},[r("Founder can unlock after"),t("span",{class:"mx-1 text-primary"},[this.gapValue]),this.gapValue>1?`${Y(this.gapUnit)}`:this.gapUnit])]),default:()=>t("div",{class:"w-84"},[r("Post an update at least every 5 days, otherwise you will lose the permission to lock the deposit, and the founder can unlock.")])}):t("p",{class:"flex text-error mr-4 items-center <lg:mr-0"},[r("Founder can already unlock deposits")]))]),this.bountySection.detail.value&&t(Se,{gapValue:this.gapValue,postUpdate:this.postUpdate,bountyDetail:this.bountySection.detail.value},null)])}),t(R,{title:"Applicants"},{default:()=>[this.bountySection.applicants.value&&this.bountySection.applicants.value.length>0&&t(b,null,[this.bountySection.applicants.value.map(d=>{var h;return t(ue,{detailChainId:((h=this.bountySection.detail.value)==null?void 0:h.chain_id)||0,applicant:d},null)})])]})])])]}})}});export{rs as default};

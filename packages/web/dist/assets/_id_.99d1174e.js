import{O as Le,S as P,U as V,B as X,a4 as Me,i as ge,P as D,a5 as Ve,a6 as de,w as ue,K as re,a2 as Q,_ as L,F as Z,a as N,h as B,b as ve,e as Ne,k as be,a7 as Ue,D as ce,m as O,a8 as Te,n as $e,Y as De,a9 as Ie,c as Ee,X as qe,q as J,z as ee,R as Be,v as ie,p as ye,H as le,u as je,aa as He,ab as Fe}from"./index.ac02f68f.js";import{e as Ge,u as Re,o as ze}from"./vue.5bd64dc7.js";import{r as Pe}from"./Empty.d0789566.js";import{bD as j,bf as H,bg as $,l as M,bm as e,r as m,av as E,t as _e,w as F,M as y,j as n,H as q,F as G,n as Ze,k as Oe,aW as We,G as Ye,cs as Ke}from"./bundle.f4813fa2.js";import{c as we,d as ne,a as Qe,b as Xe,r as Je}from"./Upload.baaf1d2f.js";import{M as et,v as ae,c as se,a as he}from"./valid.935dd966.js";import{r as Ce,a as xe}from"./MinusCircle.5e3a505f.js";import{r as tt}from"./Question.9547e1ed.js";import{u as at}from"./erc20.e9c36ea3.js";import{g as Se,S as st,a as lt,b as rt,c as it}from"./startup.3b3d8368.js";import{u as nt}from"./startup.427454b6.js";import{F as ot}from"./ui.e26017cf.js";import{B as dt,d as ke,u as ut}from"./BasicSortable.c3ff6d84.js";import{u as ct}from"./useTags.f9c969ef.js";import{c as me,g as ht}from"./util.25bcdacb.js";import{r as mt}from"./Setting.4e1b5c78.js";import{B as pt}from"./Unapprove.f6f6b723.js";import"./tools.becc2b88.js";import"./ethers.043ad920.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";import"./share.51f4a725.js";import"./vuedraggable.27962920.js";import"./bountyFactory.4905ecc7.js";import"./index.160e8328.js";import"./wallet.4184d84f.js";import"./etherscan.83df9912.js";import"./bounty.b5687463.js";const ft={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},gt=$("path",{d:"M15.8333 2.5H4.16667C3.25 2.5 2.5 3.25 2.5 4.16667V15.8333C2.5 16.75 3.25 17.5 4.16667 17.5H15.8333C16.75 17.5 17.5 16.75 17.5 15.8333V4.16667C17.5 3.25 16.75 2.5 15.8333 2.5ZM15.8333 15.8333H4.16667V4.16667H15.8333V15.8333ZM5.83333 8.33333H7.5V14.1667H5.83333V8.33333ZM9.16667 5.83333H10.8333V14.1667H9.16667V5.83333ZM12.5 10.8333H14.1667V14.1667H12.5V10.8333Z",fill:"currentColor"},null,-1),vt=[gt];function bt(t,s){return j(),H("svg",ft,vt)}const yt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},_t=$("path",{d:"M9.99999 1.6665C5.39999 1.6665 1.66666 5.39984 1.66666 9.99984C1.66666 14.5998 5.39999 18.3332 9.99999 18.3332C14.6 18.3332 18.3333 14.5998 18.3333 9.99984C18.3333 5.39984 14.6 1.6665 9.99999 1.6665ZM9.99999 16.6665C6.32499 16.6665 3.33332 13.6748 3.33332 9.99984C3.33332 6.32484 6.32499 3.33317 9.99999 3.33317C13.675 3.33317 16.6667 6.32484 16.6667 9.99984C16.6667 13.6748 13.675 16.6665 9.99999 16.6665ZM10.2583 9.28317C8.78332 8.90817 8.30832 8.49984 8.30832 7.8915C8.30832 7.1915 8.96666 6.69984 10.0583 6.69984C11.2083 6.69984 11.6417 7.24984 11.675 8.0665H13.1C13.0583 6.94984 12.375 5.92484 11.025 5.5915V4.1665H9.08332V5.57484C7.82499 5.8415 6.81666 6.65817 6.81666 7.9165C6.81666 9.40817 8.05832 10.1582 9.86666 10.5915C11.4917 10.9748 11.8167 11.5498 11.8167 12.1498C11.8167 12.5915 11.4917 13.3082 10.0667 13.3082C8.73332 13.3082 8.20832 12.7082 8.13332 11.9415H6.69999C6.78332 13.3582 7.83332 14.1582 9.08332 14.4165V15.8332H11.0333V14.4415C12.3 14.1998 13.3 13.4748 13.3083 12.1332C13.3 10.2998 11.725 9.6665 10.2583 9.28317Z",fill:"currentColor"},null,-1),wt=[_t];function Ct(t,s){return j(),H("svg",yt,wt)}const xt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},St=$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8333 15.8333V4.16667H4.16667V15.8333H15.8333ZM4.16667 2.5H15.8333C16.75 2.5 17.5 3.25 17.5 4.16667V15.8333C17.5 16.75 16.75 17.5 15.8333 17.5H4.16667C3.25 17.5 2.5 16.75 2.5 15.8333V4.16667C2.5 3.25 3.25 2.5 4.16667 2.5ZM5.83333 14.1667H11.6667V12.5H5.83333V14.1667ZM5.83333 10.8333H14.1667V9.16667H5.83333V10.8333ZM5.83333 7.5H14.1667V5.83333H5.83333V7.5Z",fill:"currentColor"},null,-1),kt=[St];function At(t,s){return j(),H("svg",xt,kt)}const Lt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Mt=$("path",{d:"M14.1666 2.5H5.83329C4.91663 2.5 4.16663 3.25 4.16663 4.16667V17.5L9.99996 15L15.8333 17.5V4.16667C15.8333 3.25 15.0833 2.5 14.1666 2.5ZM14.1666 15L9.99996 13.1833L5.83329 15V4.16667H14.1666V15Z",fill:"currentColor"},null,-1),Vt=[Mt];function Nt(t,s){return j(),H("svg",Lt,Vt)}const Ut={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},Tt=$("path",{d:"M21 11C20.7348 11 20.4804 11.1054 20.2929 11.2929C20.1054 11.4804 20 11.7348 20 12C20.0119 13.873 19.3703 15.6916 18.1857 17.1425C17.001 18.5933 15.3475 19.5857 13.51 19.9486C11.6724 20.3115 9.76578 20.0223 8.11851 19.1308C6.47123 18.2392 5.18641 16.8012 4.48533 15.0643C3.78425 13.3273 3.71079 11.4003 4.27762 9.61508C4.84445 7.82983 6.01607 6.29813 7.5907 5.28378C9.16533 4.26942 11.0444 3.83591 12.9043 4.05791C14.7641 4.27991 16.4884 5.14352 17.78 6.5H15.38C15.1148 6.5 14.8604 6.60536 14.6729 6.79289C14.4854 6.98043 14.38 7.23478 14.38 7.5C14.38 7.76522 14.4854 8.01957 14.6729 8.20711C14.8604 8.39464 15.1148 8.5 15.38 8.5H19.91C20.1752 8.5 20.4296 8.39464 20.6171 8.20711C20.8046 8.01957 20.91 7.76522 20.91 7.5V3C20.91 2.73478 20.8046 2.48043 20.6171 2.29289C20.4296 2.10536 20.1752 2 19.91 2C19.6448 2 19.3904 2.10536 19.2029 2.29289C19.0154 2.48043 18.91 2.73478 18.91 3V4.77C17.2447 3.17806 15.0808 2.20995 12.784 2.02933C10.4873 1.84871 8.19863 2.46664 6.30492 3.77869C4.41121 5.09074 3.02861 7.01641 2.39083 9.23019C1.75305 11.444 1.89921 13.8101 2.80461 15.9285C3.71001 18.047 5.31911 19.7878 7.3599 20.8568C9.40069 21.9258 11.748 22.2574 14.005 21.7955C16.2621 21.3336 18.2904 20.1065 19.7471 18.3217C21.2039 16.5369 21.9997 14.3038 22 12C22 11.7348 21.8946 11.4804 21.7071 11.2929C21.5196 11.1054 21.2652 11 21 11Z",fill:"currentColor"},null,-1),$t=[Tt];function Dt(t,s){return j(),H("svg",Ut,$t)}const It={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Et=$("path",{d:"M10 2.6585L15.8333 5.25016V9.16683C15.8333 12.9335 13.35 16.4085 10 17.4418C6.65 16.4085 4.16667 12.9335 4.16667 9.16683V5.25016L10 2.6585ZM10 0.833496L2.5 4.16683V9.16683C2.5 13.7918 5.7 18.1168 10 19.1668C14.3 18.1168 17.5 13.7918 17.5 9.16683V4.16683L10 0.833496ZM9.16667 5.8335H10.8333V7.50016H9.16667V5.8335ZM9.16667 9.16683H10.8333V14.1668H9.16667V9.16683Z",fill:"currentColor"},null,-1),qt=[Et];function Bt(t,s){return j(),H("svg",It,qt)}const jt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Ht=$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.29183C2.5 3.76256 2.92906 3.3335 3.45833 3.3335H10.7083C11.2376 3.3335 11.6667 3.76256 11.6667 4.29183C11.6667 4.8211 11.2376 5.25016 10.7083 5.25016H3.45834C2.92906 5.25016 2.5 4.8211 2.5 4.29183ZM2.5 8.16687C2.5 7.70663 2.8731 7.33354 3.33333 7.33354H9.16667C9.6269 7.33354 10 7.70663 10 8.16687C10 8.62711 9.6269 9.0002 9.16667 9.0002H3.33333C2.8731 9.0002 2.5 8.62711 2.5 8.16687ZM3.33333 11.0835C2.8731 11.0835 2.5 11.4566 2.5 11.9169C2.5 12.3771 2.8731 12.7502 3.33333 12.7502H6.66667C7.1269 12.7502 7.5 12.3771 7.5 11.9169C7.5 11.4566 7.1269 11.0835 6.66667 11.0835H3.33333ZM2.5 15.6669C2.5 15.2066 2.8731 14.8335 3.33333 14.8335H6.66667C7.1269 14.8335 7.5 15.2066 7.5 15.6669C7.5 16.1271 7.1269 16.5002 6.66667 16.5002H3.33333C2.8731 16.5002 2.5 16.1271 2.5 15.6669ZM15.8333 4.16683C15.8333 3.70659 15.4602 3.3335 15 3.3335C14.5398 3.3335 14.1667 3.70659 14.1667 4.16683V14.0718L13.0176 12.9228C12.6922 12.5974 12.1646 12.5974 11.8391 12.9228C11.5137 13.2482 11.5137 13.7759 11.8391 14.1013L14.1962 16.4583C14.3772 16.6393 14.6207 16.7197 14.8573 16.6993C15.0214 16.7134 15.1889 16.679 15.3365 16.5961C15.4949 16.5261 15.6274 16.4082 15.7156 16.2608L17.8751 14.1013C18.2005 13.7758 18.2005 13.2482 17.8751 12.9228C17.5497 12.5973 17.022 12.5973 16.6966 12.9228L15.8333 13.786L15.8333 4.16683Z",fill:"currentColor"},null,-1),Ft=[Ht];function Gt(t,s){return j(),H("svg",jt,Ft)}const Rt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},zt=$("path",{d:"M10.0397 14.5H5.51587L2.5 17.5V4C2.5 3.175 3.17857 2.5 4.00794 2.5H16.0714C16.9008 2.5 17.5794 3.175 17.5794 4V9.25H16.0714V4H4.00794V13H10.0397V14.5ZM18.3333 11.755L17.2702 10.6975L14.0734 13.8775L12.475 12.2875L11.4119 13.345L14.0659 16L18.3333 11.755Z",fill:"currentColor"},null,-1),Pt=[zt];function Zt(t,s){return j(),H("svg",Rt,Pt)}const Ot={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},Wt=$("path",{d:"M16 2C23.732 2 30 8.26802 30 16C30 23.732 23.732 30 16 30C8.26802 30 2 23.732 2 16C2 8.26802 8.26802 2 16 2Z",fill:"currentColor"},null,-1),Yt=$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.3275 10.7143L21.3175 11.7042C21.6299 12.0167 21.6299 12.5232 21.3175 12.8356L18.1346 16.018L21.3175 19.2007C21.6299 19.5132 21.6299 20.0197 21.3175 20.3321L20.3275 21.3221C20.0151 21.6345 19.5086 21.6345 19.1962 21.3221L16.0126 18.138L12.8322 21.3209C12.5198 21.6333 12.0132 21.6333 11.7008 21.3209L10.7109 20.3309C10.3985 20.0185 10.3985 19.512 10.7109 19.1996L13.8906 16.018L10.7109 12.8368C10.3985 12.5244 10.3985 12.0178 10.7109 11.7054L11.7008 10.7155C12.0132 10.403 12.5198 10.403 12.8322 10.7155L16.0126 13.896L19.1962 10.7143C19.5086 10.4019 20.0151 10.4019 20.3275 10.7143Z",fill:"white"},null,-1),Kt=[Wt,Yt];function Qt(t,s){return j(),H("svg",Ot,Kt)}const Xt={width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},Jt=$("path",{d:"M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30Z",fill:"#FF9900"},null,-1),ea=$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.082 19.0419C16.5423 19.0419 16.9154 19.415 16.9154 19.8753V22.0419C16.9154 22.5022 16.5423 22.8753 16.082 22.8753H13.9154C13.4551 22.8753 13.082 22.5022 13.082 22.0419V19.8753C13.082 19.415 13.4551 19.0419 13.9154 19.0419H16.082ZM16.082 6.80273C16.5423 6.80273 16.9154 7.17583 16.9154 7.63607V16.4031C16.9154 16.8633 16.5423 17.2364 16.082 17.2364H13.9154C13.4551 17.2364 13.082 16.8633 13.082 16.4031V7.63607C13.082 7.17583 13.4551 6.80273 13.9154 6.80273H16.082Z",fill:"white"},null,-1),ta=[Jt,ea];function aa(t,s){return j(),H("svg",Xt,ta)}const sa=M({props:{startup_id:{type:Number,required:!0}},render(){return e("div",{class:"bg-white border rounded-sm flex mb-6 min-h-200 relative  overflow-hidden items-center justify-center"},[e("div",{class:"my-9.5 mx-10"},[e(Le,null,{default:()=>[e(Pe,{class:"-mb-14"},null)]})])])}}),la=M({props:{data:{type:Object},startup_id:{type:Number,required:!0}},emits:["saved","edit"],setup(t,s){var c,o,d,u,p,_,x,S,w,U,h,f,k,T,A;const r=m(!1),a=m(),l=E({launched_at:(c=t.data)!=null&&c.launched_at&&Number((o=t.data)==null?void 0:o.launched_at)||null,contract:((d=t.data)==null?void 0:d.contract_address)||"",chain_id:Number((u=t.data)==null?void 0:u.chain_id)||null,name:(p=t.data)==null?void 0:p.name,symbol:(_=t.data)==null?void 0:_.symbol,supply:(x=t.data)!=null&&x.supply?Number((S=t.data)==null?void 0:S.supply):void 0,wallets:Array.isArray((w=t.data)==null?void 0:w.wallets)?t.data.wallets.map(R=>({name:R.name,address:R.address,id:R.id})):[{name:"",address:"",id:0}],presaleDate:((U=t.data)==null?void 0:U.presale_started_at)&&((h=t.data)==null?void 0:h.presale_ended_at)&&Number((f=t.data)==null?void 0:f.presale_started_at)&&Number((k=t.data)==null?void 0:k.presale_ended_at)?[Number((T=t.data)==null?void 0:T.presale_started_at),Number((A=t.data)==null?void 0:A.presale_ended_at)]:null});let i;return _e(()=>{i||(i=F(()=>l,()=>{console.log(11111111111,"finance change"),s.emit("edit")},{deep:!0}))}),{loading:r,form:a,info:l,handleSubmit:()=>{var R;(R=a.value)==null||R.validate(async te=>{var W;if(!te){r.value=!0;const{error:g}=await N["Startup@set-startup-finance"]({startup_id:t.startup_id,contract_address:l.contract,chain_id:l.chain_id,name:l.name,symbol:l.symbol,supply:l.supply,presale_started_at:l.presaleDate&&l.presaleDate[0]||void 0,presale_ended_at:l.presaleDate&&l.presaleDate[1]||void 0,launched_at:l.launched_at||void 0,wallets:(W=l.wallets)==null?void 0:W.filter(v=>v.name&&v.address)});r.value=!1,g||(B.success("Successfully saved"),s.emit("saved"))}})}}},render(){const t={chain_id:[{required:!0,validator(a,l){return l?!0:new Error("Launch Network is required")}}],wallets:[{required:!0,validator(a,l){if(l.length){if(l.filter(i=>!i.name||!i.address).length)return new Error("Incomplete wallet information");if(Array.from(new Set(l.map(i=>i.name))).length!==l.length)return new Error("Wallet name can not repeat")}else return new Error("Wallet is required");return!0},trigger:"change"}]},s=()=>{Array.isArray(this.info.wallets)||(this.info.wallets=[]),this.info.wallets.push({name:"",address:"",id:0})},r=a=>{Array.isArray(this.info.wallets)&&this.info.wallets.splice(a,1)};return e(Z,{show:this.loading},{default:()=>[e("div",{class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden"},[e(P,{ref:a=>this.form=a,rules:t,model:this.info},{default:()=>[e(V,{label:"Launch Network",path:"chain_id"},{default:()=>[e("div",{class:"w-full"},[e(X,{value:this.info.chain_id,"onUpdate:value":a=>this.info.chain_id=a,placeholder:"Select your launch network",clearable:!0,renderLabel:a=>[y(e(Me,{src:a.logo,class:"h-5 mr-2 w-5 inline float-left"},null)),a.label],options:ge.map(a=>({label:a.name,value:a.chainId,logo:a.logo}))},null)])]}),e(V,{label:"Token Name"},{default:()=>[e("div",{class:"w-full"},[e(D,{value:this.info.name,"onUpdate:value":a=>this.info.name=a,placeholder:"Please enter your Token Name",maxlength:50},null)])]}),e(V,{label:"Token Symbol"},{default:()=>[e("div",{class:"w-full"},[e(D,{value:this.info.symbol,"onUpdate:value":a=>this.info.symbol=a,placeholder:"Please enter your Token Symbol",maxlength:10},null)])]}),e(V,{label:"Token Supply"},{default:()=>[e("div",{class:"w-full"},[e(Ve,{value:this.info.supply,"onUpdate:value":a=>this.info.supply=a,placeholder:"Please enter your Token Supply",min:0,max:et},null)])]}),e(V,{label:"Token Contract",path:"contract"},{default:()=>[e(de,{placeholder:"Please enter your token contract address",value:this.info.contract,"onUpdate:value":a=>this.info.contract=a,noIcon:!0},null)]}),e(V,{label:"Presale"},{default:()=>[e("div",{class:"w-full"},[e(ue,{value:this.info.presaleDate,"onUpdate:value":a=>this.info.presaleDate=a,type:"daterange",clearable:!0,startPlaceholder:"yy-mm-dd (UTC time zone)",endPlaceholder:"yy-mm-dd (UTC time zone)"},null)])]}),e(V,{label:"Launch"},{default:()=>[e("div",{class:"w-full"},[e(ue,{value:this.info.launched_at,"onUpdate:value":a=>this.info.launched_at=a,type:"date",clearable:!0,placeholder:"yy-mm-dd (UTC time zone)"},null)])]}),e(V,{label:"Wallet",path:"wallets"},{default:()=>[e("div",{class:"w-full"},[Array.isArray(this.info.wallets)&&this.info.wallets.map((a,l)=>e("div",{class:`flex w-full items-center${l===0?"":" mt-2"}`},[e(re,{key:l,class:"flex w-full"},{default:()=>[e(D,{value:a.name,"onUpdate:value":i=>a.name=i,class:"!w-50",placeholder:"Wallet name",maxlength:24},null),e(de,{value:a.address,"onUpdate:value":i=>a.address=i,class:"flex-1",placeholder:"Please enter wallet address"},null)]}),Array.isArray(this.info.wallets)&&this.info.wallets.length>1&&e(Q,{class:"cursor-pointer ml-4 text-color3 hover:text-primary",onClick:()=>r(l)},null)]))])]}),e(L,{text:!0,onClick:s,type:"primary"},{default:()=>[e(we,{class:"mr-2"},null),n("ADD ANOTHER WALLET")]}),e("div",{class:"flex mt-10 items-center justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:this.handleSubmit},{default:()=>[n("Save")]})])]})])]})}});const pe=t=>e("div",{class:`flex justify-center items-center border rounded-r-lg bg-white w-30 ${t?"text-color1":"text-color3"}`},[t||"Token"]),ra=M({name:"StartupGovernance",props:{startup_id:{type:Number,required:!0},startup:{type:Object,required:!0}},emits:["saved","edit"],setup(t,s){const r=m(),a=m(!1),l=ve(),i=at(),b=m(),c=E({strategies:[],voteDecimals:0,voteSymbol:"",allowMember:!0,proposalThreshold:0,proposalValidity:0,admins:[]}),o=E({chainId:1}),d=E({chainId:1,tokenContractAddress:"",symbol:""}),u=m(),p=m(),_=m(!0),x=async()=>{try{const{error:g,data:v}=await N["DataDict@GetdataDictbydicttype"]({type:7});g||(console.log("data===>",v),b.value=v)}catch(g){console.error("error===>",g)}},S=async()=>{try{const{error:g,data:v}=await N["Governance@get-governance-setting"]({startup_id:t.startup_id});console.log("data---\u300B",v),g||(c.strategies=(v.strategies||[]).map(C=>({chainId:C.chain_id,dictValue:C.dict_value,dictLabel:C.strategy_name,voteDecimals:C.vote_decimals,tokenContractAddress:C.token_contract_address,voteSymbol:C.vote_symbol})),console.log("govSetting===>",c),c.voteSymbol=v.vote_symbol,c.allowMember=v.allow_member,c.proposalThreshold=Number(v.proposal_threshold),c.proposalValidity=Number(v.proposal_validity),c.admins=(v.admins||[]).length?v.admins.map(C=>C.address).concat([""]):["",""],W||(W=F(()=>c,()=>{console.log(11111111111,"gov change"),s.emit("edit")},{deep:!0})))}catch(g){console.error("error==>",g)}},w=()=>{u.value="selectModal"},U=g=>{var C;const v=(C=c.strategies)==null?void 0:C.filter(z=>z.dictValue!==g);c.strategies=v||[]},h=async g=>{var v;(v=p.value)==null||v.validate(async C=>{if(console.log("error===>",C),console.log("strategy==>",g),!C){a.value=!0;try{const{chainId:z,tokenContractAddress:Y,symbol:I}=d,K=await l.getRpcProvider(z,$e),oe=await(K==null?void 0:K.getCode(Y));if(!oe||oe.length<3)throw new Error;const Ae=await i(Y,K).decimals();c.strategies=[{...g,voteDecimals:Ae,voteSymbol:I}],u.value=void 0,a.value=!1}catch{_.value=!1}finally{a.value=!1}}})},f=async g=>{c.strategies=[g],u.value=void 0},k=async()=>{var g;try{(g=r.value)==null||g.validate(async v=>{var C;if(console.log("error===>",v),!!((C=c.strategies)!=null&&C.length)&&!v){const z=c.strategies.map(I=>({chain_id:I.chainId,dict_value:I.dictValue,strategy_name:I.dictLabel,vote_symbol:I.voteSymbol||"",token_min_balance:0,token_contract_address:I.tokenContractAddress||"",vote_decimals:I.voteDecimals||0})),{error:Y}=await N["Governance@create-governance-setting"]({startup_id:Number(t.startup_id),vote_symbol:c.voteSymbol,allow_member:c.allowMember,proposal_threshold:Number(c.proposalThreshold),proposal_validity:Number(c.proposalValidity),strategies:z,admins:c.admins.filter(Boolean).map(I=>({wallet_address:I}))});Y||(B.success("Successfully saved"),s.emit("saved"))}})}catch(v){console.error(v.message)}},T=()=>{c.admins.push("")},A=g=>{const v=c.admins.filter((C,z)=>z!==g);c.admins=v},R=q(()=>Ne),te=async g=>{switch(console.log("editStrate",g),g.dictValue){case"ticket":{o.chainId=g.chainId,u.value="ticket";break}case"erc20Balance":{d.chainId=g.chainId,d.tokenContractAddress=g.tokenContractAddress,d.symbol=g.voteSymbol,u.value="erc20-balance-of";break}}};let W;return _e(()=>{x(),S()}),{govSetting:c,strategies:b,strategyModal:u,ticketStrategy:o,erc20BalanceStrategy:d,erc20BalanceForm:p,contractAddressExist:_,formRef:r,networks:R,addStrategyBtnLoading:a,addStrategy:w,editStrategy:te,delStrategy:U,addTicketStrategy:f,addErc20Strategy:h,saveGovSetting:k,addAdmin:T,delAdmin:A}},render(){return e("div",null,[e(P,{ref:t=>this.formRef=t,model:this.govSetting,class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden governance-setting"},{default:()=>[e("div",{class:"border border-color-border rounded-sm mb-6 w-full"},[e("div",{class:"border-b border-b-color-border flex py-3 px-6 items-center u-h4"},[e("span",{class:"mr-2"},[n("Strategie(s)")]),e(be,{placement:"right"},{trigger:()=>e(tt,{class:"h-4 text-color3 w-4"},null),default:()=>e("div",{class:"w-60"},[n("Strategris are used determine voting power or whether a user is eligible to create a proposal(Voting power is cumulative)")])})]),e("div",{class:"p-6"},[this.govSetting.strategies.length?this.govSetting.strategies.map(t=>e("div",{class:"border border-color-border rounded-sm flex mb-6 py-3 px-4 justify-between items-center",onClick:()=>this.editStrategy(t)},[e("span",{class:"u-body4"},[t.dictLabel," ",t.voteSymbol&&t.dictValue!=="ticket"&&e("span",{class:"bg-[#8247E50F] rounded-2xl text-primary text-xs ml-3 py-1 px-4"},[t.voteSymbol])]),e("div",{class:"cursor-pointer transform scale-75",onClick:()=>this.delStrategy(t.dictValue)},[e(ne,{class:"text-color3"},null)])])):e("div",{class:"border border-warning rounded-sm flex mb-6 py-4 px-6 items-center"},[e(aa,{class:"mr-2"},null),e("span",null,[n("You must add at least one strategy")])]),e("div",{class:"border border-dashed rounded-sm cursor-pointer flex py-2 text-color3 items-center justify-center u-h5",onClick:this.addStrategy},[e("span",{style:{fontSize:"18px",marginRight:"10px"}},[n("+")]),e("span",null,[n("Add strategy")])])])]),e("div",{class:"border border-color-border rounded-sm mb-6 w-full"},[e("div",{class:"border-b border-b-color-border py-3 px-6 u-h4"},[n("Vote symbol")]),e("div",{class:"p-6"},[e(V,{showLabel:!1,path:"voteSymbol",rule:[{required:!0,message:"Vote symbol cannot be blank",trigger:"blur"}]},{default:()=>[e(D,{value:this.govSetting.voteSymbol,"onUpdate:value":t=>this.govSetting.voteSymbol=t,maxlength:8},null)]}),e("div",{class:"mt-2 text-color3 u-h7"},[n("The default symbol used for this startup,usually token symbol")])])]),e("div",{class:"border border-color-border rounded-sm mb-6 w-full"},[e("div",{class:"border-b border-b-color-border py-3 px-6 u-h4"},[n("Proposal precondition")]),e("div",{class:"p-6"},[e("div",{class:"mb-6"},[e(Ue,{value:this.govSetting.allowMember,"onUpdate:value":t=>this.govSetting.allowMember=t,railStyle:({checked:t})=>t?{background:"#00BFA5",boxShadow:"unset"}:{}},null),e("span",{class:"ml-4 u-h5"},[n("Allow all team members to submit a proposal")])]),e("div",{class:"mb-2 u-body4"},[n("Proposal threshold ")]),e(ce,{value:this.govSetting.proposalThreshold,"onUpdate:value":t=>this.govSetting.proposalThreshold=t,type:"withUnit",renderUnit:()=>pe(this.govSetting.voteSymbol),inputProps:{maxlength:20,precision:18,min:0,parse:t=>{const s=t.replace("-","");return s===null||s===""?0:s}}},{suffix:()=>null}),e("div",{class:"mt-2 text-color3 u-h7"},[n("The minimum amount of voting power required to create a proposal")])])]),e("div",{class:"border border-color-border rounded-sm mb-6 w-full"},[e("div",{class:"border-b border-b-color-border py-3 px-6 u-h4"},[n("Proposal validity")]),e("div",{class:"p-6"},[e(ce,{class:"w-full",value:this.govSetting.proposalValidity,"onUpdate:value":t=>this.govSetting.proposalValidity=t,type:"withUnit",renderUnit:()=>pe(this.govSetting.voteSymbol),inputProps:{maxlength:20,precision:18,min:0,parse:t=>{const s=t.replace("-","");return s===null||s===""?0:s}}},{suffix:()=>null}),e("div",{class:"mt-2 text-color3 u-h7"},[n("The minimum amount of voting power required for the proposal to pass")])])]),e("div",{class:"border border-color-border rounded-sm mb-2 w-full"},[e("div",{class:"border-b border-b-color-border py-3 px-6 u-h4"},[n("Admin")]),e("div",{class:"p-6"},[e("div",{class:"flex mb-4"},[e(D,{disabled:!0,value:this.govSetting.admins[0],class:"flex-1"},null),e("div",{class:"basis-20"},null)]),this.govSetting.admins.slice(1).map((t,s)=>e(V,{showLabel:!1,class:"mb-4",path:`admins[${s+1}]`,rule:[{validator:(r,a)=>!!(!t||/^0x[a-zA-Z\d]{40}/.test(t)&&t.length===42),message:"Invalid wallet address",trigger:"blur"}]},{default:()=>{var r;return[e(D,{value:this.govSetting.admins[s+1],"onUpdate:value":a=>this.govSetting.admins[s+1]=a,class:"flex-1"},null),e("div",{class:"flex items-center basis-20"},[e(Ce,{onClick:()=>this.delAdmin(s+1),class:`
                        ml-3 cursor-pointer text-error
                        ${((r=this.govSetting.admins)==null?void 0:r.length)<=2?"hidden":""}
                      `},null),e(xe,{class:"cursor-pointer ml-3",onClick:this.addAdmin},null)])]}}))])]),e("div",{class:"text-color3 u-h7"},[n("The admins will be able to moderate proposals. You must add one address per line.")]),e("div",{class:"flex mt-10 justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:this.saveGovSetting},{default:()=>[n("Save")]})])]}),e(O,{show:this.strategyModal==="selectModal",class:"bg-white rounded-sm max-w-[90%] py-8 px-10 w-150"},{default:()=>{var t;return[e("div",null,[e("header",{class:"flex mb-6 justify-between items-center"},[e("span",{class:"tracking-normal text-primary1 u-card-title2"},[n("Add strategy")]),e(Q,{class:"cursor-pointer text-xs transform text-primary1 scale-75",onClick:()=>{this.strategyModal=""}},null)]),e(Te,{class:"my-6",placeholder:"Search"},null),e("div",null,[(t=this.strategies)==null?void 0:t.map(s=>e("div",{class:"border rounded-sm cursor-pointer mb-6 p-6 u-h4",onClick:()=>this.strategyModal=s.value},[s.label]))])])]}}),e(O,{show:this.strategyModal==="erc20-balance-of",class:"bg-white rounded-sm max-w-[90%] py-8 px-10 w-150"},{default:()=>[e("div",null,[e(P,{model:this.erc20BalanceStrategy,ref:t=>this.erc20BalanceForm=t},{default:()=>[e("header",{class:"flex mb-6 justify-between items-center"},[e("span",{class:"text-primary1 u-card-title2"},[n("erc20-balance-of")]),e(Q,{class:"cursor-pointer text-xs transform text-primary1 scale-75",onClick:()=>this.strategyModal=""},null)]),e(V,{label:"Network",path:"network"},{default:()=>[e(X,{value:this.erc20BalanceStrategy.chainId,"onUpdate:value":t=>this.erc20BalanceStrategy.chainId=t,options:this.networks,labelField:"name",valueField:"chainId"},null)]}),e(V,{label:"Contract address",path:"tokenContractAddress",first:!0,rule:[{validator:(t,s)=>!!s,message:"Contract address cannot be blank",trigger:"blur"},{validator:(t,s)=>/^0x[a-zA-Z\d]{40}/.test(s)&&s.length===42,message:"Invalid contract address",trigger:"blur"}]},{default:()=>[e(D,{value:this.erc20BalanceStrategy.tokenContractAddress,"onUpdate:value":t=>this.erc20BalanceStrategy.tokenContractAddress=t},null)]}),e(V,{label:"Symbol",path:"symbol",showFeedback:!1},{default:()=>[e(D,{value:this.erc20BalanceStrategy.symbol,maxlength:10,onUpdateValue:t=>{this.erc20BalanceStrategy.symbol=t.replace(/[^0-9a-zA-Z]/gi,"")}},null)]}),e("div",{class:"mt-2 mb-6 text-color3 u-h7"},[n("This strategy returns the balances of the voters for a specific ERC20 token.You can edit the strategy by clicking on it if you want to add your own token.")]),!this.contractAddressExist&&e("div",{class:"border rounded-sm flex border-[#F53F3F] mb-10  py-1 px-4 items-center"},[e(Qt,{class:"transform text-[#F53F3F] scale-75"},null),e("span",{class:"ml-4 text-[#F53F3F] u-body1"},[n("The token address was not found, please make sure the network is correct")])]),e("div",{class:"flex mt-4 justify-end"},[e(L,{type:"primary",loading:this.addStrategyBtnLoading,class:"rounded-sm cursor-pointer bg-primary1 text-white text-center py-2 w-40 !hover:bg-primary1",onClick:()=>this.addErc20Strategy({...this.erc20BalanceStrategy,dictLabel:"erc20-balance-of",dictValue:"erc20Balance"})},{default:()=>[n("Add")]})])]})])]}),e(O,{show:this.strategyModal==="ticket",class:"bg-white rounded-sm max-w-[90%] py-8 px-10 w-150"},{default:()=>[e("div",null,[e(P,{model:this.ticketStrategy},{default:()=>[e("header",{class:"flex mb-6 justify-between items-center"},[e("span",{class:"text-primary1 u-card-title2"},[n("Ticket")]),e(Q,{class:"cursor-pointer text-xs transform text-primary1 scale-75",onClick:()=>this.strategyModal=""},null)]),e(V,{label:"Network",path:"network",showFeedback:!1},{default:()=>[e(X,{value:this.ticketStrategy.chainId,"onUpdate:value":t=>this.ticketStrategy.chainId=t,options:this.networks,labelField:"name",valueField:"chainId"},null)]}),e("div",{class:"mt-2 mb-6 text-color3 u-h7"},[n("This strategy means that voting can be done as long as the wallet is linked, and each wallet address has only one vote")]),e("div",{class:"flex mt-4 justify-end"},[e("div",{class:"rounded-sm cursor-pointer bg-primary1 text-white text-center py-2 w-40",onClick:()=>this.addTicketStrategy({...this.ticketStrategy,dictLabel:"Ticket",dictValue:"ticket"})},[n("Add")])])]})])]})])}});const fe=M({name:"RectDraggerUpload",props:{text:{type:String,required:!0},tip:{type:Function,required:!0},accept:{type:String,default:()=>""},fileSize:{type:Number,default:()=>0},imageUrl:{type:String},customRequest:{type:Function},bgSize:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:!1}},setup(){return{uploaded:m(!0)}},render(){const t=s=>{if(this.fileSize===0)return;const{file:r}=s;if(r.file.size>this.fileSize)return B.warning(`The image max size is ${Math.round(this.fileSize/1024/1024)}M`),!1};return e(Z,{show:this.loading},{default:()=>[e(De,{onBeforeUpload:t,class:"rect-upload",accept:this.accept,customRequest:this.customRequest},{default:()=>[e(Ie,{class:"h-45 p-0 w-45 overflow-hidden"},{default:()=>[this.uploaded?e("div",{class:"flex h-full w-full justify-center items-center relative"},[e("div",{class:"bg-[rgba(0,0,0,0.5)] opacity-0 top-0 right-0 bottom-0 left-0 z-2 absolute rect-upload-mask"},[e(Dt,{class:"h-10 -mt-5 text-white -ml-5 top-1/2 left-1/2 w-10 absolute"},null)]),this.imageUrl&&e("img",{src:this.imageUrl,class:"h-full object-cover w-full top-0 left-0 right-0 m-auto z-1 absolute"},null)]):e("div",{class:"bg-purple flex h-full w-full justify-center items-center"},[e("div",{class:"flex flex-col items-center"},[e(Qe,{class:"h-10 bg-primary w-10"},null),e("p",{class:"mt-4 u-h6"},[n("Upload")])])])]})]}),e("p",{class:"flex mt-2 text-color1 w-45 items-center u-h6"},[this.text,e(be,{trigger:"hover",placement:"bottom"},{trigger:()=>e(Xe,{class:"h-4 ml-2 text-color3 w-4"},null),default:this.tip})])]})}}),ia=M({props:{data:{type:Object,required:!0},startup_id:{type:Number,required:!0}},emits:["saved","edit"],setup(t,s){const r=ve(),a=Ee(),l=m(!1),i=E({logo:t.data.logo||"",banner:t.data.banner||"",name:t.data.name||"",type:Se(t.data.type)||"",mission:t.data.mission||"",overview:t.data.overview||"",chain_id:t.data.chain_id,tags:t.data.tags||[],switchChain:t.data.on_chain||!1}),b=async h=>{var f;r.chainId!==h&&i.switchChain&&(await r.ensureWalletConnected(),await((f=r.wallet)==null?void 0:f.switchNetwork(h))||(i.switchChain=!1))},c=async h=>{h&&b(i.chain_id)},o=(h=[])=>h.map(f=>({value:f.chainId,label:f.name,logo:f.logo})),d=(h=!1)=>{const f=["switchChain","chain_id","name"];u.map(k=>{f.includes(k.name)&&(k.disabled=h)})},u=E([{t:"select",title:"Blockchain Network",name:"chain_id",placeholder:"Select project Blockchain Network",defaultValue:i.chain_id,options:o(ge),onUpdateValue:h=>b(h),renderTag:({option:h})=>y("div",{style:{display:"flex",alignItems:"center"}},[y("img",{src:h.logo,round:!0,size:20,style:{width:"20px",height:"20px",marginRight:"12px"}}),h.label]),renderLabel:h=>y("div",{style:{display:"flex",alignItems:"center"}},[y("img",{src:h.logo,round:!0,size:20}),y("div",{style:{marginLeft:"12px",padding:"4px 0"}},[y("div",null,[h.label])])]),rules:[{required:!0,validator:(h,f)=>!!f,message:"Blockchain Network cannot be blank",trigger:"blur"}],disabled:i.switchChain},{t:"string",title:"Name",name:"name",required:!0,placeholder:"Please enter your project name",maxlength:24,disabled:i.switchChain,value:null},{t:"switch",title:"",name:"switchChain",onUpdateValue:h=>c(h),disabled:i.switchChain},{t:"select",title:"Type",name:"type",required:!0,placeholder:"Select project type",renderOption:({node:h,option:f})=>y(ot,null,{trigger:()=>h,default:()=>st[f.label]}),options:lt.map(h=>({label:h,value:h}))},{t:"startupTags",required:!0,title:"Tag",name:"tags",placeholder:"Select project tag"},{t:"string",title:"Mission",name:"mission",placeholder:"Please enter your project mission",maxlength:100,required:!0,value:null},{t:"string",title:"Overview",name:"overview",placeholder:"Describe your project",minlength:100,required:!0,type:"textarea",rules:[{required:!0,message:"Please enter a description of at least 100 letters"}],value:null}]),p=m(),{onUpload:_}=qe(),x=m(!1),S=m(!1),w=async({file:h,onProgress:f,onFinish:k,onError:T})=>{h.file&&(x.value=!0,_(h.file,A=>{f({percent:A})}).then(A=>{i.logo=A,x.value=!1,k()}).catch(A=>{x.value=!1,T()}))},U=async({file:h,onProgress:f,onFinish:k,onError:T})=>{h.file&&(S.value=!0,_(h.file,A=>{f({percent:A})}).then(A=>{i.banner=A,S.value=!1,k()}).catch(A=>{S.value=!1,T()}))};return d(i.switchChain),F(()=>i,()=>{i.name&&i.chain_id&&(console.log(2222222,"info change",i.overview),s.emit("edit"))},{deep:!0}),{loading:l,form:p,fields:u,info:i,handleUploadLogo:w,handleUploadCover:U,contractStore:a,setFieldsStatus:d,coverUploadLoading:S,logoUploadLoading:x}},render(){const t=()=>{var r;(r=this.form)==null||r.validate(async a=>{if(!a){this.loading=!0;const l=nt();if(this.info.switchChain&&!this.data.on_chain)await l.createStartup([this.info.name,this.info.chain_id||0,!0],"The fields of network and name will be registered to blockchain.",`Project "${this.info.name}" was created`)?this.$emit("saved"):this.info.switchChain=!1,this.setFieldsStatus(!0);else{const i=await this.contractStore.setStartupSuccessAfter({startup_id:String(this.startup_id),logo:this.info.logo,banner:this.info.banner,chain_id:this.info.chain_id===void 0?0:this.info.chain_id,name:this.info.name,type:this.info.type===void 0?0:rt(this.info.type),mission:this.info.mission,overview:this.info.overview,switch:!1,tags:this.info.tags});console.log("res",i),i&&(B.success("Successfully saved"),this.$emit("saved"))}this.loading=!1}})},s=J(this.fields);return e(Z,{show:this.loading},{default:()=>[e("div",{class:"bg-white border rounded-sm mb-6 min-h-100 p-10 relative overflow-hidden"},[e("div",{class:"flex mb-14"},[e(fe,{text:"Project Logo",tip:()=>e(G,null,[e("p",null,[n("Recommended\uFF1A180px*180px")]),e("p",null,[n("Max size\uFF1A10MB")])]),loading:this.logoUploadLoading,fileSize:10*1024*1024,accept:"image/png, image/jpeg, image/bmp, image/psd, image/svg, image/tiff",imageUrl:this.info.logo,customRequest:this.handleUploadLogo},null),e(fe,{class:"flex-1 ml-10",text:"Project Banner",tip:()=>e(G,null,[e("p",null,[n("Recommended\uFF1A1380px*210px")]),e("p",null,[n("Max size\uFF1A10MB")])]),loading:this.coverUploadLoading,fileSize:10*1024*1024,accept:"image/png, image/jpeg, image/bmp, image/psd, image/svg, image/tiff",imageUrl:this.info.banner,customRequest:this.handleUploadCover,bgSize:!0},null)]),e(P,{rules:s,model:this.info,ref:r=>this.form=r},{default:()=>[e(ee,{fields:this.fields,values:this.info},null)]}),e("div",{class:"flex mt-10 items-center justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:t},{default:()=>[n("Save")]})])])]})}});const na=M({props:{value:{type:String,default:"INFO"}},setup(){return{menuOptions:[{label:()=>y(e("p",null,[n("Info")])),key:"INFO",icon:()=>y(e(Nt,null,null))},{label:()=>y(e("p",null,[n("Security")])),key:"SECURITY",icon:()=>y(e(Bt,null,null))},{label:()=>y(e("p",null,[n("Finance")])),key:"FINANCE",icon:()=>y(e(Ct,null,null))},{label:()=>y(e("p",null,[n("Social")])),key:"SOCIAL",icon:()=>y(e(Zt,null,null))},{label:()=>y(e("p",null,[n("Governance")])),key:"GOVERNANCE",icon:()=>y(e(At,null,null))},{label:()=>y(e("p",null,[n("Sequence")])),key:"SEQUENCE",icon:()=>y(e(Gt,null,null))},{label:()=>y(e("p",null,[n("Dapp")])),key:"DAPP",icon:()=>y(e(bt,null,null))}]}},emits:["routerChange"],render(){const t=(s,r)=>{this.$emit("routerChange",{key:s,item:r}),console.log(s,r)};return e("div",{class:"bg-white border rounded-ms h-200 mb-6 relative overflow-hidden menu-wrapper"},[e("p",{class:"m-6 text-color3 u-h5"},[n("Settings")]),e(Be,{options:this.menuOptions,value:this.value,onUpdateValue:t},null)])}}),oa=M({props:{data:{type:Object,required:!0},startup_id:{type:Number,required:!0}},emits:["saved","edit"],setup(t,s){const r=m(!1),a=E({kyc:t.data.kyc||"",contract_audit:t.data.contract_audit||""});F(()=>a,()=>{console.log(11111111111,"security change"),s.emit("edit")},{deep:!0});const l=()=>e(G,null,[n("KYC"),e("small",{class:"text-12px text-[#979797]"},[n("\xA0\xA0\xA0Get KYC via")," ",e("a",{href:"http://assuredefi.com/",target:"_blank",class:"underline hover:text-[#1f2225]"},[n("assuredefi.com")])])]),i=()=>e(G,null,[n("Contract Audit"),e("small",{class:"text-12px text-[#979797]"},[n("\xA0\xA0\xA0Get Audit via")," ",e("a",{href:"https://cyrex.tech/",target:"_blank",class:"underline  hover:text-[#1f2225]"},[n("cyrex.tech")]),n("\xA0\xA0|\xA0\xA0"),e("a",{href:"https://hacken.io/",target:"_blank",class:"underline  hover:text-[#1f2225]"},[n("hacken.io")])])]),b=[{t:"string",title:e(l,null,null),name:"kyc",placeholder:"Input project KYC",rules:[{validator:(o,d)=>!d||d&&d.startsWith("https://")||d&&d.startsWith("http://"),message:"Invalid URL",trigger:"blur"}],onBlur:o=>{const d=o.target;d.className.includes("truncate")||(d.className=d.className+" truncate")}},{t:"string",title:e(i,null,null),name:"contract_audit",placeholder:"Input project contract audit",rules:[{validator:(o,d)=>!d||d&&d.startsWith("https://")||d&&d.startsWith("http://"),message:"Invalid URL",trigger:"blur"}],onBlur:o=>{const d=o.target;d.className.includes("truncate")||(d.className=d.className+" truncate")}}],c=m();return{loading:r,fields:b,form:c,info:a}},render(){const t=()=>{var r;(r=this.form)==null||r.validate(async a=>{a||(this.loading=!0,await N["Startup@update-startup-security"]({startup_id:this.startup_id,kyc:this.info.kyc,contract_audit:this.info.contract_audit}),this.loading=!1,B.success("Successfully saved"),this.$emit("saved"))})},s=J(this.fields);return e(Z,{show:this.loading},{default:()=>[e("div",{class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden"},[e(P,{rules:s,model:this.info,ref:r=>this.form=r},{default:()=>[e(ee,{fields:this.fields,values:this.info},null)]}),e("div",{class:"flex mt-10 items-center justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:t},{default:()=>[n("Save")]})])])]})}}),da=M({name:"sequenceSetting",props:{data:{type:Object,required:!0},startup_id:{type:Number,required:!0}},emits:["saved","edit"],setup(t,s){const r=m(!1),a=m(t.data.tab_sequence?t.data.tab_sequence.split(",").map(l=>Number(l)):[]);return F(()=>a.value,()=>{var l;((l=a.value)==null?void 0:l.join(","))!==t.data.tab_sequence&&(console.log(11111111111,"sequence change"),s.emit("edit"))},{deep:!0}),{loading:r,list:a}},render(){const t=async()=>{var s;if(!this.startup_id)return console.warn("this.startup_id is missing!");this.loading=!0,await N["Startup@update-startup-tab-sequence"]({startup_id:this.startup_id,tab_sequence:(s=this.list)==null?void 0:s.join(",")}),this.loading=!1,B.success("Successfully saved"),this.$emit("saved")};return e(Z,{show:this.loading},{default:()=>[e("div",{class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden"},[e("h3",{class:"mb-10 text-color1 u-h2"},[n("Show each activities in project detail according to the following sequence")]),e(dt,{modelValue:this.list,"onUpdate:modelValue":s=>this.list=s},null),e("div",{class:"flex mt-10 items-center justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:t},{default:()=>[n("Save")]})])])]})}}),ua=M({name:"socialSetting",props:{data:{type:Array,required:!0},startup_id:{type:Number,require:!0}},emits:["saved","edit"],setup(t,s){const r=m(!1),a=E({socials:t.data}),l=q(()=>{var o;return((o=ct("social").TagList.value)==null?void 0:o.map(d=>{const u=me.findIndex(p=>p.label.toLocaleLowerCase()===d.name.toLocaleLowerCase());return{label:d.name,value:d.id,type:u===-1?0:me[u].value}}))||[]});F(()=>l.value,()=>{l.value.length&&!a.socials.length&&(console.log(l.value,a.socials),a.socials.push({type:l.value[0].value||0,value:""}))},{immediate:!0});const i=(o,d)=>{console.log(l.value,d);const u=l.value.findIndex(p=>p.value===d);return u===-1?o:Object.assign(o,{type:l.value[u].type,label:l.value[u].label})},b=[{t:"custom",title:"Social",name:"socials",rules:[{validator:(o,d)=>!!d.find(u=>!!u.value&&!u.delete),message:"Please enter at least one social information",trigger:"blur"},{validator:(o,d)=>{const u=d.filter(p=>!p.delete&&!!p.value);return console.log(d,u),u.length?u.filter(p=>{var _;return p.type===1&&!ae(p.value)||[2,5,9,10,11].includes(Number(p.type||0))&&!se(p.value)||p.type===4&&!he(p.value)?!1:!!((_=p.value)!=null&&_.trim())}).length===u.length:!0},message:"",trigger:"blur"}],render(){return e("div",{class:"w-full"},[a.socials.filter(o=>!o.delete).map((o,d)=>e("div",{class:"mb-4"},[e("div",{class:"flex items-center"},[e(re,null,{default:()=>[e(X,{options:l.value,value:o.social_tool_id,"onUpdate:value":[u=>o.social_tool_id=u,u=>i(o,u)],class:"w-50"},null),e(D,{class:"rounded-r-lg flex-1",value:o.value,"onUpdate:value":u=>o.value=u,inputProps:{type:o.type===1?"email":"text"},status:o.type===1&&o.value&&!ae(o.value)||[2,5,9,10,11].includes(o.type||0)&&o.value&&!se(o.value)||o.type===4&&o.value&&!he(o.value)?"error":void 0,placeholder:`${o.type===2?"http(s)://":"Please Input"}`,onBlur:()=>{o.blur=!0},onFocus:()=>{o.blur=!1}},null)]}),a.socials.filter(u=>!u.delete).length>1&&e("div",{class:"cursor-pointer flex items-center",onClick:()=>{a.socials[d].delete=!0}},[e(Ce,{class:"h-5 text-error ml-4.5 w-5"},null)]),e("div",{class:"cursor-pointer flex items-center",onClick:()=>{var u,p,_;a.socials.push({social_tool_id:((u=l.value[0])==null?void 0:u.value)||0,type:((p=l.value[0])==null?void 0:p.type)||0,value:"",label:((_=l.value[0])==null?void 0:_.label)||"--"})}},[e(xe,{class:"h-5 ml-4.5 w-5"},null)])]),o.type===1&&o.blur&&o.value&&!ae(o.value)&&e("div",{class:"text-error ml-50"},[n("Please enter the correct email address")]),[2,5,9,10,11].includes(o.type||0)&&o.blur&&o.value&&!se(o.value)&&e("div",{class:"text-error ml-50"},[n("Please enter the correct url")])]))])}}],c=m();return F(()=>a,()=>{console.log(11111111111,"social change"),s.emit("edit")},{deep:!0}),{loading:r,form:c,fields:b,info:a}},render(){const t=()=>{var r;this.startup_id?(r=this.form)==null||r.validate(async a=>{a||(this.loading=!0,await N["Startup@bind-startup-socials"]({startup_id:this.startup_id,socials:this.info.socials.filter(l=>!l.delete&&l.type&&l.value).map(l=>({social_tool_id:Number(l.social_tool_id),value:String(l.value)}))}),this.loading=!1,B.success("Successfully saved"),this.$emit("saved"))}):console.warn("Missing parameter: startup_id")},s=J(this.fields);return e(Z,{show:this.loading},{default:()=>[e("div",{class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden"},[e(P,{rules:s,model:this.info,ref:r=>this.form=r},{default:()=>[e(ee,{fields:this.fields,values:this.info},null)]}),e("div",{class:"flex mt-10 items-center justify-end"},[e(L,{class:"w-30",type:"primary",size:"small",onClick:t},{default:()=>[n("Save")]})])])]})}}),ca=M({name:"addGroupDialog",props:{visible:{type:Boolean,required:!0},group:{type:Object},startup_id:{type:Number,required:!0}},setup(t,s){const r=m([]);F(()=>t.group,()=>{r.value=[...t.group||[]]},{immediate:!0});const a=()=>{s.emit("triggerDialog"),r.value=[...t.group||[]]};return{list:r,startup_id:t.startup_id,closeDialog:a}},emits:["triggerDialog","triggerUpdate"],render(){const t=a=>()=>{if(a==="cancel")return this.closeDialog();if(!this.startup_id)return console.warn("this.startup_id is missing");const l=this.list.filter(i=>!i.delete&&i.name.trim().length&&i.name!=="All");console.log("saveList",l),N["Startup@save-startup-team-group"]({startup_id:this.startup_id,groups:l.map(i=>({start_team_group_id:i.id||void 0,name:i.name}))}).then(i=>{console.log("saveList res =",i),i.error||(this.closeDialog(),this.$emit("triggerUpdate"))})},s=()=>{this.list.push({id:0,name:"",comer_id:0,startup_id:0})},r=a=>()=>{const l=this.list.filter(i=>i.name!=="All"&&!i.delete);l[a].delete=!0};return e(O,{show:this.visible},{default:()=>[e(ie,{style:{width:"400px","--n-title-text-color":"#000"},title:"Group management",bordered:!1,size:"huge",role:"dialog","aria-modal":"true",closable:!0,onClose:t("cancel")},{default:()=>[e(G,null,[e("div",{class:"h-9.5 w-full"},null),this.list.filter(a=>a.name!=="All"&&!a.delete).map((a,l)=>e("div",{class:"flex mb-4 items-center"},[e(D,{placeholder:"Group Name",value:a.name,"onUpdate:value":i=>a.name=i,maxlength:200},{suffix:()=>this.list.length>1&&a.name.trim().length?e(ne,{class:"cursor-pointer h-3 ml-4.5 text-color3 w-3",onClick:r(l)},null):null})])),e(L,{dashed:!0,class:"w-full u-h5",onClick:s},{default:()=>[e("span",{class:"flex text-color3 items-center u-h5"},[e(we,{class:"h-4 mr-3 w-4"},null),n("Add")])]}),e("div",{class:"flex mt-10 justify-end"},[e(L,{class:"w-40",type:"primary",onClick:t("submit"),size:"small"},{default:()=>[n("Save")]})])])]})]})}}),ha=M({name:"addTeamMember",props:{startup_id:{type:Number,required:!0},group:{type:Array,required:!0}},setup(t){const s=m(!1),r=m(""),a=m([]),l=E(null);return{addTeamMemberVisible:s,inputWalletAddress:r,teamMembers:a,comerProfile:l,propGroup:t.group,startup_id:t.startup_id}},emits:["triggerNewComer"],render(){const t=async()=>{if(this.inputWalletAddress.trim()){const{error:s,data:r}=await N["Comer@get-comer-by-address"]({address:this.inputWalletAddress});if(!s){const{data:a}=await N["Startup@startup-team-comer-existence"]({startup_id:this.startup_id,startup_team_comer_id:r.id});return a!=null&&a.is_exist?B.error("Already exists!"):(this.inputWalletAddress="",this.$emit("triggerNewComer",r))}}B.info("Please enter the content!")};return e(G,null,[e("div",{class:"mb-6 search"},[e(re,null,{default:()=>[e(D,{class:"h-10 leading-10",value:this.inputWalletAddress,"onUpdate:value":s=>this.inputWalletAddress=s,size:"small",placeholder:"Search comer by wallet address"},null),e(L,{onClick:t,type:"primary",class:"h-10 w-34 u-h4"},{default:()=>[n("Add")]})]})])])}}),ma=M({name:"addTeamMemberDialog",props:{visible:{type:Boolean,required:!0},comer:{type:Object},startup_id:{type:Number,required:!0}},setup(t){const s=m(!1),r=E({Role:null,Group:0});F(()=>t.comer,()=>{var c,o;r.Role=((c=t.comer)==null?void 0:c.position)||null,r.Group=((o=t.comer)==null?void 0:o.startup_team_group_id)||0},{immediate:!0});const a=Ze("group"),l=q(()=>a.value.map(c=>({label:c.name,value:c.id}))),i=m(),b=q(()=>[{t:"select",title:"Role",name:"Role",required:!0,placeholder:"Select role",options:[{label:"Admin",value:"Admin"},{label:"Member",value:"Member"}],tag:!0,filterable:!0},{t:"select",title:"Group",name:"Group",placeholder:"Select a group",options:l.value}]);return{loading:s,info:r,form:i,fields:b,startup_id:t.startup_id}},emits:["triggerDialog","triggerActionDone"],render(){const t=()=>{this.$emit("triggerDialog")},s=a=>()=>{var l;if(a==="cancel")return t();(l=this.form)==null||l.validate(async i=>{if(!i){if(this.loading=!0,!this.comer)return console.warn("this.comer is missing!");const{error:b}=await N["Startup@save-comer-to-startup-team"]({startup_id:this.startup_id,comer_id:this.comer.comer_id,position:this.info.Role,startup_team_group_id:this.info.Group||0});b||(console.warn(`${this.comer.startup_team_group_id?"create":"edit"} success!`),this.$emit("triggerActionDone")),this.loading=!1,t()}})},r=J(this.fields);return e(O,{show:this.visible},{default:()=>[e(Z,{show:this.loading},{default:()=>[e(ie,{style:{width:"600px",maxWidth:"90%","--n-title-text-color":"#000"},title:"Team Setting",bordered:!1,size:"huge",role:"dialog","aria-modal":"true",closable:!0,onClose:s("cancel")},{default:()=>{var a,l,i,b;return[e(G,null,[e("div",{class:"bg-color-hover rounded-sm flex h-21  mb-6 items-center"},[e("div",{class:"h-15 mx-4 w-15"},[e(ye,{class:"w-full",src:((a=this.comer)==null?void 0:a.avatar)||ke},null)]),e("p",{class:"u-title1"},[((l=this.comer)==null?void 0:l.name)||((b=(i=this.comer)==null?void 0:i.comer)==null?void 0:b.name)])]),e(P,{rules:r,model:this.info,ref:c=>this.form=c},{default:()=>[e(ee,{fields:this.fields,values:this.info},null)]}),e("div",{class:"flex mt-10 justify-end"},[e(L,{class:"mr-4 w-40",type:"default",onClick:s("cancel"),size:"small"},{default:()=>[n("Cancel")]}),e(L,{class:"w-40",type:"primary",onClick:s("submit"),size:"small"},{default:()=>[n("Submit")]})])])]}})]})]})}});M({props:{mode:{type:Number,requred:!0,default:()=>0},type:{type:String,default:()=>"filled"}},setup(t){return{modeName:q(()=>Se(t.mode))}},render(){return e(le,{type:this.type,bgColor:it[this.modeName]},{default:()=>[this.modeName]})}});function pa(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Oe(t)}M({props:{count:{type:Number,default:()=>3},tags:{type:Array,default:()=>[]}},render(){return e(G,null,[this.tags.slice(0,this.count+1).map((t,s)=>s+1<this.count+1&&e(le,{key:t},pa(t)?t:{default:()=>[t]})),this.tags.length-this.count>1?e(le,null,{default:()=>[n("+ "),this.tags.length-this.count]}):null])}});const fa=M({props:{tasks:{type:Array,default:()=>[],required:!0},radio:{type:Boolean,default:!1}},setup(t){const s=m(["All"]),r=q(()=>t.tasks.map(a=>{const l=s.value.findIndex(i=>i===a);return{value:a,class:`box-content h-7 leading-7 rounded-sm  mr-2 min-w-4 px-4  cursor-pointer border border-color-border text-color2 u-h6 hover:text-color1 ${l!==-1?"text-color1":""}`,active:l!==-1}}));return{selectedList:s,taskList:r,radio:t.radio}},emits:["selectedChange"],render(){const t=s=>()=>{if(s==="All"){this.selectedList=["All"],this.$emit("selectedChange",this.selectedList);return}const r=this.selectedList.findIndex(l=>l===s);if(r>-1){this.selectedList.splice(r,1),this.selectedList.length===0&&(this.selectedList=["All"]),this.$emit("selectedChange",this.selectedList);return}const a=this.selectedList.findIndex(l=>l==="All");a>-1&&this.selectedList.splice(a,1),this.radio?this.selectedList=[s]:this.selectedList.push(s),this.$emit("selectedChange",this.selectedList)};return e("div",{class:"flex w-auto"},[this.taskList.map(s=>e("div",{class:`${s.class} ${s.active?"!text-color1":""}`,onClick:t(s.value)},[s.value]))])}});function ga(){const t=m([]);return{get:async r=>{if(r){const{data:a}=await N["Startup@get-startup-team-groups"]({startup_id:r});Array.isArray(a==null?void 0:a.list)&&(t.value=a.list)}},group:t}}const va=M({name:"TeamSetting",props:{startup_id:{type:Number,required:!0},founderId:{type:Number}},setup(t){const s=je(),r=ga(),a=()=>{r.get(t.startup_id)};a();const l=m(),i=q(()=>async(f,k)=>{const{error:T,data:A}=await N["Startup@get-startup-team"]({startup_id:t.startup_id,startup_team_group_id:l.value||void 0,size:k,page:f});return{items:T?[]:A.list||[],total:T?0:A.total}}),b=m(!1),c=q(()=>[{id:0,name:"All",comer_id:void 0,startup_id:void 0},...We(r.group.value)]);Ye("group",c);const o=m(),d=m(!1),u=m(!0),p=()=>{u.value=!1,setTimeout(()=>{u.value=!0})},_=f=>{console.warn(f),o.value={avatar:f.avatar,name:f.name,comer_id:f.id,startup_team_group_id:0,position:""},d.value=!0},x=m(!1),S=m(null),w=m(!1),U=(f,k)=>{f==="del"?(w.value=!0,N["Startup@delete-comer-of-startup-team"]({startup_id:t.startup_id,startup_team_comer_id:k.comer_id}).then(T=>{T.error||(B.success("successfully deleted"),p(),S.value=null,x.value=!1,w.value=!1)})):f==="edit"&&(o.value=k,d.value=!0)},h=q(()=>{var f;return((f=s.profile)==null?void 0:f.id)===t.founderId});return{startup_id:t.startup_id,founderId:t.founderId,isFounder:h,group:c,dataService:i,addGroupVisible:b,updateGroupList:a,currentGroup:l,editMemberProfile:o,editMemberVisible:d,updateMemberList:p,handleCreateComer:_,handleMemberAction:U,refreshMark:u,showDeleteDialog:x,deleteItem:S,showDeleteLoading:w}},render(){const t=s=>{const r=s[0],a=this.group.findIndex(l=>l.name===r);a!==-1&&(this.currentGroup=this.group[a].id,console.warn("currentGroup",this.currentGroup))};return e("div",{class:"bg-white border rounded-sm mb-6 min-h-200 p-10 relative overflow-hidden"},[e(ha,{startup_id:this.startup_id,group:this.group,onTriggerNewComer:this.handleCreateComer},null),e(ma,{startup_id:this.startup_id,comer:this.editMemberProfile,visible:this.editMemberVisible,onTriggerDialog:()=>this.editMemberVisible=!1,onTriggerActionDone:this.updateMemberList},null),e("div",{class:"flex mb-8 items-center"},[e(fa,{radio:!0,tasks:this.group.map(s=>s.name),onSelectedChange:t},null),e("div",{class:"cursor-pointer flex h-4 ml-2 w-4",onClick:()=>this.addGroupVisible=!this.addGroupVisible},[e(mt,{class:"w-full text-color3 hover:text-[#65b400]"},null)]),e(ca,{group:this.group,visible:this.addGroupVisible,startup_id:this.startup_id,onTriggerDialog:()=>this.addGroupVisible=!this.addGroupVisible,onTriggerUpdate:this.updateGroupList},null)]),this.refreshMark&&e(He,{service:this.dataService,children:({dataSource:s})=>e("div",{class:"flex flex-col"},[s.map(r=>e("div",{class:"rounded-sm flex justify-between items-center cursor-pointer startup-team-list p-4 hover:bg-color-hover"},[e("div",{class:"flex w-1/2 items-center",onClick:()=>{this.$router.push({path:"/builder",query:{id:r.comer_id}})}},[e(ye,{class:"rounded-1/2 h-12 w-12",src:r.comer.avatar||ke},null),e("div",{class:"flex flex-col ml-4"},[e("p",{class:"text-color1 u-h4"},[r.comer.name]),e("p",{class:"text-color3 truncate u-h7 "},[e("span",null,[r.position||""])])])]),r.created_at&&e("div",{class:"text-color3 u-h6"},[n("Join "),Ke(new Date(Number(r.created_at))).format("MMMM D, YYYY")]),this.isFounder?e("p",{class:" text-color3 w-15 change"},[e(Je,{class:" h-4 mr-4 w-4 hover:text-primary",onClick:()=>this.handleMemberAction("edit",r)},null),this.founderId!==r.comer_id&&e(ne,{class:" h-4 w-4 hover:text-primary",onClick:()=>{this.deleteItem=r,this.showDeleteDialog=!0}},null)]):null]))])},null),e(O,{show:this.showDeleteDialog,"onUpdate:show":s=>this.showDeleteDialog=s,"mask-closable":!1},{default:()=>[e(ie,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>this.showDeleteDialog=!1,title:"Remove team members"},{default:()=>{var s;return[e("div",{class:"min-h-20 text-color2 u-h6"},[n('Are you sure you want to remove "'),(s=this.deleteItem)==null?void 0:s.comerName,n('" from the team list?')]),e("div",{class:"flex mt-4 justify-end"},[e(L,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>this.showDeleteDialog=!1},{default:()=>[n("Cancel")]}),e(L,{type:"primary",class:"w-41",loading:this.showDeleteLoading,onClick:()=>this.handleMemberAction("del",this.deleteItem)},{default:()=>[n("Yes")]})])]}})]})])}}),Oa=M({setup(){const t=m("INFO"),s=Ge(),r=Re(),a=m(!1);if(!r.params.id)return null;const l=Number(r.params.id),i=ut(l),b=i.loading,c=()=>{a.value=!1,i.reload()};c();const o=q(()=>{var U;const w=ht((U=i.detail.value)==null?void 0:U.socials).filter(h=>!!h.value);return w.length?w:[]}),d=m(),u=m(null),p=m(!1),_=w=>{a.value?(p.value=!0,u.value=w.key):(u.value=null,d.value&&(d.value=null),t.value=w.key)},x=()=>{a.value=!1,u.value?t.value=u.value:d.value&&s.push(d.value),p.value=!1},S=()=>{p.value=!1};return ze(w=>a.value?(p.value=!0,d.value=w,!1):!0),{loading:b,currentEditComponent:t,startup:i.detail,route:r,socialList:o,getDetail:c,paramStartupId:l,hasEditUnSave:a,handleMenuChange:_,visibleConfirmDialog:p,handleConfirm:x,handleCancel:S}},render(){return e(Z,{show:this.loading},{default:()=>{var t,s,r,a,l,i,b,c,o,d,u,p,_,x,S,w;return[e(Fe,{class:"mt-10 mb-10"},null),e("div",{class:"flex mb-20 gap-6"},[e("div",{class:"basis-1/4"},[e(na,{value:this.currentEditComponent,onRouterChange:this.handleMenuChange},null)]),e("div",{class:"basis-3/4"},[this.startup?e(G,null,[this.currentEditComponent==="INFO"&&e(ia,{data:{logo:((t=this.startup)==null?void 0:t.logo)||"",banner:((s=this.startup)==null?void 0:s.banner)||"",name:((r=this.startup)==null?void 0:r.name)||"",type:((a=this.startup)==null?void 0:a.type)||0,mission:((l=this.startup)==null?void 0:l.mission)||"",overview:((i=this.startup)==null?void 0:i.overview)||"",blockChainAddress:((c=(b=this.startup)==null?void 0:b.finance)==null?void 0:c.contract_address)||"",chain_id:(o=this.startup)==null?void 0:o.chain_id,tags:Array.isArray((d=this.startup)==null?void 0:d.tags)?this.startup.tags.map(U=>{var h;return((h=U.tag)==null?void 0:h.name)||"--"}):[],on_chain:(u=this.startup)==null?void 0:u.on_chain},startup_id:this.paramStartupId,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="SECURITY"&&e(oa,{data:{kyc:((p=this.startup)==null?void 0:p.kyc)||"",contract_audit:((_=this.startup)==null?void 0:_.contract_audit)||""},startup_id:this.paramStartupId,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="FINANCE"&&e(la,{data:(x=this.startup)==null?void 0:x.finance,startup_id:this.paramStartupId,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="TEAM"&&e(va,{startup_id:this.paramStartupId,founderId:(S=this.startup)==null?void 0:S.comer_id},null),this.currentEditComponent==="SOCIAL"&&e(ua,{data:this.socialList,startup_id:this.paramStartupId,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="GOVERNANCE"&&this.startup&&e(ra,{startup_id:this.paramStartupId,startup:this.startup,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="SEQUENCE"&&e(da,{data:{tab_sequence:((w=this.startup)==null?void 0:w.tab_sequence)||""},startup_id:this.paramStartupId,onEdit:()=>this.hasEditUnSave=!0,onSaved:this.getDetail},null),this.currentEditComponent==="DAPP"&&e(sa,{startup_id:this.paramStartupId},null)]):null])]),e(pt,{visible:this.visibleConfirmDialog,title:"Discard the changes?",content:"This can`t be undone and you will lose your changes."},{btns:()=>e("div",{class:"flex mt-10 justify-end"},[e(L,{type:"default",class:"mr-16px w-164px",size:"small",onClick:this.handleCancel},{default:()=>[n("Cancel")]}),e(L,{type:"primary",class:"w-164px",size:"small",onClick:this.handleConfirm},{default:()=>[n("Yes")]})])})]}})}});export{Oa as default};

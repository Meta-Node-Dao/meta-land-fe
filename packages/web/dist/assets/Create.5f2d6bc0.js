import{b as V,q as W,z as X,S as j,t as te,f as S,o as ne,e as H,l as ie,g as re,u as ae,a as O,c as se,m as oe,v as le,_ as D,V as ue,h as de}from"./index.ac02f68f.js";import{H as M,l as _,r as h,w as E,bm as t,M as A,j as i,t as J,a6 as ce,bK as fe,F as Q,cs as C,$ as me,av as ge}from"./bundle.f4813fa2.js";import{R as ye}from"./index.160e8328.js";import{g as be,U as pe}from"./Create.fef5fe14.js";import{u as z}from"./erc20.e9c36ea3.js";import{r as we}from"./bountyFactory.4905ecc7.js";import{e as ve}from"./vue.5bd64dc7.js";import{g as he,w}from"./share.51f4a725.js";import{r as $}from"./Create.f5d1abad.js";import{p as R}from"./ethers.043ad920.js";const U={57:"0x0c03F3e4916B8C70cc38DfD844cEFc0FDBa7270E",570:"0x4A00Ed970CB1f1346BBAAba5D6a21B4B738A8472"},Ie='[{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_teamWallet","type":"address"},{"internalType":"address","name":"_presaleToken","type":"address"},{"internalType":"address","name":"_investToken","type":"address"},{"components":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint24","name":"liquidityRate","type":"uint24"},{"internalType":"uint256","name":"minInvest","type":"uint256"},{"internalType":"uint256","name":"maxInvest","type":"uint256"},{"internalType":"uint256","name":"softCap","type":"uint256"},{"internalType":"uint256","name":"hardCap","type":"uint256"},{"internalType":"address","name":"router","type":"address"},{"internalType":"uint256","name":"dexInitPrice","type":"uint256"},{"internalType":"uint256","name":"startedAt","type":"uint256"},{"internalType":"uint256","name":"endedAt","type":"uint256"},{"internalType":"uint24","name":"firstRelease","type":"uint24"},{"internalType":"uint24","name":"cycle","type":"uint24"},{"internalType":"uint24","name":"cycleRelease","type":"uint24"},{"internalType":"uint24","name":"investTokenDecimals","type":"uint24"}],"internalType":"struct Parameters","name":"_parameters","type":"tuple"}],"name":"createSale","outputs":[{"internalType":"address","name":"wesale","type":"address"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"feeTo","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_feeTo","type":"address"}],"name":"setFeeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_transferSigner","type":"address"}],"name":"setTransferSigner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_version","type":"string"}],"name":"setVersion","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"transferSigner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]';function G(e={addresses:U}){const f=V(),u=M(()=>({abi:Ie,addresses:U,wallet:f.wallet,chainId:f.chainId}));return{getContract:()=>he({...u.value,...e}),DEFAULT_ADMIN_ROLE:w({...u.value,...e},"DEFAULT_ADMIN_ROLE"),createSale:w({...u.value,...e},"createSale"),feeTo:w({...u.value,...e},"feeTo"),getRoleAdmin:w({...u.value,...e},"getRoleAdmin"),grantRole:w({...u.value,...e},"grantRole"),hasRole:w({...u.value,...e},"hasRole"),owner:w({...u.value,...e},"owner"),renounceOwnership:w({...u.value,...e},"renounceOwnership"),renounceRole:w({...u.value,...e},"renounceRole"),revokeRole:w({...u.value,...e},"revokeRole"),setFeeTo:w({...u.value,...e},"setFeeTo"),setTransferSigner:w({...u.value,...e},"setTransferSigner"),setVersion:w({...u.value,...e},"setVersion"),supportsInterface:w({...u.value,...e},"supportsInterface"),transferOwnership:w({...u.value,...e},"transferOwnership"),transferSigner:w({...u.value,...e},"transferSigner")}}const Te=_({name:"AdditionalInformation",props:{crowdfundingInfo:{type:Object,required:!0}},setup(e,f){const u=h();E(()=>e.crowdfundingInfo.poster,()=>{var o;console.log("props.crowdfundingInfo.poster",(o=e.crowdfundingInfo.poster)==null?void 0:o.url)}),E(()=>e.crowdfundingInfo.description,()=>{var o;(o=u.value)==null||o.validate()});const I=h(null),T=M(()=>[{t:"custom",title:"Poster",name:"poster",rules:[{validator:(o,d)=>!!d,message:"Poster cannot be blank",trigger:"change"},{validator:(o,d)=>(d==null?void 0:d.status)==="finished",message:"",trigger:"change"}],slots:{label:()=>[A(t("div",{class:"flex items-end"},[i("Poster"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")])," "]))]},formItemProps:{first:!0},render(){return t(te,{placeholder:"Recommended image ratio: 3:2, Max size: 1MB",value:e.crowdfundingInfo.poster,"onUpdate:value":o=>e.crowdfundingInfo.poster=o},null)}},{title:"Youtube",name:"youtube",maxlength:200,placeholder:"EX\uFF1Ahttps://www.youtube.com/watch?v=xxxxx",rules:[{validator:(o,d)=>!d||d&&d.startsWith("https://www.youtube.com/watch?v="),message:"Invalid youtube video",trigger:"blur"}]},{title:"Launchpad Detail",name:"detail",maxlength:200,placeholder:"EX\uFF1Ahttps://...",rules:[{validator:(o,d)=>!d||d&&d.startsWith("https://"),message:"Invalid URL",trigger:"blur"}]},{t:"custom",title:"Description",name:"description",formItemProps:{ref:o=>u.value=o,first:!0},rules:[{required:!0,message:"Description must be 64 characters or more",trigger:"blur"},{validator:(o,d)=>d&&d.replace(/<.>|<\/.>/g,"").length>64,message:"Description must be 64 characters or more",trigger:"blur"}],render(){return t(ye,{limit:512,placeholder:"Much more details to description this Launchpad",class:"w-full",value:e.crowdfundingInfo.description,"onUpdate:value":o=>e.crowdfundingInfo.description=o},null)}}]),m=W(T.value);return console.log("additionalInfoRules===>",m),f.expose({additionalInfoForm:I}),{formFields:T,additionalInfoForm:I,additionalInfoRules:m}},render(){return t(j,{ref:e=>this.additionalInfoForm=e,rules:this.additionalInfoRules,model:this.crowdfundingInfo},{default:()=>[t(X,{fields:this.formFields,values:this.crowdfundingInfo},null)]})}}),Z="0x0000000000000000000000000000000000000000",xe=_({name:"Information",props:{crowdfundingInfo:{type:Object,required:!0}},setup(e,f){const u=z(),I=V(),T=h(null),m=be(Z)[I.chainId],o=M(()=>m.filter(r=>r.value===Z)),d=async r=>{const a=await u(r);try{const[n]=await Promise.all([a.decimals()]);e.crowdfundingInfo.buyTokenDecimals=n}catch(n){console.warn("getBuyTokenDecimals error:",n),e.crowdfundingInfo.buyTokenDecimals="18"}};J(()=>{e.crowdfundingInfo.buyTokenContract=o.value[0].value,e.crowdfundingInfo.buyTokenName=o.value[0].label,e.crowdfundingInfo.buyTokenSymbol=o.value[0].label,d(e.crowdfundingInfo.buyTokenContract)});const g=M(()=>{const{softCap:r,hardCap:a,buyPrice:n,liquidityPercent:y,listingRate:s,listing:l}=e.crowdfundingInfo;return l==="Manual Listing"?!a||!n?"?":a*n:!r||!a||!n||!y||!s?"?":a*n+a*y*s/100});E(()=>g.value,()=>{e.crowdfundingInfo.totalSellToken=Number(g.value)});const v=M(()=>{const r=[{t:"custom",title:"IBO Rate",name:"buyPrice",class:`!grid-rows-[28px,60px,1fr] items-start ${e.crowdfundingInfo.listing==="Manual Listing"?"col-start-1 col-end-3":""}`,formItemProps:{first:!0},slots:{label:()=>[A(t("div",{class:"flex items-end"},[i("Rate"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")]),t("span",{class:"ml-1 u-h5"},[i("1 "),e.crowdfundingInfo.buyTokenSymbol,i(" =")," ",e.crowdfundingInfo.buyPrice||"?"," ",e.crowdfundingInfo.sellTokenSymbol])]))]},rules:[{validator:(a,n)=>!!n,message:"Rate cannot be blank",trigger:["blur"]},{validator:(a,n)=>n>0,message:" Rate must be positive number",trigger:"blur"}],render(a){return t("div",{class:"w-full"},[t(S,{placeholder:"EX:10",maxlength:"20",precision:Number(e.crowdfundingInfo.sellTokenDecimals),value:e.crowdfundingInfo.buyPrice,"onUpdate:value":n=>e.crowdfundingInfo.buyPrice=n,class:"flex-1"},null),t("div",{class:"my-1 text-xs text-color3"},[i("The price is at when investors buy token during Launchpad.")])])}},{t:"custom",title:"Liquidity (%)",name:"liquidityPercent",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},rules:[{validator:(a,n)=>!!n,message:"Liquidity cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Liquidity must be positive number.",trigger:"blur"}],render(a){return t("div",{class:"flex-1"},[t(S,{placeholder:"EX\uFF1A70",max:"100",precision:2,value:e.crowdfundingInfo.liquidityPercent,"onUpdate:value":n=>e.crowdfundingInfo.liquidityPercent=n,class:"flex-1"},null),t("div",{class:"my-1 text-xs text-color3"},[e.crowdfundingInfo.liquidityPercent||"?",i(" % of raised funds that should be allocated to Liquidity.")])])}},{t:"custom",title:"Currency",name:"currency",class:"!grid-rows-[20px,36px,1fr] items-start col-start-1 col-end-3",formItemProps:{first:!0},render(a){return t(Q,null,[o.value.map(n=>ce(t(ne,{checked:e.crowdfundingInfo.buyTokenName===n.label,value:n.value,name:"basic-demo",onUpdateChecked:y=>{y&&(e.crowdfundingInfo.buyTokenName=n.label),y&&(e.crowdfundingInfo.buyTokenSymbol=n.label)}},{default:()=>[n.label]}),[[fe("modal"),e.crowdfundingInfo.buyTokenContract,"value"]]))])}},{t:"custom",title:"Soft Cap",name:"softCap",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[A(t("div",null,[i("Soft Cap ("),e.crowdfundingInfo.buyTokenSymbol,i(")"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")])]))]},rules:[{validator:(a,n)=>!!n,message:"Softcap Buy cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Softcap Buy must be positive number.",trigger:"blur"}],render(a){return t("div",{class:"w-full"},[t(S,{placeholder:"EX: 10",precision:18,maxlength:"20",value:e.crowdfundingInfo.softCap,"onUpdate:value":n=>e.crowdfundingInfo.softCap=n,class:"flex-1"},null)])}},{t:"custom",title:"Hard Cap",name:"hardCap",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[A(t("div",null,[i("Hard Cap ("),e.crowdfundingInfo.buyTokenSymbol,i(")"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")])]))]},rules:[{validator:(a,n)=>!!n,message:"Hard Cap cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Hard Cap must be positive number.",trigger:"blur"},{validator:(a,n)=>(console.log(n,e.crowdfundingInfo.softCap),+n>(Number(e.crowdfundingInfo.softCap)||0)),message:"Hard Cap must be greater than Soft Cap!",trigger:"blur"}],render(a){return t(S,{placeholder:"EX: 10",precision:18,maxlength:"20",value:e.crowdfundingInfo.hardCap,"onUpdate:value":n=>e.crowdfundingInfo.hardCap=n,class:"flex flex-1 items-center"},null)}},{t:"custom",title:"Minimum Buy",name:"minBuyAmount",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[A(t("div",null,[i("Minimum Buy ("),e.crowdfundingInfo.buyTokenSymbol,i(")"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")])]))]},rules:[{validator:(a,n)=>!!n,message:"Minimum Buy cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Minimum Buy must be positive number.",trigger:"blur"}],render(a){return t(S,{placeholder:"EX: 10",precision:18,maxlength:"20",value:e.crowdfundingInfo.minBuyAmount,"onUpdate:value":n=>e.crowdfundingInfo.minBuyAmount=n,class:"flex flex-1 items-center"},null)}},{t:"custom",title:"Maximum Buy",name:"maxBuyAmount",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[A(t("div",null,[i("Maximum Buy ("),e.crowdfundingInfo.buyTokenSymbol,i(")"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")])]))]},rules:[{validator:(a,n)=>!!n,message:"Maximum Buy cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Maximum Buy must be positive number.",trigger:"blur"},{validator:(a,n)=>+n>+e.crowdfundingInfo.minBuyAmount,message:"Max buy must be greater than min buy.",trigger:["blur"]}],render(a){return t(S,{placeholder:"EX: 10",precision:18,maxlength:"20",value:e.crowdfundingInfo.maxBuyAmount,"onUpdate:value":n=>e.crowdfundingInfo.maxBuyAmount=n,class:"flex-1"},null)}},{t:"select",title:"Router",name:"Router",class:"!grid-rows-[28px,40px,1fr] items-start",placeholder:"Select Router",rules:[{required:!0,message:" Please select a Router",type:"string",trigger:["blur"]}],options:H.find(a=>a.chainId===e.crowdfundingInfo.chainId).routers.map(a=>({label:a.dex,value:a.address}))},{t:"custom",title:"Listing Rate",name:"listingRate",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[A(t("div",{class:"flex items-end"},[i("Listing Rate"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")]),t("span",{class:"ml-1 u-h5"},[i("1 "),e.crowdfundingInfo.buyTokenSymbol,i(" =")," ",e.crowdfundingInfo.listingRate||"?"," ",e.crowdfundingInfo.sellTokenSymbol])]))]},rules:[{validator:(a,n)=>!!n,message:"Listing Rate cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Listing Rate must be positive number.",trigger:"blur"}],render(a){return t("div",{class:"w-full"},[t(S,{placeholder:"EX:10",maxlength:"20",precision:Number(e.crowdfundingInfo.sellTokenDecimals),value:e.crowdfundingInfo.listingRate,"onUpdate:value":n=>e.crowdfundingInfo.listingRate=n,class:"flex-1"},null),t("div",{class:"my-1 text-xs text-color3"},[i("Initial token price on decentralized exchanges at launch.")])])}},{t:"date",title:"Start Date (UTC)",name:"startTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",format:"yyyy-MM-dd HH:mm",rules:[{required:!0,message:"Start Date cannot be blank."},{validator:(a,n)=>!n||!e.crowdfundingInfo.endTime?!0:C(n).isBefore(C(e.crowdfundingInfo.endTime)),message:"Start time needs to be before End time.",trigger:["blur"]}],isDateDisabled:a=>C(a)<C().startOf("day"),placeholder:"Select a date"},{t:"date",title:"End Date (UTC)",name:"endTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",actions:["clear","confirm"],format:"yyyy-MM-dd HH:mm",rules:[{required:!0,message:"End Date cannot be blank."},{validator:(a,n)=>!n||!e.crowdfundingInfo.startTime?!0:C(n).isAfter(C(e.crowdfundingInfo.startTime)),message:"End time needs to be after Start time.",trigger:["blur"]}],isDateDisabled:a=>C(a)<C().startOf("day"),placeholder:"Select a date."},{t:"custom",name:"usingVestingContributor",title:"",class:`!grid-rows-[0px,${e.crowdfundingInfo.isRebaseToken?72:0}px,1fr] items-start col-start-1 col-end-3`,formItemProps:{first:!0},render(a){return t("div",{class:"w-full"},[t(ie,{checked:e.crowdfundingInfo.usingVestingContributor,disabled:e.crowdfundingInfo.isRebaseToken,size:"large",onUpdateChecked:n=>{console.log(n,8989),e.crowdfundingInfo.usingVestingContributor=n}},{default:()=>[i("\xA0\xA0Using Vesting Contributor?")]}),e.crowdfundingInfo.isRebaseToken&&t("div",{style:{borderColor:"#F46359",background:"#F4695922",color:"#F12323"},class:"border-solid flex p border-1 rounded-0 h-8 mt-3 text-xs row pl-3 items-center"},[i("The presale tokens are rebase tokens, and therefore cannot be used with Vesting Contributor.")])])}},{t:"custom",title:"First release for presale (%)*",name:"firstRelease",class:"!grid-rows-[28px,40px,1fr] items-start col-start-1 col-end-3",formItemProps:{first:!0},rules:[{validator:(a,n)=>!!n,message:"First release cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"First release must be positive number.",trigger:"blur"}],render(a){return t(S,{placeholder:"EX\uFF1A50",max:"100",disabled:e.crowdfundingInfo.isRebaseToken,precision:2,value:e.crowdfundingInfo.firstRelease,"onUpdate:value":n=>e.crowdfundingInfo.firstRelease=n,class:"flex-1"},null)}},{t:"custom",title:"Vesting period each cycle (days)*",name:"vestingPeriod",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},rules:[{validator:(a,n)=>!!n,message:"Vesting period cannot be blank.",trigger:["blur"]},{validator:(a,n)=>n>0,message:"Vesting period must be positive number.",trigger:"blur"},{validator:(a,n)=>+n%1===0,message:"Period must be a positive integer.",trigger:"blur"}],render(a){return t(S,{placeholder:"EX\uFF1A7",max:"100",precision:2,step:.5,disabled:e.crowdfundingInfo.isRebaseToken,value:e.crowdfundingInfo.vestingPeriod,"onUpdate:value":n=>e.crowdfundingInfo.vestingPeriod=n,class:"flex-1"},null)}},{t:"custom",title:"Presale token release each cycle (%) *",name:"tokenCycle",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},rules:[{validator:(a,n)=>!!n,message:"Presale token cannot be blank.",trigger:["blur"]},{validator:(a,n)=>+n>0,message:"Vesting period must be positive number.",trigger:"blur"},{validator:(a,n)=>(console.log(n,e.crowdfundingInfo.firstRelease),+(e.crowdfundingInfo.firstRelease||0)+ +n<=100),message:"First release for presale and Percent token release each cycle must be less than 100 percent.",trigger:["blur","input"]}],render(a){return t(S,{placeholder:"EX\uFF1A20",max:100-e.crowdfundingInfo.firstRelease,disabled:e.crowdfundingInfo.isRebaseToken,precision:2,value:e.crowdfundingInfo.tokenCycle,"onUpdate:value":n=>e.crowdfundingInfo.tokenCycle=n,class:"flex-1"},null)}}];if(e.crowdfundingInfo.listing==="Manual Listing"){const a=r.findIndex(s=>s.name==="Router");r.splice(a,1);const n=r.findIndex(s=>s.name==="listingRate");r.splice(n,1);const y=r.findIndex(s=>s.name==="liquidityPercent");r.splice(y,1)}if(!e.crowdfundingInfo.usingVestingContributor){const a=r.findIndex(s=>s.name==="firstRelease");r.splice(a,1);const n=r.findIndex(s=>s.name==="vestingPeriod");r.splice(n,1);const y=r.findIndex(s=>s.name==="tokenCycle");r.splice(y,1)}return r}),x=W(v.value);return f.expose({crowdfundingInfoForm:T}),{formFields:v,crowdfundingInfoForm:T,crowdfundingInfoRules:x,totalSellToken:g}},render(){return t("div",null,[t(j,{ref:e=>this.crowdfundingInfoForm=e,rules:this.crowdfundingInfoRules,model:this.crowdfundingInfo,class:"grid gap-x-10 grid-cols-2"},{default:()=>[t(X,{fields:this.formFields,values:this.crowdfundingInfo},null)]}),t("div",{class:"bg-purple rounded-sm mt-4 py-5.5 px-6"},[i("Need "),t("span",{class:"text-primary"},[this.totalSellToken]),this.crowdfundingInfo.sellTokenSymbol,i(" to create Launchpad.")])])}});const ke=_({name:"ReviewInfo",props:{crowdfundingInfo:{type:Object,required:!0}},render(){var e;return t("div",{class:"review-info"},[t("div",{class:"review-info-item u-h6"},[t("div",{class:"w-[220px] title"},[i("Project:")]),t("div",null,[this.crowdfundingInfo.startupName])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Token Contract :")]),t("div",{class:"text-primary"},[this.crowdfundingInfo.sellTokenContract])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Team Wallet Address :")]),t("div",{class:"text-primary"},[this.crowdfundingInfo.teamWallet])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Soft Cap:")]),t("div",null,[this.crowdfundingInfo.softCap,i(" "),this.crowdfundingInfo.buyTokenSymbol])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Hard Cap:")]),t("div",null,[this.crowdfundingInfo.hardCap,i(" "),this.crowdfundingInfo.buyTokenSymbol])]),this.crowdfundingInfo.listing==="Auto Listing"&&t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Liquidity :")]),t("div",null,[this.crowdfundingInfo.liquidityPercent,i("%")])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Rate :")]),t("div",null,[i("1 "),this.crowdfundingInfo.buyTokenSymbol,i(" = "),this.crowdfundingInfo.buyPrice," ",this.crowdfundingInfo.sellTokenSymbol])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Maximum Buy :")]),t("div",null,[this.crowdfundingInfo.maxBuyAmount,i(" "),this.crowdfundingInfo.buyTokenSymbol])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Minimum Buy :")]),t("div",null,[this.crowdfundingInfo.minBuyAmount,i(" "),this.crowdfundingInfo.buyTokenSymbol])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Launchpad Start Time :")]),t("div",null,[C.utc(this.crowdfundingInfo.startTime).format()])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Launchpad End Time :")]),t("div",null,[C.utc(this.crowdfundingInfo.endTime).format()])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Listing Option :")]),t("div",null,[this.crowdfundingInfo.listing])]),this.crowdfundingInfo.listing==="Auto Listing"&&t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Router :")]),t("div",null,[(e=re(this.crowdfundingInfo.Router))==null?void 0:e.dex])]),this.crowdfundingInfo.listing==="Auto Listing"&&t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Listing Rate :")]),t("div",null,[i("1 "),this.crowdfundingInfo.buyTokenSymbol,i(" = "),this.crowdfundingInfo.listingRate," ",this.crowdfundingInfo.sellTokenSymbol])]),this.crowdfundingInfo.usingVestingContributor&&t(Q,null,[t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("First Release :")]),t("div",null,[this.crowdfundingInfo.firstRelease,i("%")])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Vesting Period:")]),t("div",null,[this.crowdfundingInfo.vestingPeriod])]),t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Token Cycle:")]),t("div",null,[this.crowdfundingInfo.tokenCycle,i("%")])])," "]),!!this.crowdfundingInfo.youtube&&t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Youtube :")]),t("a",{href:this.crowdfundingInfo.youtube,target:"__blank",class:"flex-1 text-primary"},[this.crowdfundingInfo.youtube])]),!!this.crowdfundingInfo.detail&&t("div",{class:"review-info-item"},[t("div",{class:"w-[220px] title"},[i("Launchpad detail :")]),t("a",{href:this.crowdfundingInfo.detail,target:"__blank",class:"flex-1 text-primary"},[this.crowdfundingInfo.detail])])])}}),K=H.filter(e=>!e.routers||!e.routers.length).map(e=>e.chainId),Ce=_({name:"VerifyToken",props:{crowdfundingInfo:{type:Object,required:!0}},emits:["closeDrawer"],setup(e,f){const u=ve(),I=ae(),T=z(),m=h(null),o=h([]),d=h(),g=s=>{const l=o.value.find(b=>b.value===s);!l||(e.crowdfundingInfo.startupName=l.label,e.crowdfundingInfo.chainId=l.chainId,l.tokenAddress&&(e.crowdfundingInfo.sellTokenContract=l.tokenAddress,me(()=>{d.value.validate()})))};E(()=>e.crowdfundingInfo.chainId,()=>{K.includes(e.crowdfundingInfo.chainId)?e.crowdfundingInfo.listing="Manual Listing":e.crowdfundingInfo.listing="Auto Listing"});const v=()=>{e.crowdfundingInfo.sellTokenName="",e.crowdfundingInfo.sellTokenSymbol="",e.crowdfundingInfo.sellTokenDecimals=""},x=async s=>{const l=await T(s);try{const[b,c,P]=await Promise.all([l.name(),l.symbol(),l.decimals()]);return e.crowdfundingInfo.sellTokenName=b,e.crowdfundingInfo.sellTokenSymbol=c,e.crowdfundingInfo.sellTokenDecimals=P,!0}catch{return v(),!1}},r=M(()=>[{t:"select",title:"Project",name:"startupId",placeholder:"Select a project",rules:[{required:!0,message:" Please select a project",type:"number",trigger:["blur"]},{validator:(s,l)=>{if(l){let b=!0;return o.value.forEach(c=>{c.value===l&&(b=c.onChain)}),b}return!0},renderMessage:()=>t("div",{class:"flex items-center"},[t("span",null,[i("The startup cannot create a Launchpad without being on the blockchain,")]),t("span",{onClick:()=>n(),class:"cursor-pointer flex ml-2 items-center !text-primary"},[t("span",null,[i("Go to setting")]),t(we,{class:"h-[16px] ml-2 w-[16px]"},null)])]),trigger:"blur"}],onUpdateValue:g,options:o.value},{t:"string",title:"Title",name:"title",formItemProps:{ref:s=>d.value=s,first:!0},rules:[{required:!0,message:"Title cannot be blank",trigger:"blur"}],placeholder:"Input Launchpad title",maxlength:100},{t:"string",title:"Token Contract",name:"sellTokenContract",formItemProps:{ref:s=>d.value=s,first:!0},rules:[{required:!0,message:"Token contract cannot be blank",trigger:"blur"},{validator:(s,l)=>/^0x[a-zA-Z\d]{40}/.test(l)&&l.length===42?!0:(v(),!1),message:"Invalid token contract",trigger:"blur"},{asyncValidator:(s,l,b,c,P)=>new Promise(()=>{x(l).then(F=>{b(F?void 0:"")})}),message:"The token may not be on the current blockchain network",trigger:"blur"}],placeholder:"EX\uFF1A0x1Ce3...cF0d",maxlength:64},{t:"custom",name:"",title:"",class:e.crowdfundingInfo.sellTokenContract&&e.crowdfundingInfo.sellTokenName?"!grid-rows-[0,1fr]":"hidden",render(s){return t("div",null,[t("div",{class:"mb-6 text-grey3 text-yellow-500 u-h5"},[i("If this token has already add liquidity on the exchange, the auto listing model may fail to raise funds")]),t("div",{class:"grid grid-cols-[100px,2fr]"},[t("div",{class:"mb-6 text-grey3 u-h5"},[i("Name:")]),t("div",null,[e.crowdfundingInfo.sellTokenName]),t("div",{class:"mb-6 text-grey3 u-h5"},[i("Symbol:")]),t("div",null,[e.crowdfundingInfo.sellTokenSymbol]),t("div",{class:"text-grey3 u-h5"},[i("Decimals:")]),t("div",null,[e.crowdfundingInfo.sellTokenDecimals])])])}},{t:"string",title:"",name:"teamWallet",required:!1,formItemProps:{first:!0},slots:{label:()=>[A(t("div",null,[i("Team Wallet Address"),t("span",{class:"n-form-item-label__asterisk"},[i("\xA0*")]),t("span",{class:"font-normal text-xs ml-4 text-color3"},[i("Team wallet address used to receive funds raised")])]))]},rules:[{validator:(s,l)=>!!l,message:"Team wallet address cannot be  blank",trigger:"blur"},{validator:(s,l)=>/^0x[a-zA-Z\d]{40}/.test(l)&&l.length===42,message:"Invalid team wallet address",trigger:"blur"}],placeholder:"EX\uFF1A0x1Ce3...cF0d",maxlength:64},{t:"select",title:"Listing Options",name:"listing",placeholder:"Select a Listing",rules:[{required:!0,message:" Please select a Listing",type:"string",trigger:["blur"]}],options:[{label:"Auto Listing",value:"Auto Listing",disabled:K.includes(e.crowdfundingInfo.chainId)},{label:"Manual Listing",value:"Manual Listing"}]}]);J(()=>{a()});const a=async()=>{var s;try{const{error:l,data:b}=await O["Startup@get-startups"]({admin_comer_id:(s=I==null?void 0:I.profile)==null?void 0:s.id,size:1e3,page:1});l||(o.value=(b.list||[]).map(c=>({label:c.name||"",value:c.id||0,disabled:!1,tokenAddress:c.token_contract,onChain:c.on_chain||!1,chainId:c.chain_id})).sort(function(P,F){return P.label.localeCompare(F.label,"zh-Hans-CN",{sensitivity:"accent"})}))}catch(l){console.error("error",l)}},n=async()=>{u.push({path:`/project/setting/${e.crowdfundingInfo.startupId}`}),f.emit("closeDrawer")},y=W(r.value);return f.expose({verifyTokenForm:m}),{verifyTokenForm:m,verifyTokenFields:r,verifyTokenFieldsRules:y}},render(){return t(j,{ref:e=>this.verifyTokenForm=e,rules:this.verifyTokenFieldsRules,model:this.crowdfundingInfo},{default:()=>[t(X,{fields:this.verifyTokenFields,values:this.crowdfundingInfo},null),t("div",{style:{borderColor:"#65b400",background:"#dbef8822"},class:"border-solid flex p border-1 rounded-0 h-8 text-xs row pl-3 items-center"},[i("5% funding you raised as fee.")])]})}}),Se=H.filter(e=>!e.routers||!e.routers.length).map(e=>e.chainId),Re=_({name:"CreateCrowdfundingForm",emits:["cancel"],props:{stepOptions:{type:Array,required:!0}},setup(e,f){const u=se(),I=z();let T=G();const m=V(),o=h(),d=h(),g=h(),v=h(!1),x=h(!1),r=ge({chainId:void 0,current:1,startupId:void 0,startupName:"",title:"",sellTokenContract:"",sellTokenName:"",sellTokenSymbol:"",sellTokenDecimals:"",sellTokenSupply:"",teamWallet:"",listing:Se.includes(m.chainId)?"Manual Listing":"Auto Listing",softCap:null,hardCap:null,listingRate:void 0,buyTokenContract:"",buyTokenName:"",buyTokenSymbol:"",totalSellToken:void 0,buyTokenDecimals:"",liquidityPercent:void 0,buyPrice:void 0,maxBuyAmount:void 0,minBuyAmount:void 0,sellTax:void 0,Router:null,startTime:void 0,endTime:void 0,sellTokenDeposit:0,isRebaseToken:!1,usingVestingContributor:!0,firstRelease:100,vestingPeriod:0,tokenCycle:0,poster:"",youtube:"",detail:"",description:void 0}),a=()=>{m.init(!0).then(()=>{T=G()})};E(()=>r.startupId,()=>{r.startupId&&n(r.startupId)});const n=async p=>{const{error:k,data:L}=await O["Startup@get-startup-info"]({startup_id:p});k||y(L.chain_id)},y=async p=>{var k;m.chainId!==p&&(await m.ensureWalletConnected(),await((k=m.wallet)==null?void 0:k.switchNetwork(p))?(a(),r.sellTokenContract=""):c())},s=()=>{v.value=!0},l=()=>{r.current-=1},b=()=>{var p,k,L,B,q,Y;if(!x.value)if(x.value=!0,r.current===1)(k=(p=o.value)==null?void 0:p.verifyTokenForm)==null||k.validate(N=>{x.value=!1,N||(r.current+=1)});else if(r.current===2)(B=(L=d.value)==null?void 0:L.crowdfundingInfoForm)==null||B.validate(N=>{x.value=!1,N||(r.current+=1)});else if(r.current===3)(Y=(q=g.value)==null?void 0:q.additionalInfoForm)==null||Y.validate(N=>{x.value=!1,N||(r.current+=1)});else return},c=()=>{v.value=!1,f.emit("cancel")},P=async()=>{const p="Apply for creating Launchpad contract on blockchain.";try{const k=U[m.chainId];u.startContract(p);const B=await(await I(r.sellTokenContract)).approve(k,R(String(r.totalSellToken),r.sellTokenDecimals));await B.wait();const q=await T.createSale(r.teamWallet,r.sellTokenContract,r.buyTokenContract,[R(r.buyPrice.toString(),r.sellTokenDecimals),r.listing==="Auto Listing"?R(r.liquidityPercent.toString(),4):0,R(r.minBuyAmount.toString(),Number(r.buyTokenDecimals)),R(r.maxBuyAmount.toString(),Number(r.buyTokenDecimals)),R(r.softCap.toString(),Number(r.buyTokenDecimals)),R(r.hardCap.toString(),Number(r.buyTokenDecimals)),r.listing==="Auto Listing"?r.Router:"0x0000000000000000000000000000000000000000",r.listing==="Auto Listing"?R(String(r.listingRate),r.sellTokenDecimals):0,C(r.startTime).valueOf()/1e3,C(r.endTime).valueOf()/1e3,R(r.firstRelease.toString(),4),+r.vestingPeriod*24*60*60,R(r.tokenCycle.toString(),4),Number(r.buyTokenDecimals)],"Create Launchpad contract on blockchain.","Launchpad was created");return await B.wait(),q}catch(k){$(k),console.error(k),u.endContract("failed",{success:!1})}return null},F=async()=>{try{console.log(r);const p=await P();if(console.log("contractRes==>",p),!p)return;await O["SaleLaunchpad@create-sale-launchpad"]({title:r.title,startup_id:r.startupId,chain_id:m.chainId,tx_hash:p.hash,poster:r.poster.url,description:r.description,youtube:r.youtube,detail:r.detail}),f.emit("cancel")}catch(p){$(p),console.error("error===>",p)}},ee=async()=>{F()};return f.expose({crowdfundingInfo:r,toPreviousStep:l,toNext:b,showLeaveTipModal:s,closeDrawer:c,onSubmit:ee}),{crowdfundingInfo:r,modalVisibleState:v,verifyTokenRef:o,fundingInfoRef:d,additionalInfoRef:g,closeDrawer:c}},render(){return t("div",null,[t("div",{class:"mx-35 mb-20"},[t(pe,{steps:this.stepOptions,current:this.crowdfundingInfo.current,classes:{stepTitle:"w-32 text-center"},class:"mt-4"},null)]),this.crowdfundingInfo.current===1&&t(Ce,{crowdfundingInfo:this.crowdfundingInfo,onCloseDrawer:this.closeDrawer,ref:e=>this.verifyTokenRef=e},null),this.crowdfundingInfo.current===2&&t(xe,{crowdfundingInfo:this.crowdfundingInfo,ref:e=>this.fundingInfoRef=e},null),this.crowdfundingInfo.current===3&&t(Te,{crowdfundingInfo:this.crowdfundingInfo,ref:e=>this.additionalInfoRef=e},null),this.crowdfundingInfo.current===4&&t(ke,{crowdfundingInfo:this.crowdfundingInfo},null),t(oe,{show:this.modalVisibleState,"onUpdate:show":e=>this.modalVisibleState=e,maskClosable:!1},{default:()=>[t(le,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>this.modalVisibleState=!1,title:"Discard the changes?"},{default:()=>[t("div",{class:"min-h-20 text-color2 u-h6"},[i("The action cannot be undone at once you click 'Yes'!")]),t("div",{class:"flex mt-4 justify-end"},[t(D,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>this.modalVisibleState=!1},{default:()=>[i("Cancel")]}),t(D,{type:"primary",class:"w-41",onClick:this.closeDrawer},{default:()=>[i("Yes")]})])]})]})])}}),qe=_({name:"CreateSaleLaunchBlock",setup(){const e=h(),f=h(!1),u=V(),I=async()=>{await u.ensureWalletConnected(),u.isNetworkSupported?f.value=!0:(de.warning("Please switch to the supported network to create a Dcrowdfunding"),u.openNetworkSwitcher())},T=()=>{f.value=!1},m=()=>{var g,v;(v=(g=e.value)==null?void 0:g.showLeaveTipModal)==null||v.call(g)},o=[{name:"Verify Token"},{name:"The Launchpad Information "},{name:"Add Additional Information "},{name:"Review Your Information"}];return{show:I,close:T,visible:f,footer:()=>{var g,v,x,r,a,n,y,s,l,b,c;return t("div",{class:"bg-purple text-right pr-16 pb-4"},[((v=(g=e.value)==null?void 0:g.crowdfundingInfo)==null?void 0:v.current)===1&&t(D,{class:"mr-4 w-40",type:"primary",ghost:!0,onClick:m},{default:()=>[i("Cancel")]}),((r=(x=e.value)==null?void 0:x.crowdfundingInfo)==null?void 0:r.current)>1&&t(D,{class:"mr-4 w-40",type:"primary",ghost:!0,onClick:(a=e.value)==null?void 0:a.toPreviousStep},{default:()=>[i("Previous Step")]}),((y=(n=e.value)==null?void 0:n.crowdfundingInfo)==null?void 0:y.current)<o.length&&t(D,{type:"primary",class:"w-40",onClick:(s=e.value)==null?void 0:s.toNext},{default:()=>[i("Next")]}),((b=(l=e.value)==null?void 0:l.crowdfundingInfo)==null?void 0:b.current)===o.length&&t(D,{type:"primary",class:"w-40",onClick:(c=e.value)==null?void 0:c.onSubmit},{default:()=>[i("Submit")]})])},createCrowdfundingFormRef:e,stepOptions:o}},render(){return t(ue,{title:"Create Launchpad",maskClosable:!1,show:this.visible,"onUpdate:show":e=>this.visible=e},{default:()=>[this.visible&&t(Re,{ref:e=>this.createCrowdfundingFormRef=e,stepOptions:this.stepOptions,onCancel:this.close},null)],whiteBoard:this.footer})}});export{qe as C};

import{H as m,I as h,Q as N,d as _,F as P,J as H,a as U}from"./index.ac02f68f.js";import{S as D,d as O}from"./index.399f9528.js";import{l as x,bm as t,j as S,cG as R,k as B,H as F,r as v,av as E,w as C,t as M,$ as V,q,F as G}from"./bundle.f4813fa2.js";import{e as I}from"./vue.5bd64dc7.js";import{S as Y}from"./index.50b02406.js";import{g as $,a as k}from"./startup.3b3d8368.js";import{g as L}from"./etherscan.83df9912.js";import"./tools.becc2b88.js";import{u as J}from"./useTags.f9c969ef.js";import"./ui.e26017cf.js";import"./ethers.043ad920.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";function A(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!B(s)}const K=x({name:"StartupCard",props:{startup:{type:Object,required:!0}},render(){var n,p,i,b,w,g;const o=(((n=this.startup)==null?void 0:n.tags)||[]).map(r=>{var d;return(d=r==null?void 0:r.tag)==null?void 0:d.name}),l=$(((p=this.startup)==null?void 0:p.type)||0),u=I(),e=r=>{u.push({path:`/project/${r.id}`})},c=(i=L(this.startup.chain_id))==null?void 0:i.shortName;return t("div",{class:"bg-white border border-color-border rounded-sm cursor-pointer h-90 top-0 relative hover:bg-color-hover",style:"transition:all ease .3s",onClick:()=>e(this.startup)},[t("div",{class:"p-6 "},[t("div",{class:"flex items-center"},[t(Y,{src:((b=this.startup)==null?void 0:b.logo)||"",class:"bg-white rounded h-3.75rem mr-0.75rem w-3.75rem !object-cover"},null),t("div",{class:"flex-1 "},[t("div",{class:"mb-0.5rem float-right"},[this.startup.type&&this.startup.type>0?t(m,{class:"text-color2 !h-6"},A(l)?l:{default:()=>[l]}):null]),t("div",{class:"float-right clear-right"},[c&&t("div",{class:" flex py-1 items-center"},[t("img",{src:(w=L(this.startup.chain_id))==null?void 0:w.logo,class:"h-4 mr-1 w-4"},null),t("span",{class:"text-color2 truncate u-h6"},[c])])])])]),t("div",{class:"mt-12 mb-1 text-color1 truncate u-h3",title:this.startup.name},[this.startup.name]),t("p",{class:"mb-2 text-color3 break-all u-h6 line-clamp-3"},[this.startup.mission]),t("div",{class:"flex flex-wrap gap-2"},[o.map((r,d)=>d<4&&t(m,{key:d,class:"text-color1"},A(r)?r:{default:()=>[r]})),o.length-4>0?t(m,{class:"text-color1"},{default:()=>[S("+ "),o.length-4]}):null]),t("div",{class:"right-6 bottom-6 left-6 absolute"},[t("div",{class:"flex items-center"},[t("span",{class:"h-4 px-2 text-color2 inline-block u-h7"},[t("strong",{class:"mr-0.2rem text-color3"},[this.startup.connected_total]),(((g=this.startup)==null?void 0:g.connected_total)||0)>1?R("Connect"):"Connect"]),t("div",{class:"flex-1"},null),this.startup.kyc&&t(m,{class:"text-color2"},{default:()=>[S("KYC")]}),this.startup.contract_audit&&t(m,{class:"ml-2 text-color2"},{default:()=>[S("AUDIT")]})])])])])}}),Q=x({name:"StartupSkeleton",setup(s){return()=>t("div",{class:"bg-white rounded cursor-pointer h-90 relative"},[t("div",{class:"p-6"},[t("div",{class:"mb-2rem overflow-hidden"},[t(h,{class:"rounded-md float-left",width:"4rem",height:"4rem"},null),t(h,{class:"rounded--sm float-right",width:"3rem",height:"1.6rem"},null),t(h,{class:"rounded-sm mt-0.8rem float-right clear-right",width:"5rem",height:"1.6rem"},null)]),t(h,{class:"mb-1 h5"},null),t(h,{class:"mb-1 h5"},null),t(h,{class:"mb-1 h5"},null),t(h,{class:"rounded--sm mt-2rem float-left clear-right",width:"5rem",height:"1.6rem"},null)])])}}),W=x({name:"ProjectFilterTags",props:{value:{type:Array},showLength:{type:Number,default:10}},emits:["change"],setup(s,o){const l=J("startup",!1,{ad:!0}),u=F(()=>l.TagList.value||[]),e=n=>{var p;(p=s.value)!=null&&p.includes(n.name)?o.emit("change",s.value.filter(i=>i!==n.name)):o.emit("change",[...s.value||[],n.name])},c=v(!1);return{list:u,showAll:c,handleClick:e}},render(){return t("div",{class:"flex flex-wrap gap-2"},[this.list.map((s,o)=>{var l;return(this.showAll||o<this.showLength)&&t(m,{class:"text-color1 cursor-pointer hover:text-primary"+((l=this.value)!=null&&l.includes(s.name)?" text-primary !border-primary":""),onClick:()=>this.handleClick(s)},{default:()=>[s.name]})}),this.list.length-this.showLength>0?t(m,{class:"cursor-pointer !border-0 hover:text-primary",onClick:()=>this.showAll=!this.showAll},{default:()=>[this.showAll?"Less Tag":"More Tag"]}):null])}}),dt=x({name:"StartupsPage",setup(){const s=N(),o=_(),l=v(void 0),u=v(""),e=E({pageSize:24,total:0,page:1,loading:!1}),c=v([]),n=v([]),p=async a=>{console.log(l.value);const{error:f,data:y}=await U["Startup@get-startups"]({page:e.page,size:e.pageSize,type:l.value!==void 0?k.indexOf(l.value)+1:void 0,keyword:u.value,tags:c.value});if(!f){const T=Array.isArray(y.list)?y.list:[];a?n.value=T:n.value.push(...T),e.total=y.total}},i=async(a,f)=>{e.loading=!0,e.page=a,await p(f),e.loading=!1},b=O(i);C(()=>l.value,()=>i(1,!0)),C(()=>u.value,()=>b(1,!0)),C(()=>c.value,()=>i(1,!0));const w=F(()=>(e.page||0)*(e.pageSize||0)>=(e.total||0));let g=0,r=document.body;const d=()=>{if(!e.loading){const a=r==null?void 0:r.getBoundingClientRect();a.height+a.top-g<240&&(w.value||(e.page++,i(e.page)))}};M(()=>{V(()=>{g=window.innerHeight,r=document.body,document.addEventListener("scroll",d),i(e.page)})}),q(()=>{document.removeEventListener("scroll",d),s.unsubscribe("startup",1)}),s.init().then(a=>{console.log(a),s.subscribe("startup",1,f=>{console.log("subscribe",f)})});const j=a=>{c.value=a},z=k.map(a=>({label:a,value:a}));return()=>t(G,null,[e.loading?t(P,{class:"top-0 right-0 bottom-0 left-0 z-50 fixed",show:!0},null):null,t("div",{class:"flex mb-3 items-center "},[t("div",{class:"flex-1"},[t(W,{value:c.value,showLength:o.isLargeScreen?10:3,onChange:j},null)]),t(H,{options:z,placeholder:"Filter",class:"mr-4 w-28 ",clearable:!0,value:l.value,"onUpdate:value":a=>l.value=a,"consistent-menu-width":!1},null),t(D,{value:u.value,"onUpdate:value":a=>u.value=a,placeholder:"Search",loading:e.loading},null)]),t("div",{class:"grid pb-6 gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 "},[n.value.map(a=>t(K,{startup:a,key:a.id},null)),e.loading&&new Array(e.pageSize).fill("").map(a=>t(Q,null,null))])])}});export{dt as default};

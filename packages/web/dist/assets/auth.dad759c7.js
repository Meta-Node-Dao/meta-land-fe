import{u,s as l}from"./index.ac02f68f.js";import{e as f,u as c}from"./vue.5bd64dc7.js";import{aW as d}from"./bundle.f4813fa2.js";const k="/project/list";async function s(e){const o=u(),t=(e==null?void 0:e.route)||c(),i=(e==null?void 0:e.router)||f();return await o.init(),o.logged?o.profile&&!o.is_seted?(typeof(e==null?void 0:e.handleUnseted)=="function"?e==null||e.handleUnseted():t&&t.path!=="/auth/register/simple"?i.replace("/auth/register/simple"):console.warn("route is undefined",e),!1):(typeof(e==null?void 0:e.handleloged)=="function"&&(e==null||e.handleloged()),!0):(!(e!=null&&e.withoutJump)&&t&&o.logout(!1,t?{from:t.path}:void 0),typeof(e==null?void 0:e.handleUnlogin)=="function"&&(e==null||e.handleUnlogin()),!1)}async function U(e){const o=u(),t=f();if(console.log("useOnLoggedIn",e),e){const{token:n,...g}=e;o.onLogin(n,g)}const i=l("session").get("link:btn");if(i&&(i==="google"||i==="github"))l("session").remove("link:btn"),o.init(!0),t.replace("/builder");else{const n=d(o.profile);console.log(n&&Object.keys(n)),(!n||!Object.keys(n).length)&&(console.log("oauth login"),await o.init(!0)),s({flag:"useOnLoggedIn()"})}}export{U as a,k as l,s as u};

import{b as pe,e as ze,g as Ie,v as ne,t as lt,q as it,S as st,z as ot,_ as N,m as Se,a as ge,u as Ge,c as ut,D as Oe,k as Y,h as rt,M as ct,p as dt,H as mt,a3 as ft,d as yt,Q as bt,F as vt}from"./index.ac02f68f.js";import{r as pt}from"./Setting.4e1b5c78.js";import{e as gt,u as ht}from"./vue.5bd64dc7.js";import{bD as wt,bf as xt,bg as Ct,H as g,l as se,r as y,bm as e,j as a,cs as F,F as Ve,w as X,M as _t,n as He,t as Ae,av as Tt,k as kt,G as _e,q as It}from"./bundle.f4813fa2.js";import{u as Re}from"./erc20.e9c36ea3.js";import{g as be}from"./etherscan.83df9912.js";import{f as ie,B as Ye,F as S,a as ve,p as H}from"./ethers.043ad920.js";import{R as St}from"./index.160e8328.js";import{g as Et,w as T}from"./share.51f4a725.js";import{r as Te}from"./Question.9547e1ed.js";import{C as P}from"./utils.293bb65e.js";import{C as At}from"./index.ca6c5d70.js";import{u as Rt}from"./crowdfundingFactory.8efbbbe8.js";import{f as D}from"./numberFormat.980bf1e6.js";import{c as ke}from"./wallet.4184d84f.js";import{s as Nt}from"./chunk-CGVFGSHT.889ff96e.js";import{S as Mt,a as Lt}from"./ButtonGroup.19624d09.js";import{S as Pt}from"./index.7924c9c7.js";import"./ui.e26017cf.js";import"./tools.becc2b88.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";import"./useShare.dac42af0.js";import"./Twitter.88072fb4.js";import"./useTags.f9c969ef.js";import"./index.9ccd904a.js";import"./Github.2bf272eb.js";import"./valid.935dd966.js";import"./index.50b02406.js";import"./startup.3b3d8368.js";import"./util.25bcdacb.js";const Dt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},Ft=Ct("path",{d:"M9.99921 6.00084C9.73399 6.00084 9.47964 6.10619 9.2921 6.29373C9.10457 6.48127 8.99921 6.73562 8.99921 7.00084L8.99921 18.5908L6.70921 16.2908C6.5209 16.1025 6.26551 15.9967 5.99921 15.9967C5.73291 15.9967 5.47751 16.1025 5.28921 16.2908C5.1009 16.4791 4.99512 16.7345 4.99512 17.0008C4.99512 17.2671 5.1009 17.5225 5.28921 17.7108L9.28921 21.7108C9.42983 21.8496 9.60841 21.9436 9.8024 21.981C9.99638 22.0183 10.1971 21.9974 10.3792 21.9208C10.5618 21.8458 10.7182 21.7184 10.8285 21.5547C10.9388 21.391 10.9982 21.1983 10.9992 21.0008L10.9992 7.00084C10.9992 6.73562 10.8939 6.48127 10.7063 6.29373C10.5188 6.10619 10.2644 6.00084 9.99921 6.00084ZM13.6192 2.08084C13.4366 2.15586 13.2803 2.28325 13.1699 2.44698C13.0596 2.6107 13.0002 2.80341 12.9992 3.00084L12.9992 17.0008C12.9992 17.2661 13.1046 17.5204 13.2921 17.7079C13.4796 17.8955 13.734 18.0008 13.9992 18.0008C14.2644 18.0008 14.5188 17.8955 14.7063 17.7079C14.8939 17.5204 14.9992 17.2661 14.9992 17.0008L14.9992 5.41084L17.2892 7.71084C17.3822 7.80456 17.4928 7.87896 17.6146 7.92973C17.7365 7.9805 17.8672 8.00664 17.9992 8.00664C18.1312 8.00664 18.2619 7.9805 18.3838 7.92973C18.5056 7.87896 18.6162 7.80456 18.7092 7.71084C18.8029 7.61787 18.8773 7.50727 18.9281 7.38541C18.9789 7.26355 19.005 7.13285 19.005 7.00084C19.005 6.86883 18.9789 6.73812 18.9281 6.61626C18.8773 6.4944 18.8029 6.3838 18.7092 6.29084L14.7092 2.29084C14.5686 2.15208 14.39 2.05808 14.196 2.02071C14.002 1.98334 13.8013 2.00426 13.6192 2.08084Z",fill:"currentColor"},null,-1),Bt=[Ft];function Ut(t,m){return wt(),xt("svg",Dt,Bt)}const je={},$t='[{"inputs":[{"internalType":"uint256","name":"_buyAmount","type":"uint256"},{"internalType":"uint256","name":"_sellAmount","type":"uint256"}],"name":"buy","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"cancel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"deposit","outputs":[{"internalType":"uint256","name":"_depositAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getStore","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"sellTokenAddress","type":"address"},{"internalType":"address","name":"buyTokenAddress","type":"address"},{"internalType":"uint8","name":"sellTokenDecimals","type":"uint8"},{"internalType":"uint8","name":"buyTokenDecimals","type":"uint8"},{"internalType":"bool","name":"buyTokenIsNative","type":"bool"},{"internalType":"uint256","name":"raiseTotal","type":"uint256"},{"internalType":"uint256","name":"buyPrice","type":"uint256"},{"internalType":"uint16","name":"swapPercent","type":"uint16"},{"internalType":"uint16","name":"sellTax","type":"uint16"},{"internalType":"uint256","name":"maxBuyAmount","type":"uint256"},{"internalType":"uint256","name":"minBuyAmount","type":"uint256"},{"internalType":"uint16","name":"maxSellPercent","type":"uint16"},{"internalType":"address","name":"teamWallet","type":"address"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"address","name":"router","type":"address"},{"internalType":"uint256","name":"dexInitPrice","type":"uint256"}],"internalType":"struct Parameters","name":"_parameters","type":"tuple"}],"name":"init","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"maxBuyAmount","outputs":[{"internalType":"uint256","name":"_buyAmount","type":"uint256"},{"internalType":"uint256","name":"_sellAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSellAmount","outputs":[{"internalType":"uint256","name":"_buyAmount","type":"uint256"},{"internalType":"uint256","name":"_sellAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"parameters","outputs":[{"internalType":"address","name":"_sellTokenAddress","type":"address"},{"internalType":"address","name":"_buyTokenAddress","type":"address"},{"internalType":"uint8","name":"_buyTokenDecimals","type":"uint8"},{"internalType":"uint256","name":"_buyPrice","type":"uint256"},{"internalType":"uint16","name":"_swapPercent","type":"uint16"},{"internalType":"uint256","name":"_maxBuyAmount","type":"uint256"},{"internalType":"uint256","name":"_minBuyAmount","type":"uint256"},{"internalType":"uint16","name":"_maxSellPercent","type":"uint16"},{"internalType":"uint256","name":"_dexInitPrice","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"remove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_buyAmount","type":"uint256"},{"internalType":"uint256","name":"_sellAmount","type":"uint256"}],"name":"sell","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"state","outputs":[{"internalType":"uint256","name":"_raiseTotal","type":"uint256"},{"internalType":"uint256","name":"_raiseAmount","type":"uint256"},{"internalType":"uint256","name":"_swapPoolAmount","type":"uint256"},{"internalType":"uint256","name":"_buyTokenBalance","type":"uint256"},{"internalType":"enum Crowdfunding.Status","name":"_status","type":"uint8"},{"internalType":"uint256","name":"_dexInitPrice","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newCrowdfunding","type":"address"}],"name":"transferPrimary","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"newStore","type":"address"}],"name":"transferStore","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_router","type":"address"},{"internalType":"uint256","name":"_amountA","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"transferToLiquidity","outputs":[{"internalType":"bool","name":"success","type":"bool"},{"internalType":"bytes","name":"result","type":"bytes"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_endTime","type":"uint256"}],"name":"updateParas","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vaultAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]';function Ee(t={addresses:je}){const m=pe(),s=g(()=>({abi:$t,addresses:je,wallet:m.wallet,chainId:m.chainId}));return{getContract:()=>Et({...s.value,...t}),buy:T({...s.value,...t},"buy"),cancel:T({...s.value,...t},"cancel"),deposit:T({...s.value,...t},"deposit"),getStore:T({...s.value,...t},"getStore"),init:T({...s.value,...t},"init"),maxBuyAmount:T({...s.value,...t},"maxBuyAmount"),maxSellAmount:T({...s.value,...t},"maxSellAmount"),owner:T({...s.value,...t},"owner"),parameters:T({...s.value,...t},"parameters"),remove:T({...s.value,...t},"remove"),renounceOwnership:T({...s.value,...t},"renounceOwnership"),sell:T({...s.value,...t},"sell"),state:T({...s.value,...t},"state"),transferOwnership:T({...s.value,...t},"transferOwnership"),transferPrimary:T({...s.value,...t},"transferPrimary"),transferStore:T({...s.value,...t},"transferStore"),transferToLiquidity:T({...s.value,...t},"transferToLiquidity"),updateParas:T({...s.value,...t},"updateParas"),vaultAccount:T({...s.value,...t},"vaultAccount")}}const Ot=se({name:"CrowdfundingInfo",props:{info:{type:Object,required:!0}},setup(t){const m=y({}),s=y({}),o=Re(),h=g(()=>t.info.buy_token_contract==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"),b=async l=>{const c=await o(l);return await Promise.all([c.name(),c.decimals(),c.totalSupply(),c.symbol()])},w=async()=>{var l;try{const[c,E,d,M]=await b(t.info.sell_token_contract);s.value.name=c,s.value.decimal=E,s.value.supply=ie(d.toString()).toString(),s.value.symbol=M}catch{s.value.name=t.info.sell_token_name||"--",s.value.decimal=t.info.sell_token_decimals,s.value.supply=((l=t.info.sell_token_supply)==null?void 0:l.toString())||"--",s.value.symbol=t.info.sell_token_symbol}},x=async()=>{var l;if(h)m.value.symbol=(l=be(t.info.chain_id))==null?void 0:l.currencySymbol;else try{const[c,E,d,M]=await b(t.info.buy_token_contract);m.value.name=c,m.value.decimal=E,m.value.supply=ie(d.toString()).toString(),m.value.symbol=M}catch{m.value.symbol="Token"}},i=l=>Number(l).toLocaleString().replace(".00",""),f=g(()=>{if(t.info.youtube){const{search:l}=new URL(t.info.youtube);return l.replace("?v=","")}return""});x(),w();const u=t.info.dex_router==="0x0000000000000000000000000000000000000000",v=g(()=>{var l;return(l=ze.find(c=>c.chainId===t.info.chain_id))==null?void 0:l.explorerUrl});return()=>e(ne,null,{default:()=>{var l,c,E;return[e("div",{class:"mb-4 text-color1 u-h4"},[t.info.title]),t.info.youtube&&e("div",{class:"mb-6"},[e("iframe",{class:"rounded-sm",width:"100%",height:"320",src:`https://www.youtube.com/embed/${f.value}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0},null)]),t.info.detail&&e("div",{class:"mb-6"},[e("div",{class:"mb-1 u-title2"},[a("Launchpad detail\uFF1A")]),e("a",{class:"text-primary u-h5",target:"__blank",href:t.info.detail},[t.info.detail])]),e("div",{class:"mb-6 u-h6",innerHTML:t.info.description},null),e("div",{class:"grid text-color2 gap-y-6 grid-cols-[220px,1fr] u-h6 <lg:grid-cols-[1fr,1fr]"},[e("div",{class:"text-color1"},[a("Launchpad Address :")]),e("div",{class:"text-primary"},[e("a",{target:"_blank",href:`${v.value}/address/${t.info.crowdfunding_contract}`},[t.info.crowdfunding_contract])]),e("div",{class:"text-color1"},[a("Team Wallet Address :")]),e("div",{class:"text-primary"},[e("a",{target:"_blank",href:`${v.value}/address/${t.info.team_wallet}`},[t.info.team_wallet])]),e("div",{class:"text-color1"},[a("Token Contract :")]),e("div",{class:"text-primary"},[e("a",{target:"_blank",href:`${v.value}/address/${t.info.sell_token_contract}`},[t.info.sell_token_contract])]),e("div",{class:"text-color1"},[a("Token Name :")]),e("div",null,[s.value.name]),e("div",{class:"text-color1"},[a("Token Symbol :")]),e("div",null,[s.value.symbol]),e("div",{class:"text-color1"},[a("Token Decimals :")]),e("div",null,[s.value.decimal]),e("div",{class:"text-color1"},[a("Total Supply :")]),e("div",null,[i(s.value.supply),a(" "),s.value.symbol]),e("div",{class:"text-color1"},[a("Token For Launchpad :")]),e("div",null,[i(t.info.raise_goal*t.info.buy_price)," ",s.value.symbol]),e("div",{class:"text-color1"},[a("Rate :")]),e("div",null,[a("1 "),m.value.symbol,a(" = "),i(t.info.buy_price)," ",s.value.symbol]),e("div",{class:"text-color1"},[a("Swap :")]),e("div",null,[t.info.swap_percent,a(" %")]),e("div",{class:"text-color1"},[a("Sell Tax :")]),e("div",null,[t.info.sell_tax,a(" %")]),e("div",{class:"text-color1"},[a("Minimum Buy :")]),e("div",null,[t.info.min_buy_amount]),e("div",{class:"text-color1"},[a("Maximum Buy :")]),e("div",null,[t.info.max_buy_amount]),e("div",{class:"text-color1"},[a("Maximum Sell :")]),e("div",null,[t.info.max_sell_percent,a(" % of the bought token amount")]),e("div",{class:"text-color1"},[a("Start Time :")]),e("div",null,[F.utc(+(((l=t.info)==null?void 0:l.start_time)||0)).format()]),e("div",{class:"text-color1"},[a("End Time :")]),e("div",null,[F.utc(+(((c=t.info)==null?void 0:c.end_time)||0)).format()]),e("div",{class:"text-color1"},[a("Listing Option :")]),e("div",null,[u?"Manual Listing":"Auto Listing"]),!u&&e(Ve,null,[e("div",{class:"text-color1"},[a("Router :")]),e("div",null,[(E=Ie(t.info.dex_router))==null?void 0:E.dex]),e("div",{class:"text-color1"},[a("Listing Rate :")]),e("div",null,[`1 ${m.value.symbol} = ${t.info.dex_init_price} ${s.value.symbol}`])])])]}})}}),jt=se({name:"CrowdfundingEditDialog",props:{show:{type:Boolean},info:{type:Object,required:!0}},emits:["close","update"],setup(t,m){const s=pe(),o=y({...t.info,startTime:Number(t.info.start_time),endTime:Number(t.info.end_time)});X(()=>t.show,()=>{t.show&&(o.value={...t.info,startTime:Number(t.info.start_time),endTime:Number(t.info.end_time)})});const h=g(()=>s.chainId===t.info.chain_id),b=async()=>{const l=Ee({chainId:s.chainId,addresses:{[s.chainId]:t.info.crowdfunding_contract}});await l.parameters("Waiting to load.","Waiting to load.");const c=await l.updateParas(Ye.from(o.value.endTime/1e3),"Waiting to update.","Waiting to update.");c&&c.wait().then(E=>{console.log(33333333,E)})},w=y(!1),x=y();X(()=>t.info.description,()=>{var l;(l=x.value)==null||l.validate()});const i=g(()=>[{t:"string",title:"Title",name:"title",rules:[{required:!0,message:"Title cannot be blank",trigger:"blur"}],placeholder:"Input Launchpad title",maxlength:100},{t:"date",title:"Start Date (UTC)",name:"startTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",format:"yyyy-MM-dd HH:mm",disabled:!0,placeholder:"Select a date"},{t:"date",title:"End Date (UTC)",name:"endTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",actions:["confirm"],format:"yyyy-MM-dd HH:mm",required:!0,disabled:Number(t.info.end_time)<new Date().getTime()||!h.value,isDateDisabled:l=>l<Number(t.info.end_time),placeholder:"Select a date"},{t:"custom",title:"Poster",name:"poster",slots:{label:()=>[_t(e("div",{class:"flex items-end"},[a("Poster"),e("span",{class:"n-form-item-label__asterisk"},[a("\xA0*")])," "]))]},formItemProps:{first:!0},render(){return e(lt,{placeholder:"Recommended image ratio: 3:2, Max size: 1MB",value:{id:"0",name:"poster",status:"finished",url:o.value.poster},"onUpdate:value":l=>(l==null?void 0:l.url)&&(o.value.poster=l.url)},null)}},{title:"Youtube",name:"youtube",maxlength:200,placeholder:"EX\uFF1Ahttps://www.youtube.com/watch?v=xxxxx",rules:[{validator:(l,c)=>!c||c&&c.startsWith("https://www.youtube.com/watch?v="),message:"Invalid youtube video",trigger:"blur"}]},{title:"Launchpad Detail",name:"detail",maxlength:200,placeholder:"EX\uFF1Ahttps://...",rules:[{validator:(l,c)=>!c||c&&c.startsWith("https://"),message:"Invalid URL",trigger:"blur"}]},{t:"custom",title:"Description",name:"description",formItemProps:{ref:l=>x.value=l,first:!0},rules:[{required:!0,message:"Description must be 64 characters or more",trigger:"blur"},{validator:(l,c)=>c&&c.replace(/<.>|<\/.>/g,"").length>64,message:"Description must be 64 characters or more",trigger:"blur"}],render(){return e(St,{limit:512,placeholder:"Much more details to description this Launchpad",class:"w-full",value:o.value.description,"onUpdate:value":l=>o.value.description=l},null)}}]),f=it(i.value),u=y();return{handleSubmit:()=>{var l;return(l=u.value)==null?void 0:l.validate(async c=>{if(!c){String(o.value.endTime)!==t.info.end_time&&(console.log("endTime change"),await b()),console.log("save api"),w.value=!0;const{error:E}=await ge["Crowdfunding@update-crowdfunding"]({description:o.value.description,detail:o.value.detail,id:o.value.id,poster:o.value.poster,title:o.value.title,youtube:o.value.youtube});E||m.emit("update"),w.value=!1}})},formFields:i,crowdfundingInfo:o,additionalInfoRules:f,formRef:u,loading:w}},render(){return e(Se,{show:this.show,maskClosable:!1},{default:()=>[e(ne,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>this.$emit("close"),title:"Edit"},{default:()=>[e("div",{class:"min-h-20 max-h-[60vh] text-color2 overflow-auto u-h6"},[e(st,{rules:this.additionalInfoRules,model:this.crowdfundingInfo,ref:t=>this.formRef=t},{default:()=>[e(ot,{fields:this.formFields,values:this.crowdfundingInfo},null)]})]),e("div",{class:"flex mt-4 justify-end"},[e(N,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>this.$emit("close"),loading:this.loading},{default:()=>[a("Cancel")]}),e(N,{type:"primary",class:"w-41",onClick:this.handleSubmit,loading:this.loading},{default:()=>[a("Yes")]})])]})]})}}),qe=t=>e("div",{class:["u-h5 flex justify-center items-center border rounded-r-sm bg-purple w-30",{"text-color1":t,"text-color3":!t}]},[e(At,{symbol:t,class:"h-4 mr-2 w-4"},null),e("span",null,[t||"Token"])]),qt=se({name:"InvestFair",props:{info:{type:Object,required:!0},buyCoinInfo:{type:Object,required:!0},sellCoinInfo:{type:Object,required:!0},startup:{type:Object,require:!0}},emits:["refreshCoin","refreshData"],setup(t,m){const s=Rt(),o=pe(),h=Ge(),b=ut(),w=y(!1),x=y(!1),i=y(""),f=y(""),u=y({raiseAmount:0,raiseGoal:0,raisePercent:0,swapAmount:0}),v=y();let l=Ee({chainId:o.chainId,addresses:{[o.chainId]:t.info.crowdfunding_contract}});const c=y(0),E=y(0),d=y("buy"),M=Re(),q=be(t.info.chain_id),U=(n,r)=>S.from(n).subUnsafe(S.from(r)).isNegative()?n:r,$=()=>t.info.buy_token_decimals||18,Z=g(()=>D(U(c.value||0,!t.buyCoinInfo.balance||t.buyCoinInfo.balance==="--"?0:t.buyCoinInfo.balance).toString(),$())||"0"),W=g(()=>D(U(E.value||0,t.sellCoinInfo.balance||0).toString(),t.sellCoinInfo.decimal)||"0"),C=y("from");X(()=>i.value,n=>{n.length>1&&n.startsWith("0")&&!n.startsWith("0.")&&(i.value=n.replace(/^0/,"")),n==="0"&&C.value==="from"&&G()}),X(()=>f.value,n=>{n.length>1&&n.startsWith("0")&&!n.startsWith("0.")&&(f.value=n.replace(/^0/,"")),n==="0"&&C.value==="to"&&Q()});const L=n=>{C.value="from",z(n)},A=n=>{C.value="to",K(n)},B=n=>typeof n>"u"?S.from(1):S.from(1).subUnsafe(S.from(n).divUnsafe(S.from(100))),z=n=>{Number(n)===0&&(f.value="0"),n&&(d.value==="buy"?f.value=D(S.from(n).mulUnsafe(S.from(t.info.buy_price)).toString(),t.sellCoinInfo.decimal):f.value=D(S.from(n).divUnsafe(S.from(t.info.buy_price)).mulUnsafe(B(t.info.sell_tax)).toString(),$()))},K=n=>{Number(n)===0&&(i.value="0"),n&&(console.log("changeToValue value===>",n),d.value==="buy"?i.value=D(S.from(n).divUnsafe(S.from(t.info.buy_price)).toString(),$()):i.value=D(S.from(n).mulUnsafe(S.from(t.info.buy_price)).divUnsafe(B(t.info.sell_tax)).toString(),t.sellCoinInfo.decimal))},Q=()=>{i.value=""},G=()=>{f.value=""},J=async(n,r)=>{},oe=g(()=>t.info.buy_token_contract==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"),ce=()=>{d.value==="buy"?d.value="sell":d.value="buy",Q(),G()},k=g(()=>{const n={days:"00",hours:"00",minutes:"00",seconds:"00"},r="u-h4 rounded-sm px-1 min-w-10 text-center py-2";if(t.info.status===P.CANCELED)return{status:P.CANCELED,label:"Cancelled",value:n,class:`${r} bg-[rgba(245,246,250,1)] text-black text-opacity-10`};const p=y(F.utc()),_=()=>(p.value=F.utc(),p.value.isAfter(F(Number(t.info.end_time)).utc())?null:setTimeout(_,1e3));if(p.value.isBefore(F(Number(t.info.start_time)).utc())){_();const re=F.duration(F(Number(t.info.start_time)).utc().diff(p.value)),[Ce,fe,ye]=re.format("HH-mm-ss").split("-"),Be=Math.floor(re.asDays());return{status:P.UPCOMING,label:"Launchpad Starts In",value:{days:Be,hours:Ce,minutes:fe,seconds:ye},class:`${r} bg-[rgba(83,49,244,0.06)] text-primary`}}if(p.value.isAfter(F(Number(t.info.end_time)).utc()))return{status:P.ENDED,label:"Launchpad Has Ended",value:n,class:`${r} bg-[rgba(242,159,57,0.06)] text-warning`};_();const I=F.duration(F(Number(t.info.end_time)).utc().diff(p.value)),V=Math.floor(I.asDays()),[te,R,xe]=I.format("HH-mm-ss").split("-");return{status:P.LIVE,label:"Launchpad Ends In",value:{days:V,hours:te,minutes:R,seconds:xe},class:`${r} bg-[rgba(83,49,244,0.06)] text-primary`}}),ee=g(()=>k.value.status===P.ENDED&&t.info.dex_router!=="0x0000000000000000000000000000000000000000"&&Number(t.info.raise_balance)>0),ae=async()=>{var $e;const{provider:n}=l.getContract(),r=await n.getBlockNumber(),_=(await n.getBlock(r)).timestamp*1e3,I=Number(t.info.end_time);_<=I&&rt.info("Please wait for the time of next block minted to retry if you fail to transfer liquidity.");const V=Ie(t.info.dex_router);if(!V||!t.info.chain_id)return;await ke(t.info.chain_id),console.log("transferLiquidity",V,t.info.dex_router);const{data:te,error:R}=await ge["Crowdfunding@get-crowdfunding-transfer-lp-sign"]({crowdfunding_id:t.info.id});if(R)return;const xe=await s.fee("get fee","waiting"),re=await l.parameters("get parameters","waiting"),Ce=re[8],fe=re[2],ye=H(String(u.value.swapAmount),fe),at=ye.sub(ye.mul(xe).div(1e4)).mul(Ce).div(Ye.from(10).pow(fe)),Ue=await l.transferToLiquidity(V.address,at,te.data,te.sign,`Transferring liquidity into ${($e=Ie(t.info.dex_router))==null?void 0:$e.dex}`,"Transaction Submitted");console.log("contractRes=",Ue),Ue&&m.emit("refreshData")},j=g(()=>k.value.status===P.ENDED?"Remove":"Cancel"),O=g(()=>{var n;return j.value==="Remove"?((n=v.value)==null?void 0:n[4])===P.ENDED:k.value.status!==P.UPCOMING}),le=g(()=>{let n="";return O.value&&j.value!=="Remove"&&(n="This Launchpad cannot be cancelled when it is in living."),n}),ue=async()=>{try{x.value=!1;const n="Waiting to submit all contents to blockchain for removing",r="Waiting to confirm.";await l.remove(n,r)||console.warn("fundingContract.remove error"),v.value=!1,m.emit("refreshData")}catch(n){console.log("error",n),b.endContract("failed",{success:!1})}},he=async()=>{w.value=!1;const n="Waiting to submit all contents to blockchain for canceling",r="Waiting to confirm.",p=await l.cancel(n,r);p&&p.hash&&m.emit("refreshData")},Ne=async()=>{try{t.info.chain_id?await ke(t.info.chain_id,()=>{l=Ee({chainId:o.chainId,addresses:{[o.chainId]:t.info.crowdfunding_contract}}),j.value==="Remove"?x.value=!0:w.value=!0}):console.warn("missing param: props.info.chain_id")}catch(n){console.log("error",n)}},Xe=async n=>{const r="The transaction of buying is processing.",p="Waiting to confirm.";try{const _=H(i.value.toString(),t.info.buy_token_decimals),I=await l.buy(_,n,r,p,{value:_});I&&I.hash&&await J(I.hash,1)}catch(_){console.log("error===>",_)}},Ze=async n=>{try{const r="The transaction of buying is processing.",p="Waiting to confirm.",_="The transaction of buying is processing.",I=H(i.value.toString(),t.info.buy_token_decimals);b.startContract(_),await(await(await M(t.info.buy_token_contract)).approve(t.info.crowdfunding_contract,I)).wait();const R=await l.buy(I,n,r,p);R&&R.hash&&await J(R.hash,1)}catch(r){console.error(r),b.endContract("failed",{success:!1})}},Ke=async()=>{try{const n=H(i.value,t.sellCoinInfo.decimal),r=H(D(S.from(i.value).divUnsafe(S.from(t.info.buy_price)).toString(),$())),p="The selling transaction is processing.",_="Waiting to confirm.",I="The transaction of selling is processing.";b.startContract(I),await(await M(t.info.sell_token_contract).approve(t.info.crowdfunding_contract,n)).wait();const R=await l.sell(r,n,p,_);R&&R.hash&&await J(R.hash,2)}catch(n){console.error("error",n),b.endContract("failed",{success:!1})}},Qe=async()=>{try{const n=H(i.value,t.sellCoinInfo.decimal),r=H(D(S.from(i.value).divUnsafe(S.from(t.info.buy_price)).toString(),$())),p="The selling transaction is processing.",_="Waiting to confirm.",I="The transaction of selling is processing.";b.startContract(I),await(await M(t.info.sell_token_contract).approve(t.info.crowdfunding_contract,n)).wait();const R=await l.sell(r,n,p,_);R&&R.hash&&await J(R.hash,2)}catch(n){console.error("error",n),b.endContract("failed",{success:!1})}},Me=async()=>{if(!(t.info.chain_id?await ke(t.info.chain_id):!1))return console.warn("chain id is not match!");if(d.value==="buy"){const r=H(f.value,t.info.sell_token_decimals);oe.value?await Xe(r):(console.log("bushi zhubi "),await Ze(r))}else oe.value?await Ke():await Qe();et()},Le=g(()=>k.value.status!==P.LIVE||Number(i.value)<=0||d.value==="buy"&&u.value.raisePercent>=100||d.value==="buy"&&Number(i.value)>Number(Z.value)||d.value==="sell"&&Number(i.value)>Number(W.value)||d.value==="buy"&&Number(i.value)<Number(t.info.min_buy_amount)),Pe=g(()=>{let n="";return k.value.status===P.UPCOMING?n="This launchpad is not opened yet.":k.value.status===P.ENDED?n="This launchpad has ended.":d.value==="buy"&&u.value.raisePercent>=100?n="The launchpad has reached goal.":Number(i.value)>0?d.value==="buy"&&Number(i.value)>Number(t.info.max_buy_amount)?n="Cannot buy more than maximum buy amounty.":d.value==="buy"&&Number(i.value)>Number(t.buyCoinInfo.balance||0)?n="Cannot buy more than your balance.":d.value==="sell"&&Number(i.value)>Number(W.value)&&(n="Cannot sell more than maximum sell amounty."):n=`Enter a ${d.value} amount.`,n}),Je=()=>{d.value==="buy"?i.value=Z.value:i.value=W.value,console.log("maxBuyAmount.value===>",Z.value,i.value),z(i.value)},we=async()=>{if(o.connected){const n=await l.maxBuyAmount("","");if(n){c.value=ve(n[0],t.buyCoinInfo.decimal),console.log("maxBuy.value==>",c.value);const r=await l.maxSellAmount("","");E.value=ve(r[1],t.sellCoinInfo.decimal),console.log("maxSell.value==>",E.value)}}},De=async n=>{if(t.info.chain_id==n){const r=await l.state("","");v.value=r,u.value.raiseGoal=Number(ie(r[0])),u.value.raiseAmount=Number(ie(r[1])),u.value.raisePercent=Number(D(u.value.raiseAmount/u.value.raiseGoal*100,4)),u.value.swapAmount=Number(ie(r[2]))}else u.value.raiseGoal=Number(D(Number(t.info.raise_goal),8)),u.value.raiseAmount=Number(D(Number(t.info.raise_balance),8)),u.value.raisePercent=Number(D(u.value.raiseAmount/u.value.raiseGoal*100,4)),u.value.swapAmount="--"};X(()=>o.chainId,n=>{De(n)},{immediate:!0}),X(()=>t.buyCoinInfo,()=>we(),{deep:!0});const Fe=He("raiseState");X(()=>u.value,()=>{Fe&&(Fe.value=u.value)},{immediate:!0,deep:!0}),Ae(()=>{we()});const et=()=>{i.value="0.0",f.value="0.0",we(),m.emit("refreshCoin")},tt=async n=>{var r;await o.ensureWalletConnected(),await((r=o.wallet)==null?void 0:r.switchNetwork(n))},de=(n,r="")=>{const p="u-h3",_=n==="--",I=_?n:Number(n).toLocaleString().includes(".")?Number(n).toLocaleString():Number(n).toLocaleString()+".00";return _?e("div",null,[I]):e(Y,null,{trigger:()=>n>1e6?e("div",{class:p},[(n/1e6).toFixed(1).replace(/\.0$/,""),a("M")]):n>1e3?e("div",{class:p},[(n/1e3).toFixed(1).replace(/\.0$/,""),a("K")]):e("div",{class:p},[n.toFixed(2).replace(/\.00$/,""),a(" ")]),default:()=>e("div",null,[I+" "+r])})},me=g(()=>o.chainId===t.info.chain_id),nt=()=>{var n;if(!me.value){const r=be(t.info.chain_id);return e(N,{tag:"div",type:"primary",size:"small",class:"w-full",onClick:()=>tt(t.info.chain_id)},{default:()=>[a("Switch to "),r==null?void 0:r.name]})}return o.address?e(Ve,null,[t.info.comer_id===((n=h.profile)==null?void 0:n.id)&&(le.value?e(Y,null,{trigger:()=>e(N,{tag:"div",type:"primary",class:"basis-1/3",size:"small",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},onClick:Ne,disabled:O.value},{default:()=>[j.value]}),default:()=>e("div",{class:"max-w-90"},[le.value])}):ee.value?O.value?e(Y,null,{trigger:()=>e(N,{type:"primary",class:"basis-1/3",size:"small",tag:"div",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},disabled:!0},{default:()=>[a("Transfer Liquidity")]}),default:()=>e("div",null,[a("Liquidity has been transferred. ")])}):e(N,{type:"primary",class:"basis-1/3",size:"small",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},onClick:ae},{default:()=>[a("Transfer Liquidity")]}):e(N,{type:"primary",class:"basis-1/3",size:"small",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},onClick:Ne,disabled:O.value},{default:()=>[j.value]})),Pe.value?e(Y,null,{trigger:()=>e(N,{type:"primary",class:"flex-1",size:"small",tag:"div",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},onClick:Me,disabled:Le.value},{default:()=>[d.value==="buy"?"Buy":"Sell"]}),default:()=>e("div",{class:"max-w-90"},[Pe.value])}):e(N,{type:"primary",class:"flex-1",size:"small",style:{"--n-color-disabled":"#E0E0E0","--n-opacity-disabled":1,"--n-border-disabled":"1px solid #E0E0E0"},onClick:Me,disabled:Le.value},{default:()=>[d.value==="buy"?"Buy":"Sell"]})]):e(N,{tag:"div",type:"primary",size:"small",class:"w-full",onClick:()=>o.ensureWalletConnected()},{default:()=>[a("Connect")]})};return m.expose({raiseState:u,getFundingState:De}),()=>e(ne,null,{default:()=>[e("div",{class:"flex mb-10 <lg:block"},[e("div",null,[e("div",{class:"flex mb-4 items-center"},[e("span",{class:"mr-4 text-color1 u-h3"},[d.value==="buy"?"Invest":"Sell"]),e("span",{class:"flex leading-snug items-center"},[e("img",{src:q==null?void 0:q.logo,class:"h-4 w-4"},null),e("span",{class:"ml-2 text-color2 u-h6"},[q==null?void 0:q.name])])]),e("div",{class:"text-primary u-h6"},[a("Rate\uFF1A1 "),t.buyCoinInfo.symbol||"Token",a(" = "),t.info.buy_price," ",t.sellCoinInfo.symbol||t.info.sell_token_symbol||"Token"])]),e("div",{class:"flex-1"},null),e("div",null,[e("div",{class:"text-right mb-4 text-color3 u-h5 <lg:my-4 <lg:text-left"},[k.value.label]),e("div",{class:"flex items-center"},[e("span",{class:`${k.value.class} ml-2 <lg:ml-0`},[k.value.value.days]),e("span",{class:`${k.value.class} ml-2`},[k.value.value.hours]),e("span",{class:`${k.value.class} ml-2`},[k.value.value.minutes]),e("span",{class:`${k.value.class} ml-2`},[k.value.value.seconds])])])]),e("div",{class:"flex mb-10 items-end <lg:block"},[e("div",{class:"flex-1 overflow-hidden"},[e("div",{class:"flex mb-2 justify-between"},[e("span",{class:"text-color3 u-h7"},[a("From")]),e("span",{class:"text-primary1 u-num1"},[a("Balance :"),(d.value==="buy"?t.buyCoinInfo.balance:t.sellCoinInfo.balance)||"--"])]),e(Oe,{value:i.value,"onUpdate:value":n=>i.value=n,style:{"n-input-disabled":"border: 0"},type:"withUnit",inputProps:{disabled:!me.value,placeholder:"0.0",precision:d.value==="buy"?$():t.sellCoinInfo.decimal,max:d.value==="buy"?Z.value:W.value},renderUnit:()=>qe((d.value==="buy"?t.buyCoinInfo.symbol:t.sellCoinInfo.symbol)||""),onInput:L},{suffix:()=>e("div",{class:"cursor-pointer text-primary u-label1",onClick:me.value?Je:void 0},[a("MAX")])})]),e("div",{class:"bg-purple-light rounded-full cursor-pointer flex h-8 mx-4 mb-[2px] w-8 justify-center items-center <lg:mx-auto <lg:my-5",style:{transform:"rotate(90deg)"},onClick:ce},[e(Ut,null,null)]),e("div",{class:"flex-1 overflow-hidden"},[e("div",{class:"flex mb-2 justify-between"},[e("span",{class:"text-color3 u-h7"},[a("To")]),e("span",{class:"text-primary1 u-num1"},[a("Balance :"),(d.value==="buy"?t.sellCoinInfo.balance:t.buyCoinInfo.balance)||"--"])]),e("div",null,[e(Oe,{value:f.value,"onUpdate:value":n=>f.value=n,inputProps:{disabled:!me.value,placeholder:"0.0",precision:d.value==="sell"?$():t.sellCoinInfo.decimal,max:d.value==="buy"?W.value:Z.value},type:"withUnit",renderUnit:()=>qe((d.value==="buy"?t.sellCoinInfo.symbol:t.buyCoinInfo.symbol)||""),onInput:A},{suffix:()=>null})])])]),e("div",{class:"mb-4 text-color2 u-h5"},[a("Launchpad Detail")]),e("div",{class:"flex <lg:block"},[e("div",{class:"flex-1 grid gap-4 grid-cols-2 overflow-hidden u-h7"},[e("div",{class:"rounded-sm flex flex-col bg-[rgba(83,49,244,0.06)] h-19 pl-4 justify-center"},[e("div",{class:"flex text-primary  items-end"},[e("span",{class:"mr-1"},[de(u.value.raiseAmount,t.buyCoinInfo.symbol)]),t.buyCoinInfo.symbol]),e("div",{class:"mt-1 text-color3 u-h7"},[a("Raised")])]),e("div",{class:"rounded-sm flex flex-col bg-[rgba(83,49,244,0.06)] h-19 pl-4 justify-center"},[e("div",{class:"flex text-primary items-end"},[e("span",{class:"mr-1"},[de(u.value.raisePercent,"%")]),a("%")]),e("div",{class:"mt-1 text-color3 u-h7"},[a("Progress")])]),e("div",{class:"rounded-sm flex flex-col bg-[rgba(28,96,243,0.06)] bg-opacity-6 h-19 pl-4 justify-center"},[e("div",{class:"flex text-primary items-end"},[e("span",{class:"mr-1"},[de(u.value.raiseGoal,t.buyCoinInfo.symbol)]),t.buyCoinInfo.symbol]),e("div",{class:"mt-1 text-color3 u-h7"},[a("Raise Goal")])]),e("div",{class:"rounded-sm flex flex-col bg-[rgba(28,96,243,0.06)] bg-opacity-6 h-19 pl-4 justify-center"},[e("div",{class:"flex text-primary items-end"},[e("span",{class:"mr-1"},[de(u.value.swapAmount,t.buyCoinInfo.symbol)]),t.buyCoinInfo.symbol]),e("div",{class:"mt-1 text-color3 u-h7"},[a("Available Swap")])])]),e("div",{class:"px-6 w-[300px] overflow-hidden <lg:w-auto <lg:px-0"},[e("div",{class:"flex mb-4 u-h6 <lg:my-5"},[e("span",{class:"flex flex-1 text-color1 overflow-hidden items-center"},[a("Swap %\uFF1A"),e(Y,null,{trigger:()=>e(Te,{class:"h-4 text-color3 w-4"},null),default:()=>e("div",{class:"max-w-90"},[a("Part of the funds raised will go into the swap pool as a fixed-price exchangeable currency, and part will go directly to the team wallet")])})]),e("span",{class:"text-color2"},[t.info.swap_percent,a(" %")])]),e("div",{class:"flex mb-4 u-h6"},[e("span",{class:"flex flex-1 text-color1 overflow-hidden items-center"},[a("Minimum buy\uFF1A")]),e("span",{class:"text-color2"},[t.info.min_buy_amount,a(" "),t.buyCoinInfo.symbol])]),e("div",{class:"flex mb-4 u-h6"},[e("span",{class:"flex flex-1 text-color1 overflow-hidden items-center"},[a("Maximum buy\uFF1A")]),e("span",{class:"text-color2"},[t.info.max_buy_amount,a(" "),t.buyCoinInfo.symbol])]),e("div",{class:"flex mb-4 u-h6"},[e("span",{class:"flex flex-1 text-color1 overflow-hidden items-center"},[a("Sell tax %\uFF1A"),e(Y,null,{trigger:()=>e(Te,{class:"h-4 text-color3 w-4"},null),default:()=>e("div",{class:"max-w-90"},[a("When selling tokens, a "),t.info.sell_tax,a(" % fee needs to be deducted as sell tax")])})]),e("span",{class:"text-color2"},[t.info.sell_tax,a(" %")])]),e("div",{class:"flex u-h6"},[e("span",{class:"flex flex-1 text-color1 overflow-hidden items-center"},[a("Maximum sell % \uFF1A"),e(Y,null,{trigger:()=>e(Te,{class:"h-4 text-color3 w-4"},null),default:()=>e("div",{class:"max-w-90"},[a("The maximum sellable percentage of tokens you own")])})]),e("span",{class:"text-color2"},[t.info.max_sell_percent,a(" %")])])])]),e("div",{class:"flex mt-10  gap-4 items-center"},[nt()]),e(Se,{show:w.value,"onUpdate:show":n=>w.value=n,maskClosable:!1},{default:()=>[e(ne,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>w.value=!1,title:"Cancel the launchpad?"},{default:()=>[e("div",{class:"min-h-20 text-color2 u-h6"},[a("The dCrowdfungding will be closed at once you click 'Yes'.")]),e("div",{class:"flex mt-4 justify-end"},[e(N,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>w.value=!1},{default:()=>[a("Cancel")]}),e(N,{type:"primary",class:"w-41",onClick:he},{default:()=>[a("Yes")]})])]})]}),e(Se,{show:x.value,"onUpdate:show":n=>x.value=n,maskClosable:!1},{default:()=>[e(ne,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>x.value=!1,title:"Remove the launchpad?"},{default:()=>[e("div",{class:"min-h-20 text-color2 u-h6"},[a("All fundings will be sent to team wallet at once you click 'Yes'.")]),e("div",{class:"flex mt-4 justify-end"},[e(N,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>x.value=!1},{default:()=>[a("Cancel")]}),e(N,{type:"primary",class:"w-41",onClick:ue},{default:()=>[a("Yes")]})])]})]})]})}});function Wt(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!kt(t)}const We=se({name:"InvestmentRecords",props:{buyTokenName:{type:String},sellTokenName:{type:String}},setup(t,m){const s=gt(),o=He("paramCrowdfundingId");if(!o)return null;const h=Tt({pageSize:20,total:300,page:1,loading:!1}),b=y(),w=f=>{let u="+",v="--",l="";return f.access===2?(u="-",v=f.buy_token_symbol,l=f.buy_token_amount):(u="+",v=f.buy_token_symbol,l=f.buy_token_amount),e("span",{title:l},[`${u} ${l.split(".")[1]&&l.split(".")[1].length>4?l.split(".")[0]+"."+l.split(".")[1].substring(0,4)+"...":l} ${v}`])},x=async(f=1)=>{try{const{error:u,data:v}=await ge["Crowdfunding@get-crowdfunding-invest-records"]({crowdfunding_id:o,page:f,size:h.pageSize});u||(b.value=v.list||[])}catch(u){console.error("error",u)}},i=f=>{f&&s.push({path:"/builder",query:{id:f}})};return Ae(()=>{x(h.page)}),m.expose({getInvestRecord:x}),{pagination:h,investRecords:b,getInvestRecord:x,getAmount:w,toComerDetail:i}},render(){let t;return e(ne,{title:"Investment Record"},{default:()=>{var m,s;return[!!((m=this.investRecords)!=null&&m.length)&&e(ct,{triggered:this.pagination.loading,page:this.pagination.page,pageSize:this.pagination.pageSize,total:this.pagination.total,onLoadMore:()=>this.getInvestRecord(this.pagination.page)},Wt(t=((s=this.investRecords)!=null?s:[]).map(o=>{var h,b,w,x;return e("div",{class:"flex mb-4"},[e("div",{onClick:()=>this.toComerDetail(o.comer_id),class:"rounded-full cursor-pointer h-9 w-9"},[e(dt,{src:(b=(h=o.comer)==null?void 0:h.avatar)!=null?b:"",class:"h-full w-full"},null)]),e("div",{class:"flex-1 mx-2 overflow-hidden"},[e("div",{class:"flex mb-1 items-center"},[e("div",{class:"flex-1 text-color1 truncate u-h5"},[(w=o.comer)!=null&&w.address?Nt((x=o.comer)==null?void 0:x.address):""]),e(mt,{class:"ml-2 text-color3 whitespace-nowrap"},{default:()=>[o.access===1?"Invest":"Sell"]})]),e("div",{class:"mb-2 text-color3 u-h7"},[F.utc(+o.timestamp).format()])]),e("div",{class:"text-primary whitespace-nowrap"},[this.getAmount(o)])])}))?t:{default:()=>[t]})]}})}});const zt=se({name:"TokenInformation",props:{sellCoinInfo:{type:Object,required:!0},info:{type:Object,required:!0}},setup(t,m){return{blockchainExplorerUrl:g(()=>{var o;return(o=ze.find(h=>h.chainId===t.info.chain_id))==null?void 0:o.explorerUrl})}},render(){const t=m=>Number(m).toLocaleString().replace(".00","");return e(ne,{title:"Token Information"},{default:()=>[e("div",{class:"token-info-item"},[e("span",{class:"token-info-item-label"},[a("Totally Supply\uFF1A")]),e("span",{class:"text-color2  truncate"},[this.sellCoinInfo.supply?t(this.sellCoinInfo.supply):"--",this.sellCoinInfo.symbol])]),e("div",{class:"token-info-item"},[e("span",{class:"token-info-item-label"},[a("Token Name\uFF1A")]),e("span",{class:"text-color2  truncate"},[this.sellCoinInfo.name||"--"])]),e("div",{class:"token-info-item"},[e("span",{class:"token-info-item-label"},[a("Token Symbol\uFF1A")]),e("span",{class:"text-color2  truncate"},[this.sellCoinInfo.symbol||"--"])]),e("div",{class:"mb-0 token-info-item"},[e("div",{class:"token-info-item-label"},[a("Token Contract\uFF1A")]),e(ft,{class:"token-info-item-address",address:this.info.sell_token_contract||"--",autoSlice:!0,blockchainExplorerUrl:`${this.blockchainExplorerUrl}/address/`},null)])]})}}),_n=se({name:"CrowdfundingDetail",setup(t){const m=ht(),s=yt(),o=pe(),h=bt(),b=Ge(),w=y(),x=y(),i=y(),f=y(),u=y({name:"",address:""}),v=y({name:"",address:""}),l=y(!1),c=async C=>{var B,z,K;l.value=!0;const{error:L,data:A}=await ge["Crowdfunding@get-crowdfunding-info"]({crowdfunding_id:C});l.value=!1,L||(i.value=A,f.value={...A.startup,title:(B=A==null?void 0:A.startup)==null?void 0:B.name,tag:(K=(z=A==null?void 0:A.startup)==null?void 0:z.tags)==null?void 0:K.map(Q=>{var G;return(G=Q.tag)==null?void 0:G.name})})},E=g(()=>i.value.buy_token_contract==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"),d=g(()=>{var C;return o.chainId===((C=i.value)==null?void 0:C.chain_id)}),M=async()=>{var C,L,A,B,z,K,Q,G,J,oe,ce;if(i.value&&o.connected){const k=Re(),ee=await k(i.value.sell_token_contract);if(d.value){const[j,O,le,ue,he]=await Promise.all([ee.name(),ee.decimals(),ee.totalSupply(),ee.symbol(),ee.balanceOf(o.address)]);v.value.name=j,v.value.decimal=O,v.value.supply=ie(le.toString()).toString(),v.value.symbol=ue||((C=i.value)==null?void 0:C.sell_token_symbol),v.value.balance=ve(he,O)}else v.value.name=((L=i.value)==null?void 0:L.sell_token_name)||"--",v.value.decimal=(A=i.value)==null?void 0:A.sell_token_decimals,v.value.supply=(((B=i.value)==null?void 0:B.sell_token_supply)||0).toString(),v.value.symbol=((z=i.value)==null?void 0:z.sell_token_symbol)||"--",v.value.balance=(((K=i.value)==null?void 0:K.sell_token_balance)||0).toString();const ae=await k(i.value.buy_token_contract);if(d.value)if(E.value)u.value.symbol=(Q=be(i.value.chain_id))==null?void 0:Q.currencySymbol,u.value.balance=await o.getBalance(o.address)||"--";else{const[j,O,le,ue]=await Promise.all([await ae.name(),await ae.decimals(),await ae.symbol(),await ae.balanceOf(o.address)]);u.value.name=j,u.value.decimal=O,u.value.symbol=le,u.value.balance=ve(ue,O)}else u.value.name=((G=i.value)==null?void 0:G.buy_token_symbol)||"--",u.value.decimal=((J=i.value)==null?void 0:J.buy_token_decimals)||0,u.value.symbol=((oe=i.value)==null?void 0:oe.buy_token_symbol)||"--",u.value.balance=(((ce=i.value)==null?void 0:ce.buy_price)||0).toString()}};X(()=>d.value,()=>M());const q=async()=>{var C;M(),(C=w.value)==null||C.getInvestRecord(),W.value=!1},U=Number(m.params.id);_e("paramCrowdfundingId",U),Ae(()=>{c(U).then(M)}),It(()=>{h.unsubscribe("crowdfunding",2)}),h.init().then(C=>{h.subscribe("crowdfunding",2,L=>{var A;L.topic==="subscribe"&&L.data.target_id===U&&(console.warn("socket get detail change, do update...",U),c(U).then(()=>{var B;(B=x.value)==null||B.getFundingState(o.chainId)}),(A=w.value)==null||A.getInvestRecord())},U)});const $=y();_e("startupInfo",g(()=>f.value)),_e("raiseState",$);const Z=g(()=>{var C,L;return((C=b.profile)==null?void 0:C.id)===((L=i.value)==null?void 0:L.comer_id)}),W=y(!1);return{pageLoading:l,crowdfundingInfo:i,buyCoinInfo:u,sellCoinInfo:v,initPage:q,getCrowdfundingInfo:c,onRefreshData:()=>c(U).then(M),startupInfo:f,investRecordsRef:w,investRef:x,raiseState:$,isInCrowdChain:d,isFounder:Z,SettingVisible:W,globalConfigStore:s}},render(){return e(vt,{show:this.pageLoading},{default:()=>{var t,m,s,o,h;return[e("div",{class:"flex gap-6 relative <lg:pt-10 <lg:block"},[this.startupInfo&&this.startupInfo.name&&e(Mt,{class:"top-0 left-[100%] absolute <lg:left-auto <lg:right-0",generate:{banner:this.startupInfo.banner,logo:this.startupInfo.logo,name:this.startupInfo.name+"-Launchpad",infos:[{count:(t=this.raiseState)==null?void 0:t.raiseGoal,unit:this.buyCoinInfo.symbol,label:"Raise Goal"},{count:`${(m=this.raiseState)==null?void 0:m.raisePercent} %`,label:"Progress"}]},route:window.location.href,title:((s=this.startupInfo)==null?void 0:s.name)+"--Launchpad | GoRollux",description:"Check out the launchpad on GoRollux, The lead building launchpad on Rollux and Syscoin",text:`${(o=this.startupInfo)==null?void 0:o.name} just launched a #presale #launchpad for ${(h=this.raiseState)==null?void 0:h.raiseGoal} ${this.buyCoinInfo.symbol}, check it out on #GoRollux Network: `,tipPlacement:"right"},{default:()=>[this.isFounder&&this.globalConfigStore.isLargeScreen&&e(Y,{placement:"left"},{trigger:()=>e("div",{class:`${Lt}`,onClick:()=>this.SettingVisible=!0},[e(pt,null,null)]),default:()=>"Setting"})]}),e("div",{class:"w-86 overflow-hidden <lg:w-auto"},[this.startupInfo&&e(Pt,{startup:this.startupInfo,class:"mb-6"},null),this.crowdfundingInfo&&e(zt,{class:"mb-6",sellCoinInfo:this.sellCoinInfo,info:this.crowdfundingInfo},null),this.globalConfigStore.isLargeScreen?e(We,{class:"mb-6",ref:b=>this.investRecordsRef=b,buyTokenName:this.buyCoinInfo.symbol,sellTokenName:this.sellCoinInfo.symbol},null):null]),e("div",{class:"flex-1 relative overflow-hidden"},[this.crowdfundingInfo&&e(qt,{ref:b=>this.investRef=b,class:"mb-6",startup:this.startupInfo,buyCoinInfo:this.buyCoinInfo,sellCoinInfo:this.sellCoinInfo,info:this.crowdfundingInfo,onRefreshCoin:this.initPage,onRefreshData:this.onRefreshData},null),this.crowdfundingInfo&&e(Ot,{info:this.crowdfundingInfo,class:"<lg:mb-6"},null),this.globalConfigStore.isLargeScreen?null:e(We,{class:"mb-6",ref:b=>this.investRecordsRef=b,buyTokenName:this.buyCoinInfo.symbol,sellTokenName:this.sellCoinInfo.symbol},null)])]),this.isFounder&&this.crowdfundingInfo&&e(jt,{show:this.SettingVisible,info:this.crowdfundingInfo,onClose:()=>this.SettingVisible=!1,onUpdate:()=>{this.onRefreshData(),this.SettingVisible=!1}},null)]}})}});export{_n as default};

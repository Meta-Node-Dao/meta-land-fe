import{q,z as V,S as W,t as ne,b as X,B as re,e as z,D as ae,f as B,k as ie,g as le,u as Q,a as E,c as oe,m as se,v as ue,_ as D,V as de,h as _,d as ce}from"./index.ac02f68f.js";import{e as ee}from"./vue.5bd64dc7.js";import fe from"./index.346628ab.js";import me from"./NoFollowedStartupTip.1081e046.js";import ge from"./NoStartupTip.c1e01cd8.js";import{i as we,a as he,b as ve}from"./project.ffe82219.js";import{g as pe,U as be,C as ye,a as xe}from"./Create.fef5fe14.js";import{l as N,r as f,w as M,H as F,bm as e,M as R,j as r,t as te,cv as $,cs as C,$ as Ie,av as ke,F as Te}from"./bundle.f4813fa2.js";import{R as Se}from"./index.160e8328.js";import{r as Ce}from"./Question.9547e1ed.js";import{u as H}from"./erc20.e9c36ea3.js";import{r as Re}from"./bountyFactory.4905ecc7.js";import{u as Z,C as Pe}from"./crowdfundingFactory.8efbbbe8.js";import{r as J,C as Le}from"./Create.f5d1abad.js";import{p as P}from"./ethers.043ad920.js";import{C as Ae}from"./Create.5f2d6bc0.js";import"./ui.e26017cf.js";import"./tools.becc2b88.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";import"./Period.d7f0205f.js";import"./Stage.c11ca763.js";import"./bounty.b5687463.js";import"./MinusCircle.5e3a505f.js";import"./Confirm.fc9e96f5.js";import"./startup.3b3d8368.js";import"./startup.427454b6.js";import"./share.51f4a725.js";import"./useTags.f9c969ef.js";import"./valid.935dd966.js";import"./ArrowDown.fce4ad7c.js";import"./ipfs.b0370acf.js";const Be="/assets/proposal.7922741e.png",De=N({name:"AdditionalInformation",props:{crowdfundingInfo:{type:Object,required:!0}},setup(t,k){const T=f();M(()=>t.crowdfundingInfo.poster,()=>{var l;console.log("props.crowdfundingInfo.poster",(l=t.crowdfundingInfo.poster)==null?void 0:l.url)}),M(()=>t.crowdfundingInfo.description,()=>{var l;(l=T.value)==null||l.validate()});const h=f(null),I=F(()=>[{t:"custom",title:"Poster",name:"poster",rules:[{validator:(l,o)=>!!o,message:"Poster cannot be blank",trigger:"change"},{validator:(l,o)=>(o==null?void 0:o.status)==="finished",message:"",trigger:"change"}],slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Poster"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])," "]))]},formItemProps:{first:!0},render(){return e(ne,{placeholder:"Recommended image ratio: 3:2, Max size: 1MB",value:t.crowdfundingInfo.poster,"onUpdate:value":l=>t.crowdfundingInfo.poster=l},null)}},{title:"Youtube",name:"youtube",maxlength:200,placeholder:"EX\uFF1Ahttps://www.youtube.com/watch?v=xxxxx",rules:[{validator:(l,o)=>!o||o&&o.startsWith("https://www.youtube.com/watch?v="),message:"Invalid youtube video",trigger:"blur"}]},{title:"Launchpad Detail",name:"detail",maxlength:200,placeholder:"EX\uFF1Ahttps://...",rules:[{validator:(l,o)=>!o||o&&o.startsWith("https://"),message:"Invalid URL",trigger:"blur"}]},{t:"custom",title:"Description",name:"description",formItemProps:{ref:l=>T.value=l,first:!0},rules:[{required:!0,message:"Description must be 64 characters or more",trigger:"blur"},{validator:(l,o)=>o&&o.replace(/<.>|<\/.>/g,"").length>64,message:"Description must be 64 characters or more",trigger:"blur"}],render(){return e(Se,{limit:512,placeholder:"Much more details to description this Launchpad",class:"w-full",value:t.crowdfundingInfo.description,"onUpdate:value":l=>t.crowdfundingInfo.description=l},null)}}]),d=q(I.value);return console.log("additionalInfoRules===>",d),k.expose({additionalInfoForm:h}),{formFields:I,additionalInfoForm:h,additionalInfoRules:d}},render(){return e(W,{ref:t=>this.additionalInfoForm=t,rules:this.additionalInfoRules,model:this.crowdfundingInfo},{default:()=>[e(V,{fields:this.formFields,values:this.crowdfundingInfo},null)]})}}),G="0x0000000000000000000000000000000000000000",Ne=N({name:"Information",props:{crowdfundingInfo:{type:Object,required:!0}},setup(t,k){const T=H(),h=X(),I=f(null),d=pe(G)[h.chainId];console.log(d,8989);const l=F(()=>d.filter(u=>u.value===G)),o=async u=>{const v=await T(u);try{const[p]=await Promise.all([v.decimals()]);t.crowdfundingInfo.buyTokenDecimals=p}catch(p){console.warn("getBuyTokenDecimals error:",p),t.crowdfundingInfo.buyTokenDecimals="18"}};te(()=>{t.crowdfundingInfo.buyTokenContract=l.value[0].value,t.crowdfundingInfo.buyTokenName=l.value[0].label,t.crowdfundingInfo.buyTokenSymbol=l.value[0].label,o(t.crowdfundingInfo.buyTokenContract)});const g=F(()=>{if(t.crowdfundingInfo.listing==="Manual Listing")if(t.crowdfundingInfo.raiseGoal&&t.crowdfundingInfo.buyPrice){const u=new $(t.crowdfundingInfo.raiseGoal).times(new $(t.crowdfundingInfo.buyPrice)).toString();return t.crowdfundingInfo.sellTokenDeposit=Number(u),u}else return t.crowdfundingInfo.sellTokenDeposit=0,0;else{const{raiseGoal:u,buyPrice:v,swapPercent:p,listingRate:i}=t.crowdfundingInfo;return!u||!v||!p||!i?"?":u*v+u*p*i/100}});M(()=>g.value,()=>{t.crowdfundingInfo.totalSellToken=Number(g.value)});const x=F(()=>e(re,{class:"text-center w-30",options:l.value,value:t.crowdfundingInfo.buyTokenContract,"onUpdate:value":u=>t.crowdfundingInfo.buyTokenContract=u,onUpdateValue:(u,v)=>{t.crowdfundingInfo.buyTokenName=v.label,t.crowdfundingInfo.buyTokenSymbol=v.label,o(u)}},null)),w=F(()=>{const u=[{t:"custom",title:"Raise Goal",name:"raiseGoal",formItemProps:{first:!0},class:"!grid-rows-[28px,40px,1fr] items-start col-start-1 col-end-3",slots:{label:()=>[R(e("div",null,[r("Raise Goal"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])]))]},rules:[{validator:()=>!!t.crowdfundingInfo.raiseGoal,message:"Raise Goal cannot be blank",trigger:["blur"]},{validator:()=>!!t.crowdfundingInfo.raiseGoal&&t.crowdfundingInfo.raiseGoal>0,message:"Raise goal must be positive  number",trigger:["blur"]}],render(i){return e("div",{class:"flex flex-1 items-center"},[e(ae,{inputProps:{placeholder:"EX\uFF1A10",maxlength:20,precision:18},value:t.crowdfundingInfo.raiseGoal,"onUpdate:value":n=>t.crowdfundingInfo.raiseGoal=n,class:"flex-1",type:"withSelect",renderSelect:()=>x.value},null)])}},{t:"custom",title:"IBO Rate",name:"buyPrice",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Rate"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")]),e("span",{class:"ml-1 u-h5"},[r("1 "),t.crowdfundingInfo.buyTokenSymbol,r(" =")," ",t.crowdfundingInfo.buyPrice||"?"," ",t.crowdfundingInfo.sellTokenSymbol])]))]},rules:[{validator:(i,n)=>!!n,message:"Rate cannot be blank",trigger:["blur"]},{validator:(i,n)=>n>0,message:" Rate must be positive number",trigger:"blur"}],render(i){return e("div",{class:"w-full"},[e(B,{placeholder:"EX:10",maxlength:"20",precision:Number(t.crowdfundingInfo.sellTokenDecimals),value:t.crowdfundingInfo.buyPrice,"onUpdate:value":n=>t.crowdfundingInfo.buyPrice=n,class:"flex-1"},null),e("div",{class:"my-1 text-xs text-color3"},[r("The price is at when investors buy token during Launchpad.")])])}},{t:"custom",title:"Swap",name:"swapPercent",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Swap (%)"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")]),e(ie,{placement:"right"},{trigger:()=>e(Ce,{class:"h-4 text-grey3 w-4"},null),default:()=>e("div",{class:"w-60"},[r("Part of the funds raised will go into the swap pool as a fixed-price exchangeable currency. and part will go directly to the team wallet.")])})]))]},rules:[{validator:(i,n)=>!!n,message:"Swap cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Swap must be positive number.",trigger:"blur"}],render(i){return e("div",{class:"flex-1"},[e(B,{placeholder:"EX\uFF1A70",max:"100",precision:2,value:t.crowdfundingInfo.swapPercent,"onUpdate:value":n=>t.crowdfundingInfo.swapPercent=n,class:"flex-1"},null),e("div",{class:"my-1 text-sx text-color3"},[t.crowdfundingInfo.swapPercent||"?",r(" % of the raised funds will go into the swap pool.")])])}},{t:"custom",title:"Minimum Buy",name:"minBuyAmount",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[R(e("div",null,[r("Minimum Buy ("),t.crowdfundingInfo.buyTokenSymbol,r(")"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])]))]},rules:[{validator:(i,n)=>!!n,message:"Minimum Buy cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Minimum Buy must be positive number.",trigger:["blur"]}],render(i){return e(B,{placeholder:"EX: 10",precision:18,maxlength:"20",value:t.crowdfundingInfo.minBuyAmount,"onUpdate:value":n=>t.crowdfundingInfo.minBuyAmount=n,class:"flex flex-1 items-center"},null)}},{t:"custom",title:"Maximum Buy",name:"maxBuyAmount",class:"!grid-rows-[28px,40px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[R(e("div",null,[r("Maximum Buy ("),t.crowdfundingInfo.buyTokenSymbol,r(")"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])]))]},rules:[{validator:(i,n)=>!!n,message:"Maximum Buy cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Maximum Buy must be positive number.",trigger:"blur"},{validator:(i,n)=>n>t.crowdfundingInfo.minBuyAmount,message:"Max buy must be greater than min buy.",trigger:["blur"]}],render(i){return e(B,{placeholder:"EX: 10",precision:18,maxlength:"20",value:t.crowdfundingInfo.maxBuyAmount,"onUpdate:value":n=>t.crowdfundingInfo.maxBuyAmount=n,class:"flex-1"},null)}},{t:"custom",title:"Maximum Sell (%)",name:"maxSell",class:"!grid-rows-[28px,60px,1fr] items-start",slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Maximum Sell (%)"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])," "]))]},rules:[{validator:(i,n)=>!!n,message:"Maximum Sell cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Maximum Sell must be positive number.",trigger:"blur"}],formItemProps:{first:!0},render(i){return e("div",{class:"w-full"},[e(B,{max:"100",precision:2,value:t.crowdfundingInfo.maxSell,"onUpdate:value":n=>t.crowdfundingInfo.maxSell=n,class:"flex-1"},null),e("div",{class:"my-1 text-xs text-color3"},[r("Maximum sellable is the percentage of token each investor can sell.")])])}},{t:"custom",title:"Sell Tax",class:"!grid-rows-[28px,60px,1fr] items-start",slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Sell Tax (%)"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")])," "]))]},name:"sellTax",formItemProps:{first:!0},rules:[{validator:(i,n)=>!!n,message:"Sell Tax cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Sell Tax must be positive number.",trigger:"blur"}],render(i){return e("div",{class:"w-full"},[e(B,{max:"100",precision:2,placeholder:"EX:10",value:t.crowdfundingInfo.sellTax,"onUpdate:value":n=>t.crowdfundingInfo.sellTax=n,class:"flex-1"},null),e("div",{class:"my-1 text-xs text-color3"},[r("Fees to be deducted when investors sell tokens in the swap pool.")])])}},{t:"date",title:"Start Date (UTC)",name:"startTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",format:"yyyy-MM-dd HH:mm",rules:[{required:!0,message:"Start Date cannot be blank."},{validator:(i,n)=>!n||!t.crowdfundingInfo.endTime?!0:C(n).isBefore(C(t.crowdfundingInfo.endTime)),message:"Start time needs to be before End time.",trigger:["blur"]}],isDateDisabled:i=>C(i)<C().startOf("day"),placeholder:"Select a date"},{t:"date",title:"End Date (UTC)",name:"endTime",type:"datetime",class:"w-full !grid-rows-[28px,40px,1fr] items-start",actions:["clear","confirm"],format:"yyyy-MM-dd HH:mm",rules:[{required:!0,message:"End Date cannot be blank."},{validator:(i,n)=>!n||!t.crowdfundingInfo.startTime?!0:C(n).isAfter(C(t.crowdfundingInfo.startTime)),message:"End time needs to be after Start time.",trigger:["blur"]}],isDateDisabled:i=>C(i)<C().startOf("day"),placeholder:"Select a date."}],v={t:"select",title:"Router",name:"Router",placeholder:"Select Router",class:"!grid-rows-[26px,40px,1fr] items-start",rules:[{required:!0,message:" Please select a Router",type:"string",trigger:["blur"]}],options:z.find(i=>i.chainId===t.crowdfundingInfo.chainId).routers.map(i=>({label:i.dex,value:i.address}))},p={t:"custom",title:"Listing Rate",name:"listingRate",class:"!grid-rows-[28px,60px,1fr] items-start",formItemProps:{first:!0},slots:{label:()=>[R(e("div",{class:"flex items-end"},[r("Listing Rate"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")]),e("span",{class:"ml-1 u-h5"},[r("1 "),t.crowdfundingInfo.buyTokenSymbol,r(" =")," ",t.crowdfundingInfo.listingRate||"?"," ",t.crowdfundingInfo.sellTokenSymbol])]))]},rules:[{validator:(i,n)=>(console.log(n),!!n),message:"Listing Rate cannot be blank.",trigger:["blur"]},{validator:(i,n)=>n>0,message:"Listing Rate must be positive number.",trigger:"blur"}],render(i){return e("div",{class:"w-full"},[e(B,{placeholder:"EX:10",maxlength:"20",precision:Number(t.crowdfundingInfo.sellTokenDecimals),value:t.crowdfundingInfo.listingRate,"onUpdate:value":n=>t.crowdfundingInfo.listingRate=n,class:"flex-1"},null),e("div",{class:"my-1 text-xs text-color3"},[r("Initial token price on decentralized exchanges at launch.")])])}};return t.crowdfundingInfo.listing!=="Manual Listing"&&u.push(v,p),u}),a=q(w.value);return k.expose({crowdfundingInfoForm:I}),{formFields:w,crowdfundingInfoForm:I,crowdfundingInfoRules:a,totalSellToken:g}},render(){return e("div",null,[e(W,{ref:t=>this.crowdfundingInfoForm=t,rules:this.crowdfundingInfoRules,model:this.crowdfundingInfo,class:"grid gap-x-10 grid-cols-2"},{default:()=>[e(V,{fields:this.formFields,values:this.crowdfundingInfo},null)]}),e("div",{class:"bg-purple rounded-sm mt-4 py-5.5 px-6"},[r("Need "),e("span",{class:"text-primary"},[this.totalSellToken]),this.crowdfundingInfo.sellTokenSymbol,r(" to create Launchpad.")])])}});const _e=N({name:"ReviewInfo",props:{crowdfundingInfo:{type:Object,required:!0}},render(){var t;return e("div",{class:"review-info"},[e("div",{class:"review-info-item u-h6"},[e("div",{class:"w-[220px] title"},[r("Project:")]),e("div",null,[this.crowdfundingInfo.startupName])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Token Contract :")]),e("div",{class:"text-primary"},[this.crowdfundingInfo.sellTokenContract])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Team Wallet Address :")]),e("div",{class:"text-primary"},[this.crowdfundingInfo.teamWallet])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Raise Goal :")]),e("div",null,[this.crowdfundingInfo.raiseGoal,r(" "),this.crowdfundingInfo.buyTokenSymbol])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Tokens For Launchpad :")]),e("div",null,[this.crowdfundingInfo.buyPrice*this.crowdfundingInfo.raiseGoal," ",this.crowdfundingInfo.sellTokenSymbol])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Swap :")]),e("div",null,[this.crowdfundingInfo.swapPercent,r("%")])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Rate :")]),e("div",null,[r("1 "),this.crowdfundingInfo.buyTokenSymbol,r(" = "),this.crowdfundingInfo.buyPrice," ",this.crowdfundingInfo.sellTokenSymbol])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Maximum Buy :")]),e("div",null,[this.crowdfundingInfo.maxBuyAmount,r(" "),this.crowdfundingInfo.buyTokenSymbol])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Minimum Buy :")]),e("div",null,[this.crowdfundingInfo.minBuyAmount,r(" "),this.crowdfundingInfo.buyTokenSymbol])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Sell Tax :")]),e("div",null,[this.crowdfundingInfo.sellTax,r(" %")])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Maximum Sell :")]),e("div",null,[this.crowdfundingInfo.maxSell,r(" % of the bought token amount")])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Launchpad Start Time :")]),e("div",null,[C.utc(this.crowdfundingInfo.startTime).format()])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Launchpad End Time :")]),e("div",null,[C.utc(this.crowdfundingInfo.endTime).format()])]),e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Listing Option :")]),e("div",null,[this.crowdfundingInfo.listing])]),this.crowdfundingInfo.listing==="Auto Listing"&&e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Router :")]),e("div",null,[(t=le(this.crowdfundingInfo.Router))==null?void 0:t.dex])]),this.crowdfundingInfo.listing==="Auto Listing"&&e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Listing Rate :")]),e("div",null,[r("1 "),this.crowdfundingInfo.buyTokenSymbol,r(" = "),this.crowdfundingInfo.listingRate," ",this.crowdfundingInfo.sellTokenSymbol])]),!!this.crowdfundingInfo.youtube&&e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Youtube :")]),e("a",{href:this.crowdfundingInfo.youtube,target:"__blank",class:"flex-1 text-primary"},[this.crowdfundingInfo.youtube])]),!!this.crowdfundingInfo.detail&&e("div",{class:"review-info-item"},[e("div",{class:"w-[220px] title"},[r("Launchpad detail :")]),e("a",{href:this.crowdfundingInfo.detail,target:"__blank",class:"flex-1 text-primary"},[this.crowdfundingInfo.detail])])])}}),K=z.filter(t=>!t.routers||!t.routers.length).map(t=>t.chainId),Fe=N({name:"VerifyToken",props:{crowdfundingInfo:{type:Object,required:!0}},emits:["closeDrawer"],setup(t,k){const T=ee(),h=Q(),I=H(),d=f(null),l=f([]),o=f(),g=i=>{const n=l.value.find(b=>b.value===i);!n||(t.crowdfundingInfo.startupName=n.label,t.crowdfundingInfo.chainId=n.chainId,n.tokenAddress&&(t.crowdfundingInfo.sellTokenContract=n.tokenAddress,Ie(()=>{o.value.validate()})))};M(()=>t.crowdfundingInfo.chainId,()=>{K.includes(t.crowdfundingInfo.chainId)?t.crowdfundingInfo.listing="Manual Listing":t.crowdfundingInfo.listing="Auto Listing"});const x=()=>{t.crowdfundingInfo.sellTokenName="",t.crowdfundingInfo.sellTokenSymbol="",t.crowdfundingInfo.sellTokenDecimals=""},w=async i=>{const n=await I(i);try{const[b,c,L]=await Promise.all([n.name(),n.symbol(),n.decimals()]);return t.crowdfundingInfo.sellTokenName=b,t.crowdfundingInfo.sellTokenSymbol=c,t.crowdfundingInfo.sellTokenDecimals=L,!0}catch{return x(),!1}},a=F(()=>[{t:"select",title:"Project",name:"startupId",placeholder:"Select a project",rules:[{required:!0,message:" Please select a project",type:"number",trigger:["blur"]},{validator:(i,n)=>{if(n){let b=!0;return l.value.forEach(c=>{c.value===n&&(b=c.onChain)}),b}return!0},renderMessage:()=>e("div",{class:"flex items-center"},[e("span",null,[r("The startup cannot create a Launchpad without being on the blockchain,")]),e("span",{onClick:()=>v(),class:"cursor-pointer flex ml-2 items-center !text-primary"},[e("span",null,[r("Go to setting")]),e(Re,{class:"h-[16px] ml-2 w-[16px]"},null)])]),trigger:"blur"}],onUpdateValue:g,options:l.value},{t:"string",title:"Title",name:"title",formItemProps:{ref:i=>o.value=i,first:!0},rules:[{required:!0,message:"Title cannot be blank",trigger:"blur"}],placeholder:"Input Launchpad title",maxlength:100},{t:"string",title:"Token Contract",name:"sellTokenContract",formItemProps:{ref:i=>o.value=i,first:!0},rules:[{required:!0,message:"Token contract cannot be blank",trigger:"blur"},{validator:(i,n)=>/^0x[a-zA-Z\d]{40}/.test(n)&&n.length===42?!0:(x(),!1),message:"Invalid token contract",trigger:"blur"},{asyncValidator:(i,n,b,c,L)=>new Promise(()=>{w(n).then(s=>{b(s?void 0:"")})}),message:"The token may not be on the current blockchain network",trigger:"blur"}],placeholder:"EX\uFF1A0x1Ce3...cF0d",maxlength:64},{t:"custom",name:"",title:"",class:t.crowdfundingInfo.sellTokenContract&&t.crowdfundingInfo.sellTokenName?"!grid-rows-[0,1fr]":"hidden",render(i){return e("div",null,[e("div",{class:"mb-6 text-grey3 text-yellow-500 u-h5"},[r("If this token has already add liquidity on the exchange, the auto listing model may fail to raise funds")]),e("div",{class:"grid grid-cols-[100px,2fr]"},[e("div",{class:"mb-6 text-grey3 u-h5"},[r("Name:")]),e("div",null,[t.crowdfundingInfo.sellTokenName]),e("div",{class:"mb-6 text-grey3 u-h5"},[r("Symbol:")]),e("div",null,[t.crowdfundingInfo.sellTokenSymbol]),e("div",{class:"text-grey3 u-h5"},[r("Decimals:")]),e("div",null,[t.crowdfundingInfo.sellTokenDecimals])])])}},{t:"string",title:"",name:"teamWallet",required:!1,formItemProps:{first:!0},slots:{label:()=>[R(e("div",null,[r("Team Wallet Address"),e("span",{class:"n-form-item-label__asterisk"},[r("\xA0*")]),e("span",{class:"font-normal text-xs ml-4 text-color3"},[r("Team wallet address used to receive funds raised")])]))]},rules:[{validator:(i,n)=>!!n,message:"Team wallet address cannot be  blank",trigger:"blur"},{validator:(i,n)=>/^0x[a-zA-Z\d]{40}/.test(n)&&n.length===42,message:"Invalid team wallet address",trigger:"blur"}],placeholder:"EX\uFF1A0x1Ce3...cF0d",maxlength:64},{t:"select",title:"Listing Options",name:"listing",placeholder:"Select a Listing",rules:[{required:!0,message:" Please select a Listing",type:"string",trigger:["blur"]}],options:[{label:"Auto Listing",value:"Auto Listing",disabled:K.includes(t.crowdfundingInfo.chainId)},{label:"Manual Listing",value:"Manual Listing"}]}]);te(()=>{u()});const u=async()=>{var i;try{const{error:n,data:b}=await E["Startup@get-startups"]({admin_comer_id:(i=h==null?void 0:h.profile)==null?void 0:i.id,size:1e3,page:1});n||(l.value=(b.list||[]).map(c=>({label:c.name||"",value:c.id||0,disabled:!1,tokenAddress:c.token_contract,onChain:c.on_chain||!1,chainId:c.chain_id})).sort(function(L,s){return L.label.localeCompare(s.label,"zh-Hans-CN",{sensitivity:"accent"})}))}catch(n){console.error("error",n)}},v=async()=>{T.push({path:`/project/setting/${t.crowdfundingInfo.startupId}`}),k.emit("closeDrawer")},p=q(a.value);return k.expose({verifyTokenForm:d}),{verifyTokenForm:d,verifyTokenFields:a,verifyTokenFieldsRules:p}},render(){return e(W,{ref:t=>this.verifyTokenForm=t,rules:this.verifyTokenFieldsRules,model:this.crowdfundingInfo},{default:()=>[e(V,{fields:this.verifyTokenFields,values:this.crowdfundingInfo},null),e("div",{style:{borderColor:"#65b400",background:"#dbef8822"},class:"border-solid flex p border-1 rounded-0 h-8 text-xs row pl-3 items-center"},[r("5% funding you raised as fee.")])]})}}),Me=z.filter(t=>!t.routers||!t.routers.length).map(t=>t.chainId),je=N({name:"CreateCrowdfundingForm",emits:["cancel"],props:{stepOptions:{type:Array,required:!0}},setup(t,k){const T=oe(),h=H();let I=Z();const d=X(),l=f(),o=f(),g=f(),x=f(!1),w=f(!1),a=ke({chainId:void 0,current:1,startupId:void 0,startupName:"",title:"",sellTokenContract:"",sellTokenName:"",sellTokenSymbol:"",sellTokenDecimals:"",sellTokenSupply:"",teamWallet:"",listing:Me.includes(d.chainId)?"Manual Listing":"Auto Listing",raiseGoal:null,listingRate:void 0,buyTokenContract:"",buyTokenName:"",buyTokenSymbol:"",totalSellToken:void 0,buyTokenDecimals:"",swapPercent:void 0,buyPrice:void 0,maxBuyAmount:void 0,minBuyAmount:void 0,sellTax:void 0,maxSell:100,Router:null,startTime:void 0,endTime:void 0,sellTokenDeposit:0,poster:"",youtube:"",detail:"",description:void 0}),u=()=>{d.init(!0).then(()=>{I=Z()})};M(()=>a.startupId,()=>{a.startupId&&v(a.startupId)});const v=async y=>{const{error:S,data:A}=await E["Startup@get-startup-info"]({startup_id:y});S||p(A.chain_id)},p=async y=>{var S;d.chainId!==y&&(await d.ensureWalletConnected(),await((S=d.wallet)==null?void 0:S.switchNetwork(y))?(u(),a.sellTokenContract=""):c())},i=()=>{x.value=!0},n=()=>{a.current-=1},b=()=>{var y,S,A,O,j,Y;if(!w.value)if(w.value=!0,a.current===1)(S=(y=l.value)==null?void 0:y.verifyTokenForm)==null||S.validate(U=>{w.value=!1,U||(a.current+=1)});else if(a.current===2)(O=(A=o.value)==null?void 0:A.crowdfundingInfoForm)==null||O.validate(U=>{w.value=!1,U||(a.current+=1)});else if(a.current===3)(Y=(j=g.value)==null?void 0:j.additionalInfoForm)==null||Y.validate(U=>{w.value=!1,U||(a.current+=1)});else return},c=()=>{x.value=!1,k.emit("cancel")},L=async()=>{const y="Apply for creating Launchpad contract on blockchain.";try{const S=Pe[d.chainId];T.startContract(y);const A=await h(a.sellTokenContract);console.log("need totalSellToken:",a.totalSellToken,"decimals:",a.sellTokenDecimals,"contract:",a.sellTokenContract),await(await A.approve(S,P(String(a.totalSellToken),a.sellTokenDecimals))).wait();const j=await I.createCrowdfundingContract([a.sellTokenContract,a.buyTokenContract===G?a.sellTokenContract:a.buyTokenContract,Number(a.sellTokenDecimals),Number(a.buyTokenDecimals),a.buyTokenContract===G,P(a.raiseGoal.toString(),a.buyTokenDecimals),P(a.buyPrice.toString(),a.sellTokenDecimals),P(a.swapPercent.toString(),2),P(a.sellTax.toString(),2),P(a.maxBuyAmount.toString(),Number(a.buyTokenDecimals)),P(a.minBuyAmount.toString(),Number(a.buyTokenDecimals)),P(a.maxSell.toString(),2),a.teamWallet,C(a.startTime).valueOf()/1e3,C(a.endTime).valueOf()/1e3,a.listing==="Auto Listing"?a.Router:"0x0000000000000000000000000000000000000000",a.listing==="Auto Listing"?P(String(a.listingRate),a.sellTokenDecimals):0],"Create Launchpad contract on blockchain.","Launchpad was created");return console.log("here",j),j}catch(S){J(S),console.error(S),T.endContract("failed",{success:!1})}return null},s=async()=>{try{console.log(a);const y=await L();if(console.log("contractRes==>",y),!y)return;await E["Crowdfunding@create-crowdfunding"]({title:a.title,startup_id:a.startupId,chain_id:d.chainId,tx_hash:y.hash,poster:a.poster.url,description:a.description,youtube:a.youtube,detail:a.detail}),k.emit("cancel")}catch(y){J(y),console.error("error===>",y)}},m=async()=>{s()};return k.expose({crowdfundingInfo:a,toPreviousStep:n,toNext:b,showLeaveTipModal:i,closeDrawer:c,onSubmit:m}),{crowdfundingInfo:a,modalVisibleState:x,verifyTokenRef:l,fundingInfoRef:o,additionalInfoRef:g,closeDrawer:c}},render(){return e("div",null,[e("div",{class:"mx-35 mb-20"},[e(be,{steps:this.stepOptions,current:this.crowdfundingInfo.current,classes:{stepTitle:"w-32 text-center"},class:"mt-4"},null)]),this.crowdfundingInfo.current===1&&e(Fe,{crowdfundingInfo:this.crowdfundingInfo,onCloseDrawer:this.closeDrawer,ref:t=>this.verifyTokenRef=t},null),this.crowdfundingInfo.current===2&&e(Ne,{crowdfundingInfo:this.crowdfundingInfo,ref:t=>this.fundingInfoRef=t},null),this.crowdfundingInfo.current===3&&e(De,{crowdfundingInfo:this.crowdfundingInfo,ref:t=>this.additionalInfoRef=t},null),this.crowdfundingInfo.current===4&&e(_e,{crowdfundingInfo:this.crowdfundingInfo},null),e(se,{show:this.modalVisibleState,"onUpdate:show":t=>this.modalVisibleState=t,maskClosable:!1},{default:()=>[e(ue,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>this.modalVisibleState=!1,title:"Discard the changes?"},{default:()=>[e("div",{class:"min-h-20 text-color2 u-h6"},[r("The action cannot be undone at once you click 'Yes'!")]),e("div",{class:"flex mt-4 justify-end"},[e(D,{type:"primary",ghost:!0,class:"mr-4 w-41",onClick:()=>this.modalVisibleState=!1},{default:()=>[r("Cancel")]}),e(D,{type:"primary",class:"w-41",onClick:this.closeDrawer},{default:()=>[r("Yes")]})])]})]})])}}),Ue=N({name:"CreateFairLaunchBlock",setup(){const t=f(),k=f(!1),T=X(),h=async()=>{await T.ensureWalletConnected(),T.isNetworkSupported?k.value=!0:(_.warning("Please switch to the supported network to create a Dcrowdfunding"),T.openNetworkSwitcher())},I=()=>{k.value=!1},d=()=>{var g,x;(x=(g=t.value)==null?void 0:g.showLeaveTipModal)==null||x.call(g)},l=[{name:"Verify Token"},{name:"The Launchpad Information "},{name:"Add Additional Information "},{name:"Review Your Information"}];return{show:h,close:I,visible:k,footer:()=>{var g,x,w,a,u,v,p,i,n,b,c;return e("div",{class:"bg-purple text-right pr-16 pb-4"},[((x=(g=t.value)==null?void 0:g.crowdfundingInfo)==null?void 0:x.current)===1&&e(D,{class:"mr-4 w-40",type:"primary",ghost:!0,onClick:d},{default:()=>[r("Cancel")]}),((a=(w=t.value)==null?void 0:w.crowdfundingInfo)==null?void 0:a.current)>1&&e(D,{class:"mr-4 w-40",type:"primary",ghost:!0,onClick:(u=t.value)==null?void 0:u.toPreviousStep},{default:()=>[r("Previous Step")]}),((p=(v=t.value)==null?void 0:v.crowdfundingInfo)==null?void 0:p.current)<l.length&&e(D,{type:"primary",class:"w-40",onClick:(i=t.value)==null?void 0:i.toNext},{default:()=>[r("Next")]}),((b=(n=t.value)==null?void 0:n.crowdfundingInfo)==null?void 0:b.current)===l.length&&e(D,{type:"primary",class:"w-40",onClick:(c=t.value)==null?void 0:c.onSubmit},{default:()=>[r("Submit")]})])},createCrowdfundingFormRef:t,stepOptions:l}},render(){return e(de,{title:"Create Launchpad",maskClosable:!1,show:this.visible,"onUpdate:show":t=>this.visible=t},{default:()=>[this.visible&&e(je,{ref:t=>this.createCrowdfundingFormRef=t,stepOptions:this.stepOptions,onCancel:this.close},null)],whiteBoard:this.footer})}}),vt=N({name:"CreateBlock",setup(t,k){const T=ee(),h=ce(),I=Q(),d=f(),l=f(),o=f(),g=f(),x=f(),w=f(!1),a=f(),u=f(),v=async s=>{try{const{error:m,data:y}=await E["Startup@get-startups"]({admin_comer_id:s});m||(w.value=!!(y.list||[]).length)}catch(m){console.error("error",m)}},p=()=>{var s;h.isLargeScreen?(s=d.value)==null||s.show():_.info("Note: please switch desktop to create Project")},i=()=>{var s,m;h.isLargeScreen?w.value?(s=l.value)==null||s.show():(m=a.value)==null||m.show("Please do create a Project before creating a Bounty."):_.info("Note: please switch desktop to create Bounty")},n=()=>{var s,m;h.isLargeScreen?w.value?(s=o.value)==null||s.show():(m=a.value)==null||m.show("Please do create a Project before creating a Launchpad."):_.info("Note: please switch desktop to create Launchpad")},b=()=>{var s,m;h.isLargeScreen?w.value?(s=g.value)==null||s.show():(m=a.value)==null||m.show("Please do create a Project before creating a Launchpad."):_.info("Note: please switch desktop to create Launchpad")},c=()=>{T.push("/project/list")},L=()=>{var s,m;h.isLargeScreen?w.value?(s=x.value)==null||s.show():(m=u.value)==null||m.show():_.info("Note: please switch desktop to create Proposal")};return M(()=>{var s;return(s=I.profile)==null?void 0:s.id},()=>{var s,m;(s=I.profile)!=null&&s.id&&v((m=I.profile)==null?void 0:m.id)},{immediate:!0}),()=>e(Te,null,[e(ye,{ref:d},null),e(xe,{ref:l},null),e(Ue,{ref:o},null),e(Ae,{ref:g},null),e(Le,{ref:x},null),e(ge,{ref:a,onToCreate:p},null),e(me,{ref:u,onToCreate:c},null),e(fe,{options:[{key:"startup",label:()=>e("div",{class:"flex items-center",onClick:p},[e("div",{class:"rounded flex h-full mr-4 w-8 items-center justify-center"},[e("img",{src:we,class:"w-full "},null)]),e("div",{class:"text-[#000000] u-h4"},[r("Project")])])},{key:"bounty",label:()=>e("div",{class:"flex items-center",onClick:i},[e("div",{class:"rounded flex h-full mr-4 w-8 items-center justify-center"},[e("img",{src:he,class:"w-full "},null)]),e("div",{class:"text-[#000000] u-h4"},[r("Bounty")])])},{key:"Crowdfunding",label:()=>e("div",{class:"flex items-center"},[e("div",{class:"rounded flex h-full mr-4 w-8 items-center justify-center"},[e("img",{src:ve,class:"w-full "},null)]),e("div",{class:"text-[#000000] u-h4"},[r("Launchpad")])]),children:[{key:"pair",label:()=>e("div",{class:"flex-col my-[10px] mx-[30px] items-center",onClick:n},[e("div",{class:"font-normal text-[#333] u-h4"},[r("Fair Launch")]),e("div",{class:"mt-2 text-gray-500 leading-4 w-[300px] whitespace-normal"},[r("During the fair liquidity, a presale pool is established with a fixed swap price. This presale pool allows investors to invest in and withdraw tokens in real-time.")])])},{key:"sale",label:()=>e("div",{class:"flex-col my-[10px] mx-[30px] items-center",onClick:b},[e("div",{class:"font-normal text-[#333] u-h4"},[r("Sale Launch")]),e("div",{class:"mt-2 text-gray-500 leading-4 w-[300px] whitespace-normal"},[r("After a set vesting date, investors will be able to receive the tokens they invested in during the presale")])])}]},{key:"Proposal",label:()=>e("div",{class:"flex items-center",onClick:L},[e("div",{class:"rounded flex h-full mr-4 w-8 items-center justify-center"},[e("img",{src:Be,class:"w-full "},null)]),e("div",{class:"text-[#000000] u-h4"},[r("Proposal")])])}]},{default:()=>[e(D,{type:"primary",size:"small",class:"h-8 w-19.25 !font-normal"},{default:()=>[r("Create")]})]})])}});export{vt as default};

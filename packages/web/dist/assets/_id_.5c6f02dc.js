import{W as _e,v as D,b as ke,e as Ie,H as Se,p as Y,Z as Le,_ as k,k as Ve,a1 as Pe,m as R,F as W,a2 as J,a as M,h as K,n as Re}from"./index.ac02f68f.js";import{r as Q}from"./Share.0661cbde.js";import{bD as Z,bf as E,bg as I,l as T,H as w,bm as e,j as s,k as Me,cs as x,r as u,av as De,t as Ne}from"./bundle.f4813fa2.js";import{s as $e}from"./chunk-CGVFGSHT.889ff96e.js";import{u as je,e as Fe}from"./vue.5bd64dc7.js";import{G as Be,C as Ae,s as X}from"./Create.f5d1abad.js";import{C as ee}from"./index.2dbd4b40.js";import{M as Ze}from"./shadow.08583288.js";import{S as Ee}from"./ButtonGroup.19624d09.js";import{S as Te}from"./index.7924c9c7.js";import{u as Ue}from"./erc20.e9c36ea3.js";import{g as ze}from"./ipfs.b0370acf.js";import{M as Oe}from"./ui.e26017cf.js";import{a as He}from"./ethers.043ad920.js";import"./tools.becc2b88.js";import"./wallet.eb251e2a.js";import"./inherits.303311a2.js";import"./index.160e8328.js";import"./MinusCircle.5e3a505f.js";import"./ArrowDown.fce4ad7c.js";import"./Confirm.fc9e96f5.js";import"./ArrowUp.6fcf9bbd.js";import"./useShare.dac42af0.js";import"./Twitter.88072fb4.js";import"./useTags.f9c969ef.js";import"./index.9ccd904a.js";import"./Github.2bf272eb.js";import"./valid.935dd966.js";import"./index.50b02406.js";import"./startup.3b3d8368.js";import"./util.25bcdacb.js";import"./etherscan.83df9912.js";const Ge={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},qe=I("path",{d:"M0.640535 7.69486C0.251163 8.00382 0.185974 8.56992 0.494931 8.9593C0.803888 9.34867 1.37 9.41386 1.75937 9.1049L0.640535 7.69486ZM4.61048 6.08801L4.29948 6.93257L4.61048 6.08801ZM2.33679 16.7999L1.47014 16.5572C1.36317 16.9392 1.51887 17.3461 1.85347 17.5591C2.18807 17.7722 2.62267 17.741 2.92347 17.4824L2.33679 16.7999ZM11.4315 10.5102L11.149 11.3647L11.4315 10.5102ZM13.7052 14.4567L13.9877 13.6022L13.7052 14.4567ZM23.1318 11.4349C23.5939 11.2516 23.8198 10.7284 23.6365 10.2664C23.4532 9.80438 22.9301 9.57843 22.4681 9.76173L23.1318 11.4349ZM1.75937 9.1049C2.05141 8.87318 2.35263 8.56342 2.61937 8.28653C2.90335 7.99174 3.16774 7.71308 3.43553 7.46977C3.70719 7.22295 3.92862 7.06344 4.10399 6.98251C4.18636 6.94449 4.23885 6.93327 4.26595 6.93047C4.288 6.92819 4.29499 6.93091 4.29948 6.93257L4.92147 5.24345C4.33967 5.02921 3.78576 5.14694 3.34976 5.34814C2.92614 5.54364 2.54427 5.84754 2.2251 6.13753C1.90207 6.43103 1.58812 6.76255 1.32304 7.03772C1.04073 7.33077 0.822182 7.55073 0.640535 7.69486L1.75937 9.1049ZM4.29948 6.93257C4.06833 6.84745 4.05078 6.66168 4.07443 6.76233C4.09801 6.86264 4.1123 7.06952 4.07882 7.41512C4.01313 8.09308 3.79397 9.03309 3.48433 10.1209C3.17792 11.1975 2.79838 12.3668 2.43146 13.4921C2.06785 14.6072 1.71332 15.6889 1.47014 16.5572L3.20345 17.0426C3.43395 16.2196 3.77416 15.1806 4.14278 14.0501C4.5081 12.9297 4.8983 11.7284 5.21557 10.6137C5.52962 9.51037 5.78808 8.43864 5.87043 7.58869C5.91096 7.17034 5.91686 6.73422 5.8267 6.35055C5.73662 5.96722 5.5 5.45648 4.92147 5.24345L4.29948 6.93257ZM2.92347 17.4824C4.34694 16.2588 6.28716 14.6028 8.02187 13.3052C8.89208 12.6542 9.68444 12.1134 10.3188 11.764C10.6377 11.5884 10.8874 11.4775 11.0682 11.421C11.2805 11.3546 11.2684 11.4042 11.149 11.3647L11.714 9.6557C11.2833 9.51328 10.8421 9.60579 10.5311 9.703C10.1885 9.8101 9.82049 9.98348 9.45038 10.1873C8.70677 10.5969 7.83619 11.1962 6.9437 11.8638C5.15302 13.2032 3.16875 14.898 1.75012 16.1174L2.92347 17.4824ZM11.149 11.3647C11.3064 11.4168 11.4392 11.5247 11.5715 11.7582C11.7158 12.0129 11.8222 12.352 11.9309 12.7819C12.0266 13.1604 12.1384 13.6816 12.2937 14.0892C12.4435 14.4826 12.744 15.0868 13.4227 15.3112L13.9877 13.6022C14.1272 13.6483 14.087 13.7406 13.9758 13.4486C13.8701 13.171 13.8006 12.8335 13.6759 12.3405C13.5642 11.8987 13.4109 11.3533 13.1376 10.8709C12.8522 10.3673 12.4093 9.88555 11.714 9.6557L11.149 11.3647ZM13.4227 15.3112C14.1573 15.5541 15.0166 15.3526 15.7417 15.1003C16.5181 14.8301 17.3838 14.41 18.2442 13.9588C20.029 13.023 21.7684 11.9758 23.1318 11.4349L22.4681 9.76173C20.9894 10.3484 19.034 11.5123 17.4083 12.3647C16.5635 12.8077 15.7949 13.1759 15.1503 13.4002C14.4544 13.6423 14.1058 13.6412 13.9877 13.6022L13.4227 15.3112Z",fill:"black","fill-opacity":"0.5"},null,-1),Ye=[qe];function We(r,d){return Z(),E("svg",Ge,Ye)}const Je={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},Ke=I("path",{d:"M14.1063 3.01426C13.5313 2.40488 12.7485 2.06426 11.9328 2.06582H11.9297C11.1172 2.06426 10.336 2.40332 9.76252 3.00957L9.76095 3.01113L4.10002 8.96738C3.57345 9.52363 3.4172 10.358 3.70314 11.083C3.98908 11.808 4.66252 12.2799 5.40939 12.2783C5.88127 12.2783 6.35158 12.0908 6.70939 11.7127L12.3703 5.75645C12.611 5.50332 12.611 5.09395 12.3703 4.84082C12.1297 4.5877 11.7406 4.5877 11.5 4.84082L5.84064 10.7971C5.72502 10.9174 5.56877 10.9846 5.40627 10.9846C5.24377 10.9846 5.08752 10.9158 4.97345 10.7939C4.85627 10.6752 4.79064 10.5111 4.78908 10.3393C4.78908 10.1674 4.85314 10.0033 4.96877 9.88301L10.6297 3.92676C10.9735 3.5627 11.4422 3.35957 11.9297 3.36113H11.9313C12.4203 3.35957 12.8906 3.56582 13.236 3.92988C13.5844 4.29551 13.7766 4.78457 13.7766 5.30176C13.7781 5.81582 13.5844 6.30957 13.2391 6.67207L11.711 8.27988L11.7016 8.28926L7.46564 12.7486C6.26408 14.0111 4.3172 14.0127 3.11408 12.7502C2.53595 12.1439 2.21252 11.3205 2.21564 10.4627C2.21564 9.59707 2.53595 8.78301 3.1172 8.17207L8.88908 2.09863C9.1297 1.84551 9.1297 1.43613 8.88908 1.18301C8.64845 0.929883 8.25939 0.929883 8.01877 1.18301L2.24689 7.25645C1.43595 8.10488 0.981266 9.25957 0.984391 10.4627C0.984391 11.6736 1.43127 12.8127 2.24377 13.6658C3.05002 14.5158 4.14533 14.9924 5.28752 14.9893C6.43127 14.9908 7.52814 14.5143 8.33595 13.6627L14.3219 7.36426C14.3813 7.3002 14.4281 7.22363 14.4578 7.14082C14.8141 6.60332 15.0078 5.96895 15.0078 5.3002C15.0094 4.44238 14.6844 3.61895 14.1063 3.01426Z",fill:"currentColor"},null,-1),Qe=[Ke];function A(r,d){return Z(),E("svg",Je,Qe)}const Xe={width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},et=I("rect",{width:"28",height:"28",rx:"6",fill:"#F8F8F8"},null,-1),tt=I("path",{d:"M5.44446 13.9996C5.44446 13.1405 6.1409 12.4441 7.00001 12.4441C7.85912 12.4441 8.55557 13.1405 8.55557 13.9996C8.55557 14.8587 7.85912 15.5552 7.00001 15.5552C6.1409 15.5552 5.44446 14.8587 5.44446 13.9996Z",fill:"#6E6D7A"},null,-1),ot=I("path",{d:"M12.4445 13.9996C12.4445 13.1405 13.1409 12.4441 14 12.4441C14.8591 12.4441 15.5556 13.1405 15.5556 13.9996C15.5556 14.8587 14.8591 15.5552 14 15.5552C13.1409 15.5552 12.4445 14.8587 12.4445 13.9996Z",fill:"#6E6D7A"},null,-1),st=I("path",{d:"M19.4445 13.9996C19.4445 13.1405 20.1409 12.4441 21 12.4441C21.8591 12.4441 22.5556 13.1405 22.5556 13.9996C22.5556 14.8587 21.8591 15.5552 21 15.5552C20.1409 15.5552 19.4445 14.8587 19.4445 13.9996Z",fill:"#6E6D7A"},null,-1),lt=[et,tt,ot,st];function rt(r,d){return Z(),E("svg",Xe,lt)}function at(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!Me(r)}const it=T({name:"CurrentResult",props:{proposalInfo:{type:Object,required:!0},voteSymbol:{type:String,required:!0}},render(){let r;const d=w(()=>{var a;let c=0;return(a=this.proposalInfo.choices)==null||a.forEach(b=>{c+=Number(b.vote_total||0)}),c});return e(D,{title:"Current results"},at(r=(this.proposalInfo.choices||[]).map(c=>e("div",null,[e("div",{class:"flex mb-2 justify-between u-h6"},[e("span",null,[c.item_name]),e("span",{class:"text-color3"},[c.vote_total,e("span",{class:"mx-2"},[this.voteSymbol])," ",((Number(c.vote_total)/d.value||0)*100).toFixed(2),s("%")])]),e(_e,{color:"#65b400",showIndicator:!1,percentage:(Number(c.vote_total)/d.value||0)*100,height:8,class:"mb-4"},null)])))?r:{default:()=>[r]})}}),nt=T({name:"StrategyInformation",props:{proposalInfo:{type:Object,required:!0},blockExploreUrl:{type:String}},emits:["showStrategyDetail"],setup(r){return{strategy:w(()=>{var c,a,b;return(b=(a=(c=r.proposalInfo)==null?void 0:c.startup)==null?void 0:a.governance_setting)==null?void 0:b.strategies})}},render(){return e(D,{title:"Information"},{default:()=>{var r,d,c,a,b;return[e("div",{class:"grid gap-y-4 grid-cols-2 justify-between u-h5"},[e("div",{class:"text-color1"},[s("Strategie(s) :")]),e("div",{class:["text-right u-h6 text-color3 hover:text-primary cursor-pointer"],onClick:()=>this.$emit("showStrategyDetail")},[(r=this.strategy)==null?void 0:r.strategy_name]),e("div",{class:"text-color1"},[s("Voting system :")]),e("div",{class:"text-right text-color3 u-h6"},[(d=this.proposalInfo)==null?void 0:d.vote_system]),e("div",{class:"text-color1"},[s("Start date :")]),e("div",{class:"text-right text-color3 u-h6"},[x(+this.proposalInfo.start_time).utc().format()]),e("div",{class:"text-color1"},[s("End date :")]),e("div",{class:"text-right text-color3 u-h6"},[x(+this.proposalInfo.end_time).utc().format()]),e("div",{class:"text-color1"},[s("Block height :")]),e("div",{class:"flex text-color3 justify-end items-center u-h6"},[(a=(c=this.proposalInfo)==null?void 0:c.block_number)==null?void 0:a.toLocaleString(),this.blockExploreUrl&&e("a",{href:`${this.blockExploreUrl}/block/${(b=this.proposalInfo)==null?void 0:b.block_number}`,target:"__blank",class:"ml-2 leading-4"},[e(A,{class:"text-primary"},null)])])])]}})}}),Tt=T({name:"ProposalDetail",setup(){const r=je(),d=Fe(),c=ze(),a=ke(),b=Ue(),S=u(),i=u(),o=u(),n=u(),h=u(),C=u(!1),f=De({pageSize:10,total:0,page:1,loading:!1}),m=u(),y=u(0),_=u(!1),L=u(),N=u(!1),te=u(!1),oe=u(!1),$=u({visible:!1,hash:"",address:"",choice:""}),se=async t=>{var l;switch(t==null?void 0:t.dict_value){case"ticket":{y.value=1;break}case"erc20Balance":{if(_.value=!0,t.token_contract_address){const p=a.address,v=a.getRpcProvider(t.chain_id,Re),V=await(await b(t.token_contract_address,v)).balanceOf(p,{blockTag:(l=o.value)==null?void 0:l.block_number});y.value=He(V,t.vote_decimals),console.log(y.value)}_.value=!1;break}default:y.value=0}},U=async()=>{var t,l,p;try{C.value=!0;const{error:v,data:g}=await M["Proposal@get-proposal-info"]({proposal_id:Number(r.params.id)});!v&&g&&(o.value=g,i.value=g==null?void 0:g.startup,h.value=(t=g==null?void 0:g.startup)==null?void 0:t.governance_setting,L.value=(p=(l=g==null?void 0:g.startup)==null?void 0:l.governance_setting)==null?void 0:p.strategies,L.value&&se(L.value),setTimeout(()=>{console.log("pRef.value.scrollHeight",F.value.scrollHeight),B.value=F.value.scrollHeight>200,z.value=B.value},100))}catch(v){console.log(v)}C.value=!1},j=async(t,l=!1)=>{try{const{error:p,data:v}=await M["Proposal@get-proposal-invest-records"]({size:f.pageSize,page:t,proposal_id:Number(r.params.id)});p||(f.total=v.total,l?n.value=v.list||[]:n.value=[...n.value||[],...v.list||[]])}catch(p){console.error("error===>",p)}},le=async t=>{m.value=t},re=async()=>{N.value=!0},P=u(!1),ae=async()=>{var t,l,p;if(console.log(m.value),m.value)try{console.log("selectedChoice.value===>",m.value);const{item_name:v,id:g}=m.value,V={From:a.address,Startup:(t=o.value)==null?void 0:t.startup.name,timestamp:x().valueOf(),proposal:(l=o.value)==null?void 0:l.title,choice:v},O={name:"Comunion"};console.log("saveContent==>",V);const H=await((p=a.wallet)==null?void 0:p.signTypedData(O,X,V));if(H){P.value=!0;const G=await c.add(JSON.stringify({address:a.address,sig:H,data:{domain:O,types:X,message:V}})).catch(q=>{console.warn("voteRes=",q),K.warning(q.message),P.value=!1});if(P.value=!1,!G)return null;const{error:we}=await M["Proposal@voiteproposal"]({proposal_id:Number(r.params.id),voter_wallet_address:a.address,choice_item_id:g,votes:Number(y.value),ipfs_hash:G.cid.toString(),choice_item_name:v});if(!we)return U(),j(1,!0),N.value=!1,!0}}catch(v){console.error("error",v)}return null},ie=(t,l,p)=>{$.value={visible:!0,hash:t,address:l,choice:p}},ne=async({ipfs:t})=>{window.open(`https://signator.io/view?ipfs=${t}`)},ce=()=>{var t,l;o.value&&((l=S.value)==null||l.show({current:1,title:o.value.title,discussion:o.value.discussion_link,description:o.value.description,vote:o.value.vote_system,vote_choices:(t=o.value.choices)==null?void 0:t.map(p=>({value:p.item_name})),start_time:x(Number(o.value.start_time)).valueOf(),end_time:x(Number(o.value.end_time)).valueOf()}))},ue=async()=>{const t=Number(r.params.id),{error:l}=await M["Proposal@deleteproposal"]({proposal_id:t});l||(K.success("delete successfully"),d.replace({path:"/governance/list"}))},de=w(()=>{var t;return Be[(t=o.value)==null?void 0:t.status]}),pe=t=>{window.open(`/ipfs/raw/${t}`)},he=()=>{$.value={visible:!1,hash:"",address:"",choice:""}},fe=t=>{t&&d.push({path:"/builder",query:{id:t}})},me=()=>{f.page+=1,j(f.page)},ve=t=>{let l=[];switch(L.value.dict_value){case"ticket":l=["network"];break;case"erc20Balance":l=["network","symbol","address","decimals"];break;default:l=[]}return l.includes(t)},ge=w(()=>{if(o.value.chain_id)return Ie.find(l=>l.chainId===o.value.chain_id)}),be=w(()=>!o.value||!o.value.admins?!1:o.value.admins.findIndex(t=>t.address===a.address)>-1),Ce=w(()=>{var t,l;return x().isAfter(+((t=o.value)==null?void 0:t.end_time))?"Ended":x.utc().isBefore(x(+((l=o.value)==null?void 0:l.start_time)).utc())?"Upcoming":"Active"}),xe=w(()=>{var t,l;return x().isBefore(+((t=o.value)==null?void 0:t.end_time))&&x().isAfter(+((l=o.value)==null?void 0:l.start_time))&&a.connected}),ye=w(()=>{var t;return x.utc().isBefore(x(+((t=o.value)==null?void 0:t.start_time)).utc())}),F=u(),B=u(!1),z=u(!1);return Ne(()=>{U(),j(1,!0)}),{startupInfo:i,pageLoading:C,proposalInfo:o,pagination:f,statusStyle:de,voteRecords:n,selectedChoice:m,votePower:y,votePowerShow:_,voteInfoVisible:N,strategyVisible:te,createProposalRef:S,strategyInfo:L,govSetting:h,ipfsDetail:$,networkInfo:ge,isAdmin:be,delProposalVisible:oe,voteLoading:P,showVoteInfo:re,choiceVote:le,confirmVote:ae,toVerify:ne,duplicateProposal:ce,deleteProposal:ue,showVerifyModal:ie,toIPFSRaw:pe,closeIPFSDetail:he,toComerDetail:fe,loadMoreVoteRecords:me,isShowStrategyInfo:ve,timeLabel:Ce,isActive:xe,isUpcoming:ye,fold:z,pRef:F,showMoreBtn:B,walletStore:a}},render(){const r=()=>{this.fold=!this.fold};return e(W,{show:this.pageLoading},{default:()=>{var d,c,a,b,S;return[e("div",{class:"flex gap-6 <lg:pt-10 <lg:block"},[this.startupInfo&&this.startupInfo.name&&((d=this.proposalInfo)==null?void 0:d.title)&&e(Ee,{class:" top-0 left-[100%] absolute <lg:left-auto <lg:right-0",generate:{banner:this.startupInfo.banner,logo:this.startupInfo.logo,name:this.startupInfo.name+"-Proposal",content:(c=this.proposalInfo)==null?void 0:c.title},route:window.location.href,title:((a=this.startupInfo)==null?void 0:a.name)+"--Proposal | GoRollux",description:"Check out the proposal on GoRollux, The lead building launchpad on Rollux and Syscoin",text:`${this.startupInfo.name} just posted a #proposal, check it out on #GoRollux Network: `,tipPlacement:"right"},null),e("div",{class:"w-86 overflow-hidden <lg:w-auto"},[this.startupInfo&&e(Te,{startup:this.startupInfo,class:"mb-6"},null),this.proposalInfo&&e(nt,{class:"mb-6",proposalInfo:this.proposalInfo,onShowStrategyDetail:()=>this.strategyVisible=!0,blockExploreUrl:(b=this.networkInfo)==null?void 0:b.explorerUrl},null),!!this.proposalInfo&&!!this.strategyInfo&&e(it,{proposalInfo:this.proposalInfo,voteSymbol:this.strategyInfo.voteSymbol},null)]),e("div",{class:"flex-1 relative overflow-hidden"},[e(D,null,{default:()=>{var i,o,n,h,C,f;return[e("div",{class:"flex mb-5 justify-between"},[e("span",{class:"max-w-9/10 text-color1 u-h2"},[(i=this.proposalInfo)==null?void 0:i.title]),e("div",{class:"leading-8"},[e(Se,{class:"text-color2"},{default:()=>[this.timeLabel]})])]),e("div",{class:"flex items-center"},[e("div",{class:"cursor-pointer flex items-center",onClick:()=>{var m;return this.toComerDetail((m=this.proposalInfo)==null?void 0:m.comer_id)}},[e(Y,{class:"rounded-full h-9 w-9",src:((o=this.proposalInfo)==null?void 0:o.comer.avatar)||""},null),e("div",{class:"ml-2 text-color2 u-h6 hover:text-primary"},[(n=this.proposalInfo)==null?void 0:n.comer.name])]),e(Le,{trigger:"click",placement:"bottom",arrowStyle:{background:"#fff"},contentStyle:{background:"#fff",borderRadius:"0.25rem",fontSize:"0.8rem",padding:"0.5rem"},raw:!0},{trigger:()=>e(rt,{class:"cursor-pointer h-7 ml-4 w-9"},null),default:()=>e("div",{class:"flex flex-col"},[e(k,{size:"small",onClick:this.duplicateProposal},{default:()=>[s("Duplicate proposal")]}),this.isAdmin&&e(k,{size:"small",type:"error",class:"mt-1",onClick:()=>this.delProposalVisible=!0},{default:()=>[s("Delete proposal")]})])})]),e("div",{class:"transition-all ease-linear duration-1000 overflow-hidden relative",style:{height:`${this.fold?"200px":"auto"}`}},[e("div",{ref:m=>this.pRef=m},[((h=this.proposalInfo)==null?void 0:h.description)&&e("div",{class:"mt-4 text-color2 u-h6",innerHTML:(C=this.proposalInfo)==null?void 0:C.description},null),((f=this.proposalInfo)==null?void 0:f.discussion_link)&&e("div",{class:"mt-8"},[e("div",{class:"mb-1 text-color1 u-h4"},[s("Discussion\uFF1A")]),e("a",{href:this.proposalInfo.discussion_link,target:"__blank",class:"text-color3 u-h5 hover:text-primary"},[this.proposalInfo.discussion_link])])]),this.showMoreBtn&&this.fold&&e("div",{class:"h-16 right-0 bottom-0 left-0 absolute",style:{background:"linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)",transform:"rotate(-180deg)"}},null)]),this.showMoreBtn&&e("div",{class:"flex mt-5 justify-center"},[e(Ze,{onMore:r,fold:this.fold},null)])]}}),e(ee,{class:"mt-6 mb-6",title:"Cast your vote"},{default:()=>{var i,o;return[e("div",{class:"p-6"},[(o=(i=this.proposalInfo)==null?void 0:i.choices)==null?void 0:o.map(n=>{var h;return e("div",{class:`u-h4 border text-center py-3 mb-4 rounded-sm cursor-pointer hover:border-[#65b400] hover:text-primary ${((h=this.selectedChoice)==null?void 0:h.id)===n.id?"border-primary  text-primary":"border-primary-10  text-color2"}`,onClick:()=>this.choiceVote(n)},[n.item_name])}),this.isActive?e("div",{class:["text-white u-h4 text-center py-3 rounded-sm",this.selectedChoice?"bg-primary cursor-pointer":"bg-grey5 cursor-not-allowed"],onClick:()=>this.selectedChoice?this.showVoteInfo():null},[s("Vote")]):e(Ve,{placement:"top"},{trigger:()=>e("div",{class:"text-white u-h4 text-center py-3 rounded-sm bg-grey5 cursor-not-allowed"},[s("Vote")]),default:()=>this.walletStore.connected?this.isUpcoming?e("div",null,[s("This Proposal is not opened yet.")]):e("div",null,[s("This proposal has ended.")]):e("div",null,[s("You have not connected wallet yet.")])})])]}}),!!((S=this.voteRecords)!=null&&S.length)&&e(ee,{title:`Votes (${this.pagination.total})`},{default:()=>[e("div",{class:""},[e(Pe,{bordered:!1},{default:()=>{var i;return[e("tbody",null,[(i=this.voteRecords)==null?void 0:i.map(o=>{var n;return e("tr",{key:o.comer.id},[e("td",null,[e("div",{class:"cursor-pointer flex ml-2 items-center",onClick:()=>this.toComerDetail(o.comer.id)},[e(Y,{src:o.comer.avatar,class:"h-9 mr-3 w-9"},null),e("span",{class:"text-color2 u-h6"},[o.comer.name])])]),e("td",null,[e("div",{class:"flex text-color1 items-center u-h6"},[o.choice_item_name])]),e("td",null,[e("div",{class:"flex text-color3 justify-end items-center u-h6"},[e("span",null,[o.votes]),e("span",{class:"mx-2"},[(n=this.strategyInfo)==null?void 0:n.vote_symbol]),e(We,{class:"cursor-pointer mr-5 text-color2",onClick:()=>this.showVerifyModal(o.ipfs_hash,o.voter_wallet_address,o.choice_item_name)},null)])])])}),this.pagination.page*this.pagination.pageSize<this.pagination.total&&e("tr",null,[e("td",{colspan:3},[e("div",{class:"text-center text-primary",onClick:this.loadMoreVoteRecords},[s("See more")])])])])]}})])]})]),e(R,{show:this.voteInfoVisible,class:"bg-white rounded-sm max-w-[90%] p-10 w-150"},{default:()=>[e(W,{show:this.voteLoading},{default:()=>{var i,o,n,h,C,f,m,y;return[e("div",{class:"mb-6 u-h3"},[s("Vote overview")]),e("div",{class:"border border-color-border rounded-sm grid py-4 px-6 gap-y-4 grid-cols-2"},[e("div",{class:"text-color1 u-h5"},[s("Option(s)")]),e("div",{class:"text-right text-color3 u-h6"},[(i=this.selectedChoice)==null?void 0:i.item_name]),e("div",{class:"text-color1 u-h5"},[s("Block height")]),e("div",{class:"flex text-color3 justify-end items-center u-h6"},[(n=(o=this.proposalInfo)==null?void 0:o.block_number)==null?void 0:n.toLocaleString(),((h=this.networkInfo)==null?void 0:h.explorerUrl)&&e("a",{href:`${(C=this.networkInfo)==null?void 0:C.explorerUrl}/block/${(f=this.proposalInfo)==null?void 0:f.block_number}`,target:"__blank",class:"outline-none ml-2 leading-4"},[e(A,{class:"text-primary"},null)])]),e("div",{class:"text-color1 u-h5"},[s("Your voting power")]),e("div",{class:"text-right text-color3 u-h6"},[e(Oe,{size:"small",show:this.votePowerShow},{default:()=>{var _;return[!this.votePowerShow&&e("span",null,[this.votePower]),e("span",null,[s(" "),(_=this.proposalInfo)==null?void 0:_.voteSymbol])]}})])]),e("div",{class:"flex mt-6 justify-end"},[e(k,{size:"small",class:"mr-4 w-40",onClick:()=>this.voteInfoVisible=!1},{default:()=>[s("Cancel")]}),e(k,{type:"primary",size:"small",class:"w-40",onClick:this.confirmVote,disabled:!Number(this.votePower)||!((m=this.proposalInfo)!=null&&m.allowMember)&&this.votePower<Number((y=this.govSetting)==null?void 0:y.proposalThreshold)},{default:()=>[s("Vote")]})])]}})]}),e(R,{show:this.strategyVisible,class:"bg-white rounded-sm max-w-[90%] px-7 pt-7 pb-10 w-150"},{default:()=>{var i,o,n,h,C,f;return[e("div",null,[e("div",{class:"flex mb-6 justify-between"},[e("span",{class:"text-primary2 u-h3"},[s("Strategies")]),e(J,{class:"cursor-pointer h-6 text-primary w-6",onClick:()=>this.strategyVisible=!1},null)]),e("div",{class:"border border-color-border rounded-sm grid py-4 px-6 gap-y-4 grid-cols-2"},[e("div",{class:"text-colo1 u-h4"},[(i=this.strategyInfo)==null?void 0:i.strategy_name]),e("div",{class:"text-right text-color3 u-h5"},null),e("div",{class:"text-colo1 u-h5"},[s("Network")]),e("div",{class:"text-right text-color3 u-h5"},[((o=this.networkInfo)==null?void 0:o.name)||"--"]),this.isShowStrategyInfo("symbol")&&e("div",{class:"text-colo1 u-h5"},[s("Symbol")]),this.isShowStrategyInfo("symbol")&&e("div",{class:"text-right text-color3 u-h5"},[this.strategyInfo.vote_symbol||"--"]),this.isShowStrategyInfo("address")&&e("div",{class:"text-color1 u-h5"},[s("Address")]),this.isShowStrategyInfo("address")&&e("div",{class:"flex text-color2 items-center justify-end u-h5"},[$e((n=this.strategyInfo)==null?void 0:n.token_contract_address)||"--"," ",e("a",{href:`${(h=this.networkInfo)==null?void 0:h.explorerUrl}/address/${(C=this.strategyInfo)==null?void 0:C.token_contract_address}`,target:"__blank",class:"outline-none ml-2 leading-4 "},[e(A,{class:"text-primary"},null)])]),this.isShowStrategyInfo("decimals")&&e("div",{class:"text-color1 u-h5"},[s("Decimals")]),this.isShowStrategyInfo("decimals")&&e("div",{class:"text-right text-color3 u-h5"},[(f=this.strategyInfo)==null?void 0:f.vote_decimals])])])]}}),e(R,{show:this.ipfsDetail.visible,class:"bg-white rounded-sm max-w-[90%] py-7 px-8 w-150"},{default:()=>[e("div",null,[e("div",{class:"flex text-primary mb-6 justify-between u-h5"},[e("span",{class:"text-color1 u-h5"},[s("Receipt")]),e(J,{class:"cursor-pointer h-6 text-primary w-6",onClick:this.closeIPFSDetail},null)]),e("div",{class:"border border-color-border rounded-sm flex text-center p-5 justify-between"},[e("span",{class:"u-h5"},[s("Author")]),e("span",{class:"flex text-primary items-center"},[e("span",{class:"text-primary mr-4 u-body4"},[s("#"),this.ipfsDetail.hash.substring(0,8)]),e(Q,{class:"cursor-pointer",onClick:()=>this.toIPFSRaw(this.ipfsDetail.hash)},null)])]),e("div",{class:"border border-color-border rounded-full cursor-pointer flex mt-5 text-primary py-4 px-6 group justify-center items-center hover:border-[#65b400]",onClick:()=>this.toVerify({ipfs:this.ipfsDetail.hash})},[e("span",{class:"mr-2 text-color2 u-h5 group-hover:text-primary"},[s("Verify on Signator.io")]),e(Q,null,null)])])]}),e(R,{show:this.delProposalVisible,"onUpdate:show":i=>this.delProposalVisible=i,maskClosable:!1,autoFocus:!1},{default:()=>[e(D,{style:{width:"540px","--n-title-text-color":"#000"},size:"huge",closable:!0,onClose:()=>this.delProposalVisible=!1,title:"Delete the proposal?"},{default:()=>[e("div",{class:"min-h-20 text-color2 u-h6"},[s("The action cannot be undone and the proposal will be permanently deleted!")]),e("div",{class:"flex mt-4 justify-end"},[e(k,{type:"primary",ghost:!0,class:"h-9 mr-4 w-41",onClick:()=>this.delProposalVisible=!1},{default:()=>[s("Cancel")]}),e(k,{type:"primary",class:"h-9 w-41",onClick:this.deleteProposal},{default:()=>[s("Yes")]})])]})]}),e(Ae,{ref:i=>this.createProposalRef=i},null)])]}})}});export{Tt as default};

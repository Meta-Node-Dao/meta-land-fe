import{t as toInteger,g as getTimezoneOffsetInMilliseconds,d as dateFnsFormat,c as cloneObject,e as events$1,b as buffer$3}from"./tools.becc2b88.js";import{i as inherits_browser}from"./inherits.303311a2.js";function _mergeNamespaces(R,E){for(var U=0;U<E.length;U++){const G=E[U];if(typeof G!="string"&&!Array.isArray(G)){for(const Y in G)if(Y!=="default"&&!(Y in R)){const J=Object.getOwnPropertyDescriptor(G,Y);J&&Object.defineProperty(R,Y,J.get?J:{enumerable:!0,get:()=>G[Y]})}}}return Object.freeze(Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}function getAugmentedNamespace(R){var E=R.default;if(typeof E=="function"){var U=function(){return E.apply(this,arguments)};U.prototype=E.prototype}else U={};return Object.defineProperty(U,"__esModule",{value:!0}),Object.keys(R).forEach(function(G){var Y=Object.getOwnPropertyDescriptor(R,G);Object.defineProperty(U,G,Y.get?Y:{enumerable:!0,get:function(){return R[G]}})}),U}var dayjs_min={exports:{}};(function(R,E){(function(U,G){R.exports=G()})(commonjsGlobal,function(){var U=1e3,G=6e4,Y=36e5,J="millisecond",Q="second",X="minute",Z="hour",ee="day",te="week",ne="month",oe="quarter",ce="year",pe="date",ye="Invalid Date",Se=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ge=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Te=function(ae,se,le){var fe=String(ae);return!fe||fe.length>=se?ae:""+Array(se+1-fe.length).join(le)+ae},Ee={s:Te,z:function(ae){var se=-ae.utcOffset(),le=Math.abs(se),fe=Math.floor(le/60),be=le%60;return(se<=0?"+":"-")+Te(fe,2,"0")+":"+Te(be,2,"0")},m:function ae(se,le){if(se.date()<le.date())return-ae(le,se);var fe=12*(le.year()-se.year())+(le.month()-se.month()),be=se.clone().add(fe,ne),ve=le-be<0,xe=se.clone().add(fe+(ve?-1:1),ne);return+(-(fe+(le-be)/(ve?be-xe:xe-be))||0)},a:function(ae){return ae<0?Math.ceil(ae)||0:Math.floor(ae)},p:function(ae){return{M:ne,y:ce,w:te,d:ee,D:pe,h:Z,m:X,s:Q,ms:J,Q:oe}[ae]||String(ae||"").toLowerCase().replace(/s$/,"")},u:function(ae){return ae===void 0}},Re="en",Ae={};Ae[Re]=_e;var Ie=function(ae){return ae instanceof Me},Oe=function ae(se,le,fe){var be;if(!se)return Re;if(typeof se=="string"){var ve=se.toLowerCase();Ae[ve]&&(be=ve),le&&(Ae[ve]=le,be=ve);var xe=se.split("-");if(!be&&xe.length>1)return ae(xe[0])}else{var he=se.name;Ae[he]=se,be=he}return!fe&&be&&(Re=be),be||!fe&&Re},Pe=function(ae,se){if(Ie(ae))return ae.clone();var le=typeof se=="object"?se:{};return le.date=ae,le.args=arguments,new Me(le)},Le=Ee;Le.l=Oe,Le.i=Ie,Le.w=function(ae,se){return Pe(ae,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var Me=function(){function ae(le){this.$L=Oe(le.locale,null,!0),this.parse(le)}var se=ae.prototype;return se.parse=function(le){this.$d=function(fe){var be=fe.date,ve=fe.utc;if(be===null)return new Date(NaN);if(Le.u(be))return new Date;if(be instanceof Date)return new Date(be);if(typeof be=="string"&&!/Z$/i.test(be)){var xe=be.match(Se);if(xe){var he=xe[2]-1||0,me=(xe[7]||"0").substring(0,3);return ve?new Date(Date.UTC(xe[1],he,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,me)):new Date(xe[1],he,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,me)}}return new Date(be)}(le),this.$x=le.x||{},this.init()},se.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},se.$utils=function(){return Le},se.isValid=function(){return this.$d.toString()!==ye},se.isSame=function(le,fe){var be=Pe(le);return this.startOf(fe)<=be&&be<=this.endOf(fe)},se.isAfter=function(le,fe){return Pe(le)<this.startOf(fe)},se.isBefore=function(le,fe){return this.endOf(fe)<Pe(le)},se.$g=function(le,fe,be){return Le.u(le)?this[fe]:this.set(be,le)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(le,fe){var be=this,ve=!!Le.u(fe)||fe,xe=Le.p(le),he=function(He,Ue){var Ge=Le.w(be.$u?Date.UTC(be.$y,Ue,He):new Date(be.$y,Ue,He),be);return ve?Ge:Ge.endOf(ee)},me=function(He,Ue){return Le.w(be.toDate()[He].apply(be.toDate("s"),(ve?[0,0,0,0]:[23,59,59,999]).slice(Ue)),be)},de=this.$W,Ce=this.$M,Fe=this.$D,we="set"+(this.$u?"UTC":"");switch(xe){case ce:return ve?he(1,0):he(31,11);case ne:return ve?he(1,Ce):he(0,Ce+1);case te:var ke=this.$locale().weekStart||0,Ne=(de<ke?de+7:de)-ke;return he(ve?Fe-Ne:Fe+(6-Ne),Ce);case ee:case pe:return me(we+"Hours",0);case Z:return me(we+"Minutes",1);case X:return me(we+"Seconds",2);case Q:return me(we+"Milliseconds",3);default:return this.clone()}},se.endOf=function(le){return this.startOf(le,!1)},se.$set=function(le,fe){var be,ve=Le.p(le),xe="set"+(this.$u?"UTC":""),he=(be={},be[ee]=xe+"Date",be[pe]=xe+"Date",be[ne]=xe+"Month",be[ce]=xe+"FullYear",be[Z]=xe+"Hours",be[X]=xe+"Minutes",be[Q]=xe+"Seconds",be[J]=xe+"Milliseconds",be)[ve],me=ve===ee?this.$D+(fe-this.$W):fe;if(ve===ne||ve===ce){var de=this.clone().set(pe,1);de.$d[he](me),de.init(),this.$d=de.set(pe,Math.min(this.$D,de.daysInMonth())).$d}else he&&this.$d[he](me);return this.init(),this},se.set=function(le,fe){return this.clone().$set(le,fe)},se.get=function(le){return this[Le.p(le)]()},se.add=function(le,fe){var be,ve=this;le=Number(le);var xe=Le.p(fe),he=function(Ce){var Fe=Pe(ve);return Le.w(Fe.date(Fe.date()+Math.round(Ce*le)),ve)};if(xe===ne)return this.set(ne,this.$M+le);if(xe===ce)return this.set(ce,this.$y+le);if(xe===ee)return he(1);if(xe===te)return he(7);var me=(be={},be[X]=G,be[Z]=Y,be[Q]=U,be)[xe]||1,de=this.$d.getTime()+le*me;return Le.w(de,this)},se.subtract=function(le,fe){return this.add(-1*le,fe)},se.format=function(le){var fe=this,be=this.$locale();if(!this.isValid())return be.invalidDate||ye;var ve=le||"YYYY-MM-DDTHH:mm:ssZ",xe=Le.z(this),he=this.$H,me=this.$m,de=this.$M,Ce=be.weekdays,Fe=be.months,we=function(Ue,Ge,De,$e){return Ue&&(Ue[Ge]||Ue(fe,ve))||De[Ge].slice(0,$e)},ke=function(Ue){return Le.s(he%12||12,Ue,"0")},Ne=be.meridiem||function(Ue,Ge,De){var $e=Ue<12?"AM":"PM";return De?$e.toLowerCase():$e},He={YY:String(this.$y).slice(-2),YYYY:this.$y,M:de+1,MM:Le.s(de+1,2,"0"),MMM:we(be.monthsShort,de,Fe,3),MMMM:we(Fe,de),D:this.$D,DD:Le.s(this.$D,2,"0"),d:String(this.$W),dd:we(be.weekdaysMin,this.$W,Ce,2),ddd:we(be.weekdaysShort,this.$W,Ce,3),dddd:Ce[this.$W],H:String(he),HH:Le.s(he,2,"0"),h:ke(1),hh:ke(2),a:Ne(he,me,!0),A:Ne(he,me,!1),m:String(me),mm:Le.s(me,2,"0"),s:String(this.$s),ss:Le.s(this.$s,2,"0"),SSS:Le.s(this.$ms,3,"0"),Z:xe};return ve.replace(ge,function(Ue,Ge){return Ge||He[Ue]||xe.replace(":","")})},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(le,fe,be){var ve,xe=Le.p(fe),he=Pe(le),me=(he.utcOffset()-this.utcOffset())*G,de=this-he,Ce=Le.m(this,he);return Ce=(ve={},ve[ce]=Ce/12,ve[ne]=Ce,ve[oe]=Ce/3,ve[te]=(de-me)/6048e5,ve[ee]=(de-me)/864e5,ve[Z]=de/Y,ve[X]=de/G,ve[Q]=de/U,ve)[xe]||de,be?Ce:Le.a(Ce)},se.daysInMonth=function(){return this.endOf(ne).$D},se.$locale=function(){return Ae[this.$L]},se.locale=function(le,fe){if(!le)return this.$L;var be=this.clone(),ve=Oe(le,fe,!0);return ve&&(be.$L=ve),be},se.clone=function(){return Le.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},ae}(),ue=Me.prototype;return Pe.prototype=ue,[["$ms",J],["$s",Q],["$m",X],["$H",Z],["$W",ee],["$M",ne],["$y",ce],["$D",pe]].forEach(function(ae){ue[ae[1]]=function(se){return this.$g(se,ae[0],ae[1])}}),Pe.extend=function(ae,se){return ae.$i||(ae(se,Me,Pe),ae.$i=!0),Pe},Pe.locale=Oe,Pe.isDayjs=Ie,Pe.unix=function(ae){return Pe(1e3*ae)},Pe.en=Ae[Re],Pe.Ls=Ae,Pe.p={},Pe})})(dayjs_min);const dayjs=dayjs_min.exports;var duration={exports:{}};(function(R,E){(function(U,G){R.exports=G()})(commonjsGlobal,function(){var U,G,Y=1e3,J=6e4,Q=36e5,X=864e5,Z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee=31536e6,te=2592e6,ne=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,oe={years:ee,months:te,days:X,hours:Q,minutes:J,seconds:Y,milliseconds:1,weeks:6048e5},ce=function(Re){return Re instanceof Ee},pe=function(Re,Ae,Ie){return new Ee(Re,Ie,Ae.$l)},ye=function(Re){return G.p(Re)+"s"},Se=function(Re){return Re<0},ge=function(Re){return Se(Re)?Math.ceil(Re):Math.floor(Re)},_e=function(Re){return Math.abs(Re)},Te=function(Re,Ae){return Re?Se(Re)?{negative:!0,format:""+_e(Re)+Ae}:{negative:!1,format:""+Re+Ae}:{negative:!1,format:""}},Ee=function(){function Re(Ie,Oe,Pe){var Le=this;if(this.$d={},this.$l=Pe,Ie===void 0&&(this.$ms=0,this.parseFromMilliseconds()),Oe)return pe(Ie*oe[ye(Oe)],this);if(typeof Ie=="number")return this.$ms=Ie,this.parseFromMilliseconds(),this;if(typeof Ie=="object")return Object.keys(Ie).forEach(function(ae){Le.$d[ye(ae)]=Ie[ae]}),this.calMilliseconds(),this;if(typeof Ie=="string"){var Me=Ie.match(ne);if(Me){var ue=Me.slice(2).map(function(ae){return ae!=null?Number(ae):0});return this.$d.years=ue[0],this.$d.months=ue[1],this.$d.weeks=ue[2],this.$d.days=ue[3],this.$d.hours=ue[4],this.$d.minutes=ue[5],this.$d.seconds=ue[6],this.calMilliseconds(),this}}return this}var Ae=Re.prototype;return Ae.calMilliseconds=function(){var Ie=this;this.$ms=Object.keys(this.$d).reduce(function(Oe,Pe){return Oe+(Ie.$d[Pe]||0)*oe[Pe]},0)},Ae.parseFromMilliseconds=function(){var Ie=this.$ms;this.$d.years=ge(Ie/ee),Ie%=ee,this.$d.months=ge(Ie/te),Ie%=te,this.$d.days=ge(Ie/X),Ie%=X,this.$d.hours=ge(Ie/Q),Ie%=Q,this.$d.minutes=ge(Ie/J),Ie%=J,this.$d.seconds=ge(Ie/Y),Ie%=Y,this.$d.milliseconds=Ie},Ae.toISOString=function(){var Ie=Te(this.$d.years,"Y"),Oe=Te(this.$d.months,"M"),Pe=+this.$d.days||0;this.$d.weeks&&(Pe+=7*this.$d.weeks);var Le=Te(Pe,"D"),Me=Te(this.$d.hours,"H"),ue=Te(this.$d.minutes,"M"),ae=this.$d.seconds||0;this.$d.milliseconds&&(ae+=this.$d.milliseconds/1e3);var se=Te(ae,"S"),le=Ie.negative||Oe.negative||Le.negative||Me.negative||ue.negative||se.negative,fe=Me.format||ue.format||se.format?"T":"",be=(le?"-":"")+"P"+Ie.format+Oe.format+Le.format+fe+Me.format+ue.format+se.format;return be==="P"||be==="-P"?"P0D":be},Ae.toJSON=function(){return this.toISOString()},Ae.format=function(Ie){var Oe=Ie||"YYYY-MM-DDTHH:mm:ss",Pe={Y:this.$d.years,YY:G.s(this.$d.years,2,"0"),YYYY:G.s(this.$d.years,4,"0"),M:this.$d.months,MM:G.s(this.$d.months,2,"0"),D:this.$d.days,DD:G.s(this.$d.days,2,"0"),H:this.$d.hours,HH:G.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:G.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:G.s(this.$d.seconds,2,"0"),SSS:G.s(this.$d.milliseconds,3,"0")};return Oe.replace(Z,function(Le,Me){return Me||String(Pe[Le])})},Ae.as=function(Ie){return this.$ms/oe[ye(Ie)]},Ae.get=function(Ie){var Oe=this.$ms,Pe=ye(Ie);return Pe==="milliseconds"?Oe%=1e3:Oe=Pe==="weeks"?ge(Oe/oe[Pe]):this.$d[Pe],Oe===0?0:Oe},Ae.add=function(Ie,Oe,Pe){var Le;return Le=Oe?Ie*oe[ye(Oe)]:ce(Ie)?Ie.$ms:pe(Ie,this).$ms,pe(this.$ms+Le*(Pe?-1:1),this)},Ae.subtract=function(Ie,Oe){return this.add(Ie,Oe,!0)},Ae.locale=function(Ie){var Oe=this.clone();return Oe.$l=Ie,Oe},Ae.clone=function(){return pe(this.$ms,this)},Ae.humanize=function(Ie){return U().add(this.$ms,"ms").locale(this.$l).fromNow(!Ie)},Ae.milliseconds=function(){return this.get("milliseconds")},Ae.asMilliseconds=function(){return this.as("milliseconds")},Ae.seconds=function(){return this.get("seconds")},Ae.asSeconds=function(){return this.as("seconds")},Ae.minutes=function(){return this.get("minutes")},Ae.asMinutes=function(){return this.as("minutes")},Ae.hours=function(){return this.get("hours")},Ae.asHours=function(){return this.as("hours")},Ae.days=function(){return this.get("days")},Ae.asDays=function(){return this.as("days")},Ae.weeks=function(){return this.get("weeks")},Ae.asWeeks=function(){return this.as("weeks")},Ae.months=function(){return this.get("months")},Ae.asMonths=function(){return this.as("months")},Ae.years=function(){return this.get("years")},Ae.asYears=function(){return this.as("years")},Re}();return function(Re,Ae,Ie){U=Ie,G=Ie().$utils(),Ie.duration=function(Le,Me){var ue=Ie.locale();return pe(Le,{$l:ue},Me)},Ie.isDuration=ce;var Oe=Ae.prototype.add,Pe=Ae.prototype.subtract;Ae.prototype.add=function(Le,Me){return ce(Le)&&(Le=Le.asMilliseconds()),Oe.bind(this)(Le,Me)},Ae.prototype.subtract=function(Le,Me){return ce(Le)&&(Le=Le.asMilliseconds()),Pe.bind(this)(Le,Me)}}})})(duration);const durationPlugin=duration.exports;var utc={exports:{}};(function(R,E){(function(U,G){R.exports=G()})(commonjsGlobal,function(){var U="minute",G=/[+-]\d\d(?::?\d\d)?/g,Y=/([+-]|\d\d)/g;return function(J,Q,X){var Z=Q.prototype;X.utc=function(ye){var Se={date:ye,utc:!0,args:arguments};return new Q(Se)},Z.utc=function(ye){var Se=X(this.toDate(),{locale:this.$L,utc:!0});return ye?Se.add(this.utcOffset(),U):Se},Z.local=function(){return X(this.toDate(),{locale:this.$L,utc:!1})};var ee=Z.parse;Z.parse=function(ye){ye.utc&&(this.$u=!0),this.$utils().u(ye.$offset)||(this.$offset=ye.$offset),ee.call(this,ye)};var te=Z.init;Z.init=function(){if(this.$u){var ye=this.$d;this.$y=ye.getUTCFullYear(),this.$M=ye.getUTCMonth(),this.$D=ye.getUTCDate(),this.$W=ye.getUTCDay(),this.$H=ye.getUTCHours(),this.$m=ye.getUTCMinutes(),this.$s=ye.getUTCSeconds(),this.$ms=ye.getUTCMilliseconds()}else te.call(this)};var ne=Z.utcOffset;Z.utcOffset=function(ye,Se){var ge=this.$utils().u;if(ge(ye))return this.$u?0:ge(this.$offset)?ne.call(this):this.$offset;if(typeof ye=="string"&&(ye=function(Re){Re===void 0&&(Re="");var Ae=Re.match(G);if(!Ae)return null;var Ie=(""+Ae[0]).match(Y)||["-",0,0],Oe=Ie[0],Pe=60*+Ie[1]+ +Ie[2];return Pe===0?0:Oe==="+"?Pe:-Pe}(ye),ye===null))return this;var _e=Math.abs(ye)<=16?60*ye:ye,Te=this;if(Se)return Te.$offset=_e,Te.$u=ye===0,Te;if(ye!==0){var Ee=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(Te=this.local().add(_e+Ee,U)).$offset=_e,Te.$x.$localOffset=Ee}else Te=this.utc();return Te};var oe=Z.format;Z.format=function(ye){var Se=ye||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return oe.call(this,Se)},Z.valueOf=function(){var ye=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||new Date().getTimezoneOffset());return this.$d.valueOf()-6e4*ye},Z.isUTC=function(){return!!this.$u},Z.toISOString=function(){return this.toDate().toISOString()},Z.toString=function(){return this.toDate().toUTCString()};var ce=Z.toDate;Z.toDate=function(ye){return ye==="s"&&this.$offset?X(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():ce.call(this)};var pe=Z.diff;Z.diff=function(ye,Se,ge){if(ye&&this.$u===ye.$u)return pe.call(this,ye,Se,ge);var _e=this.local(),Te=X(ye).local();return pe.call(_e,Te,Se,ge)}}})})(utc);const utcPlugin=utc.exports;function makeMap(R,E){const U=Object.create(null),G=R.split(",");for(let Y=0;Y<G.length;Y++)U[G[Y]]=!0;return E?Y=>!!U[Y.toLowerCase()]:Y=>!!U[Y]}const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle(R){if(isArray$6(R)){const E={};for(let U=0;U<R.length;U++){const G=R[U],Y=isString$2(G)?parseStringStyle(G):normalizeStyle(G);if(Y)for(const J in Y)E[J]=Y[J]}return E}else{if(isString$2(R))return R;if(isObject$2(R))return R}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(R){const E={};return R.replace(styleCommentRE,"").split(listDelimiterRE).forEach(U=>{if(U){const G=U.split(propertyDelimiterRE);G.length>1&&(E[G[0].trim()]=G[1].trim())}}),E}function normalizeClass(R){let E="";if(isString$2(R))E=R;else if(isArray$6(R))for(let U=0;U<R.length;U++){const G=normalizeClass(R[U]);G&&(E+=G+" ")}else if(isObject$2(R))for(const U in R)R[U]&&(E+=U+" ");return E.trim()}function normalizeProps(R){if(!R)return null;let{class:E,style:U}=R;return E&&!isString$2(E)&&(R.class=normalizeClass(E)),U&&(R.style=normalizeStyle(U)),R}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(R){return!!R||R===""}function looseCompareArrays(R,E){if(R.length!==E.length)return!1;let U=!0;for(let G=0;U&&G<R.length;G++)U=looseEqual(R[G],E[G]);return U}function looseEqual(R,E){if(R===E)return!0;let U=isDate$2(R),G=isDate$2(E);if(U||G)return U&&G?R.getTime()===E.getTime():!1;if(U=isSymbol$1(R),G=isSymbol$1(E),U||G)return R===E;if(U=isArray$6(R),G=isArray$6(E),U||G)return U&&G?looseCompareArrays(R,E):!1;if(U=isObject$2(R),G=isObject$2(E),U||G){if(!U||!G)return!1;const Y=Object.keys(R).length,J=Object.keys(E).length;if(Y!==J)return!1;for(const Q in R){const X=R.hasOwnProperty(Q),Z=E.hasOwnProperty(Q);if(X&&!Z||!X&&Z||!looseEqual(R[Q],E[Q]))return!1}}return String(R)===String(E)}function looseIndexOf(R,E){return R.findIndex(U=>looseEqual(U,E))}const toDisplayString=R=>isString$2(R)?R:R==null?"":isArray$6(R)||isObject$2(R)&&(R.toString===objectToString$2||!isFunction$2(R.toString))?JSON.stringify(R,replacer,2):String(R),replacer=(R,E)=>E&&E.__v_isRef?replacer(R,E.value):isMap$1(E)?{[`Map(${E.size})`]:[...E.entries()].reduce((U,[G,Y])=>(U[`${G} =>`]=Y,U),{})}:isSet$1(E)?{[`Set(${E.size})`]:[...E.values()]}:isObject$2(E)&&!isArray$6(E)&&!isPlainObject$3(E)?String(E):E,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=R=>onRE.test(R),isModelListener=R=>R.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(R,E)=>{const U=R.indexOf(E);U>-1&&R.splice(U,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$2=(R,E)=>hasOwnProperty$3.call(R,E),isArray$6=Array.isArray,isMap$1=R=>toTypeString(R)==="[object Map]",isSet$1=R=>toTypeString(R)==="[object Set]",isDate$2=R=>toTypeString(R)==="[object Date]",isRegExp$4=R=>toTypeString(R)==="[object RegExp]",isFunction$2=R=>typeof R=="function",isString$2=R=>typeof R=="string",isSymbol$1=R=>typeof R=="symbol",isObject$2=R=>R!==null&&typeof R=="object",isPromise$1=R=>isObject$2(R)&&isFunction$2(R.then)&&isFunction$2(R.catch),objectToString$2=Object.prototype.toString,toTypeString=R=>objectToString$2.call(R),toRawType=R=>toTypeString(R).slice(8,-1),isPlainObject$3=R=>toTypeString(R)==="[object Object]",isIntegerKey=R=>isString$2(R)&&R!=="NaN"&&R[0]!=="-"&&""+parseInt(R,10)===R,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=R=>{const E=Object.create(null);return U=>E[U]||(E[U]=R(U))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(R=>R.replace(camelizeRE,(E,U)=>U?U.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(R=>R.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(R=>R.charAt(0).toUpperCase()+R.slice(1)),toHandlerKey=cacheStringFunction(R=>R?`on${capitalize(R)}`:""),hasChanged=(R,E)=>!Object.is(R,E),invokeArrayFns=(R,E)=>{for(let U=0;U<R.length;U++)R[U](E)},def=(R,E,U)=>{Object.defineProperty(R,E,{configurable:!0,enumerable:!1,value:U})},looseToNumber=R=>{const E=parseFloat(R);return isNaN(E)?R:E},toNumber=R=>{const E=isString$2(R)?Number(R):NaN;return isNaN(E)?R:E};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(E=!1){this.detached=E,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!E&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(E){if(this._active){const U=activeEffectScope;try{return activeEffectScope=this,E()}finally{activeEffectScope=U}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(E){if(this._active){let U,G;for(U=0,G=this.effects.length;U<G;U++)this.effects[U].stop();for(U=0,G=this.cleanups.length;U<G;U++)this.cleanups[U]();if(this.scopes)for(U=0,G=this.scopes.length;U<G;U++)this.scopes[U].stop(!0);if(!this.detached&&this.parent&&!E){const Y=this.parent.scopes.pop();Y&&Y!==this&&(this.parent.scopes[this.index]=Y,Y.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(R){return new EffectScope(R)}function recordEffectScope(R,E=activeEffectScope){E&&E.active&&E.effects.push(R)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(R){activeEffectScope&&activeEffectScope.cleanups.push(R)}const createDep=R=>{const E=new Set(R);return E.w=0,E.n=0,E},wasTracked=R=>(R.w&trackOpBit)>0,newTracked=R=>(R.n&trackOpBit)>0,initDepMarkers=({deps:R})=>{if(R.length)for(let E=0;E<R.length;E++)R[E].w|=trackOpBit},finalizeDepMarkers=R=>{const{deps:E}=R;if(E.length){let U=0;for(let G=0;G<E.length;G++){const Y=E[G];wasTracked(Y)&&!newTracked(Y)?Y.delete(R):E[U++]=Y,Y.w&=~trackOpBit,Y.n&=~trackOpBit}E.length=U}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(E,U=null,G){this.fn=E,this.scheduler=U,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,G)}run(){if(!this.active)return this.fn();let E=activeEffect,U=shouldTrack;for(;E;){if(E===this)return;E=E.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=U,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(R){const{deps:E}=R;if(E.length){for(let U=0;U<E.length;U++)E[U].delete(R);E.length=0}}function effect$3(R,E){R.effect&&(R=R.effect.fn);const U=new ReactiveEffect(R);E&&(extend$3(U,E),E.scope&&recordEffectScope(U,E.scope)),(!E||!E.lazy)&&U.run();const G=U.run.bind(U);return G.effect=U,G}function stop(R){R.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const R=trackStack.pop();shouldTrack=R===void 0?!0:R}function track(R,E,U){if(shouldTrack&&activeEffect){let G=targetMap.get(R);G||targetMap.set(R,G=new Map);let Y=G.get(U);Y||G.set(U,Y=createDep()),trackEffects(Y)}}function trackEffects(R,E){let U=!1;effectTrackDepth<=maxMarkerBits?newTracked(R)||(R.n|=trackOpBit,U=!wasTracked(R)):U=!R.has(activeEffect),U&&(R.add(activeEffect),activeEffect.deps.push(R))}function trigger$1(R,E,U,G,Y,J){const Q=targetMap.get(R);if(!Q)return;let X=[];if(E==="clear")X=[...Q.values()];else if(U==="length"&&isArray$6(R)){const Z=Number(G);Q.forEach((ee,te)=>{(te==="length"||te>=Z)&&X.push(ee)})}else switch(U!==void 0&&X.push(Q.get(U)),E){case"add":isArray$6(R)?isIntegerKey(U)&&X.push(Q.get("length")):(X.push(Q.get(ITERATE_KEY)),isMap$1(R)&&X.push(Q.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$6(R)||(X.push(Q.get(ITERATE_KEY)),isMap$1(R)&&X.push(Q.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(R)&&X.push(Q.get(ITERATE_KEY));break}if(X.length===1)X[0]&&triggerEffects(X[0]);else{const Z=[];for(const ee of X)ee&&Z.push(...ee);triggerEffects(createDep(Z))}}function triggerEffects(R,E){const U=isArray$6(R)?R:[...R];for(const G of U)G.computed&&triggerEffect(G);for(const G of U)G.computed||triggerEffect(G)}function triggerEffect(R,E){(R!==activeEffect||R.allowRecurse)&&(R.scheduler?R.scheduler():R.run())}function getDepFromReactive(R,E){var U;return(U=targetMap.get(R))===null||U===void 0?void 0:U.get(E)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(R=>R!=="arguments"&&R!=="caller").map(R=>Symbol[R]).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const R={};return["includes","indexOf","lastIndexOf"].forEach(E=>{R[E]=function(...U){const G=toRaw(this);for(let J=0,Q=this.length;J<Q;J++)track(G,"get",J+"");const Y=G[E](...U);return Y===-1||Y===!1?G[E](...U.map(toRaw)):Y}}),["push","pop","shift","unshift","splice"].forEach(E=>{R[E]=function(...U){pauseTracking();const G=toRaw(this)[E].apply(this,U);return resetTracking(),G}}),R}function hasOwnProperty$2(R){const E=toRaw(this);return track(E,"has",R),E.hasOwnProperty(R)}function createGetter(R=!1,E=!1){return function(G,Y,J){if(Y==="__v_isReactive")return!R;if(Y==="__v_isReadonly")return R;if(Y==="__v_isShallow")return E;if(Y==="__v_raw"&&J===(R?E?shallowReadonlyMap:readonlyMap:E?shallowReactiveMap:reactiveMap).get(G))return G;const Q=isArray$6(G);if(!R){if(Q&&hasOwn$2(arrayInstrumentations,Y))return Reflect.get(arrayInstrumentations,Y,J);if(Y==="hasOwnProperty")return hasOwnProperty$2}const X=Reflect.get(G,Y,J);return(isSymbol$1(Y)?builtInSymbols.has(Y):isNonTrackableKeys(Y))||(R||track(G,"get",Y),E)?X:isRef(X)?Q&&isIntegerKey(Y)?X:X.value:isObject$2(X)?R?readonly$1(X):reactive(X):X}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(R=!1){return function(U,G,Y,J){let Q=U[G];if(isReadonly(Q)&&isRef(Q)&&!isRef(Y))return!1;if(!R&&(!isShallow(Y)&&!isReadonly(Y)&&(Q=toRaw(Q),Y=toRaw(Y)),!isArray$6(U)&&isRef(Q)&&!isRef(Y)))return Q.value=Y,!0;const X=isArray$6(U)&&isIntegerKey(G)?Number(G)<U.length:hasOwn$2(U,G),Z=Reflect.set(U,G,Y,J);return U===toRaw(J)&&(X?hasChanged(Y,Q)&&trigger$1(U,"set",G,Y):trigger$1(U,"add",G,Y)),Z}}function deleteProperty(R,E){const U=hasOwn$2(R,E);R[E];const G=Reflect.deleteProperty(R,E);return G&&U&&trigger$1(R,"delete",E,void 0),G}function has$1$1(R,E){const U=Reflect.has(R,E);return(!isSymbol$1(E)||!builtInSymbols.has(E))&&track(R,"has",E),U}function ownKeys$1(R){return track(R,"iterate",isArray$6(R)?"length":ITERATE_KEY),Reflect.ownKeys(R)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1$1,ownKeys:ownKeys$1},readonlyHandlers={get:readonlyGet,set(R,E){return!0},deleteProperty(R,E){return!0}},shallowReactiveHandlers=extend$3({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$3({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=R=>R,getProto$1=R=>Reflect.getPrototypeOf(R);function get$2(R,E,U=!1,G=!1){R=R.__v_raw;const Y=toRaw(R),J=toRaw(E);U||(E!==J&&track(Y,"get",E),track(Y,"get",J));const{has:Q}=getProto$1(Y),X=G?toShallow:U?toReadonly:toReactive;if(Q.call(Y,E))return X(R.get(E));if(Q.call(Y,J))return X(R.get(J));R!==Y&&R.get(E)}function has$4(R,E=!1){const U=this.__v_raw,G=toRaw(U),Y=toRaw(R);return E||(R!==Y&&track(G,"has",R),track(G,"has",Y)),R===Y?U.has(R):U.has(R)||U.has(Y)}function size$2(R,E=!1){return R=R.__v_raw,!E&&track(toRaw(R),"iterate",ITERATE_KEY),Reflect.get(R,"size",R)}function add(R){R=toRaw(R);const E=toRaw(this);return getProto$1(E).has.call(E,R)||(E.add(R),trigger$1(E,"add",R,R)),this}function set$2(R,E){E=toRaw(E);const U=toRaw(this),{has:G,get:Y}=getProto$1(U);let J=G.call(U,R);J||(R=toRaw(R),J=G.call(U,R));const Q=Y.call(U,R);return U.set(R,E),J?hasChanged(E,Q)&&trigger$1(U,"set",R,E):trigger$1(U,"add",R,E),this}function deleteEntry(R){const E=toRaw(this),{has:U,get:G}=getProto$1(E);let Y=U.call(E,R);Y||(R=toRaw(R),Y=U.call(E,R)),G&&G.call(E,R);const J=E.delete(R);return Y&&trigger$1(E,"delete",R,void 0),J}function clear(){const R=toRaw(this),E=R.size!==0,U=R.clear();return E&&trigger$1(R,"clear",void 0,void 0),U}function createForEach(R,E){return function(G,Y){const J=this,Q=J.__v_raw,X=toRaw(Q),Z=E?toShallow:R?toReadonly:toReactive;return!R&&track(X,"iterate",ITERATE_KEY),Q.forEach((ee,te)=>G.call(Y,Z(ee),Z(te),J))}}function createIterableMethod(R,E,U){return function(...G){const Y=this.__v_raw,J=toRaw(Y),Q=isMap$1(J),X=R==="entries"||R===Symbol.iterator&&Q,Z=R==="keys"&&Q,ee=Y[R](...G),te=U?toShallow:E?toReadonly:toReactive;return!E&&track(J,"iterate",Z?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ne,done:oe}=ee.next();return oe?{value:ne,done:oe}:{value:X?[te(ne[0]),te(ne[1])]:te(ne),done:oe}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(R){return function(...E){return R==="delete"?!1:this}}function createInstrumentations(){const R={get(J){return get$2(this,J)},get size(){return size$2(this)},has:has$4,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},E={get(J){return get$2(this,J,!1,!0)},get size(){return size$2(this)},has:has$4,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},U={get(J){return get$2(this,J,!0)},get size(){return size$2(this,!0)},has(J){return has$4.call(this,J,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},G={get(J){return get$2(this,J,!0,!0)},get size(){return size$2(this,!0)},has(J){return has$4.call(this,J,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(J=>{R[J]=createIterableMethod(J,!1,!1),U[J]=createIterableMethod(J,!0,!1),E[J]=createIterableMethod(J,!1,!0),G[J]=createIterableMethod(J,!0,!0)}),[R,U,E,G]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(R,E){const U=E?R?shallowReadonlyInstrumentations:shallowInstrumentations:R?readonlyInstrumentations:mutableInstrumentations;return(G,Y,J)=>Y==="__v_isReactive"?!R:Y==="__v_isReadonly"?R:Y==="__v_raw"?G:Reflect.get(hasOwn$2(U,Y)&&Y in G?U:G,Y,J)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(R){switch(R){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(R){return R.__v_skip||!Object.isExtensible(R)?0:targetTypeMap(toRawType(R))}function reactive(R){return isReadonly(R)?R:createReactiveObject(R,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(R){return createReactiveObject(R,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$1(R){return createReactiveObject(R,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(R){return createReactiveObject(R,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(R,E,U,G,Y){if(!isObject$2(R)||R.__v_raw&&!(E&&R.__v_isReactive))return R;const J=Y.get(R);if(J)return J;const Q=getTargetType(R);if(Q===0)return R;const X=new Proxy(R,Q===2?G:U);return Y.set(R,X),X}function isReactive(R){return isReadonly(R)?isReactive(R.__v_raw):!!(R&&R.__v_isReactive)}function isReadonly(R){return!!(R&&R.__v_isReadonly)}function isShallow(R){return!!(R&&R.__v_isShallow)}function isProxy(R){return isReactive(R)||isReadonly(R)}function toRaw(R){const E=R&&R.__v_raw;return E?toRaw(E):R}function markRaw(R){return def(R,"__v_skip",!0),R}const toReactive=R=>isObject$2(R)?reactive(R):R,toReadonly=R=>isObject$2(R)?readonly$1(R):R;function trackRefValue(R){shouldTrack&&activeEffect&&(R=toRaw(R),trackEffects(R.dep||(R.dep=createDep())))}function triggerRefValue(R,E){R=toRaw(R);const U=R.dep;U&&triggerEffects(U)}function isRef(R){return!!(R&&R.__v_isRef===!0)}function ref(R){return createRef(R,!1)}function shallowRef(R){return createRef(R,!0)}function createRef(R,E){return isRef(R)?R:new RefImpl(R,E)}class RefImpl{constructor(E,U){this.__v_isShallow=U,this.dep=void 0,this.__v_isRef=!0,this._rawValue=U?E:toRaw(E),this._value=U?E:toReactive(E)}get value(){return trackRefValue(this),this._value}set value(E){const U=this.__v_isShallow||isShallow(E)||isReadonly(E);E=U?E:toRaw(E),hasChanged(E,this._rawValue)&&(this._rawValue=E,this._value=U?E:toReactive(E),triggerRefValue(this))}}function triggerRef(R){triggerRefValue(R)}function unref(R){return isRef(R)?R.value:R}const shallowUnwrapHandlers={get:(R,E,U)=>unref(Reflect.get(R,E,U)),set:(R,E,U,G)=>{const Y=R[E];return isRef(Y)&&!isRef(U)?(Y.value=U,!0):Reflect.set(R,E,U,G)}};function proxyRefs(R){return isReactive(R)?R:new Proxy(R,shallowUnwrapHandlers)}class CustomRefImpl{constructor(E){this.dep=void 0,this.__v_isRef=!0;const{get:U,set:G}=E(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=U,this._set=G}get value(){return this._get()}set value(E){this._set(E)}}function customRef(R){return new CustomRefImpl(R)}function toRefs(R){const E=isArray$6(R)?new Array(R.length):{};for(const U in R)E[U]=toRef(R,U);return E}class ObjectRefImpl{constructor(E,U,G){this._object=E,this._key=U,this._defaultValue=G,this.__v_isRef=!0}get value(){const E=this._object[this._key];return E===void 0?this._defaultValue:E}set value(E){this._object[this._key]=E}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function toRef(R,E,U){const G=R[E];return isRef(G)?G:new ObjectRefImpl(R,E,U)}var _a$1;class ComputedRefImpl{constructor(E,U,G,Y){this._setter=U,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(E,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!Y,this.__v_isReadonly=G}get value(){const E=toRaw(this);return trackRefValue(E),(E._dirty||!E._cacheable)&&(E._dirty=!1,E._value=E.effect.run()),E._value}set value(E){this._setter(E)}}_a$1="__v_isReadonly";function computed$1(R,E,U=!1){let G,Y;const J=isFunction$2(R);return J?(G=R,Y=NOOP):(G=R.get,Y=R.set),new ComputedRefImpl(G,Y,J||!Y,U)}function warn$2(R,...E){}function assertNumber(R,E){}function callWithErrorHandling(R,E,U,G){let Y;try{Y=G?R(...G):R()}catch(J){handleError(J,E,U)}return Y}function callWithAsyncErrorHandling(R,E,U,G){if(isFunction$2(R)){const J=callWithErrorHandling(R,E,U,G);return J&&isPromise$1(J)&&J.catch(Q=>{handleError(Q,E,U)}),J}const Y=[];for(let J=0;J<R.length;J++)Y.push(callWithAsyncErrorHandling(R[J],E,U,G));return Y}function handleError(R,E,U,G=!0){const Y=E?E.vnode:null;if(E){let J=E.parent;const Q=E.proxy,X=U;for(;J;){const ee=J.ec;if(ee){for(let te=0;te<ee.length;te++)if(ee[te](R,Q,X)===!1)return}J=J.parent}const Z=E.appContext.config.errorHandler;if(Z){callWithErrorHandling(Z,null,10,[R,Q,X]);return}}logError(R,U,Y,G)}function logError(R,E,U,G=!0){console.error(R)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(R){const E=currentFlushPromise||resolvedPromise;return R?E.then(this?R.bind(this):R):E}function findInsertionIndex(R){let E=flushIndex+1,U=queue$1.length;for(;E<U;){const G=E+U>>>1;getId(queue$1[G])<R?E=G+1:U=G}return E}function queueJob(R){(!queue$1.length||!queue$1.includes(R,isFlushing&&R.allowRecurse?flushIndex+1:flushIndex))&&(R.id==null?queue$1.push(R):queue$1.splice(findInsertionIndex(R.id),0,R),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(R){const E=queue$1.indexOf(R);E>flushIndex&&queue$1.splice(E,1)}function queuePostFlushCb(R){isArray$6(R)?pendingPostFlushCbs.push(...R):(!activePostFlushCbs||!activePostFlushCbs.includes(R,R.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(R),queueFlush()}function flushPreFlushCbs(R,E=isFlushing?flushIndex+1:0){for(;E<queue$1.length;E++){const U=queue$1[E];U&&U.pre&&(queue$1.splice(E,1),E--,U())}}function flushPostFlushCbs(R){if(pendingPostFlushCbs.length){const E=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...E);return}for(activePostFlushCbs=E,activePostFlushCbs.sort((U,G)=>getId(U)-getId(G)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=R=>R.id==null?1/0:R.id,comparator$1=(R,E)=>{const U=getId(R)-getId(E);if(U===0){if(R.pre&&!E.pre)return-1;if(E.pre&&!R.pre)return 1}return U};function flushJobs(R){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator$1);const E=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const U=queue$1[flushIndex];U&&U.active!==!1&&callWithErrorHandling(U,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools,buffer$2=[];function setDevtoolsHook(R,E){var U,G;devtools=R,devtools?(devtools.enabled=!0,buffer$2.forEach(({event:Y,args:J})=>devtools.emit(Y,...J)),buffer$2=[]):typeof window<"u"&&window.HTMLElement&&!(!((G=(U=window.navigator)===null||U===void 0?void 0:U.userAgent)===null||G===void 0)&&G.includes("jsdom"))?((E.__VUE_DEVTOOLS_HOOK_REPLAY__=E.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(J=>{setDevtoolsHook(J,E)}),setTimeout(()=>{devtools||(E.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$2=[])},3e3)):buffer$2=[]}function emit(R,E,...U){if(R.isUnmounted)return;const G=R.vnode.props||EMPTY_OBJ;let Y=U;const J=E.startsWith("update:"),Q=J&&E.slice(7);if(Q&&Q in G){const te=`${Q==="modelValue"?"model":Q}Modifiers`,{number:ne,trim:oe}=G[te]||EMPTY_OBJ;oe&&(Y=U.map(ce=>isString$2(ce)?ce.trim():ce)),ne&&(Y=U.map(looseToNumber))}let X,Z=G[X=toHandlerKey(E)]||G[X=toHandlerKey(camelize(E))];!Z&&J&&(Z=G[X=toHandlerKey(hyphenate(E))]),Z&&callWithAsyncErrorHandling(Z,R,6,Y);const ee=G[X+"Once"];if(ee){if(!R.emitted)R.emitted={};else if(R.emitted[X])return;R.emitted[X]=!0,callWithAsyncErrorHandling(ee,R,6,Y)}}function normalizeEmitsOptions(R,E,U=!1){const G=E.emitsCache,Y=G.get(R);if(Y!==void 0)return Y;const J=R.emits;let Q={},X=!1;if(!isFunction$2(R)){const Z=ee=>{const te=normalizeEmitsOptions(ee,E,!0);te&&(X=!0,extend$3(Q,te))};!U&&E.mixins.length&&E.mixins.forEach(Z),R.extends&&Z(R.extends),R.mixins&&R.mixins.forEach(Z)}return!J&&!X?(isObject$2(R)&&G.set(R,null),null):(isArray$6(J)?J.forEach(Z=>Q[Z]=null):extend$3(Q,J),isObject$2(R)&&G.set(R,Q),Q)}function isEmitListener(R,E){return!R||!isOn(E)?!1:(E=E.slice(2).replace(/Once$/,""),hasOwn$2(R,E[0].toLowerCase()+E.slice(1))||hasOwn$2(R,hyphenate(E))||hasOwn$2(R,E))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(R){const E=currentRenderingInstance;return currentRenderingInstance=R,currentScopeId=R&&R.type.__scopeId||null,E}function pushScopeId(R){currentScopeId=R}function popScopeId(){currentScopeId=null}const withScopeId=R=>withCtx;function withCtx(R,E=currentRenderingInstance,U){if(!E||R._n)return R;const G=(...Y)=>{G._d&&setBlockTracking(-1);const J=setCurrentRenderingInstance(E);let Q;try{Q=R(...Y)}finally{setCurrentRenderingInstance(J),G._d&&setBlockTracking(1)}return Q};return G._n=!0,G._c=!0,G._d=!0,G}function markAttrsAccessed(){}function renderComponentRoot(R){const{type:E,vnode:U,proxy:G,withProxy:Y,props:J,propsOptions:[Q],slots:X,attrs:Z,emit:ee,render:te,renderCache:ne,data:oe,setupState:ce,ctx:pe,inheritAttrs:ye}=R;let Se,ge;const _e=setCurrentRenderingInstance(R);try{if(U.shapeFlag&4){const Ee=Y||G;Se=normalizeVNode(te.call(Ee,Ee,ne,J,ce,oe,pe)),ge=Z}else{const Ee=E;Se=normalizeVNode(Ee.length>1?Ee(J,{attrs:Z,slots:X,emit:ee}):Ee(J,null)),ge=E.props?Z:getFunctionalFallthrough(Z)}}catch(Ee){blockStack.length=0,handleError(Ee,R,1),Se=createVNode(Comment)}let Te=Se;if(ge&&ye!==!1){const Ee=Object.keys(ge),{shapeFlag:Re}=Te;Ee.length&&Re&7&&(Q&&Ee.some(isModelListener)&&(ge=filterModelListeners(ge,Q)),Te=cloneVNode(Te,ge))}return U.dirs&&(Te=cloneVNode(Te),Te.dirs=Te.dirs?Te.dirs.concat(U.dirs):U.dirs),U.transition&&(Te.transition=U.transition),Se=Te,setCurrentRenderingInstance(_e),Se}function filterSingleRoot(R){let E;for(let U=0;U<R.length;U++){const G=R[U];if(isVNode(G)){if(G.type!==Comment||G.children==="v-if"){if(E)return;E=G}}else return}return E}const getFunctionalFallthrough=R=>{let E;for(const U in R)(U==="class"||U==="style"||isOn(U))&&((E||(E={}))[U]=R[U]);return E},filterModelListeners=(R,E)=>{const U={};for(const G in R)(!isModelListener(G)||!(G.slice(9)in E))&&(U[G]=R[G]);return U};function shouldUpdateComponent(R,E,U){const{props:G,children:Y,component:J}=R,{props:Q,children:X,patchFlag:Z}=E,ee=J.emitsOptions;if(E.dirs||E.transition)return!0;if(U&&Z>=0){if(Z&1024)return!0;if(Z&16)return G?hasPropsChanged(G,Q,ee):!!Q;if(Z&8){const te=E.dynamicProps;for(let ne=0;ne<te.length;ne++){const oe=te[ne];if(Q[oe]!==G[oe]&&!isEmitListener(ee,oe))return!0}}}else return(Y||X)&&(!X||!X.$stable)?!0:G===Q?!1:G?Q?hasPropsChanged(G,Q,ee):!0:!!Q;return!1}function hasPropsChanged(R,E,U){const G=Object.keys(E);if(G.length!==Object.keys(R).length)return!0;for(let Y=0;Y<G.length;Y++){const J=G[Y];if(E[J]!==R[J]&&!isEmitListener(U,J))return!0}return!1}function updateHOCHostEl({vnode:R,parent:E},U){for(;E&&E.subTree===R;)(R=E.vnode).el=U,E=E.parent}const isSuspense=R=>R.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(R,E,U,G,Y,J,Q,X,Z,ee){R==null?mountSuspense(E,U,G,Y,J,Q,X,Z,ee):patchSuspense(R,E,U,G,Y,Q,X,Z,ee)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(R,E){const U=R.props&&R.props[E];isFunction$2(U)&&U()}function mountSuspense(R,E,U,G,Y,J,Q,X,Z){const{p:ee,o:{createElement:te}}=Z,ne=te("div"),oe=R.suspense=createSuspenseBoundary(R,Y,G,E,ne,U,J,Q,X,Z);ee(null,oe.pendingBranch=R.ssContent,ne,null,G,oe,J,Q),oe.deps>0?(triggerEvent(R,"onPending"),triggerEvent(R,"onFallback"),ee(null,R.ssFallback,E,U,G,null,J,Q),setActiveBranch(oe,R.ssFallback)):oe.resolve()}function patchSuspense(R,E,U,G,Y,J,Q,X,{p:Z,um:ee,o:{createElement:te}}){const ne=E.suspense=R.suspense;ne.vnode=E,E.el=R.el;const oe=E.ssContent,ce=E.ssFallback,{activeBranch:pe,pendingBranch:ye,isInFallback:Se,isHydrating:ge}=ne;if(ye)ne.pendingBranch=oe,isSameVNodeType(oe,ye)?(Z(ye,oe,ne.hiddenContainer,null,Y,ne,J,Q,X),ne.deps<=0?ne.resolve():Se&&(Z(pe,ce,U,G,Y,null,J,Q,X),setActiveBranch(ne,ce))):(ne.pendingId++,ge?(ne.isHydrating=!1,ne.activeBranch=ye):ee(ye,Y,ne),ne.deps=0,ne.effects.length=0,ne.hiddenContainer=te("div"),Se?(Z(null,oe,ne.hiddenContainer,null,Y,ne,J,Q,X),ne.deps<=0?ne.resolve():(Z(pe,ce,U,G,Y,null,J,Q,X),setActiveBranch(ne,ce))):pe&&isSameVNodeType(oe,pe)?(Z(pe,oe,U,G,Y,ne,J,Q,X),ne.resolve(!0)):(Z(null,oe,ne.hiddenContainer,null,Y,ne,J,Q,X),ne.deps<=0&&ne.resolve()));else if(pe&&isSameVNodeType(oe,pe))Z(pe,oe,U,G,Y,ne,J,Q,X),setActiveBranch(ne,oe);else if(triggerEvent(E,"onPending"),ne.pendingBranch=oe,ne.pendingId++,Z(null,oe,ne.hiddenContainer,null,Y,ne,J,Q,X),ne.deps<=0)ne.resolve();else{const{timeout:_e,pendingId:Te}=ne;_e>0?setTimeout(()=>{ne.pendingId===Te&&ne.fallback(ce)},_e):_e===0&&ne.fallback(ce)}}function createSuspenseBoundary(R,E,U,G,Y,J,Q,X,Z,ee,te=!1){const{p:ne,m:oe,um:ce,n:pe,o:{parentNode:ye,remove:Se}}=ee,ge=R.props?toNumber(R.props.timeout):void 0,_e={vnode:R,parent:E,parentComponent:U,isSVG:Q,container:G,hiddenContainer:Y,anchor:J,deps:0,pendingId:0,timeout:typeof ge=="number"?ge:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:te,isUnmounted:!1,effects:[],resolve(Te=!1){const{vnode:Ee,activeBranch:Re,pendingBranch:Ae,pendingId:Ie,effects:Oe,parentComponent:Pe,container:Le}=_e;if(_e.isHydrating)_e.isHydrating=!1;else if(!Te){const ae=Re&&Ae.transition&&Ae.transition.mode==="out-in";ae&&(Re.transition.afterLeave=()=>{Ie===_e.pendingId&&oe(Ae,Le,se,0)});let{anchor:se}=_e;Re&&(se=pe(Re),ce(Re,Pe,_e,!0)),ae||oe(Ae,Le,se,0)}setActiveBranch(_e,Ae),_e.pendingBranch=null,_e.isInFallback=!1;let Me=_e.parent,ue=!1;for(;Me;){if(Me.pendingBranch){Me.effects.push(...Oe),ue=!0;break}Me=Me.parent}ue||queuePostFlushCb(Oe),_e.effects=[],triggerEvent(Ee,"onResolve")},fallback(Te){if(!_e.pendingBranch)return;const{vnode:Ee,activeBranch:Re,parentComponent:Ae,container:Ie,isSVG:Oe}=_e;triggerEvent(Ee,"onFallback");const Pe=pe(Re),Le=()=>{!_e.isInFallback||(ne(null,Te,Ie,Pe,Ae,null,Oe,X,Z),setActiveBranch(_e,Te))},Me=Te.transition&&Te.transition.mode==="out-in";Me&&(Re.transition.afterLeave=Le),_e.isInFallback=!0,ce(Re,Ae,null,!0),Me||Le()},move(Te,Ee,Re){_e.activeBranch&&oe(_e.activeBranch,Te,Ee,Re),_e.container=Te},next(){return _e.activeBranch&&pe(_e.activeBranch)},registerDep(Te,Ee){const Re=!!_e.pendingBranch;Re&&_e.deps++;const Ae=Te.vnode.el;Te.asyncDep.catch(Ie=>{handleError(Ie,Te,0)}).then(Ie=>{if(Te.isUnmounted||_e.isUnmounted||_e.pendingId!==Te.suspenseId)return;Te.asyncResolved=!0;const{vnode:Oe}=Te;handleSetupResult(Te,Ie,!1),Ae&&(Oe.el=Ae);const Pe=!Ae&&Te.subTree.el;Ee(Te,Oe,ye(Ae||Te.subTree.el),Ae?null:pe(Te.subTree),_e,Q,Z),Pe&&Se(Pe),updateHOCHostEl(Te,Oe.el),Re&&--_e.deps===0&&_e.resolve()})},unmount(Te,Ee){_e.isUnmounted=!0,_e.activeBranch&&ce(_e.activeBranch,U,Te,Ee),_e.pendingBranch&&ce(_e.pendingBranch,U,Te,Ee)}};return _e}function hydrateSuspense(R,E,U,G,Y,J,Q,X,Z){const ee=E.suspense=createSuspenseBoundary(E,G,U,R.parentNode,document.createElement("div"),null,Y,J,Q,X,!0),te=Z(R,ee.pendingBranch=E.ssContent,U,ee,J,Q);return ee.deps===0&&ee.resolve(),te}function normalizeSuspenseChildren(R){const{shapeFlag:E,children:U}=R,G=E&32;R.ssContent=normalizeSuspenseSlot(G?U.default:U),R.ssFallback=G?normalizeSuspenseSlot(U.fallback):createVNode(Comment)}function normalizeSuspenseSlot(R){let E;if(isFunction$2(R)){const U=isBlockTreeEnabled&&R._c;U&&(R._d=!1,openBlock()),R=R(),U&&(R._d=!0,E=currentBlock,closeBlock())}return isArray$6(R)&&(R=filterSingleRoot(R)),R=normalizeVNode(R),E&&!R.dynamicChildren&&(R.dynamicChildren=E.filter(U=>U!==R)),R}function queueEffectWithSuspense(R,E){E&&E.pendingBranch?isArray$6(R)?E.effects.push(...R):E.effects.push(R):queuePostFlushCb(R)}function setActiveBranch(R,E){R.activeBranch=E;const{vnode:U,parentComponent:G}=R,Y=U.el=E.el;G&&G.subTree===U&&(G.vnode.el=Y,updateHOCHostEl(G,Y))}function provide(R,E){if(currentInstance){let U=currentInstance.provides;const G=currentInstance.parent&&currentInstance.parent.provides;G===U&&(U=currentInstance.provides=Object.create(G)),U[R]=E}}function inject(R,E,U=!1){const G=currentInstance||currentRenderingInstance;if(G){const Y=G.parent==null?G.vnode.appContext&&G.vnode.appContext.provides:G.parent.provides;if(Y&&R in Y)return Y[R];if(arguments.length>1)return U&&isFunction$2(E)?E.call(G.proxy):E}}function watchEffect(R,E){return doWatch(R,null,E)}function watchPostEffect(R,E){return doWatch(R,null,{flush:"post"})}function watchSyncEffect(R,E){return doWatch(R,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(R,E,U){return doWatch(R,E,U)}function doWatch(R,E,{immediate:U,deep:G,flush:Y,onTrack:J,onTrigger:Q}=EMPTY_OBJ){const X=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let Z,ee=!1,te=!1;if(isRef(R)?(Z=()=>R.value,ee=isShallow(R)):isReactive(R)?(Z=()=>R,G=!0):isArray$6(R)?(te=!0,ee=R.some(Te=>isReactive(Te)||isShallow(Te)),Z=()=>R.map(Te=>{if(isRef(Te))return Te.value;if(isReactive(Te))return traverse(Te);if(isFunction$2(Te))return callWithErrorHandling(Te,X,2)})):isFunction$2(R)?E?Z=()=>callWithErrorHandling(R,X,2):Z=()=>{if(!(X&&X.isUnmounted))return ne&&ne(),callWithAsyncErrorHandling(R,X,3,[oe])}:Z=NOOP,E&&G){const Te=Z;Z=()=>traverse(Te())}let ne,oe=Te=>{ne=ge.onStop=()=>{callWithErrorHandling(Te,X,4)}},ce;if(isInSSRComponentSetup)if(oe=NOOP,E?U&&callWithAsyncErrorHandling(E,X,3,[Z(),te?[]:void 0,oe]):Z(),Y==="sync"){const Te=useSSRContext();ce=Te.__watcherHandles||(Te.__watcherHandles=[])}else return NOOP;let pe=te?new Array(R.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ye=()=>{if(!!ge.active)if(E){const Te=ge.run();(G||ee||(te?Te.some((Ee,Re)=>hasChanged(Ee,pe[Re])):hasChanged(Te,pe)))&&(ne&&ne(),callWithAsyncErrorHandling(E,X,3,[Te,pe===INITIAL_WATCHER_VALUE?void 0:te&&pe[0]===INITIAL_WATCHER_VALUE?[]:pe,oe]),pe=Te)}else ge.run()};ye.allowRecurse=!!E;let Se;Y==="sync"?Se=ye:Y==="post"?Se=()=>queuePostRenderEffect(ye,X&&X.suspense):(ye.pre=!0,X&&(ye.id=X.uid),Se=()=>queueJob(ye));const ge=new ReactiveEffect(Z,Se);E?U?ye():pe=ge.run():Y==="post"?queuePostRenderEffect(ge.run.bind(ge),X&&X.suspense):ge.run();const _e=()=>{ge.stop(),X&&X.scope&&remove$1(X.scope.effects,ge)};return ce&&ce.push(_e),_e}function instanceWatch(R,E,U){const G=this.proxy,Y=isString$2(R)?R.includes(".")?createPathGetter(G,R):()=>G[R]:R.bind(G,G);let J;isFunction$2(E)?J=E:(J=E.handler,U=E);const Q=currentInstance;setCurrentInstance(this);const X=doWatch(Y,J.bind(G),U);return Q?setCurrentInstance(Q):unsetCurrentInstance(),X}function createPathGetter(R,E){const U=E.split(".");return()=>{let G=R;for(let Y=0;Y<U.length&&G;Y++)G=G[U[Y]];return G}}function traverse(R,E){if(!isObject$2(R)||R.__v_skip||(E=E||new Set,E.has(R)))return R;if(E.add(R),isRef(R))traverse(R.value,E);else if(isArray$6(R))for(let U=0;U<R.length;U++)traverse(R[U],E);else if(isSet$1(R)||isMap$1(R))R.forEach(U=>{traverse(U,E)});else if(isPlainObject$3(R))for(const U in R)traverse(R[U],E);return R}function useTransitionState(){const R={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{R.isMounted=!0}),onBeforeUnmount(()=>{R.isUnmounting=!0}),R}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(R,{slots:E}){const U=getCurrentInstance(),G=useTransitionState();let Y;return()=>{const J=E.default&&getTransitionRawChildren(E.default(),!0);if(!J||!J.length)return;let Q=J[0];if(J.length>1){for(const ye of J)if(ye.type!==Comment){Q=ye;break}}const X=toRaw(R),{mode:Z}=X;if(G.isLeaving)return emptyPlaceholder(Q);const ee=getKeepAliveChild(Q);if(!ee)return emptyPlaceholder(Q);const te=resolveTransitionHooks(ee,X,G,U);setTransitionHooks(ee,te);const ne=U.subTree,oe=ne&&getKeepAliveChild(ne);let ce=!1;const{getTransitionKey:pe}=ee.type;if(pe){const ye=pe();Y===void 0?Y=ye:ye!==Y&&(Y=ye,ce=!0)}if(oe&&oe.type!==Comment&&(!isSameVNodeType(ee,oe)||ce)){const ye=resolveTransitionHooks(oe,X,G,U);if(setTransitionHooks(oe,ye),Z==="out-in")return G.isLeaving=!0,ye.afterLeave=()=>{G.isLeaving=!1,U.update.active!==!1&&U.update()},emptyPlaceholder(Q);Z==="in-out"&&ee.type!==Comment&&(ye.delayLeave=(Se,ge,_e)=>{const Te=getLeavingNodesForType(G,oe);Te[String(oe.key)]=oe,Se._leaveCb=()=>{ge(),Se._leaveCb=void 0,delete te.delayedLeave},te.delayedLeave=_e})}return Q}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(R,E){const{leavingVNodes:U}=R;let G=U.get(E.type);return G||(G=Object.create(null),U.set(E.type,G)),G}function resolveTransitionHooks(R,E,U,G){const{appear:Y,mode:J,persisted:Q=!1,onBeforeEnter:X,onEnter:Z,onAfterEnter:ee,onEnterCancelled:te,onBeforeLeave:ne,onLeave:oe,onAfterLeave:ce,onLeaveCancelled:pe,onBeforeAppear:ye,onAppear:Se,onAfterAppear:ge,onAppearCancelled:_e}=E,Te=String(R.key),Ee=getLeavingNodesForType(U,R),Re=(Oe,Pe)=>{Oe&&callWithAsyncErrorHandling(Oe,G,9,Pe)},Ae=(Oe,Pe)=>{const Le=Pe[1];Re(Oe,Pe),isArray$6(Oe)?Oe.every(Me=>Me.length<=1)&&Le():Oe.length<=1&&Le()},Ie={mode:J,persisted:Q,beforeEnter(Oe){let Pe=X;if(!U.isMounted)if(Y)Pe=ye||X;else return;Oe._leaveCb&&Oe._leaveCb(!0);const Le=Ee[Te];Le&&isSameVNodeType(R,Le)&&Le.el._leaveCb&&Le.el._leaveCb(),Re(Pe,[Oe])},enter(Oe){let Pe=Z,Le=ee,Me=te;if(!U.isMounted)if(Y)Pe=Se||Z,Le=ge||ee,Me=_e||te;else return;let ue=!1;const ae=Oe._enterCb=se=>{ue||(ue=!0,se?Re(Me,[Oe]):Re(Le,[Oe]),Ie.delayedLeave&&Ie.delayedLeave(),Oe._enterCb=void 0)};Pe?Ae(Pe,[Oe,ae]):ae()},leave(Oe,Pe){const Le=String(R.key);if(Oe._enterCb&&Oe._enterCb(!0),U.isUnmounting)return Pe();Re(ne,[Oe]);let Me=!1;const ue=Oe._leaveCb=ae=>{Me||(Me=!0,Pe(),ae?Re(pe,[Oe]):Re(ce,[Oe]),Oe._leaveCb=void 0,Ee[Le]===R&&delete Ee[Le])};Ee[Le]=R,oe?Ae(oe,[Oe,ue]):ue()},clone(Oe){return resolveTransitionHooks(Oe,E,U,G)}};return Ie}function emptyPlaceholder(R){if(isKeepAlive(R))return R=cloneVNode(R),R.children=null,R}function getKeepAliveChild(R){return isKeepAlive(R)?R.children?R.children[0]:void 0:R}function setTransitionHooks(R,E){R.shapeFlag&6&&R.component?setTransitionHooks(R.component.subTree,E):R.shapeFlag&128?(R.ssContent.transition=E.clone(R.ssContent),R.ssFallback.transition=E.clone(R.ssFallback)):R.transition=E}function getTransitionRawChildren(R,E=!1,U){let G=[],Y=0;for(let J=0;J<R.length;J++){let Q=R[J];const X=U==null?Q.key:String(U)+String(Q.key!=null?Q.key:J);Q.type===Fragment$2?(Q.patchFlag&128&&Y++,G=G.concat(getTransitionRawChildren(Q.children,E,X))):(E||Q.type!==Comment)&&G.push(X!=null?cloneVNode(Q,{key:X}):Q)}if(Y>1)for(let J=0;J<G.length;J++)G[J].patchFlag=-2;return G}function defineComponent(R){return isFunction$2(R)?{setup:R,name:R.name}:R}const isAsyncWrapper=R=>!!R.type.__asyncLoader;function defineAsyncComponent(R){isFunction$2(R)&&(R={loader:R});const{loader:E,loadingComponent:U,errorComponent:G,delay:Y=200,timeout:J,suspensible:Q=!0,onError:X}=R;let Z=null,ee,te=0;const ne=()=>(te++,Z=null,oe()),oe=()=>{let ce;return Z||(ce=Z=E().catch(pe=>{if(pe=pe instanceof Error?pe:new Error(String(pe)),X)return new Promise((ye,Se)=>{X(pe,()=>ye(ne()),()=>Se(pe),te+1)});throw pe}).then(pe=>ce!==Z&&Z?Z:(pe&&(pe.__esModule||pe[Symbol.toStringTag]==="Module")&&(pe=pe.default),ee=pe,pe)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:oe,get __asyncResolved(){return ee},setup(){const ce=currentInstance;if(ee)return()=>createInnerComp(ee,ce);const pe=_e=>{Z=null,handleError(_e,ce,13,!G)};if(Q&&ce.suspense||isInSSRComponentSetup)return oe().then(_e=>()=>createInnerComp(_e,ce)).catch(_e=>(pe(_e),()=>G?createVNode(G,{error:_e}):null));const ye=ref(!1),Se=ref(),ge=ref(!!Y);return Y&&setTimeout(()=>{ge.value=!1},Y),J!=null&&setTimeout(()=>{if(!ye.value&&!Se.value){const _e=new Error(`Async component timed out after ${J}ms.`);pe(_e),Se.value=_e}},J),oe().then(()=>{ye.value=!0,ce.parent&&isKeepAlive(ce.parent.vnode)&&queueJob(ce.parent.update)}).catch(_e=>{pe(_e),Se.value=_e}),()=>{if(ye.value&&ee)return createInnerComp(ee,ce);if(Se.value&&G)return createVNode(G,{error:Se.value});if(U&&!ge.value)return createVNode(U)}}})}function createInnerComp(R,E){const{ref:U,props:G,children:Y,ce:J}=E.vnode,Q=createVNode(R,G,Y);return Q.ref=U,Q.ce=J,delete E.vnode.ce,Q}const isKeepAlive=R=>R.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(R,{slots:E}){const U=getCurrentInstance(),G=U.ctx;if(!G.renderer)return()=>{const _e=E.default&&E.default();return _e&&_e.length===1?_e[0]:_e};const Y=new Map,J=new Set;let Q=null;const X=U.suspense,{renderer:{p:Z,m:ee,um:te,o:{createElement:ne}}}=G,oe=ne("div");G.activate=(_e,Te,Ee,Re,Ae)=>{const Ie=_e.component;ee(_e,Te,Ee,0,X),Z(Ie.vnode,_e,Te,Ee,Ie,X,Re,_e.slotScopeIds,Ae),queuePostRenderEffect(()=>{Ie.isDeactivated=!1,Ie.a&&invokeArrayFns(Ie.a);const Oe=_e.props&&_e.props.onVnodeMounted;Oe&&invokeVNodeHook(Oe,Ie.parent,_e)},X)},G.deactivate=_e=>{const Te=_e.component;ee(_e,oe,null,1,X),queuePostRenderEffect(()=>{Te.da&&invokeArrayFns(Te.da);const Ee=_e.props&&_e.props.onVnodeUnmounted;Ee&&invokeVNodeHook(Ee,Te.parent,_e),Te.isDeactivated=!0},X)};function ce(_e){resetShapeFlag(_e),te(_e,U,X,!0)}function pe(_e){Y.forEach((Te,Ee)=>{const Re=getComponentName(Te.type);Re&&(!_e||!_e(Re))&&ye(Ee)})}function ye(_e){const Te=Y.get(_e);!Q||!isSameVNodeType(Te,Q)?ce(Te):Q&&resetShapeFlag(Q),Y.delete(_e),J.delete(_e)}watch(()=>[R.include,R.exclude],([_e,Te])=>{_e&&pe(Ee=>matches$3(_e,Ee)),Te&&pe(Ee=>!matches$3(Te,Ee))},{flush:"post",deep:!0});let Se=null;const ge=()=>{Se!=null&&Y.set(Se,getInnerChild(U.subTree))};return onMounted(ge),onUpdated(ge),onBeforeUnmount(()=>{Y.forEach(_e=>{const{subTree:Te,suspense:Ee}=U,Re=getInnerChild(Te);if(_e.type===Re.type&&_e.key===Re.key){resetShapeFlag(Re);const Ae=Re.component.da;Ae&&queuePostRenderEffect(Ae,Ee);return}ce(_e)})}),()=>{if(Se=null,!E.default)return null;const _e=E.default(),Te=_e[0];if(_e.length>1)return Q=null,_e;if(!isVNode(Te)||!(Te.shapeFlag&4)&&!(Te.shapeFlag&128))return Q=null,Te;let Ee=getInnerChild(Te);const Re=Ee.type,Ae=getComponentName(isAsyncWrapper(Ee)?Ee.type.__asyncResolved||{}:Re),{include:Ie,exclude:Oe,max:Pe}=R;if(Ie&&(!Ae||!matches$3(Ie,Ae))||Oe&&Ae&&matches$3(Oe,Ae))return Q=Ee,Te;const Le=Ee.key==null?Re:Ee.key,Me=Y.get(Le);return Ee.el&&(Ee=cloneVNode(Ee),Te.shapeFlag&128&&(Te.ssContent=Ee)),Se=Le,Me?(Ee.el=Me.el,Ee.component=Me.component,Ee.transition&&setTransitionHooks(Ee,Ee.transition),Ee.shapeFlag|=512,J.delete(Le),J.add(Le)):(J.add(Le),Pe&&J.size>parseInt(Pe,10)&&ye(J.values().next().value)),Ee.shapeFlag|=256,Q=Ee,isSuspense(Te.type)?Te:Ee}}},KeepAlive=KeepAliveImpl;function matches$3(R,E){return isArray$6(R)?R.some(U=>matches$3(U,E)):isString$2(R)?R.split(",").includes(E):isRegExp$4(R)?R.test(E):!1}function onActivated(R,E){registerKeepAliveHook(R,"a",E)}function onDeactivated(R,E){registerKeepAliveHook(R,"da",E)}function registerKeepAliveHook(R,E,U=currentInstance){const G=R.__wdc||(R.__wdc=()=>{let Y=U;for(;Y;){if(Y.isDeactivated)return;Y=Y.parent}return R()});if(injectHook(E,G,U),U){let Y=U.parent;for(;Y&&Y.parent;)isKeepAlive(Y.parent.vnode)&&injectToKeepAliveRoot(G,E,U,Y),Y=Y.parent}}function injectToKeepAliveRoot(R,E,U,G){const Y=injectHook(E,R,G,!0);onUnmounted(()=>{remove$1(G[E],Y)},U)}function resetShapeFlag(R){R.shapeFlag&=-257,R.shapeFlag&=-513}function getInnerChild(R){return R.shapeFlag&128?R.ssContent:R}function injectHook(R,E,U=currentInstance,G=!1){if(U){const Y=U[R]||(U[R]=[]),J=E.__weh||(E.__weh=(...Q)=>{if(U.isUnmounted)return;pauseTracking(),setCurrentInstance(U);const X=callWithAsyncErrorHandling(E,U,R,Q);return unsetCurrentInstance(),resetTracking(),X});return G?Y.unshift(J):Y.push(J),J}}const createHook=R=>(E,U=currentInstance)=>(!isInSSRComponentSetup||R==="sp")&&injectHook(R,(...G)=>E(...G),U),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(R,E=currentInstance){injectHook("ec",R,E)}function withDirectives(R,E){const U=currentRenderingInstance;if(U===null)return R;const G=getExposeProxy(U)||U.proxy,Y=R.dirs||(R.dirs=[]);for(let J=0;J<E.length;J++){let[Q,X,Z,ee=EMPTY_OBJ]=E[J];Q&&(isFunction$2(Q)&&(Q={mounted:Q,updated:Q}),Q.deep&&traverse(X),Y.push({dir:Q,instance:G,value:X,oldValue:void 0,arg:Z,modifiers:ee}))}return R}function invokeDirectiveHook(R,E,U,G){const Y=R.dirs,J=E&&E.dirs;for(let Q=0;Q<Y.length;Q++){const X=Y[Q];J&&(X.oldValue=J[Q].value);let Z=X.dir[G];Z&&(pauseTracking(),callWithAsyncErrorHandling(Z,U,8,[R.el,X,R,E]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(R,E){return resolveAsset(COMPONENTS,R,!0,E)||R}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(R){return isString$2(R)?resolveAsset(COMPONENTS,R,!1)||R:R||NULL_DYNAMIC_COMPONENT}function resolveDirective(R){return resolveAsset(DIRECTIVES,R)}function resolveAsset(R,E,U=!0,G=!1){const Y=currentRenderingInstance||currentInstance;if(Y){const J=Y.type;if(R===COMPONENTS){const X=getComponentName(J,!1);if(X&&(X===E||X===camelize(E)||X===capitalize(camelize(E))))return J}const Q=resolve$1(Y[R]||J[R],E)||resolve$1(Y.appContext[R],E);return!Q&&G?J:Q}}function resolve$1(R,E){return R&&(R[E]||R[camelize(E)]||R[capitalize(camelize(E))])}function renderList(R,E,U,G){let Y;const J=U&&U[G];if(isArray$6(R)||isString$2(R)){Y=new Array(R.length);for(let Q=0,X=R.length;Q<X;Q++)Y[Q]=E(R[Q],Q,void 0,J&&J[Q])}else if(typeof R=="number"){Y=new Array(R);for(let Q=0;Q<R;Q++)Y[Q]=E(Q+1,Q,void 0,J&&J[Q])}else if(isObject$2(R))if(R[Symbol.iterator])Y=Array.from(R,(Q,X)=>E(Q,X,void 0,J&&J[X]));else{const Q=Object.keys(R);Y=new Array(Q.length);for(let X=0,Z=Q.length;X<Z;X++){const ee=Q[X];Y[X]=E(R[ee],ee,X,J&&J[X])}}else Y=[];return U&&(U[G]=Y),Y}function createSlots(R,E){for(let U=0;U<E.length;U++){const G=E[U];if(isArray$6(G))for(let Y=0;Y<G.length;Y++)R[G[Y].name]=G[Y].fn;else G&&(R[G.name]=G.key?(...Y)=>{const J=G.fn(...Y);return J&&(J.key=G.key),J}:G.fn)}return R}function renderSlot(R,E,U={},G,Y){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return E!=="default"&&(U.name=E),createVNode("slot",U,G&&G());let J=R[E];J&&J._c&&(J._d=!1),openBlock();const Q=J&&ensureValidVNode(J(U)),X=createBlock$1(Fragment$2,{key:U.key||Q&&Q.key||`_${E}`},Q||(G?G():[]),Q&&R._===1?64:-2);return!Y&&X.scopeId&&(X.slotScopeIds=[X.scopeId+"-s"]),J&&J._c&&(J._d=!0),X}function ensureValidVNode(R){return R.some(E=>isVNode(E)?!(E.type===Comment||E.type===Fragment$2&&!ensureValidVNode(E.children)):!0)?R:null}function toHandlers(R,E){const U={};for(const G in R)U[E&&/[A-Z]/.test(G)?`on:${G}`:toHandlerKey(G)]=R[G];return U}const getPublicInstance=R=>R?isStatefulComponent(R)?getExposeProxy(R)||R.proxy:getPublicInstance(R.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:R=>R,$el:R=>R.vnode.el,$data:R=>R.data,$props:R=>R.props,$attrs:R=>R.attrs,$slots:R=>R.slots,$refs:R=>R.refs,$parent:R=>getPublicInstance(R.parent),$root:R=>getPublicInstance(R.root),$emit:R=>R.emit,$options:R=>resolveMergedOptions(R),$forceUpdate:R=>R.f||(R.f=()=>queueJob(R.update)),$nextTick:R=>R.n||(R.n=nextTick.bind(R.proxy)),$watch:R=>instanceWatch.bind(R)}),hasSetupBinding=(R,E)=>R!==EMPTY_OBJ&&!R.__isScriptSetup&&hasOwn$2(R,E),PublicInstanceProxyHandlers={get({_:R},E){const{ctx:U,setupState:G,data:Y,props:J,accessCache:Q,type:X,appContext:Z}=R;let ee;if(E[0]!=="$"){const ce=Q[E];if(ce!==void 0)switch(ce){case 1:return G[E];case 2:return Y[E];case 4:return U[E];case 3:return J[E]}else{if(hasSetupBinding(G,E))return Q[E]=1,G[E];if(Y!==EMPTY_OBJ&&hasOwn$2(Y,E))return Q[E]=2,Y[E];if((ee=R.propsOptions[0])&&hasOwn$2(ee,E))return Q[E]=3,J[E];if(U!==EMPTY_OBJ&&hasOwn$2(U,E))return Q[E]=4,U[E];shouldCacheAccess&&(Q[E]=0)}}const te=publicPropertiesMap[E];let ne,oe;if(te)return E==="$attrs"&&track(R,"get",E),te(R);if((ne=X.__cssModules)&&(ne=ne[E]))return ne;if(U!==EMPTY_OBJ&&hasOwn$2(U,E))return Q[E]=4,U[E];if(oe=Z.config.globalProperties,hasOwn$2(oe,E))return oe[E]},set({_:R},E,U){const{data:G,setupState:Y,ctx:J}=R;return hasSetupBinding(Y,E)?(Y[E]=U,!0):G!==EMPTY_OBJ&&hasOwn$2(G,E)?(G[E]=U,!0):hasOwn$2(R.props,E)||E[0]==="$"&&E.slice(1)in R?!1:(J[E]=U,!0)},has({_:{data:R,setupState:E,accessCache:U,ctx:G,appContext:Y,propsOptions:J}},Q){let X;return!!U[Q]||R!==EMPTY_OBJ&&hasOwn$2(R,Q)||hasSetupBinding(E,Q)||(X=J[0])&&hasOwn$2(X,Q)||hasOwn$2(G,Q)||hasOwn$2(publicPropertiesMap,Q)||hasOwn$2(Y.config.globalProperties,Q)},defineProperty(R,E,U){return U.get!=null?R._.accessCache[E]=0:hasOwn$2(U,"value")&&this.set(R,E,U.value,null),Reflect.defineProperty(R,E,U)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$3({},PublicInstanceProxyHandlers,{get(R,E){if(E!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(R,E,R)},has(R,E){return E[0]!=="_"&&!isGloballyWhitelisted(E)}});let shouldCacheAccess=!0;function applyOptions(R){const E=resolveMergedOptions(R),U=R.proxy,G=R.ctx;shouldCacheAccess=!1,E.beforeCreate&&callHook$1(E.beforeCreate,R,"bc");const{data:Y,computed:J,methods:Q,watch:X,provide:Z,inject:ee,created:te,beforeMount:ne,mounted:oe,beforeUpdate:ce,updated:pe,activated:ye,deactivated:Se,beforeDestroy:ge,beforeUnmount:_e,destroyed:Te,unmounted:Ee,render:Re,renderTracked:Ae,renderTriggered:Ie,errorCaptured:Oe,serverPrefetch:Pe,expose:Le,inheritAttrs:Me,components:ue,directives:ae,filters:se}=E;if(ee&&resolveInjections(ee,G,null,R.appContext.config.unwrapInjectedRef),Q)for(const be in Q){const ve=Q[be];isFunction$2(ve)&&(G[be]=ve.bind(U))}if(Y){const be=Y.call(U,U);isObject$2(be)&&(R.data=reactive(be))}if(shouldCacheAccess=!0,J)for(const be in J){const ve=J[be],xe=isFunction$2(ve)?ve.bind(U,U):isFunction$2(ve.get)?ve.get.bind(U,U):NOOP,he=!isFunction$2(ve)&&isFunction$2(ve.set)?ve.set.bind(U):NOOP,me=computed({get:xe,set:he});Object.defineProperty(G,be,{enumerable:!0,configurable:!0,get:()=>me.value,set:de=>me.value=de})}if(X)for(const be in X)createWatcher(X[be],G,U,be);if(Z){const be=isFunction$2(Z)?Z.call(U):Z;Reflect.ownKeys(be).forEach(ve=>{provide(ve,be[ve])})}te&&callHook$1(te,R,"c");function fe(be,ve){isArray$6(ve)?ve.forEach(xe=>be(xe.bind(U))):ve&&be(ve.bind(U))}if(fe(onBeforeMount,ne),fe(onMounted,oe),fe(onBeforeUpdate,ce),fe(onUpdated,pe),fe(onActivated,ye),fe(onDeactivated,Se),fe(onErrorCaptured,Oe),fe(onRenderTracked,Ae),fe(onRenderTriggered,Ie),fe(onBeforeUnmount,_e),fe(onUnmounted,Ee),fe(onServerPrefetch,Pe),isArray$6(Le))if(Le.length){const be=R.exposed||(R.exposed={});Le.forEach(ve=>{Object.defineProperty(be,ve,{get:()=>U[ve],set:xe=>U[ve]=xe})})}else R.exposed||(R.exposed={});Re&&R.render===NOOP&&(R.render=Re),Me!=null&&(R.inheritAttrs=Me),ue&&(R.components=ue),ae&&(R.directives=ae)}function resolveInjections(R,E,U=NOOP,G=!1){isArray$6(R)&&(R=normalizeInject(R));for(const Y in R){const J=R[Y];let Q;isObject$2(J)?"default"in J?Q=inject(J.from||Y,J.default,!0):Q=inject(J.from||Y):Q=inject(J),isRef(Q)&&G?Object.defineProperty(E,Y,{enumerable:!0,configurable:!0,get:()=>Q.value,set:X=>Q.value=X}):E[Y]=Q}}function callHook$1(R,E,U){callWithAsyncErrorHandling(isArray$6(R)?R.map(G=>G.bind(E.proxy)):R.bind(E.proxy),E,U)}function createWatcher(R,E,U,G){const Y=G.includes(".")?createPathGetter(U,G):()=>U[G];if(isString$2(R)){const J=E[R];isFunction$2(J)&&watch(Y,J)}else if(isFunction$2(R))watch(Y,R.bind(U));else if(isObject$2(R))if(isArray$6(R))R.forEach(J=>createWatcher(J,E,U,G));else{const J=isFunction$2(R.handler)?R.handler.bind(U):E[R.handler];isFunction$2(J)&&watch(Y,J,R)}}function resolveMergedOptions(R){const E=R.type,{mixins:U,extends:G}=E,{mixins:Y,optionsCache:J,config:{optionMergeStrategies:Q}}=R.appContext,X=J.get(E);let Z;return X?Z=X:!Y.length&&!U&&!G?Z=E:(Z={},Y.length&&Y.forEach(ee=>mergeOptions$1(Z,ee,Q,!0)),mergeOptions$1(Z,E,Q)),isObject$2(E)&&J.set(E,Z),Z}function mergeOptions$1(R,E,U,G=!1){const{mixins:Y,extends:J}=E;J&&mergeOptions$1(R,J,U,!0),Y&&Y.forEach(Q=>mergeOptions$1(R,Q,U,!0));for(const Q in E)if(!(G&&Q==="expose")){const X=internalOptionMergeStrats[Q]||U&&U[Q];R[Q]=X?X(R[Q],E[Q]):E[Q]}return R}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(R,E){return E?R?function(){return extend$3(isFunction$2(R)?R.call(this,this):R,isFunction$2(E)?E.call(this,this):E)}:E:R}function mergeInject(R,E){return mergeObjectOptions(normalizeInject(R),normalizeInject(E))}function normalizeInject(R){if(isArray$6(R)){const E={};for(let U=0;U<R.length;U++)E[R[U]]=R[U];return E}return R}function mergeAsArray(R,E){return R?[...new Set([].concat(R,E))]:E}function mergeObjectOptions(R,E){return R?extend$3(extend$3(Object.create(null),R),E):E}function mergeWatchOptions(R,E){if(!R)return E;if(!E)return R;const U=extend$3(Object.create(null),R);for(const G in E)U[G]=mergeAsArray(R[G],E[G]);return U}function initProps(R,E,U,G=!1){const Y={},J={};def(J,InternalObjectKey,1),R.propsDefaults=Object.create(null),setFullProps(R,E,Y,J);for(const Q in R.propsOptions[0])Q in Y||(Y[Q]=void 0);U?R.props=G?Y:shallowReactive(Y):R.type.props?R.props=Y:R.props=J,R.attrs=J}function updateProps(R,E,U,G){const{props:Y,attrs:J,vnode:{patchFlag:Q}}=R,X=toRaw(Y),[Z]=R.propsOptions;let ee=!1;if((G||Q>0)&&!(Q&16)){if(Q&8){const te=R.vnode.dynamicProps;for(let ne=0;ne<te.length;ne++){let oe=te[ne];if(isEmitListener(R.emitsOptions,oe))continue;const ce=E[oe];if(Z)if(hasOwn$2(J,oe))ce!==J[oe]&&(J[oe]=ce,ee=!0);else{const pe=camelize(oe);Y[pe]=resolvePropValue(Z,X,pe,ce,R,!1)}else ce!==J[oe]&&(J[oe]=ce,ee=!0)}}}else{setFullProps(R,E,Y,J)&&(ee=!0);let te;for(const ne in X)(!E||!hasOwn$2(E,ne)&&((te=hyphenate(ne))===ne||!hasOwn$2(E,te)))&&(Z?U&&(U[ne]!==void 0||U[te]!==void 0)&&(Y[ne]=resolvePropValue(Z,X,ne,void 0,R,!0)):delete Y[ne]);if(J!==X)for(const ne in J)(!E||!hasOwn$2(E,ne)&&!0)&&(delete J[ne],ee=!0)}ee&&trigger$1(R,"set","$attrs")}function setFullProps(R,E,U,G){const[Y,J]=R.propsOptions;let Q=!1,X;if(E)for(let Z in E){if(isReservedProp(Z))continue;const ee=E[Z];let te;Y&&hasOwn$2(Y,te=camelize(Z))?!J||!J.includes(te)?U[te]=ee:(X||(X={}))[te]=ee:isEmitListener(R.emitsOptions,Z)||(!(Z in G)||ee!==G[Z])&&(G[Z]=ee,Q=!0)}if(J){const Z=toRaw(U),ee=X||EMPTY_OBJ;for(let te=0;te<J.length;te++){const ne=J[te];U[ne]=resolvePropValue(Y,Z,ne,ee[ne],R,!hasOwn$2(ee,ne))}}return Q}function resolvePropValue(R,E,U,G,Y,J){const Q=R[U];if(Q!=null){const X=hasOwn$2(Q,"default");if(X&&G===void 0){const Z=Q.default;if(Q.type!==Function&&isFunction$2(Z)){const{propsDefaults:ee}=Y;U in ee?G=ee[U]:(setCurrentInstance(Y),G=ee[U]=Z.call(null,E),unsetCurrentInstance())}else G=Z}Q[0]&&(J&&!X?G=!1:Q[1]&&(G===""||G===hyphenate(U))&&(G=!0))}return G}function normalizePropsOptions(R,E,U=!1){const G=E.propsCache,Y=G.get(R);if(Y)return Y;const J=R.props,Q={},X=[];let Z=!1;if(!isFunction$2(R)){const te=ne=>{Z=!0;const[oe,ce]=normalizePropsOptions(ne,E,!0);extend$3(Q,oe),ce&&X.push(...ce)};!U&&E.mixins.length&&E.mixins.forEach(te),R.extends&&te(R.extends),R.mixins&&R.mixins.forEach(te)}if(!J&&!Z)return isObject$2(R)&&G.set(R,EMPTY_ARR),EMPTY_ARR;if(isArray$6(J))for(let te=0;te<J.length;te++){const ne=camelize(J[te]);validatePropName(ne)&&(Q[ne]=EMPTY_OBJ)}else if(J)for(const te in J){const ne=camelize(te);if(validatePropName(ne)){const oe=J[te],ce=Q[ne]=isArray$6(oe)||isFunction$2(oe)?{type:oe}:Object.assign({},oe);if(ce){const pe=getTypeIndex(Boolean,ce.type),ye=getTypeIndex(String,ce.type);ce[0]=pe>-1,ce[1]=ye<0||pe<ye,(pe>-1||hasOwn$2(ce,"default"))&&X.push(ne)}}}const ee=[Q,X];return isObject$2(R)&&G.set(R,ee),ee}function validatePropName(R){return R[0]!=="$"}function getType$1(R){const E=R&&R.toString().match(/^\s*(function|class) (\w+)/);return E?E[2]:R===null?"null":""}function isSameType(R,E){return getType$1(R)===getType$1(E)}function getTypeIndex(R,E){return isArray$6(E)?E.findIndex(U=>isSameType(U,R)):isFunction$2(E)&&isSameType(E,R)?0:-1}const isInternalKey=R=>R[0]==="_"||R==="$stable",normalizeSlotValue=R=>isArray$6(R)?R.map(normalizeVNode):[normalizeVNode(R)],normalizeSlot=(R,E,U)=>{if(E._n)return E;const G=withCtx((...Y)=>normalizeSlotValue(E(...Y)),U);return G._c=!1,G},normalizeObjectSlots=(R,E,U)=>{const G=R._ctx;for(const Y in R){if(isInternalKey(Y))continue;const J=R[Y];if(isFunction$2(J))E[Y]=normalizeSlot(Y,J,G);else if(J!=null){const Q=normalizeSlotValue(J);E[Y]=()=>Q}}},normalizeVNodeSlots=(R,E)=>{const U=normalizeSlotValue(E);R.slots.default=()=>U},initSlots=(R,E)=>{if(R.vnode.shapeFlag&32){const U=E._;U?(R.slots=toRaw(E),def(E,"_",U)):normalizeObjectSlots(E,R.slots={})}else R.slots={},E&&normalizeVNodeSlots(R,E);def(R.slots,InternalObjectKey,1)},updateSlots=(R,E,U)=>{const{vnode:G,slots:Y}=R;let J=!0,Q=EMPTY_OBJ;if(G.shapeFlag&32){const X=E._;X?U&&X===1?J=!1:(extend$3(Y,E),!U&&X===1&&delete Y._):(J=!E.$stable,normalizeObjectSlots(E,Y)),Q=E}else E&&(normalizeVNodeSlots(R,E),Q={default:1});if(J)for(const X in Y)!isInternalKey(X)&&!(X in Q)&&delete Y[X]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(R,E){return function(G,Y=null){isFunction$2(G)||(G=Object.assign({},G)),Y!=null&&!isObject$2(Y)&&(Y=null);const J=createAppContext(),Q=new Set;let X=!1;const Z=J.app={_uid:uid$1++,_component:G,_props:Y,_container:null,_context:J,_instance:null,version:version$4,get config(){return J.config},set config(ee){},use(ee,...te){return Q.has(ee)||(ee&&isFunction$2(ee.install)?(Q.add(ee),ee.install(Z,...te)):isFunction$2(ee)&&(Q.add(ee),ee(Z,...te))),Z},mixin(ee){return J.mixins.includes(ee)||J.mixins.push(ee),Z},component(ee,te){return te?(J.components[ee]=te,Z):J.components[ee]},directive(ee,te){return te?(J.directives[ee]=te,Z):J.directives[ee]},mount(ee,te,ne){if(!X){const oe=createVNode(G,Y);return oe.appContext=J,te&&E?E(oe,ee):R(oe,ee,ne),X=!0,Z._container=ee,ee.__vue_app__=Z,getExposeProxy(oe.component)||oe.component.proxy}},unmount(){X&&(R(null,Z._container),delete Z._container.__vue_app__)},provide(ee,te){return J.provides[ee]=te,Z}};return Z}}function setRef(R,E,U,G,Y=!1){if(isArray$6(R)){R.forEach((oe,ce)=>setRef(oe,E&&(isArray$6(E)?E[ce]:E),U,G,Y));return}if(isAsyncWrapper(G)&&!Y)return;const J=G.shapeFlag&4?getExposeProxy(G.component)||G.component.proxy:G.el,Q=Y?null:J,{i:X,r:Z}=R,ee=E&&E.r,te=X.refs===EMPTY_OBJ?X.refs={}:X.refs,ne=X.setupState;if(ee!=null&&ee!==Z&&(isString$2(ee)?(te[ee]=null,hasOwn$2(ne,ee)&&(ne[ee]=null)):isRef(ee)&&(ee.value=null)),isFunction$2(Z))callWithErrorHandling(Z,X,12,[Q,te]);else{const oe=isString$2(Z),ce=isRef(Z);if(oe||ce){const pe=()=>{if(R.f){const ye=oe?hasOwn$2(ne,Z)?ne[Z]:te[Z]:Z.value;Y?isArray$6(ye)&&remove$1(ye,J):isArray$6(ye)?ye.includes(J)||ye.push(J):oe?(te[Z]=[J],hasOwn$2(ne,Z)&&(ne[Z]=te[Z])):(Z.value=[J],R.k&&(te[R.k]=Z.value))}else oe?(te[Z]=Q,hasOwn$2(ne,Z)&&(ne[Z]=Q)):ce&&(Z.value=Q,R.k&&(te[R.k]=Q))};Q?(pe.id=-1,queuePostRenderEffect(pe,U)):pe()}}}let hasMismatch=!1;const isSVGContainer=R=>/svg/.test(R.namespaceURI)&&R.tagName!=="foreignObject",isComment=R=>R.nodeType===8;function createHydrationFunctions(R){const{mt:E,p:U,o:{patchProp:G,createText:Y,nextSibling:J,parentNode:Q,remove:X,insert:Z,createComment:ee}}=R,te=(ge,_e)=>{if(!_e.hasChildNodes()){U(null,ge,_e),flushPostFlushCbs(),_e._vnode=ge;return}hasMismatch=!1,ne(_e.firstChild,ge,null,null,null),flushPostFlushCbs(),_e._vnode=ge,hasMismatch&&console.error("Hydration completed but contains mismatches.")},ne=(ge,_e,Te,Ee,Re,Ae=!1)=>{const Ie=isComment(ge)&&ge.data==="[",Oe=()=>ye(ge,_e,Te,Ee,Re,Ie),{type:Pe,ref:Le,shapeFlag:Me,patchFlag:ue}=_e;let ae=ge.nodeType;_e.el=ge,ue===-2&&(Ae=!1,_e.dynamicChildren=null);let se=null;switch(Pe){case Text$1:ae!==3?_e.children===""?(Z(_e.el=Y(""),Q(ge),ge),se=ge):se=Oe():(ge.data!==_e.children&&(hasMismatch=!0,ge.data=_e.children),se=J(ge));break;case Comment:ae!==8||Ie?se=Oe():se=J(ge);break;case Static:if(Ie&&(ge=J(ge),ae=ge.nodeType),ae===1||ae===3){se=ge;const le=!_e.children.length;for(let fe=0;fe<_e.staticCount;fe++)le&&(_e.children+=se.nodeType===1?se.outerHTML:se.data),fe===_e.staticCount-1&&(_e.anchor=se),se=J(se);return Ie?J(se):se}else Oe();break;case Fragment$2:Ie?se=pe(ge,_e,Te,Ee,Re,Ae):se=Oe();break;default:if(Me&1)ae!==1||_e.type.toLowerCase()!==ge.tagName.toLowerCase()?se=Oe():se=oe(ge,_e,Te,Ee,Re,Ae);else if(Me&6){_e.slotScopeIds=Re;const le=Q(ge);if(E(_e,le,null,Te,Ee,isSVGContainer(le),Ae),se=Ie?Se(ge):J(ge),se&&isComment(se)&&se.data==="teleport end"&&(se=J(se)),isAsyncWrapper(_e)){let fe;Ie?(fe=createVNode(Fragment$2),fe.anchor=se?se.previousSibling:le.lastChild):fe=ge.nodeType===3?createTextVNode(""):createVNode("div"),fe.el=ge,_e.component.subTree=fe}}else Me&64?ae!==8?se=Oe():se=_e.type.hydrate(ge,_e,Te,Ee,Re,Ae,R,ce):Me&128&&(se=_e.type.hydrate(ge,_e,Te,Ee,isSVGContainer(Q(ge)),Re,Ae,R,ne))}return Le!=null&&setRef(Le,null,Ee,_e),se},oe=(ge,_e,Te,Ee,Re,Ae)=>{Ae=Ae||!!_e.dynamicChildren;const{type:Ie,props:Oe,patchFlag:Pe,shapeFlag:Le,dirs:Me}=_e,ue=Ie==="input"&&Me||Ie==="option";if(ue||Pe!==-1){if(Me&&invokeDirectiveHook(_e,null,Te,"created"),Oe)if(ue||!Ae||Pe&48)for(const se in Oe)(ue&&se.endsWith("value")||isOn(se)&&!isReservedProp(se))&&G(ge,se,null,Oe[se],!1,void 0,Te);else Oe.onClick&&G(ge,"onClick",null,Oe.onClick,!1,void 0,Te);let ae;if((ae=Oe&&Oe.onVnodeBeforeMount)&&invokeVNodeHook(ae,Te,_e),Me&&invokeDirectiveHook(_e,null,Te,"beforeMount"),((ae=Oe&&Oe.onVnodeMounted)||Me)&&queueEffectWithSuspense(()=>{ae&&invokeVNodeHook(ae,Te,_e),Me&&invokeDirectiveHook(_e,null,Te,"mounted")},Ee),Le&16&&!(Oe&&(Oe.innerHTML||Oe.textContent))){let se=ce(ge.firstChild,_e,ge,Te,Ee,Re,Ae);for(;se;){hasMismatch=!0;const le=se;se=se.nextSibling,X(le)}}else Le&8&&ge.textContent!==_e.children&&(hasMismatch=!0,ge.textContent=_e.children)}return ge.nextSibling},ce=(ge,_e,Te,Ee,Re,Ae,Ie)=>{Ie=Ie||!!_e.dynamicChildren;const Oe=_e.children,Pe=Oe.length;for(let Le=0;Le<Pe;Le++){const Me=Ie?Oe[Le]:Oe[Le]=normalizeVNode(Oe[Le]);if(ge)ge=ne(ge,Me,Ee,Re,Ae,Ie);else{if(Me.type===Text$1&&!Me.children)continue;hasMismatch=!0,U(null,Me,Te,null,Ee,Re,isSVGContainer(Te),Ae)}}return ge},pe=(ge,_e,Te,Ee,Re,Ae)=>{const{slotScopeIds:Ie}=_e;Ie&&(Re=Re?Re.concat(Ie):Ie);const Oe=Q(ge),Pe=ce(J(ge),_e,Oe,Te,Ee,Re,Ae);return Pe&&isComment(Pe)&&Pe.data==="]"?J(_e.anchor=Pe):(hasMismatch=!0,Z(_e.anchor=ee("]"),Oe,Pe),Pe)},ye=(ge,_e,Te,Ee,Re,Ae)=>{if(hasMismatch=!0,_e.el=null,Ae){const Pe=Se(ge);for(;;){const Le=J(ge);if(Le&&Le!==Pe)X(Le);else break}}const Ie=J(ge),Oe=Q(ge);return X(ge),U(null,_e,Oe,Ie,Te,Ee,isSVGContainer(Oe),Re),Ie},Se=ge=>{let _e=0;for(;ge;)if(ge=J(ge),ge&&isComment(ge)&&(ge.data==="["&&_e++,ge.data==="]")){if(_e===0)return J(ge);_e--}return ge};return[te,ne]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(R){return baseCreateRenderer(R)}function createHydrationRenderer(R){return baseCreateRenderer(R,createHydrationFunctions)}function baseCreateRenderer(R,E){const U=getGlobalThis();U.__VUE__=!0;const{insert:G,remove:Y,patchProp:J,createElement:Q,createText:X,createComment:Z,setText:ee,setElementText:te,parentNode:ne,nextSibling:oe,setScopeId:ce=NOOP,insertStaticContent:pe}=R,ye=($e,Be,je,ze=null,We=null,Ke=null,Ye=!1,Je=null,Qe=!!Be.dynamicChildren)=>{if($e===Be)return;$e&&!isSameVNodeType($e,Be)&&(ze=Ne($e),de($e,We,Ke,!0),$e=null),Be.patchFlag===-2&&(Qe=!1,Be.dynamicChildren=null);const{type:qe,ref:rt,shapeFlag:tt}=Be;switch(qe){case Text$1:Se($e,Be,je,ze);break;case Comment:ge($e,Be,je,ze);break;case Static:$e==null&&_e(Be,je,ze,Ye);break;case Fragment$2:ue($e,Be,je,ze,We,Ke,Ye,Je,Qe);break;default:tt&1?Re($e,Be,je,ze,We,Ke,Ye,Je,Qe):tt&6?ae($e,Be,je,ze,We,Ke,Ye,Je,Qe):(tt&64||tt&128)&&qe.process($e,Be,je,ze,We,Ke,Ye,Je,Qe,Ue)}rt!=null&&We&&setRef(rt,$e&&$e.ref,Ke,Be||$e,!Be)},Se=($e,Be,je,ze)=>{if($e==null)G(Be.el=X(Be.children),je,ze);else{const We=Be.el=$e.el;Be.children!==$e.children&&ee(We,Be.children)}},ge=($e,Be,je,ze)=>{$e==null?G(Be.el=Z(Be.children||""),je,ze):Be.el=$e.el},_e=($e,Be,je,ze)=>{[$e.el,$e.anchor]=pe($e.children,Be,je,ze,$e.el,$e.anchor)},Te=({el:$e,anchor:Be},je,ze)=>{let We;for(;$e&&$e!==Be;)We=oe($e),G($e,je,ze),$e=We;G(Be,je,ze)},Ee=({el:$e,anchor:Be})=>{let je;for(;$e&&$e!==Be;)je=oe($e),Y($e),$e=je;Y(Be)},Re=($e,Be,je,ze,We,Ke,Ye,Je,Qe)=>{Ye=Ye||Be.type==="svg",$e==null?Ae(Be,je,ze,We,Ke,Ye,Je,Qe):Pe($e,Be,We,Ke,Ye,Je,Qe)},Ae=($e,Be,je,ze,We,Ke,Ye,Je)=>{let Qe,qe;const{type:rt,props:tt,shapeFlag:Xe,transition:it,dirs:st}=$e;if(Qe=$e.el=Q($e.type,Ke,tt&&tt.is,tt),Xe&8?te(Qe,$e.children):Xe&16&&Oe($e.children,Qe,null,ze,We,Ke&&rt!=="foreignObject",Ye,Je),st&&invokeDirectiveHook($e,null,ze,"created"),Ie(Qe,$e,$e.scopeId,Ye,ze),tt){for(const ot in tt)ot!=="value"&&!isReservedProp(ot)&&J(Qe,ot,null,tt[ot],Ke,$e.children,ze,We,ke);"value"in tt&&J(Qe,"value",null,tt.value),(qe=tt.onVnodeBeforeMount)&&invokeVNodeHook(qe,ze,$e)}st&&invokeDirectiveHook($e,null,ze,"beforeMount");const nt=(!We||We&&!We.pendingBranch)&&it&&!it.persisted;nt&&it.beforeEnter(Qe),G(Qe,Be,je),((qe=tt&&tt.onVnodeMounted)||nt||st)&&queuePostRenderEffect(()=>{qe&&invokeVNodeHook(qe,ze,$e),nt&&it.enter(Qe),st&&invokeDirectiveHook($e,null,ze,"mounted")},We)},Ie=($e,Be,je,ze,We)=>{if(je&&ce($e,je),ze)for(let Ke=0;Ke<ze.length;Ke++)ce($e,ze[Ke]);if(We){let Ke=We.subTree;if(Be===Ke){const Ye=We.vnode;Ie($e,Ye,Ye.scopeId,Ye.slotScopeIds,We.parent)}}},Oe=($e,Be,je,ze,We,Ke,Ye,Je,Qe=0)=>{for(let qe=Qe;qe<$e.length;qe++){const rt=$e[qe]=Je?cloneIfMounted($e[qe]):normalizeVNode($e[qe]);ye(null,rt,Be,je,ze,We,Ke,Ye,Je)}},Pe=($e,Be,je,ze,We,Ke,Ye)=>{const Je=Be.el=$e.el;let{patchFlag:Qe,dynamicChildren:qe,dirs:rt}=Be;Qe|=$e.patchFlag&16;const tt=$e.props||EMPTY_OBJ,Xe=Be.props||EMPTY_OBJ;let it;je&&toggleRecurse(je,!1),(it=Xe.onVnodeBeforeUpdate)&&invokeVNodeHook(it,je,Be,$e),rt&&invokeDirectiveHook(Be,$e,je,"beforeUpdate"),je&&toggleRecurse(je,!0);const st=We&&Be.type!=="foreignObject";if(qe?Le($e.dynamicChildren,qe,Je,je,ze,st,Ke):Ye||ve($e,Be,Je,null,je,ze,st,Ke,!1),Qe>0){if(Qe&16)Me(Je,Be,tt,Xe,je,ze,We);else if(Qe&2&&tt.class!==Xe.class&&J(Je,"class",null,Xe.class,We),Qe&4&&J(Je,"style",tt.style,Xe.style,We),Qe&8){const nt=Be.dynamicProps;for(let ot=0;ot<nt.length;ot++){const pt=nt[ot],dt=tt[pt],Et=Xe[pt];(Et!==dt||pt==="value")&&J(Je,pt,dt,Et,We,$e.children,je,ze,ke)}}Qe&1&&$e.children!==Be.children&&te(Je,Be.children)}else!Ye&&qe==null&&Me(Je,Be,tt,Xe,je,ze,We);((it=Xe.onVnodeUpdated)||rt)&&queuePostRenderEffect(()=>{it&&invokeVNodeHook(it,je,Be,$e),rt&&invokeDirectiveHook(Be,$e,je,"updated")},ze)},Le=($e,Be,je,ze,We,Ke,Ye)=>{for(let Je=0;Je<Be.length;Je++){const Qe=$e[Je],qe=Be[Je],rt=Qe.el&&(Qe.type===Fragment$2||!isSameVNodeType(Qe,qe)||Qe.shapeFlag&70)?ne(Qe.el):je;ye(Qe,qe,rt,null,ze,We,Ke,Ye,!0)}},Me=($e,Be,je,ze,We,Ke,Ye)=>{if(je!==ze){if(je!==EMPTY_OBJ)for(const Je in je)!isReservedProp(Je)&&!(Je in ze)&&J($e,Je,je[Je],null,Ye,Be.children,We,Ke,ke);for(const Je in ze){if(isReservedProp(Je))continue;const Qe=ze[Je],qe=je[Je];Qe!==qe&&Je!=="value"&&J($e,Je,qe,Qe,Ye,Be.children,We,Ke,ke)}"value"in ze&&J($e,"value",je.value,ze.value)}},ue=($e,Be,je,ze,We,Ke,Ye,Je,Qe)=>{const qe=Be.el=$e?$e.el:X(""),rt=Be.anchor=$e?$e.anchor:X("");let{patchFlag:tt,dynamicChildren:Xe,slotScopeIds:it}=Be;it&&(Je=Je?Je.concat(it):it),$e==null?(G(qe,je,ze),G(rt,je,ze),Oe(Be.children,je,rt,We,Ke,Ye,Je,Qe)):tt>0&&tt&64&&Xe&&$e.dynamicChildren?(Le($e.dynamicChildren,Xe,je,We,Ke,Ye,Je),(Be.key!=null||We&&Be===We.subTree)&&traverseStaticChildren($e,Be,!0)):ve($e,Be,je,rt,We,Ke,Ye,Je,Qe)},ae=($e,Be,je,ze,We,Ke,Ye,Je,Qe)=>{Be.slotScopeIds=Je,$e==null?Be.shapeFlag&512?We.ctx.activate(Be,je,ze,Ye,Qe):se(Be,je,ze,We,Ke,Ye,Qe):le($e,Be,Qe)},se=($e,Be,je,ze,We,Ke,Ye)=>{const Je=$e.component=createComponentInstance($e,ze,We);if(isKeepAlive($e)&&(Je.ctx.renderer=Ue),setupComponent(Je),Je.asyncDep){if(We&&We.registerDep(Je,fe),!$e.el){const Qe=Je.subTree=createVNode(Comment);ge(null,Qe,Be,je)}return}fe(Je,$e,Be,je,We,Ke,Ye)},le=($e,Be,je)=>{const ze=Be.component=$e.component;if(shouldUpdateComponent($e,Be,je))if(ze.asyncDep&&!ze.asyncResolved){be(ze,Be,je);return}else ze.next=Be,invalidateJob(ze.update),ze.update();else Be.el=$e.el,ze.vnode=Be},fe=($e,Be,je,ze,We,Ke,Ye)=>{const Je=()=>{if($e.isMounted){let{next:rt,bu:tt,u:Xe,parent:it,vnode:st}=$e,nt=rt,ot;toggleRecurse($e,!1),rt?(rt.el=st.el,be($e,rt,Ye)):rt=st,tt&&invokeArrayFns(tt),(ot=rt.props&&rt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ot,it,rt,st),toggleRecurse($e,!0);const pt=renderComponentRoot($e),dt=$e.subTree;$e.subTree=pt,ye(dt,pt,ne(dt.el),Ne(dt),$e,We,Ke),rt.el=pt.el,nt===null&&updateHOCHostEl($e,pt.el),Xe&&queuePostRenderEffect(Xe,We),(ot=rt.props&&rt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ot,it,rt,st),We)}else{let rt;const{el:tt,props:Xe}=Be,{bm:it,m:st,parent:nt}=$e,ot=isAsyncWrapper(Be);if(toggleRecurse($e,!1),it&&invokeArrayFns(it),!ot&&(rt=Xe&&Xe.onVnodeBeforeMount)&&invokeVNodeHook(rt,nt,Be),toggleRecurse($e,!0),tt&&De){const pt=()=>{$e.subTree=renderComponentRoot($e),De(tt,$e.subTree,$e,We,null)};ot?Be.type.__asyncLoader().then(()=>!$e.isUnmounted&&pt()):pt()}else{const pt=$e.subTree=renderComponentRoot($e);ye(null,pt,je,ze,$e,We,Ke),Be.el=pt.el}if(st&&queuePostRenderEffect(st,We),!ot&&(rt=Xe&&Xe.onVnodeMounted)){const pt=Be;queuePostRenderEffect(()=>invokeVNodeHook(rt,nt,pt),We)}(Be.shapeFlag&256||nt&&isAsyncWrapper(nt.vnode)&&nt.vnode.shapeFlag&256)&&$e.a&&queuePostRenderEffect($e.a,We),$e.isMounted=!0,Be=je=ze=null}},Qe=$e.effect=new ReactiveEffect(Je,()=>queueJob(qe),$e.scope),qe=$e.update=()=>Qe.run();qe.id=$e.uid,toggleRecurse($e,!0),qe()},be=($e,Be,je)=>{Be.component=$e;const ze=$e.vnode.props;$e.vnode=Be,$e.next=null,updateProps($e,Be.props,ze,je),updateSlots($e,Be.children,je),pauseTracking(),flushPreFlushCbs(),resetTracking()},ve=($e,Be,je,ze,We,Ke,Ye,Je,Qe=!1)=>{const qe=$e&&$e.children,rt=$e?$e.shapeFlag:0,tt=Be.children,{patchFlag:Xe,shapeFlag:it}=Be;if(Xe>0){if(Xe&128){he(qe,tt,je,ze,We,Ke,Ye,Je,Qe);return}else if(Xe&256){xe(qe,tt,je,ze,We,Ke,Ye,Je,Qe);return}}it&8?(rt&16&&ke(qe,We,Ke),tt!==qe&&te(je,tt)):rt&16?it&16?he(qe,tt,je,ze,We,Ke,Ye,Je,Qe):ke(qe,We,Ke,!0):(rt&8&&te(je,""),it&16&&Oe(tt,je,ze,We,Ke,Ye,Je,Qe))},xe=($e,Be,je,ze,We,Ke,Ye,Je,Qe)=>{$e=$e||EMPTY_ARR,Be=Be||EMPTY_ARR;const qe=$e.length,rt=Be.length,tt=Math.min(qe,rt);let Xe;for(Xe=0;Xe<tt;Xe++){const it=Be[Xe]=Qe?cloneIfMounted(Be[Xe]):normalizeVNode(Be[Xe]);ye($e[Xe],it,je,null,We,Ke,Ye,Je,Qe)}qe>rt?ke($e,We,Ke,!0,!1,tt):Oe(Be,je,ze,We,Ke,Ye,Je,Qe,tt)},he=($e,Be,je,ze,We,Ke,Ye,Je,Qe)=>{let qe=0;const rt=Be.length;let tt=$e.length-1,Xe=rt-1;for(;qe<=tt&&qe<=Xe;){const it=$e[qe],st=Be[qe]=Qe?cloneIfMounted(Be[qe]):normalizeVNode(Be[qe]);if(isSameVNodeType(it,st))ye(it,st,je,null,We,Ke,Ye,Je,Qe);else break;qe++}for(;qe<=tt&&qe<=Xe;){const it=$e[tt],st=Be[Xe]=Qe?cloneIfMounted(Be[Xe]):normalizeVNode(Be[Xe]);if(isSameVNodeType(it,st))ye(it,st,je,null,We,Ke,Ye,Je,Qe);else break;tt--,Xe--}if(qe>tt){if(qe<=Xe){const it=Xe+1,st=it<rt?Be[it].el:ze;for(;qe<=Xe;)ye(null,Be[qe]=Qe?cloneIfMounted(Be[qe]):normalizeVNode(Be[qe]),je,st,We,Ke,Ye,Je,Qe),qe++}}else if(qe>Xe)for(;qe<=tt;)de($e[qe],We,Ke,!0),qe++;else{const it=qe,st=qe,nt=new Map;for(qe=st;qe<=Xe;qe++){const et=Be[qe]=Qe?cloneIfMounted(Be[qe]):normalizeVNode(Be[qe]);et.key!=null&&nt.set(et.key,qe)}let ot,pt=0;const dt=Xe-st+1;let Et=!1,Ct=0;const ht=new Array(dt);for(qe=0;qe<dt;qe++)ht[qe]=0;for(qe=it;qe<=tt;qe++){const et=$e[qe];if(pt>=dt){de(et,We,Ke,!0);continue}let Ze;if(et.key!=null)Ze=nt.get(et.key);else for(ot=st;ot<=Xe;ot++)if(ht[ot-st]===0&&isSameVNodeType(et,Be[ot])){Ze=ot;break}Ze===void 0?de(et,We,Ke,!0):(ht[Ze-st]=qe+1,Ze>=Ct?Ct=Ze:Et=!0,ye(et,Be[Ze],je,null,We,Ke,Ye,Je,Qe),pt++)}const Ve=Et?getSequence(ht):EMPTY_ARR;for(ot=Ve.length-1,qe=dt-1;qe>=0;qe--){const et=st+qe,Ze=Be[et],ut=et+1<rt?Be[et+1].el:ze;ht[qe]===0?ye(null,Ze,je,ut,We,Ke,Ye,Je,Qe):Et&&(ot<0||qe!==Ve[ot]?me(Ze,je,ut,2):ot--)}}},me=($e,Be,je,ze,We=null)=>{const{el:Ke,type:Ye,transition:Je,children:Qe,shapeFlag:qe}=$e;if(qe&6){me($e.component.subTree,Be,je,ze);return}if(qe&128){$e.suspense.move(Be,je,ze);return}if(qe&64){Ye.move($e,Be,je,Ue);return}if(Ye===Fragment$2){G(Ke,Be,je);for(let tt=0;tt<Qe.length;tt++)me(Qe[tt],Be,je,ze);G($e.anchor,Be,je);return}if(Ye===Static){Te($e,Be,je);return}if(ze!==2&&qe&1&&Je)if(ze===0)Je.beforeEnter(Ke),G(Ke,Be,je),queuePostRenderEffect(()=>Je.enter(Ke),We);else{const{leave:tt,delayLeave:Xe,afterLeave:it}=Je,st=()=>G(Ke,Be,je),nt=()=>{tt(Ke,()=>{st(),it&&it()})};Xe?Xe(Ke,st,nt):nt()}else G(Ke,Be,je)},de=($e,Be,je,ze=!1,We=!1)=>{const{type:Ke,props:Ye,ref:Je,children:Qe,dynamicChildren:qe,shapeFlag:rt,patchFlag:tt,dirs:Xe}=$e;if(Je!=null&&setRef(Je,null,je,$e,!0),rt&256){Be.ctx.deactivate($e);return}const it=rt&1&&Xe,st=!isAsyncWrapper($e);let nt;if(st&&(nt=Ye&&Ye.onVnodeBeforeUnmount)&&invokeVNodeHook(nt,Be,$e),rt&6)we($e.component,je,ze);else{if(rt&128){$e.suspense.unmount(je,ze);return}it&&invokeDirectiveHook($e,null,Be,"beforeUnmount"),rt&64?$e.type.remove($e,Be,je,We,Ue,ze):qe&&(Ke!==Fragment$2||tt>0&&tt&64)?ke(qe,Be,je,!1,!0):(Ke===Fragment$2&&tt&384||!We&&rt&16)&&ke(Qe,Be,je),ze&&Ce($e)}(st&&(nt=Ye&&Ye.onVnodeUnmounted)||it)&&queuePostRenderEffect(()=>{nt&&invokeVNodeHook(nt,Be,$e),it&&invokeDirectiveHook($e,null,Be,"unmounted")},je)},Ce=$e=>{const{type:Be,el:je,anchor:ze,transition:We}=$e;if(Be===Fragment$2){Fe(je,ze);return}if(Be===Static){Ee($e);return}const Ke=()=>{Y(je),We&&!We.persisted&&We.afterLeave&&We.afterLeave()};if($e.shapeFlag&1&&We&&!We.persisted){const{leave:Ye,delayLeave:Je}=We,Qe=()=>Ye(je,Ke);Je?Je($e.el,Ke,Qe):Qe()}else Ke()},Fe=($e,Be)=>{let je;for(;$e!==Be;)je=oe($e),Y($e),$e=je;Y(Be)},we=($e,Be,je)=>{const{bum:ze,scope:We,update:Ke,subTree:Ye,um:Je}=$e;ze&&invokeArrayFns(ze),We.stop(),Ke&&(Ke.active=!1,de(Ye,$e,Be,je)),Je&&queuePostRenderEffect(Je,Be),queuePostRenderEffect(()=>{$e.isUnmounted=!0},Be),Be&&Be.pendingBranch&&!Be.isUnmounted&&$e.asyncDep&&!$e.asyncResolved&&$e.suspenseId===Be.pendingId&&(Be.deps--,Be.deps===0&&Be.resolve())},ke=($e,Be,je,ze=!1,We=!1,Ke=0)=>{for(let Ye=Ke;Ye<$e.length;Ye++)de($e[Ye],Be,je,ze,We)},Ne=$e=>$e.shapeFlag&6?Ne($e.component.subTree):$e.shapeFlag&128?$e.suspense.next():oe($e.anchor||$e.el),He=($e,Be,je)=>{$e==null?Be._vnode&&de(Be._vnode,null,null,!0):ye(Be._vnode||null,$e,Be,null,null,null,je),flushPreFlushCbs(),flushPostFlushCbs(),Be._vnode=$e},Ue={p:ye,um:de,m:me,r:Ce,mt:se,mc:Oe,pc:ve,pbc:Le,n:Ne,o:R};let Ge,De;return E&&([Ge,De]=E(Ue)),{render:He,hydrate:Ge,createApp:createAppAPI(He,Ge)}}function toggleRecurse({effect:R,update:E},U){R.allowRecurse=E.allowRecurse=U}function traverseStaticChildren(R,E,U=!1){const G=R.children,Y=E.children;if(isArray$6(G)&&isArray$6(Y))for(let J=0;J<G.length;J++){const Q=G[J];let X=Y[J];X.shapeFlag&1&&!X.dynamicChildren&&((X.patchFlag<=0||X.patchFlag===32)&&(X=Y[J]=cloneIfMounted(Y[J]),X.el=Q.el),U||traverseStaticChildren(Q,X)),X.type===Text$1&&(X.el=Q.el)}}function getSequence(R){const E=R.slice(),U=[0];let G,Y,J,Q,X;const Z=R.length;for(G=0;G<Z;G++){const ee=R[G];if(ee!==0){if(Y=U[U.length-1],R[Y]<ee){E[G]=Y,U.push(G);continue}for(J=0,Q=U.length-1;J<Q;)X=J+Q>>1,R[U[X]]<ee?J=X+1:Q=X;ee<R[U[J]]&&(J>0&&(E[G]=U[J-1]),U[J]=G)}}for(J=U.length,Q=U[J-1];J-- >0;)U[J]=Q,Q=E[Q];return U}const isTeleport=R=>R.__isTeleport,isTeleportDisabled=R=>R&&(R.disabled||R.disabled===""),isTargetSVG=R=>typeof SVGElement<"u"&&R instanceof SVGElement,resolveTarget=(R,E)=>{const U=R&&R.to;return isString$2(U)?E?E(U):null:U},TeleportImpl={__isTeleport:!0,process(R,E,U,G,Y,J,Q,X,Z,ee){const{mc:te,pc:ne,pbc:oe,o:{insert:ce,querySelector:pe,createText:ye,createComment:Se}}=ee,ge=isTeleportDisabled(E.props);let{shapeFlag:_e,children:Te,dynamicChildren:Ee}=E;if(R==null){const Re=E.el=ye(""),Ae=E.anchor=ye("");ce(Re,U,G),ce(Ae,U,G);const Ie=E.target=resolveTarget(E.props,pe),Oe=E.targetAnchor=ye("");Ie&&(ce(Oe,Ie),Q=Q||isTargetSVG(Ie));const Pe=(Le,Me)=>{_e&16&&te(Te,Le,Me,Y,J,Q,X,Z)};ge?Pe(U,Ae):Ie&&Pe(Ie,Oe)}else{E.el=R.el;const Re=E.anchor=R.anchor,Ae=E.target=R.target,Ie=E.targetAnchor=R.targetAnchor,Oe=isTeleportDisabled(R.props),Pe=Oe?U:Ae,Le=Oe?Re:Ie;if(Q=Q||isTargetSVG(Ae),Ee?(oe(R.dynamicChildren,Ee,Pe,Y,J,Q,X),traverseStaticChildren(R,E,!0)):Z||ne(R,E,Pe,Le,Y,J,Q,X,!1),ge)Oe||moveTeleport(E,U,Re,ee,1);else if((E.props&&E.props.to)!==(R.props&&R.props.to)){const Me=E.target=resolveTarget(E.props,pe);Me&&moveTeleport(E,Me,null,ee,0)}else Oe&&moveTeleport(E,Ae,Ie,ee,1)}updateCssVars(E)},remove(R,E,U,G,{um:Y,o:{remove:J}},Q){const{shapeFlag:X,children:Z,anchor:ee,targetAnchor:te,target:ne,props:oe}=R;if(ne&&J(te),(Q||!isTeleportDisabled(oe))&&(J(ee),X&16))for(let ce=0;ce<Z.length;ce++){const pe=Z[ce];Y(pe,E,U,!0,!!pe.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(R,E,U,{o:{insert:G},m:Y},J=2){J===0&&G(R.targetAnchor,E,U);const{el:Q,anchor:X,shapeFlag:Z,children:ee,props:te}=R,ne=J===2;if(ne&&G(Q,E,U),(!ne||isTeleportDisabled(te))&&Z&16)for(let oe=0;oe<ee.length;oe++)Y(ee[oe],E,U,2);ne&&G(X,E,U)}function hydrateTeleport(R,E,U,G,Y,J,{o:{nextSibling:Q,parentNode:X,querySelector:Z}},ee){const te=E.target=resolveTarget(E.props,Z);if(te){const ne=te._lpa||te.firstChild;if(E.shapeFlag&16)if(isTeleportDisabled(E.props))E.anchor=ee(Q(R),E,X(R),U,G,Y,J),E.targetAnchor=ne;else{E.anchor=Q(R);let oe=ne;for(;oe;)if(oe=Q(oe),oe&&oe.nodeType===8&&oe.data==="teleport anchor"){E.targetAnchor=oe,te._lpa=E.targetAnchor&&Q(E.targetAnchor);break}ee(ne,E,te,U,G,Y,J)}updateCssVars(E)}return E.anchor&&Q(E.anchor)}const Teleport=TeleportImpl;function updateCssVars(R){const E=R.ctx;if(E&&E.ut){let U=R.children[0].el;for(;U!==R.targetAnchor;)U.nodeType===1&&U.setAttribute("data-v-owner",E.uid),U=U.nextSibling;E.ut()}}const Fragment$2=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(R=!1){blockStack.push(currentBlock=R?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(R){isBlockTreeEnabled+=R}function setupBlock(R){return R.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(R),R}function createElementBlock(R,E,U,G,Y,J){return setupBlock(createBaseVNode(R,E,U,G,Y,J,!0))}function createBlock$1(R,E,U,G,Y){return setupBlock(createVNode(R,E,U,G,Y,!0))}function isVNode(R){return R?R.__v_isVNode===!0:!1}function isSameVNodeType(R,E){return R.type===E.type&&R.key===E.key}function transformVNodeArgs(R){}const InternalObjectKey="__vInternal",normalizeKey=({key:R})=>R!=null?R:null,normalizeRef=({ref:R,ref_key:E,ref_for:U})=>R!=null?isString$2(R)||isRef(R)||isFunction$2(R)?{i:currentRenderingInstance,r:R,k:E,f:!!U}:R:null;function createBaseVNode(R,E=null,U=null,G=0,Y=null,J=R===Fragment$2?0:1,Q=!1,X=!1){const Z={__v_isVNode:!0,__v_skip:!0,type:R,props:E,key:E&&normalizeKey(E),ref:E&&normalizeRef(E),scopeId:currentScopeId,slotScopeIds:null,children:U,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:J,patchFlag:G,dynamicProps:Y,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return X?(normalizeChildren(Z,U),J&128&&R.normalize(Z)):U&&(Z.shapeFlag|=isString$2(U)?8:16),isBlockTreeEnabled>0&&!Q&&currentBlock&&(Z.patchFlag>0||J&6)&&Z.patchFlag!==32&&currentBlock.push(Z),Z}const createVNode=_createVNode;function _createVNode(R,E=null,U=null,G=0,Y=null,J=!1){if((!R||R===NULL_DYNAMIC_COMPONENT)&&(R=Comment),isVNode(R)){const X=cloneVNode(R,E,!0);return U&&normalizeChildren(X,U),isBlockTreeEnabled>0&&!J&&currentBlock&&(X.shapeFlag&6?currentBlock[currentBlock.indexOf(R)]=X:currentBlock.push(X)),X.patchFlag|=-2,X}if(isClassComponent(R)&&(R=R.__vccOpts),E){E=guardReactiveProps(E);let{class:X,style:Z}=E;X&&!isString$2(X)&&(E.class=normalizeClass(X)),isObject$2(Z)&&(isProxy(Z)&&!isArray$6(Z)&&(Z=extend$3({},Z)),E.style=normalizeStyle(Z))}const Q=isString$2(R)?1:isSuspense(R)?128:isTeleport(R)?64:isObject$2(R)?4:isFunction$2(R)?2:0;return createBaseVNode(R,E,U,G,Y,Q,J,!0)}function guardReactiveProps(R){return R?isProxy(R)||InternalObjectKey in R?extend$3({},R):R:null}function cloneVNode(R,E,U=!1){const{props:G,ref:Y,patchFlag:J,children:Q}=R,X=E?mergeProps(G||{},E):G;return{__v_isVNode:!0,__v_skip:!0,type:R.type,props:X,key:X&&normalizeKey(X),ref:E&&E.ref?U&&Y?isArray$6(Y)?Y.concat(normalizeRef(E)):[Y,normalizeRef(E)]:normalizeRef(E):Y,scopeId:R.scopeId,slotScopeIds:R.slotScopeIds,children:Q,target:R.target,targetAnchor:R.targetAnchor,staticCount:R.staticCount,shapeFlag:R.shapeFlag,patchFlag:E&&R.type!==Fragment$2?J===-1?16:J|16:J,dynamicProps:R.dynamicProps,dynamicChildren:R.dynamicChildren,appContext:R.appContext,dirs:R.dirs,transition:R.transition,component:R.component,suspense:R.suspense,ssContent:R.ssContent&&cloneVNode(R.ssContent),ssFallback:R.ssFallback&&cloneVNode(R.ssFallback),el:R.el,anchor:R.anchor,ctx:R.ctx,ce:R.ce}}function createTextVNode(R=" ",E=0){return createVNode(Text$1,null,R,E)}function createStaticVNode(R,E){const U=createVNode(Static,null,R);return U.staticCount=E,U}function createCommentVNode(R="",E=!1){return E?(openBlock(),createBlock$1(Comment,null,R)):createVNode(Comment,null,R)}function normalizeVNode(R){return R==null||typeof R=="boolean"?createVNode(Comment):isArray$6(R)?createVNode(Fragment$2,null,R.slice()):typeof R=="object"?cloneIfMounted(R):createVNode(Text$1,null,String(R))}function cloneIfMounted(R){return R.el===null&&R.patchFlag!==-1||R.memo?R:cloneVNode(R)}function normalizeChildren(R,E){let U=0;const{shapeFlag:G}=R;if(E==null)E=null;else if(isArray$6(E))U=16;else if(typeof E=="object")if(G&65){const Y=E.default;Y&&(Y._c&&(Y._d=!1),normalizeChildren(R,Y()),Y._c&&(Y._d=!0));return}else{U=32;const Y=E._;!Y&&!(InternalObjectKey in E)?E._ctx=currentRenderingInstance:Y===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?E._=1:(E._=2,R.patchFlag|=1024))}else isFunction$2(E)?(E={default:E,_ctx:currentRenderingInstance},U=32):(E=String(E),G&64?(U=16,E=[createTextVNode(E)]):U=8);R.children=E,R.shapeFlag|=U}function mergeProps(...R){const E={};for(let U=0;U<R.length;U++){const G=R[U];for(const Y in G)if(Y==="class")E.class!==G.class&&(E.class=normalizeClass([E.class,G.class]));else if(Y==="style")E.style=normalizeStyle([E.style,G.style]);else if(isOn(Y)){const J=E[Y],Q=G[Y];Q&&J!==Q&&!(isArray$6(J)&&J.includes(Q))&&(E[Y]=J?[].concat(J,Q):Q)}else Y!==""&&(E[Y]=G[Y])}return E}function invokeVNodeHook(R,E,U,G=null){callWithAsyncErrorHandling(R,E,7,[U,G])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(R,E,U){const G=R.type,Y=(E?E.appContext:R.appContext)||emptyAppContext,J={uid:uid++,vnode:R,type:G,parent:E,appContext:Y,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:E?E.provides:Object.create(Y.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(G,Y),emitsOptions:normalizeEmitsOptions(G,Y),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:G.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:U,suspenseId:U?U.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return J.ctx={_:J},J.root=E?E.root:J,J.emit=emit.bind(null,J),R.ce&&R.ce(J),J}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=R=>{currentInstance=R,R.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(R){return R.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(R,E=!1){isInSSRComponentSetup=E;const{props:U,children:G}=R.vnode,Y=isStatefulComponent(R);initProps(R,U,Y,E),initSlots(R,G);const J=Y?setupStatefulComponent(R,E):void 0;return isInSSRComponentSetup=!1,J}function setupStatefulComponent(R,E){const U=R.type;R.accessCache=Object.create(null),R.proxy=markRaw(new Proxy(R.ctx,PublicInstanceProxyHandlers));const{setup:G}=U;if(G){const Y=R.setupContext=G.length>1?createSetupContext(R):null;setCurrentInstance(R),pauseTracking();const J=callWithErrorHandling(G,R,0,[R.props,Y]);if(resetTracking(),unsetCurrentInstance(),isPromise$1(J)){if(J.then(unsetCurrentInstance,unsetCurrentInstance),E)return J.then(Q=>{handleSetupResult(R,Q,E)}).catch(Q=>{handleError(Q,R,0)});R.asyncDep=J}else handleSetupResult(R,J,E)}else finishComponentSetup(R,E)}function handleSetupResult(R,E,U){isFunction$2(E)?R.type.__ssrInlineRender?R.ssrRender=E:R.render=E:isObject$2(E)&&(R.setupState=proxyRefs(E)),finishComponentSetup(R,U)}let compile,installWithProxy;function registerRuntimeCompiler(R){compile=R,installWithProxy=E=>{E.render._rc&&(E.withProxy=new Proxy(E.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile;function finishComponentSetup(R,E,U){const G=R.type;if(!R.render){if(!E&&compile&&!G.render){const Y=G.template||resolveMergedOptions(R).template;if(Y){const{isCustomElement:J,compilerOptions:Q}=R.appContext.config,{delimiters:X,compilerOptions:Z}=G,ee=extend$3(extend$3({isCustomElement:J,delimiters:X},Q),Z);G.render=compile(Y,ee)}}R.render=G.render||NOOP,installWithProxy&&installWithProxy(R)}setCurrentInstance(R),pauseTracking(),applyOptions(R),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(R){return new Proxy(R.attrs,{get(E,U){return track(R,"get","$attrs"),E[U]}})}function createSetupContext(R){const E=G=>{R.exposed=G||{}};let U;return{get attrs(){return U||(U=createAttrsProxy(R))},slots:R.slots,emit:R.emit,expose:E}}function getExposeProxy(R){if(R.exposed)return R.exposeProxy||(R.exposeProxy=new Proxy(proxyRefs(markRaw(R.exposed)),{get(E,U){if(U in E)return E[U];if(U in publicPropertiesMap)return publicPropertiesMap[U](R)},has(E,U){return U in E||U in publicPropertiesMap}}))}function getComponentName(R,E=!0){return isFunction$2(R)?R.displayName||R.name:R.name||E&&R.__name}function isClassComponent(R){return isFunction$2(R)&&"__vccOpts"in R}const computed=(R,E)=>computed$1(R,E,isInSSRComponentSetup);function defineProps(){return null}function defineEmits(){return null}function defineExpose(R){}function withDefaults(R,E){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const R=getCurrentInstance();return R.setupContext||(R.setupContext=createSetupContext(R))}function mergeDefaults(R,E){const U=isArray$6(R)?R.reduce((G,Y)=>(G[Y]={},G),{}):R;for(const G in E){const Y=U[G];Y?isArray$6(Y)||isFunction$2(Y)?U[G]={type:Y,default:E[G]}:Y.default=E[G]:Y===null&&(U[G]={default:E[G]})}return U}function createPropsRestProxy(R,E){const U={};for(const G in R)E.includes(G)||Object.defineProperty(U,G,{enumerable:!0,get:()=>R[G]});return U}function withAsyncContext(R){const E=getCurrentInstance();let U=R();return unsetCurrentInstance(),isPromise$1(U)&&(U=U.catch(G=>{throw setCurrentInstance(E),G})),[U,()=>setCurrentInstance(E)]}function h$2(R,E,U){const G=arguments.length;return G===2?isObject$2(E)&&!isArray$6(E)?isVNode(E)?createVNode(R,null,[E]):createVNode(R,E):createVNode(R,null,E):(G>3?U=Array.prototype.slice.call(arguments,2):G===3&&isVNode(U)&&(U=[U]),createVNode(R,E,U))}const ssrContextKey$1=Symbol(""),useSSRContext=()=>inject(ssrContextKey$1);function initCustomFormatter(){}function withMemo(R,E,U,G){const Y=U[G];if(Y&&isMemoSame(Y,R))return Y;const J=E();return J.memo=R.slice(),U[G]=J}function isMemoSame(R,E){const U=R.memo;if(U.length!=E.length)return!1;for(let G=0;G<U.length;G++)if(hasChanged(U[G],E[G]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(R),!0}const version$4="3.2.47",_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc$3=typeof document<"u"?document:null,templateContainer=doc$3&&doc$3.createElement("template"),nodeOps={insert:(R,E,U)=>{E.insertBefore(R,U||null)},remove:R=>{const E=R.parentNode;E&&E.removeChild(R)},createElement:(R,E,U,G)=>{const Y=E?doc$3.createElementNS(svgNS,R):doc$3.createElement(R,U?{is:U}:void 0);return R==="select"&&G&&G.multiple!=null&&Y.setAttribute("multiple",G.multiple),Y},createText:R=>doc$3.createTextNode(R),createComment:R=>doc$3.createComment(R),setText:(R,E)=>{R.nodeValue=E},setElementText:(R,E)=>{R.textContent=E},parentNode:R=>R.parentNode,nextSibling:R=>R.nextSibling,querySelector:R=>doc$3.querySelector(R),setScopeId(R,E){R.setAttribute(E,"")},insertStaticContent(R,E,U,G,Y,J){const Q=U?U.previousSibling:E.lastChild;if(Y&&(Y===J||Y.nextSibling))for(;E.insertBefore(Y.cloneNode(!0),U),!(Y===J||!(Y=Y.nextSibling)););else{templateContainer.innerHTML=G?`<svg>${R}</svg>`:R;const X=templateContainer.content;if(G){const Z=X.firstChild;for(;Z.firstChild;)X.appendChild(Z.firstChild);X.removeChild(Z)}E.insertBefore(X,U)}return[Q?Q.nextSibling:E.firstChild,U?U.previousSibling:E.lastChild]}};function patchClass(R,E,U){const G=R._vtc;G&&(E=(E?[E,...G]:[...G]).join(" ")),E==null?R.removeAttribute("class"):U?R.setAttribute("class",E):R.className=E}function patchStyle(R,E,U){const G=R.style,Y=isString$2(U);if(U&&!Y){if(E&&!isString$2(E))for(const J in E)U[J]==null&&setStyle(G,J,"");for(const J in U)setStyle(G,J,U[J])}else{const J=G.display;Y?E!==U&&(G.cssText=U):E&&R.removeAttribute("style"),"_vod"in R&&(G.display=J)}}const importantRE=/\s*!important$/;function setStyle(R,E,U){if(isArray$6(U))U.forEach(G=>setStyle(R,E,G));else if(U==null&&(U=""),E.startsWith("--"))R.setProperty(E,U);else{const G=autoPrefix(R,E);importantRE.test(U)?R.setProperty(hyphenate(G),U.replace(importantRE,""),"important"):R[G]=U}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(R,E){const U=prefixCache[E];if(U)return U;let G=camelize(E);if(G!=="filter"&&G in R)return prefixCache[E]=G;G=capitalize(G);for(let Y=0;Y<prefixes.length;Y++){const J=prefixes[Y]+G;if(J in R)return prefixCache[E]=J}return E}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(R,E,U,G,Y){if(G&&E.startsWith("xlink:"))U==null?R.removeAttributeNS(xlinkNS,E.slice(6,E.length)):R.setAttributeNS(xlinkNS,E,U);else{const J=isSpecialBooleanAttr(E);U==null||J&&!includeBooleanAttr(U)?R.removeAttribute(E):R.setAttribute(E,J?"":U)}}function patchDOMProp(R,E,U,G,Y,J,Q){if(E==="innerHTML"||E==="textContent"){G&&Q(G,Y,J),R[E]=U==null?"":U;return}if(E==="value"&&R.tagName!=="PROGRESS"&&!R.tagName.includes("-")){R._value=U;const Z=U==null?"":U;(R.value!==Z||R.tagName==="OPTION")&&(R.value=Z),U==null&&R.removeAttribute(E);return}let X=!1;if(U===""||U==null){const Z=typeof R[E];Z==="boolean"?U=includeBooleanAttr(U):U==null&&Z==="string"?(U="",X=!0):Z==="number"&&(U=0,X=!0)}try{R[E]=U}catch{}X&&R.removeAttribute(E)}function addEventListener$1(R,E,U,G){R.addEventListener(E,U,G)}function removeEventListener$1(R,E,U,G){R.removeEventListener(E,U,G)}function patchEvent(R,E,U,G,Y=null){const J=R._vei||(R._vei={}),Q=J[E];if(G&&Q)Q.value=G;else{const[X,Z]=parseName(E);if(G){const ee=J[E]=createInvoker(G,Y);addEventListener$1(R,X,ee,Z)}else Q&&(removeEventListener$1(R,X,Q,Z),J[E]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(R){let E;if(optionsModifierRE.test(R)){E={};let G;for(;G=R.match(optionsModifierRE);)R=R.slice(0,R.length-G[0].length),E[G[0].toLowerCase()]=!0}return[R[2]===":"?R.slice(3):hyphenate(R.slice(2)),E]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(R,E){const U=G=>{if(!G._vts)G._vts=Date.now();else if(G._vts<=U.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(G,U.value),E,5,[G])};return U.value=R,U.attached=getNow(),U}function patchStopImmediatePropagation(R,E){if(isArray$6(E)){const U=R.stopImmediatePropagation;return R.stopImmediatePropagation=()=>{U.call(R),R._stopped=!0},E.map(G=>Y=>!Y._stopped&&G&&G(Y))}else return E}const nativeOnRE=/^on[a-z]/,patchProp=(R,E,U,G,Y=!1,J,Q,X,Z)=>{E==="class"?patchClass(R,G,Y):E==="style"?patchStyle(R,U,G):isOn(E)?isModelListener(E)||patchEvent(R,E,U,G,Q):(E[0]==="."?(E=E.slice(1),!0):E[0]==="^"?(E=E.slice(1),!1):shouldSetAsProp(R,E,G,Y))?patchDOMProp(R,E,G,J,Q,X,Z):(E==="true-value"?R._trueValue=G:E==="false-value"&&(R._falseValue=G),patchAttr(R,E,G,Y))};function shouldSetAsProp(R,E,U,G){return G?!!(E==="innerHTML"||E==="textContent"||E in R&&nativeOnRE.test(E)&&isFunction$2(U)):E==="spellcheck"||E==="draggable"||E==="translate"||E==="form"||E==="list"&&R.tagName==="INPUT"||E==="type"&&R.tagName==="TEXTAREA"||nativeOnRE.test(E)&&isString$2(U)?!1:E in R}function defineCustomElement(R,E){const U=defineComponent(R);class G extends VueElement{constructor(J){super(U,J,E)}}return G.def=U,G}const defineSSRCustomElement=R=>defineCustomElement(R,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(E,U={},G){super(),this._def=E,this._props=U,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&G?G(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$2(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let G=0;G<this.attributes.length;G++)this._setAttr(this.attributes[G].name);new MutationObserver(G=>{for(const Y of G)this._setAttr(Y.attributeName)}).observe(this,{attributes:!0});const E=(G,Y=!1)=>{const{props:J,styles:Q}=G;let X;if(J&&!isArray$6(J))for(const Z in J){const ee=J[Z];(ee===Number||ee&&ee.type===Number)&&(Z in this._props&&(this._props[Z]=toNumber(this._props[Z])),(X||(X=Object.create(null)))[camelize(Z)]=!0)}this._numberProps=X,Y&&this._resolveProps(G),this._applyStyles(Q),this._update()},U=this._def.__asyncLoader;U?U().then(G=>E(G,!0)):E(this._def)}_resolveProps(E){const{props:U}=E,G=isArray$6(U)?U:Object.keys(U||{});for(const Y of Object.keys(this))Y[0]!=="_"&&G.includes(Y)&&this._setProp(Y,this[Y],!0,!1);for(const Y of G.map(camelize))Object.defineProperty(this,Y,{get(){return this._getProp(Y)},set(J){this._setProp(Y,J)}})}_setAttr(E){let U=this.getAttribute(E);const G=camelize(E);this._numberProps&&this._numberProps[G]&&(U=toNumber(U)),this._setProp(G,U,!1)}_getProp(E){return this._props[E]}_setProp(E,U,G=!0,Y=!0){U!==this._props[E]&&(this._props[E]=U,Y&&this._instance&&this._update(),G&&(U===!0?this.setAttribute(hyphenate(E),""):typeof U=="string"||typeof U=="number"?this.setAttribute(hyphenate(E),U+""):U||this.removeAttribute(hyphenate(E))))}_update(){render$2(this._createVNode(),this.shadowRoot)}_createVNode(){const E=createVNode(this._def,extend$3({},this._props));return this._instance||(E.ce=U=>{this._instance=U,U.isCE=!0;const G=(J,Q)=>{this.dispatchEvent(new CustomEvent(J,{detail:Q}))};U.emit=(J,...Q)=>{G(J,Q),hyphenate(J)!==J&&G(hyphenate(J),Q)};let Y=this;for(;Y=Y&&(Y.parentNode||Y.host);)if(Y instanceof VueElement){U.parent=Y._instance,U.provides=Y._instance.provides;break}}),E}_applyStyles(E){E&&E.forEach(U=>{const G=document.createElement("style");G.textContent=U,this.shadowRoot.appendChild(G)})}}function useCssModule(R="$style"){{const E=getCurrentInstance();if(!E)return EMPTY_OBJ;const U=E.type.__cssModules;if(!U)return EMPTY_OBJ;const G=U[R];return G||EMPTY_OBJ}}function useCssVars(R){const E=getCurrentInstance();if(!E)return;const U=E.ut=(Y=R(E.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${E.uid}"]`)).forEach(J=>setVarsOnNode(J,Y))},G=()=>{const Y=R(E.proxy);setVarsOnVNode(E.subTree,Y),U(Y)};watchPostEffect(G),onMounted(()=>{const Y=new MutationObserver(G);Y.observe(E.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>Y.disconnect())})}function setVarsOnVNode(R,E){if(R.shapeFlag&128){const U=R.suspense;R=U.activeBranch,U.pendingBranch&&!U.isHydrating&&U.effects.push(()=>{setVarsOnVNode(U.activeBranch,E)})}for(;R.component;)R=R.component.subTree;if(R.shapeFlag&1&&R.el)setVarsOnNode(R.el,E);else if(R.type===Fragment$2)R.children.forEach(U=>setVarsOnVNode(U,E));else if(R.type===Static){let{el:U,anchor:G}=R;for(;U&&(setVarsOnNode(U,E),U!==G);)U=U.nextSibling}}function setVarsOnNode(R,E){if(R.nodeType===1){const U=R.style;for(const G in E)U.setProperty(`--${G}`,E[G])}}const TRANSITION="transition",ANIMATION="animation",Transition=(R,{slots:E})=>h$2(BaseTransition,resolveTransitionProps(R),E);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$3({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(R,E=[])=>{isArray$6(R)?R.forEach(U=>U(...E)):R&&R(...E)},hasExplicitCallback=R=>R?isArray$6(R)?R.some(E=>E.length>1):R.length>1:!1;function resolveTransitionProps(R){const E={};for(const ue in R)ue in DOMTransitionPropsValidators||(E[ue]=R[ue]);if(R.css===!1)return E;const{name:U="v",type:G,duration:Y,enterFromClass:J=`${U}-enter-from`,enterActiveClass:Q=`${U}-enter-active`,enterToClass:X=`${U}-enter-to`,appearFromClass:Z=J,appearActiveClass:ee=Q,appearToClass:te=X,leaveFromClass:ne=`${U}-leave-from`,leaveActiveClass:oe=`${U}-leave-active`,leaveToClass:ce=`${U}-leave-to`}=R,pe=normalizeDuration(Y),ye=pe&&pe[0],Se=pe&&pe[1],{onBeforeEnter:ge,onEnter:_e,onEnterCancelled:Te,onLeave:Ee,onLeaveCancelled:Re,onBeforeAppear:Ae=ge,onAppear:Ie=_e,onAppearCancelled:Oe=Te}=E,Pe=(ue,ae,se)=>{removeTransitionClass(ue,ae?te:X),removeTransitionClass(ue,ae?ee:Q),se&&se()},Le=(ue,ae)=>{ue._isLeaving=!1,removeTransitionClass(ue,ne),removeTransitionClass(ue,ce),removeTransitionClass(ue,oe),ae&&ae()},Me=ue=>(ae,se)=>{const le=ue?Ie:_e,fe=()=>Pe(ae,ue,se);callHook(le,[ae,fe]),nextFrame(()=>{removeTransitionClass(ae,ue?Z:J),addTransitionClass(ae,ue?te:X),hasExplicitCallback(le)||whenTransitionEnds(ae,G,ye,fe)})};return extend$3(E,{onBeforeEnter(ue){callHook(ge,[ue]),addTransitionClass(ue,J),addTransitionClass(ue,Q)},onBeforeAppear(ue){callHook(Ae,[ue]),addTransitionClass(ue,Z),addTransitionClass(ue,ee)},onEnter:Me(!1),onAppear:Me(!0),onLeave(ue,ae){ue._isLeaving=!0;const se=()=>Le(ue,ae);addTransitionClass(ue,ne),forceReflow(),addTransitionClass(ue,oe),nextFrame(()=>{!ue._isLeaving||(removeTransitionClass(ue,ne),addTransitionClass(ue,ce),hasExplicitCallback(Ee)||whenTransitionEnds(ue,G,Se,se))}),callHook(Ee,[ue,se])},onEnterCancelled(ue){Pe(ue,!1),callHook(Te,[ue])},onAppearCancelled(ue){Pe(ue,!0),callHook(Oe,[ue])},onLeaveCancelled(ue){Le(ue),callHook(Re,[ue])}})}function normalizeDuration(R){if(R==null)return null;if(isObject$2(R))return[NumberOf(R.enter),NumberOf(R.leave)];{const E=NumberOf(R);return[E,E]}}function NumberOf(R){return toNumber(R)}function addTransitionClass(R,E){E.split(/\s+/).forEach(U=>U&&R.classList.add(U)),(R._vtc||(R._vtc=new Set)).add(E)}function removeTransitionClass(R,E){E.split(/\s+/).forEach(G=>G&&R.classList.remove(G));const{_vtc:U}=R;U&&(U.delete(E),U.size||(R._vtc=void 0))}function nextFrame(R){requestAnimationFrame(()=>{requestAnimationFrame(R)})}let endId=0;function whenTransitionEnds(R,E,U,G){const Y=R._endId=++endId,J=()=>{Y===R._endId&&G()};if(U)return setTimeout(J,U);const{type:Q,timeout:X,propCount:Z}=getTransitionInfo(R,E);if(!Q)return G();const ee=Q+"end";let te=0;const ne=()=>{R.removeEventListener(ee,oe),J()},oe=ce=>{ce.target===R&&++te>=Z&&ne()};setTimeout(()=>{te<Z&&ne()},X+1),R.addEventListener(ee,oe)}function getTransitionInfo(R,E){const U=window.getComputedStyle(R),G=pe=>(U[pe]||"").split(", "),Y=G(`${TRANSITION}Delay`),J=G(`${TRANSITION}Duration`),Q=getTimeout(Y,J),X=G(`${ANIMATION}Delay`),Z=G(`${ANIMATION}Duration`),ee=getTimeout(X,Z);let te=null,ne=0,oe=0;E===TRANSITION?Q>0&&(te=TRANSITION,ne=Q,oe=J.length):E===ANIMATION?ee>0&&(te=ANIMATION,ne=ee,oe=Z.length):(ne=Math.max(Q,ee),te=ne>0?Q>ee?TRANSITION:ANIMATION:null,oe=te?te===TRANSITION?J.length:Z.length:0);const ce=te===TRANSITION&&/\b(transform|all)(,|$)/.test(G(`${TRANSITION}Property`).toString());return{type:te,timeout:ne,propCount:oe,hasTransform:ce}}function getTimeout(R,E){for(;R.length<E.length;)R=R.concat(R);return Math.max(...E.map((U,G)=>toMs(U)+toMs(R[G])))}function toMs(R){return Number(R.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$3({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(R,{slots:E}){const U=getCurrentInstance(),G=useTransitionState();let Y,J;return onUpdated(()=>{if(!Y.length)return;const Q=R.moveClass||`${R.name||"v"}-move`;if(!hasCSSTransform(Y[0].el,U.vnode.el,Q))return;Y.forEach(callPendingCbs),Y.forEach(recordPosition);const X=Y.filter(applyTranslation);forceReflow(),X.forEach(Z=>{const ee=Z.el,te=ee.style;addTransitionClass(ee,Q),te.transform=te.webkitTransform=te.transitionDuration="";const ne=ee._moveCb=oe=>{oe&&oe.target!==ee||(!oe||/transform$/.test(oe.propertyName))&&(ee.removeEventListener("transitionend",ne),ee._moveCb=null,removeTransitionClass(ee,Q))};ee.addEventListener("transitionend",ne)})}),()=>{const Q=toRaw(R),X=resolveTransitionProps(Q);let Z=Q.tag||Fragment$2;Y=J,J=E.default?getTransitionRawChildren(E.default()):[];for(let ee=0;ee<J.length;ee++){const te=J[ee];te.key!=null&&setTransitionHooks(te,resolveTransitionHooks(te,X,G,U))}if(Y)for(let ee=0;ee<Y.length;ee++){const te=Y[ee];setTransitionHooks(te,resolveTransitionHooks(te,X,G,U)),positionMap.set(te,te.el.getBoundingClientRect())}return createVNode(Z,null,J)}}},removeMode=R=>delete R.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(R){const E=R.el;E._moveCb&&E._moveCb(),E._enterCb&&E._enterCb()}function recordPosition(R){newPositionMap.set(R,R.el.getBoundingClientRect())}function applyTranslation(R){const E=positionMap.get(R),U=newPositionMap.get(R),G=E.left-U.left,Y=E.top-U.top;if(G||Y){const J=R.el.style;return J.transform=J.webkitTransform=`translate(${G}px,${Y}px)`,J.transitionDuration="0s",R}}function hasCSSTransform(R,E,U){const G=R.cloneNode();R._vtc&&R._vtc.forEach(Q=>{Q.split(/\s+/).forEach(X=>X&&G.classList.remove(X))}),U.split(/\s+/).forEach(Q=>Q&&G.classList.add(Q)),G.style.display="none";const Y=E.nodeType===1?E:E.parentNode;Y.appendChild(G);const{hasTransform:J}=getTransitionInfo(G);return Y.removeChild(G),J}const getModelAssigner=R=>{const E=R.props["onUpdate:modelValue"]||!1;return isArray$6(E)?U=>invokeArrayFns(E,U):E};function onCompositionStart(R){R.target.composing=!0}function onCompositionEnd(R){const E=R.target;E.composing&&(E.composing=!1,E.dispatchEvent(new Event("input")))}const vModelText={created(R,{modifiers:{lazy:E,trim:U,number:G}},Y){R._assign=getModelAssigner(Y);const J=G||Y.props&&Y.props.type==="number";addEventListener$1(R,E?"change":"input",Q=>{if(Q.target.composing)return;let X=R.value;U&&(X=X.trim()),J&&(X=looseToNumber(X)),R._assign(X)}),U&&addEventListener$1(R,"change",()=>{R.value=R.value.trim()}),E||(addEventListener$1(R,"compositionstart",onCompositionStart),addEventListener$1(R,"compositionend",onCompositionEnd),addEventListener$1(R,"change",onCompositionEnd))},mounted(R,{value:E}){R.value=E==null?"":E},beforeUpdate(R,{value:E,modifiers:{lazy:U,trim:G,number:Y}},J){if(R._assign=getModelAssigner(J),R.composing||document.activeElement===R&&R.type!=="range"&&(U||G&&R.value.trim()===E||(Y||R.type==="number")&&looseToNumber(R.value)===E))return;const Q=E==null?"":E;R.value!==Q&&(R.value=Q)}},vModelCheckbox={deep:!0,created(R,E,U){R._assign=getModelAssigner(U),addEventListener$1(R,"change",()=>{const G=R._modelValue,Y=getValue$1(R),J=R.checked,Q=R._assign;if(isArray$6(G)){const X=looseIndexOf(G,Y),Z=X!==-1;if(J&&!Z)Q(G.concat(Y));else if(!J&&Z){const ee=[...G];ee.splice(X,1),Q(ee)}}else if(isSet$1(G)){const X=new Set(G);J?X.add(Y):X.delete(Y),Q(X)}else Q(getCheckboxValue(R,J))})},mounted:setChecked,beforeUpdate(R,E,U){R._assign=getModelAssigner(U),setChecked(R,E,U)}};function setChecked(R,{value:E,oldValue:U},G){R._modelValue=E,isArray$6(E)?R.checked=looseIndexOf(E,G.props.value)>-1:isSet$1(E)?R.checked=E.has(G.props.value):E!==U&&(R.checked=looseEqual(E,getCheckboxValue(R,!0)))}const vModelRadio={created(R,{value:E},U){R.checked=looseEqual(E,U.props.value),R._assign=getModelAssigner(U),addEventListener$1(R,"change",()=>{R._assign(getValue$1(R))})},beforeUpdate(R,{value:E,oldValue:U},G){R._assign=getModelAssigner(G),E!==U&&(R.checked=looseEqual(E,G.props.value))}},vModelSelect={deep:!0,created(R,{value:E,modifiers:{number:U}},G){const Y=isSet$1(E);addEventListener$1(R,"change",()=>{const J=Array.prototype.filter.call(R.options,Q=>Q.selected).map(Q=>U?looseToNumber(getValue$1(Q)):getValue$1(Q));R._assign(R.multiple?Y?new Set(J):J:J[0])}),R._assign=getModelAssigner(G)},mounted(R,{value:E}){setSelected(R,E)},beforeUpdate(R,E,U){R._assign=getModelAssigner(U)},updated(R,{value:E}){setSelected(R,E)}};function setSelected(R,E){const U=R.multiple;if(!(U&&!isArray$6(E)&&!isSet$1(E))){for(let G=0,Y=R.options.length;G<Y;G++){const J=R.options[G],Q=getValue$1(J);if(U)isArray$6(E)?J.selected=looseIndexOf(E,Q)>-1:J.selected=E.has(Q);else if(looseEqual(getValue$1(J),E)){R.selectedIndex!==G&&(R.selectedIndex=G);return}}!U&&R.selectedIndex!==-1&&(R.selectedIndex=-1)}}function getValue$1(R){return"_value"in R?R._value:R.value}function getCheckboxValue(R,E){const U=E?"_trueValue":"_falseValue";return U in R?R[U]:E}const vModelDynamic={created(R,E,U){callModelHook(R,E,U,null,"created")},mounted(R,E,U){callModelHook(R,E,U,null,"mounted")},beforeUpdate(R,E,U,G){callModelHook(R,E,U,G,"beforeUpdate")},updated(R,E,U,G){callModelHook(R,E,U,G,"updated")}};function resolveDynamicModel(R,E){switch(R){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(E){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(R,E,U,G,Y){const Q=resolveDynamicModel(R.tagName,U.props&&U.props.type)[Y];Q&&Q(R,E,U,G)}function initVModelForSSR(){vModelText.getSSRProps=({value:R})=>({value:R}),vModelRadio.getSSRProps=({value:R},E)=>{if(E.props&&looseEqual(E.props.value,R))return{checked:!0}},vModelCheckbox.getSSRProps=({value:R},E)=>{if(isArray$6(R)){if(E.props&&looseIndexOf(R,E.props.value)>-1)return{checked:!0}}else if(isSet$1(R)){if(E.props&&R.has(E.props.value))return{checked:!0}}else if(R)return{checked:!0}},vModelDynamic.getSSRProps=(R,E)=>{if(typeof E.type!="string")return;const U=resolveDynamicModel(E.type.toUpperCase(),E.props&&E.props.type);if(U.getSSRProps)return U.getSSRProps(R,E)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:R=>R.stopPropagation(),prevent:R=>R.preventDefault(),self:R=>R.target!==R.currentTarget,ctrl:R=>!R.ctrlKey,shift:R=>!R.shiftKey,alt:R=>!R.altKey,meta:R=>!R.metaKey,left:R=>"button"in R&&R.button!==0,middle:R=>"button"in R&&R.button!==1,right:R=>"button"in R&&R.button!==2,exact:(R,E)=>systemModifiers.some(U=>R[`${U}Key`]&&!E.includes(U))},withModifiers=(R,E)=>(U,...G)=>{for(let Y=0;Y<E.length;Y++){const J=modifierGuards[E[Y]];if(J&&J(U,E))return}return R(U,...G)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(R,E)=>U=>{if(!("key"in U))return;const G=hyphenate(U.key);if(E.some(Y=>Y===G||keyNames[Y]===G))return R(U)},vShow={beforeMount(R,{value:E},{transition:U}){R._vod=R.style.display==="none"?"":R.style.display,U&&E?U.beforeEnter(R):setDisplay(R,E)},mounted(R,{value:E},{transition:U}){U&&E&&U.enter(R)},updated(R,{value:E,oldValue:U},{transition:G}){!E!=!U&&(G?E?(G.beforeEnter(R),setDisplay(R,!0),G.enter(R)):G.leave(R,()=>{setDisplay(R,!1)}):setDisplay(R,E))},beforeUnmount(R,{value:E}){setDisplay(R,E)}};function setDisplay(R,E){R.style.display=E?R._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:R})=>{if(!R)return{style:{display:"none"}}}}const rendererOptions=extend$3({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$2=(...R)=>{ensureRenderer().render(...R)},hydrate=(...R)=>{ensureHydrationRenderer().hydrate(...R)},createApp=(...R)=>{const E=ensureRenderer().createApp(...R),{mount:U}=E;return E.mount=G=>{const Y=normalizeContainer(G);if(!Y)return;const J=E._component;!isFunction$2(J)&&!J.render&&!J.template&&(J.template=Y.innerHTML),Y.innerHTML="";const Q=U(Y,!1,Y instanceof SVGElement);return Y instanceof Element&&(Y.removeAttribute("v-cloak"),Y.setAttribute("data-v-app","")),Q},E},createSSRApp=(...R)=>{const E=ensureHydrationRenderer().createApp(...R),{mount:U}=E;return E.mount=G=>{const Y=normalizeContainer(G);if(Y)return U(Y,!0,Y instanceof SVGElement)},E};function normalizeContainer(R){return isString$2(R)?document.querySelector(R):R}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};var isVue2=!1;let onceCbs=[];const paramsMap=new WeakMap;function flushOnceCallbacks(){onceCbs.forEach(R=>R(...paramsMap.get(R))),onceCbs=[]}function beforeNextFrameOnce(R,...E){paramsMap.set(R,E),!onceCbs.includes(R)&&onceCbs.push(R)===1&&requestAnimationFrame(flushOnceCallbacks)}function getParentNode$2(R){return R.nodeType===9?null:R.parentNode}function getScrollParent$2(R){if(R===null)return null;const E=getParentNode$2(R);if(E===null)return null;if(E.nodeType===9)return document.documentElement;if(E.nodeType===1){const{overflow:U,overflowX:G,overflowY:Y}=getComputedStyle(E);if(/(auto|scroll|overlay)/.test(U+Y+G))return E}return getScrollParent$2(E)}function unwrapElement(R){return typeof R=="string"?document.querySelector(R):typeof R=="function"?R():R}function happensIn(R,E){let{target:U}=R;for(;U;){if(U.dataset&&U.dataset[E]!==void 0)return!0;U=U.parentElement}return!1}function getPreciseEventTarget(R){return R.composedPath()[0]||null}function parseResponsiveProp(R){if(typeof R=="number")return{"":R.toString()};const E={};return R.split(/ +/).forEach(U=>{if(U==="")return;const[G,Y]=U.split(":");Y===void 0?E[""]=G:E[G]=Y}),E}function parseResponsivePropValue(R,E){var U;if(R==null)return;const G=parseResponsiveProp(R);if(E===void 0)return G[""];if(typeof E=="string")return(U=G[E])!==null&&U!==void 0?U:G[""];if(Array.isArray(E)){for(let Y=E.length-1;Y>=0;--Y){const J=E[Y];if(J in G)return G[J]}return G[""]}else{let Y,J=-1;return Object.keys(G).forEach(Q=>{const X=Number(Q);!Number.isNaN(X)&&E>=X&&X>=J&&(J=X,Y=G[Q])}),Y}}function depx(R){return typeof R=="string"?R.endsWith("px")?Number(R.slice(0,R.length-2)):Number(R):R}function pxfy(R){if(R!=null)return typeof R=="number"?`${R}px`:R.endsWith("px")?R:`${R}px`}function getMargin(R,E){const U=R.trim().split(/\s+/g),G={top:U[0]};switch(U.length){case 1:G.right=U[0],G.bottom=U[0],G.left=U[0];break;case 2:G.right=U[1],G.left=U[1],G.bottom=U[0];break;case 3:G.right=U[1],G.bottom=U[2],G.left=U[1];break;case 4:G.right=U[1],G.bottom=U[2],G.left=U[3];break;default:throw new Error("[seemly/getMargin]:"+R+" is not a valid value.")}return E===void 0?G:G[E]}const colors={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},prefix="^\\s*",suffix="\\s*$",float$1="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",hex$1="([0-9A-Fa-f])",dhex="([0-9A-Fa-f]{2})",rgbRegex=new RegExp(`${prefix}rgb\\s*\\(${float$1},${float$1},${float$1}\\)${suffix}`),rgbaRegex=new RegExp(`${prefix}rgba\\s*\\(${float$1},${float$1},${float$1},${float$1}\\)${suffix}`),sHexRegex=new RegExp(`${prefix}#${hex$1}${hex$1}${hex$1}${suffix}`),hexRegex=new RegExp(`${prefix}#${dhex}${dhex}${dhex}${suffix}`),sHexaRegex=new RegExp(`${prefix}#${hex$1}${hex$1}${hex$1}${hex$1}${suffix}`),hexaRegex=new RegExp(`${prefix}#${dhex}${dhex}${dhex}${dhex}${suffix}`);function parseHex(R){return parseInt(R,16)}function rgba(R){try{let E;if(E=hexRegex.exec(R))return[parseHex(E[1]),parseHex(E[2]),parseHex(E[3]),1];if(E=rgbRegex.exec(R))return[roundChannel(E[1]),roundChannel(E[5]),roundChannel(E[9]),1];if(E=rgbaRegex.exec(R))return[roundChannel(E[1]),roundChannel(E[5]),roundChannel(E[9]),roundAlpha(E[13])];if(E=sHexRegex.exec(R))return[parseHex(E[1]+E[1]),parseHex(E[2]+E[2]),parseHex(E[3]+E[3]),1];if(E=hexaRegex.exec(R))return[parseHex(E[1]),parseHex(E[2]),parseHex(E[3]),roundAlpha(parseHex(E[4])/255)];if(E=sHexaRegex.exec(R))return[parseHex(E[1]+E[1]),parseHex(E[2]+E[2]),parseHex(E[3]+E[3]),roundAlpha(parseHex(E[4]+E[4])/255)];if(R in colors)return rgba(colors[R]);throw new Error(`[seemly/rgba]: Invalid color value ${R}.`)}catch(E){throw E}}function normalizeAlpha(R){return R>1?1:R<0?0:R}function stringifyRgba(R,E,U,G){return`rgba(${roundChannel(R)}, ${roundChannel(E)}, ${roundChannel(U)}, ${normalizeAlpha(G)})`}function compositeChannel(R,E,U,G,Y){return roundChannel((R*E*(1-G)+U*G)/Y)}function composite(R,E){Array.isArray(R)||(R=rgba(R)),Array.isArray(E)||(E=rgba(E));const U=R[3],G=E[3],Y=roundAlpha(U+G-U*G);return stringifyRgba(compositeChannel(R[0],U,E[0],G,Y),compositeChannel(R[1],U,E[1],G,Y),compositeChannel(R[2],U,E[2],G,Y),Y)}function changeColor(R,E){const[U,G,Y,J=1]=Array.isArray(R)?R:rgba(R);return E.alpha?stringifyRgba(U,G,Y,E.alpha):stringifyRgba(U,G,Y,J)}function scaleColor(R,E){const[U,G,Y,J=1]=Array.isArray(R)?R:rgba(R),{lightness:Q=1,alpha:X=1}=E;return toRgbaString([U*Q,G*Q,Y*Q,J*X])}function roundAlpha(R){const E=Math.round(Number(R)*100)/100;return E>1?1:E<0?0:E}function roundChannel(R){const E=Math.round(Number(R));return E>255?255:E<0?0:E}function toRgbaString(R){const[E,U,G]=R;return 3 in R?`rgba(${roundChannel(E)}, ${roundChannel(U)}, ${roundChannel(G)}, ${roundAlpha(R[3])})`:`rgba(${roundChannel(E)}, ${roundChannel(U)}, ${roundChannel(G)}, 1)`}function createId$1(R=8){return Math.random().toString(16).slice(2,2+R)}function indexMap(R,E){const U=[];if(!E){for(let G=0;G<R;++G)U.push(G);return U}for(let G=0;G<R;++G)U.push(E(G));return U}function ampCount(R){let E=0;for(let U=0;U<R.length;++U)R[U]==="&"&&++E;return E}const separatorRegex=/\s*,(?![^(]*\))\s*/g,extraSpaceRegex=/\s+/g;function resolveSelectorWithAmp(R,E){const U=[];return E.split(separatorRegex).forEach(G=>{let Y=ampCount(G);if(Y){if(Y===1){R.forEach(Q=>{U.push(G.replace("&",Q))});return}}else{R.forEach(Q=>{U.push((Q&&Q+" ")+G)});return}let J=[G];for(;Y--;){const Q=[];J.forEach(X=>{R.forEach(Z=>{Q.push(X.replace("&",Z))})}),J=Q}J.forEach(Q=>U.push(Q))}),U}function resolveSelector(R,E){const U=[];return E.split(separatorRegex).forEach(G=>{R.forEach(Y=>{U.push((Y&&Y+" ")+G)})}),U}function parseSelectorPath(R){let E=[""];return R.forEach(U=>{U=U&&U.trim(),U&&(U.includes("&")?E=resolveSelectorWithAmp(E,U):E=resolveSelector(E,U))}),E.join(", ").replace(extraSpaceRegex," ")}function removeElement(R){if(!R)return;const E=R.parentElement;E&&E.removeChild(R)}function queryElement(R){return document.querySelector(`style[cssr-id="${R}"]`)}function createElement(R){const E=document.createElement("style");return E.setAttribute("cssr-id",R),E}function isMediaOrSupports(R){return R?/^\s*@(s|m)/.test(R):!1}const kebabRegex=/[A-Z]/g;function kebabCase$1(R){return R.replace(kebabRegex,E=>"-"+E.toLowerCase())}function unwrapProperty(R,E="  "){return typeof R=="object"&&R!==null?` {
`+Object.entries(R).map(U=>E+`  ${kebabCase$1(U[0])}: ${U[1]};`).join(`
`)+`
`+E+"}":`: ${R};`}function unwrapProperties(R,E,U){return typeof R=="function"?R({context:E.context,props:U}):R}function createStyle(R,E,U,G){if(!E)return"";const Y=unwrapProperties(E,U,G);if(!Y)return"";if(typeof Y=="string")return`${R} {
${Y}
}`;const J=Object.keys(Y);if(J.length===0)return U.config.keepEmptyBlock?R+` {
}`:"";const Q=R?[R+" {"]:[];return J.forEach(X=>{const Z=Y[X];if(X==="raw"){Q.push(`
`+Z+`
`);return}X=kebabCase$1(X),Z!=null&&Q.push(`  ${X}${unwrapProperty(Z)}`)}),R&&Q.push("}"),Q.join(`
`)}function loopCNodeListWithCallback(R,E,U){!R||R.forEach(G=>{if(Array.isArray(G))loopCNodeListWithCallback(G,E,U);else if(typeof G=="function"){const Y=G(E);Array.isArray(Y)?loopCNodeListWithCallback(Y,E,U):Y&&U(Y)}else G&&U(G)})}function traverseCNode(R,E,U,G,Y,J){const Q=R.$;let X="";if(!Q||typeof Q=="string")isMediaOrSupports(Q)?X=Q:E.push(Q);else if(typeof Q=="function"){const te=Q({context:G.context,props:Y});isMediaOrSupports(te)?X=te:E.push(te)}else if(Q.before&&Q.before(G.context),!Q.$||typeof Q.$=="string")isMediaOrSupports(Q.$)?X=Q.$:E.push(Q.$);else if(Q.$){const te=Q.$({context:G.context,props:Y});isMediaOrSupports(te)?X=te:E.push(te)}const Z=parseSelectorPath(E),ee=createStyle(Z,R.props,G,Y);X?(U.push(`${X} {`),J&&ee&&J.insertRule(`${X} {
${ee}
}
`)):(J&&ee&&J.insertRule(ee),!J&&ee.length&&U.push(ee)),R.children&&loopCNodeListWithCallback(R.children,{context:G.context,props:Y},te=>{if(typeof te=="string"){const ne=createStyle(Z,{raw:te},G,Y);J?J.insertRule(ne):U.push(ne)}else traverseCNode(te,E,U,G,Y,J)}),E.pop(),X&&U.push("}"),Q&&Q.after&&Q.after(G.context)}function render$1(R,E,U,G=!1){const Y=[];return traverseCNode(R,[],Y,E,U,G?R.instance.__styleSheet:void 0),G?"":Y.join(`

`)}function murmur2(R){for(var E=0,U,G=0,Y=R.length;Y>=4;++G,Y-=4)U=R.charCodeAt(G)&255|(R.charCodeAt(++G)&255)<<8|(R.charCodeAt(++G)&255)<<16|(R.charCodeAt(++G)&255)<<24,U=(U&65535)*1540483477+((U>>>16)*59797<<16),U^=U>>>24,E=(U&65535)*1540483477+((U>>>16)*59797<<16)^(E&65535)*1540483477+((E>>>16)*59797<<16);switch(Y){case 3:E^=(R.charCodeAt(G+2)&255)<<16;case 2:E^=(R.charCodeAt(G+1)&255)<<8;case 1:E^=R.charCodeAt(G)&255,E=(E&65535)*1540483477+((E>>>16)*59797<<16)}return E^=E>>>13,E=(E&65535)*1540483477+((E>>>16)*59797<<16),((E^E>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function unmount(R,E,U){const{els:G}=E;if(U===void 0)G.forEach(removeElement),E.els=[];else{const Y=queryElement(U);Y&&G.includes(Y)&&(removeElement(Y),E.els=G.filter(J=>J!==Y))}}function addElementToList(R,E){R.push(E)}function mount(R,E,U,G,Y,J,Q,X,Z){if(J&&!Z){if(U===void 0){console.error("[css-render/mount]: `id` is required in `silent` mode.");return}const oe=window.__cssrContext;oe[U]||(oe[U]=!0,render$1(E,R,G,J));return}let ee;if(U===void 0&&(ee=E.render(G),U=murmur2(ee)),Z){Z.adapter(U,ee!=null?ee:E.render(G));return}const te=queryElement(U);if(te!==null&&!Q)return te;const ne=te!=null?te:createElement(U);if(ee===void 0&&(ee=E.render(G)),ne.textContent=ee,te!==null)return te;if(X){const oe=document.head.querySelector(`meta[name="${X}"]`);if(oe)return document.head.insertBefore(ne,oe),addElementToList(E.els,ne),ne}return Y?document.head.insertBefore(ne,document.head.querySelector("style, link")):document.head.appendChild(ne),addElementToList(E.els,ne),ne}function wrappedRender(R){return render$1(this,this.instance,R)}function wrappedMount(R={}){const{id:E,ssr:U,props:G,head:Y=!1,silent:J=!1,force:Q=!1,anchorMetaName:X}=R;return mount(this.instance,this,E,G,Y,J,Q,X,U)}function wrappedUnmount(R={}){const{id:E}=R;unmount(this.instance,this,E)}const createCNode=function(R,E,U,G){return{instance:R,$:E,props:U,children:G,els:[],render:wrappedRender,mount:wrappedMount,unmount:wrappedUnmount}},c$3=function(R,E,U,G){return Array.isArray(E)?createCNode(R,{$:null},null,E):Array.isArray(U)?createCNode(R,E,null,U):Array.isArray(G)?createCNode(R,E,U,G):createCNode(R,E,U,null)};function CssRender(R={}){let E=null;const U={c:(...G)=>c$3(U,...G),use:(G,...Y)=>G.install(U,...Y),find:queryElement,context:{},config:R,get __styleSheet(){if(!E){const G=document.createElement("style");return document.head.appendChild(G),E=document.styleSheets[document.styleSheets.length-1],E}return E}};return U}function exists(R,E){if(R===void 0)return!1;if(E){const{context:{ids:U}}=E;return U.has(R)}return queryElement(R)!==null}function plugin(R){let E=".",U="__",G="--",Y;if(R){let pe=R.blockPrefix;pe&&(E=pe),pe=R.elementPrefix,pe&&(U=pe),pe=R.modifierPrefix,pe&&(G=pe)}const J={install(pe){Y=pe.c;const ye=pe.context;ye.bem={},ye.bem.b=null,ye.bem.els=null}};function Q(pe){let ye,Se;return{before(ge){ye=ge.bem.b,Se=ge.bem.els,ge.bem.els=null},after(ge){ge.bem.b=ye,ge.bem.els=Se},$({context:ge,props:_e}){return pe=typeof pe=="string"?pe:pe({context:ge,props:_e}),ge.bem.b=pe,`${(_e==null?void 0:_e.bPrefix)||E}${ge.bem.b}`}}}function X(pe){let ye;return{before(Se){ye=Se.bem.els},after(Se){Se.bem.els=ye},$({context:Se,props:ge}){return pe=typeof pe=="string"?pe:pe({context:Se,props:ge}),Se.bem.els=pe.split(",").map(_e=>_e.trim()),Se.bem.els.map(_e=>`${(ge==null?void 0:ge.bPrefix)||E}${Se.bem.b}${U}${_e}`).join(", ")}}}function Z(pe){return{$({context:ye,props:Se}){pe=typeof pe=="string"?pe:pe({context:ye,props:Se});const ge=pe.split(",").map(Ee=>Ee.trim());function _e(Ee){return ge.map(Re=>`&${(Se==null?void 0:Se.bPrefix)||E}${ye.bem.b}${Ee!==void 0?`${U}${Ee}`:""}${G}${Re}`).join(", ")}const Te=ye.bem.els;return Te!==null?_e(Te[0]):_e()}}}function ee(pe){return{$({context:ye,props:Se}){pe=typeof pe=="string"?pe:pe({context:ye,props:Se});const ge=ye.bem.els;return`&:not(${(Se==null?void 0:Se.bPrefix)||E}${ye.bem.b}${ge!==null&&ge.length>0?`${U}${ge[0]}`:""}${G}${pe})`}}}return Object.assign(J,{cB:(...pe)=>Y(Q(pe[0]),pe[1],pe[2]),cE:(...pe)=>Y(X(pe[0]),pe[1],pe[2]),cM:(...pe)=>Y(Z(pe[0]),pe[1],pe[2]),cNotM:(...pe)=>Y(ee(pe[0]),pe[1],pe[2])}),J}function useFalseUntilTruthy(R){const E=ref(!!R.value);if(E.value)return readonly$1(E);const U=watch(R,G=>{G&&(E.value=!0,U())});return readonly$1(E)}function useMemo(R){const E=computed(R),U=ref(E.value);return watch(E,G=>{U.value=G}),typeof R=="function"?U:{__v_isRef:!0,get value(){return U.value},set value(G){R.set(G)}}}function hasInstance(){return getCurrentInstance()!==null}const isBrowser$2=typeof window<"u";let fontsReady,isFontReady;const init$1=()=>{var R,E;fontsReady=isBrowser$2?(E=(R=document)===null||R===void 0?void 0:R.fonts)===null||E===void 0?void 0:E.ready:void 0,isFontReady=!1,fontsReady!==void 0?fontsReady.then(()=>{isFontReady=!0}):isFontReady=!0};init$1();function onFontsReady(R){if(isFontReady)return;let E=!1;onMounted(()=>{isFontReady||fontsReady==null||fontsReady.then(()=>{E||R()})}),onBeforeUnmount(()=>{E=!0})}function getEventTarget(R){return R.composedPath()[0]}const traps={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function createTrapHandler(R,E,U){if(R==="mousemoveoutside"){const G=Y=>{E.contains(getEventTarget(Y))||U(Y)};return{mousemove:G,touchstart:G}}else if(R==="clickoutside"){let G=!1;const Y=Q=>{G=!E.contains(getEventTarget(Q))},J=Q=>{!G||E.contains(getEventTarget(Q))||U(Q)};return{mousedown:Y,mouseup:J,touchstart:Y,touchend:J}}return console.error(`[evtd/create-trap-handler]: name \`${R}\` is invalid. This could be a bug of evtd.`),{}}function ensureTrapHandlers(R,E,U){const G=traps[R];let Y=G.get(E);Y===void 0&&G.set(E,Y=new WeakMap);let J=Y.get(U);return J===void 0&&Y.set(U,J=createTrapHandler(R,E,U)),J}function trapOn(R,E,U,G){if(R==="mousemoveoutside"||R==="clickoutside"){const Y=ensureTrapHandlers(R,E,U);return Object.keys(Y).forEach(J=>{on$1(J,document,Y[J],G)}),!0}return!1}function trapOff(R,E,U,G){if(R==="mousemoveoutside"||R==="clickoutside"){const Y=ensureTrapHandlers(R,E,U);return Object.keys(Y).forEach(J=>{off$1(J,document,Y[J],G)}),!0}return!1}function createDelegate(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const R=new WeakMap,E=new WeakMap;function U(){R.set(this,!0)}function G(){R.set(this,!0),E.set(this,!0)}function Y(Ie,Oe,Pe){const Le=Ie[Oe];return Ie[Oe]=function(){return Pe.apply(Ie,arguments),Le.apply(Ie,arguments)},Ie}function J(Ie,Oe){Ie[Oe]=Event.prototype[Oe]}const Q=new WeakMap,X=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function Z(){var Ie;return(Ie=Q.get(this))!==null&&Ie!==void 0?Ie:null}function ee(Ie,Oe){X!==void 0&&Object.defineProperty(Ie,"currentTarget",{configurable:!0,enumerable:!0,get:Oe!=null?Oe:X.get})}const te={bubble:{},capture:{}},ne={};function oe(){const Ie=function(Oe){const{type:Pe,eventPhase:Le,bubbles:Me}=Oe,ue=getEventTarget(Oe);if(Le===2)return;const ae=Le===1?"capture":"bubble";let se=ue;const le=[];for(;se===null&&(se=window),le.push(se),se!==window;)se=se.parentNode||null;const fe=te.capture[Pe],be=te.bubble[Pe];if(Y(Oe,"stopPropagation",U),Y(Oe,"stopImmediatePropagation",G),ee(Oe,Z),ae==="capture"){if(fe===void 0)return;for(let ve=le.length-1;ve>=0&&!R.has(Oe);--ve){const xe=le[ve],he=fe.get(xe);if(he!==void 0){Q.set(Oe,xe);for(const me of he){if(E.has(Oe))break;me(Oe)}}if(ve===0&&!Me&&be!==void 0){const me=be.get(xe);if(me!==void 0)for(const de of me){if(E.has(Oe))break;de(Oe)}}}}else if(ae==="bubble"){if(be===void 0)return;for(let ve=0;ve<le.length&&!R.has(Oe);++ve){const xe=le[ve],he=be.get(xe);if(he!==void 0){Q.set(Oe,xe);for(const me of he){if(E.has(Oe))break;me(Oe)}}}}J(Oe,"stopPropagation"),J(Oe,"stopImmediatePropagation"),ee(Oe)};return Ie.displayName="evtdUnifiedHandler",Ie}function ce(){const Ie=function(Oe){const{type:Pe,eventPhase:Le}=Oe;if(Le!==2)return;const Me=ne[Pe];Me!==void 0&&Me.forEach(ue=>ue(Oe))};return Ie.displayName="evtdUnifiedWindowEventHandler",Ie}const pe=oe(),ye=ce();function Se(Ie,Oe){const Pe=te[Ie];return Pe[Oe]===void 0&&(Pe[Oe]=new Map,window.addEventListener(Oe,pe,Ie==="capture")),Pe[Oe]}function ge(Ie){return ne[Ie]===void 0&&(ne[Ie]=new Set,window.addEventListener(Ie,ye)),ne[Ie]}function _e(Ie,Oe){let Pe=Ie.get(Oe);return Pe===void 0&&Ie.set(Oe,Pe=new Set),Pe}function Te(Ie,Oe,Pe,Le){const Me=te[Oe][Pe];if(Me!==void 0){const ue=Me.get(Ie);if(ue!==void 0&&ue.has(Le))return!0}return!1}function Ee(Ie,Oe){const Pe=ne[Ie];return!!(Pe!==void 0&&Pe.has(Oe))}function Re(Ie,Oe,Pe,Le){let Me;if(typeof Le=="object"&&Le.once===!0?Me=fe=>{Ae(Ie,Oe,Me,Le),Pe(fe)}:Me=Pe,trapOn(Ie,Oe,Me,Le))return;const ae=Le===!0||typeof Le=="object"&&Le.capture===!0?"capture":"bubble",se=Se(ae,Ie),le=_e(se,Oe);if(le.has(Me)||le.add(Me),Oe===window){const fe=ge(Ie);fe.has(Me)||fe.add(Me)}}function Ae(Ie,Oe,Pe,Le){if(trapOff(Ie,Oe,Pe,Le))return;const ue=Le===!0||typeof Le=="object"&&Le.capture===!0,ae=ue?"capture":"bubble",se=Se(ae,Ie),le=_e(se,Oe);if(Oe===window&&!Te(Oe,ue?"bubble":"capture",Ie,Pe)&&Ee(Ie,Pe)){const be=ne[Ie];be.delete(Pe),be.size===0&&(window.removeEventListener(Ie,ye),ne[Ie]=void 0)}le.has(Pe)&&le.delete(Pe),le.size===0&&se.delete(Oe),se.size===0&&(window.removeEventListener(Ie,pe,ae==="capture"),te[ae][Ie]=void 0)}return{on:Re,off:Ae}}const{on:on$1,off:off$1}=createDelegate(),mousePositionRef=ref(null);function clickHandler(R){if(R.clientX>0||R.clientY>0)mousePositionRef.value={x:R.clientX,y:R.clientY};else{const{target:E}=R;if(E instanceof Element){const{left:U,top:G,width:Y,height:J}=E.getBoundingClientRect();U>0||G>0?mousePositionRef.value={x:U+Y/2,y:G+J/2}:mousePositionRef.value={x:0,y:0}}else mousePositionRef.value=null}}let usedCount$1=0,managable$1=!0;function useClickPosition(){if(!isBrowser$2)return readonly$1(ref(null));usedCount$1===0&&on$1("click",document,clickHandler,!0);const R=()=>{usedCount$1+=1};return managable$1&&(managable$1=hasInstance())?(onBeforeMount(R),onBeforeUnmount(()=>{usedCount$1-=1,usedCount$1===0&&off$1("click",document,clickHandler,!0)})):R(),readonly$1(mousePositionRef)}const clickedTimeRef=ref(void 0);let usedCount=0;function handleClick$1(){clickedTimeRef.value=Date.now()}let managable=!0;function useClicked(R){if(!isBrowser$2)return readonly$1(ref(!1));const E=ref(!1);let U=null;function G(){U!==null&&window.clearTimeout(U)}function Y(){G(),E.value=!0,U=window.setTimeout(()=>{E.value=!1},R)}usedCount===0&&on$1("click",window,handleClick$1,!0);const J=()=>{usedCount+=1,on$1("click",window,Y,!0)};return managable&&(managable=hasInstance())?(onBeforeMount(J),onBeforeUnmount(()=>{usedCount-=1,usedCount===0&&off$1("click",window,handleClick$1,!0),off$1("click",window,Y,!0),G()})):J(),readonly$1(E)}function useMergedState(R,E){return watch(R,U=>{U!==void 0&&(E.value=U)}),computed(()=>R.value===void 0?E.value:R.value)}function isMounted(){const R=ref(!1);return onMounted(()=>{R.value=!0}),readonly$1(R)}function useCompitable(R,E){return computed(()=>{for(const U of E)if(R[U]!==void 0)return R[U];return R[E[E.length-1]]})}const isIos=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function useIsIos(){return isIos}const defaultBreakpointOptions={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function createMediaQuery(R){return`(min-width: ${R}px)`}const mqlMap={};function useBreakpoints(R=defaultBreakpointOptions){if(!isBrowser$2)return computed(()=>[]);if(typeof window.matchMedia!="function")return computed(()=>[]);const E=ref({}),U=Object.keys(R),G=(Y,J)=>{Y.matches?E.value[J]=!0:E.value[J]=!1};return U.forEach(Y=>{const J=R[Y];let Q,X;mqlMap[J]===void 0?(Q=window.matchMedia(createMediaQuery(J)),Q.addEventListener?Q.addEventListener("change",Z=>{X.forEach(ee=>{ee(Z,Y)})}):Q.addListener&&Q.addListener(Z=>{X.forEach(ee=>{ee(Z,Y)})}),X=new Set,mqlMap[J]={mql:Q,cbs:X}):(Q=mqlMap[J].mql,X=mqlMap[J].cbs),X.add(G),Q.matches&&X.forEach(Z=>{Z(Q,Y)})}),onBeforeUnmount(()=>{U.forEach(Y=>{const{cbs:J}=mqlMap[R[Y]];J.has(G)&&J.delete(G)})}),computed(()=>{const{value:Y}=E;return U.filter(J=>Y[J])})}function useKeyboard(R={},E){const U=reactive({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:G,keyup:Y}=R,J=Z=>{switch(Z.key){case"Control":U.ctrl=!0;break;case"Meta":U.command=!0,U.win=!0;break;case"Shift":U.shift=!0;break;case"Tab":U.tab=!0;break}G!==void 0&&Object.keys(G).forEach(ee=>{if(ee!==Z.key)return;const te=G[ee];if(typeof te=="function")te(Z);else{const{stop:ne=!1,prevent:oe=!1}=te;ne&&Z.stopPropagation(),oe&&Z.preventDefault(),te.handler(Z)}})},Q=Z=>{switch(Z.key){case"Control":U.ctrl=!1;break;case"Meta":U.command=!1,U.win=!1;break;case"Shift":U.shift=!1;break;case"Tab":U.tab=!1;break}Y!==void 0&&Object.keys(Y).forEach(ee=>{if(ee!==Z.key)return;const te=Y[ee];if(typeof te=="function")te(Z);else{const{stop:ne=!1,prevent:oe=!1}=te;ne&&Z.stopPropagation(),oe&&Z.preventDefault(),te.handler(Z)}})},X=()=>{(E===void 0||E.value)&&(on$1("keydown",document,J),on$1("keyup",document,Q)),E!==void 0&&watch(E,Z=>{Z?(on$1("keydown",document,J),on$1("keyup",document,Q)):(off$1("keydown",document,J),off$1("keyup",document,Q))})};return hasInstance()?(onBeforeMount(X),onBeforeUnmount(()=>{(E===void 0||E.value)&&(off$1("keydown",document,J),off$1("keyup",document,Q))})):X(),readonly$1(U)}function getSlot(R,E,U="default"){const G=E[U];if(G===void 0)throw new Error(`[vueuc/${R}]: slot[${U}] is empty.`);return G()}function flatten$1(R,E=!0,U=[]){return R.forEach(G=>{if(G!==null){if(typeof G!="object"){(typeof G=="string"||typeof G=="number")&&U.push(createTextVNode(String(G)));return}if(Array.isArray(G)){flatten$1(G,E,U);return}if(G.type===Fragment$2){if(G.children===null)return;Array.isArray(G.children)&&flatten$1(G.children,E,U)}else G.type!==Comment&&U.push(G)}}),U}function getFirstVNode(R,E,U="default"){const G=E[U];if(G===void 0)throw new Error(`[vueuc/${R}]: slot[${U}] is empty.`);const Y=flatten$1(G());if(Y.length===1)return Y[0];throw new Error(`[vueuc/${R}]: slot[${U}] should have exactly one child.`)}let viewMeasurer=null;function ensureViewBoundingRect(){if(viewMeasurer===null&&(viewMeasurer=document.getElementById("v-binder-view-measurer"),viewMeasurer===null)){viewMeasurer=document.createElement("div"),viewMeasurer.id="v-binder-view-measurer";const{style:R}=viewMeasurer;R.position="fixed",R.left="0",R.right="0",R.top="0",R.bottom="0",R.pointerEvents="none",R.visibility="hidden",document.body.appendChild(viewMeasurer)}return viewMeasurer.getBoundingClientRect()}function getPointRect(R,E){const U=ensureViewBoundingRect();return{top:E,left:R,height:0,width:0,right:U.width-R,bottom:U.height-E}}function getRect$1(R){const E=R.getBoundingClientRect(),U=ensureViewBoundingRect();return{left:E.left-U.left,top:E.top-U.top,bottom:U.height+U.top-E.bottom,right:U.width+U.left-E.right,width:E.width,height:E.height}}function getParentNode$1(R){return R.nodeType===9?null:R.parentNode}function getScrollParent$1(R){if(R===null)return null;const E=getParentNode$1(R);if(E===null)return null;if(E.nodeType===9)return document;if(E.nodeType===1){const{overflow:U,overflowX:G,overflowY:Y}=getComputedStyle(E);if(/(auto|scroll|overlay)/.test(U+Y+G))return E}return getScrollParent$1(E)}const Binder=defineComponent({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(R){var E;provide("VBinder",(E=getCurrentInstance())===null||E===void 0?void 0:E.proxy);const U=inject("VBinder",null),G=ref(null),Y=ge=>{G.value=ge,U&&R.syncTargetWithParent&&U.setTargetRef(ge)};let J=[];const Q=()=>{let ge=G.value;for(;ge=getScrollParent$1(ge),ge!==null;)J.push(ge);for(const _e of J)on$1("scroll",_e,ne,!0)},X=()=>{for(const ge of J)off$1("scroll",ge,ne,!0);J=[]},Z=new Set,ee=ge=>{Z.size===0&&Q(),Z.has(ge)||Z.add(ge)},te=ge=>{Z.has(ge)&&Z.delete(ge),Z.size===0&&X()},ne=()=>{beforeNextFrameOnce(oe)},oe=()=>{Z.forEach(ge=>ge())},ce=new Set,pe=ge=>{ce.size===0&&on$1("resize",window,Se),ce.has(ge)||ce.add(ge)},ye=ge=>{ce.has(ge)&&ce.delete(ge),ce.size===0&&off$1("resize",window,Se)},Se=()=>{ce.forEach(ge=>ge())};return onBeforeUnmount(()=>{off$1("resize",window,Se),X()}),{targetRef:G,setTargetRef:Y,addScrollListener:ee,removeScrollListener:te,addResizeListener:pe,removeResizeListener:ye}},render(){return getSlot("binder",this.$slots)}}),VBinder=Binder,VTarget=defineComponent({name:"Target",setup(){const{setTargetRef:R,syncTarget:E}=inject("VBinder");return{syncTarget:E,setTargetDirective:{mounted:R,updated:R}}},render(){const{syncTarget:R,setTargetDirective:E}=this;return R?withDirectives(getFirstVNode("follower",this.$slots),[[E]]):getFirstVNode("follower",this.$slots)}}),ctxKey$1="@@mmoContext",mousemoveoutside={mounted(R,{value:E}){R[ctxKey$1]={handler:void 0},typeof E=="function"&&(R[ctxKey$1].handler=E,on$1("mousemoveoutside",R,E))},updated(R,{value:E}){const U=R[ctxKey$1];typeof E=="function"?U.handler?U.handler!==E&&(off$1("mousemoveoutside",R,U.handler),U.handler=E,on$1("mousemoveoutside",R,E)):(R[ctxKey$1].handler=E,on$1("mousemoveoutside",R,E)):U.handler&&(off$1("mousemoveoutside",R,U.handler),U.handler=void 0)},unmounted(R){const{handler:E}=R[ctxKey$1];E&&off$1("mousemoveoutside",R,E),R[ctxKey$1].handler=void 0}},mousemoveoutside$1=mousemoveoutside,ctxKey="@@coContext",clickoutside={mounted(R,{value:E,modifiers:U}){R[ctxKey]={handler:void 0},typeof E=="function"&&(R[ctxKey].handler=E,on$1("clickoutside",R,E,{capture:U.capture}))},updated(R,{value:E,modifiers:U}){const G=R[ctxKey];typeof E=="function"?G.handler?G.handler!==E&&(off$1("clickoutside",R,G.handler,{capture:U.capture}),G.handler=E,on$1("clickoutside",R,E,{capture:U.capture})):(R[ctxKey].handler=E,on$1("clickoutside",R,E,{capture:U.capture})):G.handler&&(off$1("clickoutside",R,G.handler,{capture:U.capture}),G.handler=void 0)},unmounted(R,{modifiers:E}){const{handler:U}=R[ctxKey];U&&off$1("clickoutside",R,U,{capture:E.capture}),R[ctxKey].handler=void 0}},clickoutside$1=clickoutside;function warn$1(R,E){console.error(`[vdirs/${R}]: ${E}`)}class ZIndexManager{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(E,U){const{elementZIndex:G}=this;if(U!==void 0){E.style.zIndex=`${U}`,G.delete(E);return}const{nextZIndex:Y}=this;G.has(E)&&G.get(E)+1===this.nextZIndex||(E.style.zIndex=`${Y}`,G.set(E,Y),this.nextZIndex=Y+1,this.squashState())}unregister(E,U){const{elementZIndex:G}=this;G.has(E)?G.delete(E):U===void 0&&warn$1("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:E}=this;E||(this.nextZIndex=2e3),this.nextZIndex-E>2500&&this.rearrange()}rearrange(){const E=Array.from(this.elementZIndex.entries());E.sort((U,G)=>U[1]-G[1]),this.nextZIndex=2e3,E.forEach(U=>{const G=U[0],Y=this.nextZIndex++;`${Y}`!==G.style.zIndex&&(G.style.zIndex=`${Y}`)})}}const zIndexManager=new ZIndexManager,ctx="@@ziContext",zindexable={mounted(R,E){const{value:U={}}=E,{zIndex:G,enabled:Y}=U;R[ctx]={enabled:!!Y,initialized:!1},Y&&(zIndexManager.ensureZIndex(R,G),R[ctx].initialized=!0)},updated(R,E){const{value:U={}}=E,{zIndex:G,enabled:Y}=U,J=R[ctx].enabled;Y&&!J&&(zIndexManager.ensureZIndex(R,G),R[ctx].initialized=!0),R[ctx].enabled=!!Y},unmounted(R,E){if(!R[ctx].initialized)return;const{value:U={}}=E,{zIndex:G}=U;zIndexManager.unregister(R,G)}},zindexable$1=zindexable,ssrContextKey=Symbol("@css-render/vue3-ssr");function createStyleString(R,E){return`<style cssr-id="${R}">
${E}
</style>`}function ssrAdapter(R,E){const U=inject(ssrContextKey,null);if(U===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:G,ids:Y}=U;Y.has(R)||G!==null&&(Y.add(R),G.push(createStyleString(R,E)))}const isBrowser$1=typeof document<"u";function useSsrAdapter(){if(isBrowser$1)return;const R=inject(ssrContextKey,null);if(R!==null)return{adapter:ssrAdapter,context:R}}function warn(R,E){console.error(`[vueuc/${R}]: ${E}`)}const{c:c$2}=CssRender(),cssrAnchorMetaName="vueuc-style";function lowBit(R){return R&-R}class FinweckTree{constructor(E,U){this.l=E,this.min=U;const G=new Array(E+1);for(let Y=0;Y<E+1;++Y)G[Y]=0;this.ft=G}add(E,U){if(U===0)return;const{l:G,ft:Y}=this;for(E+=1;E<=G;)Y[E]+=U,E+=lowBit(E)}get(E){return this.sum(E+1)-this.sum(E)}sum(E){if(E===void 0&&(E=this.l),E<=0)return 0;const{ft:U,min:G,l:Y}=this;if(E>Y)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let J=E*G;for(;E>0;)J+=U[E],E-=lowBit(E);return J}getBound(E){let U=0,G=this.l;for(;G>U;){const Y=Math.floor((U+G)/2),J=this.sum(Y);if(J>E){G=Y;continue}else if(J<E){if(U===Y)return this.sum(U+1)<=E?U+1:Y;U=Y}else return Y}return U}}function resolveTo(R){return typeof R=="string"?document.querySelector(R):R()}const LazyTeleport=defineComponent({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(R){return{showTeleport:useFalseUntilTruthy(toRef(R,"show")),mergedTo:computed(()=>{const{to:E}=R;return E!=null?E:"body"})}},render(){return this.showTeleport?this.disabled?getSlot("lazy-teleport",this.$slots):h$2(Teleport,{disabled:this.disabled,to:this.mergedTo},getSlot("lazy-teleport",this.$slots)):null}}),oppositionPositions={top:"bottom",bottom:"top",left:"right",right:"left"},oppositeAligns={start:"end",center:"center",end:"start"},propToCompare={top:"height",bottom:"height",left:"width",right:"width"},transformOrigins={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},overlapTransformOrigin={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},oppositeAlignCssPositionProps={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},keepOffsetDirection={top:!0,bottom:!1,left:!0,right:!1},cssPositionToOppositeAlign={top:"end",bottom:"start",left:"end",right:"start"};function getPlacementAndOffsetOfFollower(R,E,U,G,Y,J){if(!Y||J)return{placement:R,top:0,left:0};const[Q,X]=R.split("-");let Z=X!=null?X:"center",ee={top:0,left:0};const te=(ce,pe,ye)=>{let Se=0,ge=0;const _e=U[ce]-E[pe]-E[ce];return _e>0&&G&&(ye?ge=keepOffsetDirection[pe]?_e:-_e:Se=keepOffsetDirection[pe]?_e:-_e),{left:Se,top:ge}},ne=Q==="left"||Q==="right";if(Z!=="center"){const ce=oppositeAlignCssPositionProps[R],pe=oppositionPositions[ce],ye=propToCompare[ce];if(U[ye]>E[ye]){if(E[ce]+E[ye]<U[ye]){const Se=(U[ye]-E[ye])/2;E[ce]<Se||E[pe]<Se?E[ce]<E[pe]?(Z=oppositeAligns[X],ee=te(ye,pe,ne)):ee=te(ye,ce,ne):Z="center"}}else U[ye]<E[ye]&&E[pe]<0&&E[ce]>E[pe]&&(Z=oppositeAligns[X])}else{const ce=Q==="bottom"||Q==="top"?"left":"top",pe=oppositionPositions[ce],ye=propToCompare[ce],Se=(U[ye]-E[ye])/2;(E[ce]<Se||E[pe]<Se)&&(E[ce]>E[pe]?(Z=cssPositionToOppositeAlign[ce],ee=te(ye,ce,ne)):(Z=cssPositionToOppositeAlign[pe],ee=te(ye,pe,ne)))}let oe=Q;return E[Q]<U[propToCompare[Q]]&&E[Q]<E[oppositionPositions[Q]]&&(oe=oppositionPositions[Q]),{placement:Z!=="center"?`${oe}-${Z}`:oe,left:ee.left,top:ee.top}}function getProperTransformOrigin(R,E){return E?overlapTransformOrigin[R]:transformOrigins[R]}function getOffset(R,E,U,G,Y,J){if(J)switch(R){case"bottom-start":return{top:`${Math.round(U.top-E.top+U.height)}px`,left:`${Math.round(U.left-E.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(U.top-E.top+U.height)}px`,left:`${Math.round(U.left-E.left+U.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(U.top-E.top)}px`,left:`${Math.round(U.left-E.left)}px`,transform:""};case"top-end":return{top:`${Math.round(U.top-E.top)}px`,left:`${Math.round(U.left-E.left+U.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(U.top-E.top)}px`,left:`${Math.round(U.left-E.left+U.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(U.top-E.top+U.height)}px`,left:`${Math.round(U.left-E.left+U.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(U.top-E.top)}px`,left:`${Math.round(U.left-E.left)}px`,transform:""};case"left-end":return{top:`${Math.round(U.top-E.top+U.height)}px`,left:`${Math.round(U.left-E.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(U.top-E.top)}px`,left:`${Math.round(U.left-E.left+U.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(U.top-E.top+U.height/2)}px`,left:`${Math.round(U.left-E.left+U.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(U.top-E.top+U.height/2)}px`,left:`${Math.round(U.left-E.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(U.top-E.top+U.height)}px`,left:`${Math.round(U.left-E.left+U.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(R){case"bottom-start":return{top:`${Math.round(U.top-E.top+U.height+G)}px`,left:`${Math.round(U.left-E.left+Y)}px`,transform:""};case"bottom-end":return{top:`${Math.round(U.top-E.top+U.height+G)}px`,left:`${Math.round(U.left-E.left+U.width+Y)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(U.top-E.top+G)}px`,left:`${Math.round(U.left-E.left+Y)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(U.top-E.top+G)}px`,left:`${Math.round(U.left-E.left+U.width+Y)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(U.top-E.top+G)}px`,left:`${Math.round(U.left-E.left+U.width+Y)}px`,transform:""};case"right-end":return{top:`${Math.round(U.top-E.top+U.height+G)}px`,left:`${Math.round(U.left-E.left+U.width+Y)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(U.top-E.top+G)}px`,left:`${Math.round(U.left-E.left+Y)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(U.top-E.top+U.height+G)}px`,left:`${Math.round(U.left-E.left+Y)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(U.top-E.top+G)}px`,left:`${Math.round(U.left-E.left+U.width/2+Y)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(U.top-E.top+U.height/2+G)}px`,left:`${Math.round(U.left-E.left+U.width+Y)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(U.top-E.top+U.height/2+G)}px`,left:`${Math.round(U.left-E.left+Y)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(U.top-E.top+U.height+G)}px`,left:`${Math.round(U.left-E.left+U.width/2+Y)}px`,transform:"translateX(-50%)"}}}const style$2=c$2([c$2(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),c$2(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[c$2("> *",{pointerEvents:"all"})])]),VFollower=defineComponent({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(R){const E=inject("VBinder"),U=useMemo(()=>R.enabled!==void 0?R.enabled:R.show),G=ref(null),Y=ref(null),J=()=>{const{syncTrigger:oe}=R;oe.includes("scroll")&&E.addScrollListener(Z),oe.includes("resize")&&E.addResizeListener(Z)},Q=()=>{E.removeScrollListener(Z),E.removeResizeListener(Z)};onMounted(()=>{U.value&&(Z(),J())});const X=useSsrAdapter();style$2.mount({id:"vueuc/binder",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:X}),onBeforeUnmount(()=>{Q()}),onFontsReady(()=>{U.value&&Z()});const Z=()=>{if(!U.value)return;const oe=G.value;if(oe===null)return;const ce=E.targetRef,{x:pe,y:ye,overlap:Se}=R,ge=pe!==void 0&&ye!==void 0?getPointRect(pe,ye):getRect$1(ce);oe.style.setProperty("--v-target-width",`${Math.round(ge.width)}px`),oe.style.setProperty("--v-target-height",`${Math.round(ge.height)}px`);const{width:_e,minWidth:Te,placement:Ee,internalShift:Re,flip:Ae}=R;oe.setAttribute("v-placement",Ee),Se?oe.setAttribute("v-overlap",""):oe.removeAttribute("v-overlap");const{style:Ie}=oe;_e==="target"?Ie.width=`${ge.width}px`:_e!==void 0?Ie.width=_e:Ie.width="",Te==="target"?Ie.minWidth=`${ge.width}px`:Te!==void 0?Ie.minWidth=Te:Ie.minWidth="";const Oe=getRect$1(oe),Pe=getRect$1(Y.value),{left:Le,top:Me,placement:ue}=getPlacementAndOffsetOfFollower(Ee,ge,Oe,Re,Ae,Se),ae=getProperTransformOrigin(ue,Se),{left:se,top:le,transform:fe}=getOffset(ue,Pe,ge,Me,Le,Se);oe.setAttribute("v-placement",ue),oe.style.setProperty("--v-offset-left",`${Math.round(Le)}px`),oe.style.setProperty("--v-offset-top",`${Math.round(Me)}px`),oe.style.transform=`translateX(${se}) translateY(${le}) ${fe}`,oe.style.setProperty("--v-transform-origin",ae),oe.style.transformOrigin=ae};watch(U,oe=>{oe?(J(),ee()):Q()});const ee=()=>{nextTick().then(Z).catch(oe=>console.error(oe))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(oe=>{watch(toRef(R,oe),Z)}),["teleportDisabled"].forEach(oe=>{watch(toRef(R,oe),ee)}),watch(toRef(R,"syncTrigger"),oe=>{oe.includes("resize")?E.addResizeListener(Z):E.removeResizeListener(Z),oe.includes("scroll")?E.addScrollListener(Z):E.removeScrollListener(Z)});const te=isMounted(),ne=useMemo(()=>{const{to:oe}=R;if(oe!==void 0)return oe;te.value});return{VBinder:E,mergedEnabled:U,offsetContainerRef:Y,followerRef:G,mergedTo:ne,syncPosition:Z}},render(){return h$2(LazyTeleport,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var R,E;const U=h$2("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[h$2("div",{class:"v-binder-follower-content",ref:"followerRef"},(E=(R=this.$slots).default)===null||E===void 0?void 0:E.call(R))]);return this.zindexable?withDirectives(U,[[zindexable$1,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):U}})}});var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(R){return R.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(R){return R.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var R;typeof ErrorEvent=="function"?R=new ErrorEvent("error",{message:msg}):(R=document.createEvent("Event"),R.initEvent("error",!1,!1),R.message=msg),window.dispatchEvent(R)},ResizeObserverBoxOptions;(function(R){R.BORDER_BOX="border-box",R.CONTENT_BOX="content-box",R.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze=function(R){return Object.freeze(R)},ResizeObserverSize=function(){function R(E,U){this.inlineSize=E,this.blockSize=U,freeze(this)}return R}(),DOMRectReadOnly=function(){function R(E,U,G,Y){return this.x=E,this.y=U,this.width=G,this.height=Y,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return R.prototype.toJSON=function(){var E=this,U=E.x,G=E.y,Y=E.top,J=E.right,Q=E.bottom,X=E.left,Z=E.width,ee=E.height;return{x:U,y:G,top:Y,right:J,bottom:Q,left:X,width:Z,height:ee}},R.fromRect=function(E){return new R(E.x,E.y,E.width,E.height)},R}(),isSVG=function(R){return R instanceof SVGElement&&"getBBox"in R},isHidden=function(R){if(isSVG(R)){var E=R.getBBox(),U=E.width,G=E.height;return!U&&!G}var Y=R,J=Y.offsetWidth,Q=Y.offsetHeight;return!(J||Q||R.getClientRects().length)},isElement$4=function(R){var E,U;if(R instanceof Element)return!0;var G=(U=(E=R)===null||E===void 0?void 0:E.ownerDocument)===null||U===void 0?void 0:U.defaultView;return!!(G&&R instanceof G.Element)},isReplacedElement=function(R){switch(R.tagName){case"INPUT":if(R.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global$8=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global$8.navigator&&global$8.navigator.userAgent),parseDimension=function(R){return parseFloat(R||"0")},size$1=function(R,E,U){return R===void 0&&(R=0),E===void 0&&(E=0),U===void 0&&(U=!1),new ResizeObserverSize((U?E:R)||0,(U?R:E)||0)},zeroBoxes=freeze({devicePixelContentBoxSize:size$1(),borderBoxSize:size$1(),contentBoxSize:size$1(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(R,E){if(E===void 0&&(E=!1),cache.has(R)&&!E)return cache.get(R);if(isHidden(R))return cache.set(R,zeroBoxes),zeroBoxes;var U=getComputedStyle(R),G=isSVG(R)&&R.ownerSVGElement&&R.getBBox(),Y=!IE&&U.boxSizing==="border-box",J=verticalRegexp.test(U.writingMode||""),Q=!G&&scrollRegexp.test(U.overflowY||""),X=!G&&scrollRegexp.test(U.overflowX||""),Z=G?0:parseDimension(U.paddingTop),ee=G?0:parseDimension(U.paddingRight),te=G?0:parseDimension(U.paddingBottom),ne=G?0:parseDimension(U.paddingLeft),oe=G?0:parseDimension(U.borderTopWidth),ce=G?0:parseDimension(U.borderRightWidth),pe=G?0:parseDimension(U.borderBottomWidth),ye=G?0:parseDimension(U.borderLeftWidth),Se=ne+ee,ge=Z+te,_e=ye+ce,Te=oe+pe,Ee=X?R.offsetHeight-Te-R.clientHeight:0,Re=Q?R.offsetWidth-_e-R.clientWidth:0,Ae=Y?Se+_e:0,Ie=Y?ge+Te:0,Oe=G?G.width:parseDimension(U.width)-Ae-Re,Pe=G?G.height:parseDimension(U.height)-Ie-Ee,Le=Oe+Se+Re+_e,Me=Pe+ge+Ee+Te,ue=freeze({devicePixelContentBoxSize:size$1(Math.round(Oe*devicePixelRatio),Math.round(Pe*devicePixelRatio),J),borderBoxSize:size$1(Le,Me,J),contentBoxSize:size$1(Oe,Pe,J),contentRect:new DOMRectReadOnly(ne,Z,Oe,Pe)});return cache.set(R,ue),ue},calculateBoxSize=function(R,E,U){var G=calculateBoxSizes(R,U),Y=G.borderBoxSize,J=G.contentBoxSize,Q=G.devicePixelContentBoxSize;switch(E){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return Q;case ResizeObserverBoxOptions.BORDER_BOX:return Y;default:return J}},ResizeObserverEntry=function(){function R(E){var U=calculateBoxSizes(E);this.target=E,this.contentRect=U.contentRect,this.borderBoxSize=freeze([U.borderBoxSize]),this.contentBoxSize=freeze([U.contentBoxSize]),this.devicePixelContentBoxSize=freeze([U.devicePixelContentBoxSize])}return R}(),calculateDepthForNode=function(R){if(isHidden(R))return 1/0;for(var E=0,U=R.parentNode;U;)E+=1,U=U.parentNode;return E},broadcastActiveObservations=function(){var R=1/0,E=[];resizeObservers.forEach(function(Q){if(Q.activeTargets.length!==0){var X=[];Q.activeTargets.forEach(function(ee){var te=new ResizeObserverEntry(ee.target),ne=calculateDepthForNode(ee.target);X.push(te),ee.lastReportedSize=calculateBoxSize(ee.target,ee.observedBox),ne<R&&(R=ne)}),E.push(function(){Q.callback.call(Q.observer,X,Q.observer)}),Q.activeTargets.splice(0,Q.activeTargets.length)}});for(var U=0,G=E;U<G.length;U++){var Y=G[U];Y()}return R},gatherActiveObservationsAtDepth=function(R){resizeObservers.forEach(function(U){U.activeTargets.splice(0,U.activeTargets.length),U.skippedTargets.splice(0,U.skippedTargets.length),U.observationTargets.forEach(function(Y){Y.isActive()&&(calculateDepthForNode(Y.target)>R?U.activeTargets.push(Y):U.skippedTargets.push(Y))})})},process$1=function(){var R=0;for(gatherActiveObservationsAtDepth(R);hasActiveObservations();)R=broadcastActiveObservations(),gatherActiveObservationsAtDepth(R);return hasSkippedObservations()&&deliverResizeLoopError(),R>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(R){return R()})},queueMicroTask=function(R){if(!trigger){var E=0,U=document.createTextNode(""),G={characterData:!0};new MutationObserver(function(){return notify()}).observe(U,G),trigger=function(){U.textContent=""+(E?E--:E++)}}callbacks.push(R),trigger()},queueResizeObserver=function(R){queueMicroTask(function(){requestAnimationFrame(R)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time$1=function(R){return R===void 0&&(R=0),Date.now()+R},scheduled$1=!1,Scheduler$1=function(){function R(){var E=this;this.stopped=!0,this.listener=function(){return E.schedule()}}return R.prototype.run=function(E){var U=this;if(E===void 0&&(E=CATCH_PERIOD),!scheduled$1){scheduled$1=!0;var G=time$1(E);queueResizeObserver(function(){var Y=!1;try{Y=process$1()}finally{if(scheduled$1=!1,E=G-time$1(),!isWatching())return;Y?U.run(1e3):E>0?U.run(E):U.start()}})}},R.prototype.schedule=function(){this.stop(),this.run()},R.prototype.observe=function(){var E=this,U=function(){return E.observer&&E.observer.observe(document.body,observerConfig)};document.body?U():global$8.addEventListener("DOMContentLoaded",U)},R.prototype.start=function(){var E=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(U){return global$8.addEventListener(U,E.listener,!0)}))},R.prototype.stop=function(){var E=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(U){return global$8.removeEventListener(U,E.listener,!0)}),this.stopped=!0)},R}(),scheduler=new Scheduler$1,updateCount=function(R){!watching&&R>0&&scheduler.start(),watching+=R,!watching&&scheduler.stop()},skipNotifyOnElement=function(R){return!isSVG(R)&&!isReplacedElement(R)&&getComputedStyle(R).display==="inline"},ResizeObservation=function(){function R(E,U){this.target=E,this.observedBox=U||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return R.prototype.isActive=function(){var E=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=E),this.lastReportedSize.inlineSize!==E.inlineSize||this.lastReportedSize.blockSize!==E.blockSize},R}(),ResizeObserverDetail=function(){function R(E,U){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=E,this.callback=U}return R}(),observerMap=new WeakMap,getObservationIndex=function(R,E){for(var U=0;U<R.length;U+=1)if(R[U].target===E)return U;return-1},ResizeObserverController=function(){function R(){}return R.connect=function(E,U){var G=new ResizeObserverDetail(E,U);observerMap.set(E,G)},R.observe=function(E,U,G){var Y=observerMap.get(E),J=Y.observationTargets.length===0;getObservationIndex(Y.observationTargets,U)<0&&(J&&resizeObservers.push(Y),Y.observationTargets.push(new ResizeObservation(U,G&&G.box)),updateCount(1),scheduler.schedule())},R.unobserve=function(E,U){var G=observerMap.get(E),Y=getObservationIndex(G.observationTargets,U),J=G.observationTargets.length===1;Y>=0&&(J&&resizeObservers.splice(resizeObservers.indexOf(G),1),G.observationTargets.splice(Y,1),updateCount(-1))},R.disconnect=function(E){var U=this,G=observerMap.get(E);G.observationTargets.slice().forEach(function(Y){return U.unobserve(E,Y.target)}),G.activeTargets.splice(0,G.activeTargets.length)},R}(),ResizeObserver=function(){function R(E){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof E!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,E)}return R.prototype.observe=function(E,U){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement$4(E))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,E,U)},R.prototype.unobserve=function(E){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement$4(E))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,E)},R.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},R.toString=function(){return"function ResizeObserver () { [polyfill code] }"},R}();class ResizeObserverDelegate{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new ResizeObserver(this.handleResize),this.elHandlersMap=new Map}handleResize(E){for(const U of E){const G=this.elHandlersMap.get(U.target);G!==void 0&&G(U)}}registerHandler(E,U){this.elHandlersMap.set(E,U),this.observer.observe(E)}unregisterHandler(E){!this.elHandlersMap.has(E)||(this.elHandlersMap.delete(E),this.observer.unobserve(E))}}const resizeObserverManager=new ResizeObserverDelegate,VResizeObserver=defineComponent({name:"ResizeObserver",props:{onResize:Function},setup(R){let E=!1;const U=getCurrentInstance().proxy;function G(Y){const{onResize:J}=R;J!==void 0&&J(Y)}onMounted(()=>{const Y=U.$el;if(Y===void 0){warn("resize-observer","$el does not exist.");return}if(Y.nextElementSibling!==Y.nextSibling&&Y.nodeType===3&&Y.nodeValue!==""){warn("resize-observer","$el can not be observed (it may be a text node).");return}Y.nextElementSibling!==null&&(resizeObserverManager.registerHandler(Y.nextElementSibling,G),E=!0)}),onBeforeUnmount(()=>{E&&resizeObserverManager.unregisterHandler(U.$el.nextElementSibling)})},render(){return renderSlot(this.$slots,"default")}});let maybeTouch;function ensureMaybeTouch(){return maybeTouch===void 0&&("matchMedia"in window?maybeTouch=window.matchMedia("(pointer:coarse)").matches:maybeTouch=!1),maybeTouch}let wheelScale;function ensureWheelScale(){return wheelScale===void 0&&(wheelScale="chrome"in window?window.devicePixelRatio:1),wheelScale}const styles$1=c$2(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[c$2("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[c$2("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),VVirtualList=defineComponent({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(R){const E=useSsrAdapter();styles$1.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:E}),onMounted(()=>{const{defaultScrollIndex:Me,defaultScrollKey:ue}=R;Me!=null?pe({index:Me}):ue!=null&&pe({key:ue})});let U=!1,G=!1;onActivated(()=>{if(U=!1,!G){G=!0;return}pe({top:ne.value,left:te})}),onDeactivated(()=>{U=!0,G||(G=!0)});const Y=computed(()=>{const Me=new Map,{keyField:ue}=R;return R.items.forEach((ae,se)=>{Me.set(ae[ue],se)}),Me}),J=ref(null),Q=ref(void 0),X=new Map,Z=computed(()=>{const{items:Me,itemSize:ue,keyField:ae}=R,se=new FinweckTree(Me.length,ue);return Me.forEach((le,fe)=>{const be=le[ae],ve=X.get(be);ve!==void 0&&se.add(fe,ve)}),se}),ee=ref(0);let te=0;const ne=ref(0),oe=useMemo(()=>Math.max(Z.value.getBound(ne.value-depx(R.paddingTop))-1,0)),ce=computed(()=>{const{value:Me}=Q;if(Me===void 0)return[];const{items:ue,itemSize:ae}=R,se=oe.value,le=Math.min(se+Math.ceil(Me/ae+1),ue.length-1),fe=[];for(let be=se;be<=le;++be)fe.push(ue[be]);return fe}),pe=(Me,ue)=>{if(typeof Me=="number"){_e(Me,ue,"auto");return}const{left:ae,top:se,index:le,key:fe,position:be,behavior:ve,debounce:xe=!0}=Me;if(ae!==void 0||se!==void 0)_e(ae,se,ve);else if(le!==void 0)ge(le,ve,xe);else if(fe!==void 0){const he=Y.value.get(fe);he!==void 0&&ge(he,ve,xe)}else be==="bottom"?_e(0,Number.MAX_SAFE_INTEGER,ve):be==="top"&&_e(0,0,ve)};let ye,Se=null;function ge(Me,ue,ae){const{value:se}=Z,le=se.sum(Me)+depx(R.paddingTop);if(!ae)J.value.scrollTo({left:0,top:le,behavior:ue});else{ye=Me,Se!==null&&window.clearTimeout(Se),Se=window.setTimeout(()=>{ye=void 0,Se=null},16);const{scrollTop:fe,offsetHeight:be}=J.value;if(le>fe){const ve=se.get(Me);le+ve<=fe+be||J.value.scrollTo({left:0,top:le+ve-be,behavior:ue})}else J.value.scrollTo({left:0,top:le,behavior:ue})}}function _e(Me,ue,ae){J.value.scrollTo({left:Me,top:ue,behavior:ae})}function Te(Me,ue){var ae,se,le;if(U||R.ignoreItemResize||Le(ue.target))return;const{value:fe}=Z,be=Y.value.get(Me),ve=fe.get(be),xe=(le=(se=(ae=ue.borderBoxSize)===null||ae===void 0?void 0:ae[0])===null||se===void 0?void 0:se.blockSize)!==null&&le!==void 0?le:ue.contentRect.height;if(xe===ve)return;xe-R.itemSize===0?X.delete(Me):X.set(Me,xe-R.itemSize);const me=xe-ve;if(me===0)return;fe.add(be,me);const de=J.value;if(de!=null){if(ye===void 0){const Ce=fe.sum(be);de.scrollTop>Ce&&de.scrollBy(0,me)}else if(be<ye)de.scrollBy(0,me);else if(be===ye){const Ce=fe.sum(be);xe+Ce>de.scrollTop+de.offsetHeight&&de.scrollBy(0,me)}Pe()}ee.value++}const Ee=!ensureMaybeTouch();let Re=!1;function Ae(Me){var ue;(ue=R.onScroll)===null||ue===void 0||ue.call(R,Me),(!Ee||!Re)&&Pe()}function Ie(Me){var ue;if((ue=R.onWheel)===null||ue===void 0||ue.call(R,Me),Ee){const ae=J.value;if(ae!=null){if(Me.deltaX===0&&(ae.scrollTop===0&&Me.deltaY<=0||ae.scrollTop+ae.offsetHeight>=ae.scrollHeight&&Me.deltaY>=0))return;Me.preventDefault(),ae.scrollTop+=Me.deltaY/ensureWheelScale(),ae.scrollLeft+=Me.deltaX/ensureWheelScale(),Pe(),Re=!0,beforeNextFrameOnce(()=>{Re=!1})}}}function Oe(Me){if(U||Le(Me.target)||Me.contentRect.height===Q.value)return;Q.value=Me.contentRect.height;const{onResize:ue}=R;ue!==void 0&&ue(Me)}function Pe(){const{value:Me}=J;Me!=null&&(ne.value=Me.scrollTop,te=Me.scrollLeft)}function Le(Me){let ue=Me;for(;ue!==null;){if(ue.style.display==="none")return!0;ue=ue.parentElement}return!1}return{listHeight:Q,listStyle:{overflow:"auto"},keyToIndex:Y,itemsStyle:computed(()=>{const{itemResizable:Me}=R,ue=pxfy(Z.value.sum());return ee.value,[R.itemsStyle,{boxSizing:"content-box",height:Me?"":ue,minHeight:Me?ue:"",paddingTop:pxfy(R.paddingTop),paddingBottom:pxfy(R.paddingBottom)}]}),visibleItemsStyle:computed(()=>(ee.value,{transform:`translateY(${pxfy(Z.value.sum(oe.value))})`})),viewportItems:ce,listElRef:J,itemsElRef:ref(null),scrollTo:pe,handleListResize:Oe,handleListScroll:Ae,handleListWheel:Ie,handleItemResize:Te}},render(){const{itemResizable:R,keyField:E,keyToIndex:U,visibleItemsTag:G}=this;return h$2(VResizeObserver,{onResize:this.handleListResize},{default:()=>{var Y,J;return h$2("div",mergeProps(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?h$2("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[h$2(G,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(Q=>{const X=Q[E],Z=U.get(X),ee=this.$slots.default({item:Q,index:Z})[0];return R?h$2(VResizeObserver,{key:X,onResize:te=>this.handleItemResize(X,te)},{default:()=>ee}):(ee.key=X,ee)})})]):(J=(Y=this.$slots).empty)===null||J===void 0?void 0:J.call(Y)])}})}}),styles=c$2(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[c$2("&::-webkit-scrollbar",{width:0,height:0})]),VXScroll=defineComponent({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const R=ref(null);function E(Y){!(Y.currentTarget.offsetWidth<Y.currentTarget.scrollWidth)||Y.deltaY===0||(Y.currentTarget.scrollLeft+=Y.deltaY+Y.deltaX,Y.preventDefault())}const U=useSsrAdapter();return styles.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:U}),Object.assign({selfRef:R,handleWheel:E},{scrollTo(...Y){var J;(J=R.value)===null||J===void 0||J.scrollTo(...Y)}})},render(){return h$2("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),hiddenAttr="v-hidden",style$1=c$2("[v-hidden]",{display:"none!important"}),VOverflow=defineComponent({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(R,{slots:E}){const U=ref(null),G=ref(null);function Y(){const{value:Q}=U,{getCounter:X,getTail:Z}=R;let ee;if(X!==void 0?ee=X():ee=G.value,!Q||!ee)return;ee.hasAttribute(hiddenAttr)&&ee.removeAttribute(hiddenAttr);const{children:te}=Q,ne=Q.offsetWidth,oe=[],ce=E.tail?Z==null?void 0:Z():null;let pe=ce?ce.offsetWidth:0,ye=!1;const Se=Q.children.length-(E.tail?1:0);for(let _e=0;_e<Se-1;++_e){if(_e<0)continue;const Te=te[_e];if(ye){Te.hasAttribute(hiddenAttr)||Te.setAttribute(hiddenAttr,"");continue}else Te.hasAttribute(hiddenAttr)&&Te.removeAttribute(hiddenAttr);const Ee=Te.offsetWidth;if(pe+=Ee,oe[_e]=Ee,pe>ne){const{updateCounter:Re}=R;for(let Ae=_e;Ae>=0;--Ae){const Ie=Se-1-Ae;Re!==void 0?Re(Ie):ee.textContent=`${Ie}`;const Oe=ee.offsetWidth;if(pe-=oe[Ae],pe+Oe<=ne||Ae===0){ye=!0,_e=Ae-1,ce&&(_e===-1?(ce.style.maxWidth=`${ne-Oe}px`,ce.style.boxSizing="border-box"):ce.style.maxWidth="");break}}}}const{onUpdateOverflow:ge}=R;ye?ge!==void 0&&ge(!0):(ge!==void 0&&ge(!1),ee.setAttribute(hiddenAttr,""))}const J=useSsrAdapter();return style$1.mount({id:"vueuc/overflow",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:J}),onMounted(Y),{selfRef:U,counterRef:G,sync:Y}},render(){const{$slots:R}=this;return nextTick(this.sync),h$2("div",{class:"v-overflow",ref:"selfRef"},[renderSlot(R,"default"),R.counter?R.counter():h$2("span",{style:{display:"inline-block"},ref:"counterRef"}),R.tail?R.tail():null])}});function isHTMLElement$1(R){return R instanceof HTMLElement}function focusFirstDescendant(R){for(let E=0;E<R.childNodes.length;E++){const U=R.childNodes[E];if(isHTMLElement$1(U)&&(attemptFocus(U)||focusFirstDescendant(U)))return!0}return!1}function focusLastDescendant(R){for(let E=R.childNodes.length-1;E>=0;E--){const U=R.childNodes[E];if(isHTMLElement$1(U)&&(attemptFocus(U)||focusLastDescendant(U)))return!0}return!1}function attemptFocus(R){if(!isFocusable(R))return!1;try{R.focus({preventScroll:!0})}catch{}return document.activeElement===R}function isFocusable(R){if(R.tabIndex>0||R.tabIndex===0&&R.getAttribute("tabIndex")!==null)return!0;if(R.getAttribute("disabled"))return!1;switch(R.nodeName){case"A":return!!R.href&&R.rel!=="ignore";case"INPUT":return R.type!=="hidden"&&R.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let stack=[];const FocusTrap=defineComponent({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(R){const E=createId$1(),U=ref(null),G=ref(null);let Y=!1,J=!1;const Q=document.activeElement;function X(){return stack[stack.length-1]===E}function Z(Se){var ge;Se.code==="Escape"&&X()&&((ge=R.onEsc)===null||ge===void 0||ge.call(R,Se))}onMounted(()=>{watch(()=>R.active,Se=>{Se?(ne(),on$1("keydown",document,Z)):(off$1("keydown",document,Z),Y&&oe())},{immediate:!0})}),onBeforeUnmount(()=>{off$1("keydown",document,Z),Y&&oe()});function ee(Se){if(!J&&X()){const ge=te();if(ge===null||ge.contains(getPreciseEventTarget(Se)))return;ce("first")}}function te(){const Se=U.value;if(Se===null)return null;let ge=Se;for(;ge=ge.nextSibling,!(ge===null||ge instanceof Element&&ge.tagName==="DIV"););return ge}function ne(){var Se;if(!R.disabled){if(stack.push(E),R.autoFocus){const{initialFocusTo:ge}=R;ge===void 0?ce("first"):(Se=resolveTo(ge))===null||Se===void 0||Se.focus({preventScroll:!0})}Y=!0,document.addEventListener("focus",ee,!0)}}function oe(){var Se;if(R.disabled||(document.removeEventListener("focus",ee,!0),stack=stack.filter(_e=>_e!==E),X()))return;const{finalFocusTo:ge}=R;ge!==void 0?(Se=resolveTo(ge))===null||Se===void 0||Se.focus({preventScroll:!0}):R.returnFocusOnDeactivated&&Q instanceof HTMLElement&&(J=!0,Q.focus({preventScroll:!0}),J=!1)}function ce(Se){if(!!X()&&R.active){const ge=U.value,_e=G.value;if(ge!==null&&_e!==null){const Te=te();if(Te==null||Te===_e){J=!0,ge.focus({preventScroll:!0}),J=!1;return}J=!0;const Ee=Se==="first"?focusFirstDescendant(Te):focusLastDescendant(Te);J=!1,Ee||(J=!0,ge.focus({preventScroll:!0}),J=!1)}}}function pe(Se){if(J)return;const ge=te();ge!==null&&(Se.relatedTarget!==null&&ge.contains(Se.relatedTarget)?ce("last"):ce("first"))}function ye(Se){J||(Se.relatedTarget!==null&&Se.relatedTarget===U.value?ce("last"):ce("first"))}return{focusableStartRef:U,focusableEndRef:G,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:pe,handleEndFocus:ye}},render(){const{default:R}=this.$slots;if(R===void 0)return null;if(this.disabled)return R();const{active:E,focusableStyle:U}=this;return h$2(Fragment$2,null,[h$2("div",{"aria-hidden":"true",tabindex:E?"0":"-1",ref:"focusableStartRef",style:U,onFocus:this.handleStartFocus}),R(),h$2("div",{"aria-hidden":"true",style:U,ref:"focusableEndRef",tabindex:E?"0":"-1",onFocus:this.handleEndFocus})])}});function toArray$2(R){return Array.isArray(R)?R:[R]}const TRAVERSE_COMMAND={STOP:"STOP"};function traverseWithCb(R,E){const U=E(R);R.children!==void 0&&U!==TRAVERSE_COMMAND.STOP&&R.children.forEach(G=>traverseWithCb(G,E))}function getNonLeafKeys(R,E={}){const{preserveGroup:U=!1}=E,G=[],Y=U?Q=>{Q.isLeaf||(G.push(Q.key),J(Q.children))}:Q=>{Q.isLeaf||(Q.isGroup||G.push(Q.key),J(Q.children))};function J(Q){Q.forEach(Y)}return J(R),G}function isLeaf(R,E){const{isLeaf:U}=R;return U!==void 0?U:!E(R)}function defaultGetChildren(R){return R.children}function defaultGetKey(R){return R.key}function isIgnored(){return!1}function isShallowLoaded(R,E){const{isLeaf:U}=R;return!(U===!1&&!Array.isArray(E(R)))}function isDisabled(R){return R.disabled===!0}function isExpilicitlyNotLoaded(R,E){return R.isLeaf===!1&&!Array.isArray(E(R))}function unwrapCheckedKeys(R){var E;return R==null?[]:Array.isArray(R)?R:(E=R.checkedKeys)!==null&&E!==void 0?E:[]}function unwrapIndeterminateKeys(R){var E;return R==null||Array.isArray(R)?[]:(E=R.indeterminateKeys)!==null&&E!==void 0?E:[]}function merge$6(R,E){const U=new Set(R);return E.forEach(G=>{U.has(G)||U.add(G)}),Array.from(U)}function minus(R,E){const U=new Set(R);return E.forEach(G=>{U.has(G)&&U.delete(G)}),Array.from(U)}function isGroup(R){return(R==null?void 0:R.type)==="group"}function createIndexGetter(R){const E=new Map;return R.forEach((U,G)=>{E.set(U.key,G)}),U=>{var G;return(G=E.get(U))!==null&&G!==void 0?G:null}}class SubtreeNotLoadedError extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function getExtendedCheckedKeySetAfterCheck(R,E,U,G){return getExtendedCheckedKeySet(E.concat(R),U,G,!1)}function getAvailableAscendantNodeSet(R,E){const U=new Set;return R.forEach(G=>{const Y=E.treeNodeMap.get(G);if(Y!==void 0){let J=Y.parent;for(;J!==null&&!(J.disabled||U.has(J.key));)U.add(J.key),J=J.parent}}),U}function getExtendedCheckedKeySetAfterUncheck(R,E,U,G){const Y=getExtendedCheckedKeySet(E,U,G,!1),J=getExtendedCheckedKeySet(R,U,G,!0),Q=getAvailableAscendantNodeSet(R,U),X=[];return Y.forEach(Z=>{(J.has(Z)||Q.has(Z))&&X.push(Z)}),X.forEach(Z=>Y.delete(Z)),Y}function getCheckedKeys(R,E){const{checkedKeys:U,keysToCheck:G,keysToUncheck:Y,indeterminateKeys:J,cascade:Q,leafOnly:X,checkStrategy:Z,allowNotLoaded:ee}=R;if(!Q)return G!==void 0?{checkedKeys:merge$6(U,G),indeterminateKeys:Array.from(J)}:Y!==void 0?{checkedKeys:minus(U,Y),indeterminateKeys:Array.from(J)}:{checkedKeys:Array.from(U),indeterminateKeys:Array.from(J)};const{levelTreeNodeMap:te}=E;let ne;Y!==void 0?ne=getExtendedCheckedKeySetAfterUncheck(Y,U,E,ee):G!==void 0?ne=getExtendedCheckedKeySetAfterCheck(G,U,E,ee):ne=getExtendedCheckedKeySet(U,E,ee,!1);const oe=Z==="parent",ce=Z==="child"||X,pe=ne,ye=new Set,Se=Math.max.apply(null,Array.from(te.keys()));for(let ge=Se;ge>=0;ge-=1){const _e=ge===0,Te=te.get(ge);for(const Ee of Te){if(Ee.isLeaf)continue;const{key:Re,shallowLoaded:Ae}=Ee;if(ce&&Ae&&Ee.children.forEach(Le=>{!Le.disabled&&!Le.isLeaf&&Le.shallowLoaded&&pe.has(Le.key)&&pe.delete(Le.key)}),Ee.disabled||!Ae)continue;let Ie=!0,Oe=!1,Pe=!0;for(const Le of Ee.children){const Me=Le.key;if(!Le.disabled){if(Pe&&(Pe=!1),pe.has(Me))Oe=!0;else if(ye.has(Me)){Oe=!0,Ie=!1;break}else if(Ie=!1,Oe)break}}Ie&&!Pe?(oe&&Ee.children.forEach(Le=>{!Le.disabled&&pe.has(Le.key)&&pe.delete(Le.key)}),pe.add(Re)):Oe&&ye.add(Re),_e&&ce&&pe.has(Re)&&pe.delete(Re)}}return{checkedKeys:Array.from(pe),indeterminateKeys:Array.from(ye)}}function getExtendedCheckedKeySet(R,E,U,G){const{treeNodeMap:Y,getChildren:J}=E,Q=new Set,X=new Set(R);return R.forEach(Z=>{const ee=Y.get(Z);ee!==void 0&&traverseWithCb(ee,te=>{if(te.disabled)return TRAVERSE_COMMAND.STOP;const{key:ne}=te;if(!Q.has(ne)&&(Q.add(ne),X.add(ne),isExpilicitlyNotLoaded(te.rawNode,J))){if(G)return TRAVERSE_COMMAND.STOP;if(!U)throw new SubtreeNotLoadedError}})}),X}function getPath(R,{includeGroup:E=!1,includeSelf:U=!0},G){var Y;const J=G.treeNodeMap;let Q=R==null?null:(Y=J.get(R))!==null&&Y!==void 0?Y:null;const X={keyPath:[],treeNodePath:[],treeNode:Q};if(Q!=null&&Q.ignored)return X.treeNode=null,X;for(;Q;)!Q.ignored&&(E||!Q.isGroup)&&X.treeNodePath.push(Q),Q=Q.parent;return X.treeNodePath.reverse(),U||X.treeNodePath.pop(),X.keyPath=X.treeNodePath.map(Z=>Z.key),X}function getFirstAvailableNode(R){if(R.length===0)return null;const E=R[0];return E.isGroup||E.ignored||E.disabled?E.getNext():E}function rawGetNext(R,E){const U=R.siblings,G=U.length,{index:Y}=R;return E?U[(Y+1)%G]:Y===U.length-1?null:U[Y+1]}function move(R,E,{loop:U=!1,includeDisabled:G=!1}={}){const Y=E==="prev"?rawGetPrev:rawGetNext,J={reverse:E==="prev"};let Q=!1,X=null;function Z(ee){if(ee!==null){if(ee===R){if(!Q)Q=!0;else if(!R.disabled&&!R.isGroup){X=R;return}}else if((!ee.disabled||G)&&!ee.ignored&&!ee.isGroup){X=ee;return}if(ee.isGroup){const te=getChild$1(ee,J);te!==null?X=te:Z(Y(ee,U))}else{const te=Y(ee,!1);if(te!==null)Z(te);else{const ne=rawGetParent(ee);ne!=null&&ne.isGroup?Z(Y(ne,U)):U&&Z(Y(ee,!0))}}}}return Z(R),X}function rawGetPrev(R,E){const U=R.siblings,G=U.length,{index:Y}=R;return E?U[(Y-1+G)%G]:Y===0?null:U[Y-1]}function rawGetParent(R){return R.parent}function getChild$1(R,E={}){const{reverse:U=!1}=E,{children:G}=R;if(G){const{length:Y}=G,J=U?Y-1:0,Q=U?-1:Y,X=U?-1:1;for(let Z=J;Z!==Q;Z+=X){const ee=G[Z];if(!ee.disabled&&!ee.ignored)if(ee.isGroup){const te=getChild$1(ee,E);if(te!==null)return te}else return ee}}return null}const moveMethods={getChild(){return this.ignored?null:getChild$1(this)},getParent(){const{parent:R}=this;return R!=null&&R.isGroup?R.getParent():R},getNext(R={}){return move(this,"next",R)},getPrev(R={}){return move(this,"prev",R)}};function flatten(R,E){const U=E?new Set(E):void 0,G=[];function Y(J){J.forEach(Q=>{G.push(Q),!(Q.isLeaf||!Q.children||Q.ignored)&&(Q.isGroup||U===void 0||U.has(Q.key))&&Y(Q.children)})}return Y(R),G}function contains$1(R,E){const U=R.key;for(;E;){if(E.key===U)return!0;E=E.parent}return!1}function createTreeNodes(R,E,U,G,Y,J=null,Q=0){const X=[];return R.forEach((Z,ee)=>{var te;const ne=Object.create(G);if(ne.rawNode=Z,ne.siblings=X,ne.level=Q,ne.index=ee,ne.isFirstChild=ee===0,ne.isLastChild=ee+1===R.length,ne.parent=J,!ne.ignored){const oe=Y(Z);Array.isArray(oe)&&(ne.children=createTreeNodes(oe,E,U,G,Y,ne,Q+1))}X.push(ne),E.set(ne.key,ne),U.has(Q)||U.set(Q,[]),(te=U.get(Q))===null||te===void 0||te.push(ne)}),X}function createTreeMate(R,E={}){var U;const G=new Map,Y=new Map,{getDisabled:J=isDisabled,getIgnored:Q=isIgnored,getIsGroup:X=isGroup,getKey:Z=defaultGetKey}=E,ee=(U=E.getChildren)!==null&&U!==void 0?U:defaultGetChildren,te=E.ignoreEmptyChildren?Ee=>{const Re=ee(Ee);return Array.isArray(Re)?Re.length?Re:null:Re}:ee,ne=Object.assign({get key(){return Z(this.rawNode)},get disabled(){return J(this.rawNode)},get isGroup(){return X(this.rawNode)},get isLeaf(){return isLeaf(this.rawNode,te)},get shallowLoaded(){return isShallowLoaded(this.rawNode,te)},get ignored(){return Q(this.rawNode)},contains(Ee){return contains$1(this,Ee)}},moveMethods),oe=createTreeNodes(R,G,Y,ne,te);function ce(Ee){if(Ee==null)return null;const Re=G.get(Ee);return Re&&!Re.isGroup&&!Re.ignored?Re:null}function pe(Ee){if(Ee==null)return null;const Re=G.get(Ee);return Re&&!Re.ignored?Re:null}function ye(Ee,Re){const Ae=pe(Ee);return Ae?Ae.getPrev(Re):null}function Se(Ee,Re){const Ae=pe(Ee);return Ae?Ae.getNext(Re):null}function ge(Ee){const Re=pe(Ee);return Re?Re.getParent():null}function _e(Ee){const Re=pe(Ee);return Re?Re.getChild():null}const Te={treeNodes:oe,treeNodeMap:G,levelTreeNodeMap:Y,maxLevel:Math.max(...Y.keys()),getChildren:te,getFlattenedNodes(Ee){return flatten(oe,Ee)},getNode:ce,getPrev:ye,getNext:Se,getParent:ge,getChild:_e,getFirstAvailableNode(){return getFirstAvailableNode(oe)},getPath(Ee,Re={}){return getPath(Ee,Re,Te)},getCheckedKeys(Ee,Re={}){const{cascade:Ae=!0,leafOnly:Ie=!1,checkStrategy:Oe="all",allowNotLoaded:Pe=!1}=Re;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(Ee),indeterminateKeys:unwrapIndeterminateKeys(Ee),cascade:Ae,leafOnly:Ie,checkStrategy:Oe,allowNotLoaded:Pe},Te)},check(Ee,Re,Ae={}){const{cascade:Ie=!0,leafOnly:Oe=!1,checkStrategy:Pe="all",allowNotLoaded:Le=!1}=Ae;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(Re),indeterminateKeys:unwrapIndeterminateKeys(Re),keysToCheck:Ee==null?[]:toArray$2(Ee),cascade:Ie,leafOnly:Oe,checkStrategy:Pe,allowNotLoaded:Le},Te)},uncheck(Ee,Re,Ae={}){const{cascade:Ie=!0,leafOnly:Oe=!1,checkStrategy:Pe="all",allowNotLoaded:Le=!1}=Ae;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(Re),indeterminateKeys:unwrapIndeterminateKeys(Re),keysToUncheck:Ee==null?[]:toArray$2(Ee),cascade:Ie,leafOnly:Oe,checkStrategy:Pe,allowNotLoaded:Le},Te)},getNonLeafKeys(Ee={}){return getNonLeafKeys(oe,Ee)}};return Te}function tzIntlTimeZoneName(R,E,U){var G=getDTF(R,U.timeZone,U.locale);return G.formatToParts?partsTimeZone(G,E):hackyTimeZone(G,E)}function partsTimeZone(R,E){var U=R.formatToParts(E);return U[U.length-1].value}function hackyTimeZone(R,E){var U=R.format(E).replace(/\u200E/g,""),G=/ [\w-+ ]+$/.exec(U);return G?G[0].substr(1):""}function getDTF(R,E,U){if(U&&!U.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(U?[U.code,"en-US"]:void 0,{timeZone:E,timeZoneName:R})}function tzTokenizeDate(R,E){var U=getDateTimeFormat(E);return U.formatToParts?partsOffset(U,R):hackyOffset(U,R)}var typeToPos={year:0,month:1,day:2,hour:3,minute:4,second:5};function partsOffset(R,E){try{for(var U=R.formatToParts(E),G=[],Y=0;Y<U.length;Y++){var J=typeToPos[U[Y].type];J>=0&&(G[J]=parseInt(U[Y].value,10))}return G}catch(Q){if(Q instanceof RangeError)return[NaN];throw Q}}function hackyOffset(R,E){var U=R.format(E).replace(/\u200E/g,""),G=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(U);return[G[3],G[1],G[2],G[4],G[5],G[6]]}var dtfCache={};function getDateTimeFormat(R){if(!dtfCache[R]){var E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),U=E==="06/25/2014, 00:00:00"||E==="\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";dtfCache[R]=U?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:R,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:R,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dtfCache[R]}function newDateUTC(R,E,U,G,Y,J,Q){var X=new Date(0);return X.setUTCFullYear(R,E,U),X.setUTCHours(G,Y,J,Q),X}var MILLISECONDS_IN_HOUR$1=36e5,MILLISECONDS_IN_MINUTE$2=6e4,patterns$1={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function tzParseTimezone(R,E,U){var G,Y;if(R===""||(G=patterns$1.timezoneZ.exec(R),G))return 0;var J;if(G=patterns$1.timezoneHH.exec(R),G)return J=parseInt(G[1],10),validateTimezone(J)?-(J*MILLISECONDS_IN_HOUR$1):NaN;if(G=patterns$1.timezoneHHMM.exec(R),G){J=parseInt(G[1],10);var Q=parseInt(G[2],10);return validateTimezone(J,Q)?(Y=Math.abs(J)*MILLISECONDS_IN_HOUR$1+Q*MILLISECONDS_IN_MINUTE$2,J>0?-Y:Y):NaN}if(isValidTimezoneIANAString(R)){E=new Date(E||Date.now());var X=U?E:toUtcDate(E),Z=calcOffset(X,R),ee=U?Z:fixOffset(E,Z,R);return-ee}return NaN}function toUtcDate(R){return newDateUTC(R.getFullYear(),R.getMonth(),R.getDate(),R.getHours(),R.getMinutes(),R.getSeconds(),R.getMilliseconds())}function calcOffset(R,E){var U=tzTokenizeDate(R,E),G=newDateUTC(U[0],U[1]-1,U[2],U[3]%24,U[4],U[5],0).getTime(),Y=R.getTime(),J=Y%1e3;return Y-=J>=0?J:1e3+J,G-Y}function fixOffset(R,E,U){var G=R.getTime(),Y=G-E,J=calcOffset(new Date(Y),U);if(E===J)return E;Y-=J-E;var Q=calcOffset(new Date(Y),U);return J===Q?J:Math.max(J,Q)}function validateTimezone(R,E){return-23<=R&&R<=23&&(E==null||0<=E&&E<=59)}var validIANATimezoneCache={};function isValidTimezoneIANAString(R){if(validIANATimezoneCache[R])return!0;try{return Intl.DateTimeFormat(void 0,{timeZone:R}),validIANATimezoneCache[R]=!0,!0}catch{return!1}}var MILLISECONDS_IN_MINUTE$1=60*1e3,formatters={X:function(R,E,U,G){var Y=getTimeZoneOffset(G.timeZone,G._originalDate||R);if(Y===0)return"Z";switch(E){case"X":return formatTimezoneWithOptionalMinutes(Y);case"XXXX":case"XX":return formatTimezone(Y);case"XXXXX":case"XXX":default:return formatTimezone(Y,":")}},x:function(R,E,U,G){var Y=getTimeZoneOffset(G.timeZone,G._originalDate||R);switch(E){case"x":return formatTimezoneWithOptionalMinutes(Y);case"xxxx":case"xx":return formatTimezone(Y);case"xxxxx":case"xxx":default:return formatTimezone(Y,":")}},O:function(R,E,U,G){var Y=getTimeZoneOffset(G.timeZone,G._originalDate||R);switch(E){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(Y,":");case"OOOO":default:return"GMT"+formatTimezone(Y,":")}},z:function(R,E,U,G){var Y=G._originalDate||R;switch(E){case"z":case"zz":case"zzz":return tzIntlTimeZoneName("short",Y,G);case"zzzz":default:return tzIntlTimeZoneName("long",Y,G)}}};function getTimeZoneOffset(R,E){var U=R?tzParseTimezone(R,E,!0)/MILLISECONDS_IN_MINUTE$1:E.getTimezoneOffset();if(Number.isNaN(U))throw new RangeError("Invalid time zone specified: "+R);return U}function addLeadingZeros(R,E){for(var U=R<0?"-":"",G=Math.abs(R).toString();G.length<E;)G="0"+G;return U+G}function formatTimezone(R,E){var U=E||"",G=R>0?"-":"+",Y=Math.abs(R),J=addLeadingZeros(Math.floor(Y/60),2),Q=addLeadingZeros(Math.floor(Y%60),2);return G+J+U+Q}function formatTimezoneWithOptionalMinutes(R,E){if(R%60===0){var U=R>0?"-":"+";return U+addLeadingZeros(Math.abs(R)/60,2)}return formatTimezone(R,E)}function formatTimezoneShort(R,E){var U=R>0?"-":"+",G=Math.abs(R),Y=Math.floor(G/60),J=G%60;if(J===0)return U+String(Y);var Q=E||"";return U+String(Y)+Q+addLeadingZeros(J,2)}const formatters$1=formatters;var tzPattern=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const tzPattern$1=tzPattern;var MILLISECONDS_IN_HOUR=36e5,MILLISECONDS_IN_MINUTE=6e4,DEFAULT_ADDITIONAL_DIGITS=2,patterns={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:tzPattern$1};function toDate$1(R,E){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(R===null)return new Date(NaN);var U=E||{},G=U.additionalDigits==null?DEFAULT_ADDITIONAL_DIGITS:toInteger(U.additionalDigits);if(G!==2&&G!==1&&G!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(R instanceof Date||typeof R=="object"&&Object.prototype.toString.call(R)==="[object Date]")return new Date(R.getTime());if(typeof R=="number"||Object.prototype.toString.call(R)==="[object Number]")return new Date(R);if(!(typeof R=="string"||Object.prototype.toString.call(R)==="[object String]"))return new Date(NaN);var Y=splitDateString(R),J=parseYear(Y.date,G),Q=J.year,X=J.restDateString,Z=parseDate(X,Q);if(isNaN(Z))return new Date(NaN);if(Z){var ee=Z.getTime(),te=0,ne;if(Y.time&&(te=parseTime(Y.time),isNaN(te)))return new Date(NaN);if(Y.timeZone||U.timeZone){if(ne=tzParseTimezone(Y.timeZone||U.timeZone,new Date(ee+te)),isNaN(ne))return new Date(NaN)}else ne=getTimezoneOffsetInMilliseconds(new Date(ee+te)),ne=getTimezoneOffsetInMilliseconds(new Date(ee+te+ne));return new Date(ee+te+ne)}else return new Date(NaN)}function splitDateString(R){var E={},U=patterns.dateTimePattern.exec(R),G;if(U?(E.date=U[1],G=U[3]):(U=patterns.datePattern.exec(R),U?(E.date=U[1],G=U[2]):(E.date=null,G=R)),G){var Y=patterns.timeZone.exec(G);Y?(E.time=G.replace(Y[1],""),E.timeZone=Y[1].trim()):E.time=G}return E}function parseYear(R,E){var U=patterns.YYY[E],G=patterns.YYYYY[E],Y;if(Y=patterns.YYYY.exec(R)||G.exec(R),Y){var J=Y[1];return{year:parseInt(J,10),restDateString:R.slice(J.length)}}if(Y=patterns.YY.exec(R)||U.exec(R),Y){var Q=Y[1];return{year:parseInt(Q,10)*100,restDateString:R.slice(Q.length)}}return{year:null}}function parseDate(R,E){if(E===null)return null;var U,G,Y,J;if(R.length===0)return G=new Date(0),G.setUTCFullYear(E),G;if(U=patterns.MM.exec(R),U)return G=new Date(0),Y=parseInt(U[1],10)-1,validateDate(E,Y)?(G.setUTCFullYear(E,Y),G):new Date(NaN);if(U=patterns.DDD.exec(R),U){G=new Date(0);var Q=parseInt(U[1],10);return validateDayOfYearDate(E,Q)?(G.setUTCFullYear(E,0,Q),G):new Date(NaN)}if(U=patterns.MMDD.exec(R),U){G=new Date(0),Y=parseInt(U[1],10)-1;var X=parseInt(U[2],10);return validateDate(E,Y,X)?(G.setUTCFullYear(E,Y,X),G):new Date(NaN)}if(U=patterns.Www.exec(R),U)return J=parseInt(U[1],10)-1,validateWeekDate(E,J)?dayOfISOWeekYear(E,J):new Date(NaN);if(U=patterns.WwwD.exec(R),U){J=parseInt(U[1],10)-1;var Z=parseInt(U[2],10)-1;return validateWeekDate(E,J,Z)?dayOfISOWeekYear(E,J,Z):new Date(NaN)}return null}function parseTime(R){var E,U,G;if(E=patterns.HH.exec(R),E)return U=parseFloat(E[1].replace(",",".")),validateTime(U)?U%24*MILLISECONDS_IN_HOUR:NaN;if(E=patterns.HHMM.exec(R),E)return U=parseInt(E[1],10),G=parseFloat(E[2].replace(",",".")),validateTime(U,G)?U%24*MILLISECONDS_IN_HOUR+G*MILLISECONDS_IN_MINUTE:NaN;if(E=patterns.HHMMSS.exec(R),E){U=parseInt(E[1],10),G=parseInt(E[2],10);var Y=parseFloat(E[3].replace(",","."));return validateTime(U,G,Y)?U%24*MILLISECONDS_IN_HOUR+G*MILLISECONDS_IN_MINUTE+Y*1e3:NaN}return null}function dayOfISOWeekYear(R,E,U){E=E||0,U=U||0;var G=new Date(0);G.setUTCFullYear(R,0,4);var Y=G.getUTCDay()||7,J=E*7+U+1-Y;return G.setUTCDate(G.getUTCDate()+J),G}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(R){return R%400===0||R%4===0&&R%100!==0}function validateDate(R,E,U){if(E<0||E>11)return!1;if(U!=null){if(U<1)return!1;var G=isLeapYearIndex(R);if(G&&U>DAYS_IN_MONTH_LEAP_YEAR[E]||!G&&U>DAYS_IN_MONTH[E])return!1}return!0}function validateDayOfYearDate(R,E){if(E<1)return!1;var U=isLeapYearIndex(R);return!(U&&E>366||!U&&E>365)}function validateWeekDate(R,E,U){return!(E<0||E>52||U!=null&&(U<0||U>6))}function validateTime(R,E,U){return!(R!=null&&(R<0||R>=25)||E!=null&&(E<0||E>=60)||U!=null&&(U<0||U>=60))}var tzFormattingTokensRegExp=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function format$6(R,E,U){var G=String(E),Y=U||{},J=G.match(tzFormattingTokensRegExp);if(J){var Q=toDate$1(R,Y);G=J.reduce(function(X,Z){if(Z[0]==="'")return X;var ee=X.indexOf(Z),te=X[ee-1]==="'",ne=X.replace(Z,"'"+formatters$1[Z[0]](Q,Z,null,Y)+"'");return te?ne.substring(0,ee-1)+ne.substring(ee+1):ne},G)}return dateFnsFormat(R,G,Y)}function utcToZonedTime(R,E,U){var G=toDate$1(R,U),Y=tzParseTimezone(E,G,!0),J=new Date(G.getTime()-Y);return new Date(J.getUTCFullYear(),J.getUTCMonth(),J.getUTCDate(),J.getUTCHours(),J.getUTCMinutes(),J.getUTCSeconds(),J.getUTCMilliseconds())}function formatInTimeZone(R,E,U,G){var Y=cloneObject(G);return Y.timeZone=E,format$6(utcToZonedTime(R,E),U,Y)}function _extends$1(){return _extends$1=Object.assign||function(R){for(var E=1;E<arguments.length;E++){var U=arguments[E];for(var G in U)Object.prototype.hasOwnProperty.call(U,G)&&(R[G]=U[G])}return R},_extends$1.apply(this,arguments)}function _inheritsLoose$1(R,E){R.prototype=Object.create(E.prototype),R.prototype.constructor=R,_setPrototypeOf(R,E)}function _getPrototypeOf(R){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)},_getPrototypeOf(R)}function _setPrototypeOf(R,E){return _setPrototypeOf=Object.setPrototypeOf||function(G,Y){return G.__proto__=Y,G},_setPrototypeOf(R,E)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(R,E,U){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(Y,J,Q){var X=[null];X.push.apply(X,J);var Z=Function.bind.apply(Y,X),ee=new Z;return Q&&_setPrototypeOf(ee,Q.prototype),ee},_construct.apply(null,arguments)}function _isNativeFunction(R){return Function.toString.call(R).indexOf("[native code]")!==-1}function _wrapNativeSuper(R){var E=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(G){if(G===null||!_isNativeFunction(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(typeof E<"u"){if(E.has(G))return E.get(G);E.set(G,Y)}function Y(){return _construct(G,arguments,_getPrototypeOf(this).constructor)}return Y.prototype=Object.create(G.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Y,G)},_wrapNativeSuper(R)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u"&&process.env;function convertFieldsError(R){if(!R||!R.length)return null;var E={};return R.forEach(function(U){var G=U.field;E[G]=E[G]||[],E[G].push(U)}),E}function format$5(R){for(var E=arguments.length,U=new Array(E>1?E-1:0),G=1;G<E;G++)U[G-1]=arguments[G];var Y=0,J=U.length;if(typeof R=="function")return R.apply(null,U);if(typeof R=="string"){var Q=R.replace(formatRegExp,function(X){if(X==="%%")return"%";if(Y>=J)return X;switch(X){case"%s":return String(U[Y++]);case"%d":return Number(U[Y++]);case"%j":try{return JSON.stringify(U[Y++])}catch{return"[Circular]"}break;default:return X}});return Q}return R}function isNativeStringType(R){return R==="string"||R==="url"||R==="hex"||R==="email"||R==="date"||R==="pattern"}function isEmptyValue(R,E){return!!(R==null||E==="array"&&Array.isArray(R)&&!R.length||isNativeStringType(E)&&typeof R=="string"&&!R)}function asyncParallelArray(R,E,U){var G=[],Y=0,J=R.length;function Q(X){G.push.apply(G,X||[]),Y++,Y===J&&U(G)}R.forEach(function(X){E(X,Q)})}function asyncSerialArray(R,E,U){var G=0,Y=R.length;function J(Q){if(Q&&Q.length){U(Q);return}var X=G;G=G+1,X<Y?E(R[X],J):U([])}J([])}function flattenObjArr(R){var E=[];return Object.keys(R).forEach(function(U){E.push.apply(E,R[U]||[])}),E}var AsyncValidationError=function(R){_inheritsLoose$1(E,R);function E(U,G){var Y;return Y=R.call(this,"Async Validation Error")||this,Y.errors=U,Y.fields=G,Y}return E}(_wrapNativeSuper(Error));function asyncMap(R,E,U,G,Y){if(E.first){var J=new Promise(function(oe,ce){var pe=function(ge){return G(ge),ge.length?ce(new AsyncValidationError(ge,convertFieldsError(ge))):oe(Y)},ye=flattenObjArr(R);asyncSerialArray(ye,U,pe)});return J.catch(function(oe){return oe}),J}var Q=E.firstFields===!0?Object.keys(R):E.firstFields||[],X=Object.keys(R),Z=X.length,ee=0,te=[],ne=new Promise(function(oe,ce){var pe=function(Se){if(te.push.apply(te,Se),ee++,ee===Z)return G(te),te.length?ce(new AsyncValidationError(te,convertFieldsError(te))):oe(Y)};X.length||(G(te),oe(Y)),X.forEach(function(ye){var Se=R[ye];Q.indexOf(ye)!==-1?asyncSerialArray(Se,U,pe):asyncParallelArray(Se,U,pe)})});return ne.catch(function(oe){return oe}),ne}function isErrorObj(R){return!!(R&&R.message!==void 0)}function getValue(R,E){for(var U=R,G=0;G<E.length;G++){if(U==null)return U;U=U[E[G]]}return U}function complementError(R,E){return function(U){var G;return R.fullFields?G=getValue(E,R.fullFields):G=E[U.field||R.fullField],isErrorObj(U)?(U.field=U.field||R.fullField,U.fieldValue=G,U):{message:typeof U=="function"?U():U,fieldValue:G,field:U.field||R.fullField}}}function deepMerge(R,E){if(E){for(var U in E)if(E.hasOwnProperty(U)){var G=E[U];typeof G=="object"&&typeof R[U]=="object"?R[U]=_extends$1({},R[U],G):R[U]=G}}return R}var required$1=function(E,U,G,Y,J,Q){E.required&&(!G.hasOwnProperty(E.field)||isEmptyValue(U,Q||E.type))&&Y.push(format$5(J.messages.required,E.fullField))},whitespace=function(E,U,G,Y,J){(/^\s+$/.test(U)||U==="")&&Y.push(format$5(J.messages.whitespace,E.fullField))},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types$3={integer:function(E){return types$3.number(E)&&parseInt(E,10)===E},float:function(E){return types$3.number(E)&&!types$3.integer(E)},array:function(E){return Array.isArray(E)},regexp:function(E){if(E instanceof RegExp)return!0;try{return!!new RegExp(E)}catch{return!1}},date:function(E){return typeof E.getTime=="function"&&typeof E.getMonth=="function"&&typeof E.getYear=="function"&&!isNaN(E.getTime())},number:function(E){return isNaN(E)?!1:typeof E=="number"},object:function(E){return typeof E=="object"&&!types$3.array(E)},method:function(E){return typeof E=="function"},email:function(E){return typeof E=="string"&&E.length<=320&&!!E.match(pattern$2.email)},url:function(E){return typeof E=="string"&&E.length<=2048&&!!E.match(pattern$2.url)},hex:function(E){return typeof E=="string"&&!!E.match(pattern$2.hex)}},type$1=function(E,U,G,Y,J){if(E.required&&U===void 0){required$1(E,U,G,Y,J);return}var Q=["integer","float","array","regexp","object","method","email","number","date","url","hex"],X=E.type;Q.indexOf(X)>-1?types$3[X](U)||Y.push(format$5(J.messages.types[X],E.fullField,E.type)):X&&typeof U!==E.type&&Y.push(format$5(J.messages.types[X],E.fullField,E.type))},range$3=function(E,U,G,Y,J){var Q=typeof E.len=="number",X=typeof E.min=="number",Z=typeof E.max=="number",ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,te=U,ne=null,oe=typeof U=="number",ce=typeof U=="string",pe=Array.isArray(U);if(oe?ne="number":ce?ne="string":pe&&(ne="array"),!ne)return!1;pe&&(te=U.length),ce&&(te=U.replace(ee,"_").length),Q?te!==E.len&&Y.push(format$5(J.messages[ne].len,E.fullField,E.len)):X&&!Z&&te<E.min?Y.push(format$5(J.messages[ne].min,E.fullField,E.min)):Z&&!X&&te>E.max?Y.push(format$5(J.messages[ne].max,E.fullField,E.max)):X&&Z&&(te<E.min||te>E.max)&&Y.push(format$5(J.messages[ne].range,E.fullField,E.min,E.max))},ENUM$1="enum",enumerable$1=function(E,U,G,Y,J){E[ENUM$1]=Array.isArray(E[ENUM$1])?E[ENUM$1]:[],E[ENUM$1].indexOf(U)===-1&&Y.push(format$5(J.messages[ENUM$1],E.fullField,E[ENUM$1].join(", ")))},pattern$1=function(E,U,G,Y,J){if(E.pattern){if(E.pattern instanceof RegExp)E.pattern.lastIndex=0,E.pattern.test(U)||Y.push(format$5(J.messages.pattern.mismatch,E.fullField,U,E.pattern));else if(typeof E.pattern=="string"){var Q=new RegExp(E.pattern);Q.test(U)||Y.push(format$5(J.messages.pattern.mismatch,E.fullField,U,E.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$3,enum:enumerable$1,pattern:pattern$1},string$2=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U,"string")&&!E.required)return G();rules.required(E,U,Y,Q,J,"string"),isEmptyValue(U,"string")||(rules.type(E,U,Y,Q,J),rules.range(E,U,Y,Q,J),rules.pattern(E,U,Y,Q,J),E.whitespace===!0&&rules.whitespace(E,U,Y,Q,J))}G(Q)},method=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&rules.type(E,U,Y,Q,J)}G(Q)},number$2=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(U===""&&(U=void 0),isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&(rules.type(E,U,Y,Q,J),rules.range(E,U,Y,Q,J))}G(Q)},_boolean=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&rules.type(E,U,Y,Q,J)}G(Q)},regexp$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),isEmptyValue(U)||rules.type(E,U,Y,Q,J)}G(Q)},integer$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&(rules.type(E,U,Y,Q,J),rules.range(E,U,Y,Q,J))}G(Q)},floatFn=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&(rules.type(E,U,Y,Q,J),rules.range(E,U,Y,Q,J))}G(Q)},array$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(U==null&&!E.required)return G();rules.required(E,U,Y,Q,J,"array"),U!=null&&(rules.type(E,U,Y,Q,J),rules.range(E,U,Y,Q,J))}G(Q)},object$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&rules.type(E,U,Y,Q,J)}G(Q)},ENUM="enum",enumerable=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J),U!==void 0&&rules[ENUM](E,U,Y,Q,J)}G(Q)},pattern$3=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U,"string")&&!E.required)return G();rules.required(E,U,Y,Q,J),isEmptyValue(U,"string")||rules.pattern(E,U,Y,Q,J)}G(Q)},date$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U,"date")&&!E.required)return G();if(rules.required(E,U,Y,Q,J),!isEmptyValue(U,"date")){var Z;U instanceof Date?Z=U:Z=new Date(U),rules.type(E,Z,Y,Q,J),Z&&rules.range(E,Z.getTime(),Y,Q,J)}}G(Q)},required=function(E,U,G,Y,J){var Q=[],X=Array.isArray(U)?"array":typeof U;rules.required(E,U,Y,Q,J,X),G(Q)},type$2=function(E,U,G,Y,J){var Q=E.type,X=[],Z=E.required||!E.required&&Y.hasOwnProperty(E.field);if(Z){if(isEmptyValue(U,Q)&&!E.required)return G();rules.required(E,U,Y,X,J,Q),isEmptyValue(U,Q)||rules.type(E,U,Y,X,J)}G(X)},any$1=function(E,U,G,Y,J){var Q=[],X=E.required||!E.required&&Y.hasOwnProperty(E.field);if(X){if(isEmptyValue(U)&&!E.required)return G();rules.required(E,U,Y,Q,J)}G(Q)},validators={string:string$2,method,number:number$2,boolean:_boolean,regexp:regexp$1,integer:integer$1,float:floatFn,array:array$1,object:object$1,enum:enumerable,pattern:pattern$3,date:date$1,url:type$2,hex:type$2,email:type$2,required,any:any$1};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var E=JSON.parse(JSON.stringify(this));return E.clone=this.clone,E}}}var messages=newMessages(),Schema$1=function(){function R(U){this.rules=null,this._messages=messages,this.define(U)}var E=R.prototype;return E.define=function(G){var Y=this;if(!G)throw new Error("Cannot configure a schema with no rules");if(typeof G!="object"||Array.isArray(G))throw new Error("Rules must be an object");this.rules={},Object.keys(G).forEach(function(J){var Q=G[J];Y.rules[J]=Array.isArray(Q)?Q:[Q]})},E.messages=function(G){return G&&(this._messages=deepMerge(newMessages(),G)),this._messages},E.validate=function(G,Y,J){var Q=this;Y===void 0&&(Y={}),J===void 0&&(J=function(){});var X=G,Z=Y,ee=J;if(typeof Z=="function"&&(ee=Z,Z={}),!this.rules||Object.keys(this.rules).length===0)return ee&&ee(null,X),Promise.resolve(X);function te(ye){var Se=[],ge={};function _e(Ee){if(Array.isArray(Ee)){var Re;Se=(Re=Se).concat.apply(Re,Ee)}else Se.push(Ee)}for(var Te=0;Te<ye.length;Te++)_e(ye[Te]);Se.length?(ge=convertFieldsError(Se),ee(Se,ge)):ee(null,X)}if(Z.messages){var ne=this.messages();ne===messages&&(ne=newMessages()),deepMerge(ne,Z.messages),Z.messages=ne}else Z.messages=this.messages();var oe={},ce=Z.keys||Object.keys(this.rules);ce.forEach(function(ye){var Se=Q.rules[ye],ge=X[ye];Se.forEach(function(_e){var Te=_e;typeof Te.transform=="function"&&(X===G&&(X=_extends$1({},X)),ge=X[ye]=Te.transform(ge)),typeof Te=="function"?Te={validator:Te}:Te=_extends$1({},Te),Te.validator=Q.getValidationMethod(Te),Te.validator&&(Te.field=ye,Te.fullField=Te.fullField||ye,Te.type=Q.getType(Te),oe[ye]=oe[ye]||[],oe[ye].push({rule:Te,value:ge,source:X,field:ye}))})});var pe={};return asyncMap(oe,Z,function(ye,Se){var ge=ye.rule,_e=(ge.type==="object"||ge.type==="array")&&(typeof ge.fields=="object"||typeof ge.defaultField=="object");_e=_e&&(ge.required||!ge.required&&ye.value),ge.field=ye.field;function Te(Ae,Ie){return _extends$1({},Ie,{fullField:ge.fullField+"."+Ae,fullFields:ge.fullFields?[].concat(ge.fullFields,[Ae]):[Ae]})}function Ee(Ae){Ae===void 0&&(Ae=[]);var Ie=Array.isArray(Ae)?Ae:[Ae];!Z.suppressWarning&&Ie.length&&R.warning("async-validator:",Ie),Ie.length&&ge.message!==void 0&&(Ie=[].concat(ge.message));var Oe=Ie.map(complementError(ge,X));if(Z.first&&Oe.length)return pe[ge.field]=1,Se(Oe);if(!_e)Se(Oe);else{if(ge.required&&!ye.value)return ge.message!==void 0?Oe=[].concat(ge.message).map(complementError(ge,X)):Z.error&&(Oe=[Z.error(ge,format$5(Z.messages.required,ge.field))]),Se(Oe);var Pe={};ge.defaultField&&Object.keys(ye.value).map(function(ue){Pe[ue]=ge.defaultField}),Pe=_extends$1({},Pe,ye.rule.fields);var Le={};Object.keys(Pe).forEach(function(ue){var ae=Pe[ue],se=Array.isArray(ae)?ae:[ae];Le[ue]=se.map(Te.bind(null,ue))});var Me=new R(Le);Me.messages(Z.messages),ye.rule.options&&(ye.rule.options.messages=Z.messages,ye.rule.options.error=Z.error),Me.validate(ye.value,ye.rule.options||Z,function(ue){var ae=[];Oe&&Oe.length&&ae.push.apply(ae,Oe),ue&&ue.length&&ae.push.apply(ae,ue),Se(ae.length?ae:null)})}}var Re;if(ge.asyncValidator)Re=ge.asyncValidator(ge,ye.value,Ee,ye.source,Z);else if(ge.validator){try{Re=ge.validator(ge,ye.value,Ee,ye.source,Z)}catch(Ae){console.error==null||console.error(Ae),setTimeout(function(){throw Ae},0),Ee(Ae.message)}Re===!0?Ee():Re===!1?Ee(typeof ge.message=="function"?ge.message(ge.fullField||ge.field):ge.message||(ge.fullField||ge.field)+" fails"):Re instanceof Array?Ee(Re):Re instanceof Error&&Ee(Re.message)}Re&&Re.then&&Re.then(function(){return Ee()},function(Ae){return Ee(Ae)})},function(ye){te(ye)},X)},E.getType=function(G){if(G.type===void 0&&G.pattern instanceof RegExp&&(G.type="pattern"),typeof G.validator!="function"&&G.type&&!validators.hasOwnProperty(G.type))throw new Error(format$5("Unknown rule type %s",G.type));return G.type||"string"},E.getValidationMethod=function(G){if(typeof G.validator=="function")return G.validator;var Y=Object.keys(G),J=Y.indexOf("message");return J!==-1&&Y.splice(J,1),Y.length===1&&Y[0]==="required"?validators.required:validators[this.getType(G)]||void 0},R}();Schema$1.register=function(E,U){if(typeof U!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators[E]=U};Schema$1.warning=warning;Schema$1.messages=messages;Schema$1.validators=validators;var _a;const isClient=typeof window<"u";isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function identity$4(R){return R}function tryOnScopeDispose(R){return getCurrentScope()?(onScopeDispose(R),!0):!1}function resolveRef(R){return typeof R=="function"?computed(R):ref(R)}function tryOnMounted(R,E=!0){getCurrentInstance()?onMounted(R):E?R():nextTick(R)}const defaultWindow=isClient?window:void 0;isClient&&window.document;isClient&&window.navigator;isClient&&window.location;function useSupported(R,E=!1){const U=ref(),G=()=>U.value=Boolean(R());return G(),tryOnMounted(G,E),U}function useMediaQuery(R,E={}){const{window:U=defaultWindow}=E,G=useSupported(()=>U&&"matchMedia"in U&&typeof U.matchMedia=="function");let Y;const J=ref(!1),Q=()=>{!Y||("removeEventListener"in Y?Y.removeEventListener("change",X):Y.removeListener(X))},X=()=>{!G.value||(Q(),Y=U.matchMedia(resolveRef(R).value),J.value=Y.matches,"addEventListener"in Y?Y.addEventListener("change",X):Y.addListener(X))};return watchEffect(X),tryOnScopeDispose(()=>Q()),J}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};_global[globalKey];var SwipeDirection;(function(R){R.UP="UP",R.RIGHT="RIGHT",R.DOWN="DOWN",R.LEFT="LEFT",R.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(R,E,U)=>E in R?__defProp(R,E,{enumerable:!0,configurable:!0,writable:!0,value:U}):R[E]=U,__spreadValues=(R,E)=>{for(var U in E||(E={}))__hasOwnProp.call(E,U)&&__defNormalProp(R,U,E[U]);if(__getOwnPropSymbols)for(var U of __getOwnPropSymbols(E))__propIsEnum.call(E,U)&&__defNormalProp(R,U,E[U]);return R};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$4},_TransitionPresets);var bn$1={exports:{}};const globSourceImport={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:globSourceImport},Symbol.toStringTag,{value:"Module"})),require$$3$1=getAugmentedNamespace(__viteBrowserExternal);(function(R){(function(E,U){function G(Me,ue){if(!Me)throw new Error(ue||"Assertion failed")}function Y(Me,ue){Me.super_=ue;var ae=function(){};ae.prototype=ue.prototype,Me.prototype=new ae,Me.prototype.constructor=Me}function J(Me,ue,ae){if(J.isBN(Me))return Me;this.negative=0,this.words=null,this.length=0,this.red=null,Me!==null&&((ue==="le"||ue==="be")&&(ae=ue,ue=10),this._init(Me||0,ue||10,ae||"be"))}typeof E=="object"?E.exports=J:U.BN=J,J.BN=J,J.wordSize=26;var Q;try{typeof window<"u"&&typeof window.Buffer<"u"?Q=window.Buffer:Q=require$$3$1.Buffer}catch{}J.isBN=function(ue){return ue instanceof J?!0:ue!==null&&typeof ue=="object"&&ue.constructor.wordSize===J.wordSize&&Array.isArray(ue.words)},J.max=function(ue,ae){return ue.cmp(ae)>0?ue:ae},J.min=function(ue,ae){return ue.cmp(ae)<0?ue:ae},J.prototype._init=function(ue,ae,se){if(typeof ue=="number")return this._initNumber(ue,ae,se);if(typeof ue=="object")return this._initArray(ue,ae,se);ae==="hex"&&(ae=16),G(ae===(ae|0)&&ae>=2&&ae<=36),ue=ue.toString().replace(/\s+/g,"");var le=0;ue[0]==="-"&&(le++,this.negative=1),le<ue.length&&(ae===16?this._parseHex(ue,le,se):(this._parseBase(ue,ae,le),se==="le"&&this._initArray(this.toArray(),ae,se)))},J.prototype._initNumber=function(ue,ae,se){ue<0&&(this.negative=1,ue=-ue),ue<67108864?(this.words=[ue&67108863],this.length=1):ue<4503599627370496?(this.words=[ue&67108863,ue/67108864&67108863],this.length=2):(G(ue<9007199254740992),this.words=[ue&67108863,ue/67108864&67108863,1],this.length=3),se==="le"&&this._initArray(this.toArray(),ae,se)},J.prototype._initArray=function(ue,ae,se){if(G(typeof ue.length=="number"),ue.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ue.length/3),this.words=new Array(this.length);for(var le=0;le<this.length;le++)this.words[le]=0;var fe,be,ve=0;if(se==="be")for(le=ue.length-1,fe=0;le>=0;le-=3)be=ue[le]|ue[le-1]<<8|ue[le-2]<<16,this.words[fe]|=be<<ve&67108863,this.words[fe+1]=be>>>26-ve&67108863,ve+=24,ve>=26&&(ve-=26,fe++);else if(se==="le")for(le=0,fe=0;le<ue.length;le+=3)be=ue[le]|ue[le+1]<<8|ue[le+2]<<16,this.words[fe]|=be<<ve&67108863,this.words[fe+1]=be>>>26-ve&67108863,ve+=24,ve>=26&&(ve-=26,fe++);return this.strip()};function X(Me,ue){var ae=Me.charCodeAt(ue);return ae>=65&&ae<=70?ae-55:ae>=97&&ae<=102?ae-87:ae-48&15}function Z(Me,ue,ae){var se=X(Me,ae);return ae-1>=ue&&(se|=X(Me,ae-1)<<4),se}J.prototype._parseHex=function(ue,ae,se){this.length=Math.ceil((ue.length-ae)/6),this.words=new Array(this.length);for(var le=0;le<this.length;le++)this.words[le]=0;var fe=0,be=0,ve;if(se==="be")for(le=ue.length-1;le>=ae;le-=2)ve=Z(ue,ae,le)<<fe,this.words[be]|=ve&67108863,fe>=18?(fe-=18,be+=1,this.words[be]|=ve>>>26):fe+=8;else{var xe=ue.length-ae;for(le=xe%2===0?ae+1:ae;le<ue.length;le+=2)ve=Z(ue,ae,le)<<fe,this.words[be]|=ve&67108863,fe>=18?(fe-=18,be+=1,this.words[be]|=ve>>>26):fe+=8}this.strip()};function ee(Me,ue,ae,se){for(var le=0,fe=Math.min(Me.length,ae),be=ue;be<fe;be++){var ve=Me.charCodeAt(be)-48;le*=se,ve>=49?le+=ve-49+10:ve>=17?le+=ve-17+10:le+=ve}return le}J.prototype._parseBase=function(ue,ae,se){this.words=[0],this.length=1;for(var le=0,fe=1;fe<=67108863;fe*=ae)le++;le--,fe=fe/ae|0;for(var be=ue.length-se,ve=be%le,xe=Math.min(be,be-ve)+se,he=0,me=se;me<xe;me+=le)he=ee(ue,me,me+le,ae),this.imuln(fe),this.words[0]+he<67108864?this.words[0]+=he:this._iaddn(he);if(ve!==0){var de=1;for(he=ee(ue,me,ue.length,ae),me=0;me<ve;me++)de*=ae;this.imuln(de),this.words[0]+he<67108864?this.words[0]+=he:this._iaddn(he)}this.strip()},J.prototype.copy=function(ue){ue.words=new Array(this.length);for(var ae=0;ae<this.length;ae++)ue.words[ae]=this.words[ae];ue.length=this.length,ue.negative=this.negative,ue.red=this.red},J.prototype.clone=function(){var ue=new J(null);return this.copy(ue),ue},J.prototype._expand=function(ue){for(;this.length<ue;)this.words[this.length++]=0;return this},J.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},J.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},J.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var te=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ne=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],oe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];J.prototype.toString=function(ue,ae){ue=ue||10,ae=ae|0||1;var se;if(ue===16||ue==="hex"){se="";for(var le=0,fe=0,be=0;be<this.length;be++){var ve=this.words[be],xe=((ve<<le|fe)&16777215).toString(16);fe=ve>>>24-le&16777215,fe!==0||be!==this.length-1?se=te[6-xe.length]+xe+se:se=xe+se,le+=2,le>=26&&(le-=26,be--)}for(fe!==0&&(se=fe.toString(16)+se);se.length%ae!==0;)se="0"+se;return this.negative!==0&&(se="-"+se),se}if(ue===(ue|0)&&ue>=2&&ue<=36){var he=ne[ue],me=oe[ue];se="";var de=this.clone();for(de.negative=0;!de.isZero();){var Ce=de.modn(me).toString(ue);de=de.idivn(me),de.isZero()?se=Ce+se:se=te[he-Ce.length]+Ce+se}for(this.isZero()&&(se="0"+se);se.length%ae!==0;)se="0"+se;return this.negative!==0&&(se="-"+se),se}G(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var ue=this.words[0];return this.length===2?ue+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ue+=4503599627370496+this.words[1]*67108864:this.length>2&&G(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ue:ue},J.prototype.toJSON=function(){return this.toString(16)},J.prototype.toBuffer=function(ue,ae){return G(typeof Q<"u"),this.toArrayLike(Q,ue,ae)},J.prototype.toArray=function(ue,ae){return this.toArrayLike(Array,ue,ae)},J.prototype.toArrayLike=function(ue,ae,se){var le=this.byteLength(),fe=se||Math.max(1,le);G(le<=fe,"byte array longer than desired length"),G(fe>0,"Requested array length <= 0"),this.strip();var be=ae==="le",ve=new ue(fe),xe,he,me=this.clone();if(be){for(he=0;!me.isZero();he++)xe=me.andln(255),me.iushrn(8),ve[he]=xe;for(;he<fe;he++)ve[he]=0}else{for(he=0;he<fe-le;he++)ve[he]=0;for(he=0;!me.isZero();he++)xe=me.andln(255),me.iushrn(8),ve[fe-he-1]=xe}return ve},Math.clz32?J.prototype._countBits=function(ue){return 32-Math.clz32(ue)}:J.prototype._countBits=function(ue){var ae=ue,se=0;return ae>=4096&&(se+=13,ae>>>=13),ae>=64&&(se+=7,ae>>>=7),ae>=8&&(se+=4,ae>>>=4),ae>=2&&(se+=2,ae>>>=2),se+ae},J.prototype._zeroBits=function(ue){if(ue===0)return 26;var ae=ue,se=0;return(ae&8191)===0&&(se+=13,ae>>>=13),(ae&127)===0&&(se+=7,ae>>>=7),(ae&15)===0&&(se+=4,ae>>>=4),(ae&3)===0&&(se+=2,ae>>>=2),(ae&1)===0&&se++,se},J.prototype.bitLength=function(){var ue=this.words[this.length-1],ae=this._countBits(ue);return(this.length-1)*26+ae};function ce(Me){for(var ue=new Array(Me.bitLength()),ae=0;ae<ue.length;ae++){var se=ae/26|0,le=ae%26;ue[ae]=(Me.words[se]&1<<le)>>>le}return ue}J.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ue=0,ae=0;ae<this.length;ae++){var se=this._zeroBits(this.words[ae]);if(ue+=se,se!==26)break}return ue},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(ue){return this.negative!==0?this.abs().inotn(ue).iaddn(1):this.clone()},J.prototype.fromTwos=function(ue){return this.testn(ue-1)?this.notn(ue).iaddn(1).ineg():this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},J.prototype.iuor=function(ue){for(;this.length<ue.length;)this.words[this.length++]=0;for(var ae=0;ae<ue.length;ae++)this.words[ae]=this.words[ae]|ue.words[ae];return this.strip()},J.prototype.ior=function(ue){return G((this.negative|ue.negative)===0),this.iuor(ue)},J.prototype.or=function(ue){return this.length>ue.length?this.clone().ior(ue):ue.clone().ior(this)},J.prototype.uor=function(ue){return this.length>ue.length?this.clone().iuor(ue):ue.clone().iuor(this)},J.prototype.iuand=function(ue){var ae;this.length>ue.length?ae=ue:ae=this;for(var se=0;se<ae.length;se++)this.words[se]=this.words[se]&ue.words[se];return this.length=ae.length,this.strip()},J.prototype.iand=function(ue){return G((this.negative|ue.negative)===0),this.iuand(ue)},J.prototype.and=function(ue){return this.length>ue.length?this.clone().iand(ue):ue.clone().iand(this)},J.prototype.uand=function(ue){return this.length>ue.length?this.clone().iuand(ue):ue.clone().iuand(this)},J.prototype.iuxor=function(ue){var ae,se;this.length>ue.length?(ae=this,se=ue):(ae=ue,se=this);for(var le=0;le<se.length;le++)this.words[le]=ae.words[le]^se.words[le];if(this!==ae)for(;le<ae.length;le++)this.words[le]=ae.words[le];return this.length=ae.length,this.strip()},J.prototype.ixor=function(ue){return G((this.negative|ue.negative)===0),this.iuxor(ue)},J.prototype.xor=function(ue){return this.length>ue.length?this.clone().ixor(ue):ue.clone().ixor(this)},J.prototype.uxor=function(ue){return this.length>ue.length?this.clone().iuxor(ue):ue.clone().iuxor(this)},J.prototype.inotn=function(ue){G(typeof ue=="number"&&ue>=0);var ae=Math.ceil(ue/26)|0,se=ue%26;this._expand(ae),se>0&&ae--;for(var le=0;le<ae;le++)this.words[le]=~this.words[le]&67108863;return se>0&&(this.words[le]=~this.words[le]&67108863>>26-se),this.strip()},J.prototype.notn=function(ue){return this.clone().inotn(ue)},J.prototype.setn=function(ue,ae){G(typeof ue=="number"&&ue>=0);var se=ue/26|0,le=ue%26;return this._expand(se+1),ae?this.words[se]=this.words[se]|1<<le:this.words[se]=this.words[se]&~(1<<le),this.strip()},J.prototype.iadd=function(ue){var ae;if(this.negative!==0&&ue.negative===0)return this.negative=0,ae=this.isub(ue),this.negative^=1,this._normSign();if(this.negative===0&&ue.negative!==0)return ue.negative=0,ae=this.isub(ue),ue.negative=1,ae._normSign();var se,le;this.length>ue.length?(se=this,le=ue):(se=ue,le=this);for(var fe=0,be=0;be<le.length;be++)ae=(se.words[be]|0)+(le.words[be]|0)+fe,this.words[be]=ae&67108863,fe=ae>>>26;for(;fe!==0&&be<se.length;be++)ae=(se.words[be]|0)+fe,this.words[be]=ae&67108863,fe=ae>>>26;if(this.length=se.length,fe!==0)this.words[this.length]=fe,this.length++;else if(se!==this)for(;be<se.length;be++)this.words[be]=se.words[be];return this},J.prototype.add=function(ue){var ae;return ue.negative!==0&&this.negative===0?(ue.negative=0,ae=this.sub(ue),ue.negative^=1,ae):ue.negative===0&&this.negative!==0?(this.negative=0,ae=ue.sub(this),this.negative=1,ae):this.length>ue.length?this.clone().iadd(ue):ue.clone().iadd(this)},J.prototype.isub=function(ue){if(ue.negative!==0){ue.negative=0;var ae=this.iadd(ue);return ue.negative=1,ae._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ue),this.negative=1,this._normSign();var se=this.cmp(ue);if(se===0)return this.negative=0,this.length=1,this.words[0]=0,this;var le,fe;se>0?(le=this,fe=ue):(le=ue,fe=this);for(var be=0,ve=0;ve<fe.length;ve++)ae=(le.words[ve]|0)-(fe.words[ve]|0)+be,be=ae>>26,this.words[ve]=ae&67108863;for(;be!==0&&ve<le.length;ve++)ae=(le.words[ve]|0)+be,be=ae>>26,this.words[ve]=ae&67108863;if(be===0&&ve<le.length&&le!==this)for(;ve<le.length;ve++)this.words[ve]=le.words[ve];return this.length=Math.max(this.length,ve),le!==this&&(this.negative=1),this.strip()},J.prototype.sub=function(ue){return this.clone().isub(ue)};function pe(Me,ue,ae){ae.negative=ue.negative^Me.negative;var se=Me.length+ue.length|0;ae.length=se,se=se-1|0;var le=Me.words[0]|0,fe=ue.words[0]|0,be=le*fe,ve=be&67108863,xe=be/67108864|0;ae.words[0]=ve;for(var he=1;he<se;he++){for(var me=xe>>>26,de=xe&67108863,Ce=Math.min(he,ue.length-1),Fe=Math.max(0,he-Me.length+1);Fe<=Ce;Fe++){var we=he-Fe|0;le=Me.words[we]|0,fe=ue.words[Fe]|0,be=le*fe+de,me+=be/67108864|0,de=be&67108863}ae.words[he]=de|0,xe=me|0}return xe!==0?ae.words[he]=xe|0:ae.length--,ae.strip()}var ye=function(ue,ae,se){var le=ue.words,fe=ae.words,be=se.words,ve=0,xe,he,me,de=le[0]|0,Ce=de&8191,Fe=de>>>13,we=le[1]|0,ke=we&8191,Ne=we>>>13,He=le[2]|0,Ue=He&8191,Ge=He>>>13,De=le[3]|0,$e=De&8191,Be=De>>>13,je=le[4]|0,ze=je&8191,We=je>>>13,Ke=le[5]|0,Ye=Ke&8191,Je=Ke>>>13,Qe=le[6]|0,qe=Qe&8191,rt=Qe>>>13,tt=le[7]|0,Xe=tt&8191,it=tt>>>13,st=le[8]|0,nt=st&8191,ot=st>>>13,pt=le[9]|0,dt=pt&8191,Et=pt>>>13,Ct=fe[0]|0,ht=Ct&8191,Ve=Ct>>>13,et=fe[1]|0,Ze=et&8191,ut=et>>>13,at=fe[2]|0,ct=at&8191,wt=at>>>13,Tt=fe[3]|0,yt=Tt&8191,$t=Tt>>>13,kt=fe[4]|0,mt=kt&8191,Mt=kt>>>13,Ot=fe[5]|0,bt=Ot&8191,Rt=Ot>>>13,Dt=fe[6]|0,vt=Dt&8191,Nt=Dt>>>13,Pt=fe[7]|0,xt=Pt&8191,Bt=Pt>>>13,Lt=fe[8]|0,_t=Lt&8191,Ft=Lt>>>13,jt=fe[9]|0,St=jt&8191,Ht=jt>>>13;se.negative=ue.negative^ae.negative,se.length=19,xe=Math.imul(Ce,ht),he=Math.imul(Ce,Ve),he=he+Math.imul(Fe,ht)|0,me=Math.imul(Fe,Ve);var At=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(At>>>26)|0,At&=67108863,xe=Math.imul(ke,ht),he=Math.imul(ke,Ve),he=he+Math.imul(Ne,ht)|0,me=Math.imul(Ne,Ve),xe=xe+Math.imul(Ce,Ze)|0,he=he+Math.imul(Ce,ut)|0,he=he+Math.imul(Fe,Ze)|0,me=me+Math.imul(Fe,ut)|0;var It=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(It>>>26)|0,It&=67108863,xe=Math.imul(Ue,ht),he=Math.imul(Ue,Ve),he=he+Math.imul(Ge,ht)|0,me=Math.imul(Ge,Ve),xe=xe+Math.imul(ke,Ze)|0,he=he+Math.imul(ke,ut)|0,he=he+Math.imul(Ne,Ze)|0,me=me+Math.imul(Ne,ut)|0,xe=xe+Math.imul(Ce,ct)|0,he=he+Math.imul(Ce,wt)|0,he=he+Math.imul(Fe,ct)|0,me=me+Math.imul(Fe,wt)|0;var Ut=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,xe=Math.imul($e,ht),he=Math.imul($e,Ve),he=he+Math.imul(Be,ht)|0,me=Math.imul(Be,Ve),xe=xe+Math.imul(Ue,Ze)|0,he=he+Math.imul(Ue,ut)|0,he=he+Math.imul(Ge,Ze)|0,me=me+Math.imul(Ge,ut)|0,xe=xe+Math.imul(ke,ct)|0,he=he+Math.imul(ke,wt)|0,he=he+Math.imul(Ne,ct)|0,me=me+Math.imul(Ne,wt)|0,xe=xe+Math.imul(Ce,yt)|0,he=he+Math.imul(Ce,$t)|0,he=he+Math.imul(Fe,yt)|0,me=me+Math.imul(Fe,$t)|0;var zt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(zt>>>26)|0,zt&=67108863,xe=Math.imul(ze,ht),he=Math.imul(ze,Ve),he=he+Math.imul(We,ht)|0,me=Math.imul(We,Ve),xe=xe+Math.imul($e,Ze)|0,he=he+Math.imul($e,ut)|0,he=he+Math.imul(Be,Ze)|0,me=me+Math.imul(Be,ut)|0,xe=xe+Math.imul(Ue,ct)|0,he=he+Math.imul(Ue,wt)|0,he=he+Math.imul(Ge,ct)|0,me=me+Math.imul(Ge,wt)|0,xe=xe+Math.imul(ke,yt)|0,he=he+Math.imul(ke,$t)|0,he=he+Math.imul(Ne,yt)|0,me=me+Math.imul(Ne,$t)|0,xe=xe+Math.imul(Ce,mt)|0,he=he+Math.imul(Ce,Mt)|0,he=he+Math.imul(Fe,mt)|0,me=me+Math.imul(Fe,Mt)|0;var Wt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,xe=Math.imul(Ye,ht),he=Math.imul(Ye,Ve),he=he+Math.imul(Je,ht)|0,me=Math.imul(Je,Ve),xe=xe+Math.imul(ze,Ze)|0,he=he+Math.imul(ze,ut)|0,he=he+Math.imul(We,Ze)|0,me=me+Math.imul(We,ut)|0,xe=xe+Math.imul($e,ct)|0,he=he+Math.imul($e,wt)|0,he=he+Math.imul(Be,ct)|0,me=me+Math.imul(Be,wt)|0,xe=xe+Math.imul(Ue,yt)|0,he=he+Math.imul(Ue,$t)|0,he=he+Math.imul(Ge,yt)|0,me=me+Math.imul(Ge,$t)|0,xe=xe+Math.imul(ke,mt)|0,he=he+Math.imul(ke,Mt)|0,he=he+Math.imul(Ne,mt)|0,me=me+Math.imul(Ne,Mt)|0,xe=xe+Math.imul(Ce,bt)|0,he=he+Math.imul(Ce,Rt)|0,he=he+Math.imul(Fe,bt)|0,me=me+Math.imul(Fe,Rt)|0;var Vt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,xe=Math.imul(qe,ht),he=Math.imul(qe,Ve),he=he+Math.imul(rt,ht)|0,me=Math.imul(rt,Ve),xe=xe+Math.imul(Ye,Ze)|0,he=he+Math.imul(Ye,ut)|0,he=he+Math.imul(Je,Ze)|0,me=me+Math.imul(Je,ut)|0,xe=xe+Math.imul(ze,ct)|0,he=he+Math.imul(ze,wt)|0,he=he+Math.imul(We,ct)|0,me=me+Math.imul(We,wt)|0,xe=xe+Math.imul($e,yt)|0,he=he+Math.imul($e,$t)|0,he=he+Math.imul(Be,yt)|0,me=me+Math.imul(Be,$t)|0,xe=xe+Math.imul(Ue,mt)|0,he=he+Math.imul(Ue,Mt)|0,he=he+Math.imul(Ge,mt)|0,me=me+Math.imul(Ge,Mt)|0,xe=xe+Math.imul(ke,bt)|0,he=he+Math.imul(ke,Rt)|0,he=he+Math.imul(Ne,bt)|0,me=me+Math.imul(Ne,Rt)|0,xe=xe+Math.imul(Ce,vt)|0,he=he+Math.imul(Ce,Nt)|0,he=he+Math.imul(Fe,vt)|0,me=me+Math.imul(Fe,Nt)|0;var qt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(qt>>>26)|0,qt&=67108863,xe=Math.imul(Xe,ht),he=Math.imul(Xe,Ve),he=he+Math.imul(it,ht)|0,me=Math.imul(it,Ve),xe=xe+Math.imul(qe,Ze)|0,he=he+Math.imul(qe,ut)|0,he=he+Math.imul(rt,Ze)|0,me=me+Math.imul(rt,ut)|0,xe=xe+Math.imul(Ye,ct)|0,he=he+Math.imul(Ye,wt)|0,he=he+Math.imul(Je,ct)|0,me=me+Math.imul(Je,wt)|0,xe=xe+Math.imul(ze,yt)|0,he=he+Math.imul(ze,$t)|0,he=he+Math.imul(We,yt)|0,me=me+Math.imul(We,$t)|0,xe=xe+Math.imul($e,mt)|0,he=he+Math.imul($e,Mt)|0,he=he+Math.imul(Be,mt)|0,me=me+Math.imul(Be,Mt)|0,xe=xe+Math.imul(Ue,bt)|0,he=he+Math.imul(Ue,Rt)|0,he=he+Math.imul(Ge,bt)|0,me=me+Math.imul(Ge,Rt)|0,xe=xe+Math.imul(ke,vt)|0,he=he+Math.imul(ke,Nt)|0,he=he+Math.imul(Ne,vt)|0,me=me+Math.imul(Ne,Nt)|0,xe=xe+Math.imul(Ce,xt)|0,he=he+Math.imul(Ce,Bt)|0,he=he+Math.imul(Fe,xt)|0,me=me+Math.imul(Fe,Bt)|0;var Gt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,xe=Math.imul(nt,ht),he=Math.imul(nt,Ve),he=he+Math.imul(ot,ht)|0,me=Math.imul(ot,Ve),xe=xe+Math.imul(Xe,Ze)|0,he=he+Math.imul(Xe,ut)|0,he=he+Math.imul(it,Ze)|0,me=me+Math.imul(it,ut)|0,xe=xe+Math.imul(qe,ct)|0,he=he+Math.imul(qe,wt)|0,he=he+Math.imul(rt,ct)|0,me=me+Math.imul(rt,wt)|0,xe=xe+Math.imul(Ye,yt)|0,he=he+Math.imul(Ye,$t)|0,he=he+Math.imul(Je,yt)|0,me=me+Math.imul(Je,$t)|0,xe=xe+Math.imul(ze,mt)|0,he=he+Math.imul(ze,Mt)|0,he=he+Math.imul(We,mt)|0,me=me+Math.imul(We,Mt)|0,xe=xe+Math.imul($e,bt)|0,he=he+Math.imul($e,Rt)|0,he=he+Math.imul(Be,bt)|0,me=me+Math.imul(Be,Rt)|0,xe=xe+Math.imul(Ue,vt)|0,he=he+Math.imul(Ue,Nt)|0,he=he+Math.imul(Ge,vt)|0,me=me+Math.imul(Ge,Nt)|0,xe=xe+Math.imul(ke,xt)|0,he=he+Math.imul(ke,Bt)|0,he=he+Math.imul(Ne,xt)|0,me=me+Math.imul(Ne,Bt)|0,xe=xe+Math.imul(Ce,_t)|0,he=he+Math.imul(Ce,Ft)|0,he=he+Math.imul(Fe,_t)|0,me=me+Math.imul(Fe,Ft)|0;var Kt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,xe=Math.imul(dt,ht),he=Math.imul(dt,Ve),he=he+Math.imul(Et,ht)|0,me=Math.imul(Et,Ve),xe=xe+Math.imul(nt,Ze)|0,he=he+Math.imul(nt,ut)|0,he=he+Math.imul(ot,Ze)|0,me=me+Math.imul(ot,ut)|0,xe=xe+Math.imul(Xe,ct)|0,he=he+Math.imul(Xe,wt)|0,he=he+Math.imul(it,ct)|0,me=me+Math.imul(it,wt)|0,xe=xe+Math.imul(qe,yt)|0,he=he+Math.imul(qe,$t)|0,he=he+Math.imul(rt,yt)|0,me=me+Math.imul(rt,$t)|0,xe=xe+Math.imul(Ye,mt)|0,he=he+Math.imul(Ye,Mt)|0,he=he+Math.imul(Je,mt)|0,me=me+Math.imul(Je,Mt)|0,xe=xe+Math.imul(ze,bt)|0,he=he+Math.imul(ze,Rt)|0,he=he+Math.imul(We,bt)|0,me=me+Math.imul(We,Rt)|0,xe=xe+Math.imul($e,vt)|0,he=he+Math.imul($e,Nt)|0,he=he+Math.imul(Be,vt)|0,me=me+Math.imul(Be,Nt)|0,xe=xe+Math.imul(Ue,xt)|0,he=he+Math.imul(Ue,Bt)|0,he=he+Math.imul(Ge,xt)|0,me=me+Math.imul(Ge,Bt)|0,xe=xe+Math.imul(ke,_t)|0,he=he+Math.imul(ke,Ft)|0,he=he+Math.imul(Ne,_t)|0,me=me+Math.imul(Ne,Ft)|0,xe=xe+Math.imul(Ce,St)|0,he=he+Math.imul(Ce,Ht)|0,he=he+Math.imul(Fe,St)|0,me=me+Math.imul(Fe,Ht)|0;var Yt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,xe=Math.imul(dt,Ze),he=Math.imul(dt,ut),he=he+Math.imul(Et,Ze)|0,me=Math.imul(Et,ut),xe=xe+Math.imul(nt,ct)|0,he=he+Math.imul(nt,wt)|0,he=he+Math.imul(ot,ct)|0,me=me+Math.imul(ot,wt)|0,xe=xe+Math.imul(Xe,yt)|0,he=he+Math.imul(Xe,$t)|0,he=he+Math.imul(it,yt)|0,me=me+Math.imul(it,$t)|0,xe=xe+Math.imul(qe,mt)|0,he=he+Math.imul(qe,Mt)|0,he=he+Math.imul(rt,mt)|0,me=me+Math.imul(rt,Mt)|0,xe=xe+Math.imul(Ye,bt)|0,he=he+Math.imul(Ye,Rt)|0,he=he+Math.imul(Je,bt)|0,me=me+Math.imul(Je,Rt)|0,xe=xe+Math.imul(ze,vt)|0,he=he+Math.imul(ze,Nt)|0,he=he+Math.imul(We,vt)|0,me=me+Math.imul(We,Nt)|0,xe=xe+Math.imul($e,xt)|0,he=he+Math.imul($e,Bt)|0,he=he+Math.imul(Be,xt)|0,me=me+Math.imul(Be,Bt)|0,xe=xe+Math.imul(Ue,_t)|0,he=he+Math.imul(Ue,Ft)|0,he=he+Math.imul(Ge,_t)|0,me=me+Math.imul(Ge,Ft)|0,xe=xe+Math.imul(ke,St)|0,he=he+Math.imul(ke,Ht)|0,he=he+Math.imul(Ne,St)|0,me=me+Math.imul(Ne,Ht)|0;var Jt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,xe=Math.imul(dt,ct),he=Math.imul(dt,wt),he=he+Math.imul(Et,ct)|0,me=Math.imul(Et,wt),xe=xe+Math.imul(nt,yt)|0,he=he+Math.imul(nt,$t)|0,he=he+Math.imul(ot,yt)|0,me=me+Math.imul(ot,$t)|0,xe=xe+Math.imul(Xe,mt)|0,he=he+Math.imul(Xe,Mt)|0,he=he+Math.imul(it,mt)|0,me=me+Math.imul(it,Mt)|0,xe=xe+Math.imul(qe,bt)|0,he=he+Math.imul(qe,Rt)|0,he=he+Math.imul(rt,bt)|0,me=me+Math.imul(rt,Rt)|0,xe=xe+Math.imul(Ye,vt)|0,he=he+Math.imul(Ye,Nt)|0,he=he+Math.imul(Je,vt)|0,me=me+Math.imul(Je,Nt)|0,xe=xe+Math.imul(ze,xt)|0,he=he+Math.imul(ze,Bt)|0,he=he+Math.imul(We,xt)|0,me=me+Math.imul(We,Bt)|0,xe=xe+Math.imul($e,_t)|0,he=he+Math.imul($e,Ft)|0,he=he+Math.imul(Be,_t)|0,me=me+Math.imul(Be,Ft)|0,xe=xe+Math.imul(Ue,St)|0,he=he+Math.imul(Ue,Ht)|0,he=he+Math.imul(Ge,St)|0,me=me+Math.imul(Ge,Ht)|0;var Qt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,xe=Math.imul(dt,yt),he=Math.imul(dt,$t),he=he+Math.imul(Et,yt)|0,me=Math.imul(Et,$t),xe=xe+Math.imul(nt,mt)|0,he=he+Math.imul(nt,Mt)|0,he=he+Math.imul(ot,mt)|0,me=me+Math.imul(ot,Mt)|0,xe=xe+Math.imul(Xe,bt)|0,he=he+Math.imul(Xe,Rt)|0,he=he+Math.imul(it,bt)|0,me=me+Math.imul(it,Rt)|0,xe=xe+Math.imul(qe,vt)|0,he=he+Math.imul(qe,Nt)|0,he=he+Math.imul(rt,vt)|0,me=me+Math.imul(rt,Nt)|0,xe=xe+Math.imul(Ye,xt)|0,he=he+Math.imul(Ye,Bt)|0,he=he+Math.imul(Je,xt)|0,me=me+Math.imul(Je,Bt)|0,xe=xe+Math.imul(ze,_t)|0,he=he+Math.imul(ze,Ft)|0,he=he+Math.imul(We,_t)|0,me=me+Math.imul(We,Ft)|0,xe=xe+Math.imul($e,St)|0,he=he+Math.imul($e,Ht)|0,he=he+Math.imul(Be,St)|0,me=me+Math.imul(Be,Ht)|0;var Xt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,xe=Math.imul(dt,mt),he=Math.imul(dt,Mt),he=he+Math.imul(Et,mt)|0,me=Math.imul(Et,Mt),xe=xe+Math.imul(nt,bt)|0,he=he+Math.imul(nt,Rt)|0,he=he+Math.imul(ot,bt)|0,me=me+Math.imul(ot,Rt)|0,xe=xe+Math.imul(Xe,vt)|0,he=he+Math.imul(Xe,Nt)|0,he=he+Math.imul(it,vt)|0,me=me+Math.imul(it,Nt)|0,xe=xe+Math.imul(qe,xt)|0,he=he+Math.imul(qe,Bt)|0,he=he+Math.imul(rt,xt)|0,me=me+Math.imul(rt,Bt)|0,xe=xe+Math.imul(Ye,_t)|0,he=he+Math.imul(Ye,Ft)|0,he=he+Math.imul(Je,_t)|0,me=me+Math.imul(Je,Ft)|0,xe=xe+Math.imul(ze,St)|0,he=he+Math.imul(ze,Ht)|0,he=he+Math.imul(We,St)|0,me=me+Math.imul(We,Ht)|0;var Zt=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,xe=Math.imul(dt,bt),he=Math.imul(dt,Rt),he=he+Math.imul(Et,bt)|0,me=Math.imul(Et,Rt),xe=xe+Math.imul(nt,vt)|0,he=he+Math.imul(nt,Nt)|0,he=he+Math.imul(ot,vt)|0,me=me+Math.imul(ot,Nt)|0,xe=xe+Math.imul(Xe,xt)|0,he=he+Math.imul(Xe,Bt)|0,he=he+Math.imul(it,xt)|0,me=me+Math.imul(it,Bt)|0,xe=xe+Math.imul(qe,_t)|0,he=he+Math.imul(qe,Ft)|0,he=he+Math.imul(rt,_t)|0,me=me+Math.imul(rt,Ft)|0,xe=xe+Math.imul(Ye,St)|0,he=he+Math.imul(Ye,Ht)|0,he=he+Math.imul(Je,St)|0,me=me+Math.imul(Je,Ht)|0;var er=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(er>>>26)|0,er&=67108863,xe=Math.imul(dt,vt),he=Math.imul(dt,Nt),he=he+Math.imul(Et,vt)|0,me=Math.imul(Et,Nt),xe=xe+Math.imul(nt,xt)|0,he=he+Math.imul(nt,Bt)|0,he=he+Math.imul(ot,xt)|0,me=me+Math.imul(ot,Bt)|0,xe=xe+Math.imul(Xe,_t)|0,he=he+Math.imul(Xe,Ft)|0,he=he+Math.imul(it,_t)|0,me=me+Math.imul(it,Ft)|0,xe=xe+Math.imul(qe,St)|0,he=he+Math.imul(qe,Ht)|0,he=he+Math.imul(rt,St)|0,me=me+Math.imul(rt,Ht)|0;var tr=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(tr>>>26)|0,tr&=67108863,xe=Math.imul(dt,xt),he=Math.imul(dt,Bt),he=he+Math.imul(Et,xt)|0,me=Math.imul(Et,Bt),xe=xe+Math.imul(nt,_t)|0,he=he+Math.imul(nt,Ft)|0,he=he+Math.imul(ot,_t)|0,me=me+Math.imul(ot,Ft)|0,xe=xe+Math.imul(Xe,St)|0,he=he+Math.imul(Xe,Ht)|0,he=he+Math.imul(it,St)|0,me=me+Math.imul(it,Ht)|0;var rr=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(rr>>>26)|0,rr&=67108863,xe=Math.imul(dt,_t),he=Math.imul(dt,Ft),he=he+Math.imul(Et,_t)|0,me=Math.imul(Et,Ft),xe=xe+Math.imul(nt,St)|0,he=he+Math.imul(nt,Ht)|0,he=he+Math.imul(ot,St)|0,me=me+Math.imul(ot,Ht)|0;var nr=(ve+xe|0)+((he&8191)<<13)|0;ve=(me+(he>>>13)|0)+(nr>>>26)|0,nr&=67108863,xe=Math.imul(dt,St),he=Math.imul(dt,Ht),he=he+Math.imul(Et,St)|0,me=Math.imul(Et,Ht);var ir=(ve+xe|0)+((he&8191)<<13)|0;return ve=(me+(he>>>13)|0)+(ir>>>26)|0,ir&=67108863,be[0]=At,be[1]=It,be[2]=Ut,be[3]=zt,be[4]=Wt,be[5]=Vt,be[6]=qt,be[7]=Gt,be[8]=Kt,be[9]=Yt,be[10]=Jt,be[11]=Qt,be[12]=Xt,be[13]=Zt,be[14]=er,be[15]=tr,be[16]=rr,be[17]=nr,be[18]=ir,ve!==0&&(be[19]=ve,se.length++),se};Math.imul||(ye=pe);function Se(Me,ue,ae){ae.negative=ue.negative^Me.negative,ae.length=Me.length+ue.length;for(var se=0,le=0,fe=0;fe<ae.length-1;fe++){var be=le;le=0;for(var ve=se&67108863,xe=Math.min(fe,ue.length-1),he=Math.max(0,fe-Me.length+1);he<=xe;he++){var me=fe-he,de=Me.words[me]|0,Ce=ue.words[he]|0,Fe=de*Ce,we=Fe&67108863;be=be+(Fe/67108864|0)|0,we=we+ve|0,ve=we&67108863,be=be+(we>>>26)|0,le+=be>>>26,be&=67108863}ae.words[fe]=ve,se=be,be=le}return se!==0?ae.words[fe]=se:ae.length--,ae.strip()}function ge(Me,ue,ae){var se=new _e;return se.mulp(Me,ue,ae)}J.prototype.mulTo=function(ue,ae){var se,le=this.length+ue.length;return this.length===10&&ue.length===10?se=ye(this,ue,ae):le<63?se=pe(this,ue,ae):le<1024?se=Se(this,ue,ae):se=ge(this,ue,ae),se};function _e(Me,ue){this.x=Me,this.y=ue}_e.prototype.makeRBT=function(ue){for(var ae=new Array(ue),se=J.prototype._countBits(ue)-1,le=0;le<ue;le++)ae[le]=this.revBin(le,se,ue);return ae},_e.prototype.revBin=function(ue,ae,se){if(ue===0||ue===se-1)return ue;for(var le=0,fe=0;fe<ae;fe++)le|=(ue&1)<<ae-fe-1,ue>>=1;return le},_e.prototype.permute=function(ue,ae,se,le,fe,be){for(var ve=0;ve<be;ve++)le[ve]=ae[ue[ve]],fe[ve]=se[ue[ve]]},_e.prototype.transform=function(ue,ae,se,le,fe,be){this.permute(be,ue,ae,se,le,fe);for(var ve=1;ve<fe;ve<<=1)for(var xe=ve<<1,he=Math.cos(2*Math.PI/xe),me=Math.sin(2*Math.PI/xe),de=0;de<fe;de+=xe)for(var Ce=he,Fe=me,we=0;we<ve;we++){var ke=se[de+we],Ne=le[de+we],He=se[de+we+ve],Ue=le[de+we+ve],Ge=Ce*He-Fe*Ue;Ue=Ce*Ue+Fe*He,He=Ge,se[de+we]=ke+He,le[de+we]=Ne+Ue,se[de+we+ve]=ke-He,le[de+we+ve]=Ne-Ue,we!==xe&&(Ge=he*Ce-me*Fe,Fe=he*Fe+me*Ce,Ce=Ge)}},_e.prototype.guessLen13b=function(ue,ae){var se=Math.max(ae,ue)|1,le=se&1,fe=0;for(se=se/2|0;se;se=se>>>1)fe++;return 1<<fe+1+le},_e.prototype.conjugate=function(ue,ae,se){if(!(se<=1))for(var le=0;le<se/2;le++){var fe=ue[le];ue[le]=ue[se-le-1],ue[se-le-1]=fe,fe=ae[le],ae[le]=-ae[se-le-1],ae[se-le-1]=-fe}},_e.prototype.normalize13b=function(ue,ae){for(var se=0,le=0;le<ae/2;le++){var fe=Math.round(ue[2*le+1]/ae)*8192+Math.round(ue[2*le]/ae)+se;ue[le]=fe&67108863,fe<67108864?se=0:se=fe/67108864|0}return ue},_e.prototype.convert13b=function(ue,ae,se,le){for(var fe=0,be=0;be<ae;be++)fe=fe+(ue[be]|0),se[2*be]=fe&8191,fe=fe>>>13,se[2*be+1]=fe&8191,fe=fe>>>13;for(be=2*ae;be<le;++be)se[be]=0;G(fe===0),G((fe&-8192)===0)},_e.prototype.stub=function(ue){for(var ae=new Array(ue),se=0;se<ue;se++)ae[se]=0;return ae},_e.prototype.mulp=function(ue,ae,se){var le=2*this.guessLen13b(ue.length,ae.length),fe=this.makeRBT(le),be=this.stub(le),ve=new Array(le),xe=new Array(le),he=new Array(le),me=new Array(le),de=new Array(le),Ce=new Array(le),Fe=se.words;Fe.length=le,this.convert13b(ue.words,ue.length,ve,le),this.convert13b(ae.words,ae.length,me,le),this.transform(ve,be,xe,he,le,fe),this.transform(me,be,de,Ce,le,fe);for(var we=0;we<le;we++){var ke=xe[we]*de[we]-he[we]*Ce[we];he[we]=xe[we]*Ce[we]+he[we]*de[we],xe[we]=ke}return this.conjugate(xe,he,le),this.transform(xe,he,Fe,be,le,fe),this.conjugate(Fe,be,le),this.normalize13b(Fe,le),se.negative=ue.negative^ae.negative,se.length=ue.length+ae.length,se.strip()},J.prototype.mul=function(ue){var ae=new J(null);return ae.words=new Array(this.length+ue.length),this.mulTo(ue,ae)},J.prototype.mulf=function(ue){var ae=new J(null);return ae.words=new Array(this.length+ue.length),ge(this,ue,ae)},J.prototype.imul=function(ue){return this.clone().mulTo(ue,this)},J.prototype.imuln=function(ue){G(typeof ue=="number"),G(ue<67108864);for(var ae=0,se=0;se<this.length;se++){var le=(this.words[se]|0)*ue,fe=(le&67108863)+(ae&67108863);ae>>=26,ae+=le/67108864|0,ae+=fe>>>26,this.words[se]=fe&67108863}return ae!==0&&(this.words[se]=ae,this.length++),this},J.prototype.muln=function(ue){return this.clone().imuln(ue)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(ue){var ae=ce(ue);if(ae.length===0)return new J(1);for(var se=this,le=0;le<ae.length&&ae[le]===0;le++,se=se.sqr());if(++le<ae.length)for(var fe=se.sqr();le<ae.length;le++,fe=fe.sqr())ae[le]!==0&&(se=se.mul(fe));return se},J.prototype.iushln=function(ue){G(typeof ue=="number"&&ue>=0);var ae=ue%26,se=(ue-ae)/26,le=67108863>>>26-ae<<26-ae,fe;if(ae!==0){var be=0;for(fe=0;fe<this.length;fe++){var ve=this.words[fe]&le,xe=(this.words[fe]|0)-ve<<ae;this.words[fe]=xe|be,be=ve>>>26-ae}be&&(this.words[fe]=be,this.length++)}if(se!==0){for(fe=this.length-1;fe>=0;fe--)this.words[fe+se]=this.words[fe];for(fe=0;fe<se;fe++)this.words[fe]=0;this.length+=se}return this.strip()},J.prototype.ishln=function(ue){return G(this.negative===0),this.iushln(ue)},J.prototype.iushrn=function(ue,ae,se){G(typeof ue=="number"&&ue>=0);var le;ae?le=(ae-ae%26)/26:le=0;var fe=ue%26,be=Math.min((ue-fe)/26,this.length),ve=67108863^67108863>>>fe<<fe,xe=se;if(le-=be,le=Math.max(0,le),xe){for(var he=0;he<be;he++)xe.words[he]=this.words[he];xe.length=be}if(be!==0)if(this.length>be)for(this.length-=be,he=0;he<this.length;he++)this.words[he]=this.words[he+be];else this.words[0]=0,this.length=1;var me=0;for(he=this.length-1;he>=0&&(me!==0||he>=le);he--){var de=this.words[he]|0;this.words[he]=me<<26-fe|de>>>fe,me=de&ve}return xe&&me!==0&&(xe.words[xe.length++]=me),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},J.prototype.ishrn=function(ue,ae,se){return G(this.negative===0),this.iushrn(ue,ae,se)},J.prototype.shln=function(ue){return this.clone().ishln(ue)},J.prototype.ushln=function(ue){return this.clone().iushln(ue)},J.prototype.shrn=function(ue){return this.clone().ishrn(ue)},J.prototype.ushrn=function(ue){return this.clone().iushrn(ue)},J.prototype.testn=function(ue){G(typeof ue=="number"&&ue>=0);var ae=ue%26,se=(ue-ae)/26,le=1<<ae;if(this.length<=se)return!1;var fe=this.words[se];return!!(fe&le)},J.prototype.imaskn=function(ue){G(typeof ue=="number"&&ue>=0);var ae=ue%26,se=(ue-ae)/26;if(G(this.negative===0,"imaskn works only with positive numbers"),this.length<=se)return this;if(ae!==0&&se++,this.length=Math.min(se,this.length),ae!==0){var le=67108863^67108863>>>ae<<ae;this.words[this.length-1]&=le}return this.strip()},J.prototype.maskn=function(ue){return this.clone().imaskn(ue)},J.prototype.iaddn=function(ue){return G(typeof ue=="number"),G(ue<67108864),ue<0?this.isubn(-ue):this.negative!==0?this.length===1&&(this.words[0]|0)<ue?(this.words[0]=ue-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ue),this.negative=1,this):this._iaddn(ue)},J.prototype._iaddn=function(ue){this.words[0]+=ue;for(var ae=0;ae<this.length&&this.words[ae]>=67108864;ae++)this.words[ae]-=67108864,ae===this.length-1?this.words[ae+1]=1:this.words[ae+1]++;return this.length=Math.max(this.length,ae+1),this},J.prototype.isubn=function(ue){if(G(typeof ue=="number"),G(ue<67108864),ue<0)return this.iaddn(-ue);if(this.negative!==0)return this.negative=0,this.iaddn(ue),this.negative=1,this;if(this.words[0]-=ue,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ae=0;ae<this.length&&this.words[ae]<0;ae++)this.words[ae]+=67108864,this.words[ae+1]-=1;return this.strip()},J.prototype.addn=function(ue){return this.clone().iaddn(ue)},J.prototype.subn=function(ue){return this.clone().isubn(ue)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(ue,ae,se){var le=ue.length+se,fe;this._expand(le);var be,ve=0;for(fe=0;fe<ue.length;fe++){be=(this.words[fe+se]|0)+ve;var xe=(ue.words[fe]|0)*ae;be-=xe&67108863,ve=(be>>26)-(xe/67108864|0),this.words[fe+se]=be&67108863}for(;fe<this.length-se;fe++)be=(this.words[fe+se]|0)+ve,ve=be>>26,this.words[fe+se]=be&67108863;if(ve===0)return this.strip();for(G(ve===-1),ve=0,fe=0;fe<this.length;fe++)be=-(this.words[fe]|0)+ve,ve=be>>26,this.words[fe]=be&67108863;return this.negative=1,this.strip()},J.prototype._wordDiv=function(ue,ae){var se=this.length-ue.length,le=this.clone(),fe=ue,be=fe.words[fe.length-1]|0,ve=this._countBits(be);se=26-ve,se!==0&&(fe=fe.ushln(se),le.iushln(se),be=fe.words[fe.length-1]|0);var xe=le.length-fe.length,he;if(ae!=="mod"){he=new J(null),he.length=xe+1,he.words=new Array(he.length);for(var me=0;me<he.length;me++)he.words[me]=0}var de=le.clone()._ishlnsubmul(fe,1,xe);de.negative===0&&(le=de,he&&(he.words[xe]=1));for(var Ce=xe-1;Ce>=0;Ce--){var Fe=(le.words[fe.length+Ce]|0)*67108864+(le.words[fe.length+Ce-1]|0);for(Fe=Math.min(Fe/be|0,67108863),le._ishlnsubmul(fe,Fe,Ce);le.negative!==0;)Fe--,le.negative=0,le._ishlnsubmul(fe,1,Ce),le.isZero()||(le.negative^=1);he&&(he.words[Ce]=Fe)}return he&&he.strip(),le.strip(),ae!=="div"&&se!==0&&le.iushrn(se),{div:he||null,mod:le}},J.prototype.divmod=function(ue,ae,se){if(G(!ue.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var le,fe,be;return this.negative!==0&&ue.negative===0?(be=this.neg().divmod(ue,ae),ae!=="mod"&&(le=be.div.neg()),ae!=="div"&&(fe=be.mod.neg(),se&&fe.negative!==0&&fe.iadd(ue)),{div:le,mod:fe}):this.negative===0&&ue.negative!==0?(be=this.divmod(ue.neg(),ae),ae!=="mod"&&(le=be.div.neg()),{div:le,mod:be.mod}):(this.negative&ue.negative)!==0?(be=this.neg().divmod(ue.neg(),ae),ae!=="div"&&(fe=be.mod.neg(),se&&fe.negative!==0&&fe.isub(ue)),{div:be.div,mod:fe}):ue.length>this.length||this.cmp(ue)<0?{div:new J(0),mod:this}:ue.length===1?ae==="div"?{div:this.divn(ue.words[0]),mod:null}:ae==="mod"?{div:null,mod:new J(this.modn(ue.words[0]))}:{div:this.divn(ue.words[0]),mod:new J(this.modn(ue.words[0]))}:this._wordDiv(ue,ae)},J.prototype.div=function(ue){return this.divmod(ue,"div",!1).div},J.prototype.mod=function(ue){return this.divmod(ue,"mod",!1).mod},J.prototype.umod=function(ue){return this.divmod(ue,"mod",!0).mod},J.prototype.divRound=function(ue){var ae=this.divmod(ue);if(ae.mod.isZero())return ae.div;var se=ae.div.negative!==0?ae.mod.isub(ue):ae.mod,le=ue.ushrn(1),fe=ue.andln(1),be=se.cmp(le);return be<0||fe===1&&be===0?ae.div:ae.div.negative!==0?ae.div.isubn(1):ae.div.iaddn(1)},J.prototype.modn=function(ue){G(ue<=67108863);for(var ae=(1<<26)%ue,se=0,le=this.length-1;le>=0;le--)se=(ae*se+(this.words[le]|0))%ue;return se},J.prototype.idivn=function(ue){G(ue<=67108863);for(var ae=0,se=this.length-1;se>=0;se--){var le=(this.words[se]|0)+ae*67108864;this.words[se]=le/ue|0,ae=le%ue}return this.strip()},J.prototype.divn=function(ue){return this.clone().idivn(ue)},J.prototype.egcd=function(ue){G(ue.negative===0),G(!ue.isZero());var ae=this,se=ue.clone();ae.negative!==0?ae=ae.umod(ue):ae=ae.clone();for(var le=new J(1),fe=new J(0),be=new J(0),ve=new J(1),xe=0;ae.isEven()&&se.isEven();)ae.iushrn(1),se.iushrn(1),++xe;for(var he=se.clone(),me=ae.clone();!ae.isZero();){for(var de=0,Ce=1;(ae.words[0]&Ce)===0&&de<26;++de,Ce<<=1);if(de>0)for(ae.iushrn(de);de-- >0;)(le.isOdd()||fe.isOdd())&&(le.iadd(he),fe.isub(me)),le.iushrn(1),fe.iushrn(1);for(var Fe=0,we=1;(se.words[0]&we)===0&&Fe<26;++Fe,we<<=1);if(Fe>0)for(se.iushrn(Fe);Fe-- >0;)(be.isOdd()||ve.isOdd())&&(be.iadd(he),ve.isub(me)),be.iushrn(1),ve.iushrn(1);ae.cmp(se)>=0?(ae.isub(se),le.isub(be),fe.isub(ve)):(se.isub(ae),be.isub(le),ve.isub(fe))}return{a:be,b:ve,gcd:se.iushln(xe)}},J.prototype._invmp=function(ue){G(ue.negative===0),G(!ue.isZero());var ae=this,se=ue.clone();ae.negative!==0?ae=ae.umod(ue):ae=ae.clone();for(var le=new J(1),fe=new J(0),be=se.clone();ae.cmpn(1)>0&&se.cmpn(1)>0;){for(var ve=0,xe=1;(ae.words[0]&xe)===0&&ve<26;++ve,xe<<=1);if(ve>0)for(ae.iushrn(ve);ve-- >0;)le.isOdd()&&le.iadd(be),le.iushrn(1);for(var he=0,me=1;(se.words[0]&me)===0&&he<26;++he,me<<=1);if(he>0)for(se.iushrn(he);he-- >0;)fe.isOdd()&&fe.iadd(be),fe.iushrn(1);ae.cmp(se)>=0?(ae.isub(se),le.isub(fe)):(se.isub(ae),fe.isub(le))}var de;return ae.cmpn(1)===0?de=le:de=fe,de.cmpn(0)<0&&de.iadd(ue),de},J.prototype.gcd=function(ue){if(this.isZero())return ue.abs();if(ue.isZero())return this.abs();var ae=this.clone(),se=ue.clone();ae.negative=0,se.negative=0;for(var le=0;ae.isEven()&&se.isEven();le++)ae.iushrn(1),se.iushrn(1);do{for(;ae.isEven();)ae.iushrn(1);for(;se.isEven();)se.iushrn(1);var fe=ae.cmp(se);if(fe<0){var be=ae;ae=se,se=be}else if(fe===0||se.cmpn(1)===0)break;ae.isub(se)}while(!0);return se.iushln(le)},J.prototype.invm=function(ue){return this.egcd(ue).a.umod(ue)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(ue){return this.words[0]&ue},J.prototype.bincn=function(ue){G(typeof ue=="number");var ae=ue%26,se=(ue-ae)/26,le=1<<ae;if(this.length<=se)return this._expand(se+1),this.words[se]|=le,this;for(var fe=le,be=se;fe!==0&&be<this.length;be++){var ve=this.words[be]|0;ve+=fe,fe=ve>>>26,ve&=67108863,this.words[be]=ve}return fe!==0&&(this.words[be]=fe,this.length++),this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(ue){var ae=ue<0;if(this.negative!==0&&!ae)return-1;if(this.negative===0&&ae)return 1;this.strip();var se;if(this.length>1)se=1;else{ae&&(ue=-ue),G(ue<=67108863,"Number is too big");var le=this.words[0]|0;se=le===ue?0:le<ue?-1:1}return this.negative!==0?-se|0:se},J.prototype.cmp=function(ue){if(this.negative!==0&&ue.negative===0)return-1;if(this.negative===0&&ue.negative!==0)return 1;var ae=this.ucmp(ue);return this.negative!==0?-ae|0:ae},J.prototype.ucmp=function(ue){if(this.length>ue.length)return 1;if(this.length<ue.length)return-1;for(var ae=0,se=this.length-1;se>=0;se--){var le=this.words[se]|0,fe=ue.words[se]|0;if(le!==fe){le<fe?ae=-1:le>fe&&(ae=1);break}}return ae},J.prototype.gtn=function(ue){return this.cmpn(ue)===1},J.prototype.gt=function(ue){return this.cmp(ue)===1},J.prototype.gten=function(ue){return this.cmpn(ue)>=0},J.prototype.gte=function(ue){return this.cmp(ue)>=0},J.prototype.ltn=function(ue){return this.cmpn(ue)===-1},J.prototype.lt=function(ue){return this.cmp(ue)===-1},J.prototype.lten=function(ue){return this.cmpn(ue)<=0},J.prototype.lte=function(ue){return this.cmp(ue)<=0},J.prototype.eqn=function(ue){return this.cmpn(ue)===0},J.prototype.eq=function(ue){return this.cmp(ue)===0},J.red=function(ue){return new Pe(ue)},J.prototype.toRed=function(ue){return G(!this.red,"Already a number in reduction context"),G(this.negative===0,"red works only with positives"),ue.convertTo(this)._forceRed(ue)},J.prototype.fromRed=function(){return G(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(ue){return this.red=ue,this},J.prototype.forceRed=function(ue){return G(!this.red,"Already a number in reduction context"),this._forceRed(ue)},J.prototype.redAdd=function(ue){return G(this.red,"redAdd works only with red numbers"),this.red.add(this,ue)},J.prototype.redIAdd=function(ue){return G(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ue)},J.prototype.redSub=function(ue){return G(this.red,"redSub works only with red numbers"),this.red.sub(this,ue)},J.prototype.redISub=function(ue){return G(this.red,"redISub works only with red numbers"),this.red.isub(this,ue)},J.prototype.redShl=function(ue){return G(this.red,"redShl works only with red numbers"),this.red.shl(this,ue)},J.prototype.redMul=function(ue){return G(this.red,"redMul works only with red numbers"),this.red._verify2(this,ue),this.red.mul(this,ue)},J.prototype.redIMul=function(ue){return G(this.red,"redMul works only with red numbers"),this.red._verify2(this,ue),this.red.imul(this,ue)},J.prototype.redSqr=function(){return G(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return G(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return G(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return G(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return G(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(ue){return G(this.red&&!ue.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ue)};var Te={k256:null,p224:null,p192:null,p25519:null};function Ee(Me,ue){this.name=Me,this.p=new J(ue,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ee.prototype._tmp=function(){var ue=new J(null);return ue.words=new Array(Math.ceil(this.n/13)),ue},Ee.prototype.ireduce=function(ue){var ae=ue,se;do this.split(ae,this.tmp),ae=this.imulK(ae),ae=ae.iadd(this.tmp),se=ae.bitLength();while(se>this.n);var le=se<this.n?-1:ae.ucmp(this.p);return le===0?(ae.words[0]=0,ae.length=1):le>0?ae.isub(this.p):ae.strip!==void 0?ae.strip():ae._strip(),ae},Ee.prototype.split=function(ue,ae){ue.iushrn(this.n,0,ae)},Ee.prototype.imulK=function(ue){return ue.imul(this.k)};function Re(){Ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}Y(Re,Ee),Re.prototype.split=function(ue,ae){for(var se=4194303,le=Math.min(ue.length,9),fe=0;fe<le;fe++)ae.words[fe]=ue.words[fe];if(ae.length=le,ue.length<=9){ue.words[0]=0,ue.length=1;return}var be=ue.words[9];for(ae.words[ae.length++]=be&se,fe=10;fe<ue.length;fe++){var ve=ue.words[fe]|0;ue.words[fe-10]=(ve&se)<<4|be>>>22,be=ve}be>>>=22,ue.words[fe-10]=be,be===0&&ue.length>10?ue.length-=10:ue.length-=9},Re.prototype.imulK=function(ue){ue.words[ue.length]=0,ue.words[ue.length+1]=0,ue.length+=2;for(var ae=0,se=0;se<ue.length;se++){var le=ue.words[se]|0;ae+=le*977,ue.words[se]=ae&67108863,ae=le*64+(ae/67108864|0)}return ue.words[ue.length-1]===0&&(ue.length--,ue.words[ue.length-1]===0&&ue.length--),ue};function Ae(){Ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}Y(Ae,Ee);function Ie(){Ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}Y(Ie,Ee);function Oe(){Ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}Y(Oe,Ee),Oe.prototype.imulK=function(ue){for(var ae=0,se=0;se<ue.length;se++){var le=(ue.words[se]|0)*19+ae,fe=le&67108863;le>>>=26,ue.words[se]=fe,ae=le}return ae!==0&&(ue.words[ue.length++]=ae),ue},J._prime=function(ue){if(Te[ue])return Te[ue];var ae;if(ue==="k256")ae=new Re;else if(ue==="p224")ae=new Ae;else if(ue==="p192")ae=new Ie;else if(ue==="p25519")ae=new Oe;else throw new Error("Unknown prime "+ue);return Te[ue]=ae,ae};function Pe(Me){if(typeof Me=="string"){var ue=J._prime(Me);this.m=ue.p,this.prime=ue}else G(Me.gtn(1),"modulus must be greater than 1"),this.m=Me,this.prime=null}Pe.prototype._verify1=function(ue){G(ue.negative===0,"red works only with positives"),G(ue.red,"red works only with red numbers")},Pe.prototype._verify2=function(ue,ae){G((ue.negative|ae.negative)===0,"red works only with positives"),G(ue.red&&ue.red===ae.red,"red works only with red numbers")},Pe.prototype.imod=function(ue){return this.prime?this.prime.ireduce(ue)._forceRed(this):ue.umod(this.m)._forceRed(this)},Pe.prototype.neg=function(ue){return ue.isZero()?ue.clone():this.m.sub(ue)._forceRed(this)},Pe.prototype.add=function(ue,ae){this._verify2(ue,ae);var se=ue.add(ae);return se.cmp(this.m)>=0&&se.isub(this.m),se._forceRed(this)},Pe.prototype.iadd=function(ue,ae){this._verify2(ue,ae);var se=ue.iadd(ae);return se.cmp(this.m)>=0&&se.isub(this.m),se},Pe.prototype.sub=function(ue,ae){this._verify2(ue,ae);var se=ue.sub(ae);return se.cmpn(0)<0&&se.iadd(this.m),se._forceRed(this)},Pe.prototype.isub=function(ue,ae){this._verify2(ue,ae);var se=ue.isub(ae);return se.cmpn(0)<0&&se.iadd(this.m),se},Pe.prototype.shl=function(ue,ae){return this._verify1(ue),this.imod(ue.ushln(ae))},Pe.prototype.imul=function(ue,ae){return this._verify2(ue,ae),this.imod(ue.imul(ae))},Pe.prototype.mul=function(ue,ae){return this._verify2(ue,ae),this.imod(ue.mul(ae))},Pe.prototype.isqr=function(ue){return this.imul(ue,ue.clone())},Pe.prototype.sqr=function(ue){return this.mul(ue,ue)},Pe.prototype.sqrt=function(ue){if(ue.isZero())return ue.clone();var ae=this.m.andln(3);if(G(ae%2===1),ae===3){var se=this.m.add(new J(1)).iushrn(2);return this.pow(ue,se)}for(var le=this.m.subn(1),fe=0;!le.isZero()&&le.andln(1)===0;)fe++,le.iushrn(1);G(!le.isZero());var be=new J(1).toRed(this),ve=be.redNeg(),xe=this.m.subn(1).iushrn(1),he=this.m.bitLength();for(he=new J(2*he*he).toRed(this);this.pow(he,xe).cmp(ve)!==0;)he.redIAdd(ve);for(var me=this.pow(he,le),de=this.pow(ue,le.addn(1).iushrn(1)),Ce=this.pow(ue,le),Fe=fe;Ce.cmp(be)!==0;){for(var we=Ce,ke=0;we.cmp(be)!==0;ke++)we=we.redSqr();G(ke<Fe);var Ne=this.pow(me,new J(1).iushln(Fe-ke-1));de=de.redMul(Ne),me=Ne.redSqr(),Ce=Ce.redMul(me),Fe=ke}return de},Pe.prototype.invm=function(ue){var ae=ue._invmp(this.m);return ae.negative!==0?(ae.negative=0,this.imod(ae).redNeg()):this.imod(ae)},Pe.prototype.pow=function(ue,ae){if(ae.isZero())return new J(1).toRed(this);if(ae.cmpn(1)===0)return ue.clone();var se=4,le=new Array(1<<se);le[0]=new J(1).toRed(this),le[1]=ue;for(var fe=2;fe<le.length;fe++)le[fe]=this.mul(le[fe-1],ue);var be=le[0],ve=0,xe=0,he=ae.bitLength()%26;for(he===0&&(he=26),fe=ae.length-1;fe>=0;fe--){for(var me=ae.words[fe],de=he-1;de>=0;de--){var Ce=me>>de&1;if(be!==le[0]&&(be=this.sqr(be)),Ce===0&&ve===0){xe=0;continue}ve<<=1,ve|=Ce,xe++,!(xe!==se&&(fe!==0||de!==0))&&(be=this.mul(be,le[ve]),xe=0,ve=0)}he=26}return be},Pe.prototype.convertTo=function(ue){var ae=ue.umod(this.m);return ae===ue?ae.clone():ae},Pe.prototype.convertFrom=function(ue){var ae=ue.clone();return ae.red=null,ae},J.mont=function(ue){return new Le(ue)};function Le(Me){Pe.call(this,Me),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Y(Le,Pe),Le.prototype.convertTo=function(ue){return this.imod(ue.ushln(this.shift))},Le.prototype.convertFrom=function(ue){var ae=this.imod(ue.mul(this.rinv));return ae.red=null,ae},Le.prototype.imul=function(ue,ae){if(ue.isZero()||ae.isZero())return ue.words[0]=0,ue.length=1,ue;var se=ue.imul(ae),le=se.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),fe=se.isub(le).iushrn(this.shift),be=fe;return fe.cmp(this.m)>=0?be=fe.isub(this.m):fe.cmpn(0)<0&&(be=fe.iadd(this.m)),be._forceRed(this)},Le.prototype.mul=function(ue,ae){if(ue.isZero()||ae.isZero())return new J(0)._forceRed(this);var se=ue.mul(ae),le=se.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),fe=se.isub(le).iushrn(this.shift),be=fe;return fe.cmp(this.m)>=0?be=fe.isub(this.m):fe.cmpn(0)<0&&(be=fe.iadd(this.m)),be._forceRed(this)},Le.prototype.invm=function(ue){var ae=this.imod(ue._invmp(this.m).mul(this.r2));return ae._forceRed(this)}})(R,commonjsGlobal)})(bn$1);const BN$2=bn$1.exports;var sha3$1={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(R){(function(){var E="input is invalid type",U="finalize already called",G=typeof window=="object",Y=G?window:{};Y.JS_SHA3_NO_WINDOW&&(G=!1);var J=!G&&typeof self=="object",Q=!Y.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;Q?Y=commonjsGlobal:J&&(Y=self);var X=!Y.JS_SHA3_NO_COMMON_JS&&!0&&R.exports,Z=!Y.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",ee="0123456789abcdef".split(""),te=[31,7936,2031616,520093696],ne=[4,1024,262144,67108864],oe=[1,256,65536,16777216],ce=[6,1536,393216,100663296],pe=[0,8,16,24],ye=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Se=[224,256,384,512],ge=[128,256],_e=["hex","buffer","arrayBuffer","array","digest"],Te={128:168,256:136};(Y.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(we){return Object.prototype.toString.call(we)==="[object Array]"}),Z&&(Y.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(we){return typeof we=="object"&&we.buffer&&we.buffer.constructor===ArrayBuffer});for(var Ee=function(we,ke,Ne){return function(He){return new de(we,ke,we).update(He)[Ne]()}},Re=function(we,ke,Ne){return function(He,Ue){return new de(we,ke,Ue).update(He)[Ne]()}},Ae=function(we,ke,Ne){return function(He,Ue,Ge,De){return se["cshake"+we].update(He,Ue,Ge,De)[Ne]()}},Ie=function(we,ke,Ne){return function(He,Ue,Ge,De){return se["kmac"+we].update(He,Ue,Ge,De)[Ne]()}},Oe=function(we,ke,Ne,He){for(var Ue=0;Ue<_e.length;++Ue){var Ge=_e[Ue];we[Ge]=ke(Ne,He,Ge)}return we},Pe=function(we,ke){var Ne=Ee(we,ke,"hex");return Ne.create=function(){return new de(we,ke,we)},Ne.update=function(He){return Ne.create().update(He)},Oe(Ne,Ee,we,ke)},Le=function(we,ke){var Ne=Re(we,ke,"hex");return Ne.create=function(He){return new de(we,ke,He)},Ne.update=function(He,Ue){return Ne.create(Ue).update(He)},Oe(Ne,Re,we,ke)},Me=function(we,ke){var Ne=Te[we],He=Ae(we,ke,"hex");return He.create=function(Ue,Ge,De){return!Ge&&!De?se["shake"+we].create(Ue):new de(we,ke,Ue).bytepad([Ge,De],Ne)},He.update=function(Ue,Ge,De,$e){return He.create(Ge,De,$e).update(Ue)},Oe(He,Ae,we,ke)},ue=function(we,ke){var Ne=Te[we],He=Ie(we,ke,"hex");return He.create=function(Ue,Ge,De){return new Ce(we,ke,Ge).bytepad(["KMAC",De],Ne).bytepad([Ue],Ne)},He.update=function(Ue,Ge,De,$e){return He.create(Ue,De,$e).update(Ge)},Oe(He,Ie,we,ke)},ae=[{name:"keccak",padding:oe,bits:Se,createMethod:Pe},{name:"sha3",padding:ce,bits:Se,createMethod:Pe},{name:"shake",padding:te,bits:ge,createMethod:Le},{name:"cshake",padding:ne,bits:ge,createMethod:Me},{name:"kmac",padding:ne,bits:ge,createMethod:ue}],se={},le=[],fe=0;fe<ae.length;++fe)for(var be=ae[fe],ve=be.bits,xe=0;xe<ve.length;++xe){var he=be.name+"_"+ve[xe];if(le.push(he),se[he]=be.createMethod(ve[xe],be.padding),be.name!=="sha3"){var me=be.name+ve[xe];le.push(me),se[me]=se[he]}}function de(we,ke,Ne){this.blocks=[],this.s=[],this.padding=ke,this.outputBits=Ne,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(we<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Ne>>5,this.extraBytes=(Ne&31)>>3;for(var He=0;He<50;++He)this.s[He]=0}de.prototype.update=function(we){if(this.finalized)throw new Error(U);var ke,Ne=typeof we;if(Ne!=="string"){if(Ne==="object"){if(we===null)throw new Error(E);if(Z&&we.constructor===ArrayBuffer)we=new Uint8Array(we);else if(!Array.isArray(we)&&(!Z||!ArrayBuffer.isView(we)))throw new Error(E)}else throw new Error(E);ke=!0}for(var He=this.blocks,Ue=this.byteCount,Ge=we.length,De=this.blockCount,$e=0,Be=this.s,je,ze;$e<Ge;){if(this.reset)for(this.reset=!1,He[0]=this.block,je=1;je<De+1;++je)He[je]=0;if(ke)for(je=this.start;$e<Ge&&je<Ue;++$e)He[je>>2]|=we[$e]<<pe[je++&3];else for(je=this.start;$e<Ge&&je<Ue;++$e)ze=we.charCodeAt($e),ze<128?He[je>>2]|=ze<<pe[je++&3]:ze<2048?(He[je>>2]|=(192|ze>>6)<<pe[je++&3],He[je>>2]|=(128|ze&63)<<pe[je++&3]):ze<55296||ze>=57344?(He[je>>2]|=(224|ze>>12)<<pe[je++&3],He[je>>2]|=(128|ze>>6&63)<<pe[je++&3],He[je>>2]|=(128|ze&63)<<pe[je++&3]):(ze=65536+((ze&1023)<<10|we.charCodeAt(++$e)&1023),He[je>>2]|=(240|ze>>18)<<pe[je++&3],He[je>>2]|=(128|ze>>12&63)<<pe[je++&3],He[je>>2]|=(128|ze>>6&63)<<pe[je++&3],He[je>>2]|=(128|ze&63)<<pe[je++&3]);if(this.lastByteIndex=je,je>=Ue){for(this.start=je-Ue,this.block=He[De],je=0;je<De;++je)Be[je]^=He[je];Fe(Be),this.reset=!0}else this.start=je}return this},de.prototype.encode=function(we,ke){var Ne=we&255,He=1,Ue=[Ne];for(we=we>>8,Ne=we&255;Ne>0;)Ue.unshift(Ne),we=we>>8,Ne=we&255,++He;return ke?Ue.push(He):Ue.unshift(He),this.update(Ue),Ue.length},de.prototype.encodeString=function(we){var ke,Ne=typeof we;if(Ne!=="string"){if(Ne==="object"){if(we===null)throw new Error(E);if(Z&&we.constructor===ArrayBuffer)we=new Uint8Array(we);else if(!Array.isArray(we)&&(!Z||!ArrayBuffer.isView(we)))throw new Error(E)}else throw new Error(E);ke=!0}var He=0,Ue=we.length;if(ke)He=Ue;else for(var Ge=0;Ge<we.length;++Ge){var De=we.charCodeAt(Ge);De<128?He+=1:De<2048?He+=2:De<55296||De>=57344?He+=3:(De=65536+((De&1023)<<10|we.charCodeAt(++Ge)&1023),He+=4)}return He+=this.encode(He*8),this.update(we),He},de.prototype.bytepad=function(we,ke){for(var Ne=this.encode(ke),He=0;He<we.length;++He)Ne+=this.encodeString(we[He]);var Ue=ke-Ne%ke,Ge=[];return Ge.length=Ue,this.update(Ge),this},de.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var we=this.blocks,ke=this.lastByteIndex,Ne=this.blockCount,He=this.s;if(we[ke>>2]|=this.padding[ke&3],this.lastByteIndex===this.byteCount)for(we[0]=we[Ne],ke=1;ke<Ne+1;++ke)we[ke]=0;for(we[Ne-1]|=2147483648,ke=0;ke<Ne;++ke)He[ke]^=we[ke];Fe(He)}},de.prototype.toString=de.prototype.hex=function(){this.finalize();for(var we=this.blockCount,ke=this.s,Ne=this.outputBlocks,He=this.extraBytes,Ue=0,Ge=0,De="",$e;Ge<Ne;){for(Ue=0;Ue<we&&Ge<Ne;++Ue,++Ge)$e=ke[Ue],De+=ee[$e>>4&15]+ee[$e&15]+ee[$e>>12&15]+ee[$e>>8&15]+ee[$e>>20&15]+ee[$e>>16&15]+ee[$e>>28&15]+ee[$e>>24&15];Ge%we===0&&(Fe(ke),Ue=0)}return He&&($e=ke[Ue],De+=ee[$e>>4&15]+ee[$e&15],He>1&&(De+=ee[$e>>12&15]+ee[$e>>8&15]),He>2&&(De+=ee[$e>>20&15]+ee[$e>>16&15])),De},de.prototype.arrayBuffer=function(){this.finalize();var we=this.blockCount,ke=this.s,Ne=this.outputBlocks,He=this.extraBytes,Ue=0,Ge=0,De=this.outputBits>>3,$e;He?$e=new ArrayBuffer(Ne+1<<2):$e=new ArrayBuffer(De);for(var Be=new Uint32Array($e);Ge<Ne;){for(Ue=0;Ue<we&&Ge<Ne;++Ue,++Ge)Be[Ge]=ke[Ue];Ge%we===0&&Fe(ke)}return He&&(Be[Ue]=ke[Ue],$e=$e.slice(0,De)),$e},de.prototype.buffer=de.prototype.arrayBuffer,de.prototype.digest=de.prototype.array=function(){this.finalize();for(var we=this.blockCount,ke=this.s,Ne=this.outputBlocks,He=this.extraBytes,Ue=0,Ge=0,De=[],$e,Be;Ge<Ne;){for(Ue=0;Ue<we&&Ge<Ne;++Ue,++Ge)$e=Ge<<2,Be=ke[Ue],De[$e]=Be&255,De[$e+1]=Be>>8&255,De[$e+2]=Be>>16&255,De[$e+3]=Be>>24&255;Ge%we===0&&Fe(ke)}return He&&($e=Ge<<2,Be=ke[Ue],De[$e]=Be&255,He>1&&(De[$e+1]=Be>>8&255),He>2&&(De[$e+2]=Be>>16&255)),De};function Ce(we,ke,Ne){de.call(this,we,ke,Ne)}Ce.prototype=new de,Ce.prototype.finalize=function(){return this.encode(this.outputBits,!0),de.prototype.finalize.call(this)};var Fe=function(we){var ke,Ne,He,Ue,Ge,De,$e,Be,je,ze,We,Ke,Ye,Je,Qe,qe,rt,tt,Xe,it,st,nt,ot,pt,dt,Et,Ct,ht,Ve,et,Ze,ut,at,ct,wt,Tt,yt,$t,kt,mt,Mt,Ot,bt,Rt,Dt,vt,Nt,Pt,xt,Bt,Lt,_t,Ft,jt,St,Ht,At,It,Ut,zt,Wt,Vt,qt;for(He=0;He<48;He+=2)Ue=we[0]^we[10]^we[20]^we[30]^we[40],Ge=we[1]^we[11]^we[21]^we[31]^we[41],De=we[2]^we[12]^we[22]^we[32]^we[42],$e=we[3]^we[13]^we[23]^we[33]^we[43],Be=we[4]^we[14]^we[24]^we[34]^we[44],je=we[5]^we[15]^we[25]^we[35]^we[45],ze=we[6]^we[16]^we[26]^we[36]^we[46],We=we[7]^we[17]^we[27]^we[37]^we[47],Ke=we[8]^we[18]^we[28]^we[38]^we[48],Ye=we[9]^we[19]^we[29]^we[39]^we[49],ke=Ke^(De<<1|$e>>>31),Ne=Ye^($e<<1|De>>>31),we[0]^=ke,we[1]^=Ne,we[10]^=ke,we[11]^=Ne,we[20]^=ke,we[21]^=Ne,we[30]^=ke,we[31]^=Ne,we[40]^=ke,we[41]^=Ne,ke=Ue^(Be<<1|je>>>31),Ne=Ge^(je<<1|Be>>>31),we[2]^=ke,we[3]^=Ne,we[12]^=ke,we[13]^=Ne,we[22]^=ke,we[23]^=Ne,we[32]^=ke,we[33]^=Ne,we[42]^=ke,we[43]^=Ne,ke=De^(ze<<1|We>>>31),Ne=$e^(We<<1|ze>>>31),we[4]^=ke,we[5]^=Ne,we[14]^=ke,we[15]^=Ne,we[24]^=ke,we[25]^=Ne,we[34]^=ke,we[35]^=Ne,we[44]^=ke,we[45]^=Ne,ke=Be^(Ke<<1|Ye>>>31),Ne=je^(Ye<<1|Ke>>>31),we[6]^=ke,we[7]^=Ne,we[16]^=ke,we[17]^=Ne,we[26]^=ke,we[27]^=Ne,we[36]^=ke,we[37]^=Ne,we[46]^=ke,we[47]^=Ne,ke=ze^(Ue<<1|Ge>>>31),Ne=We^(Ge<<1|Ue>>>31),we[8]^=ke,we[9]^=Ne,we[18]^=ke,we[19]^=Ne,we[28]^=ke,we[29]^=Ne,we[38]^=ke,we[39]^=Ne,we[48]^=ke,we[49]^=Ne,Je=we[0],Qe=we[1],vt=we[11]<<4|we[10]>>>28,Nt=we[10]<<4|we[11]>>>28,ht=we[20]<<3|we[21]>>>29,Ve=we[21]<<3|we[20]>>>29,zt=we[31]<<9|we[30]>>>23,Wt=we[30]<<9|we[31]>>>23,Ot=we[40]<<18|we[41]>>>14,bt=we[41]<<18|we[40]>>>14,ct=we[2]<<1|we[3]>>>31,wt=we[3]<<1|we[2]>>>31,qe=we[13]<<12|we[12]>>>20,rt=we[12]<<12|we[13]>>>20,Pt=we[22]<<10|we[23]>>>22,xt=we[23]<<10|we[22]>>>22,et=we[33]<<13|we[32]>>>19,Ze=we[32]<<13|we[33]>>>19,Vt=we[42]<<2|we[43]>>>30,qt=we[43]<<2|we[42]>>>30,jt=we[5]<<30|we[4]>>>2,St=we[4]<<30|we[5]>>>2,Tt=we[14]<<6|we[15]>>>26,yt=we[15]<<6|we[14]>>>26,tt=we[25]<<11|we[24]>>>21,Xe=we[24]<<11|we[25]>>>21,Bt=we[34]<<15|we[35]>>>17,Lt=we[35]<<15|we[34]>>>17,ut=we[45]<<29|we[44]>>>3,at=we[44]<<29|we[45]>>>3,pt=we[6]<<28|we[7]>>>4,dt=we[7]<<28|we[6]>>>4,Ht=we[17]<<23|we[16]>>>9,At=we[16]<<23|we[17]>>>9,$t=we[26]<<25|we[27]>>>7,kt=we[27]<<25|we[26]>>>7,it=we[36]<<21|we[37]>>>11,st=we[37]<<21|we[36]>>>11,_t=we[47]<<24|we[46]>>>8,Ft=we[46]<<24|we[47]>>>8,Rt=we[8]<<27|we[9]>>>5,Dt=we[9]<<27|we[8]>>>5,Et=we[18]<<20|we[19]>>>12,Ct=we[19]<<20|we[18]>>>12,It=we[29]<<7|we[28]>>>25,Ut=we[28]<<7|we[29]>>>25,mt=we[38]<<8|we[39]>>>24,Mt=we[39]<<8|we[38]>>>24,nt=we[48]<<14|we[49]>>>18,ot=we[49]<<14|we[48]>>>18,we[0]=Je^~qe&tt,we[1]=Qe^~rt&Xe,we[10]=pt^~Et&ht,we[11]=dt^~Ct&Ve,we[20]=ct^~Tt&$t,we[21]=wt^~yt&kt,we[30]=Rt^~vt&Pt,we[31]=Dt^~Nt&xt,we[40]=jt^~Ht&It,we[41]=St^~At&Ut,we[2]=qe^~tt&it,we[3]=rt^~Xe&st,we[12]=Et^~ht&et,we[13]=Ct^~Ve&Ze,we[22]=Tt^~$t&mt,we[23]=yt^~kt&Mt,we[32]=vt^~Pt&Bt,we[33]=Nt^~xt&Lt,we[42]=Ht^~It&zt,we[43]=At^~Ut&Wt,we[4]=tt^~it&nt,we[5]=Xe^~st&ot,we[14]=ht^~et&ut,we[15]=Ve^~Ze&at,we[24]=$t^~mt&Ot,we[25]=kt^~Mt&bt,we[34]=Pt^~Bt&_t,we[35]=xt^~Lt&Ft,we[44]=It^~zt&Vt,we[45]=Ut^~Wt&qt,we[6]=it^~nt&Je,we[7]=st^~ot&Qe,we[16]=et^~ut&pt,we[17]=Ze^~at&dt,we[26]=mt^~Ot&ct,we[27]=Mt^~bt&wt,we[36]=Bt^~_t&Rt,we[37]=Lt^~Ft&Dt,we[46]=zt^~Vt&jt,we[47]=Wt^~qt&St,we[8]=nt^~Je&qe,we[9]=ot^~Qe&rt,we[18]=ut^~pt&Et,we[19]=at^~dt&Ct,we[28]=Ot^~ct&Tt,we[29]=bt^~wt&yt,we[38]=_t^~Rt&vt,we[39]=Ft^~Dt&Nt,we[48]=Vt^~jt&Ht,we[49]=qt^~St&At,we[0]^=ye[He],we[1]^=ye[He+1]};if(X)R.exports=se;else for(fe=0;fe<le.length;++fe)Y[le[fe]]=se[le[fe]]})()})(sha3$1);const sha3=sha3$1.exports;var hash$4={},utils$f={},minimalisticAssert=assert$8;function assert$8(R,E){if(!R)throw new Error(E||"Assertion failed")}assert$8.equal=function(E,U,G){if(E!=U)throw new Error(G||"Assertion failed: "+E+" != "+U)};var assert$7=minimalisticAssert,inherits$6=inherits_browser.exports;utils$f.inherits=inherits$6;function isSurrogatePair(R,E){return(R.charCodeAt(E)&64512)!==55296||E<0||E+1>=R.length?!1:(R.charCodeAt(E+1)&64512)===56320}function toArray$1(R,E){if(Array.isArray(R))return R.slice();if(!R)return[];var U=[];if(typeof R=="string")if(E){if(E==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),Y=0;Y<R.length;Y+=2)U.push(parseInt(R[Y]+R[Y+1],16))}else for(var G=0,Y=0;Y<R.length;Y++){var J=R.charCodeAt(Y);J<128?U[G++]=J:J<2048?(U[G++]=J>>6|192,U[G++]=J&63|128):isSurrogatePair(R,Y)?(J=65536+((J&1023)<<10)+(R.charCodeAt(++Y)&1023),U[G++]=J>>18|240,U[G++]=J>>12&63|128,U[G++]=J>>6&63|128,U[G++]=J&63|128):(U[G++]=J>>12|224,U[G++]=J>>6&63|128,U[G++]=J&63|128)}else for(Y=0;Y<R.length;Y++)U[Y]=R[Y]|0;return U}utils$f.toArray=toArray$1;function toHex(R){for(var E="",U=0;U<R.length;U++)E+=zero2(R[U].toString(16));return E}utils$f.toHex=toHex;function htonl(R){var E=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return E>>>0}utils$f.htonl=htonl;function toHex32(R,E){for(var U="",G=0;G<R.length;G++){var Y=R[G];E==="little"&&(Y=htonl(Y)),U+=zero8(Y.toString(16))}return U}utils$f.toHex32=toHex32;function zero2(R){return R.length===1?"0"+R:R}utils$f.zero2=zero2;function zero8(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}utils$f.zero8=zero8;function join32(R,E,U,G){var Y=U-E;assert$7(Y%4===0);for(var J=new Array(Y/4),Q=0,X=E;Q<J.length;Q++,X+=4){var Z;G==="big"?Z=R[X]<<24|R[X+1]<<16|R[X+2]<<8|R[X+3]:Z=R[X+3]<<24|R[X+2]<<16|R[X+1]<<8|R[X],J[Q]=Z>>>0}return J}utils$f.join32=join32;function split32(R,E){for(var U=new Array(R.length*4),G=0,Y=0;G<R.length;G++,Y+=4){var J=R[G];E==="big"?(U[Y]=J>>>24,U[Y+1]=J>>>16&255,U[Y+2]=J>>>8&255,U[Y+3]=J&255):(U[Y+3]=J>>>24,U[Y+2]=J>>>16&255,U[Y+1]=J>>>8&255,U[Y]=J&255)}return U}utils$f.split32=split32;function rotr32$1(R,E){return R>>>E|R<<32-E}utils$f.rotr32=rotr32$1;function rotl32$2(R,E){return R<<E|R>>>32-E}utils$f.rotl32=rotl32$2;function sum32$3(R,E){return R+E>>>0}utils$f.sum32=sum32$3;function sum32_3$1(R,E,U){return R+E+U>>>0}utils$f.sum32_3=sum32_3$1;function sum32_4$2(R,E,U,G){return R+E+U+G>>>0}utils$f.sum32_4=sum32_4$2;function sum32_5$2(R,E,U,G,Y){return R+E+U+G+Y>>>0}utils$f.sum32_5=sum32_5$2;function sum64$1(R,E,U,G){var Y=R[E],J=R[E+1],Q=G+J>>>0,X=(Q<G?1:0)+U+Y;R[E]=X>>>0,R[E+1]=Q}utils$f.sum64=sum64$1;function sum64_hi$1(R,E,U,G){var Y=E+G>>>0,J=(Y<E?1:0)+R+U;return J>>>0}utils$f.sum64_hi=sum64_hi$1;function sum64_lo$1(R,E,U,G){var Y=E+G;return Y>>>0}utils$f.sum64_lo=sum64_lo$1;function sum64_4_hi$1(R,E,U,G,Y,J,Q,X){var Z=0,ee=E;ee=ee+G>>>0,Z+=ee<E?1:0,ee=ee+J>>>0,Z+=ee<J?1:0,ee=ee+X>>>0,Z+=ee<X?1:0;var te=R+U+Y+Q+Z;return te>>>0}utils$f.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(R,E,U,G,Y,J,Q,X){var Z=E+G+J+X;return Z>>>0}utils$f.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(R,E,U,G,Y,J,Q,X,Z,ee){var te=0,ne=E;ne=ne+G>>>0,te+=ne<E?1:0,ne=ne+J>>>0,te+=ne<J?1:0,ne=ne+X>>>0,te+=ne<X?1:0,ne=ne+ee>>>0,te+=ne<ee?1:0;var oe=R+U+Y+Q+Z+te;return oe>>>0}utils$f.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(R,E,U,G,Y,J,Q,X,Z,ee){var te=E+G+J+X+ee;return te>>>0}utils$f.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(R,E,U){var G=E<<32-U|R>>>U;return G>>>0}utils$f.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(R,E,U){var G=R<<32-U|E>>>U;return G>>>0}utils$f.rotr64_lo=rotr64_lo$1;function shr64_hi$1(R,E,U){return R>>>U}utils$f.shr64_hi=shr64_hi$1;function shr64_lo$1(R,E,U){var G=R<<32-U|E>>>U;return G>>>0}utils$f.shr64_lo=shr64_lo$1;var common$6={},utils$e=utils$f,assert$6=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(E,U){if(E=utils$e.toArray(E,U),this.pending?this.pending=this.pending.concat(E):this.pending=E,this.pendingTotal+=E.length,this.pending.length>=this._delta8){E=this.pending;var G=E.length%this._delta8;this.pending=E.slice(E.length-G,E.length),this.pending.length===0&&(this.pending=null),E=utils$e.join32(E,0,E.length-G,this.endian);for(var Y=0;Y<E.length;Y+=this._delta32)this._update(E,Y,Y+this._delta32)}return this};BlockHash$4.prototype.digest=function(E){return this.update(this._pad()),assert$6(this.pending===null),this._digest(E)};BlockHash$4.prototype._pad=function(){var E=this.pendingTotal,U=this._delta8,G=U-(E+this.padLength)%U,Y=new Array(G+this.padLength);Y[0]=128;for(var J=1;J<G;J++)Y[J]=0;if(E<<=3,this.endian==="big"){for(var Q=8;Q<this.padLength;Q++)Y[J++]=0;Y[J++]=0,Y[J++]=0,Y[J++]=0,Y[J++]=0,Y[J++]=E>>>24&255,Y[J++]=E>>>16&255,Y[J++]=E>>>8&255,Y[J++]=E&255}else for(Y[J++]=E&255,Y[J++]=E>>>8&255,Y[J++]=E>>>16&255,Y[J++]=E>>>24&255,Y[J++]=0,Y[J++]=0,Y[J++]=0,Y[J++]=0,Q=8;Q<this.padLength;Q++)Y[J++]=0;return Y};var sha$2={},common$5={},utils$d=utils$f,rotr32=utils$d.rotr32;function ft_1$1(R,E,U,G){if(R===0)return ch32$1(E,U,G);if(R===1||R===3)return p32(E,U,G);if(R===2)return maj32$1(E,U,G)}common$5.ft_1=ft_1$1;function ch32$1(R,E,U){return R&E^~R&U}common$5.ch32=ch32$1;function maj32$1(R,E,U){return R&E^R&U^E&U}common$5.maj32=maj32$1;function p32(R,E,U){return R^E^U}common$5.p32=p32;function s0_256$1(R){return rotr32(R,2)^rotr32(R,13)^rotr32(R,22)}common$5.s0_256=s0_256$1;function s1_256$1(R){return rotr32(R,6)^rotr32(R,11)^rotr32(R,25)}common$5.s1_256=s1_256$1;function g0_256$1(R){return rotr32(R,7)^rotr32(R,18)^R>>>3}common$5.g0_256=g0_256$1;function g1_256$1(R){return rotr32(R,17)^rotr32(R,19)^R>>>10}common$5.g1_256=g1_256$1;var utils$c=utils$f,common$4=common$6,shaCommon$1=common$5,rotl32$1=utils$c.rotl32,sum32$2=utils$c.sum32,sum32_5$1=utils$c.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$4.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$c.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(E,U){for(var G=this.W,Y=0;Y<16;Y++)G[Y]=E[U+Y];for(;Y<G.length;Y++)G[Y]=rotl32$1(G[Y-3]^G[Y-8]^G[Y-14]^G[Y-16],1);var J=this.h[0],Q=this.h[1],X=this.h[2],Z=this.h[3],ee=this.h[4];for(Y=0;Y<G.length;Y++){var te=~~(Y/20),ne=sum32_5$1(rotl32$1(J,5),ft_1(te,Q,X,Z),ee,G[Y],sha1_K[te]);ee=Z,Z=X,X=rotl32$1(Q,30),Q=J,J=ne}this.h[0]=sum32$2(this.h[0],J),this.h[1]=sum32$2(this.h[1],Q),this.h[2]=sum32$2(this.h[2],X),this.h[3]=sum32$2(this.h[3],Z),this.h[4]=sum32$2(this.h[4],ee)};SHA1.prototype._digest=function(E){return E==="hex"?utils$c.toHex32(this.h,"big"):utils$c.split32(this.h,"big")};var utils$b=utils$f,common$3=common$6,shaCommon=common$5,assert$5=minimalisticAssert,sum32$1=utils$b.sum32,sum32_4$1=utils$b.sum32_4,sum32_5=utils$b.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$3.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$b.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(E,U){for(var G=this.W,Y=0;Y<16;Y++)G[Y]=E[U+Y];for(;Y<G.length;Y++)G[Y]=sum32_4$1(g1_256(G[Y-2]),G[Y-7],g0_256(G[Y-15]),G[Y-16]);var J=this.h[0],Q=this.h[1],X=this.h[2],Z=this.h[3],ee=this.h[4],te=this.h[5],ne=this.h[6],oe=this.h[7];for(assert$5(this.k.length===G.length),Y=0;Y<G.length;Y++){var ce=sum32_5(oe,s1_256(ee),ch32(ee,te,ne),this.k[Y],G[Y]),pe=sum32$1(s0_256(J),maj32(J,Q,X));oe=ne,ne=te,te=ee,ee=sum32$1(Z,ce),Z=X,X=Q,Q=J,J=sum32$1(ce,pe)}this.h[0]=sum32$1(this.h[0],J),this.h[1]=sum32$1(this.h[1],Q),this.h[2]=sum32$1(this.h[2],X),this.h[3]=sum32$1(this.h[3],Z),this.h[4]=sum32$1(this.h[4],ee),this.h[5]=sum32$1(this.h[5],te),this.h[6]=sum32$1(this.h[6],ne),this.h[7]=sum32$1(this.h[7],oe)};SHA256$1.prototype._digest=function(E){return E==="hex"?utils$b.toHex32(this.h,"big"):utils$b.split32(this.h,"big")};var utils$a=utils$f,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$a.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(E){return E==="hex"?utils$a.toHex32(this.h.slice(0,7),"big"):utils$a.split32(this.h.slice(0,7),"big")};var utils$9=utils$f,common$2=common$6,assert$4=minimalisticAssert,rotr64_hi=utils$9.rotr64_hi,rotr64_lo=utils$9.rotr64_lo,shr64_hi=utils$9.shr64_hi,shr64_lo=utils$9.shr64_lo,sum64=utils$9.sum64,sum64_hi=utils$9.sum64_hi,sum64_lo=utils$9.sum64_lo,sum64_4_hi=utils$9.sum64_4_hi,sum64_4_lo=utils$9.sum64_4_lo,sum64_5_hi=utils$9.sum64_5_hi,sum64_5_lo=utils$9.sum64_5_lo,BlockHash$1=common$2.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$9.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024;SHA512$2.outSize=512;SHA512$2.hmacStrength=192;SHA512$2.padLength=128;SHA512$2.prototype._prepareBlock=function(E,U){for(var G=this.W,Y=0;Y<32;Y++)G[Y]=E[U+Y];for(;Y<G.length;Y+=2){var J=g1_512_hi(G[Y-4],G[Y-3]),Q=g1_512_lo(G[Y-4],G[Y-3]),X=G[Y-14],Z=G[Y-13],ee=g0_512_hi(G[Y-30],G[Y-29]),te=g0_512_lo(G[Y-30],G[Y-29]),ne=G[Y-32],oe=G[Y-31];G[Y]=sum64_4_hi(J,Q,X,Z,ee,te,ne,oe),G[Y+1]=sum64_4_lo(J,Q,X,Z,ee,te,ne,oe)}};SHA512$2.prototype._update=function(E,U){this._prepareBlock(E,U);var G=this.W,Y=this.h[0],J=this.h[1],Q=this.h[2],X=this.h[3],Z=this.h[4],ee=this.h[5],te=this.h[6],ne=this.h[7],oe=this.h[8],ce=this.h[9],pe=this.h[10],ye=this.h[11],Se=this.h[12],ge=this.h[13],_e=this.h[14],Te=this.h[15];assert$4(this.k.length===G.length);for(var Ee=0;Ee<G.length;Ee+=2){var Re=_e,Ae=Te,Ie=s1_512_hi(oe,ce),Oe=s1_512_lo(oe,ce),Pe=ch64_hi(oe,ce,pe,ye,Se),Le=ch64_lo(oe,ce,pe,ye,Se,ge),Me=this.k[Ee],ue=this.k[Ee+1],ae=G[Ee],se=G[Ee+1],le=sum64_5_hi(Re,Ae,Ie,Oe,Pe,Le,Me,ue,ae,se),fe=sum64_5_lo(Re,Ae,Ie,Oe,Pe,Le,Me,ue,ae,se);Re=s0_512_hi(Y,J),Ae=s0_512_lo(Y,J),Ie=maj64_hi(Y,J,Q,X,Z),Oe=maj64_lo(Y,J,Q,X,Z,ee);var be=sum64_hi(Re,Ae,Ie,Oe),ve=sum64_lo(Re,Ae,Ie,Oe);_e=Se,Te=ge,Se=pe,ge=ye,pe=oe,ye=ce,oe=sum64_hi(te,ne,le,fe),ce=sum64_lo(ne,ne,le,fe),te=Z,ne=ee,Z=Q,ee=X,Q=Y,X=J,Y=sum64_hi(le,fe,be,ve),J=sum64_lo(le,fe,be,ve)}sum64(this.h,0,Y,J),sum64(this.h,2,Q,X),sum64(this.h,4,Z,ee),sum64(this.h,6,te,ne),sum64(this.h,8,oe,ce),sum64(this.h,10,pe,ye),sum64(this.h,12,Se,ge),sum64(this.h,14,_e,Te)};SHA512$2.prototype._digest=function(E){return E==="hex"?utils$9.toHex32(this.h,"big"):utils$9.split32(this.h,"big")};function ch64_hi(R,E,U,G,Y){var J=R&U^~R&Y;return J<0&&(J+=4294967296),J}function ch64_lo(R,E,U,G,Y,J){var Q=E&G^~E&J;return Q<0&&(Q+=4294967296),Q}function maj64_hi(R,E,U,G,Y){var J=R&U^R&Y^U&Y;return J<0&&(J+=4294967296),J}function maj64_lo(R,E,U,G,Y,J){var Q=E&G^E&J^G&J;return Q<0&&(Q+=4294967296),Q}function s0_512_hi(R,E){var U=rotr64_hi(R,E,28),G=rotr64_hi(E,R,2),Y=rotr64_hi(E,R,7),J=U^G^Y;return J<0&&(J+=4294967296),J}function s0_512_lo(R,E){var U=rotr64_lo(R,E,28),G=rotr64_lo(E,R,2),Y=rotr64_lo(E,R,7),J=U^G^Y;return J<0&&(J+=4294967296),J}function s1_512_hi(R,E){var U=rotr64_hi(R,E,14),G=rotr64_hi(R,E,18),Y=rotr64_hi(E,R,9),J=U^G^Y;return J<0&&(J+=4294967296),J}function s1_512_lo(R,E){var U=rotr64_lo(R,E,14),G=rotr64_lo(R,E,18),Y=rotr64_lo(E,R,9),J=U^G^Y;return J<0&&(J+=4294967296),J}function g0_512_hi(R,E){var U=rotr64_hi(R,E,1),G=rotr64_hi(R,E,8),Y=shr64_hi(R,E,7),J=U^G^Y;return J<0&&(J+=4294967296),J}function g0_512_lo(R,E){var U=rotr64_lo(R,E,1),G=rotr64_lo(R,E,8),Y=shr64_lo(R,E,7),J=U^G^Y;return J<0&&(J+=4294967296),J}function g1_512_hi(R,E){var U=rotr64_hi(R,E,19),G=rotr64_hi(E,R,29),Y=shr64_hi(R,E,6),J=U^G^Y;return J<0&&(J+=4294967296),J}function g1_512_lo(R,E){var U=rotr64_lo(R,E,19),G=rotr64_lo(E,R,29),Y=shr64_lo(R,E,6),J=U^G^Y;return J<0&&(J+=4294967296),J}var utils$8=utils$f,SHA512$1=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$8.inherits(SHA384,SHA512$1);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(E){return E==="hex"?utils$8.toHex32(this.h.slice(0,12),"big"):utils$8.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={},utils$7=utils$f,common$1=common$6,rotl32=utils$7.rotl32,sum32=utils$7.sum32,sum32_3=utils$7.sum32_3,sum32_4=utils$7.sum32_4,BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$7.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(E,U){for(var G=this.h[0],Y=this.h[1],J=this.h[2],Q=this.h[3],X=this.h[4],Z=G,ee=Y,te=J,ne=Q,oe=X,ce=0;ce<80;ce++){var pe=sum32(rotl32(sum32_4(G,f$2(ce,Y,J,Q),E[r$3[ce]+U],K$4(ce)),s$2[ce]),X);G=X,X=Q,Q=rotl32(J,10),J=Y,Y=pe,pe=sum32(rotl32(sum32_4(Z,f$2(79-ce,ee,te,ne),E[rh[ce]+U],Kh(ce)),sh[ce]),oe),Z=oe,oe=ne,ne=rotl32(te,10),te=ee,ee=pe}pe=sum32_3(this.h[1],J,ne),this.h[1]=sum32_3(this.h[2],Q,oe),this.h[2]=sum32_3(this.h[3],X,Z),this.h[3]=sum32_3(this.h[4],G,ee),this.h[4]=sum32_3(this.h[0],Y,te),this.h[0]=pe};RIPEMD160.prototype._digest=function(E){return E==="hex"?utils$7.toHex32(this.h,"little"):utils$7.split32(this.h,"little")};function f$2(R,E,U,G){return R<=15?E^U^G:R<=31?E&U|~E&G:R<=47?(E|~U)^G:R<=63?E&G|U&~G:E^(U|~G)}function K$4(R){return R<=15?0:R<=31?1518500249:R<=47?1859775393:R<=63?2400959708:2840853838}function Kh(R){return R<=15?1352829926:R<=31?1548603684:R<=47?1836072691:R<=63?2053994217:0}var r$3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$6=utils$f,assert$3=minimalisticAssert;function Hmac(R,E,U){if(!(this instanceof Hmac))return new Hmac(R,E,U);this.Hash=R,this.blockSize=R.blockSize/8,this.outSize=R.outSize/8,this.inner=null,this.outer=null,this._init(utils$6.toArray(E,U))}var hmac=Hmac;Hmac.prototype._init=function(E){E.length>this.blockSize&&(E=new this.Hash().update(E).digest()),assert$3(E.length<=this.blockSize);for(var U=E.length;U<this.blockSize;U++)E.push(0);for(U=0;U<E.length;U++)E[U]^=54;for(this.inner=new this.Hash().update(E),U=0;U<E.length;U++)E[U]^=106;this.outer=new this.Hash().update(E)};Hmac.prototype.update=function(E,U){return this.inner.update(E,U),this};Hmac.prototype.digest=function(E){return this.outer.update(this.inner.digest()),this.outer.digest(E)};(function(R){var E=R;E.utils=utils$f,E.common=common$6,E.sha=sha$2,E.ripemd=ripemd,E.hmac=hmac,E.sha1=E.sha.sha1,E.sha256=E.sha.sha256,E.sha224=E.sha.sha224,E.sha384=E.sha.sha384,E.sha512=E.sha.sha512,E.ripemd160=E.ripemd.ripemd160})(hash$4);const hash$3=hash$4;var aesJs={exports:{}};(function(R,E){(function(U){function G(me){return parseInt(me)===me}function Y(me){if(!G(me.length))return!1;for(var de=0;de<me.length;de++)if(!G(me[de])||me[de]<0||me[de]>255)return!1;return!0}function J(me,de){if(me.buffer&&ArrayBuffer.isView(me)&&me.name==="Uint8Array")return de&&(me.slice?me=me.slice():me=Array.prototype.slice.call(me)),me;if(Array.isArray(me)){if(!Y(me))throw new Error("Array contains invalid value: "+me);return new Uint8Array(me)}if(G(me.length)&&Y(me))return new Uint8Array(me);throw new Error("unsupported array-like object")}function Q(me){return new Uint8Array(me)}function X(me,de,Ce,Fe,we){(Fe!=null||we!=null)&&(me.slice?me=me.slice(Fe,we):me=Array.prototype.slice.call(me,Fe,we)),de.set(me,Ce)}var Z=function(){function me(Ce){var Fe=[],we=0;for(Ce=encodeURI(Ce);we<Ce.length;){var ke=Ce.charCodeAt(we++);ke===37?(Fe.push(parseInt(Ce.substr(we,2),16)),we+=2):Fe.push(ke)}return J(Fe)}function de(Ce){for(var Fe=[],we=0;we<Ce.length;){var ke=Ce[we];ke<128?(Fe.push(String.fromCharCode(ke)),we++):ke>191&&ke<224?(Fe.push(String.fromCharCode((ke&31)<<6|Ce[we+1]&63)),we+=2):(Fe.push(String.fromCharCode((ke&15)<<12|(Ce[we+1]&63)<<6|Ce[we+2]&63)),we+=3)}return Fe.join("")}return{toBytes:me,fromBytes:de}}(),ee=function(){function me(Fe){for(var we=[],ke=0;ke<Fe.length;ke+=2)we.push(parseInt(Fe.substr(ke,2),16));return we}var de="0123456789abcdef";function Ce(Fe){for(var we=[],ke=0;ke<Fe.length;ke++){var Ne=Fe[ke];we.push(de[(Ne&240)>>4]+de[Ne&15])}return we.join("")}return{toBytes:me,fromBytes:Ce}}(),te={16:10,24:12,32:14},ne=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],oe=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ce=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],pe=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],ye=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Se=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],ge=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],_e=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Te=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Ee=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Re=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Ae=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Ie=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Oe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Pe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Le(me){for(var de=[],Ce=0;Ce<me.length;Ce+=4)de.push(me[Ce]<<24|me[Ce+1]<<16|me[Ce+2]<<8|me[Ce+3]);return de}var Me=function(me){if(!(this instanceof Me))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:J(me,!0)}),this._prepare()};Me.prototype._prepare=function(){var me=te[this.key.length];if(me==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var de=0;de<=me;de++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var Ce=(me+1)*4,Fe=this.key.length/4,we=Le(this.key),ke,de=0;de<Fe;de++)ke=de>>2,this._Ke[ke][de%4]=we[de],this._Kd[me-ke][de%4]=we[de];for(var Ne=0,He=Fe,Ue;He<Ce;){if(Ue=we[Fe-1],we[0]^=oe[Ue>>16&255]<<24^oe[Ue>>8&255]<<16^oe[Ue&255]<<8^oe[Ue>>24&255]^ne[Ne]<<24,Ne+=1,Fe!=8)for(var de=1;de<Fe;de++)we[de]^=we[de-1];else{for(var de=1;de<Fe/2;de++)we[de]^=we[de-1];Ue=we[Fe/2-1],we[Fe/2]^=oe[Ue&255]^oe[Ue>>8&255]<<8^oe[Ue>>16&255]<<16^oe[Ue>>24&255]<<24;for(var de=Fe/2+1;de<Fe;de++)we[de]^=we[de-1]}for(var de=0,Ge,De;de<Fe&&He<Ce;)Ge=He>>2,De=He%4,this._Ke[Ge][De]=we[de],this._Kd[me-Ge][De]=we[de++],He++}for(var Ge=1;Ge<me;Ge++)for(var De=0;De<4;De++)Ue=this._Kd[Ge][De],this._Kd[Ge][De]=Ae[Ue>>24&255]^Ie[Ue>>16&255]^Oe[Ue>>8&255]^Pe[Ue&255]},Me.prototype.encrypt=function(me){if(me.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var de=this._Ke.length-1,Ce=[0,0,0,0],Fe=Le(me),we=0;we<4;we++)Fe[we]^=this._Ke[0][we];for(var ke=1;ke<de;ke++){for(var we=0;we<4;we++)Ce[we]=pe[Fe[we]>>24&255]^ye[Fe[(we+1)%4]>>16&255]^Se[Fe[(we+2)%4]>>8&255]^ge[Fe[(we+3)%4]&255]^this._Ke[ke][we];Fe=Ce.slice()}for(var Ne=Q(16),He,we=0;we<4;we++)He=this._Ke[de][we],Ne[4*we]=(oe[Fe[we]>>24&255]^He>>24)&255,Ne[4*we+1]=(oe[Fe[(we+1)%4]>>16&255]^He>>16)&255,Ne[4*we+2]=(oe[Fe[(we+2)%4]>>8&255]^He>>8)&255,Ne[4*we+3]=(oe[Fe[(we+3)%4]&255]^He)&255;return Ne},Me.prototype.decrypt=function(me){if(me.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var de=this._Kd.length-1,Ce=[0,0,0,0],Fe=Le(me),we=0;we<4;we++)Fe[we]^=this._Kd[0][we];for(var ke=1;ke<de;ke++){for(var we=0;we<4;we++)Ce[we]=_e[Fe[we]>>24&255]^Te[Fe[(we+3)%4]>>16&255]^Ee[Fe[(we+2)%4]>>8&255]^Re[Fe[(we+1)%4]&255]^this._Kd[ke][we];Fe=Ce.slice()}for(var Ne=Q(16),He,we=0;we<4;we++)He=this._Kd[de][we],Ne[4*we]=(ce[Fe[we]>>24&255]^He>>24)&255,Ne[4*we+1]=(ce[Fe[(we+3)%4]>>16&255]^He>>16)&255,Ne[4*we+2]=(ce[Fe[(we+2)%4]>>8&255]^He>>8)&255,Ne[4*we+3]=(ce[Fe[(we+1)%4]&255]^He)&255;return Ne};var ue=function(me){if(!(this instanceof ue))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new Me(me)};ue.prototype.encrypt=function(me){if(me=J(me),me.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var de=Q(me.length),Ce=Q(16),Fe=0;Fe<me.length;Fe+=16)X(me,Ce,0,Fe,Fe+16),Ce=this._aes.encrypt(Ce),X(Ce,de,Fe);return de},ue.prototype.decrypt=function(me){if(me=J(me),me.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var de=Q(me.length),Ce=Q(16),Fe=0;Fe<me.length;Fe+=16)X(me,Ce,0,Fe,Fe+16),Ce=this._aes.decrypt(Ce),X(Ce,de,Fe);return de};var ae=function(me,de){if(!(this instanceof ae))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!de)de=Q(16);else if(de.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=J(de,!0),this._aes=new Me(me)};ae.prototype.encrypt=function(me){if(me=J(me),me.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var de=Q(me.length),Ce=Q(16),Fe=0;Fe<me.length;Fe+=16){X(me,Ce,0,Fe,Fe+16);for(var we=0;we<16;we++)Ce[we]^=this._lastCipherblock[we];this._lastCipherblock=this._aes.encrypt(Ce),X(this._lastCipherblock,de,Fe)}return de},ae.prototype.decrypt=function(me){if(me=J(me),me.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var de=Q(me.length),Ce=Q(16),Fe=0;Fe<me.length;Fe+=16){X(me,Ce,0,Fe,Fe+16),Ce=this._aes.decrypt(Ce);for(var we=0;we<16;we++)de[Fe+we]=Ce[we]^this._lastCipherblock[we];X(me,this._lastCipherblock,0,Fe,Fe+16)}return de};var se=function(me,de,Ce){if(!(this instanceof se))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!de)de=Q(16);else if(de.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");Ce||(Ce=1),this.segmentSize=Ce,this._shiftRegister=J(de,!0),this._aes=new Me(me)};se.prototype.encrypt=function(me){if(me.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var de=J(me,!0),Ce,Fe=0;Fe<de.length;Fe+=this.segmentSize){Ce=this._aes.encrypt(this._shiftRegister);for(var we=0;we<this.segmentSize;we++)de[Fe+we]^=Ce[we];X(this._shiftRegister,this._shiftRegister,0,this.segmentSize),X(de,this._shiftRegister,16-this.segmentSize,Fe,Fe+this.segmentSize)}return de},se.prototype.decrypt=function(me){if(me.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var de=J(me,!0),Ce,Fe=0;Fe<de.length;Fe+=this.segmentSize){Ce=this._aes.encrypt(this._shiftRegister);for(var we=0;we<this.segmentSize;we++)de[Fe+we]^=Ce[we];X(this._shiftRegister,this._shiftRegister,0,this.segmentSize),X(me,this._shiftRegister,16-this.segmentSize,Fe,Fe+this.segmentSize)}return de};var le=function(me,de){if(!(this instanceof le))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!de)de=Q(16);else if(de.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=J(de,!0),this._lastPrecipherIndex=16,this._aes=new Me(me)};le.prototype.encrypt=function(me){for(var de=J(me,!0),Ce=0;Ce<de.length;Ce++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),de[Ce]^=this._lastPrecipher[this._lastPrecipherIndex++];return de},le.prototype.decrypt=le.prototype.encrypt;var fe=function(me){if(!(this instanceof fe))throw Error("Counter must be instanitated with `new`");me!==0&&!me&&(me=1),typeof me=="number"?(this._counter=Q(16),this.setValue(me)):this.setBytes(me)};fe.prototype.setValue=function(me){if(typeof me!="number"||parseInt(me)!=me)throw new Error("invalid counter value (must be an integer)");for(var de=15;de>=0;--de)this._counter[de]=me%256,me=me>>8},fe.prototype.setBytes=function(me){if(me=J(me,!0),me.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=me},fe.prototype.increment=function(){for(var me=15;me>=0;me--)if(this._counter[me]===255)this._counter[me]=0;else{this._counter[me]++;break}};var be=function(me,de){if(!(this instanceof be))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",de instanceof fe||(de=new fe(de)),this._counter=de,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new Me(me)};be.prototype.encrypt=function(me){for(var de=J(me,!0),Ce=0;Ce<de.length;Ce++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),de[Ce]^=this._remainingCounter[this._remainingCounterIndex++];return de},be.prototype.decrypt=be.prototype.encrypt;function ve(me){me=J(me,!0);var de=16-me.length%16,Ce=Q(me.length+de);X(me,Ce);for(var Fe=me.length;Fe<Ce.length;Fe++)Ce[Fe]=de;return Ce}function xe(me){if(me=J(me,!0),me.length<16)throw new Error("PKCS#7 invalid length");var de=me[me.length-1];if(de>16)throw new Error("PKCS#7 padding byte out of range");for(var Ce=me.length-de,Fe=0;Fe<de;Fe++)if(me[Ce+Fe]!==de)throw new Error("PKCS#7 invalid padding byte");var we=Q(Ce);return X(me,we,0,0,Ce),we}var he={AES:Me,Counter:fe,ModeOfOperation:{ecb:ue,cbc:ae,cfb:se,ofb:le,ctr:be},utils:{hex:ee,utf8:Z},padding:{pkcs7:{pad:ve,strip:xe}},_arrayTest:{coerceArray:J,createArray:Q,copyArray:X}};R.exports=he})()})(aesJs);const aes=aesJs.exports;var scrypt$1={exports:{}};(function(R,E){(function(U){function Y(ye){const Se=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let ge=1779033703,_e=3144134277,Te=1013904242,Ee=2773480762,Re=1359893119,Ae=2600822924,Ie=528734635,Oe=1541459225;const Pe=new Uint32Array(64);function Le(be){let ve=0,xe=be.length;for(;xe>=64;){let he=ge,me=_e,de=Te,Ce=Ee,Fe=Re,we=Ae,ke=Ie,Ne=Oe,He,Ue,Ge,De,$e;for(Ue=0;Ue<16;Ue++)Ge=ve+Ue*4,Pe[Ue]=(be[Ge]&255)<<24|(be[Ge+1]&255)<<16|(be[Ge+2]&255)<<8|be[Ge+3]&255;for(Ue=16;Ue<64;Ue++)He=Pe[Ue-2],De=(He>>>17|He<<32-17)^(He>>>19|He<<32-19)^He>>>10,He=Pe[Ue-15],$e=(He>>>7|He<<32-7)^(He>>>18|He<<32-18)^He>>>3,Pe[Ue]=(De+Pe[Ue-7]|0)+($e+Pe[Ue-16]|0)|0;for(Ue=0;Ue<64;Ue++)De=(((Fe>>>6|Fe<<32-6)^(Fe>>>11|Fe<<32-11)^(Fe>>>25|Fe<<32-25))+(Fe&we^~Fe&ke)|0)+(Ne+(Se[Ue]+Pe[Ue]|0)|0)|0,$e=((he>>>2|he<<32-2)^(he>>>13|he<<32-13)^(he>>>22|he<<32-22))+(he&me^he&de^me&de)|0,Ne=ke,ke=we,we=Fe,Fe=Ce+De|0,Ce=de,de=me,me=he,he=De+$e|0;ge=ge+he|0,_e=_e+me|0,Te=Te+de|0,Ee=Ee+Ce|0,Re=Re+Fe|0,Ae=Ae+we|0,Ie=Ie+ke|0,Oe=Oe+Ne|0,ve+=64,xe-=64}}Le(ye);let Me,ue=ye.length%64,ae=ye.length/536870912|0,se=ye.length<<3,le=ue<56?56:120,fe=ye.slice(ye.length-ue,ye.length);for(fe.push(128),Me=ue+1;Me<le;Me++)fe.push(0);return fe.push(ae>>>24&255),fe.push(ae>>>16&255),fe.push(ae>>>8&255),fe.push(ae>>>0&255),fe.push(se>>>24&255),fe.push(se>>>16&255),fe.push(se>>>8&255),fe.push(se>>>0&255),Le(fe),[ge>>>24&255,ge>>>16&255,ge>>>8&255,ge>>>0&255,_e>>>24&255,_e>>>16&255,_e>>>8&255,_e>>>0&255,Te>>>24&255,Te>>>16&255,Te>>>8&255,Te>>>0&255,Ee>>>24&255,Ee>>>16&255,Ee>>>8&255,Ee>>>0&255,Re>>>24&255,Re>>>16&255,Re>>>8&255,Re>>>0&255,Ae>>>24&255,Ae>>>16&255,Ae>>>8&255,Ae>>>0&255,Ie>>>24&255,Ie>>>16&255,Ie>>>8&255,Ie>>>0&255,Oe>>>24&255,Oe>>>16&255,Oe>>>8&255,Oe>>>0&255]}function J(ye,Se,ge){ye=ye.length<=64?ye:Y(ye);const _e=64+Se.length+4,Te=new Array(_e),Ee=new Array(64);let Re,Ae=[];for(Re=0;Re<64;Re++)Te[Re]=54;for(Re=0;Re<ye.length;Re++)Te[Re]^=ye[Re];for(Re=0;Re<Se.length;Re++)Te[64+Re]=Se[Re];for(Re=_e-4;Re<_e;Re++)Te[Re]=0;for(Re=0;Re<64;Re++)Ee[Re]=92;for(Re=0;Re<ye.length;Re++)Ee[Re]^=ye[Re];function Ie(){for(let Oe=_e-1;Oe>=_e-4;Oe--){if(Te[Oe]++,Te[Oe]<=255)return;Te[Oe]=0}}for(;ge>=32;)Ie(),Ae=Ae.concat(Y(Ee.concat(Y(Te)))),ge-=32;return ge>0&&(Ie(),Ae=Ae.concat(Y(Ee.concat(Y(Te))).slice(0,ge))),Ae}function Q(ye,Se,ge,_e,Te){let Ee;for(te(ye,(2*ge-1)*16,Te,0,16),Ee=0;Ee<2*ge;Ee++)ee(ye,Ee*16,Te,16),Z(Te,_e),te(Te,0,ye,Se+Ee*16,16);for(Ee=0;Ee<ge;Ee++)te(ye,Se+Ee*2*16,ye,Ee*16,16);for(Ee=0;Ee<ge;Ee++)te(ye,Se+(Ee*2+1)*16,ye,(Ee+ge)*16,16)}function X(ye,Se){return ye<<Se|ye>>>32-Se}function Z(ye,Se){te(ye,0,Se,0,16);for(let ge=8;ge>0;ge-=2)Se[4]^=X(Se[0]+Se[12],7),Se[8]^=X(Se[4]+Se[0],9),Se[12]^=X(Se[8]+Se[4],13),Se[0]^=X(Se[12]+Se[8],18),Se[9]^=X(Se[5]+Se[1],7),Se[13]^=X(Se[9]+Se[5],9),Se[1]^=X(Se[13]+Se[9],13),Se[5]^=X(Se[1]+Se[13],18),Se[14]^=X(Se[10]+Se[6],7),Se[2]^=X(Se[14]+Se[10],9),Se[6]^=X(Se[2]+Se[14],13),Se[10]^=X(Se[6]+Se[2],18),Se[3]^=X(Se[15]+Se[11],7),Se[7]^=X(Se[3]+Se[15],9),Se[11]^=X(Se[7]+Se[3],13),Se[15]^=X(Se[11]+Se[7],18),Se[1]^=X(Se[0]+Se[3],7),Se[2]^=X(Se[1]+Se[0],9),Se[3]^=X(Se[2]+Se[1],13),Se[0]^=X(Se[3]+Se[2],18),Se[6]^=X(Se[5]+Se[4],7),Se[7]^=X(Se[6]+Se[5],9),Se[4]^=X(Se[7]+Se[6],13),Se[5]^=X(Se[4]+Se[7],18),Se[11]^=X(Se[10]+Se[9],7),Se[8]^=X(Se[11]+Se[10],9),Se[9]^=X(Se[8]+Se[11],13),Se[10]^=X(Se[9]+Se[8],18),Se[12]^=X(Se[15]+Se[14],7),Se[13]^=X(Se[12]+Se[15],9),Se[14]^=X(Se[13]+Se[12],13),Se[15]^=X(Se[14]+Se[13],18);for(let ge=0;ge<16;++ge)ye[ge]+=Se[ge]}function ee(ye,Se,ge,_e){for(let Te=0;Te<_e;Te++)ge[Te]^=ye[Se+Te]}function te(ye,Se,ge,_e,Te){for(;Te--;)ge[_e++]=ye[Se++]}function ne(ye){if(!ye||typeof ye.length!="number")return!1;for(let Se=0;Se<ye.length;Se++){const ge=ye[Se];if(typeof ge!="number"||ge%1||ge<0||ge>=256)return!1}return!0}function oe(ye,Se){if(typeof ye!="number"||ye%1)throw new Error("invalid "+Se);return ye}function ce(ye,Se,ge,_e,Te,Ee,Re){if(ge=oe(ge,"N"),_e=oe(_e,"r"),Te=oe(Te,"p"),Ee=oe(Ee,"dkLen"),ge===0||(ge&ge-1)!==0)throw new Error("N must be power of 2");if(ge>2147483647/128/_e)throw new Error("N too large");if(_e>2147483647/128/Te)throw new Error("r too large");if(!ne(ye))throw new Error("password must be an array or buffer");if(ye=Array.prototype.slice.call(ye),!ne(Se))throw new Error("salt must be an array or buffer");Se=Array.prototype.slice.call(Se);let Ae=J(ye,Se,Te*128*_e);const Ie=new Uint32Array(Te*32*_e);for(let Fe=0;Fe<Ie.length;Fe++){const we=Fe*4;Ie[Fe]=(Ae[we+3]&255)<<24|(Ae[we+2]&255)<<16|(Ae[we+1]&255)<<8|(Ae[we+0]&255)<<0}const Oe=new Uint32Array(64*_e),Pe=new Uint32Array(32*_e*ge),Le=32*_e,Me=new Uint32Array(16),ue=new Uint32Array(16),ae=Te*ge*2;let se=0,le=null,fe=!1,be=0,ve=0,xe,he;const me=Re?parseInt(1e3/_e):4294967295,de=typeof setImmediate<"u"?setImmediate:setTimeout,Ce=function(){if(fe)return Re(new Error("cancelled"),se/ae);let Fe;switch(be){case 0:he=ve*32*_e,te(Ie,he,Oe,0,Le),be=1,xe=0;case 1:Fe=ge-xe,Fe>me&&(Fe=me);for(let ke=0;ke<Fe;ke++)te(Oe,0,Pe,(xe+ke)*Le,Le),Q(Oe,Le,_e,Me,ue);if(xe+=Fe,se+=Fe,Re){const ke=parseInt(1e3*se/ae);if(ke!==le){if(fe=Re(null,se/ae),fe)break;le=ke}}if(xe<ge)break;xe=0,be=2;case 2:Fe=ge-xe,Fe>me&&(Fe=me);for(let ke=0;ke<Fe;ke++){const Ne=(2*_e-1)*16,He=Oe[Ne]&ge-1;ee(Pe,He*Le,Oe,Le),Q(Oe,Le,_e,Me,ue)}if(xe+=Fe,se+=Fe,Re){const ke=parseInt(1e3*se/ae);if(ke!==le){if(fe=Re(null,se/ae),fe)break;le=ke}}if(xe<ge)break;if(te(Oe,0,Ie,he,Le),ve++,ve<Te){be=0;break}Ae=[];for(let ke=0;ke<Ie.length;ke++)Ae.push(Ie[ke]>>0&255),Ae.push(Ie[ke]>>8&255),Ae.push(Ie[ke]>>16&255),Ae.push(Ie[ke]>>24&255);const we=J(ye,Ae,Ee);return Re&&Re(null,1,we),we}Re&&de(Ce)};if(!Re)for(;;){const Fe=Ce();if(Fe!=null)return Fe}Ce()}const pe={scrypt:function(ye,Se,ge,_e,Te,Ee,Re){return new Promise(function(Ae,Ie){let Oe=0;Re&&Re(0),ce(ye,Se,ge,_e,Te,Ee,function(Pe,Le,Me){if(Pe)Ie(Pe);else if(Me)Re&&Oe!==1&&Re(1),Ae(new Uint8Array(Me));else if(Re&&Le!==Oe)return Oe=Le,Re(Le)})})},syncScrypt:function(ye,Se,ge,_e,Te,Ee){return new Uint8Array(ce(ye,Se,ge,_e,Te,Ee))}};R.exports=pe})()})(scrypt$1);const scrypt=scrypt$1.exports;var ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(var z$1=0;z$1<ALPHABET.length;z$1++){var x$2=ALPHABET.charAt(z$1);if(ALPHABET_MAP[x$2]!==void 0)throw new TypeError(x$2+" is ambiguous");ALPHABET_MAP[x$2]=z$1}function polymodStep(R){var E=R>>25;return(R&33554431)<<5^-(E>>0&1)&996825010^-(E>>1&1)&642813549^-(E>>2&1)&513874426^-(E>>3&1)&1027748829^-(E>>4&1)&705979059}function prefixChk(R){for(var E=1,U=0;U<R.length;++U){var G=R.charCodeAt(U);if(G<33||G>126)return"Invalid prefix ("+R+")";E=polymodStep(E)^G>>5}for(E=polymodStep(E),U=0;U<R.length;++U){var Y=R.charCodeAt(U);E=polymodStep(E)^Y&31}return E}function encode$h(R,E,U){if(U=U||90,R.length+7+E.length>U)throw new TypeError("Exceeds length limit");R=R.toLowerCase();var G=prefixChk(R);if(typeof G=="string")throw new Error(G);for(var Y=R+"1",J=0;J<E.length;++J){var Q=E[J];if(Q>>5!==0)throw new Error("Non 5-bit word");G=polymodStep(G)^Q,Y+=ALPHABET.charAt(Q)}for(J=0;J<6;++J)G=polymodStep(G);for(G^=1,J=0;J<6;++J){var X=G>>(5-J)*5&31;Y+=ALPHABET.charAt(X)}return Y}function __decode(R,E){if(E=E||90,R.length<8)return R+" too short";if(R.length>E)return"Exceeds length limit";var U=R.toLowerCase(),G=R.toUpperCase();if(R!==U&&R!==G)return"Mixed-case string "+R;R=U;var Y=R.lastIndexOf("1");if(Y===-1)return"No separator character for "+R;if(Y===0)return"Missing prefix for "+R;var J=R.slice(0,Y),Q=R.slice(Y+1);if(Q.length<6)return"Data too short";var X=prefixChk(J);if(typeof X=="string")return X;for(var Z=[],ee=0;ee<Q.length;++ee){var te=Q.charAt(ee),ne=ALPHABET_MAP[te];if(ne===void 0)return"Unknown character "+te;X=polymodStep(X)^ne,!(ee+6>=Q.length)&&Z.push(ne)}return X!==1?"Invalid checksum for "+R:{prefix:J,words:Z}}function decodeUnsafe(){var R=__decode.apply(null,arguments);if(typeof R=="object")return R}function decode$i(R){var E=__decode.apply(null,arguments);if(typeof E=="object")return E;throw new Error(E)}function convert(R,E,U,G){for(var Y=0,J=0,Q=(1<<U)-1,X=[],Z=0;Z<R.length;++Z)for(Y=Y<<E|R[Z],J+=E;J>=U;)J-=U,X.push(Y>>J&Q);if(G)J>0&&X.push(Y<<U-J&Q);else{if(J>=E)return"Excess padding";if(Y<<U-J&Q)return"Non-zero padding"}return X}function toWordsUnsafe(R){var E=convert(R,8,5,!0);if(Array.isArray(E))return E}function toWords(R){var E=convert(R,8,5,!0);if(Array.isArray(E))return E;throw new Error(E)}function fromWordsUnsafe(R){var E=convert(R,5,8,!1);if(Array.isArray(E))return E}function fromWords(R){var E=convert(R,5,8,!1);if(Array.isArray(E))return E;throw new Error(E)}var bech32={decodeUnsafe,decode:decode$i,encode:encode$h,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords},dist$6={},CoinbaseWalletSDK$2={},walletLogo$1={};Object.defineProperty(walletLogo$1,"__esModule",{value:!0});walletLogo$1.walletLogo=void 0;const walletLogo=(R,E)=>{let U;switch(R){case"standard":return U=E,`data:image/svg+xml,%3Csvg width='${E}' height='${U}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return U=E,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${E}' height='${U}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return U=(.1*E).toFixed(2),`data:image/svg+xml,%3Csvg width='${E}' height='${U}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return U=(.25*E).toFixed(2),`data:image/svg+xml,%3Csvg width='${E}' height='${U}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return U=(.1*E).toFixed(2),`data:image/svg+xml,%3Csvg width='${E}' height='${U}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return U=(.25*E).toFixed(2),`data:image/svg+xml,%3Csvg width='${E}' height='${U}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return U=E,`data:image/svg+xml,%3Csvg width='${E}' height='${U}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};walletLogo$1.walletLogo=walletLogo;var ScopedLocalStorage$1={};Object.defineProperty(ScopedLocalStorage$1,"__esModule",{value:!0});ScopedLocalStorage$1.ScopedLocalStorage=void 0;class ScopedLocalStorage{constructor(E){this.scope=E}setItem(E,U){localStorage.setItem(this.scopedKey(E),U)}getItem(E){return localStorage.getItem(this.scopedKey(E))}removeItem(E){localStorage.removeItem(this.scopedKey(E))}clear(){const E=this.scopedKey(""),U=[];for(let G=0;G<localStorage.length;G++){const Y=localStorage.key(G);typeof Y=="string"&&Y.startsWith(E)&&U.push(Y)}U.forEach(G=>localStorage.removeItem(G))}scopedKey(E){return`${this.scope}:${E}`}}ScopedLocalStorage$1.ScopedLocalStorage=ScopedLocalStorage;var CoinbaseWalletProvider$1={},safeEventEmitter={};Object.defineProperty(safeEventEmitter,"__esModule",{value:!0});const events_1=events$1.exports;function safeApply(R,E,U){try{Reflect.apply(R,E,U)}catch(G){setTimeout(()=>{throw G})}}function arrayClone(R){const E=R.length,U=new Array(E);for(let G=0;G<E;G+=1)U[G]=R[G];return U}class SafeEventEmitter$2 extends events_1.EventEmitter{emit(E,...U){let G=E==="error";const Y=this._events;if(Y!==void 0)G=G&&Y.error===void 0;else if(!G)return!1;if(G){let Q;if(U.length>0&&([Q]=U),Q instanceof Error)throw Q;const X=new Error(`Unhandled error.${Q?` (${Q.message})`:""}`);throw X.context=Q,X}const J=Y[E];if(J===void 0)return!1;if(typeof J=="function")safeApply(J,this,U);else{const Q=J.length,X=arrayClone(J);for(let Z=0;Z<Q;Z+=1)safeApply(X[Z],this,U)}return!0}}safeEventEmitter.default=SafeEventEmitter$2;var bn={exports:{}};(function(R){(function(E,U){function G(ae,se){if(!ae)throw new Error(se||"Assertion failed")}function Y(ae,se){ae.super_=se;var le=function(){};le.prototype=se.prototype,ae.prototype=new le,ae.prototype.constructor=ae}function J(ae,se,le){if(J.isBN(ae))return ae;this.negative=0,this.words=null,this.length=0,this.red=null,ae!==null&&((se==="le"||se==="be")&&(le=se,se=10),this._init(ae||0,se||10,le||"be"))}typeof E=="object"?E.exports=J:U.BN=J,J.BN=J,J.wordSize=26;var Q;try{typeof window<"u"&&typeof window.Buffer<"u"?Q=window.Buffer:Q=require$$3$1.Buffer}catch{}J.isBN=function(se){return se instanceof J?!0:se!==null&&typeof se=="object"&&se.constructor.wordSize===J.wordSize&&Array.isArray(se.words)},J.max=function(se,le){return se.cmp(le)>0?se:le},J.min=function(se,le){return se.cmp(le)<0?se:le},J.prototype._init=function(se,le,fe){if(typeof se=="number")return this._initNumber(se,le,fe);if(typeof se=="object")return this._initArray(se,le,fe);le==="hex"&&(le=16),G(le===(le|0)&&le>=2&&le<=36),se=se.toString().replace(/\s+/g,"");var be=0;se[0]==="-"&&(be++,this.negative=1),be<se.length&&(le===16?this._parseHex(se,be,fe):(this._parseBase(se,le,be),fe==="le"&&this._initArray(this.toArray(),le,fe)))},J.prototype._initNumber=function(se,le,fe){se<0&&(this.negative=1,se=-se),se<67108864?(this.words=[se&67108863],this.length=1):se<4503599627370496?(this.words=[se&67108863,se/67108864&67108863],this.length=2):(G(se<9007199254740992),this.words=[se&67108863,se/67108864&67108863,1],this.length=3),fe==="le"&&this._initArray(this.toArray(),le,fe)},J.prototype._initArray=function(se,le,fe){if(G(typeof se.length=="number"),se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(se.length/3),this.words=new Array(this.length);for(var be=0;be<this.length;be++)this.words[be]=0;var ve,xe,he=0;if(fe==="be")for(be=se.length-1,ve=0;be>=0;be-=3)xe=se[be]|se[be-1]<<8|se[be-2]<<16,this.words[ve]|=xe<<he&67108863,this.words[ve+1]=xe>>>26-he&67108863,he+=24,he>=26&&(he-=26,ve++);else if(fe==="le")for(be=0,ve=0;be<se.length;be+=3)xe=se[be]|se[be+1]<<8|se[be+2]<<16,this.words[ve]|=xe<<he&67108863,this.words[ve+1]=xe>>>26-he&67108863,he+=24,he>=26&&(he-=26,ve++);return this._strip()};function X(ae,se){var le=ae.charCodeAt(se);if(le>=48&&le<=57)return le-48;if(le>=65&&le<=70)return le-55;if(le>=97&&le<=102)return le-87;G(!1,"Invalid character in "+ae)}function Z(ae,se,le){var fe=X(ae,le);return le-1>=se&&(fe|=X(ae,le-1)<<4),fe}J.prototype._parseHex=function(se,le,fe){this.length=Math.ceil((se.length-le)/6),this.words=new Array(this.length);for(var be=0;be<this.length;be++)this.words[be]=0;var ve=0,xe=0,he;if(fe==="be")for(be=se.length-1;be>=le;be-=2)he=Z(se,le,be)<<ve,this.words[xe]|=he&67108863,ve>=18?(ve-=18,xe+=1,this.words[xe]|=he>>>26):ve+=8;else{var me=se.length-le;for(be=me%2===0?le+1:le;be<se.length;be+=2)he=Z(se,le,be)<<ve,this.words[xe]|=he&67108863,ve>=18?(ve-=18,xe+=1,this.words[xe]|=he>>>26):ve+=8}this._strip()};function ee(ae,se,le,fe){for(var be=0,ve=0,xe=Math.min(ae.length,le),he=se;he<xe;he++){var me=ae.charCodeAt(he)-48;be*=fe,me>=49?ve=me-49+10:me>=17?ve=me-17+10:ve=me,G(me>=0&&ve<fe,"Invalid character"),be+=ve}return be}J.prototype._parseBase=function(se,le,fe){this.words=[0],this.length=1;for(var be=0,ve=1;ve<=67108863;ve*=le)be++;be--,ve=ve/le|0;for(var xe=se.length-fe,he=xe%be,me=Math.min(xe,xe-he)+fe,de=0,Ce=fe;Ce<me;Ce+=be)de=ee(se,Ce,Ce+be,le),this.imuln(ve),this.words[0]+de<67108864?this.words[0]+=de:this._iaddn(de);if(he!==0){var Fe=1;for(de=ee(se,Ce,se.length,le),Ce=0;Ce<he;Ce++)Fe*=le;this.imuln(Fe),this.words[0]+de<67108864?this.words[0]+=de:this._iaddn(de)}this._strip()},J.prototype.copy=function(se){se.words=new Array(this.length);for(var le=0;le<this.length;le++)se.words[le]=this.words[le];se.length=this.length,se.negative=this.negative,se.red=this.red};function te(ae,se){ae.words=se.words,ae.length=se.length,ae.negative=se.negative,ae.red=se.red}if(J.prototype._move=function(se){te(se,this)},J.prototype.clone=function(){var se=new J(null);return this.copy(se),se},J.prototype._expand=function(se){for(;this.length<se;)this.words[this.length++]=0;return this},J.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},J.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{J.prototype[Symbol.for("nodejs.util.inspect.custom")]=ne}catch{J.prototype.inspect=ne}else J.prototype.inspect=ne;function ne(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var oe=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ce=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],pe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];J.prototype.toString=function(se,le){se=se||10,le=le|0||1;var fe;if(se===16||se==="hex"){fe="";for(var be=0,ve=0,xe=0;xe<this.length;xe++){var he=this.words[xe],me=((he<<be|ve)&16777215).toString(16);ve=he>>>24-be&16777215,ve!==0||xe!==this.length-1?fe=oe[6-me.length]+me+fe:fe=me+fe,be+=2,be>=26&&(be-=26,xe--)}for(ve!==0&&(fe=ve.toString(16)+fe);fe.length%le!==0;)fe="0"+fe;return this.negative!==0&&(fe="-"+fe),fe}if(se===(se|0)&&se>=2&&se<=36){var de=ce[se],Ce=pe[se];fe="";var Fe=this.clone();for(Fe.negative=0;!Fe.isZero();){var we=Fe.modrn(Ce).toString(se);Fe=Fe.idivn(Ce),Fe.isZero()?fe=we+fe:fe=oe[de-we.length]+we+fe}for(this.isZero()&&(fe="0"+fe);fe.length%le!==0;)fe="0"+fe;return this.negative!==0&&(fe="-"+fe),fe}G(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var se=this.words[0];return this.length===2?se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?se+=4503599627370496+this.words[1]*67108864:this.length>2&&G(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-se:se},J.prototype.toJSON=function(){return this.toString(16,2)},Q&&(J.prototype.toBuffer=function(se,le){return this.toArrayLike(Q,se,le)}),J.prototype.toArray=function(se,le){return this.toArrayLike(Array,se,le)};var ye=function(se,le){return se.allocUnsafe?se.allocUnsafe(le):new se(le)};J.prototype.toArrayLike=function(se,le,fe){this._strip();var be=this.byteLength(),ve=fe||Math.max(1,be);G(be<=ve,"byte array longer than desired length"),G(ve>0,"Requested array length <= 0");var xe=ye(se,ve),he=le==="le"?"LE":"BE";return this["_toArrayLike"+he](xe,be),xe},J.prototype._toArrayLikeLE=function(se,le){for(var fe=0,be=0,ve=0,xe=0;ve<this.length;ve++){var he=this.words[ve]<<xe|be;se[fe++]=he&255,fe<se.length&&(se[fe++]=he>>8&255),fe<se.length&&(se[fe++]=he>>16&255),xe===6?(fe<se.length&&(se[fe++]=he>>24&255),be=0,xe=0):(be=he>>>24,xe+=2)}if(fe<se.length)for(se[fe++]=be;fe<se.length;)se[fe++]=0},J.prototype._toArrayLikeBE=function(se,le){for(var fe=se.length-1,be=0,ve=0,xe=0;ve<this.length;ve++){var he=this.words[ve]<<xe|be;se[fe--]=he&255,fe>=0&&(se[fe--]=he>>8&255),fe>=0&&(se[fe--]=he>>16&255),xe===6?(fe>=0&&(se[fe--]=he>>24&255),be=0,xe=0):(be=he>>>24,xe+=2)}if(fe>=0)for(se[fe--]=be;fe>=0;)se[fe--]=0},Math.clz32?J.prototype._countBits=function(se){return 32-Math.clz32(se)}:J.prototype._countBits=function(se){var le=se,fe=0;return le>=4096&&(fe+=13,le>>>=13),le>=64&&(fe+=7,le>>>=7),le>=8&&(fe+=4,le>>>=4),le>=2&&(fe+=2,le>>>=2),fe+le},J.prototype._zeroBits=function(se){if(se===0)return 26;var le=se,fe=0;return(le&8191)===0&&(fe+=13,le>>>=13),(le&127)===0&&(fe+=7,le>>>=7),(le&15)===0&&(fe+=4,le>>>=4),(le&3)===0&&(fe+=2,le>>>=2),(le&1)===0&&fe++,fe},J.prototype.bitLength=function(){var se=this.words[this.length-1],le=this._countBits(se);return(this.length-1)*26+le};function Se(ae){for(var se=new Array(ae.bitLength()),le=0;le<se.length;le++){var fe=le/26|0,be=le%26;se[le]=ae.words[fe]>>>be&1}return se}J.prototype.zeroBits=function(){if(this.isZero())return 0;for(var se=0,le=0;le<this.length;le++){var fe=this._zeroBits(this.words[le]);if(se+=fe,fe!==26)break}return se},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(se){return this.negative!==0?this.abs().inotn(se).iaddn(1):this.clone()},J.prototype.fromTwos=function(se){return this.testn(se-1)?this.notn(se).iaddn(1).ineg():this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},J.prototype.iuor=function(se){for(;this.length<se.length;)this.words[this.length++]=0;for(var le=0;le<se.length;le++)this.words[le]=this.words[le]|se.words[le];return this._strip()},J.prototype.ior=function(se){return G((this.negative|se.negative)===0),this.iuor(se)},J.prototype.or=function(se){return this.length>se.length?this.clone().ior(se):se.clone().ior(this)},J.prototype.uor=function(se){return this.length>se.length?this.clone().iuor(se):se.clone().iuor(this)},J.prototype.iuand=function(se){var le;this.length>se.length?le=se:le=this;for(var fe=0;fe<le.length;fe++)this.words[fe]=this.words[fe]&se.words[fe];return this.length=le.length,this._strip()},J.prototype.iand=function(se){return G((this.negative|se.negative)===0),this.iuand(se)},J.prototype.and=function(se){return this.length>se.length?this.clone().iand(se):se.clone().iand(this)},J.prototype.uand=function(se){return this.length>se.length?this.clone().iuand(se):se.clone().iuand(this)},J.prototype.iuxor=function(se){var le,fe;this.length>se.length?(le=this,fe=se):(le=se,fe=this);for(var be=0;be<fe.length;be++)this.words[be]=le.words[be]^fe.words[be];if(this!==le)for(;be<le.length;be++)this.words[be]=le.words[be];return this.length=le.length,this._strip()},J.prototype.ixor=function(se){return G((this.negative|se.negative)===0),this.iuxor(se)},J.prototype.xor=function(se){return this.length>se.length?this.clone().ixor(se):se.clone().ixor(this)},J.prototype.uxor=function(se){return this.length>se.length?this.clone().iuxor(se):se.clone().iuxor(this)},J.prototype.inotn=function(se){G(typeof se=="number"&&se>=0);var le=Math.ceil(se/26)|0,fe=se%26;this._expand(le),fe>0&&le--;for(var be=0;be<le;be++)this.words[be]=~this.words[be]&67108863;return fe>0&&(this.words[be]=~this.words[be]&67108863>>26-fe),this._strip()},J.prototype.notn=function(se){return this.clone().inotn(se)},J.prototype.setn=function(se,le){G(typeof se=="number"&&se>=0);var fe=se/26|0,be=se%26;return this._expand(fe+1),le?this.words[fe]=this.words[fe]|1<<be:this.words[fe]=this.words[fe]&~(1<<be),this._strip()},J.prototype.iadd=function(se){var le;if(this.negative!==0&&se.negative===0)return this.negative=0,le=this.isub(se),this.negative^=1,this._normSign();if(this.negative===0&&se.negative!==0)return se.negative=0,le=this.isub(se),se.negative=1,le._normSign();var fe,be;this.length>se.length?(fe=this,be=se):(fe=se,be=this);for(var ve=0,xe=0;xe<be.length;xe++)le=(fe.words[xe]|0)+(be.words[xe]|0)+ve,this.words[xe]=le&67108863,ve=le>>>26;for(;ve!==0&&xe<fe.length;xe++)le=(fe.words[xe]|0)+ve,this.words[xe]=le&67108863,ve=le>>>26;if(this.length=fe.length,ve!==0)this.words[this.length]=ve,this.length++;else if(fe!==this)for(;xe<fe.length;xe++)this.words[xe]=fe.words[xe];return this},J.prototype.add=function(se){var le;return se.negative!==0&&this.negative===0?(se.negative=0,le=this.sub(se),se.negative^=1,le):se.negative===0&&this.negative!==0?(this.negative=0,le=se.sub(this),this.negative=1,le):this.length>se.length?this.clone().iadd(se):se.clone().iadd(this)},J.prototype.isub=function(se){if(se.negative!==0){se.negative=0;var le=this.iadd(se);return se.negative=1,le._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(se),this.negative=1,this._normSign();var fe=this.cmp(se);if(fe===0)return this.negative=0,this.length=1,this.words[0]=0,this;var be,ve;fe>0?(be=this,ve=se):(be=se,ve=this);for(var xe=0,he=0;he<ve.length;he++)le=(be.words[he]|0)-(ve.words[he]|0)+xe,xe=le>>26,this.words[he]=le&67108863;for(;xe!==0&&he<be.length;he++)le=(be.words[he]|0)+xe,xe=le>>26,this.words[he]=le&67108863;if(xe===0&&he<be.length&&be!==this)for(;he<be.length;he++)this.words[he]=be.words[he];return this.length=Math.max(this.length,he),be!==this&&(this.negative=1),this._strip()},J.prototype.sub=function(se){return this.clone().isub(se)};function ge(ae,se,le){le.negative=se.negative^ae.negative;var fe=ae.length+se.length|0;le.length=fe,fe=fe-1|0;var be=ae.words[0]|0,ve=se.words[0]|0,xe=be*ve,he=xe&67108863,me=xe/67108864|0;le.words[0]=he;for(var de=1;de<fe;de++){for(var Ce=me>>>26,Fe=me&67108863,we=Math.min(de,se.length-1),ke=Math.max(0,de-ae.length+1);ke<=we;ke++){var Ne=de-ke|0;be=ae.words[Ne]|0,ve=se.words[ke]|0,xe=be*ve+Fe,Ce+=xe/67108864|0,Fe=xe&67108863}le.words[de]=Fe|0,me=Ce|0}return me!==0?le.words[de]=me|0:le.length--,le._strip()}var _e=function(se,le,fe){var be=se.words,ve=le.words,xe=fe.words,he=0,me,de,Ce,Fe=be[0]|0,we=Fe&8191,ke=Fe>>>13,Ne=be[1]|0,He=Ne&8191,Ue=Ne>>>13,Ge=be[2]|0,De=Ge&8191,$e=Ge>>>13,Be=be[3]|0,je=Be&8191,ze=Be>>>13,We=be[4]|0,Ke=We&8191,Ye=We>>>13,Je=be[5]|0,Qe=Je&8191,qe=Je>>>13,rt=be[6]|0,tt=rt&8191,Xe=rt>>>13,it=be[7]|0,st=it&8191,nt=it>>>13,ot=be[8]|0,pt=ot&8191,dt=ot>>>13,Et=be[9]|0,Ct=Et&8191,ht=Et>>>13,Ve=ve[0]|0,et=Ve&8191,Ze=Ve>>>13,ut=ve[1]|0,at=ut&8191,ct=ut>>>13,wt=ve[2]|0,Tt=wt&8191,yt=wt>>>13,$t=ve[3]|0,kt=$t&8191,mt=$t>>>13,Mt=ve[4]|0,Ot=Mt&8191,bt=Mt>>>13,Rt=ve[5]|0,Dt=Rt&8191,vt=Rt>>>13,Nt=ve[6]|0,Pt=Nt&8191,xt=Nt>>>13,Bt=ve[7]|0,Lt=Bt&8191,_t=Bt>>>13,Ft=ve[8]|0,jt=Ft&8191,St=Ft>>>13,Ht=ve[9]|0,At=Ht&8191,It=Ht>>>13;fe.negative=se.negative^le.negative,fe.length=19,me=Math.imul(we,et),de=Math.imul(we,Ze),de=de+Math.imul(ke,et)|0,Ce=Math.imul(ke,Ze);var Ut=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,me=Math.imul(He,et),de=Math.imul(He,Ze),de=de+Math.imul(Ue,et)|0,Ce=Math.imul(Ue,Ze),me=me+Math.imul(we,at)|0,de=de+Math.imul(we,ct)|0,de=de+Math.imul(ke,at)|0,Ce=Ce+Math.imul(ke,ct)|0;var zt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(zt>>>26)|0,zt&=67108863,me=Math.imul(De,et),de=Math.imul(De,Ze),de=de+Math.imul($e,et)|0,Ce=Math.imul($e,Ze),me=me+Math.imul(He,at)|0,de=de+Math.imul(He,ct)|0,de=de+Math.imul(Ue,at)|0,Ce=Ce+Math.imul(Ue,ct)|0,me=me+Math.imul(we,Tt)|0,de=de+Math.imul(we,yt)|0,de=de+Math.imul(ke,Tt)|0,Ce=Ce+Math.imul(ke,yt)|0;var Wt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,me=Math.imul(je,et),de=Math.imul(je,Ze),de=de+Math.imul(ze,et)|0,Ce=Math.imul(ze,Ze),me=me+Math.imul(De,at)|0,de=de+Math.imul(De,ct)|0,de=de+Math.imul($e,at)|0,Ce=Ce+Math.imul($e,ct)|0,me=me+Math.imul(He,Tt)|0,de=de+Math.imul(He,yt)|0,de=de+Math.imul(Ue,Tt)|0,Ce=Ce+Math.imul(Ue,yt)|0,me=me+Math.imul(we,kt)|0,de=de+Math.imul(we,mt)|0,de=de+Math.imul(ke,kt)|0,Ce=Ce+Math.imul(ke,mt)|0;var Vt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,me=Math.imul(Ke,et),de=Math.imul(Ke,Ze),de=de+Math.imul(Ye,et)|0,Ce=Math.imul(Ye,Ze),me=me+Math.imul(je,at)|0,de=de+Math.imul(je,ct)|0,de=de+Math.imul(ze,at)|0,Ce=Ce+Math.imul(ze,ct)|0,me=me+Math.imul(De,Tt)|0,de=de+Math.imul(De,yt)|0,de=de+Math.imul($e,Tt)|0,Ce=Ce+Math.imul($e,yt)|0,me=me+Math.imul(He,kt)|0,de=de+Math.imul(He,mt)|0,de=de+Math.imul(Ue,kt)|0,Ce=Ce+Math.imul(Ue,mt)|0,me=me+Math.imul(we,Ot)|0,de=de+Math.imul(we,bt)|0,de=de+Math.imul(ke,Ot)|0,Ce=Ce+Math.imul(ke,bt)|0;var qt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(qt>>>26)|0,qt&=67108863,me=Math.imul(Qe,et),de=Math.imul(Qe,Ze),de=de+Math.imul(qe,et)|0,Ce=Math.imul(qe,Ze),me=me+Math.imul(Ke,at)|0,de=de+Math.imul(Ke,ct)|0,de=de+Math.imul(Ye,at)|0,Ce=Ce+Math.imul(Ye,ct)|0,me=me+Math.imul(je,Tt)|0,de=de+Math.imul(je,yt)|0,de=de+Math.imul(ze,Tt)|0,Ce=Ce+Math.imul(ze,yt)|0,me=me+Math.imul(De,kt)|0,de=de+Math.imul(De,mt)|0,de=de+Math.imul($e,kt)|0,Ce=Ce+Math.imul($e,mt)|0,me=me+Math.imul(He,Ot)|0,de=de+Math.imul(He,bt)|0,de=de+Math.imul(Ue,Ot)|0,Ce=Ce+Math.imul(Ue,bt)|0,me=me+Math.imul(we,Dt)|0,de=de+Math.imul(we,vt)|0,de=de+Math.imul(ke,Dt)|0,Ce=Ce+Math.imul(ke,vt)|0;var Gt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,me=Math.imul(tt,et),de=Math.imul(tt,Ze),de=de+Math.imul(Xe,et)|0,Ce=Math.imul(Xe,Ze),me=me+Math.imul(Qe,at)|0,de=de+Math.imul(Qe,ct)|0,de=de+Math.imul(qe,at)|0,Ce=Ce+Math.imul(qe,ct)|0,me=me+Math.imul(Ke,Tt)|0,de=de+Math.imul(Ke,yt)|0,de=de+Math.imul(Ye,Tt)|0,Ce=Ce+Math.imul(Ye,yt)|0,me=me+Math.imul(je,kt)|0,de=de+Math.imul(je,mt)|0,de=de+Math.imul(ze,kt)|0,Ce=Ce+Math.imul(ze,mt)|0,me=me+Math.imul(De,Ot)|0,de=de+Math.imul(De,bt)|0,de=de+Math.imul($e,Ot)|0,Ce=Ce+Math.imul($e,bt)|0,me=me+Math.imul(He,Dt)|0,de=de+Math.imul(He,vt)|0,de=de+Math.imul(Ue,Dt)|0,Ce=Ce+Math.imul(Ue,vt)|0,me=me+Math.imul(we,Pt)|0,de=de+Math.imul(we,xt)|0,de=de+Math.imul(ke,Pt)|0,Ce=Ce+Math.imul(ke,xt)|0;var Kt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,me=Math.imul(st,et),de=Math.imul(st,Ze),de=de+Math.imul(nt,et)|0,Ce=Math.imul(nt,Ze),me=me+Math.imul(tt,at)|0,de=de+Math.imul(tt,ct)|0,de=de+Math.imul(Xe,at)|0,Ce=Ce+Math.imul(Xe,ct)|0,me=me+Math.imul(Qe,Tt)|0,de=de+Math.imul(Qe,yt)|0,de=de+Math.imul(qe,Tt)|0,Ce=Ce+Math.imul(qe,yt)|0,me=me+Math.imul(Ke,kt)|0,de=de+Math.imul(Ke,mt)|0,de=de+Math.imul(Ye,kt)|0,Ce=Ce+Math.imul(Ye,mt)|0,me=me+Math.imul(je,Ot)|0,de=de+Math.imul(je,bt)|0,de=de+Math.imul(ze,Ot)|0,Ce=Ce+Math.imul(ze,bt)|0,me=me+Math.imul(De,Dt)|0,de=de+Math.imul(De,vt)|0,de=de+Math.imul($e,Dt)|0,Ce=Ce+Math.imul($e,vt)|0,me=me+Math.imul(He,Pt)|0,de=de+Math.imul(He,xt)|0,de=de+Math.imul(Ue,Pt)|0,Ce=Ce+Math.imul(Ue,xt)|0,me=me+Math.imul(we,Lt)|0,de=de+Math.imul(we,_t)|0,de=de+Math.imul(ke,Lt)|0,Ce=Ce+Math.imul(ke,_t)|0;var Yt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,me=Math.imul(pt,et),de=Math.imul(pt,Ze),de=de+Math.imul(dt,et)|0,Ce=Math.imul(dt,Ze),me=me+Math.imul(st,at)|0,de=de+Math.imul(st,ct)|0,de=de+Math.imul(nt,at)|0,Ce=Ce+Math.imul(nt,ct)|0,me=me+Math.imul(tt,Tt)|0,de=de+Math.imul(tt,yt)|0,de=de+Math.imul(Xe,Tt)|0,Ce=Ce+Math.imul(Xe,yt)|0,me=me+Math.imul(Qe,kt)|0,de=de+Math.imul(Qe,mt)|0,de=de+Math.imul(qe,kt)|0,Ce=Ce+Math.imul(qe,mt)|0,me=me+Math.imul(Ke,Ot)|0,de=de+Math.imul(Ke,bt)|0,de=de+Math.imul(Ye,Ot)|0,Ce=Ce+Math.imul(Ye,bt)|0,me=me+Math.imul(je,Dt)|0,de=de+Math.imul(je,vt)|0,de=de+Math.imul(ze,Dt)|0,Ce=Ce+Math.imul(ze,vt)|0,me=me+Math.imul(De,Pt)|0,de=de+Math.imul(De,xt)|0,de=de+Math.imul($e,Pt)|0,Ce=Ce+Math.imul($e,xt)|0,me=me+Math.imul(He,Lt)|0,de=de+Math.imul(He,_t)|0,de=de+Math.imul(Ue,Lt)|0,Ce=Ce+Math.imul(Ue,_t)|0,me=me+Math.imul(we,jt)|0,de=de+Math.imul(we,St)|0,de=de+Math.imul(ke,jt)|0,Ce=Ce+Math.imul(ke,St)|0;var Jt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,me=Math.imul(Ct,et),de=Math.imul(Ct,Ze),de=de+Math.imul(ht,et)|0,Ce=Math.imul(ht,Ze),me=me+Math.imul(pt,at)|0,de=de+Math.imul(pt,ct)|0,de=de+Math.imul(dt,at)|0,Ce=Ce+Math.imul(dt,ct)|0,me=me+Math.imul(st,Tt)|0,de=de+Math.imul(st,yt)|0,de=de+Math.imul(nt,Tt)|0,Ce=Ce+Math.imul(nt,yt)|0,me=me+Math.imul(tt,kt)|0,de=de+Math.imul(tt,mt)|0,de=de+Math.imul(Xe,kt)|0,Ce=Ce+Math.imul(Xe,mt)|0,me=me+Math.imul(Qe,Ot)|0,de=de+Math.imul(Qe,bt)|0,de=de+Math.imul(qe,Ot)|0,Ce=Ce+Math.imul(qe,bt)|0,me=me+Math.imul(Ke,Dt)|0,de=de+Math.imul(Ke,vt)|0,de=de+Math.imul(Ye,Dt)|0,Ce=Ce+Math.imul(Ye,vt)|0,me=me+Math.imul(je,Pt)|0,de=de+Math.imul(je,xt)|0,de=de+Math.imul(ze,Pt)|0,Ce=Ce+Math.imul(ze,xt)|0,me=me+Math.imul(De,Lt)|0,de=de+Math.imul(De,_t)|0,de=de+Math.imul($e,Lt)|0,Ce=Ce+Math.imul($e,_t)|0,me=me+Math.imul(He,jt)|0,de=de+Math.imul(He,St)|0,de=de+Math.imul(Ue,jt)|0,Ce=Ce+Math.imul(Ue,St)|0,me=me+Math.imul(we,At)|0,de=de+Math.imul(we,It)|0,de=de+Math.imul(ke,At)|0,Ce=Ce+Math.imul(ke,It)|0;var Qt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,me=Math.imul(Ct,at),de=Math.imul(Ct,ct),de=de+Math.imul(ht,at)|0,Ce=Math.imul(ht,ct),me=me+Math.imul(pt,Tt)|0,de=de+Math.imul(pt,yt)|0,de=de+Math.imul(dt,Tt)|0,Ce=Ce+Math.imul(dt,yt)|0,me=me+Math.imul(st,kt)|0,de=de+Math.imul(st,mt)|0,de=de+Math.imul(nt,kt)|0,Ce=Ce+Math.imul(nt,mt)|0,me=me+Math.imul(tt,Ot)|0,de=de+Math.imul(tt,bt)|0,de=de+Math.imul(Xe,Ot)|0,Ce=Ce+Math.imul(Xe,bt)|0,me=me+Math.imul(Qe,Dt)|0,de=de+Math.imul(Qe,vt)|0,de=de+Math.imul(qe,Dt)|0,Ce=Ce+Math.imul(qe,vt)|0,me=me+Math.imul(Ke,Pt)|0,de=de+Math.imul(Ke,xt)|0,de=de+Math.imul(Ye,Pt)|0,Ce=Ce+Math.imul(Ye,xt)|0,me=me+Math.imul(je,Lt)|0,de=de+Math.imul(je,_t)|0,de=de+Math.imul(ze,Lt)|0,Ce=Ce+Math.imul(ze,_t)|0,me=me+Math.imul(De,jt)|0,de=de+Math.imul(De,St)|0,de=de+Math.imul($e,jt)|0,Ce=Ce+Math.imul($e,St)|0,me=me+Math.imul(He,At)|0,de=de+Math.imul(He,It)|0,de=de+Math.imul(Ue,At)|0,Ce=Ce+Math.imul(Ue,It)|0;var Xt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,me=Math.imul(Ct,Tt),de=Math.imul(Ct,yt),de=de+Math.imul(ht,Tt)|0,Ce=Math.imul(ht,yt),me=me+Math.imul(pt,kt)|0,de=de+Math.imul(pt,mt)|0,de=de+Math.imul(dt,kt)|0,Ce=Ce+Math.imul(dt,mt)|0,me=me+Math.imul(st,Ot)|0,de=de+Math.imul(st,bt)|0,de=de+Math.imul(nt,Ot)|0,Ce=Ce+Math.imul(nt,bt)|0,me=me+Math.imul(tt,Dt)|0,de=de+Math.imul(tt,vt)|0,de=de+Math.imul(Xe,Dt)|0,Ce=Ce+Math.imul(Xe,vt)|0,me=me+Math.imul(Qe,Pt)|0,de=de+Math.imul(Qe,xt)|0,de=de+Math.imul(qe,Pt)|0,Ce=Ce+Math.imul(qe,xt)|0,me=me+Math.imul(Ke,Lt)|0,de=de+Math.imul(Ke,_t)|0,de=de+Math.imul(Ye,Lt)|0,Ce=Ce+Math.imul(Ye,_t)|0,me=me+Math.imul(je,jt)|0,de=de+Math.imul(je,St)|0,de=de+Math.imul(ze,jt)|0,Ce=Ce+Math.imul(ze,St)|0,me=me+Math.imul(De,At)|0,de=de+Math.imul(De,It)|0,de=de+Math.imul($e,At)|0,Ce=Ce+Math.imul($e,It)|0;var Zt=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,me=Math.imul(Ct,kt),de=Math.imul(Ct,mt),de=de+Math.imul(ht,kt)|0,Ce=Math.imul(ht,mt),me=me+Math.imul(pt,Ot)|0,de=de+Math.imul(pt,bt)|0,de=de+Math.imul(dt,Ot)|0,Ce=Ce+Math.imul(dt,bt)|0,me=me+Math.imul(st,Dt)|0,de=de+Math.imul(st,vt)|0,de=de+Math.imul(nt,Dt)|0,Ce=Ce+Math.imul(nt,vt)|0,me=me+Math.imul(tt,Pt)|0,de=de+Math.imul(tt,xt)|0,de=de+Math.imul(Xe,Pt)|0,Ce=Ce+Math.imul(Xe,xt)|0,me=me+Math.imul(Qe,Lt)|0,de=de+Math.imul(Qe,_t)|0,de=de+Math.imul(qe,Lt)|0,Ce=Ce+Math.imul(qe,_t)|0,me=me+Math.imul(Ke,jt)|0,de=de+Math.imul(Ke,St)|0,de=de+Math.imul(Ye,jt)|0,Ce=Ce+Math.imul(Ye,St)|0,me=me+Math.imul(je,At)|0,de=de+Math.imul(je,It)|0,de=de+Math.imul(ze,At)|0,Ce=Ce+Math.imul(ze,It)|0;var er=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(er>>>26)|0,er&=67108863,me=Math.imul(Ct,Ot),de=Math.imul(Ct,bt),de=de+Math.imul(ht,Ot)|0,Ce=Math.imul(ht,bt),me=me+Math.imul(pt,Dt)|0,de=de+Math.imul(pt,vt)|0,de=de+Math.imul(dt,Dt)|0,Ce=Ce+Math.imul(dt,vt)|0,me=me+Math.imul(st,Pt)|0,de=de+Math.imul(st,xt)|0,de=de+Math.imul(nt,Pt)|0,Ce=Ce+Math.imul(nt,xt)|0,me=me+Math.imul(tt,Lt)|0,de=de+Math.imul(tt,_t)|0,de=de+Math.imul(Xe,Lt)|0,Ce=Ce+Math.imul(Xe,_t)|0,me=me+Math.imul(Qe,jt)|0,de=de+Math.imul(Qe,St)|0,de=de+Math.imul(qe,jt)|0,Ce=Ce+Math.imul(qe,St)|0,me=me+Math.imul(Ke,At)|0,de=de+Math.imul(Ke,It)|0,de=de+Math.imul(Ye,At)|0,Ce=Ce+Math.imul(Ye,It)|0;var tr=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(tr>>>26)|0,tr&=67108863,me=Math.imul(Ct,Dt),de=Math.imul(Ct,vt),de=de+Math.imul(ht,Dt)|0,Ce=Math.imul(ht,vt),me=me+Math.imul(pt,Pt)|0,de=de+Math.imul(pt,xt)|0,de=de+Math.imul(dt,Pt)|0,Ce=Ce+Math.imul(dt,xt)|0,me=me+Math.imul(st,Lt)|0,de=de+Math.imul(st,_t)|0,de=de+Math.imul(nt,Lt)|0,Ce=Ce+Math.imul(nt,_t)|0,me=me+Math.imul(tt,jt)|0,de=de+Math.imul(tt,St)|0,de=de+Math.imul(Xe,jt)|0,Ce=Ce+Math.imul(Xe,St)|0,me=me+Math.imul(Qe,At)|0,de=de+Math.imul(Qe,It)|0,de=de+Math.imul(qe,At)|0,Ce=Ce+Math.imul(qe,It)|0;var rr=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(rr>>>26)|0,rr&=67108863,me=Math.imul(Ct,Pt),de=Math.imul(Ct,xt),de=de+Math.imul(ht,Pt)|0,Ce=Math.imul(ht,xt),me=me+Math.imul(pt,Lt)|0,de=de+Math.imul(pt,_t)|0,de=de+Math.imul(dt,Lt)|0,Ce=Ce+Math.imul(dt,_t)|0,me=me+Math.imul(st,jt)|0,de=de+Math.imul(st,St)|0,de=de+Math.imul(nt,jt)|0,Ce=Ce+Math.imul(nt,St)|0,me=me+Math.imul(tt,At)|0,de=de+Math.imul(tt,It)|0,de=de+Math.imul(Xe,At)|0,Ce=Ce+Math.imul(Xe,It)|0;var nr=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(nr>>>26)|0,nr&=67108863,me=Math.imul(Ct,Lt),de=Math.imul(Ct,_t),de=de+Math.imul(ht,Lt)|0,Ce=Math.imul(ht,_t),me=me+Math.imul(pt,jt)|0,de=de+Math.imul(pt,St)|0,de=de+Math.imul(dt,jt)|0,Ce=Ce+Math.imul(dt,St)|0,me=me+Math.imul(st,At)|0,de=de+Math.imul(st,It)|0,de=de+Math.imul(nt,At)|0,Ce=Ce+Math.imul(nt,It)|0;var ir=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(ir>>>26)|0,ir&=67108863,me=Math.imul(Ct,jt),de=Math.imul(Ct,St),de=de+Math.imul(ht,jt)|0,Ce=Math.imul(ht,St),me=me+Math.imul(pt,At)|0,de=de+Math.imul(pt,It)|0,de=de+Math.imul(dt,At)|0,Ce=Ce+Math.imul(dt,It)|0;var sr=(he+me|0)+((de&8191)<<13)|0;he=(Ce+(de>>>13)|0)+(sr>>>26)|0,sr&=67108863,me=Math.imul(Ct,At),de=Math.imul(Ct,It),de=de+Math.imul(ht,At)|0,Ce=Math.imul(ht,It);var ar=(he+me|0)+((de&8191)<<13)|0;return he=(Ce+(de>>>13)|0)+(ar>>>26)|0,ar&=67108863,xe[0]=Ut,xe[1]=zt,xe[2]=Wt,xe[3]=Vt,xe[4]=qt,xe[5]=Gt,xe[6]=Kt,xe[7]=Yt,xe[8]=Jt,xe[9]=Qt,xe[10]=Xt,xe[11]=Zt,xe[12]=er,xe[13]=tr,xe[14]=rr,xe[15]=nr,xe[16]=ir,xe[17]=sr,xe[18]=ar,he!==0&&(xe[19]=he,fe.length++),fe};Math.imul||(_e=ge);function Te(ae,se,le){le.negative=se.negative^ae.negative,le.length=ae.length+se.length;for(var fe=0,be=0,ve=0;ve<le.length-1;ve++){var xe=be;be=0;for(var he=fe&67108863,me=Math.min(ve,se.length-1),de=Math.max(0,ve-ae.length+1);de<=me;de++){var Ce=ve-de,Fe=ae.words[Ce]|0,we=se.words[de]|0,ke=Fe*we,Ne=ke&67108863;xe=xe+(ke/67108864|0)|0,Ne=Ne+he|0,he=Ne&67108863,xe=xe+(Ne>>>26)|0,be+=xe>>>26,xe&=67108863}le.words[ve]=he,fe=xe,xe=be}return fe!==0?le.words[ve]=fe:le.length--,le._strip()}function Ee(ae,se,le){return Te(ae,se,le)}J.prototype.mulTo=function(se,le){var fe,be=this.length+se.length;return this.length===10&&se.length===10?fe=_e(this,se,le):be<63?fe=ge(this,se,le):be<1024?fe=Te(this,se,le):fe=Ee(this,se,le),fe},J.prototype.mul=function(se){var le=new J(null);return le.words=new Array(this.length+se.length),this.mulTo(se,le)},J.prototype.mulf=function(se){var le=new J(null);return le.words=new Array(this.length+se.length),Ee(this,se,le)},J.prototype.imul=function(se){return this.clone().mulTo(se,this)},J.prototype.imuln=function(se){var le=se<0;le&&(se=-se),G(typeof se=="number"),G(se<67108864);for(var fe=0,be=0;be<this.length;be++){var ve=(this.words[be]|0)*se,xe=(ve&67108863)+(fe&67108863);fe>>=26,fe+=ve/67108864|0,fe+=xe>>>26,this.words[be]=xe&67108863}return fe!==0&&(this.words[be]=fe,this.length++),le?this.ineg():this},J.prototype.muln=function(se){return this.clone().imuln(se)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(se){var le=Se(se);if(le.length===0)return new J(1);for(var fe=this,be=0;be<le.length&&le[be]===0;be++,fe=fe.sqr());if(++be<le.length)for(var ve=fe.sqr();be<le.length;be++,ve=ve.sqr())le[be]!==0&&(fe=fe.mul(ve));return fe},J.prototype.iushln=function(se){G(typeof se=="number"&&se>=0);var le=se%26,fe=(se-le)/26,be=67108863>>>26-le<<26-le,ve;if(le!==0){var xe=0;for(ve=0;ve<this.length;ve++){var he=this.words[ve]&be,me=(this.words[ve]|0)-he<<le;this.words[ve]=me|xe,xe=he>>>26-le}xe&&(this.words[ve]=xe,this.length++)}if(fe!==0){for(ve=this.length-1;ve>=0;ve--)this.words[ve+fe]=this.words[ve];for(ve=0;ve<fe;ve++)this.words[ve]=0;this.length+=fe}return this._strip()},J.prototype.ishln=function(se){return G(this.negative===0),this.iushln(se)},J.prototype.iushrn=function(se,le,fe){G(typeof se=="number"&&se>=0);var be;le?be=(le-le%26)/26:be=0;var ve=se%26,xe=Math.min((se-ve)/26,this.length),he=67108863^67108863>>>ve<<ve,me=fe;if(be-=xe,be=Math.max(0,be),me){for(var de=0;de<xe;de++)me.words[de]=this.words[de];me.length=xe}if(xe!==0)if(this.length>xe)for(this.length-=xe,de=0;de<this.length;de++)this.words[de]=this.words[de+xe];else this.words[0]=0,this.length=1;var Ce=0;for(de=this.length-1;de>=0&&(Ce!==0||de>=be);de--){var Fe=this.words[de]|0;this.words[de]=Ce<<26-ve|Fe>>>ve,Ce=Fe&he}return me&&Ce!==0&&(me.words[me.length++]=Ce),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},J.prototype.ishrn=function(se,le,fe){return G(this.negative===0),this.iushrn(se,le,fe)},J.prototype.shln=function(se){return this.clone().ishln(se)},J.prototype.ushln=function(se){return this.clone().iushln(se)},J.prototype.shrn=function(se){return this.clone().ishrn(se)},J.prototype.ushrn=function(se){return this.clone().iushrn(se)},J.prototype.testn=function(se){G(typeof se=="number"&&se>=0);var le=se%26,fe=(se-le)/26,be=1<<le;if(this.length<=fe)return!1;var ve=this.words[fe];return!!(ve&be)},J.prototype.imaskn=function(se){G(typeof se=="number"&&se>=0);var le=se%26,fe=(se-le)/26;if(G(this.negative===0,"imaskn works only with positive numbers"),this.length<=fe)return this;if(le!==0&&fe++,this.length=Math.min(fe,this.length),le!==0){var be=67108863^67108863>>>le<<le;this.words[this.length-1]&=be}return this._strip()},J.prototype.maskn=function(se){return this.clone().imaskn(se)},J.prototype.iaddn=function(se){return G(typeof se=="number"),G(se<67108864),se<0?this.isubn(-se):this.negative!==0?this.length===1&&(this.words[0]|0)<=se?(this.words[0]=se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(se),this.negative=1,this):this._iaddn(se)},J.prototype._iaddn=function(se){this.words[0]+=se;for(var le=0;le<this.length&&this.words[le]>=67108864;le++)this.words[le]-=67108864,le===this.length-1?this.words[le+1]=1:this.words[le+1]++;return this.length=Math.max(this.length,le+1),this},J.prototype.isubn=function(se){if(G(typeof se=="number"),G(se<67108864),se<0)return this.iaddn(-se);if(this.negative!==0)return this.negative=0,this.iaddn(se),this.negative=1,this;if(this.words[0]-=se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var le=0;le<this.length&&this.words[le]<0;le++)this.words[le]+=67108864,this.words[le+1]-=1;return this._strip()},J.prototype.addn=function(se){return this.clone().iaddn(se)},J.prototype.subn=function(se){return this.clone().isubn(se)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(se,le,fe){var be=se.length+fe,ve;this._expand(be);var xe,he=0;for(ve=0;ve<se.length;ve++){xe=(this.words[ve+fe]|0)+he;var me=(se.words[ve]|0)*le;xe-=me&67108863,he=(xe>>26)-(me/67108864|0),this.words[ve+fe]=xe&67108863}for(;ve<this.length-fe;ve++)xe=(this.words[ve+fe]|0)+he,he=xe>>26,this.words[ve+fe]=xe&67108863;if(he===0)return this._strip();for(G(he===-1),he=0,ve=0;ve<this.length;ve++)xe=-(this.words[ve]|0)+he,he=xe>>26,this.words[ve]=xe&67108863;return this.negative=1,this._strip()},J.prototype._wordDiv=function(se,le){var fe=this.length-se.length,be=this.clone(),ve=se,xe=ve.words[ve.length-1]|0,he=this._countBits(xe);fe=26-he,fe!==0&&(ve=ve.ushln(fe),be.iushln(fe),xe=ve.words[ve.length-1]|0);var me=be.length-ve.length,de;if(le!=="mod"){de=new J(null),de.length=me+1,de.words=new Array(de.length);for(var Ce=0;Ce<de.length;Ce++)de.words[Ce]=0}var Fe=be.clone()._ishlnsubmul(ve,1,me);Fe.negative===0&&(be=Fe,de&&(de.words[me]=1));for(var we=me-1;we>=0;we--){var ke=(be.words[ve.length+we]|0)*67108864+(be.words[ve.length+we-1]|0);for(ke=Math.min(ke/xe|0,67108863),be._ishlnsubmul(ve,ke,we);be.negative!==0;)ke--,be.negative=0,be._ishlnsubmul(ve,1,we),be.isZero()||(be.negative^=1);de&&(de.words[we]=ke)}return de&&de._strip(),be._strip(),le!=="div"&&fe!==0&&be.iushrn(fe),{div:de||null,mod:be}},J.prototype.divmod=function(se,le,fe){if(G(!se.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var be,ve,xe;return this.negative!==0&&se.negative===0?(xe=this.neg().divmod(se,le),le!=="mod"&&(be=xe.div.neg()),le!=="div"&&(ve=xe.mod.neg(),fe&&ve.negative!==0&&ve.iadd(se)),{div:be,mod:ve}):this.negative===0&&se.negative!==0?(xe=this.divmod(se.neg(),le),le!=="mod"&&(be=xe.div.neg()),{div:be,mod:xe.mod}):(this.negative&se.negative)!==0?(xe=this.neg().divmod(se.neg(),le),le!=="div"&&(ve=xe.mod.neg(),fe&&ve.negative!==0&&ve.isub(se)),{div:xe.div,mod:ve}):se.length>this.length||this.cmp(se)<0?{div:new J(0),mod:this}:se.length===1?le==="div"?{div:this.divn(se.words[0]),mod:null}:le==="mod"?{div:null,mod:new J(this.modrn(se.words[0]))}:{div:this.divn(se.words[0]),mod:new J(this.modrn(se.words[0]))}:this._wordDiv(se,le)},J.prototype.div=function(se){return this.divmod(se,"div",!1).div},J.prototype.mod=function(se){return this.divmod(se,"mod",!1).mod},J.prototype.umod=function(se){return this.divmod(se,"mod",!0).mod},J.prototype.divRound=function(se){var le=this.divmod(se);if(le.mod.isZero())return le.div;var fe=le.div.negative!==0?le.mod.isub(se):le.mod,be=se.ushrn(1),ve=se.andln(1),xe=fe.cmp(be);return xe<0||ve===1&&xe===0?le.div:le.div.negative!==0?le.div.isubn(1):le.div.iaddn(1)},J.prototype.modrn=function(se){var le=se<0;le&&(se=-se),G(se<=67108863);for(var fe=(1<<26)%se,be=0,ve=this.length-1;ve>=0;ve--)be=(fe*be+(this.words[ve]|0))%se;return le?-be:be},J.prototype.modn=function(se){return this.modrn(se)},J.prototype.idivn=function(se){var le=se<0;le&&(se=-se),G(se<=67108863);for(var fe=0,be=this.length-1;be>=0;be--){var ve=(this.words[be]|0)+fe*67108864;this.words[be]=ve/se|0,fe=ve%se}return this._strip(),le?this.ineg():this},J.prototype.divn=function(se){return this.clone().idivn(se)},J.prototype.egcd=function(se){G(se.negative===0),G(!se.isZero());var le=this,fe=se.clone();le.negative!==0?le=le.umod(se):le=le.clone();for(var be=new J(1),ve=new J(0),xe=new J(0),he=new J(1),me=0;le.isEven()&&fe.isEven();)le.iushrn(1),fe.iushrn(1),++me;for(var de=fe.clone(),Ce=le.clone();!le.isZero();){for(var Fe=0,we=1;(le.words[0]&we)===0&&Fe<26;++Fe,we<<=1);if(Fe>0)for(le.iushrn(Fe);Fe-- >0;)(be.isOdd()||ve.isOdd())&&(be.iadd(de),ve.isub(Ce)),be.iushrn(1),ve.iushrn(1);for(var ke=0,Ne=1;(fe.words[0]&Ne)===0&&ke<26;++ke,Ne<<=1);if(ke>0)for(fe.iushrn(ke);ke-- >0;)(xe.isOdd()||he.isOdd())&&(xe.iadd(de),he.isub(Ce)),xe.iushrn(1),he.iushrn(1);le.cmp(fe)>=0?(le.isub(fe),be.isub(xe),ve.isub(he)):(fe.isub(le),xe.isub(be),he.isub(ve))}return{a:xe,b:he,gcd:fe.iushln(me)}},J.prototype._invmp=function(se){G(se.negative===0),G(!se.isZero());var le=this,fe=se.clone();le.negative!==0?le=le.umod(se):le=le.clone();for(var be=new J(1),ve=new J(0),xe=fe.clone();le.cmpn(1)>0&&fe.cmpn(1)>0;){for(var he=0,me=1;(le.words[0]&me)===0&&he<26;++he,me<<=1);if(he>0)for(le.iushrn(he);he-- >0;)be.isOdd()&&be.iadd(xe),be.iushrn(1);for(var de=0,Ce=1;(fe.words[0]&Ce)===0&&de<26;++de,Ce<<=1);if(de>0)for(fe.iushrn(de);de-- >0;)ve.isOdd()&&ve.iadd(xe),ve.iushrn(1);le.cmp(fe)>=0?(le.isub(fe),be.isub(ve)):(fe.isub(le),ve.isub(be))}var Fe;return le.cmpn(1)===0?Fe=be:Fe=ve,Fe.cmpn(0)<0&&Fe.iadd(se),Fe},J.prototype.gcd=function(se){if(this.isZero())return se.abs();if(se.isZero())return this.abs();var le=this.clone(),fe=se.clone();le.negative=0,fe.negative=0;for(var be=0;le.isEven()&&fe.isEven();be++)le.iushrn(1),fe.iushrn(1);do{for(;le.isEven();)le.iushrn(1);for(;fe.isEven();)fe.iushrn(1);var ve=le.cmp(fe);if(ve<0){var xe=le;le=fe,fe=xe}else if(ve===0||fe.cmpn(1)===0)break;le.isub(fe)}while(!0);return fe.iushln(be)},J.prototype.invm=function(se){return this.egcd(se).a.umod(se)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(se){return this.words[0]&se},J.prototype.bincn=function(se){G(typeof se=="number");var le=se%26,fe=(se-le)/26,be=1<<le;if(this.length<=fe)return this._expand(fe+1),this.words[fe]|=be,this;for(var ve=be,xe=fe;ve!==0&&xe<this.length;xe++){var he=this.words[xe]|0;he+=ve,ve=he>>>26,he&=67108863,this.words[xe]=he}return ve!==0&&(this.words[xe]=ve,this.length++),this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(se){var le=se<0;if(this.negative!==0&&!le)return-1;if(this.negative===0&&le)return 1;this._strip();var fe;if(this.length>1)fe=1;else{le&&(se=-se),G(se<=67108863,"Number is too big");var be=this.words[0]|0;fe=be===se?0:be<se?-1:1}return this.negative!==0?-fe|0:fe},J.prototype.cmp=function(se){if(this.negative!==0&&se.negative===0)return-1;if(this.negative===0&&se.negative!==0)return 1;var le=this.ucmp(se);return this.negative!==0?-le|0:le},J.prototype.ucmp=function(se){if(this.length>se.length)return 1;if(this.length<se.length)return-1;for(var le=0,fe=this.length-1;fe>=0;fe--){var be=this.words[fe]|0,ve=se.words[fe]|0;if(be!==ve){be<ve?le=-1:be>ve&&(le=1);break}}return le},J.prototype.gtn=function(se){return this.cmpn(se)===1},J.prototype.gt=function(se){return this.cmp(se)===1},J.prototype.gten=function(se){return this.cmpn(se)>=0},J.prototype.gte=function(se){return this.cmp(se)>=0},J.prototype.ltn=function(se){return this.cmpn(se)===-1},J.prototype.lt=function(se){return this.cmp(se)===-1},J.prototype.lten=function(se){return this.cmpn(se)<=0},J.prototype.lte=function(se){return this.cmp(se)<=0},J.prototype.eqn=function(se){return this.cmpn(se)===0},J.prototype.eq=function(se){return this.cmp(se)===0},J.red=function(se){return new Me(se)},J.prototype.toRed=function(se){return G(!this.red,"Already a number in reduction context"),G(this.negative===0,"red works only with positives"),se.convertTo(this)._forceRed(se)},J.prototype.fromRed=function(){return G(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(se){return this.red=se,this},J.prototype.forceRed=function(se){return G(!this.red,"Already a number in reduction context"),this._forceRed(se)},J.prototype.redAdd=function(se){return G(this.red,"redAdd works only with red numbers"),this.red.add(this,se)},J.prototype.redIAdd=function(se){return G(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,se)},J.prototype.redSub=function(se){return G(this.red,"redSub works only with red numbers"),this.red.sub(this,se)},J.prototype.redISub=function(se){return G(this.red,"redISub works only with red numbers"),this.red.isub(this,se)},J.prototype.redShl=function(se){return G(this.red,"redShl works only with red numbers"),this.red.shl(this,se)},J.prototype.redMul=function(se){return G(this.red,"redMul works only with red numbers"),this.red._verify2(this,se),this.red.mul(this,se)},J.prototype.redIMul=function(se){return G(this.red,"redMul works only with red numbers"),this.red._verify2(this,se),this.red.imul(this,se)},J.prototype.redSqr=function(){return G(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return G(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return G(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return G(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return G(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(se){return G(this.red&&!se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,se)};var Re={k256:null,p224:null,p192:null,p25519:null};function Ae(ae,se){this.name=ae,this.p=new J(se,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ae.prototype._tmp=function(){var se=new J(null);return se.words=new Array(Math.ceil(this.n/13)),se},Ae.prototype.ireduce=function(se){var le=se,fe;do this.split(le,this.tmp),le=this.imulK(le),le=le.iadd(this.tmp),fe=le.bitLength();while(fe>this.n);var be=fe<this.n?-1:le.ucmp(this.p);return be===0?(le.words[0]=0,le.length=1):be>0?le.isub(this.p):le.strip!==void 0?le.strip():le._strip(),le},Ae.prototype.split=function(se,le){se.iushrn(this.n,0,le)},Ae.prototype.imulK=function(se){return se.imul(this.k)};function Ie(){Ae.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}Y(Ie,Ae),Ie.prototype.split=function(se,le){for(var fe=4194303,be=Math.min(se.length,9),ve=0;ve<be;ve++)le.words[ve]=se.words[ve];if(le.length=be,se.length<=9){se.words[0]=0,se.length=1;return}var xe=se.words[9];for(le.words[le.length++]=xe&fe,ve=10;ve<se.length;ve++){var he=se.words[ve]|0;se.words[ve-10]=(he&fe)<<4|xe>>>22,xe=he}xe>>>=22,se.words[ve-10]=xe,xe===0&&se.length>10?se.length-=10:se.length-=9},Ie.prototype.imulK=function(se){se.words[se.length]=0,se.words[se.length+1]=0,se.length+=2;for(var le=0,fe=0;fe<se.length;fe++){var be=se.words[fe]|0;le+=be*977,se.words[fe]=le&67108863,le=be*64+(le/67108864|0)}return se.words[se.length-1]===0&&(se.length--,se.words[se.length-1]===0&&se.length--),se};function Oe(){Ae.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}Y(Oe,Ae);function Pe(){Ae.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}Y(Pe,Ae);function Le(){Ae.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}Y(Le,Ae),Le.prototype.imulK=function(se){for(var le=0,fe=0;fe<se.length;fe++){var be=(se.words[fe]|0)*19+le,ve=be&67108863;be>>>=26,se.words[fe]=ve,le=be}return le!==0&&(se.words[se.length++]=le),se},J._prime=function(se){if(Re[se])return Re[se];var le;if(se==="k256")le=new Ie;else if(se==="p224")le=new Oe;else if(se==="p192")le=new Pe;else if(se==="p25519")le=new Le;else throw new Error("Unknown prime "+se);return Re[se]=le,le};function Me(ae){if(typeof ae=="string"){var se=J._prime(ae);this.m=se.p,this.prime=se}else G(ae.gtn(1),"modulus must be greater than 1"),this.m=ae,this.prime=null}Me.prototype._verify1=function(se){G(se.negative===0,"red works only with positives"),G(se.red,"red works only with red numbers")},Me.prototype._verify2=function(se,le){G((se.negative|le.negative)===0,"red works only with positives"),G(se.red&&se.red===le.red,"red works only with red numbers")},Me.prototype.imod=function(se){return this.prime?this.prime.ireduce(se)._forceRed(this):(te(se,se.umod(this.m)._forceRed(this)),se)},Me.prototype.neg=function(se){return se.isZero()?se.clone():this.m.sub(se)._forceRed(this)},Me.prototype.add=function(se,le){this._verify2(se,le);var fe=se.add(le);return fe.cmp(this.m)>=0&&fe.isub(this.m),fe._forceRed(this)},Me.prototype.iadd=function(se,le){this._verify2(se,le);var fe=se.iadd(le);return fe.cmp(this.m)>=0&&fe.isub(this.m),fe},Me.prototype.sub=function(se,le){this._verify2(se,le);var fe=se.sub(le);return fe.cmpn(0)<0&&fe.iadd(this.m),fe._forceRed(this)},Me.prototype.isub=function(se,le){this._verify2(se,le);var fe=se.isub(le);return fe.cmpn(0)<0&&fe.iadd(this.m),fe},Me.prototype.shl=function(se,le){return this._verify1(se),this.imod(se.ushln(le))},Me.prototype.imul=function(se,le){return this._verify2(se,le),this.imod(se.imul(le))},Me.prototype.mul=function(se,le){return this._verify2(se,le),this.imod(se.mul(le))},Me.prototype.isqr=function(se){return this.imul(se,se.clone())},Me.prototype.sqr=function(se){return this.mul(se,se)},Me.prototype.sqrt=function(se){if(se.isZero())return se.clone();var le=this.m.andln(3);if(G(le%2===1),le===3){var fe=this.m.add(new J(1)).iushrn(2);return this.pow(se,fe)}for(var be=this.m.subn(1),ve=0;!be.isZero()&&be.andln(1)===0;)ve++,be.iushrn(1);G(!be.isZero());var xe=new J(1).toRed(this),he=xe.redNeg(),me=this.m.subn(1).iushrn(1),de=this.m.bitLength();for(de=new J(2*de*de).toRed(this);this.pow(de,me).cmp(he)!==0;)de.redIAdd(he);for(var Ce=this.pow(de,be),Fe=this.pow(se,be.addn(1).iushrn(1)),we=this.pow(se,be),ke=ve;we.cmp(xe)!==0;){for(var Ne=we,He=0;Ne.cmp(xe)!==0;He++)Ne=Ne.redSqr();G(He<ke);var Ue=this.pow(Ce,new J(1).iushln(ke-He-1));Fe=Fe.redMul(Ue),Ce=Ue.redSqr(),we=we.redMul(Ce),ke=He}return Fe},Me.prototype.invm=function(se){var le=se._invmp(this.m);return le.negative!==0?(le.negative=0,this.imod(le).redNeg()):this.imod(le)},Me.prototype.pow=function(se,le){if(le.isZero())return new J(1).toRed(this);if(le.cmpn(1)===0)return se.clone();var fe=4,be=new Array(1<<fe);be[0]=new J(1).toRed(this),be[1]=se;for(var ve=2;ve<be.length;ve++)be[ve]=this.mul(be[ve-1],se);var xe=be[0],he=0,me=0,de=le.bitLength()%26;for(de===0&&(de=26),ve=le.length-1;ve>=0;ve--){for(var Ce=le.words[ve],Fe=de-1;Fe>=0;Fe--){var we=Ce>>Fe&1;if(xe!==be[0]&&(xe=this.sqr(xe)),we===0&&he===0){me=0;continue}he<<=1,he|=we,me++,!(me!==fe&&(ve!==0||Fe!==0))&&(xe=this.mul(xe,be[he]),me=0,he=0)}de=26}return xe},Me.prototype.convertTo=function(se){var le=se.umod(this.m);return le===se?le.clone():le},Me.prototype.convertFrom=function(se){var le=se.clone();return le.red=null,le},J.mont=function(se){return new ue(se)};function ue(ae){Me.call(this,ae),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Y(ue,Me),ue.prototype.convertTo=function(se){return this.imod(se.ushln(this.shift))},ue.prototype.convertFrom=function(se){var le=this.imod(se.mul(this.rinv));return le.red=null,le},ue.prototype.imul=function(se,le){if(se.isZero()||le.isZero())return se.words[0]=0,se.length=1,se;var fe=se.imul(le),be=fe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=fe.isub(be).iushrn(this.shift),xe=ve;return ve.cmp(this.m)>=0?xe=ve.isub(this.m):ve.cmpn(0)<0&&(xe=ve.iadd(this.m)),xe._forceRed(this)},ue.prototype.mul=function(se,le){if(se.isZero()||le.isZero())return new J(0)._forceRed(this);var fe=se.mul(le),be=fe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=fe.isub(be).iushrn(this.shift),xe=ve;return ve.cmp(this.m)>=0?xe=ve.isub(this.m):ve.cmpn(0)<0&&(xe=ve.iadd(this.m)),xe._forceRed(this)},ue.prototype.invm=function(se){var le=this.imod(se._invmp(this.m).mul(this.r2));return le._forceRed(this)}})(R,commonjsGlobal)})(bn);var dist$5={},classes$1={},fastSafeStringify=stringify$3;stringify$3.default=stringify$3;stringify$3.stable=deterministicStringify;stringify$3.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify$3(R,E,U,G){typeof G>"u"&&(G=defaultOptions()),decirc(R,"",0,[],void 0,0,G);var Y;try{replacerStack.length===0?Y=JSON.stringify(R,E,U):Y=JSON.stringify(R,replaceGetterValues(E),U)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var J=arr.pop();J.length===4?Object.defineProperty(J[0],J[1],J[3]):J[0][J[1]]=J[2]}}return Y}function setReplace(R,E,U,G){var Y=Object.getOwnPropertyDescriptor(G,U);Y.get!==void 0?Y.configurable?(Object.defineProperty(G,U,{value:R}),arr.push([G,U,E,Y])):replacerStack.push([E,U,R]):(G[U]=R,arr.push([G,U,E]))}function decirc(R,E,U,G,Y,J,Q){J+=1;var X;if(typeof R=="object"&&R!==null){for(X=0;X<G.length;X++)if(G[X]===R){setReplace(CIRCULAR_REPLACE_NODE,R,E,Y);return}if(typeof Q.depthLimit<"u"&&J>Q.depthLimit){setReplace(LIMIT_REPLACE_NODE,R,E,Y);return}if(typeof Q.edgesLimit<"u"&&U+1>Q.edgesLimit){setReplace(LIMIT_REPLACE_NODE,R,E,Y);return}if(G.push(R),Array.isArray(R))for(X=0;X<R.length;X++)decirc(R[X],X,X,G,R,J,Q);else{var Z=Object.keys(R);for(X=0;X<Z.length;X++){var ee=Z[X];decirc(R[ee],ee,X,G,R,J,Q)}}G.pop()}}function compareFunction(R,E){return R<E?-1:R>E?1:0}function deterministicStringify(R,E,U,G){typeof G>"u"&&(G=defaultOptions());var Y=deterministicDecirc(R,"",0,[],void 0,0,G)||R,J;try{replacerStack.length===0?J=JSON.stringify(Y,E,U):J=JSON.stringify(Y,replaceGetterValues(E),U)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var Q=arr.pop();Q.length===4?Object.defineProperty(Q[0],Q[1],Q[3]):Q[0][Q[1]]=Q[2]}}return J}function deterministicDecirc(R,E,U,G,Y,J,Q){J+=1;var X;if(typeof R=="object"&&R!==null){for(X=0;X<G.length;X++)if(G[X]===R){setReplace(CIRCULAR_REPLACE_NODE,R,E,Y);return}try{if(typeof R.toJSON=="function")return}catch{return}if(typeof Q.depthLimit<"u"&&J>Q.depthLimit){setReplace(LIMIT_REPLACE_NODE,R,E,Y);return}if(typeof Q.edgesLimit<"u"&&U+1>Q.edgesLimit){setReplace(LIMIT_REPLACE_NODE,R,E,Y);return}if(G.push(R),Array.isArray(R))for(X=0;X<R.length;X++)deterministicDecirc(R[X],X,X,G,R,J,Q);else{var Z={},ee=Object.keys(R).sort(compareFunction);for(X=0;X<ee.length;X++){var te=ee[X];deterministicDecirc(R[te],te,X,G,R,J,Q),Z[te]=R[te]}if(typeof Y<"u")arr.push([Y,E,R]),Y[E]=Z;else return Z}G.pop()}}function replaceGetterValues(R){return R=typeof R<"u"?R:function(E,U){return U},function(E,U){if(replacerStack.length>0)for(var G=0;G<replacerStack.length;G++){var Y=replacerStack[G];if(Y[1]===E&&Y[0]===U){U=Y[2],replacerStack.splice(G,1);break}}return R.call(this,E,U)}}Object.defineProperty(classes$1,"__esModule",{value:!0});classes$1.EthereumProviderError=classes$1.EthereumRpcError=void 0;const fast_safe_stringify_1$1=fastSafeStringify;class EthereumRpcError$1 extends Error{constructor(E,U,G){if(!Number.isInteger(E))throw new Error('"code" must be an integer.');if(!U||typeof U!="string")throw new Error('"message" must be a nonempty string.');super(U),this.code=E,G!==void 0&&(this.data=G)}serialize(){const E={code:this.code,message:this.message};return this.data!==void 0&&(E.data=this.data),this.stack&&(E.stack=this.stack),E}toString(){return fast_safe_stringify_1$1.default(this.serialize(),stringifyReplacer$1,2)}}classes$1.EthereumRpcError=EthereumRpcError$1;class EthereumProviderError$1 extends EthereumRpcError$1{constructor(E,U,G){if(!isValidEthProviderCode$1(E))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(E,U,G)}}classes$1.EthereumProviderError=EthereumProviderError$1;function isValidEthProviderCode$1(R){return Number.isInteger(R)&&R>=1e3&&R<=4999}function stringifyReplacer$1(R,E){if(E!=="[Circular]")return E}var utils$5={},errorConstants$1={};Object.defineProperty(errorConstants$1,"__esModule",{value:!0});errorConstants$1.errorValues=errorConstants$1.errorCodes=void 0;errorConstants$1.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};errorConstants$1.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.serializeError=R.isValidCode=R.getMessageFromCode=R.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const E=errorConstants$1,U=classes$1,G=E.errorCodes.rpc.internal,Y="Unspecified error message. This is a bug, please report it.",J={code:G,message:Q(G)};R.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Q(oe,ce=Y){if(Number.isInteger(oe)){const pe=oe.toString();if(ne(E.errorValues,pe))return E.errorValues[pe].message;if(ee(oe))return R.JSON_RPC_SERVER_ERROR_MESSAGE}return ce}R.getMessageFromCode=Q;function X(oe){if(!Number.isInteger(oe))return!1;const ce=oe.toString();return!!(E.errorValues[ce]||ee(oe))}R.isValidCode=X;function Z(oe,{fallbackError:ce=J,shouldIncludeStack:pe=!1}={}){var ye,Se;if(!ce||!Number.isInteger(ce.code)||typeof ce.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(oe instanceof U.EthereumRpcError)return oe.serialize();const ge={};if(oe&&typeof oe=="object"&&!Array.isArray(oe)&&ne(oe,"code")&&X(oe.code)){const Te=oe;ge.code=Te.code,Te.message&&typeof Te.message=="string"?(ge.message=Te.message,ne(Te,"data")&&(ge.data=Te.data)):(ge.message=Q(ge.code),ge.data={originalError:te(oe)})}else{ge.code=ce.code;const Te=(ye=oe)===null||ye===void 0?void 0:ye.message;ge.message=Te&&typeof Te=="string"?Te:ce.message,ge.data={originalError:te(oe)}}const _e=(Se=oe)===null||Se===void 0?void 0:Se.stack;return pe&&oe&&_e&&typeof _e=="string"&&(ge.stack=_e),ge}R.serializeError=Z;function ee(oe){return oe>=-32099&&oe<=-32e3}function te(oe){return oe&&typeof oe=="object"&&!Array.isArray(oe)?Object.assign({},oe):oe}function ne(oe,ce){return Object.prototype.hasOwnProperty.call(oe,ce)}})(utils$5);var errors$1={};Object.defineProperty(errors$1,"__esModule",{value:!0});errors$1.ethErrors=void 0;const classes_1$1=classes$1,utils_1$3=utils$5,error_constants_1$1=errorConstants$1;errors$1.ethErrors={rpc:{parse:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.parse,R),invalidRequest:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidRequest,R),invalidParams:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidParams,R),methodNotFound:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.methodNotFound,R),internal:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.internal,R),server:R=>{if(!R||typeof R!="object"||Array.isArray(R))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:E}=R;if(!Number.isInteger(E)||E>-32005||E<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError$1(E,R)},invalidInput:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidInput,R),resourceNotFound:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.resourceNotFound,R),resourceUnavailable:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.resourceUnavailable,R),transactionRejected:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.transactionRejected,R),methodNotSupported:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.methodNotSupported,R),limitExceeded:R=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.limitExceeded,R)},provider:{userRejectedRequest:R=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.userRejectedRequest,R),unauthorized:R=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.unauthorized,R),unsupportedMethod:R=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.unsupportedMethod,R),disconnected:R=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.disconnected,R),chainDisconnected:R=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.chainDisconnected,R),custom:R=>{if(!R||typeof R!="object"||Array.isArray(R))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:E,message:U,data:G}=R;if(!U||typeof U!="string")throw new Error('"message" must be a nonempty string');return new classes_1$1.EthereumProviderError(E,U,G)}}};function getEthJsonRpcError$1(R,E){const[U,G]=parseOpts$1(E);return new classes_1$1.EthereumRpcError(R,U||utils_1$3.getMessageFromCode(R),G)}function getEthProviderError$1(R,E){const[U,G]=parseOpts$1(E);return new classes_1$1.EthereumProviderError(R,U||utils_1$3.getMessageFromCode(R),G)}function parseOpts$1(R){if(R){if(typeof R=="string")return[R];if(typeof R=="object"&&!Array.isArray(R)){const{message:E,data:U}=R;if(E&&typeof E!="string")throw new Error("Must specify string message.");return[E||void 0,U]}}return[]}(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.getMessageFromCode=R.serializeError=R.EthereumProviderError=R.EthereumRpcError=R.ethErrors=R.errorCodes=void 0;const E=classes$1;Object.defineProperty(R,"EthereumRpcError",{enumerable:!0,get:function(){return E.EthereumRpcError}}),Object.defineProperty(R,"EthereumProviderError",{enumerable:!0,get:function(){return E.EthereumProviderError}});const U=utils$5;Object.defineProperty(R,"serializeError",{enumerable:!0,get:function(){return U.serializeError}}),Object.defineProperty(R,"getMessageFromCode",{enumerable:!0,get:function(){return U.getMessageFromCode}});const G=errors$1;Object.defineProperty(R,"ethErrors",{enumerable:!0,get:function(){return G.ethErrors}});const Y=errorConstants$1;Object.defineProperty(R,"errorCodes",{enumerable:!0,get:function(){return Y.errorCodes}})})(dist$5);var DiagnosticLogger={};Object.defineProperty(DiagnosticLogger,"__esModule",{value:!0});DiagnosticLogger.EVENTS=void 0;DiagnosticLogger.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var Session$1={},sha_js={exports:{}},safeBuffer={exports:{}},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$4=0,len=code$9.length;i$4<len;++i$4)lookup[i$4]=code$9[i$4],revLookup[code$9.charCodeAt(i$4)]=i$4;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(R){var E=R.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=R.indexOf("=");U===-1&&(U=E);var G=U===E?0:4-U%4;return[U,G]}function byteLength(R){var E=getLens(R),U=E[0],G=E[1];return(U+G)*3/4-G}function _byteLength(R,E,U){return(E+U)*3/4-U}function toByteArray(R){var E,U=getLens(R),G=U[0],Y=U[1],J=new Arr(_byteLength(R,G,Y)),Q=0,X=Y>0?G-4:G,Z;for(Z=0;Z<X;Z+=4)E=revLookup[R.charCodeAt(Z)]<<18|revLookup[R.charCodeAt(Z+1)]<<12|revLookup[R.charCodeAt(Z+2)]<<6|revLookup[R.charCodeAt(Z+3)],J[Q++]=E>>16&255,J[Q++]=E>>8&255,J[Q++]=E&255;return Y===2&&(E=revLookup[R.charCodeAt(Z)]<<2|revLookup[R.charCodeAt(Z+1)]>>4,J[Q++]=E&255),Y===1&&(E=revLookup[R.charCodeAt(Z)]<<10|revLookup[R.charCodeAt(Z+1)]<<4|revLookup[R.charCodeAt(Z+2)]>>2,J[Q++]=E>>8&255,J[Q++]=E&255),J}function tripletToBase64(R){return lookup[R>>18&63]+lookup[R>>12&63]+lookup[R>>6&63]+lookup[R&63]}function encodeChunk(R,E,U){for(var G,Y=[],J=E;J<U;J+=3)G=(R[J]<<16&16711680)+(R[J+1]<<8&65280)+(R[J+2]&255),Y.push(tripletToBase64(G));return Y.join("")}function fromByteArray(R){for(var E,U=R.length,G=U%3,Y=[],J=16383,Q=0,X=U-G;Q<X;Q+=J)Y.push(encodeChunk(R,Q,Q+J>X?X:Q+J));return G===1?(E=R[U-1],Y.push(lookup[E>>2]+lookup[E<<4&63]+"==")):G===2&&(E=(R[U-2]<<8)+R[U-1],Y.push(lookup[E>>10]+lookup[E>>4&63]+lookup[E<<2&63]+"=")),Y.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(R,E,U,G,Y){var J,Q,X=Y*8-G-1,Z=(1<<X)-1,ee=Z>>1,te=-7,ne=U?Y-1:0,oe=U?-1:1,ce=R[E+ne];for(ne+=oe,J=ce&(1<<-te)-1,ce>>=-te,te+=X;te>0;J=J*256+R[E+ne],ne+=oe,te-=8);for(Q=J&(1<<-te)-1,J>>=-te,te+=G;te>0;Q=Q*256+R[E+ne],ne+=oe,te-=8);if(J===0)J=1-ee;else{if(J===Z)return Q?NaN:(ce?-1:1)*(1/0);Q=Q+Math.pow(2,G),J=J-ee}return(ce?-1:1)*Q*Math.pow(2,J-G)};ieee754.write=function(R,E,U,G,Y,J){var Q,X,Z,ee=J*8-Y-1,te=(1<<ee)-1,ne=te>>1,oe=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=G?0:J-1,pe=G?1:-1,ye=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(X=isNaN(E)?1:0,Q=te):(Q=Math.floor(Math.log(E)/Math.LN2),E*(Z=Math.pow(2,-Q))<1&&(Q--,Z*=2),Q+ne>=1?E+=oe/Z:E+=oe*Math.pow(2,1-ne),E*Z>=2&&(Q++,Z/=2),Q+ne>=te?(X=0,Q=te):Q+ne>=1?(X=(E*Z-1)*Math.pow(2,Y),Q=Q+ne):(X=E*Math.pow(2,ne-1)*Math.pow(2,Y),Q=0));Y>=8;R[U+ce]=X&255,ce+=pe,X/=256,Y-=8);for(Q=Q<<Y|X,ee+=Y;ee>0;R[U+ce]=Q&255,ce+=pe,Q/=256,ee-=8);R[U+ce-pe]|=ye*128};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(R,E){var U=buffer$3,G=U.Buffer;function Y(Q,X){for(var Z in Q)X[Z]=Q[Z]}G.from&&G.alloc&&G.allocUnsafe&&G.allocUnsafeSlow?R.exports=U:(Y(U,E),E.Buffer=J);function J(Q,X,Z){return G(Q,X,Z)}J.prototype=Object.create(G.prototype),Y(G,J),J.from=function(Q,X,Z){if(typeof Q=="number")throw new TypeError("Argument must not be a number");return G(Q,X,Z)},J.alloc=function(Q,X,Z){if(typeof Q!="number")throw new TypeError("Argument must be a number");var ee=G(Q);return X!==void 0?typeof Z=="string"?ee.fill(X,Z):ee.fill(X):ee.fill(0),ee},J.allocUnsafe=function(Q){if(typeof Q!="number")throw new TypeError("Argument must be a number");return G(Q)},J.allocUnsafeSlow=function(Q){if(typeof Q!="number")throw new TypeError("Argument must be a number");return U.SlowBuffer(Q)}})(safeBuffer,safeBuffer.exports);var Buffer$7=safeBuffer.exports.Buffer;function Hash$6(R,E){this._block=Buffer$7.alloc(R),this._finalSize=E,this._blockSize=R,this._len=0}Hash$6.prototype.update=function(R,E){typeof R=="string"&&(E=E||"utf8",R=Buffer$7.from(R,E));for(var U=this._block,G=this._blockSize,Y=R.length,J=this._len,Q=0;Q<Y;){for(var X=J%G,Z=Math.min(Y-Q,G-X),ee=0;ee<Z;ee++)U[X+ee]=R[Q+ee];J+=Z,Q+=Z,J%G===0&&this._update(U)}return this._len+=Y,this};Hash$6.prototype.digest=function(R){var E=this._len%this._blockSize;this._block[E]=128,this._block.fill(0,E+1),E>=this._finalSize&&(this._update(this._block),this._block.fill(0));var U=this._len*8;if(U<=4294967295)this._block.writeUInt32BE(U,this._blockSize-4);else{var G=(U&4294967295)>>>0,Y=(U-G)/4294967296;this._block.writeUInt32BE(Y,this._blockSize-8),this._block.writeUInt32BE(G,this._blockSize-4)}this._update(this._block);var J=this._hash();return R?J.toString(R):J};Hash$6.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$2=Hash$6,inherits$5=inherits_browser.exports,Hash$5=hash$2,Buffer$6=safeBuffer.exports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$5.call(this,64,56)}inherits$5(Sha,Hash$5);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(R){return R<<5|R>>>27}function rotl30$1(R){return R<<30|R>>>2}function ft$1(R,E,U,G){return R===0?E&U|~E&G:R===2?E&U|E&G|U&G:E^U^G}Sha.prototype._update=function(R){for(var E=this._w,U=this._a|0,G=this._b|0,Y=this._c|0,J=this._d|0,Q=this._e|0,X=0;X<16;++X)E[X]=R.readInt32BE(X*4);for(;X<80;++X)E[X]=E[X-3]^E[X-8]^E[X-14]^E[X-16];for(var Z=0;Z<80;++Z){var ee=~~(Z/20),te=rotl5$1(U)+ft$1(ee,G,Y,J)+Q+E[Z]+K$3[ee]|0;Q=J,J=Y,Y=rotl30$1(G),G=U,U=te}this._a=U+this._a|0,this._b=G+this._b|0,this._c=Y+this._c|0,this._d=J+this._d|0,this._e=Q+this._e|0};Sha.prototype._hash=function(){var R=Buffer$6.allocUnsafe(20);return R.writeInt32BE(this._a|0,0),R.writeInt32BE(this._b|0,4),R.writeInt32BE(this._c|0,8),R.writeInt32BE(this._d|0,12),R.writeInt32BE(this._e|0,16),R};var sha$1=Sha,inherits$4=inherits_browser.exports,Hash$4=hash$2,Buffer$5=safeBuffer.exports.Buffer,K$2=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$4.call(this,64,56)}inherits$4(Sha1,Hash$4);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(R){return R<<1|R>>>31}function rotl5(R){return R<<5|R>>>27}function rotl30(R){return R<<30|R>>>2}function ft(R,E,U,G){return R===0?E&U|~E&G:R===2?E&U|E&G|U&G:E^U^G}Sha1.prototype._update=function(R){for(var E=this._w,U=this._a|0,G=this._b|0,Y=this._c|0,J=this._d|0,Q=this._e|0,X=0;X<16;++X)E[X]=R.readInt32BE(X*4);for(;X<80;++X)E[X]=rotl1(E[X-3]^E[X-8]^E[X-14]^E[X-16]);for(var Z=0;Z<80;++Z){var ee=~~(Z/20),te=rotl5(U)+ft(ee,G,Y,J)+Q+E[Z]+K$2[ee]|0;Q=J,J=Y,Y=rotl30(G),G=U,U=te}this._a=U+this._a|0,this._b=G+this._b|0,this._c=Y+this._c|0,this._d=J+this._d|0,this._e=Q+this._e|0};Sha1.prototype._hash=function(){var R=Buffer$5.allocUnsafe(20);return R.writeInt32BE(this._a|0,0),R.writeInt32BE(this._b|0,4),R.writeInt32BE(this._c|0,8),R.writeInt32BE(this._d|0,12),R.writeInt32BE(this._e|0,16),R};var sha1=Sha1,inherits$3=inherits_browser.exports,Hash$3=hash$2,Buffer$4=safeBuffer.exports.Buffer,K$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$3.call(this,64,56)}inherits$3(Sha256$1,Hash$3);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(R,E,U){return U^R&(E^U)}function maj$1(R,E,U){return R&E|U&(R|E)}function sigma0$1(R){return(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10)}function sigma1$1(R){return(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7)}function gamma0(R){return(R>>>7|R<<25)^(R>>>18|R<<14)^R>>>3}function gamma1(R){return(R>>>17|R<<15)^(R>>>19|R<<13)^R>>>10}Sha256$1.prototype._update=function(R){for(var E=this._w,U=this._a|0,G=this._b|0,Y=this._c|0,J=this._d|0,Q=this._e|0,X=this._f|0,Z=this._g|0,ee=this._h|0,te=0;te<16;++te)E[te]=R.readInt32BE(te*4);for(;te<64;++te)E[te]=gamma1(E[te-2])+E[te-7]+gamma0(E[te-15])+E[te-16]|0;for(var ne=0;ne<64;++ne){var oe=ee+sigma1$1(Q)+ch(Q,X,Z)+K$1[ne]+E[ne]|0,ce=sigma0$1(U)+maj$1(U,G,Y)|0;ee=Z,Z=X,X=Q,Q=J+oe|0,J=Y,Y=G,G=U,U=oe+ce|0}this._a=U+this._a|0,this._b=G+this._b|0,this._c=Y+this._c|0,this._d=J+this._d|0,this._e=Q+this._e|0,this._f=X+this._f|0,this._g=Z+this._g|0,this._h=ee+this._h|0};Sha256$1.prototype._hash=function(){var R=Buffer$4.allocUnsafe(32);return R.writeInt32BE(this._a,0),R.writeInt32BE(this._b,4),R.writeInt32BE(this._c,8),R.writeInt32BE(this._d,12),R.writeInt32BE(this._e,16),R.writeInt32BE(this._f,20),R.writeInt32BE(this._g,24),R.writeInt32BE(this._h,28),R};var sha256$1=Sha256$1,inherits$2=inherits_browser.exports,Sha256=sha256$1,Hash$2=hash$2,Buffer$3=safeBuffer.exports.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$2.call(this,64,56)}inherits$2(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var R=Buffer$3.allocUnsafe(28);return R.writeInt32BE(this._a,0),R.writeInt32BE(this._b,4),R.writeInt32BE(this._c,8),R.writeInt32BE(this._d,12),R.writeInt32BE(this._e,16),R.writeInt32BE(this._f,20),R.writeInt32BE(this._g,24),R};var sha224=Sha224,inherits$1=inherits_browser.exports,Hash$1=hash$2,Buffer$2=safeBuffer.exports.Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$1.call(this,128,112)}inherits$1(Sha512,Hash$1);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(R,E,U){return U^R&(E^U)}function maj(R,E,U){return R&E|U&(R|E)}function sigma0(R,E){return(R>>>28|E<<4)^(E>>>2|R<<30)^(E>>>7|R<<25)}function sigma1(R,E){return(R>>>14|E<<18)^(R>>>18|E<<14)^(E>>>9|R<<23)}function Gamma0(R,E){return(R>>>1|E<<31)^(R>>>8|E<<24)^R>>>7}function Gamma0l(R,E){return(R>>>1|E<<31)^(R>>>8|E<<24)^(R>>>7|E<<25)}function Gamma1(R,E){return(R>>>19|E<<13)^(E>>>29|R<<3)^R>>>6}function Gamma1l(R,E){return(R>>>19|E<<13)^(E>>>29|R<<3)^(R>>>6|E<<26)}function getCarry(R,E){return R>>>0<E>>>0?1:0}Sha512.prototype._update=function(R){for(var E=this._w,U=this._ah|0,G=this._bh|0,Y=this._ch|0,J=this._dh|0,Q=this._eh|0,X=this._fh|0,Z=this._gh|0,ee=this._hh|0,te=this._al|0,ne=this._bl|0,oe=this._cl|0,ce=this._dl|0,pe=this._el|0,ye=this._fl|0,Se=this._gl|0,ge=this._hl|0,_e=0;_e<32;_e+=2)E[_e]=R.readInt32BE(_e*4),E[_e+1]=R.readInt32BE(_e*4+4);for(;_e<160;_e+=2){var Te=E[_e-30],Ee=E[_e-15*2+1],Re=Gamma0(Te,Ee),Ae=Gamma0l(Ee,Te);Te=E[_e-2*2],Ee=E[_e-2*2+1];var Ie=Gamma1(Te,Ee),Oe=Gamma1l(Ee,Te),Pe=E[_e-7*2],Le=E[_e-7*2+1],Me=E[_e-16*2],ue=E[_e-16*2+1],ae=Ae+Le|0,se=Re+Pe+getCarry(ae,Ae)|0;ae=ae+Oe|0,se=se+Ie+getCarry(ae,Oe)|0,ae=ae+ue|0,se=se+Me+getCarry(ae,ue)|0,E[_e]=se,E[_e+1]=ae}for(var le=0;le<160;le+=2){se=E[le],ae=E[le+1];var fe=maj(U,G,Y),be=maj(te,ne,oe),ve=sigma0(U,te),xe=sigma0(te,U),he=sigma1(Q,pe),me=sigma1(pe,Q),de=K[le],Ce=K[le+1],Fe=Ch(Q,X,Z),we=Ch(pe,ye,Se),ke=ge+me|0,Ne=ee+he+getCarry(ke,ge)|0;ke=ke+we|0,Ne=Ne+Fe+getCarry(ke,we)|0,ke=ke+Ce|0,Ne=Ne+de+getCarry(ke,Ce)|0,ke=ke+ae|0,Ne=Ne+se+getCarry(ke,ae)|0;var He=xe+be|0,Ue=ve+fe+getCarry(He,xe)|0;ee=Z,ge=Se,Z=X,Se=ye,X=Q,ye=pe,pe=ce+ke|0,Q=J+Ne+getCarry(pe,ce)|0,J=Y,ce=oe,Y=G,oe=ne,G=U,ne=te,te=ke+He|0,U=Ne+Ue+getCarry(te,ke)|0}this._al=this._al+te|0,this._bl=this._bl+ne|0,this._cl=this._cl+oe|0,this._dl=this._dl+ce|0,this._el=this._el+pe|0,this._fl=this._fl+ye|0,this._gl=this._gl+Se|0,this._hl=this._hl+ge|0,this._ah=this._ah+U+getCarry(this._al,te)|0,this._bh=this._bh+G+getCarry(this._bl,ne)|0,this._ch=this._ch+Y+getCarry(this._cl,oe)|0,this._dh=this._dh+J+getCarry(this._dl,ce)|0,this._eh=this._eh+Q+getCarry(this._el,pe)|0,this._fh=this._fh+X+getCarry(this._fl,ye)|0,this._gh=this._gh+Z+getCarry(this._gl,Se)|0,this._hh=this._hh+ee+getCarry(this._hl,ge)|0};Sha512.prototype._hash=function(){var R=Buffer$2.allocUnsafe(64);function E(U,G,Y){R.writeInt32BE(U,Y),R.writeInt32BE(G,Y+4)}return E(this._ah,this._al,0),E(this._bh,this._bl,8),E(this._ch,this._cl,16),E(this._dh,this._dl,24),E(this._eh,this._el,32),E(this._fh,this._fl,40),E(this._gh,this._gl,48),E(this._hh,this._hl,56),R};var sha512$1=Sha512,inherits=inherits_browser.exports,SHA512=sha512$1,Hash=hash$2,Buffer$1=safeBuffer.exports.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var R=Buffer$1.allocUnsafe(48);function E(U,G,Y){R.writeInt32BE(U,Y),R.writeInt32BE(G,Y+4)}return E(this._ah,this._al,0),E(this._bh,this._bl,8),E(this._ch,this._cl,16),E(this._dh,this._dl,24),E(this._eh,this._el,32),E(this._fh,this._fl,40),R};var sha384=Sha384,exports$1=sha_js.exports=function(E){E=E.toLowerCase();var U=exports$1[E];if(!U)throw new Error(E+" is not supported (we accept pull requests)");return new U};exports$1.sha=sha$1;exports$1.sha1=sha1;exports$1.sha224=sha224;exports$1.sha256=sha256$1;exports$1.sha384=sha384;exports$1.sha512=sha512$1;var util$8={},shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var E={},U=Symbol("test"),G=Object(U);if(typeof U=="string"||Object.prototype.toString.call(U)!=="[object Symbol]"||Object.prototype.toString.call(G)!=="[object Symbol]")return!1;var Y=42;E[U]=Y;for(U in E)return!1;if(typeof Object.keys=="function"&&Object.keys(E).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(E).length!==0)return!1;var J=Object.getOwnPropertySymbols(E);if(J.length!==1||J[0]!==U||!Object.prototype.propertyIsEnumerable.call(E,U))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Q=Object.getOwnPropertyDescriptor(E,U);if(Q.value!==Y||Q.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice$1=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(E){var U=this;if(typeof U!="function"||toStr$1.call(U)!==funcType)throw new TypeError(ERROR_MESSAGE+U);for(var G=slice$1.call(arguments,1),Y,J=function(){if(this instanceof Y){var te=U.apply(this,G.concat(slice$1.call(arguments)));return Object(te)===te?te:this}else return U.apply(E,G.concat(slice$1.call(arguments)))},Q=Math.max(0,U.length-G.length),X=[],Z=0;Z<Q;Z++)X.push("$"+Z);if(Y=Function("binder","return function ("+X.join(",")+"){ return binder.apply(this,arguments); }")(J),U.prototype){var ee=function(){};ee.prototype=U.prototype,Y.prototype=new ee,ee.prototype=null}return Y},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$3=functionBind,src$2=bind$3.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(R){try{return $Function('"use strict"; return ('+R+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),getProto=Object.getPrototypeOf||function(R){return R.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet},doEval=function R(E){var U;if(E==="%AsyncFunction%")U=getEvalledConstructor("async function () {}");else if(E==="%GeneratorFunction%")U=getEvalledConstructor("function* () {}");else if(E==="%AsyncGeneratorFunction%")U=getEvalledConstructor("async function* () {}");else if(E==="%AsyncGenerator%"){var G=R("%AsyncGeneratorFunction%");G&&(U=G.prototype)}else if(E==="%AsyncIteratorPrototype%"){var Y=R("%AsyncGenerator%");Y&&(U=getProto(Y.prototype))}return INTRINSICS[E]=U,U},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$2=functionBind,hasOwn$1=src$2,$concat$1=bind$2.call(Function.call,Array.prototype.concat),$spliceApply=bind$2.call(Function.apply,Array.prototype.splice),$replace$1=bind$2.call(Function.call,String.prototype.replace),$strSlice=bind$2.call(Function.call,String.prototype.slice),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(E){var U=$strSlice(E,0,1),G=$strSlice(E,-1);if(U==="%"&&G!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(G==="%"&&U!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var Y=[];return $replace$1(E,rePropName,function(J,Q,X,Z){Y[Y.length]=X?$replace$1(Z,reEscapeChar,"$1"):Q||J}),Y},getBaseIntrinsic=function(E,U){var G=E,Y;if(hasOwn$1(LEGACY_ALIASES,G)&&(Y=LEGACY_ALIASES[G],G="%"+Y[0]+"%"),hasOwn$1(INTRINSICS,G)){var J=INTRINSICS[G];if(J===needsEval&&(J=doEval(G)),typeof J>"u"&&!U)throw new $TypeError$1("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:Y,name:G,value:J}}throw new $SyntaxError("intrinsic "+E+" does not exist!")},getIntrinsic=function(E,U){if(typeof E!="string"||E.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof U!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');var G=stringToPath(E),Y=G.length>0?G[0]:"",J=getBaseIntrinsic("%"+Y+"%",U),Q=J.name,X=J.value,Z=!1,ee=J.alias;ee&&(Y=ee[0],$spliceApply(G,$concat$1([0,1],ee)));for(var te=1,ne=!0;te<G.length;te+=1){var oe=G[te],ce=$strSlice(oe,0,1),pe=$strSlice(oe,-1);if((ce==='"'||ce==="'"||ce==="`"||pe==='"'||pe==="'"||pe==="`")&&ce!==pe)throw new $SyntaxError("property names with quotes must have matching quotes");if((oe==="constructor"||!ne)&&(Z=!0),Y+="."+oe,Q="%"+Y+"%",hasOwn$1(INTRINSICS,Q))X=INTRINSICS[Q];else if(X!=null){if(!(oe in X)){if(!U)throw new $TypeError$1("base intrinsic for "+E+" exists, but the property is not available.");return}if($gOPD&&te+1>=G.length){var ye=$gOPD(X,oe);ne=!!ye,ne&&"get"in ye&&!("originalValue"in ye.get)?X=ye.get:X=X[oe]}else ne=hasOwn$1(X,oe),X=X[oe];ne&&!Z&&(INTRINSICS[Q]=X)}}return X},callBind$1={exports:{}};(function(R){var E=functionBind,U=getIntrinsic,G=U("%Function.prototype.apply%"),Y=U("%Function.prototype.call%"),J=U("%Reflect.apply%",!0)||E.call(Y,G),Q=U("%Object.getOwnPropertyDescriptor%",!0),X=U("%Object.defineProperty%",!0),Z=U("%Math.max%");if(X)try{X({},"a",{value:1})}catch{X=null}R.exports=function(ne){var oe=J(E,Y,arguments);if(Q&&X){var ce=Q(oe,"length");ce.configurable&&X(oe,"length",{value:1+Z(0,ne.length-(arguments.length-1))})}return oe};var ee=function(){return J(E,G,arguments)};X?X(R.exports,"apply",{value:ee}):R.exports.apply=ee})(callBind$1);var GetIntrinsic$1=getIntrinsic,callBind=callBind$1.exports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(E,U){var G=GetIntrinsic$1(E,!!U);return typeof G=="function"&&$indexOf(E,".prototype.")>-1?callBind(G):G},hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString$1=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(R){return R.__proto__}:null);function addNumericSeparator(R,E){if(R===1/0||R===-1/0||R!==R||R&&R>-1e3&&R<1e3||$test.call(/e/,E))return E;var U=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof R=="number"){var G=R<0?-$floor(-R):$floor(R);if(G!==R){var Y=String(G),J=$slice.call(E,Y.length+1);return $replace.call(Y,U,"$&_")+"."+$replace.call($replace.call(J,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(E,U,"$&_")}var inspectCustom=require$$3$1.custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function R(E,U,G,Y){var J=U||{};if(has$3(J,"quoteStyle")&&J.quoteStyle!=="single"&&J.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(J,"maxStringLength")&&(typeof J.maxStringLength=="number"?J.maxStringLength<0&&J.maxStringLength!==1/0:J.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Q=has$3(J,"customInspect")?J.customInspect:!0;if(typeof Q!="boolean"&&Q!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(J,"indent")&&J.indent!==null&&J.indent!=="	"&&!(parseInt(J.indent,10)===J.indent&&J.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(J,"numericSeparator")&&typeof J.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var X=J.numericSeparator;if(typeof E>"u")return"undefined";if(E===null)return"null";if(typeof E=="boolean")return E?"true":"false";if(typeof E=="string")return inspectString(E,J);if(typeof E=="number"){if(E===0)return 1/0/E>0?"0":"-0";var Z=String(E);return X?addNumericSeparator(E,Z):Z}if(typeof E=="bigint"){var ee=String(E)+"n";return X?addNumericSeparator(E,ee):ee}var te=typeof J.depth>"u"?5:J.depth;if(typeof G>"u"&&(G=0),G>=te&&te>0&&typeof E=="object")return isArray$5(E)?"[Array]":"[Object]";var ne=getIndent(J,G);if(typeof Y>"u")Y=[];else if(indexOf(Y,E)>=0)return"[Circular]";function oe(ae,se,le){if(se&&(Y=$arrSlice.call(Y),Y.push(se)),le){var fe={depth:J.depth};return has$3(J,"quoteStyle")&&(fe.quoteStyle=J.quoteStyle),R(ae,fe,G+1,Y)}return R(ae,J,G+1,Y)}if(typeof E=="function"){var ce=nameOf(E),pe=arrObjKeys(E,oe);return"[Function"+(ce?": "+ce:" (anonymous)")+"]"+(pe.length>0?" { "+$join.call(pe,", ")+" }":"")}if(isSymbol(E)){var ye=hasShammedSymbols?$replace.call(String(E),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(E);return typeof E=="object"&&!hasShammedSymbols?markBoxed(ye):ye}if(isElement$3(E)){for(var Se="<"+$toLowerCase.call(String(E.nodeName)),ge=E.attributes||[],_e=0;_e<ge.length;_e++)Se+=" "+ge[_e].name+"="+wrapQuotes(quote(ge[_e].value),"double",J);return Se+=">",E.childNodes&&E.childNodes.length&&(Se+="..."),Se+="</"+$toLowerCase.call(String(E.nodeName))+">",Se}if(isArray$5(E)){if(E.length===0)return"[]";var Te=arrObjKeys(E,oe);return ne&&!singleLineValues(Te)?"["+indentedJoin(Te,ne)+"]":"[ "+$join.call(Te,", ")+" ]"}if(isError$1(E)){var Ee=arrObjKeys(E,oe);return"cause"in E&&!isEnumerable.call(E,"cause")?"{ ["+String(E)+"] "+$join.call($concat.call("[cause]: "+oe(E.cause),Ee),", ")+" }":Ee.length===0?"["+String(E)+"]":"{ ["+String(E)+"] "+$join.call(Ee,", ")+" }"}if(typeof E=="object"&&Q){if(inspectSymbol&&typeof E[inspectSymbol]=="function")return E[inspectSymbol]();if(Q!=="symbol"&&typeof E.inspect=="function")return E.inspect()}if(isMap(E)){var Re=[];return mapForEach.call(E,function(ae,se){Re.push(oe(se,E,!0)+" => "+oe(ae,E))}),collectionOf("Map",mapSize.call(E),Re,ne)}if(isSet(E)){var Ae=[];return setForEach.call(E,function(ae){Ae.push(oe(ae,E))}),collectionOf("Set",setSize.call(E),Ae,ne)}if(isWeakMap(E))return weakCollectionOf("WeakMap");if(isWeakSet(E))return weakCollectionOf("WeakSet");if(isWeakRef(E))return weakCollectionOf("WeakRef");if(isNumber$1(E))return markBoxed(oe(Number(E)));if(isBigInt(E))return markBoxed(oe(bigIntValueOf.call(E)));if(isBoolean(E))return markBoxed(booleanValueOf.call(E));if(isString$1(E))return markBoxed(oe(String(E)));if(!isDate$1(E)&&!isRegExp$3(E)){var Ie=arrObjKeys(E,oe),Oe=gPO?gPO(E)===Object.prototype:E instanceof Object||E.constructor===Object,Pe=E instanceof Object?"":"null prototype",Le=!Oe&&toStringTag&&Object(E)===E&&toStringTag in E?$slice.call(toStr(E),8,-1):Pe?"Object":"",Me=Oe||typeof E.constructor!="function"?"":E.constructor.name?E.constructor.name+" ":"",ue=Me+(Le||Pe?"["+$join.call($concat.call([],Le||[],Pe||[]),": ")+"] ":"");return Ie.length===0?ue+"{}":ne?ue+"{"+indentedJoin(Ie,ne)+"}":ue+"{ "+$join.call(Ie,", ")+" }"}return String(E)};function wrapQuotes(R,E,U){var G=(U.quoteStyle||E)==="double"?'"':"'";return G+R+G}function quote(R){return $replace.call(String(R),/"/g,"&quot;")}function isArray$5(R){return toStr(R)==="[object Array]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isDate$1(R){return toStr(R)==="[object Date]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isRegExp$3(R){return toStr(R)==="[object RegExp]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isError$1(R){return toStr(R)==="[object Error]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isString$1(R){return toStr(R)==="[object String]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isNumber$1(R){return toStr(R)==="[object Number]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isBoolean(R){return toStr(R)==="[object Boolean]"&&(!toStringTag||!(typeof R=="object"&&toStringTag in R))}function isSymbol(R){if(hasShammedSymbols)return R&&typeof R=="object"&&R instanceof Symbol;if(typeof R=="symbol")return!0;if(!R||typeof R!="object"||!symToString)return!1;try{return symToString.call(R),!0}catch{}return!1}function isBigInt(R){if(!R||typeof R!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(R),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(R){return R in this};function has$3(R,E){return hasOwn.call(R,E)}function toStr(R){return objectToString$1.call(R)}function nameOf(R){if(R.name)return R.name;var E=$match.call(functionToString.call(R),/^function\s*([\w$]+)/);return E?E[1]:null}function indexOf(R,E){if(R.indexOf)return R.indexOf(E);for(var U=0,G=R.length;U<G;U++)if(R[U]===E)return U;return-1}function isMap(R){if(!mapSize||!R||typeof R!="object")return!1;try{mapSize.call(R);try{setSize.call(R)}catch{return!0}return R instanceof Map}catch{}return!1}function isWeakMap(R){if(!weakMapHas||!R||typeof R!="object")return!1;try{weakMapHas.call(R,weakMapHas);try{weakSetHas.call(R,weakSetHas)}catch{return!0}return R instanceof WeakMap}catch{}return!1}function isWeakRef(R){if(!weakRefDeref||!R||typeof R!="object")return!1;try{return weakRefDeref.call(R),!0}catch{}return!1}function isSet(R){if(!setSize||!R||typeof R!="object")return!1;try{setSize.call(R);try{mapSize.call(R)}catch{return!0}return R instanceof Set}catch{}return!1}function isWeakSet(R){if(!weakSetHas||!R||typeof R!="object")return!1;try{weakSetHas.call(R,weakSetHas);try{weakMapHas.call(R,weakMapHas)}catch{return!0}return R instanceof WeakSet}catch{}return!1}function isElement$3(R){return!R||typeof R!="object"?!1:typeof HTMLElement<"u"&&R instanceof HTMLElement?!0:typeof R.nodeName=="string"&&typeof R.getAttribute=="function"}function inspectString(R,E){if(R.length>E.maxStringLength){var U=R.length-E.maxStringLength,G="... "+U+" more character"+(U>1?"s":"");return inspectString($slice.call(R,0,E.maxStringLength),E)+G}var Y=$replace.call($replace.call(R,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(Y,"single",E)}function lowbyte(R){var E=R.charCodeAt(0),U={8:"b",9:"t",10:"n",12:"f",13:"r"}[E];return U?"\\"+U:"\\x"+(E<16?"0":"")+$toUpperCase.call(E.toString(16))}function markBoxed(R){return"Object("+R+")"}function weakCollectionOf(R){return R+" { ? }"}function collectionOf(R,E,U,G){var Y=G?indentedJoin(U,G):$join.call(U,", ");return R+" ("+E+") {"+Y+"}"}function singleLineValues(R){for(var E=0;E<R.length;E++)if(indexOf(R[E],`
`)>=0)return!1;return!0}function getIndent(R,E){var U;if(R.indent==="	")U="	";else if(typeof R.indent=="number"&&R.indent>0)U=$join.call(Array(R.indent+1)," ");else return null;return{base:U,prev:$join.call(Array(E+1),U)}}function indentedJoin(R,E){if(R.length===0)return"";var U=`
`+E.prev+E.base;return U+$join.call(R,","+U)+`
`+E.prev}function arrObjKeys(R,E){var U=isArray$5(R),G=[];if(U){G.length=R.length;for(var Y=0;Y<R.length;Y++)G[Y]=has$3(R,Y)?E(R[Y],R):""}var J=typeof gOPS=="function"?gOPS(R):[],Q;if(hasShammedSymbols){Q={};for(var X=0;X<J.length;X++)Q["$"+J[X]]=J[X]}for(var Z in R)!has$3(R,Z)||U&&String(Number(Z))===Z&&Z<R.length||hasShammedSymbols&&Q["$"+Z]instanceof Symbol||($test.call(/[^\w$]/,Z)?G.push(E(Z,R)+": "+E(R[Z],R)):G.push(Z+": "+E(R[Z],R)));if(typeof gOPS=="function")for(var ee=0;ee<J.length;ee++)isEnumerable.call(R,J[ee])&&G.push("["+E(J[ee])+"]: "+E(R[J[ee]],R));return G}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect$1=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(R,E){for(var U=R,G;(G=U.next)!==null;U=G)if(G.key===E)return U.next=G.next,G.next=R.next,R.next=G,G},listGet=function(R,E){var U=listGetNode(R,E);return U&&U.value},listSet=function(R,E,U){var G=listGetNode(R,E);G?G.value=U:R.next={key:E,next:R.next,value:U}},listHas=function(R,E){return!!listGetNode(R,E)},sideChannel=function(){var E,U,G,Y={assert:function(J){if(!Y.has(J))throw new $TypeError("Side channel does not contain "+inspect$1(J))},get:function(J){if($WeakMap&&J&&(typeof J=="object"||typeof J=="function")){if(E)return $weakMapGet(E,J)}else if($Map){if(U)return $mapGet(U,J)}else if(G)return listGet(G,J)},has:function(J){if($WeakMap&&J&&(typeof J=="object"||typeof J=="function")){if(E)return $weakMapHas(E,J)}else if($Map){if(U)return $mapHas(U,J)}else if(G)return listHas(G,J);return!1},set:function(J,Q){$WeakMap&&J&&(typeof J=="object"||typeof J=="function")?(E||(E=new $WeakMap),$weakMapSet(E,J,Q)):$Map?(U||(U=new $Map),$mapSet(U,J,Q)):(G||(G={key:{},next:null}),listSet(G,J,Q))}};return Y},replace$1=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(R){return replace$1.call(R,percentTwenties,"+")},RFC3986:function(R){return String(R)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$4=Array.isArray,hexTable=function(){for(var R=[],E=0;E<256;++E)R.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return R}(),compactQueue=function(E){for(;E.length>1;){var U=E.pop(),G=U.obj[U.prop];if(isArray$4(G)){for(var Y=[],J=0;J<G.length;++J)typeof G[J]<"u"&&Y.push(G[J]);U.obj[U.prop]=Y}}},arrayToObject=function(E,U){for(var G=U&&U.plainObjects?Object.create(null):{},Y=0;Y<E.length;++Y)typeof E[Y]<"u"&&(G[Y]=E[Y]);return G},merge$5=function R(E,U,G){if(!U)return E;if(typeof U!="object"){if(isArray$4(E))E.push(U);else if(E&&typeof E=="object")(G&&(G.plainObjects||G.allowPrototypes)||!has$2.call(Object.prototype,U))&&(E[U]=!0);else return[E,U];return E}if(!E||typeof E!="object")return[E].concat(U);var Y=E;return isArray$4(E)&&!isArray$4(U)&&(Y=arrayToObject(E,G)),isArray$4(E)&&isArray$4(U)?(U.forEach(function(J,Q){if(has$2.call(E,Q)){var X=E[Q];X&&typeof X=="object"&&J&&typeof J=="object"?E[Q]=R(X,J,G):E.push(J)}else E[Q]=J}),E):Object.keys(U).reduce(function(J,Q){var X=U[Q];return has$2.call(J,Q)?J[Q]=R(J[Q],X,G):J[Q]=X,J},Y)},assign$2=function(E,U){return Object.keys(U).reduce(function(G,Y){return G[Y]=U[Y],G},E)},decode$h=function(R,E,U){var G=R.replace(/\+/g," ");if(U==="iso-8859-1")return G.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(G)}catch{return G}},encode$g=function(E,U,G,Y,J){if(E.length===0)return E;var Q=E;if(typeof E=="symbol"?Q=Symbol.prototype.toString.call(E):typeof E!="string"&&(Q=String(E)),G==="iso-8859-1")return escape(Q).replace(/%u[0-9a-f]{4}/gi,function(te){return"%26%23"+parseInt(te.slice(2),16)+"%3B"});for(var X="",Z=0;Z<Q.length;++Z){var ee=Q.charCodeAt(Z);if(ee===45||ee===46||ee===95||ee===126||ee>=48&&ee<=57||ee>=65&&ee<=90||ee>=97&&ee<=122||J===formats$2.RFC1738&&(ee===40||ee===41)){X+=Q.charAt(Z);continue}if(ee<128){X=X+hexTable[ee];continue}if(ee<2048){X=X+(hexTable[192|ee>>6]+hexTable[128|ee&63]);continue}if(ee<55296||ee>=57344){X=X+(hexTable[224|ee>>12]+hexTable[128|ee>>6&63]+hexTable[128|ee&63]);continue}Z+=1,ee=65536+((ee&1023)<<10|Q.charCodeAt(Z)&1023),X+=hexTable[240|ee>>18]+hexTable[128|ee>>12&63]+hexTable[128|ee>>6&63]+hexTable[128|ee&63]}return X},compact=function(E){for(var U=[{obj:{o:E},prop:"o"}],G=[],Y=0;Y<U.length;++Y)for(var J=U[Y],Q=J.obj[J.prop],X=Object.keys(Q),Z=0;Z<X.length;++Z){var ee=X[Z],te=Q[ee];typeof te=="object"&&te!==null&&G.indexOf(te)===-1&&(U.push({obj:Q,prop:ee}),G.push(te))}return compactQueue(U),E},isRegExp$2=function(E){return Object.prototype.toString.call(E)==="[object RegExp]"},isBuffer$2=function(E){return!E||typeof E!="object"?!1:!!(E.constructor&&E.constructor.isBuffer&&E.constructor.isBuffer(E))},combine=function(E,U){return[].concat(E,U)},maybeMap=function(E,U){if(isArray$4(E)){for(var G=[],Y=0;Y<E.length;Y+=1)G.push(U(E[Y]));return G}return U(E)},utils$4={arrayToObject,assign:assign$2,combine,compact,decode:decode$h,encode:encode$g,isBuffer:isBuffer$2,isRegExp:isRegExp$2,maybeMap,merge:merge$5},getSideChannel=sideChannel,utils$3=utils$4,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(E){return E+"[]"},comma:"comma",indices:function(E,U){return E+"["+U+"]"},repeat:function(E){return E}},isArray$3=Array.isArray,split$1=String.prototype.split,push$1=Array.prototype.push,pushToArray=function(R,E){push$1.apply(R,isArray$3(E)?E:[E])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$4={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$3.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(E){return toISO.call(E)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(E){return typeof E=="string"||typeof E=="number"||typeof E=="boolean"||typeof E=="symbol"||typeof E=="bigint"},sentinel={},stringify$2=function R(E,U,G,Y,J,Q,X,Z,ee,te,ne,oe,ce,pe,ye,Se){for(var ge=E,_e=Se,Te=0,Ee=!1;(_e=_e.get(sentinel))!==void 0&&!Ee;){var Re=_e.get(E);if(Te+=1,typeof Re<"u"){if(Re===Te)throw new RangeError("Cyclic object value");Ee=!0}typeof _e.get(sentinel)>"u"&&(Te=0)}if(typeof Z=="function"?ge=Z(U,ge):ge instanceof Date?ge=ne(ge):G==="comma"&&isArray$3(ge)&&(ge=utils$3.maybeMap(ge,function(xe){return xe instanceof Date?ne(xe):xe})),ge===null){if(J)return X&&!pe?X(U,defaults$4.encoder,ye,"key",oe):U;ge=""}if(isNonNullishPrimitive(ge)||utils$3.isBuffer(ge)){if(X){var Ae=pe?U:X(U,defaults$4.encoder,ye,"key",oe);if(G==="comma"&&pe){for(var Ie=split$1.call(String(ge),","),Oe="",Pe=0;Pe<Ie.length;++Pe)Oe+=(Pe===0?"":",")+ce(X(Ie[Pe],defaults$4.encoder,ye,"value",oe));return[ce(Ae)+(Y&&isArray$3(ge)&&Ie.length===1?"[]":"")+"="+Oe]}return[ce(Ae)+"="+ce(X(ge,defaults$4.encoder,ye,"value",oe))]}return[ce(U)+"="+ce(String(ge))]}var Le=[];if(typeof ge>"u")return Le;var Me;if(G==="comma"&&isArray$3(ge))Me=[{value:ge.length>0?ge.join(",")||null:void 0}];else if(isArray$3(Z))Me=Z;else{var ue=Object.keys(ge);Me=ee?ue.sort(ee):ue}for(var ae=Y&&isArray$3(ge)&&ge.length===1?U+"[]":U,se=0;se<Me.length;++se){var le=Me[se],fe=typeof le=="object"&&typeof le.value<"u"?le.value:ge[le];if(!(Q&&fe===null)){var be=isArray$3(ge)?typeof G=="function"?G(ae,le):ae:ae+(te?"."+le:"["+le+"]");Se.set(E,Te);var ve=getSideChannel();ve.set(sentinel,Se),pushToArray(Le,R(fe,be,G,Y,J,Q,X,Z,ee,te,ne,oe,ce,pe,ye,ve))}}return Le},normalizeStringifyOptions=function(E){if(!E)return defaults$4;if(E.encoder!==null&&typeof E.encoder<"u"&&typeof E.encoder!="function")throw new TypeError("Encoder has to be a function.");var U=E.charset||defaults$4.charset;if(typeof E.charset<"u"&&E.charset!=="utf-8"&&E.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var G=formats$1.default;if(typeof E.format<"u"){if(!has$1.call(formats$1.formatters,E.format))throw new TypeError("Unknown format option provided.");G=E.format}var Y=formats$1.formatters[G],J=defaults$4.filter;return(typeof E.filter=="function"||isArray$3(E.filter))&&(J=E.filter),{addQueryPrefix:typeof E.addQueryPrefix=="boolean"?E.addQueryPrefix:defaults$4.addQueryPrefix,allowDots:typeof E.allowDots>"u"?defaults$4.allowDots:!!E.allowDots,charset:U,charsetSentinel:typeof E.charsetSentinel=="boolean"?E.charsetSentinel:defaults$4.charsetSentinel,delimiter:typeof E.delimiter>"u"?defaults$4.delimiter:E.delimiter,encode:typeof E.encode=="boolean"?E.encode:defaults$4.encode,encoder:typeof E.encoder=="function"?E.encoder:defaults$4.encoder,encodeValuesOnly:typeof E.encodeValuesOnly=="boolean"?E.encodeValuesOnly:defaults$4.encodeValuesOnly,filter:J,format:G,formatter:Y,serializeDate:typeof E.serializeDate=="function"?E.serializeDate:defaults$4.serializeDate,skipNulls:typeof E.skipNulls=="boolean"?E.skipNulls:defaults$4.skipNulls,sort:typeof E.sort=="function"?E.sort:null,strictNullHandling:typeof E.strictNullHandling=="boolean"?E.strictNullHandling:defaults$4.strictNullHandling}},stringify_1=function(R,E){var U=R,G=normalizeStringifyOptions(E),Y,J;typeof G.filter=="function"?(J=G.filter,U=J("",U)):isArray$3(G.filter)&&(J=G.filter,Y=J);var Q=[];if(typeof U!="object"||U===null)return"";var X;E&&E.arrayFormat in arrayPrefixGenerators?X=E.arrayFormat:E&&"indices"in E?X=E.indices?"indices":"repeat":X="indices";var Z=arrayPrefixGenerators[X];if(E&&"commaRoundTrip"in E&&typeof E.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ee=Z==="comma"&&E&&E.commaRoundTrip;Y||(Y=Object.keys(U)),G.sort&&Y.sort(G.sort);for(var te=getSideChannel(),ne=0;ne<Y.length;++ne){var oe=Y[ne];G.skipNulls&&U[oe]===null||pushToArray(Q,stringify$2(U[oe],oe,Z,ee,G.strictNullHandling,G.skipNulls,G.encode?G.encoder:null,G.filter,G.sort,G.allowDots,G.serializeDate,G.format,G.formatter,G.encodeValuesOnly,G.charset,te))}var ce=Q.join(G.delimiter),pe=G.addQueryPrefix===!0?"?":"";return G.charsetSentinel&&(G.charset==="iso-8859-1"?pe+="utf8=%26%2310003%3B&":pe+="utf8=%E2%9C%93&"),ce.length>0?pe+ce:""},utils$2=utils$4,has=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,defaults$3={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$2.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(R){return R.replace(/&#(\d+);/g,function(E,U){return String.fromCharCode(parseInt(U,10))})},parseArrayValue=function(R,E){return R&&typeof R=="string"&&E.comma&&R.indexOf(",")>-1?R.split(","):R},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(E,U){var G={},Y=U.ignoreQueryPrefix?E.replace(/^\?/,""):E,J=U.parameterLimit===1/0?void 0:U.parameterLimit,Q=Y.split(U.delimiter,J),X=-1,Z,ee=U.charset;if(U.charsetSentinel)for(Z=0;Z<Q.length;++Z)Q[Z].indexOf("utf8=")===0&&(Q[Z]===charsetSentinel?ee="utf-8":Q[Z]===isoSentinel&&(ee="iso-8859-1"),X=Z,Z=Q.length);for(Z=0;Z<Q.length;++Z)if(Z!==X){var te=Q[Z],ne=te.indexOf("]="),oe=ne===-1?te.indexOf("="):ne+1,ce,pe;oe===-1?(ce=U.decoder(te,defaults$3.decoder,ee,"key"),pe=U.strictNullHandling?null:""):(ce=U.decoder(te.slice(0,oe),defaults$3.decoder,ee,"key"),pe=utils$2.maybeMap(parseArrayValue(te.slice(oe+1),U),function(ye){return U.decoder(ye,defaults$3.decoder,ee,"value")})),pe&&U.interpretNumericEntities&&ee==="iso-8859-1"&&(pe=interpretNumericEntities(pe)),te.indexOf("[]=")>-1&&(pe=isArray$2(pe)?[pe]:pe),has.call(G,ce)?G[ce]=utils$2.combine(G[ce],pe):G[ce]=pe}return G},parseObject=function(R,E,U,G){for(var Y=G?E:parseArrayValue(E,U),J=R.length-1;J>=0;--J){var Q,X=R[J];if(X==="[]"&&U.parseArrays)Q=[].concat(Y);else{Q=U.plainObjects?Object.create(null):{};var Z=X.charAt(0)==="["&&X.charAt(X.length-1)==="]"?X.slice(1,-1):X,ee=parseInt(Z,10);!U.parseArrays&&Z===""?Q={0:Y}:!isNaN(ee)&&X!==Z&&String(ee)===Z&&ee>=0&&U.parseArrays&&ee<=U.arrayLimit?(Q=[],Q[ee]=Y):Z!=="__proto__"&&(Q[Z]=Y)}Y=Q}return Y},parseKeys=function(E,U,G,Y){if(!!E){var J=G.allowDots?E.replace(/\.([^.[]+)/g,"[$1]"):E,Q=/(\[[^[\]]*])/,X=/(\[[^[\]]*])/g,Z=G.depth>0&&Q.exec(J),ee=Z?J.slice(0,Z.index):J,te=[];if(ee){if(!G.plainObjects&&has.call(Object.prototype,ee)&&!G.allowPrototypes)return;te.push(ee)}for(var ne=0;G.depth>0&&(Z=X.exec(J))!==null&&ne<G.depth;){if(ne+=1,!G.plainObjects&&has.call(Object.prototype,Z[1].slice(1,-1))&&!G.allowPrototypes)return;te.push(Z[1])}return Z&&te.push("["+J.slice(Z.index)+"]"),parseObject(te,U,G,Y)}},normalizeParseOptions=function(E){if(!E)return defaults$3;if(E.decoder!==null&&E.decoder!==void 0&&typeof E.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof E.charset<"u"&&E.charset!=="utf-8"&&E.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=typeof E.charset>"u"?defaults$3.charset:E.charset;return{allowDots:typeof E.allowDots>"u"?defaults$3.allowDots:!!E.allowDots,allowPrototypes:typeof E.allowPrototypes=="boolean"?E.allowPrototypes:defaults$3.allowPrototypes,allowSparse:typeof E.allowSparse=="boolean"?E.allowSparse:defaults$3.allowSparse,arrayLimit:typeof E.arrayLimit=="number"?E.arrayLimit:defaults$3.arrayLimit,charset:U,charsetSentinel:typeof E.charsetSentinel=="boolean"?E.charsetSentinel:defaults$3.charsetSentinel,comma:typeof E.comma=="boolean"?E.comma:defaults$3.comma,decoder:typeof E.decoder=="function"?E.decoder:defaults$3.decoder,delimiter:typeof E.delimiter=="string"||utils$2.isRegExp(E.delimiter)?E.delimiter:defaults$3.delimiter,depth:typeof E.depth=="number"||E.depth===!1?+E.depth:defaults$3.depth,ignoreQueryPrefix:E.ignoreQueryPrefix===!0,interpretNumericEntities:typeof E.interpretNumericEntities=="boolean"?E.interpretNumericEntities:defaults$3.interpretNumericEntities,parameterLimit:typeof E.parameterLimit=="number"?E.parameterLimit:defaults$3.parameterLimit,parseArrays:E.parseArrays!==!1,plainObjects:typeof E.plainObjects=="boolean"?E.plainObjects:defaults$3.plainObjects,strictNullHandling:typeof E.strictNullHandling=="boolean"?E.strictNullHandling:defaults$3.strictNullHandling}},parse$a=function(R,E){var U=normalizeParseOptions(E);if(R===""||R===null||typeof R>"u")return U.plainObjects?Object.create(null):{};for(var G=typeof R=="string"?parseValues(R,U):R,Y=U.plainObjects?Object.create(null):{},J=Object.keys(G),Q=0;Q<J.length;++Q){var X=J[Q],Z=parseKeys(X,G[X],U,typeof R=="string");Y=utils$2.merge(Y,Z,U)}return U.allowSparse===!0?Y:utils$2.compact(Y)},stringify$1=stringify_1,parse$9=parse$a,formats=formats$3,lib$2={formats,parse:parse$9,stringify:stringify$1},types$2={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.ProviderType=R.RegExpString=R.IntNumber=R.BigIntString=R.AddressString=R.HexString=R.OpaqueType=void 0;function E(){return G=>G}R.OpaqueType=E,R.HexString=E(),R.AddressString=E(),R.BigIntString=E();function U(G){return Math.floor(G)}R.IntNumber=U,R.RegExpString=E(),function(G){G.CoinbaseWallet="CoinbaseWallet",G.MetaMask="MetaMask",G.Unselected=""}(R.ProviderType||(R.ProviderType={}))})(types$2);var __importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(util$8,"__esModule",{value:!0});util$8.isInIFrame=util$8.createQrUrl=util$8.getFavicon=util$8.range=util$8.isBigNumber=util$8.ensureParsedJSONObject=util$8.ensureBN=util$8.ensureRegExpString=util$8.ensureIntNumber=util$8.ensureBuffer=util$8.ensureAddressString=util$8.ensureEvenLengthHexString=util$8.ensureHexString=util$8.isHexString=util$8.prepend0x=util$8.strip0x=util$8.has0xPrefix=util$8.hexStringFromIntNumber=util$8.intNumberFromHexString=util$8.bigIntStringFromBN=util$8.hexStringFromBuffer=util$8.hexStringToUint8Array=util$8.uint8ArrayToHex=util$8.randomBytesHex=void 0;const bn_js_1$1=__importDefault$e(bn.exports),qs_1=lib$2,types_1$3=types$2,INT_STRING_REGEX=/^[0-9]*$/,HEXADECIMAL_STRING_REGEX=/^[a-f0-9]*$/;function randomBytesHex(R){return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(R)))}util$8.randomBytesHex=randomBytesHex;function uint8ArrayToHex(R){return[...R].map(E=>E.toString(16).padStart(2,"0")).join("")}util$8.uint8ArrayToHex=uint8ArrayToHex;function hexStringToUint8Array(R){return new Uint8Array(R.match(/.{1,2}/g).map(E=>parseInt(E,16)))}util$8.hexStringToUint8Array=hexStringToUint8Array;function hexStringFromBuffer(R,E=!1){const U=R.toString("hex");return(0,types_1$3.HexString)(E?"0x"+U:U)}util$8.hexStringFromBuffer=hexStringFromBuffer;function bigIntStringFromBN(R){return(0,types_1$3.BigIntString)(R.toString(10))}util$8.bigIntStringFromBN=bigIntStringFromBN;function intNumberFromHexString(R){return(0,types_1$3.IntNumber)(new bn_js_1$1.default(ensureEvenLengthHexString(R,!1),16).toNumber())}util$8.intNumberFromHexString=intNumberFromHexString;function hexStringFromIntNumber(R){return(0,types_1$3.HexString)("0x"+new bn_js_1$1.default(R).toString(16))}util$8.hexStringFromIntNumber=hexStringFromIntNumber;function has0xPrefix(R){return R.startsWith("0x")||R.startsWith("0X")}util$8.has0xPrefix=has0xPrefix;function strip0x(R){return has0xPrefix(R)?R.slice(2):R}util$8.strip0x=strip0x;function prepend0x(R){return has0xPrefix(R)?"0x"+R.slice(2):"0x"+R}util$8.prepend0x=prepend0x;function isHexString$1(R){if(typeof R!="string")return!1;const E=strip0x(R).toLowerCase();return HEXADECIMAL_STRING_REGEX.test(E)}util$8.isHexString=isHexString$1;function ensureHexString(R,E=!1){if(typeof R=="string"){const U=strip0x(R).toLowerCase();if(HEXADECIMAL_STRING_REGEX.test(U))return(0,types_1$3.HexString)(E?"0x"+U:U)}throw new Error(`"${String(R)}" is not a hexadecimal string`)}util$8.ensureHexString=ensureHexString;function ensureEvenLengthHexString(R,E=!1){let U=ensureHexString(R,!1);return U.length%2===1&&(U=(0,types_1$3.HexString)("0"+U)),E?(0,types_1$3.HexString)("0x"+U):U}util$8.ensureEvenLengthHexString=ensureEvenLengthHexString;function ensureAddressString(R){if(typeof R=="string"){const E=strip0x(R).toLowerCase();if(isHexString$1(E)&&E.length===40)return(0,types_1$3.AddressString)(prepend0x(E))}throw new Error(`Invalid Ethereum address: ${String(R)}`)}util$8.ensureAddressString=ensureAddressString;function ensureBuffer(R){if(Buffer.isBuffer(R))return R;if(typeof R=="string")if(isHexString$1(R)){const E=ensureEvenLengthHexString(R,!1);return Buffer.from(E,"hex")}else return Buffer.from(R,"utf8");throw new Error(`Not binary data: ${String(R)}`)}util$8.ensureBuffer=ensureBuffer;function ensureIntNumber(R){if(typeof R=="number"&&Number.isInteger(R))return(0,types_1$3.IntNumber)(R);if(typeof R=="string"){if(INT_STRING_REGEX.test(R))return(0,types_1$3.IntNumber)(Number(R));if(isHexString$1(R))return(0,types_1$3.IntNumber)(new bn_js_1$1.default(ensureEvenLengthHexString(R,!1),16).toNumber())}throw new Error(`Not an integer: ${String(R)}`)}util$8.ensureIntNumber=ensureIntNumber;function ensureRegExpString(R){if(R instanceof RegExp)return(0,types_1$3.RegExpString)(R.toString());throw new Error(`Not a RegExp: ${String(R)}`)}util$8.ensureRegExpString=ensureRegExpString;function ensureBN(R){if(R!==null&&(bn_js_1$1.default.isBN(R)||isBigNumber(R)))return new bn_js_1$1.default(R.toString(10),10);if(typeof R=="number")return new bn_js_1$1.default(ensureIntNumber(R));if(typeof R=="string"){if(INT_STRING_REGEX.test(R))return new bn_js_1$1.default(R,10);if(isHexString$1(R))return new bn_js_1$1.default(ensureEvenLengthHexString(R,!1),16)}throw new Error(`Not an integer: ${String(R)}`)}util$8.ensureBN=ensureBN;function ensureParsedJSONObject(R){if(typeof R=="string")return JSON.parse(R);if(typeof R=="object")return R;throw new Error(`Not a JSON string or an object: ${String(R)}`)}util$8.ensureParsedJSONObject=ensureParsedJSONObject;function isBigNumber(R){if(R==null||typeof R.constructor!="function")return!1;const{constructor:E}=R;return typeof E.config=="function"&&typeof E.EUCLID=="number"}util$8.isBigNumber=isBigNumber;function range$2(R,E){return Array.from({length:E-R},(U,G)=>R+G)}util$8.range=range$2;function getFavicon(){const R=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:E,host:U}=document.location,G=R?R.getAttribute("href"):null;return!G||G.startsWith("javascript:")?null:G.startsWith("http://")||G.startsWith("https://")||G.startsWith("data:")?G:G.startsWith("//")?E+G:`${E}//${U}${G}`}util$8.getFavicon=getFavicon;function createQrUrl(R,E,U,G,Y,J){const Q=G?"parent-id":"id",X=(0,qs_1.stringify)({[Q]:R,secret:E,server:U,v:Y,chainId:J});return`${U}/#/link?${X}`}util$8.createQrUrl=createQrUrl;function isInIFrame(){try{return window.frameElement!==null}catch{return!1}}util$8.isInIFrame=isInIFrame;Object.defineProperty(Session$1,"__esModule",{value:!0});Session$1.Session=void 0;const sha_js_1=sha_js.exports,util_1$7=util$8,STORAGE_KEY_SESSION_ID="session:id",STORAGE_KEY_SESSION_SECRET="session:secret",STORAGE_KEY_SESSION_LINKED="session:linked";class Session{constructor(E,U,G,Y){this._storage=E,this._id=U||(0,util_1$7.randomBytesHex)(16),this._secret=G||(0,util_1$7.randomBytesHex)(32),this._key=new sha_js_1.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!Y}static load(E){const U=E.getItem(STORAGE_KEY_SESSION_ID),G=E.getItem(STORAGE_KEY_SESSION_LINKED),Y=E.getItem(STORAGE_KEY_SESSION_SECRET);return U&&Y?new Session(E,U,Y,G==="1"):null}static hash(E){return new sha_js_1.sha256().update(E).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(E){this._linked=E,this.persistLinked()}save(){return this._storage.setItem(STORAGE_KEY_SESSION_ID,this._id),this._storage.setItem(STORAGE_KEY_SESSION_SECRET,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(STORAGE_KEY_SESSION_LINKED,this._linked?"1":"0")}}Session$1.Session=Session;var WalletSDKRelayAbstract$1={};Object.defineProperty(WalletSDKRelayAbstract$1,"__esModule",{value:!0});WalletSDKRelayAbstract$1.WalletSDKRelayAbstract=WalletSDKRelayAbstract$1.APP_VERSION_KEY=WalletSDKRelayAbstract$1.LOCAL_STORAGE_ADDRESSES_KEY=WalletSDKRelayAbstract$1.WALLET_USER_NAME_KEY=void 0;const eth_rpc_errors_1$3=dist$5;WalletSDKRelayAbstract$1.WALLET_USER_NAME_KEY="walletUsername";WalletSDKRelayAbstract$1.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";WalletSDKRelayAbstract$1.APP_VERSION_KEY="AppVersion";class WalletSDKRelayAbstract{async makeEthereumJSONRPCRequest(E,U){if(!U)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(U,{method:"POST",body:JSON.stringify(E),mode:"cors",headers:{"Content-Type":"application/json"}}).then(G=>G.json()).then(G=>{if(!G)throw eth_rpc_errors_1$3.ethErrors.rpc.parse({});const Y=G,{error:J}=Y;if(J)throw(0,eth_rpc_errors_1$3.serializeError)(J);return Y})}}WalletSDKRelayAbstract$1.WalletSDKRelayAbstract=WalletSDKRelayAbstract;var readableBrowser={exports:{}},streamBrowser=events$1.exports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function R(oe,ce){var pe=Object.keys(oe);if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(oe);ce&&(ye=ye.filter(function(Se){return Object.getOwnPropertyDescriptor(oe,Se).enumerable})),pe.push.apply(pe,ye)}return pe}function E(oe){for(var ce=1;ce<arguments.length;ce++){var pe=arguments[ce]!=null?arguments[ce]:{};ce%2?R(Object(pe),!0).forEach(function(ye){U(oe,ye,pe[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(pe)):R(Object(pe)).forEach(function(ye){Object.defineProperty(oe,ye,Object.getOwnPropertyDescriptor(pe,ye))})}return oe}function U(oe,ce,pe){return ce in oe?Object.defineProperty(oe,ce,{value:pe,enumerable:!0,configurable:!0,writable:!0}):oe[ce]=pe,oe}function G(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function Y(oe,ce){for(var pe=0;pe<ce.length;pe++){var ye=ce[pe];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(oe,ye.key,ye)}}function J(oe,ce,pe){return ce&&Y(oe.prototype,ce),pe&&Y(oe,pe),oe}var Q=buffer$3,X=Q.Buffer,Z=require$$3$1,ee=Z.inspect,te=ee&&ee.custom||"inspect";function ne(oe,ce,pe){X.prototype.copy.call(oe,ce,pe)}return buffer_list=function(){function oe(){G(this,oe),this.head=null,this.tail=null,this.length=0}return J(oe,[{key:"push",value:function(pe){var ye={data:pe,next:null};this.length>0?this.tail.next=ye:this.head=ye,this.tail=ye,++this.length}},{key:"unshift",value:function(pe){var ye={data:pe,next:this.head};this.length===0&&(this.tail=ye),this.head=ye,++this.length}},{key:"shift",value:function(){if(this.length!==0){var pe=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,pe}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(pe){if(this.length===0)return"";for(var ye=this.head,Se=""+ye.data;ye=ye.next;)Se+=pe+ye.data;return Se}},{key:"concat",value:function(pe){if(this.length===0)return X.alloc(0);for(var ye=X.allocUnsafe(pe>>>0),Se=this.head,ge=0;Se;)ne(Se.data,ye,ge),ge+=Se.data.length,Se=Se.next;return ye}},{key:"consume",value:function(pe,ye){var Se;return pe<this.head.data.length?(Se=this.head.data.slice(0,pe),this.head.data=this.head.data.slice(pe)):pe===this.head.data.length?Se=this.shift():Se=ye?this._getString(pe):this._getBuffer(pe),Se}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(pe){var ye=this.head,Se=1,ge=ye.data;for(pe-=ge.length;ye=ye.next;){var _e=ye.data,Te=pe>_e.length?_e.length:pe;if(Te===_e.length?ge+=_e:ge+=_e.slice(0,pe),pe-=Te,pe===0){Te===_e.length?(++Se,ye.next?this.head=ye.next:this.head=this.tail=null):(this.head=ye,ye.data=_e.slice(Te));break}++Se}return this.length-=Se,ge}},{key:"_getBuffer",value:function(pe){var ye=X.allocUnsafe(pe),Se=this.head,ge=1;for(Se.data.copy(ye),pe-=Se.data.length;Se=Se.next;){var _e=Se.data,Te=pe>_e.length?_e.length:pe;if(_e.copy(ye,ye.length-pe,0,Te),pe-=Te,pe===0){Te===_e.length?(++ge,Se.next?this.head=Se.next:this.head=this.tail=null):(this.head=Se,Se.data=_e.slice(Te));break}++ge}return this.length-=ge,ye}},{key:te,value:function(pe,ye){return ee(this,E({},ye,{depth:0,customInspect:!1}))}}]),oe}(),buffer_list}function destroy(R,E){var U=this,G=this._readableState&&this._readableState.destroyed,Y=this._writableState&&this._writableState.destroyed;return G||Y?(E?E(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,R)):process.nextTick(emitErrorNT,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(J){!E&&J?U._writableState?U._writableState.errorEmitted?process.nextTick(emitCloseNT,U):(U._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,U,J)):process.nextTick(emitErrorAndCloseNT,U,J):E?(process.nextTick(emitCloseNT,U),E(J)):process.nextTick(emitCloseNT,U)}),this)}function emitErrorAndCloseNT(R,E){emitErrorNT(R,E),emitCloseNT(R)}function emitCloseNT(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(R,E){R.emit("error",E)}function errorOrDestroy(R,E){var U=R._readableState,G=R._writableState;U&&U.autoDestroy||G&&G.autoDestroy?R.destroy(E):R.emit("error",E)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(R,E){R.prototype=Object.create(E.prototype),R.prototype.constructor=R,R.__proto__=E}var codes$1={};function createErrorType(R,E,U){U||(U=Error);function G(J,Q,X){return typeof E=="string"?E:E(J,Q,X)}var Y=function(J){_inheritsLoose(Q,J);function Q(X,Z,ee){return J.call(this,G(X,Z,ee))||this}return Q}(U);Y.prototype.name=U.name,Y.prototype.code=R,codes$1[R]=Y}function oneOf(R,E){if(Array.isArray(R)){var U=R.length;return R=R.map(function(G){return String(G)}),U>2?"one of ".concat(E," ").concat(R.slice(0,U-1).join(", "),", or ")+R[U-1]:U===2?"one of ".concat(E," ").concat(R[0]," or ").concat(R[1]):"of ".concat(E," ").concat(R[0])}else return"of ".concat(E," ").concat(String(R))}function startsWith(R,E,U){return R.substr(!U||U<0?0:+U,E.length)===E}function endsWith(R,E,U){return(U===void 0||U>R.length)&&(U=R.length),R.substring(U-E.length,U)===E}function includes(R,E,U){return typeof U!="number"&&(U=0),U+E.length>R.length?!1:R.indexOf(E,U)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(R,E){return'The value "'+E+'" is invalid for option "'+R+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(R,E,U){var G;typeof E=="string"&&startsWith(E,"not ")?(G="must not be",E=E.replace(/^not /,"")):G="must be";var Y;if(endsWith(R," argument"))Y="The ".concat(R," ").concat(G," ").concat(oneOf(E,"type"));else{var J=includes(R,".")?"property":"argument";Y='The "'.concat(R,'" ').concat(J," ").concat(G," ").concat(oneOf(E,"type"))}return Y+=". Received type ".concat(typeof U),Y},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes$1;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(R,E,U){return R.highWaterMark!=null?R.highWaterMark:E?R[U]:null}function getHighWaterMark(R,E,U,G){var Y=highWaterMarkFrom(E,G,U);if(Y!=null){if(!(isFinite(Y)&&Math.floor(Y)===Y)||Y<0){var J=G?U:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(J,Y)}return Math.floor(Y)}return R.objectMode?16:16*1024}var state={getHighWaterMark},browser$2=deprecate$1;function deprecate$1(R,E){if(config$1("noDeprecation"))return R;var U=!1;function G(){if(!U){if(config$1("throwDeprecation"))throw new Error(E);config$1("traceDeprecation")?console.trace(E):console.warn(E),U=!0}return R.apply(this,arguments)}return G}function config$1(R){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var E=commonjsGlobal.localStorage[R];return E==null?!1:String(E).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=Oe;function R(ke){var Ne=this;this.next=null,this.entry=null,this.finish=function(){we(Ne,ke)}}var E;Oe.WritableState=Ae;var U={deprecate:browser$2},G=streamBrowser,Y=buffer$3.Buffer,J=commonjsGlobal.Uint8Array||function(){};function Q(ke){return Y.from(ke)}function X(ke){return Y.isBuffer(ke)||ke instanceof J}var Z=destroy_1,ee=state,te=ee.getHighWaterMark,ne=errorsBrowser.codes,oe=ne.ERR_INVALID_ARG_TYPE,ce=ne.ERR_METHOD_NOT_IMPLEMENTED,pe=ne.ERR_MULTIPLE_CALLBACK,ye=ne.ERR_STREAM_CANNOT_PIPE,Se=ne.ERR_STREAM_DESTROYED,ge=ne.ERR_STREAM_NULL_VALUES,_e=ne.ERR_STREAM_WRITE_AFTER_END,Te=ne.ERR_UNKNOWN_ENCODING,Ee=Z.errorOrDestroy;inherits_browser.exports(Oe,G);function Re(){}function Ae(ke,Ne,He){E=E||require_stream_duplex(),ke=ke||{},typeof He!="boolean"&&(He=Ne instanceof E),this.objectMode=!!ke.objectMode,He&&(this.objectMode=this.objectMode||!!ke.writableObjectMode),this.highWaterMark=te(this,ke,"writableHighWaterMark",He),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ue=ke.decodeStrings===!1;this.decodeStrings=!Ue,this.defaultEncoding=ke.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ge){fe(Ne,Ge)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ke.emitClose!==!1,this.autoDestroy=!!ke.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new R(this)}Ae.prototype.getBuffer=function(){for(var Ne=this.bufferedRequest,He=[];Ne;)He.push(Ne),Ne=Ne.next;return He},function(){try{Object.defineProperty(Ae.prototype,"buffer",{get:U.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ie;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ie=Function.prototype[Symbol.hasInstance],Object.defineProperty(Oe,Symbol.hasInstance,{value:function(Ne){return Ie.call(this,Ne)?!0:this!==Oe?!1:Ne&&Ne._writableState instanceof Ae}})):Ie=function(Ne){return Ne instanceof this};function Oe(ke){E=E||require_stream_duplex();var Ne=this instanceof E;if(!Ne&&!Ie.call(Oe,this))return new Oe(ke);this._writableState=new Ae(ke,this,Ne),this.writable=!0,ke&&(typeof ke.write=="function"&&(this._write=ke.write),typeof ke.writev=="function"&&(this._writev=ke.writev),typeof ke.destroy=="function"&&(this._destroy=ke.destroy),typeof ke.final=="function"&&(this._final=ke.final)),G.call(this)}Oe.prototype.pipe=function(){Ee(this,new ye)};function Pe(ke,Ne){var He=new _e;Ee(ke,He),process.nextTick(Ne,He)}function Le(ke,Ne,He,Ue){var Ge;return He===null?Ge=new ge:typeof He!="string"&&!Ne.objectMode&&(Ge=new oe("chunk",["string","Buffer"],He)),Ge?(Ee(ke,Ge),process.nextTick(Ue,Ge),!1):!0}Oe.prototype.write=function(ke,Ne,He){var Ue=this._writableState,Ge=!1,De=!Ue.objectMode&&X(ke);return De&&!Y.isBuffer(ke)&&(ke=Q(ke)),typeof Ne=="function"&&(He=Ne,Ne=null),De?Ne="buffer":Ne||(Ne=Ue.defaultEncoding),typeof He!="function"&&(He=Re),Ue.ending?Pe(this,He):(De||Le(this,Ue,ke,He))&&(Ue.pendingcb++,Ge=ue(this,Ue,De,ke,Ne,He)),Ge},Oe.prototype.cork=function(){this._writableState.corked++},Oe.prototype.uncork=function(){var ke=this._writableState;ke.corked&&(ke.corked--,!ke.writing&&!ke.corked&&!ke.bufferProcessing&&ke.bufferedRequest&&xe(this,ke))},Oe.prototype.setDefaultEncoding=function(Ne){if(typeof Ne=="string"&&(Ne=Ne.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ne+"").toLowerCase())>-1))throw new Te(Ne);return this._writableState.defaultEncoding=Ne,this},Object.defineProperty(Oe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Me(ke,Ne,He){return!ke.objectMode&&ke.decodeStrings!==!1&&typeof Ne=="string"&&(Ne=Y.from(Ne,He)),Ne}Object.defineProperty(Oe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ue(ke,Ne,He,Ue,Ge,De){if(!He){var $e=Me(Ne,Ue,Ge);Ue!==$e&&(He=!0,Ge="buffer",Ue=$e)}var Be=Ne.objectMode?1:Ue.length;Ne.length+=Be;var je=Ne.length<Ne.highWaterMark;if(je||(Ne.needDrain=!0),Ne.writing||Ne.corked){var ze=Ne.lastBufferedRequest;Ne.lastBufferedRequest={chunk:Ue,encoding:Ge,isBuf:He,callback:De,next:null},ze?ze.next=Ne.lastBufferedRequest:Ne.bufferedRequest=Ne.lastBufferedRequest,Ne.bufferedRequestCount+=1}else ae(ke,Ne,!1,Be,Ue,Ge,De);return je}function ae(ke,Ne,He,Ue,Ge,De,$e){Ne.writelen=Ue,Ne.writecb=$e,Ne.writing=!0,Ne.sync=!0,Ne.destroyed?Ne.onwrite(new Se("write")):He?ke._writev(Ge,Ne.onwrite):ke._write(Ge,De,Ne.onwrite),Ne.sync=!1}function se(ke,Ne,He,Ue,Ge){--Ne.pendingcb,He?(process.nextTick(Ge,Ue),process.nextTick(Ce,ke,Ne),ke._writableState.errorEmitted=!0,Ee(ke,Ue)):(Ge(Ue),ke._writableState.errorEmitted=!0,Ee(ke,Ue),Ce(ke,Ne))}function le(ke){ke.writing=!1,ke.writecb=null,ke.length-=ke.writelen,ke.writelen=0}function fe(ke,Ne){var He=ke._writableState,Ue=He.sync,Ge=He.writecb;if(typeof Ge!="function")throw new pe;if(le(He),Ne)se(ke,He,Ue,Ne,Ge);else{var De=he(He)||ke.destroyed;!De&&!He.corked&&!He.bufferProcessing&&He.bufferedRequest&&xe(ke,He),Ue?process.nextTick(be,ke,He,De,Ge):be(ke,He,De,Ge)}}function be(ke,Ne,He,Ue){He||ve(ke,Ne),Ne.pendingcb--,Ue(),Ce(ke,Ne)}function ve(ke,Ne){Ne.length===0&&Ne.needDrain&&(Ne.needDrain=!1,ke.emit("drain"))}function xe(ke,Ne){Ne.bufferProcessing=!0;var He=Ne.bufferedRequest;if(ke._writev&&He&&He.next){var Ue=Ne.bufferedRequestCount,Ge=new Array(Ue),De=Ne.corkedRequestsFree;De.entry=He;for(var $e=0,Be=!0;He;)Ge[$e]=He,He.isBuf||(Be=!1),He=He.next,$e+=1;Ge.allBuffers=Be,ae(ke,Ne,!0,Ne.length,Ge,"",De.finish),Ne.pendingcb++,Ne.lastBufferedRequest=null,De.next?(Ne.corkedRequestsFree=De.next,De.next=null):Ne.corkedRequestsFree=new R(Ne),Ne.bufferedRequestCount=0}else{for(;He;){var je=He.chunk,ze=He.encoding,We=He.callback,Ke=Ne.objectMode?1:je.length;if(ae(ke,Ne,!1,Ke,je,ze,We),He=He.next,Ne.bufferedRequestCount--,Ne.writing)break}He===null&&(Ne.lastBufferedRequest=null)}Ne.bufferedRequest=He,Ne.bufferProcessing=!1}Oe.prototype._write=function(ke,Ne,He){He(new ce("_write()"))},Oe.prototype._writev=null,Oe.prototype.end=function(ke,Ne,He){var Ue=this._writableState;return typeof ke=="function"?(He=ke,ke=null,Ne=null):typeof Ne=="function"&&(He=Ne,Ne=null),ke!=null&&this.write(ke,Ne),Ue.corked&&(Ue.corked=1,this.uncork()),Ue.ending||Fe(this,Ue,He),this},Object.defineProperty(Oe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function he(ke){return ke.ending&&ke.length===0&&ke.bufferedRequest===null&&!ke.finished&&!ke.writing}function me(ke,Ne){ke._final(function(He){Ne.pendingcb--,He&&Ee(ke,He),Ne.prefinished=!0,ke.emit("prefinish"),Ce(ke,Ne)})}function de(ke,Ne){!Ne.prefinished&&!Ne.finalCalled&&(typeof ke._final=="function"&&!Ne.destroyed?(Ne.pendingcb++,Ne.finalCalled=!0,process.nextTick(me,ke,Ne)):(Ne.prefinished=!0,ke.emit("prefinish")))}function Ce(ke,Ne){var He=he(Ne);if(He&&(de(ke,Ne),Ne.pendingcb===0&&(Ne.finished=!0,ke.emit("finish"),Ne.autoDestroy))){var Ue=ke._readableState;(!Ue||Ue.autoDestroy&&Ue.endEmitted)&&ke.destroy()}return He}function Fe(ke,Ne,He){Ne.ending=!0,Ce(ke,Ne),He&&(Ne.finished?process.nextTick(He):ke.once("finish",He)),Ne.ended=!0,ke.writable=!1}function we(ke,Ne,He){var Ue=ke.entry;for(ke.entry=null;Ue;){var Ge=Ue.callback;Ne.pendingcb--,Ge(He),Ue=Ue.next}Ne.corkedRequestsFree.next=ke}return Object.defineProperty(Oe.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Ne){!this._writableState||(this._writableState.destroyed=Ne)}}),Oe.prototype.destroy=Z.destroy,Oe.prototype._undestroy=Z.undestroy,Oe.prototype._destroy=function(ke,Ne){Ne(ke)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var R=Object.keys||function(ee){var te=[];for(var ne in ee)te.push(ne);return te};_stream_duplex=Q;var E=require_stream_readable(),U=require_stream_writable();inherits_browser.exports(Q,E);for(var G=R(U.prototype),Y=0;Y<G.length;Y++){var J=G[Y];Q.prototype[J]||(Q.prototype[J]=U.prototype[J])}function Q(ee){if(!(this instanceof Q))return new Q(ee);E.call(this,ee),U.call(this,ee),this.allowHalfOpen=!0,ee&&(ee.readable===!1&&(this.readable=!1),ee.writable===!1&&(this.writable=!1),ee.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",X)))}Object.defineProperty(Q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function X(){this._writableState.ended||process.nextTick(Z,this)}function Z(ee){ee.end()}return Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(te){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=te,this._writableState.destroyed=te)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var R=safeBuffer.exports.Buffer,E=R.isEncoding||function(ge){switch(ge=""+ge,ge&&ge.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function U(ge){if(!ge)return"utf8";for(var _e;;)switch(ge){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ge;default:if(_e)return;ge=(""+ge).toLowerCase(),_e=!0}}function G(ge){var _e=U(ge);if(typeof _e!="string"&&(R.isEncoding===E||!E(ge)))throw new Error("Unknown encoding: "+ge);return _e||ge}string_decoder.StringDecoder=Y;function Y(ge){this.encoding=G(ge);var _e;switch(this.encoding){case"utf16le":this.text=ne,this.end=oe,_e=4;break;case"utf8":this.fillLast=Z,_e=4;break;case"base64":this.text=ce,this.end=pe,_e=3;break;default:this.write=ye,this.end=Se;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=R.allocUnsafe(_e)}Y.prototype.write=function(ge){if(ge.length===0)return"";var _e,Te;if(this.lastNeed){if(_e=this.fillLast(ge),_e===void 0)return"";Te=this.lastNeed,this.lastNeed=0}else Te=0;return Te<ge.length?_e?_e+this.text(ge,Te):this.text(ge,Te):_e||""},Y.prototype.end=te,Y.prototype.text=ee,Y.prototype.fillLast=function(ge){if(this.lastNeed<=ge.length)return ge.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ge.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ge.length),this.lastNeed-=ge.length};function J(ge){return ge<=127?0:ge>>5===6?2:ge>>4===14?3:ge>>3===30?4:ge>>6===2?-1:-2}function Q(ge,_e,Te){var Ee=_e.length-1;if(Ee<Te)return 0;var Re=J(_e[Ee]);return Re>=0?(Re>0&&(ge.lastNeed=Re-1),Re):--Ee<Te||Re===-2?0:(Re=J(_e[Ee]),Re>=0?(Re>0&&(ge.lastNeed=Re-2),Re):--Ee<Te||Re===-2?0:(Re=J(_e[Ee]),Re>=0?(Re>0&&(Re===2?Re=0:ge.lastNeed=Re-3),Re):0))}function X(ge,_e,Te){if((_e[0]&192)!==128)return ge.lastNeed=0,"\uFFFD";if(ge.lastNeed>1&&_e.length>1){if((_e[1]&192)!==128)return ge.lastNeed=1,"\uFFFD";if(ge.lastNeed>2&&_e.length>2&&(_e[2]&192)!==128)return ge.lastNeed=2,"\uFFFD"}}function Z(ge){var _e=this.lastTotal-this.lastNeed,Te=X(this,ge);if(Te!==void 0)return Te;if(this.lastNeed<=ge.length)return ge.copy(this.lastChar,_e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ge.copy(this.lastChar,_e,0,ge.length),this.lastNeed-=ge.length}function ee(ge,_e){var Te=Q(this,ge,_e);if(!this.lastNeed)return ge.toString("utf8",_e);this.lastTotal=Te;var Ee=ge.length-(Te-this.lastNeed);return ge.copy(this.lastChar,0,Ee),ge.toString("utf8",_e,Ee)}function te(ge){var _e=ge&&ge.length?this.write(ge):"";return this.lastNeed?_e+"\uFFFD":_e}function ne(ge,_e){if((ge.length-_e)%2===0){var Te=ge.toString("utf16le",_e);if(Te){var Ee=Te.charCodeAt(Te.length-1);if(Ee>=55296&&Ee<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ge[ge.length-2],this.lastChar[1]=ge[ge.length-1],Te.slice(0,-1)}return Te}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ge[ge.length-1],ge.toString("utf16le",_e,ge.length-1)}function oe(ge){var _e=ge&&ge.length?this.write(ge):"";if(this.lastNeed){var Te=this.lastTotal-this.lastNeed;return _e+this.lastChar.toString("utf16le",0,Te)}return _e}function ce(ge,_e){var Te=(ge.length-_e)%3;return Te===0?ge.toString("base64",_e):(this.lastNeed=3-Te,this.lastTotal=3,Te===1?this.lastChar[0]=ge[ge.length-1]:(this.lastChar[0]=ge[ge.length-2],this.lastChar[1]=ge[ge.length-1]),ge.toString("base64",_e,ge.length-Te))}function pe(ge){var _e=ge&&ge.length?this.write(ge):"";return this.lastNeed?_e+this.lastChar.toString("base64",0,3-this.lastNeed):_e}function ye(ge){return ge.toString(this.encoding)}function Se(ge){return ge&&ge.length?this.write(ge):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(R){var E=!1;return function(){if(!E){E=!0;for(var U=arguments.length,G=new Array(U),Y=0;Y<U;Y++)G[Y]=arguments[Y];R.apply(this,G)}}}function noop$4(){}function isRequest$1(R){return R.setHeader&&typeof R.abort=="function"}function eos$1(R,E,U){if(typeof E=="function")return eos$1(R,null,E);E||(E={}),U=once$1(U||noop$4);var G=E.readable||E.readable!==!1&&R.readable,Y=E.writable||E.writable!==!1&&R.writable,J=function(){R.writable||X()},Q=R._writableState&&R._writableState.finished,X=function(){Y=!1,Q=!0,G||U.call(R)},Z=R._readableState&&R._readableState.endEmitted,ee=function(){G=!1,Z=!0,Y||U.call(R)},te=function(pe){U.call(R,pe)},ne=function(){var pe;if(G&&!Z)return(!R._readableState||!R._readableState.ended)&&(pe=new ERR_STREAM_PREMATURE_CLOSE),U.call(R,pe);if(Y&&!Q)return(!R._writableState||!R._writableState.ended)&&(pe=new ERR_STREAM_PREMATURE_CLOSE),U.call(R,pe)},oe=function(){R.req.on("finish",X)};return isRequest$1(R)?(R.on("complete",X),R.on("abort",ne),R.req?oe():R.on("request",oe)):Y&&!R._writableState&&(R.on("end",J),R.on("close",J)),R.on("end",ee),R.on("finish",X),E.error!==!1&&R.on("error",te),R.on("close",ne),function(){R.removeListener("complete",X),R.removeListener("abort",ne),R.removeListener("request",oe),R.req&&R.req.removeListener("finish",X),R.removeListener("end",J),R.removeListener("close",J),R.removeListener("finish",X),R.removeListener("end",ee),R.removeListener("error",te),R.removeListener("close",ne)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var R;function E(ge,_e,Te){return _e in ge?Object.defineProperty(ge,_e,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ge[_e]=Te,ge}var U=endOfStream,G=Symbol("lastResolve"),Y=Symbol("lastReject"),J=Symbol("error"),Q=Symbol("ended"),X=Symbol("lastPromise"),Z=Symbol("handlePromise"),ee=Symbol("stream");function te(ge,_e){return{value:ge,done:_e}}function ne(ge){var _e=ge[G];if(_e!==null){var Te=ge[ee].read();Te!==null&&(ge[X]=null,ge[G]=null,ge[Y]=null,_e(te(Te,!1)))}}function oe(ge){process.nextTick(ne,ge)}function ce(ge,_e){return function(Te,Ee){ge.then(function(){if(_e[Q]){Te(te(void 0,!0));return}_e[Z](Te,Ee)},Ee)}}var pe=Object.getPrototypeOf(function(){}),ye=Object.setPrototypeOf((R={get stream(){return this[ee]},next:function(){var _e=this,Te=this[J];if(Te!==null)return Promise.reject(Te);if(this[Q])return Promise.resolve(te(void 0,!0));if(this[ee].destroyed)return new Promise(function(Ie,Oe){process.nextTick(function(){_e[J]?Oe(_e[J]):Ie(te(void 0,!0))})});var Ee=this[X],Re;if(Ee)Re=new Promise(ce(Ee,this));else{var Ae=this[ee].read();if(Ae!==null)return Promise.resolve(te(Ae,!1));Re=new Promise(this[Z])}return this[X]=Re,Re}},E(R,Symbol.asyncIterator,function(){return this}),E(R,"return",function(){var _e=this;return new Promise(function(Te,Ee){_e[ee].destroy(null,function(Re){if(Re){Ee(Re);return}Te(te(void 0,!0))})})}),R),pe),Se=function(_e){var Te,Ee=Object.create(ye,(Te={},E(Te,ee,{value:_e,writable:!0}),E(Te,G,{value:null,writable:!0}),E(Te,Y,{value:null,writable:!0}),E(Te,J,{value:null,writable:!0}),E(Te,Q,{value:_e._readableState.endEmitted,writable:!0}),E(Te,Z,{value:function(Ae,Ie){var Oe=Ee[ee].read();Oe?(Ee[X]=null,Ee[G]=null,Ee[Y]=null,Ae(te(Oe,!1))):(Ee[G]=Ae,Ee[Y]=Ie)},writable:!0}),Te));return Ee[X]=null,U(_e,function(Re){if(Re&&Re.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Ae=Ee[Y];Ae!==null&&(Ee[X]=null,Ee[G]=null,Ee[Y]=null,Ae(Re)),Ee[J]=Re;return}var Ie=Ee[G];Ie!==null&&(Ee[X]=null,Ee[G]=null,Ee[Y]=null,Ie(te(void 0,!0))),Ee[Q]=!0}),_e.on("readable",oe.bind(null,Ee)),Ee};return async_iterator=Se,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Pe;var R;Pe.ReadableState=Oe,events$1.exports.EventEmitter;var E=function($e,Be){return $e.listeners(Be).length},U=streamBrowser,G=buffer$3.Buffer,Y=commonjsGlobal.Uint8Array||function(){};function J(De){return G.from(De)}function Q(De){return G.isBuffer(De)||De instanceof Y}var X=require$$3$1,Z;X&&X.debuglog?Z=X.debuglog("stream"):Z=function(){};var ee=requireBuffer_list(),te=destroy_1,ne=state,oe=ne.getHighWaterMark,ce=errorsBrowser.codes,pe=ce.ERR_INVALID_ARG_TYPE,ye=ce.ERR_STREAM_PUSH_AFTER_EOF,Se=ce.ERR_METHOD_NOT_IMPLEMENTED,ge=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_e,Te,Ee;inherits_browser.exports(Pe,U);var Re=te.errorOrDestroy,Ae=["error","close","destroy","pause","resume"];function Ie(De,$e,Be){if(typeof De.prependListener=="function")return De.prependListener($e,Be);!De._events||!De._events[$e]?De.on($e,Be):Array.isArray(De._events[$e])?De._events[$e].unshift(Be):De._events[$e]=[Be,De._events[$e]]}function Oe(De,$e,Be){R=R||require_stream_duplex(),De=De||{},typeof Be!="boolean"&&(Be=$e instanceof R),this.objectMode=!!De.objectMode,Be&&(this.objectMode=this.objectMode||!!De.readableObjectMode),this.highWaterMark=oe(this,De,"readableHighWaterMark",Be),this.buffer=new ee,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=De.emitClose!==!1,this.autoDestroy=!!De.autoDestroy,this.destroyed=!1,this.defaultEncoding=De.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,De.encoding&&(_e||(_e=requireString_decoder().StringDecoder),this.decoder=new _e(De.encoding),this.encoding=De.encoding)}function Pe(De){if(R=R||require_stream_duplex(),!(this instanceof Pe))return new Pe(De);var $e=this instanceof R;this._readableState=new Oe(De,this,$e),this.readable=!0,De&&(typeof De.read=="function"&&(this._read=De.read),typeof De.destroy=="function"&&(this._destroy=De.destroy)),U.call(this)}Object.defineProperty(Pe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function($e){!this._readableState||(this._readableState.destroyed=$e)}}),Pe.prototype.destroy=te.destroy,Pe.prototype._undestroy=te.undestroy,Pe.prototype._destroy=function(De,$e){$e(De)},Pe.prototype.push=function(De,$e){var Be=this._readableState,je;return Be.objectMode?je=!0:typeof De=="string"&&($e=$e||Be.defaultEncoding,$e!==Be.encoding&&(De=G.from(De,$e),$e=""),je=!0),Le(this,De,$e,!1,je)},Pe.prototype.unshift=function(De){return Le(this,De,null,!0,!1)};function Le(De,$e,Be,je,ze){Z("readableAddChunk",$e);var We=De._readableState;if($e===null)We.reading=!1,fe(De,We);else{var Ke;if(ze||(Ke=ue(We,$e)),Ke)Re(De,Ke);else if(We.objectMode||$e&&$e.length>0)if(typeof $e!="string"&&!We.objectMode&&Object.getPrototypeOf($e)!==G.prototype&&($e=J($e)),je)We.endEmitted?Re(De,new ge):Me(De,We,$e,!0);else if(We.ended)Re(De,new ye);else{if(We.destroyed)return!1;We.reading=!1,We.decoder&&!Be?($e=We.decoder.write($e),We.objectMode||$e.length!==0?Me(De,We,$e,!1):xe(De,We)):Me(De,We,$e,!1)}else je||(We.reading=!1,xe(De,We))}return!We.ended&&(We.length<We.highWaterMark||We.length===0)}function Me(De,$e,Be,je){$e.flowing&&$e.length===0&&!$e.sync?($e.awaitDrain=0,De.emit("data",Be)):($e.length+=$e.objectMode?1:Be.length,je?$e.buffer.unshift(Be):$e.buffer.push(Be),$e.needReadable&&be(De)),xe(De,$e)}function ue(De,$e){var Be;return!Q($e)&&typeof $e!="string"&&$e!==void 0&&!De.objectMode&&(Be=new pe("chunk",["string","Buffer","Uint8Array"],$e)),Be}Pe.prototype.isPaused=function(){return this._readableState.flowing===!1},Pe.prototype.setEncoding=function(De){_e||(_e=requireString_decoder().StringDecoder);var $e=new _e(De);this._readableState.decoder=$e,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,je="";Be!==null;)je+=$e.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),je!==""&&this._readableState.buffer.push(je),this._readableState.length=je.length,this};var ae=1073741824;function se(De){return De>=ae?De=ae:(De--,De|=De>>>1,De|=De>>>2,De|=De>>>4,De|=De>>>8,De|=De>>>16,De++),De}function le(De,$e){return De<=0||$e.length===0&&$e.ended?0:$e.objectMode?1:De!==De?$e.flowing&&$e.length?$e.buffer.head.data.length:$e.length:(De>$e.highWaterMark&&($e.highWaterMark=se(De)),De<=$e.length?De:$e.ended?$e.length:($e.needReadable=!0,0))}Pe.prototype.read=function(De){Z("read",De),De=parseInt(De,10);var $e=this._readableState,Be=De;if(De!==0&&($e.emittedReadable=!1),De===0&&$e.needReadable&&(($e.highWaterMark!==0?$e.length>=$e.highWaterMark:$e.length>0)||$e.ended))return Z("read: emitReadable",$e.length,$e.ended),$e.length===0&&$e.ended?He(this):be(this),null;if(De=le(De,$e),De===0&&$e.ended)return $e.length===0&&He(this),null;var je=$e.needReadable;Z("need readable",je),($e.length===0||$e.length-De<$e.highWaterMark)&&(je=!0,Z("length less than watermark",je)),$e.ended||$e.reading?(je=!1,Z("reading or ended",je)):je&&(Z("do read"),$e.reading=!0,$e.sync=!0,$e.length===0&&($e.needReadable=!0),this._read($e.highWaterMark),$e.sync=!1,$e.reading||(De=le(Be,$e)));var ze;return De>0?ze=Ne(De,$e):ze=null,ze===null?($e.needReadable=$e.length<=$e.highWaterMark,De=0):($e.length-=De,$e.awaitDrain=0),$e.length===0&&($e.ended||($e.needReadable=!0),Be!==De&&$e.ended&&He(this)),ze!==null&&this.emit("data",ze),ze};function fe(De,$e){if(Z("onEofChunk"),!$e.ended){if($e.decoder){var Be=$e.decoder.end();Be&&Be.length&&($e.buffer.push(Be),$e.length+=$e.objectMode?1:Be.length)}$e.ended=!0,$e.sync?be(De):($e.needReadable=!1,$e.emittedReadable||($e.emittedReadable=!0,ve(De)))}}function be(De){var $e=De._readableState;Z("emitReadable",$e.needReadable,$e.emittedReadable),$e.needReadable=!1,$e.emittedReadable||(Z("emitReadable",$e.flowing),$e.emittedReadable=!0,process.nextTick(ve,De))}function ve(De){var $e=De._readableState;Z("emitReadable_",$e.destroyed,$e.length,$e.ended),!$e.destroyed&&($e.length||$e.ended)&&(De.emit("readable"),$e.emittedReadable=!1),$e.needReadable=!$e.flowing&&!$e.ended&&$e.length<=$e.highWaterMark,ke(De)}function xe(De,$e){$e.readingMore||($e.readingMore=!0,process.nextTick(he,De,$e))}function he(De,$e){for(;!$e.reading&&!$e.ended&&($e.length<$e.highWaterMark||$e.flowing&&$e.length===0);){var Be=$e.length;if(Z("maybeReadMore read 0"),De.read(0),Be===$e.length)break}$e.readingMore=!1}Pe.prototype._read=function(De){Re(this,new Se("_read()"))},Pe.prototype.pipe=function(De,$e){var Be=this,je=this._readableState;switch(je.pipesCount){case 0:je.pipes=De;break;case 1:je.pipes=[je.pipes,De];break;default:je.pipes.push(De);break}je.pipesCount+=1,Z("pipe count=%d opts=%j",je.pipesCount,$e);var ze=(!$e||$e.end!==!1)&&De!==process.stdout&&De!==process.stderr,We=ze?Ye:st;je.endEmitted?process.nextTick(We):Be.once("end",We),De.on("unpipe",Ke);function Ke(nt,ot){Z("onunpipe"),nt===Be&&ot&&ot.hasUnpiped===!1&&(ot.hasUnpiped=!0,qe())}function Ye(){Z("onend"),De.end()}var Je=me(Be);De.on("drain",Je);var Qe=!1;function qe(){Z("cleanup"),De.removeListener("close",Xe),De.removeListener("finish",it),De.removeListener("drain",Je),De.removeListener("error",tt),De.removeListener("unpipe",Ke),Be.removeListener("end",Ye),Be.removeListener("end",st),Be.removeListener("data",rt),Qe=!0,je.awaitDrain&&(!De._writableState||De._writableState.needDrain)&&Je()}Be.on("data",rt);function rt(nt){Z("ondata");var ot=De.write(nt);Z("dest.write",ot),ot===!1&&((je.pipesCount===1&&je.pipes===De||je.pipesCount>1&&Ge(je.pipes,De)!==-1)&&!Qe&&(Z("false write response, pause",je.awaitDrain),je.awaitDrain++),Be.pause())}function tt(nt){Z("onerror",nt),st(),De.removeListener("error",tt),E(De,"error")===0&&Re(De,nt)}Ie(De,"error",tt);function Xe(){De.removeListener("finish",it),st()}De.once("close",Xe);function it(){Z("onfinish"),De.removeListener("close",Xe),st()}De.once("finish",it);function st(){Z("unpipe"),Be.unpipe(De)}return De.emit("pipe",Be),je.flowing||(Z("pipe resume"),Be.resume()),De};function me(De){return function(){var Be=De._readableState;Z("pipeOnDrain",Be.awaitDrain),Be.awaitDrain&&Be.awaitDrain--,Be.awaitDrain===0&&E(De,"data")&&(Be.flowing=!0,ke(De))}}Pe.prototype.unpipe=function(De){var $e=this._readableState,Be={hasUnpiped:!1};if($e.pipesCount===0)return this;if($e.pipesCount===1)return De&&De!==$e.pipes?this:(De||(De=$e.pipes),$e.pipes=null,$e.pipesCount=0,$e.flowing=!1,De&&De.emit("unpipe",this,Be),this);if(!De){var je=$e.pipes,ze=$e.pipesCount;$e.pipes=null,$e.pipesCount=0,$e.flowing=!1;for(var We=0;We<ze;We++)je[We].emit("unpipe",this,{hasUnpiped:!1});return this}var Ke=Ge($e.pipes,De);return Ke===-1?this:($e.pipes.splice(Ke,1),$e.pipesCount-=1,$e.pipesCount===1&&($e.pipes=$e.pipes[0]),De.emit("unpipe",this,Be),this)},Pe.prototype.on=function(De,$e){var Be=U.prototype.on.call(this,De,$e),je=this._readableState;return De==="data"?(je.readableListening=this.listenerCount("readable")>0,je.flowing!==!1&&this.resume()):De==="readable"&&!je.endEmitted&&!je.readableListening&&(je.readableListening=je.needReadable=!0,je.flowing=!1,je.emittedReadable=!1,Z("on readable",je.length,je.reading),je.length?be(this):je.reading||process.nextTick(Ce,this)),Be},Pe.prototype.addListener=Pe.prototype.on,Pe.prototype.removeListener=function(De,$e){var Be=U.prototype.removeListener.call(this,De,$e);return De==="readable"&&process.nextTick(de,this),Be},Pe.prototype.removeAllListeners=function(De){var $e=U.prototype.removeAllListeners.apply(this,arguments);return(De==="readable"||De===void 0)&&process.nextTick(de,this),$e};function de(De){var $e=De._readableState;$e.readableListening=De.listenerCount("readable")>0,$e.resumeScheduled&&!$e.paused?$e.flowing=!0:De.listenerCount("data")>0&&De.resume()}function Ce(De){Z("readable nexttick read 0"),De.read(0)}Pe.prototype.resume=function(){var De=this._readableState;return De.flowing||(Z("resume"),De.flowing=!De.readableListening,Fe(this,De)),De.paused=!1,this};function Fe(De,$e){$e.resumeScheduled||($e.resumeScheduled=!0,process.nextTick(we,De,$e))}function we(De,$e){Z("resume",$e.reading),$e.reading||De.read(0),$e.resumeScheduled=!1,De.emit("resume"),ke(De),$e.flowing&&!$e.reading&&De.read(0)}Pe.prototype.pause=function(){return Z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ke(De){var $e=De._readableState;for(Z("flow",$e.flowing);$e.flowing&&De.read()!==null;);}Pe.prototype.wrap=function(De){var $e=this,Be=this._readableState,je=!1;De.on("end",function(){if(Z("wrapped end"),Be.decoder&&!Be.ended){var Ke=Be.decoder.end();Ke&&Ke.length&&$e.push(Ke)}$e.push(null)}),De.on("data",function(Ke){if(Z("wrapped data"),Be.decoder&&(Ke=Be.decoder.write(Ke)),!(Be.objectMode&&Ke==null)&&!(!Be.objectMode&&(!Ke||!Ke.length))){var Ye=$e.push(Ke);Ye||(je=!0,De.pause())}});for(var ze in De)this[ze]===void 0&&typeof De[ze]=="function"&&(this[ze]=function(Ye){return function(){return De[Ye].apply(De,arguments)}}(ze));for(var We=0;We<Ae.length;We++)De.on(Ae[We],this.emit.bind(this,Ae[We]));return this._read=function(Ke){Z("wrapped _read",Ke),je&&(je=!1,De.resume())},this},typeof Symbol=="function"&&(Pe.prototype[Symbol.asyncIterator]=function(){return Te===void 0&&(Te=requireAsync_iterator()),Te(this)}),Object.defineProperty(Pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($e){this._readableState&&(this._readableState.flowing=$e)}}),Pe._fromList=Ne,Object.defineProperty(Pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ne(De,$e){if($e.length===0)return null;var Be;return $e.objectMode?Be=$e.buffer.shift():!De||De>=$e.length?($e.decoder?Be=$e.buffer.join(""):$e.buffer.length===1?Be=$e.buffer.first():Be=$e.buffer.concat($e.length),$e.buffer.clear()):Be=$e.buffer.consume(De,$e.decoder),Be}function He(De){var $e=De._readableState;Z("endReadable",$e.endEmitted),$e.endEmitted||($e.ended=!0,process.nextTick(Ue,$e,De))}function Ue(De,$e){if(Z("endReadableNT",De.endEmitted,De.length),!De.endEmitted&&De.length===0&&(De.endEmitted=!0,$e.readable=!1,$e.emit("end"),De.autoDestroy)){var Be=$e._writableState;(!Be||Be.autoDestroy&&Be.finished)&&$e.destroy()}}typeof Symbol=="function"&&(Pe.from=function(De,$e){return Ee===void 0&&(Ee=requireFromBrowser()),Ee(Pe,De,$e)});function Ge(De,$e){for(var Be=0,je=De.length;Be<je;Be++)if(De[Be]===$e)return Be;return-1}return _stream_readable}var _stream_transform=Transform$4,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browser.exports(Transform$4,Duplex);function afterTransform(R,E){var U=this._transformState;U.transforming=!1;var G=U.writecb;if(G===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);U.writechunk=null,U.writecb=null,E!=null&&this.push(E),G(R);var Y=this._readableState;Y.reading=!1,(Y.needReadable||Y.length<Y.highWaterMark)&&this._read(Y.highWaterMark)}function Transform$4(R){if(!(this instanceof Transform$4))return new Transform$4(R);Duplex.call(this,R),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,R&&(typeof R.transform=="function"&&(this._transform=R.transform),typeof R.flush=="function"&&(this._flush=R.flush)),this.on("prefinish",prefinish)}function prefinish(){var R=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(E,U){done(R,E,U)}):done(this,null,null)}Transform$4.prototype.push=function(R,E){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,R,E)};Transform$4.prototype._transform=function(R,E,U){U(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$4.prototype._write=function(R,E,U){var G=this._transformState;if(G.writecb=U,G.writechunk=R,G.writeencoding=E,!G.transforming){var Y=this._readableState;(G.needTransform||Y.needReadable||Y.length<Y.highWaterMark)&&this._read(Y.highWaterMark)}};Transform$4.prototype._read=function(R){var E=this._transformState;E.writechunk!==null&&!E.transforming?(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform)):E.needTransform=!0};Transform$4.prototype._destroy=function(R,E){Duplex.prototype._destroy.call(this,R,function(U){E(U)})};function done(R,E,U){if(E)return R.emit("error",E);if(U!=null&&R.push(U),R._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(R._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return R.push(null)}var _stream_passthrough=PassThrough,Transform$3=_stream_transform;inherits_browser.exports(PassThrough,Transform$3);function PassThrough(R){if(!(this instanceof PassThrough))return new PassThrough(R);Transform$3.call(this,R)}PassThrough.prototype._transform=function(R,E,U){U(null,R)};var eos;function once(R){var E=!1;return function(){E||(E=!0,R.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$3(R){if(R)throw R}function isRequest(R){return R.setHeader&&typeof R.abort=="function"}function destroyer(R,E,U,G){G=once(G);var Y=!1;R.on("close",function(){Y=!0}),eos===void 0&&(eos=endOfStream),eos(R,{readable:E,writable:U},function(Q){if(Q)return G(Q);Y=!0,G()});var J=!1;return function(Q){if(!Y&&!J){if(J=!0,isRequest(R))return R.abort();if(typeof R.destroy=="function")return R.destroy();G(Q||new ERR_STREAM_DESTROYED("pipe"))}}}function call(R){R()}function pipe$1(R,E){return R.pipe(E)}function popCallback(R){return!R.length||typeof R[R.length-1]!="function"?noop$3:R.pop()}function pipeline(){for(var R=arguments.length,E=new Array(R),U=0;U<R;U++)E[U]=arguments[U];var G=popCallback(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new ERR_MISSING_ARGS("streams");var Y,J=E.map(function(Q,X){var Z=X<E.length-1,ee=X>0;return destroyer(Q,Z,ee,function(te){Y||(Y=te),te&&J.forEach(call),!Z&&(J.forEach(call),G(Y))})});return E.reduce(pipe$1)}var pipeline_1=pipeline;(function(R,E){E=R.exports=require_stream_readable(),E.Stream=E,E.Readable=E,E.Writable=require_stream_writable(),E.Duplex=require_stream_duplex(),E.Transform=_stream_transform,E.PassThrough=_stream_passthrough,E.finished=endOfStream,E.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);const{Transform:Transform$2}=readableBrowser.exports;var keccak$2=R=>class lr extends Transform$2{constructor(U,G,Y,J,Q){super(Q),this._rate=U,this._capacity=G,this._delimitedSuffix=Y,this._hashBitLength=J,this._options=Q,this._state=new R,this._state.initialize(U,G),this._finalized=!1}_transform(U,G,Y){let J=null;try{this.update(U,G)}catch(Q){J=Q}Y(J)}_flush(U){let G=null;try{this.push(this.digest())}catch(Y){G=Y}U(G)}update(U,G){if(!Buffer.isBuffer(U)&&typeof U!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(U)||(U=Buffer.from(U,G)),this._state.absorb(U),this}digest(U){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let G=this._state.squeeze(this._hashBitLength/8);return U!==void 0&&(G=G.toString(U)),this._resetState(),G}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const U=new lr(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(U._state),U._finalized=this._finalized,U}};const{Transform:Transform$1}=readableBrowser.exports;var shake=R=>class cr extends Transform$1{constructor(U,G,Y,J){super(J),this._rate=U,this._capacity=G,this._delimitedSuffix=Y,this._options=J,this._state=new R,this._state.initialize(U,G),this._finalized=!1}_transform(U,G,Y){let J=null;try{this.update(U,G)}catch(Q){J=Q}Y(J)}_flush(){}_read(U){this.push(this.squeeze(U))}update(U,G){if(!Buffer.isBuffer(U)&&typeof U!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(U)||(U=Buffer.from(U,G)),this._state.absorb(U),this}squeeze(U,G){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let Y=this._state.squeeze(U);return G!==void 0&&(Y=Y.toString(G)),Y}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const U=new cr(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(U._state),U._finalized=this._finalized,U}};const createKeccak=keccak$2,createShake=shake;var api=function(R){const E=createKeccak(R),U=createShake(R);return function(G,Y){switch(typeof G=="string"?G.toLowerCase():G){case"keccak224":return new E(1152,448,null,224,Y);case"keccak256":return new E(1088,512,null,256,Y);case"keccak384":return new E(832,768,null,384,Y);case"keccak512":return new E(576,1024,null,512,Y);case"sha3-224":return new E(1152,448,6,224,Y);case"sha3-256":return new E(1088,512,6,256,Y);case"sha3-384":return new E(832,768,6,384,Y);case"sha3-512":return new E(576,1024,6,512,Y);case"shake128":return new U(1344,256,31,Y);case"shake256":return new U(1088,512,31,Y);default:throw new Error("Invald algorithm: "+G)}}},keccakStateUnroll={};const P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];keccakStateUnroll.p1600=function(R){for(let E=0;E<24;++E){const U=R[0]^R[10]^R[20]^R[30]^R[40],G=R[1]^R[11]^R[21]^R[31]^R[41],Y=R[2]^R[12]^R[22]^R[32]^R[42],J=R[3]^R[13]^R[23]^R[33]^R[43],Q=R[4]^R[14]^R[24]^R[34]^R[44],X=R[5]^R[15]^R[25]^R[35]^R[45],Z=R[6]^R[16]^R[26]^R[36]^R[46],ee=R[7]^R[17]^R[27]^R[37]^R[47],te=R[8]^R[18]^R[28]^R[38]^R[48],ne=R[9]^R[19]^R[29]^R[39]^R[49];let oe=te^(Y<<1|J>>>31),ce=ne^(J<<1|Y>>>31);const pe=R[0]^oe,ye=R[1]^ce,Se=R[10]^oe,ge=R[11]^ce,_e=R[20]^oe,Te=R[21]^ce,Ee=R[30]^oe,Re=R[31]^ce,Ae=R[40]^oe,Ie=R[41]^ce;oe=U^(Q<<1|X>>>31),ce=G^(X<<1|Q>>>31);const Oe=R[2]^oe,Pe=R[3]^ce,Le=R[12]^oe,Me=R[13]^ce,ue=R[22]^oe,ae=R[23]^ce,se=R[32]^oe,le=R[33]^ce,fe=R[42]^oe,be=R[43]^ce;oe=Y^(Z<<1|ee>>>31),ce=J^(ee<<1|Z>>>31);const ve=R[4]^oe,xe=R[5]^ce,he=R[14]^oe,me=R[15]^ce,de=R[24]^oe,Ce=R[25]^ce,Fe=R[34]^oe,we=R[35]^ce,ke=R[44]^oe,Ne=R[45]^ce;oe=Q^(te<<1|ne>>>31),ce=X^(ne<<1|te>>>31);const He=R[6]^oe,Ue=R[7]^ce,Ge=R[16]^oe,De=R[17]^ce,$e=R[26]^oe,Be=R[27]^ce,je=R[36]^oe,ze=R[37]^ce,We=R[46]^oe,Ke=R[47]^ce;oe=Z^(U<<1|G>>>31),ce=ee^(G<<1|U>>>31);const Ye=R[8]^oe,Je=R[9]^ce,Qe=R[18]^oe,qe=R[19]^ce,rt=R[28]^oe,tt=R[29]^ce,Xe=R[38]^oe,it=R[39]^ce,st=R[48]^oe,nt=R[49]^ce,ot=pe,pt=ye,dt=ge<<4|Se>>>28,Et=Se<<4|ge>>>28,Ct=_e<<3|Te>>>29,ht=Te<<3|_e>>>29,Ve=Re<<9|Ee>>>23,et=Ee<<9|Re>>>23,Ze=Ae<<18|Ie>>>14,ut=Ie<<18|Ae>>>14,at=Oe<<1|Pe>>>31,ct=Pe<<1|Oe>>>31,wt=Me<<12|Le>>>20,Tt=Le<<12|Me>>>20,yt=ue<<10|ae>>>22,$t=ae<<10|ue>>>22,kt=le<<13|se>>>19,mt=se<<13|le>>>19,Mt=fe<<2|be>>>30,Ot=be<<2|fe>>>30,bt=xe<<30|ve>>>2,Rt=ve<<30|xe>>>2,Dt=he<<6|me>>>26,vt=me<<6|he>>>26,Nt=Ce<<11|de>>>21,Pt=de<<11|Ce>>>21,xt=Fe<<15|we>>>17,Bt=we<<15|Fe>>>17,Lt=Ne<<29|ke>>>3,_t=ke<<29|Ne>>>3,Ft=He<<28|Ue>>>4,jt=Ue<<28|He>>>4,St=De<<23|Ge>>>9,Ht=Ge<<23|De>>>9,At=$e<<25|Be>>>7,It=Be<<25|$e>>>7,Ut=je<<21|ze>>>11,zt=ze<<21|je>>>11,Wt=Ke<<24|We>>>8,Vt=We<<24|Ke>>>8,qt=Ye<<27|Je>>>5,Gt=Je<<27|Ye>>>5,Kt=Qe<<20|qe>>>12,Yt=qe<<20|Qe>>>12,Jt=tt<<7|rt>>>25,Qt=rt<<7|tt>>>25,Xt=Xe<<8|it>>>24,Zt=it<<8|Xe>>>24,er=st<<14|nt>>>18,tr=nt<<14|st>>>18;R[0]=ot^~wt&Nt,R[1]=pt^~Tt&Pt,R[10]=Ft^~Kt&Ct,R[11]=jt^~Yt&ht,R[20]=at^~Dt&At,R[21]=ct^~vt&It,R[30]=qt^~dt&yt,R[31]=Gt^~Et&$t,R[40]=bt^~St&Jt,R[41]=Rt^~Ht&Qt,R[2]=wt^~Nt&Ut,R[3]=Tt^~Pt&zt,R[12]=Kt^~Ct&kt,R[13]=Yt^~ht&mt,R[22]=Dt^~At&Xt,R[23]=vt^~It&Zt,R[32]=dt^~yt&xt,R[33]=Et^~$t&Bt,R[42]=St^~Jt&Ve,R[43]=Ht^~Qt&et,R[4]=Nt^~Ut&er,R[5]=Pt^~zt&tr,R[14]=Ct^~kt&Lt,R[15]=ht^~mt&_t,R[24]=At^~Xt&Ze,R[25]=It^~Zt&ut,R[34]=yt^~xt&Wt,R[35]=$t^~Bt&Vt,R[44]=Jt^~Ve&Mt,R[45]=Qt^~et&Ot,R[6]=Ut^~er&ot,R[7]=zt^~tr&pt,R[16]=kt^~Lt&Ft,R[17]=mt^~_t&jt,R[26]=Xt^~Ze&at,R[27]=Zt^~ut&ct,R[36]=xt^~Wt&qt,R[37]=Bt^~Vt&Gt,R[46]=Ve^~Mt&bt,R[47]=et^~Ot&Rt,R[8]=er^~ot&wt,R[9]=tr^~pt&Tt,R[18]=Lt^~Ft&Kt,R[19]=_t^~jt&Yt,R[28]=Ze^~at&Dt,R[29]=ut^~ct&vt,R[38]=Wt^~qt&dt,R[39]=Vt^~Gt&Et,R[48]=Mt^~bt&St,R[49]=Ot^~Rt&Ht,R[0]^=P1600_ROUND_CONSTANTS[E*2],R[1]^=P1600_ROUND_CONSTANTS[E*2+1]}};const keccakState=keccakStateUnroll;function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Keccak.prototype.initialize=function(R,E){for(let U=0;U<50;++U)this.state[U]=0;this.blockSize=R/8,this.count=0,this.squeezing=!1};Keccak.prototype.absorb=function(R){for(let E=0;E<R.length;++E)this.state[~~(this.count/4)]^=R[E]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0)};Keccak.prototype.absorbLastFewBits=function(R){this.state[~~(this.count/4)]^=R<<8*(this.count%4),(R&128)!==0&&this.count===this.blockSize-1&&keccakState.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),keccakState.p1600(this.state),this.count=0,this.squeezing=!0};Keccak.prototype.squeeze=function(R){this.squeezing||this.absorbLastFewBits(1);const E=Buffer.alloc(R);for(let U=0;U<R;++U)E[U]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0);return E};Keccak.prototype.copy=function(R){for(let E=0;E<50;++E)R.state[E]=this.state[E];R.blockSize=this.blockSize,R.count=this.count,R.squeezing=this.squeezing};var keccak$1=Keccak,js=api(keccak$1);const createKeccakHash=js,BN$1=bn.exports;function zeros(R){return Buffer.allocUnsafe(R).fill(0)}function setLength(R,E,U){const G=zeros(E);return R=toBuffer(R),U?R.length<E?(R.copy(G),G):R.slice(0,E):R.length<E?(R.copy(G,E-R.length),G):R.slice(-E)}function setLengthRight(R,E){return setLength(R,E,!0)}function toBuffer(R){if(!Buffer.isBuffer(R))if(Array.isArray(R))R=Buffer.from(R);else if(typeof R=="string")isHexString(R)?R=Buffer.from(padToEven(stripHexPrefix(R)),"hex"):R=Buffer.from(R);else if(typeof R=="number")R=intToBuffer(R);else if(R==null)R=Buffer.allocUnsafe(0);else if(BN$1.isBN(R))R=R.toArrayLike(Buffer);else if(R.toArray)R=Buffer.from(R.toArray());else throw new Error("invalid type");return R}function bufferToHex(R){return R=toBuffer(R),"0x"+R.toString("hex")}function keccak(R,E){return R=toBuffer(R),E||(E=256),createKeccakHash("keccak"+E).update(R).digest()}function padToEven(R){return R.length%2?"0"+R:R}function isHexString(R){return typeof R=="string"&&R.match(/^0x[0-9A-Fa-f]*$/)}function stripHexPrefix(R){return typeof R=="string"&&R.startsWith("0x")?R.slice(2):R}var util$7={zeros,setLength,setLengthRight,isHexString,stripHexPrefix,toBuffer,bufferToHex,keccak};const util$6=util$7,BN=bn.exports;function elementaryName(R){return R.startsWith("int[")?"int256"+R.slice(3):R==="int"?"int256":R.startsWith("uint[")?"uint256"+R.slice(4):R==="uint"?"uint256":R.startsWith("fixed[")?"fixed128x128"+R.slice(5):R==="fixed"?"fixed128x128":R.startsWith("ufixed[")?"ufixed128x128"+R.slice(6):R==="ufixed"?"ufixed128x128":R}function parseTypeN(R){return parseInt(/^\D+(\d+)$/.exec(R)[1],10)}function parseTypeNxM(R){var E=/^\D+(\d+)x(\d+)$/.exec(R);return[parseInt(E[1],10),parseInt(E[2],10)]}function parseTypeArray(R){var E=R.match(/(.*)\[(.*?)\]$/);return E?E[2]===""?"dynamic":parseInt(E[2],10):null}function parseNumber(R){var E=typeof R;if(E==="string")return util$6.isHexString(R)?new BN(util$6.stripHexPrefix(R),16):new BN(R,10);if(E==="number")return new BN(R);if(R.toArray)return R;throw new Error("Argument is not a number")}function encodeSingle(R,E){var U,G,Y,J;if(R==="address")return encodeSingle("uint160",parseNumber(E));if(R==="bool")return encodeSingle("uint8",E?1:0);if(R==="string")return encodeSingle("bytes",new Buffer(E,"utf8"));if(isArray$1(R)){if(typeof E.length>"u")throw new Error("Not an array?");if(U=parseTypeArray(R),U!=="dynamic"&&U!==0&&E.length>U)throw new Error("Elements exceed array size: "+U);Y=[],R=R.slice(0,R.lastIndexOf("[")),typeof E=="string"&&(E=JSON.parse(E));for(J in E)Y.push(encodeSingle(R,E[J]));if(U==="dynamic"){var Q=encodeSingle("uint256",E.length);Y.unshift(Q)}return Buffer.concat(Y)}else{if(R==="bytes")return E=new Buffer(E),Y=Buffer.concat([encodeSingle("uint256",E.length),E]),E.length%32!==0&&(Y=Buffer.concat([Y,util$6.zeros(32-E.length%32)])),Y;if(R.startsWith("bytes")){if(U=parseTypeN(R),U<1||U>32)throw new Error("Invalid bytes<N> width: "+U);return util$6.setLengthRight(E,32)}else if(R.startsWith("uint")){if(U=parseTypeN(R),U%8||U<8||U>256)throw new Error("Invalid uint<N> width: "+U);if(G=parseNumber(E),G.bitLength()>U)throw new Error("Supplied uint exceeds width: "+U+" vs "+G.bitLength());if(G<0)throw new Error("Supplied uint is negative");return G.toArrayLike(Buffer,"be",32)}else if(R.startsWith("int")){if(U=parseTypeN(R),U%8||U<8||U>256)throw new Error("Invalid int<N> width: "+U);if(G=parseNumber(E),G.bitLength()>U)throw new Error("Supplied int exceeds width: "+U+" vs "+G.bitLength());return G.toTwos(256).toArrayLike(Buffer,"be",32)}else if(R.startsWith("ufixed")){if(U=parseTypeNxM(R),G=parseNumber(E),G<0)throw new Error("Supplied ufixed is negative");return encodeSingle("uint256",G.mul(new BN(2).pow(new BN(U[1]))))}else if(R.startsWith("fixed"))return U=parseTypeNxM(R),encodeSingle("int256",parseNumber(E).mul(new BN(2).pow(new BN(U[1]))))}throw new Error("Unsupported or invalid type: "+R)}function isDynamic(R){return R==="string"||R==="bytes"||parseTypeArray(R)==="dynamic"}function isArray$1(R){return R.lastIndexOf("]")===R.length-1}function rawEncode(R,E){var U=[],G=[],Y=32*R.length;for(var J in R){var Q=elementaryName(R[J]),X=E[J],Z=encodeSingle(Q,X);isDynamic(Q)?(U.push(encodeSingle("uint256",Y)),G.push(Z),Y+=Z.length):U.push(Z)}return Buffer.concat(U.concat(G))}function solidityPack(R,E){if(R.length!==E.length)throw new Error("Number of types are not matching the values");for(var U,G,Y=[],J=0;J<R.length;J++){var Q=elementaryName(R[J]),X=E[J];if(Q==="bytes")Y.push(X);else if(Q==="string")Y.push(new Buffer(X,"utf8"));else if(Q==="bool")Y.push(new Buffer(X?"01":"00","hex"));else if(Q==="address")Y.push(util$6.setLength(X,20));else if(Q.startsWith("bytes")){if(U=parseTypeN(Q),U<1||U>32)throw new Error("Invalid bytes<N> width: "+U);Y.push(util$6.setLengthRight(X,U))}else if(Q.startsWith("uint")){if(U=parseTypeN(Q),U%8||U<8||U>256)throw new Error("Invalid uint<N> width: "+U);if(G=parseNumber(X),G.bitLength()>U)throw new Error("Supplied uint exceeds width: "+U+" vs "+G.bitLength());Y.push(G.toArrayLike(Buffer,"be",U/8))}else if(Q.startsWith("int")){if(U=parseTypeN(Q),U%8||U<8||U>256)throw new Error("Invalid int<N> width: "+U);if(G=parseNumber(X),G.bitLength()>U)throw new Error("Supplied int exceeds width: "+U+" vs "+G.bitLength());Y.push(G.toTwos(U).toArrayLike(Buffer,"be",U/8))}else throw new Error("Unsupported or invalid type: "+Q)}return Buffer.concat(Y)}function soliditySHA3(R,E){return util$6.keccak(solidityPack(R,E))}var abi$1={rawEncode,solidityPack,soliditySHA3};const util$5=util$7,abi=abi$1,TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},TypedDataUtils={encodeData(R,E,U,G=!0){const Y=["bytes32"],J=[this.hashType(R,U)];if(G){const Q=(X,Z,ee)=>{if(U[Z]!==void 0)return["bytes32",ee==null?"0x0000000000000000000000000000000000000000000000000000000000000000":util$5.keccak(this.encodeData(Z,ee,U,G))];if(ee===void 0)throw new Error(`missing value for field ${X} of type ${Z}`);if(Z==="bytes")return["bytes32",util$5.keccak(ee)];if(Z==="string")return typeof ee=="string"&&(ee=Buffer.from(ee,"utf8")),["bytes32",util$5.keccak(ee)];if(Z.lastIndexOf("]")===Z.length-1){const te=Z.slice(0,Z.lastIndexOf("[")),ne=ee.map(oe=>Q(X,te,oe));return["bytes32",util$5.keccak(abi.rawEncode(ne.map(([oe])=>oe),ne.map(([,oe])=>oe)))]}return[Z,ee]};for(const X of U[R]){const[Z,ee]=Q(X.name,X.type,E[X.name]);Y.push(Z),J.push(ee)}}else for(const Q of U[R]){let X=E[Q.name];if(X!==void 0)if(Q.type==="bytes")Y.push("bytes32"),X=util$5.keccak(X),J.push(X);else if(Q.type==="string")Y.push("bytes32"),typeof X=="string"&&(X=Buffer.from(X,"utf8")),X=util$5.keccak(X),J.push(X);else if(U[Q.type]!==void 0)Y.push("bytes32"),X=util$5.keccak(this.encodeData(Q.type,X,U,G)),J.push(X);else{if(Q.type.lastIndexOf("]")===Q.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");Y.push(Q.type),J.push(X)}}return abi.rawEncode(Y,J)},encodeType(R,E){let U="",G=this.findTypeDependencies(R,E).filter(Y=>Y!==R);G=[R].concat(G.sort());for(const Y of G){if(!E[Y])throw new Error("No type definition specified: "+Y);U+=Y+"("+E[Y].map(({name:Q,type:X})=>X+" "+Q).join(",")+")"}return U},findTypeDependencies(R,E,U=[]){if(R=R.match(/^\w*/)[0],U.includes(R)||E[R]===void 0)return U;U.push(R);for(const G of E[R])for(const Y of this.findTypeDependencies(G.type,E,U))!U.includes(Y)&&U.push(Y);return U},hashStruct(R,E,U,G=!0){return util$5.keccak(this.encodeData(R,E,U,G))},hashType(R,E){return util$5.keccak(this.encodeType(R,E))},sanitizeData(R){const E={};for(const U in TYPED_MESSAGE_SCHEMA.properties)R[U]&&(E[U]=R[U]);return E.types&&(E.types=Object.assign({EIP712Domain:[]},E.types)),E},hash(R,E=!0){const U=this.sanitizeData(R),G=[Buffer.from("1901","hex")];return G.push(this.hashStruct("EIP712Domain",U.domain,U.types,E)),U.primaryType!=="EIP712Domain"&&G.push(this.hashStruct(U.primaryType,U.message,U.types,E)),util$5.keccak(Buffer.concat(G))}};var ethEip712Util={TYPED_MESSAGE_SCHEMA,TypedDataUtils,hashForSignTypedDataLegacy:function(R){return typedSignatureHashLegacy(R.data)},hashForSignTypedData_v3:function(R){return TypedDataUtils.hash(R.data,!1)},hashForSignTypedData_v4:function(R){return TypedDataUtils.hash(R.data)}};function typedSignatureHashLegacy(R){const E=new Error("Expect argument to be non-empty array");if(typeof R!="object"||!R.length)throw E;const U=R.map(function(J){return J.type==="bytes"?util$5.toBuffer(J.value):J.value}),G=R.map(function(J){return J.type}),Y=R.map(function(J){if(!J.name)throw E;return J.type+" "+J.name});return abi.soliditySHA3(["bytes32","bytes32"],[abi.soliditySHA3(new Array(R.length).fill("string"),Y),abi.soliditySHA3(G,U)])}var FilterPolyfill$1={};Object.defineProperty(FilterPolyfill$1,"__esModule",{value:!0});FilterPolyfill$1.filterFromParam=FilterPolyfill$1.FilterPolyfill=void 0;const types_1$2=types$2,util_1$6=util$8,TIMEOUT=5*60*1e3,JSONRPC_TEMPLATE={jsonrpc:"2.0",id:0};class FilterPolyfill{constructor(E){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,types_1$2.IntNumber)(1),this.provider=E}async newFilter(E){const U=filterFromParam(E),G=this.makeFilterId(),Y=await this.setInitialCursorPosition(G,U.fromBlock);return console.log(`Installing new log filter(${G}):`,U,"initial cursor position:",Y),this.logFilters.set(G,U),this.setFilterTimeout(G),(0,util_1$6.hexStringFromIntNumber)(G)}async newBlockFilter(){const E=this.makeFilterId(),U=await this.setInitialCursorPosition(E,"latest");return console.log(`Installing new block filter (${E}) with initial cursor position:`,U),this.blockFilters.add(E),this.setFilterTimeout(E),(0,util_1$6.hexStringFromIntNumber)(E)}async newPendingTransactionFilter(){const E=this.makeFilterId(),U=await this.setInitialCursorPosition(E,"latest");return console.log(`Installing new block filter (${E}) with initial cursor position:`,U),this.pendingTransactionFilters.add(E),this.setFilterTimeout(E),(0,util_1$6.hexStringFromIntNumber)(E)}uninstallFilter(E){const U=(0,util_1$6.intNumberFromHexString)(E);return console.log(`Uninstalling filter (${U})`),this.deleteFilter(U),!0}getFilterChanges(E){const U=(0,util_1$6.intNumberFromHexString)(E);return this.timeouts.has(U)&&this.setFilterTimeout(U),this.logFilters.has(U)?this.getLogFilterChanges(U):this.blockFilters.has(U)?this.getBlockFilterChanges(U):this.pendingTransactionFilters.has(U)?this.getPendingTransactionFilterChanges(U):Promise.resolve(filterNotFoundError())}async getFilterLogs(E){const U=(0,util_1$6.intNumberFromHexString)(E),G=this.logFilters.get(U);return G?this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getLogs",params:[paramFromFilter(G)]})):filterNotFoundError()}makeFilterId(){return(0,types_1$2.IntNumber)(++this.nextFilterId)}sendAsyncPromise(E){return new Promise((U,G)=>{this.provider.sendAsync(E,(Y,J)=>{if(Y)return G(Y);if(Array.isArray(J)||J==null)return G(new Error(`unexpected response received: ${JSON.stringify(J)}`));U(J)})})}deleteFilter(E){console.log(`Deleting filter (${E})`),this.logFilters.delete(E),this.blockFilters.delete(E),this.pendingTransactionFilters.delete(E),this.cursors.delete(E),this.timeouts.delete(E)}async getLogFilterChanges(E){const U=this.logFilters.get(E),G=this.cursors.get(E);if(!G||!U)return filterNotFoundError();const Y=await this.getCurrentBlockHeight(),J=U.toBlock==="latest"?Y:U.toBlock;if(G>Y||G>U.toBlock)return emptyResult();console.log(`Fetching logs from ${G} to ${J} for filter ${E}`);const Q=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getLogs",params:[paramFromFilter(Object.assign(Object.assign({},U),{fromBlock:G,toBlock:J}))]}));if(Array.isArray(Q.result)){const X=Q.result.map(ee=>(0,util_1$6.intNumberFromHexString)(ee.blockNumber||"0x0")),Z=Math.max(...X);if(Z&&Z>G){const ee=(0,types_1$2.IntNumber)(Z+1);console.log(`Moving cursor position for filter (${E}) from ${G} to ${ee}`),this.cursors.set(E,ee)}}return Q}async getBlockFilterChanges(E){const U=this.cursors.get(E);if(!U)return filterNotFoundError();const G=await this.getCurrentBlockHeight();if(U>G)return emptyResult();console.log(`Fetching blocks from ${U} to ${G} for filter (${E})`);const Y=(await Promise.all((0,util_1$6.range)(U,G+1).map(Q=>this.getBlockHashByNumber((0,types_1$2.IntNumber)(Q))))).filter(Q=>!!Q),J=(0,types_1$2.IntNumber)(U+Y.length);return console.log(`Moving cursor position for filter (${E}) from ${U} to ${J}`),this.cursors.set(E,J),Object.assign(Object.assign({},JSONRPC_TEMPLATE),{result:Y})}async getPendingTransactionFilterChanges(E){return Promise.resolve(emptyResult())}async setInitialCursorPosition(E,U){const G=await this.getCurrentBlockHeight(),Y=typeof U=="number"&&U>G?U:G;return this.cursors.set(E,Y),Y}setFilterTimeout(E){const U=this.timeouts.get(E);U&&window.clearTimeout(U);const G=window.setTimeout(()=>{console.log(`Filter (${E}) timed out`),this.deleteFilter(E)},TIMEOUT);this.timeouts.set(E,G)}async getCurrentBlockHeight(){const{result:E}=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_blockNumber",params:[]}));return(0,util_1$6.intNumberFromHexString)((0,util_1$6.ensureHexString)(E))}async getBlockHashByNumber(E){const U=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getBlockByNumber",params:[(0,util_1$6.hexStringFromIntNumber)(E),!1]}));return U.result&&typeof U.result.hash=="string"?(0,util_1$6.ensureHexString)(U.result.hash):null}}FilterPolyfill$1.FilterPolyfill=FilterPolyfill;function filterFromParam(R){return{fromBlock:intBlockHeightFromHexBlockHeight(R.fromBlock),toBlock:intBlockHeightFromHexBlockHeight(R.toBlock),addresses:R.address===void 0?null:Array.isArray(R.address)?R.address:[R.address],topics:R.topics||[]}}FilterPolyfill$1.filterFromParam=filterFromParam;function paramFromFilter(R){const E={fromBlock:hexBlockHeightFromIntBlockHeight(R.fromBlock),toBlock:hexBlockHeightFromIntBlockHeight(R.toBlock),topics:R.topics};return R.addresses!==null&&(E.address=R.addresses),E}function intBlockHeightFromHexBlockHeight(R){if(R===void 0||R==="latest"||R==="pending")return"latest";if(R==="earliest")return(0,types_1$2.IntNumber)(0);if((0,util_1$6.isHexString)(R))return(0,util_1$6.intNumberFromHexString)(R);throw new Error(`Invalid block option: ${String(R)}`)}function hexBlockHeightFromIntBlockHeight(R){return R==="latest"?R:(0,util_1$6.hexStringFromIntNumber)(R)}function filterNotFoundError(){return Object.assign(Object.assign({},JSONRPC_TEMPLATE),{error:{code:-32e3,message:"filter not found"}})}function emptyResult(){return Object.assign(Object.assign({},JSONRPC_TEMPLATE),{result:[]})}var JSONRPC={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.JSONRPCMethod=void 0,function(E){E.eth_accounts="eth_accounts",E.eth_coinbase="eth_coinbase",E.net_version="net_version",E.eth_chainId="eth_chainId",E.eth_uninstallFilter="eth_uninstallFilter",E.eth_requestAccounts="eth_requestAccounts",E.eth_sign="eth_sign",E.eth_ecRecover="eth_ecRecover",E.personal_sign="personal_sign",E.personal_ecRecover="personal_ecRecover",E.eth_signTransaction="eth_signTransaction",E.eth_sendRawTransaction="eth_sendRawTransaction",E.eth_sendTransaction="eth_sendTransaction",E.eth_signTypedData_v1="eth_signTypedData_v1",E.eth_signTypedData_v2="eth_signTypedData_v2",E.eth_signTypedData_v3="eth_signTypedData_v3",E.eth_signTypedData_v4="eth_signTypedData_v4",E.eth_signTypedData="eth_signTypedData",E.cbWallet_arbitrary="walletlink_arbitrary",E.wallet_addEthereumChain="wallet_addEthereumChain",E.wallet_switchEthereumChain="wallet_switchEthereumChain",E.wallet_watchAsset="wallet_watchAsset",E.eth_subscribe="eth_subscribe",E.eth_unsubscribe="eth_unsubscribe",E.eth_newFilter="eth_newFilter",E.eth_newBlockFilter="eth_newBlockFilter",E.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",E.eth_getFilterChanges="eth_getFilterChanges",E.eth_getFilterLogs="eth_getFilterLogs"}(R.JSONRPCMethod||(R.JSONRPCMethod={}))})(JSONRPC);var SubscriptionManager$1={},dist$4={},PollingBlockTracker$1={},jsonRpcRandomId=IdIterator;function IdIterator(R){R=R||{};var E=R.max||Number.MAX_SAFE_INTEGER,U=typeof R.start<"u"?R.start:Math.floor(Math.random()*E);return function(){return U=U%E,U++}}const processFn$1=(R,E)=>function(){const U=E.promiseModule,G=new Array(arguments.length);for(let Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return new U((Y,J)=>{E.errorFirst?G.push(function(Q,X){if(E.multiArgs){const Z=new Array(arguments.length-1);for(let ee=1;ee<arguments.length;ee++)Z[ee-1]=arguments[ee];Q?(Z.unshift(Q),J(Z)):Y(Z)}else Q?J(Q):Y(X)}):G.push(function(Q){if(E.multiArgs){const X=new Array(arguments.length-1);for(let Z=0;Z<arguments.length;Z++)X[Z]=arguments[Z];Y(X)}else Y(Q)}),R.apply(this,G)})};var pify$2=(R,E)=>{E=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},E);const U=Y=>{const J=Q=>typeof Q=="string"?Y===Q:Q.test(Y);return E.include?E.include.some(J):!E.exclude.some(J)};let G;typeof R=="function"?G=function(){return E.excludeMain?R.apply(this,arguments):processFn$1(R,E).apply(this,arguments)}:G=Object.create(Object.getPrototypeOf(R));for(const Y in R){const J=R[Y];G[Y]=typeof J=="function"&&U(Y)?processFn$1(J,E):J}return G},BaseBlockTracker$1={},__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(BaseBlockTracker$1,"__esModule",{value:!0});BaseBlockTracker$1.BaseBlockTracker=void 0;const safe_event_emitter_1$2=__importDefault$d(safeEventEmitter),sec$1=1e3,calculateSum=(R,E)=>R+E,blockTrackerEvents=["sync","latest"];class BaseBlockTracker extends safe_event_emitter_1$2.default{constructor(E){super(),this._blockResetDuration=E.blockResetDuration||20*sec$1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(U=>this.once("latest",U))}removeAllListeners(E){return E?super.removeAllListeners(E):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(E){blockTrackerEvents.includes(E)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){!this._isRunning||(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return blockTrackerEvents.map(E=>this.listenerCount(E)).reduce(calculateSum)}_newPotentialLatest(E){const U=this._currentBlock;U&&hexToInt$4(E)<=hexToInt$4(U)||this._setCurrentBlock(E)}_setCurrentBlock(E){const U=this._currentBlock;this._currentBlock=E,this.emit("latest",E),this.emit("sync",{oldBlock:U,newBlock:E})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}BaseBlockTracker$1.BaseBlockTracker=BaseBlockTracker;function hexToInt$4(R){return Number.parseInt(R,16)}var loggingUtils={},dist$3={},assert$2={};class StructError extends TypeError{constructor(E,U){let G;const{message:Y,explanation:J,...Q}=E,{path:X}=E,Z=X.length===0?Y:`At path: ${X.join(".")} -- ${Y}`;super(J!=null?J:Z),J!=null&&(this.cause=Z),Object.assign(this,Q),this.name=this.constructor.name,this.failures=()=>G!=null?G:G=[E,...U()]}}function isIterable$1(R){return isObject$1(R)&&typeof R[Symbol.iterator]=="function"}function isObject$1(R){return typeof R=="object"&&R!=null}function isPlainObject$2(R){if(Object.prototype.toString.call(R)!=="[object Object]")return!1;const E=Object.getPrototypeOf(R);return E===null||E===Object.prototype}function print(R){return typeof R=="symbol"?R.toString():typeof R=="string"?JSON.stringify(R):`${R}`}function shiftIterator(R){const{done:E,value:U}=R.next();return E?void 0:U}function toFailure(R,E,U,G){if(R===!0)return;R===!1?R={}:typeof R=="string"&&(R={message:R});const{path:Y,branch:J}=E,{type:Q}=U,{refinement:X,message:Z=`Expected a value of type \`${Q}\`${X?` with refinement \`${X}\``:""}, but received: \`${print(G)}\``}=R;return{value:G,type:Q,refinement:X,key:Y[Y.length-1],path:Y,branch:J,...R,message:Z}}function*toFailures(R,E,U,G){isIterable$1(R)||(R=[R]);for(const Y of R){const J=toFailure(Y,E,U,G);J&&(yield J)}}function*run$2(R,E,U={}){const{path:G=[],branch:Y=[R],coerce:J=!1,mask:Q=!1}=U,X={path:G,branch:Y};if(J&&(R=E.coercer(R,X),Q&&E.type!=="type"&&isObject$1(E.schema)&&isObject$1(R)&&!Array.isArray(R)))for(const ee in R)E.schema[ee]===void 0&&delete R[ee];let Z="valid";for(const ee of E.validator(R,X))ee.explanation=U.message,Z="not_valid",yield[ee,void 0];for(let[ee,te,ne]of E.entries(R,X)){const oe=run$2(te,ne,{path:ee===void 0?G:[...G,ee],branch:ee===void 0?Y:[...Y,te],coerce:J,mask:Q,message:U.message});for(const ce of oe)ce[0]?(Z=ce[0].refinement!=null?"not_refined":"not_valid",yield[ce[0],void 0]):J&&(te=ce[1],ee===void 0?R=te:R instanceof Map?R.set(ee,te):R instanceof Set?R.add(te):isObject$1(R)&&(te!==void 0||ee in R)&&(R[ee]=te))}if(Z!=="not_valid")for(const ee of E.refiner(R,X))ee.explanation=U.message,Z="not_refined",yield[ee,void 0];Z==="valid"&&(yield[void 0,R])}class Struct{constructor(E){const{type:U,schema:G,validator:Y,refiner:J,coercer:Q=Z=>Z,entries:X=function*(){}}=E;this.type=U,this.schema=G,this.entries=X,this.coercer=Q,Y?this.validator=(Z,ee)=>{const te=Y(Z,ee);return toFailures(te,ee,this,Z)}:this.validator=()=>[],J?this.refiner=(Z,ee)=>{const te=J(Z,ee);return toFailures(te,ee,this,Z)}:this.refiner=()=>[]}assert(E,U){return assert$1(E,this,U)}create(E,U){return create$4(E,this,U)}is(E){return is$1(E,this)}mask(E,U){return mask(E,this,U)}validate(E,U={}){return validate$1(E,this,U)}}function assert$1(R,E,U){const G=validate$1(R,E,{message:U});if(G[0])throw G[0]}function create$4(R,E,U){const G=validate$1(R,E,{coerce:!0,message:U});if(G[0])throw G[0];return G[1]}function mask(R,E,U){const G=validate$1(R,E,{coerce:!0,mask:!0,message:U});if(G[0])throw G[0];return G[1]}function is$1(R,E){return!validate$1(R,E)[0]}function validate$1(R,E,U={}){const G=run$2(R,E,U),Y=shiftIterator(G);if(Y[0])return[new StructError(Y[0],function*(){for(const Q of G)Q[0]&&(yield Q[0])}),void 0];{const J=Y[1];return[void 0,J]}}function assign$1(...R){const E=R[0].type==="type",U=R.map(Y=>Y.schema),G=Object.assign({},...U);return E?type(G):object(G)}function define(R,E){return new Struct({type:R,schema:null,validator:E})}function deprecated(R,E){return new Struct({...R,refiner:(U,G)=>U===void 0||R.refiner(U,G),validator(U,G){return U===void 0?!0:(E(U,G),R.validator(U,G))}})}function dynamic(R){return new Struct({type:"dynamic",schema:null,*entries(E,U){yield*R(E,U).entries(E,U)},validator(E,U){return R(E,U).validator(E,U)},coercer(E,U){return R(E,U).coercer(E,U)},refiner(E,U){return R(E,U).refiner(E,U)}})}function lazy(R){let E;return new Struct({type:"lazy",schema:null,*entries(U,G){E!=null||(E=R()),yield*E.entries(U,G)},validator(U,G){return E!=null||(E=R()),E.validator(U,G)},coercer(U,G){return E!=null||(E=R()),E.coercer(U,G)},refiner(U,G){return E!=null||(E=R()),E.refiner(U,G)}})}function omit(R,E){const{schema:U}=R,G={...U};for(const Y of E)delete G[Y];switch(R.type){case"type":return type(G);default:return object(G)}}function partial(R){const E=R instanceof Struct?{...R.schema}:{...R};for(const U in E)E[U]=optional(E[U]);return object(E)}function pick(R,E){const{schema:U}=R,G={};for(const Y of E)G[Y]=U[Y];return object(G)}function struct(R,E){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),define(R,E)}function any(){return define("any",()=>!0)}function array(R){return new Struct({type:"array",schema:R,*entries(E){if(R&&Array.isArray(E))for(const[U,G]of E.entries())yield[U,G,R]},coercer(E){return Array.isArray(E)?E.slice():E},validator(E){return Array.isArray(E)||`Expected an array value, but received: ${print(E)}`}})}function bigint(){return define("bigint",R=>typeof R=="bigint")}function boolean(){return define("boolean",R=>typeof R=="boolean")}function date(){return define("date",R=>R instanceof Date&&!isNaN(R.getTime())||`Expected a valid \`Date\` object, but received: ${print(R)}`)}function enums(R){const E={},U=R.map(G=>print(G)).join();for(const G of R)E[G]=G;return new Struct({type:"enums",schema:E,validator(G){return R.includes(G)||`Expected one of \`${U}\`, but received: ${print(G)}`}})}function func(){return define("func",R=>typeof R=="function"||`Expected a function, but received: ${print(R)}`)}function instance(R){return define("instance",E=>E instanceof R||`Expected a \`${R.name}\` instance, but received: ${print(E)}`)}function integer(){return define("integer",R=>typeof R=="number"&&!isNaN(R)&&Number.isInteger(R)||`Expected an integer, but received: ${print(R)}`)}function intersection(R){return new Struct({type:"intersection",schema:null,*entries(E,U){for(const G of R)yield*G.entries(E,U)},*validator(E,U){for(const G of R)yield*G.validator(E,U)},*refiner(E,U){for(const G of R)yield*G.refiner(E,U)}})}function literal(R){const E=print(R),U=typeof R;return new Struct({type:"literal",schema:U==="string"||U==="number"||U==="boolean"?R:null,validator(G){return G===R||`Expected the literal \`${E}\`, but received: ${print(G)}`}})}function map$2(R,E){return new Struct({type:"map",schema:null,*entries(U){if(R&&E&&U instanceof Map)for(const[G,Y]of U.entries())yield[G,G,R],yield[G,Y,E]},coercer(U){return U instanceof Map?new Map(U):U},validator(U){return U instanceof Map||`Expected a \`Map\` object, but received: ${print(U)}`}})}function never$1(){return define("never",()=>!1)}function nullable(R){return new Struct({...R,validator:(E,U)=>E===null||R.validator(E,U),refiner:(E,U)=>E===null||R.refiner(E,U)})}function number$1(){return define("number",R=>typeof R=="number"&&!isNaN(R)||`Expected a number, but received: ${print(R)}`)}function object(R){const E=R?Object.keys(R):[],U=never$1();return new Struct({type:"object",schema:R||null,*entries(G){if(R&&isObject$1(G)){const Y=new Set(Object.keys(G));for(const J of E)Y.delete(J),yield[J,G[J],R[J]];for(const J of Y)yield[J,G[J],U]}},validator(G){return isObject$1(G)||`Expected an object, but received: ${print(G)}`},coercer(G){return isObject$1(G)?{...G}:G}})}function optional(R){return new Struct({...R,validator:(E,U)=>E===void 0||R.validator(E,U),refiner:(E,U)=>E===void 0||R.refiner(E,U)})}function record(R,E){return new Struct({type:"record",schema:null,*entries(U){if(isObject$1(U))for(const G in U){const Y=U[G];yield[G,G,R],yield[G,Y,E]}},validator(U){return isObject$1(U)||`Expected an object, but received: ${print(U)}`}})}function regexp(){return define("regexp",R=>R instanceof RegExp)}function set(R){return new Struct({type:"set",schema:null,*entries(E){if(R&&E instanceof Set)for(const U of E)yield[U,U,R]},coercer(E){return E instanceof Set?new Set(E):E},validator(E){return E instanceof Set||`Expected a \`Set\` object, but received: ${print(E)}`}})}function string$1(){return define("string",R=>typeof R=="string"||`Expected a string, but received: ${print(R)}`)}function tuple(R){const E=never$1();return new Struct({type:"tuple",schema:null,*entries(U){if(Array.isArray(U)){const G=Math.max(R.length,U.length);for(let Y=0;Y<G;Y++)yield[Y,U[Y],R[Y]||E]}},validator(U){return Array.isArray(U)||`Expected an array, but received: ${print(U)}`}})}function type(R){const E=Object.keys(R);return new Struct({type:"type",schema:R,*entries(U){if(isObject$1(U))for(const G of E)yield[G,U[G],R[G]]},validator(U){return isObject$1(U)||`Expected an object, but received: ${print(U)}`},coercer(U){return isObject$1(U)?{...U}:U}})}function union(R){const E=R.map(U=>U.type).join(" | ");return new Struct({type:"union",schema:null,coercer(U){for(const G of R){const[Y,J]=G.validate(U,{coerce:!0});if(!Y)return J}return U},validator(U,G){const Y=[];for(const J of R){const[...Q]=run$2(U,J,G),[X]=Q;if(X[0])for(const[Z]of Q)Z&&Y.push(Z);else return[]}return[`Expected the value to satisfy a union of \`${E}\`, but received: ${print(U)}`,...Y]}})}function unknown(){return define("unknown",()=>!0)}function coerce$3(R,E,U){return new Struct({...R,coercer:(G,Y)=>is$1(G,E)?R.coercer(U(G,Y),Y):R.coercer(G,Y)})}function defaulted(R,E,U={}){return coerce$3(R,unknown(),G=>{const Y=typeof E=="function"?E():E;if(G===void 0)return Y;if(!U.strict&&isPlainObject$2(G)&&isPlainObject$2(Y)){const J={...G};let Q=!1;for(const X in Y)J[X]===void 0&&(J[X]=Y[X],Q=!0);if(Q)return J}return G})}function trimmed(R){return coerce$3(R,string$1(),E=>E.trim())}function empty$3(R){return refine(R,"empty",E=>{const U=getSize(E);return U===0||`Expected an empty ${R.type} but received one with a size of \`${U}\``})}function getSize(R){return R instanceof Map||R instanceof Set?R.size:R.length}function max$2(R,E,U={}){const{exclusive:G}=U;return refine(R,"max",Y=>G?Y<E:Y<=E||`Expected a ${R.type} less than ${G?"":"or equal to "}${E} but received \`${Y}\``)}function min$2(R,E,U={}){const{exclusive:G}=U;return refine(R,"min",Y=>G?Y>E:Y>=E||`Expected a ${R.type} greater than ${G?"":"or equal to "}${E} but received \`${Y}\``)}function nonempty(R){return refine(R,"nonempty",E=>getSize(E)>0||`Expected a nonempty ${R.type} but received an empty one`)}function pattern(R,E){return refine(R,"pattern",U=>E.test(U)||`Expected a ${R.type} matching \`/${E.source}/\` but received "${U}"`)}function size(R,E,U=E){const G=`Expected a ${R.type}`,Y=E===U?`of \`${E}\``:`between \`${E}\` and \`${U}\``;return refine(R,"size",J=>{if(typeof J=="number"||J instanceof Date)return E<=J&&J<=U||`${G} ${Y} but received \`${J}\``;if(J instanceof Map||J instanceof Set){const{size:Q}=J;return E<=Q&&Q<=U||`${G} with a size ${Y} but received one with a size of \`${Q}\``}else{const{length:Q}=J;return E<=Q&&Q<=U||`${G} with a length ${Y} but received one with a length of \`${Q}\``}})}function refine(R,E,U){return new Struct({...R,*refiner(G,Y){yield*R.refiner(G,Y);const J=U(G,Y),Q=toFailures(J,Y,R,G);for(const X of Q)yield{...X,refinement:E}}})}const dist$2=Object.freeze(Object.defineProperty({__proto__:null,Struct,StructError,any,array,assert:assert$1,assign:assign$1,bigint,boolean,coerce:coerce$3,create:create$4,date,defaulted,define,deprecated,dynamic,empty:empty$3,enums,func,instance,integer,intersection,is:is$1,lazy,literal,map:map$2,mask,max:max$2,min:min$2,never:never$1,nonempty,nullable,number:number$1,object,omit,optional,partial,pattern,pick,record,refine,regexp,set,size,string:string$1,struct,trimmed,tuple,type,union,unknown,validate:validate$1},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(dist$2);Object.defineProperty(assert$2,"__esModule",{value:!0});assert$2.assertExhaustive=assert$2.assertStruct=assert$2.assert=assert$2.AssertionError=void 0;const superstruct_1$3=require$$1$3;function isErrorWithMessage(R){return typeof R=="object"&&R!==null&&"message"in R}function isConstructable(R){var E,U;return Boolean(typeof((U=(E=R==null?void 0:R.prototype)===null||E===void 0?void 0:E.constructor)===null||U===void 0?void 0:U.name)=="string")}function getErrorMessage(R){const E=isErrorWithMessage(R)?R.message:String(R);return E.endsWith(".")?E.slice(0,-1):E}function getError(R,E){return isConstructable(R)?new R({message:E}):R({message:E})}class AssertionError extends Error{constructor(E){super(E.message),this.code="ERR_ASSERTION"}}assert$2.AssertionError=AssertionError;function assert(R,E="Assertion failed.",U=AssertionError){if(!R)throw E instanceof Error?E:getError(U,E)}assert$2.assert=assert;function assertStruct(R,E,U="Assertion failed",G=AssertionError){try{(0,superstruct_1$3.assert)(R,E)}catch(Y){throw getError(G,`${U}: ${getErrorMessage(Y)}.`)}}assert$2.assertStruct=assertStruct;function assertExhaustive(R){throw new Error("Invalid branch reached. Should be detected during compilation.")}assert$2.assertExhaustive=assertExhaustive;var base64$5={};Object.defineProperty(base64$5,"__esModule",{value:!0});base64$5.base64=void 0;const superstruct_1$2=require$$1$3,assert_1$3=assert$2,base64$4=(R,E={})=>{var U,G;const Y=(U=E.paddingRequired)!==null&&U!==void 0?U:!1,J=(G=E.characterSet)!==null&&G!==void 0?G:"base64";let Q;J==="base64"?Q=String.raw`[A-Za-z0-9+\/]`:((0,assert_1$3.assert)(J==="base64url"),Q=String.raw`[-_A-Za-z0-9]`);let X;return Y?X=new RegExp(`^(?:${Q}{4})*(?:${Q}{3}=|${Q}{2}==)?$`,"u"):X=new RegExp(`^(?:${Q}{4})*(?:${Q}{2,3}|${Q}{3}=|${Q}{2}==)?$`,"u"),(0,superstruct_1$2.pattern)(R,X)};base64$5.base64=base64$4;var bytes={},hex={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.remove0x=R.add0x=R.assertIsStrictHexString=R.assertIsHexString=R.isStrictHexString=R.isHexString=R.StrictHexStruct=R.HexStruct=void 0;const E=require$$1$3,U=assert$2;R.HexStruct=(0,E.pattern)((0,E.string)(),/^(?:0x)?[0-9a-f]+$/iu),R.StrictHexStruct=(0,E.pattern)((0,E.string)(),/^0x[0-9a-f]+$/iu);function G(ee){return(0,E.is)(ee,R.HexStruct)}R.isHexString=G;function Y(ee){return(0,E.is)(ee,R.StrictHexStruct)}R.isStrictHexString=Y;function J(ee){(0,U.assert)(G(ee),"Value must be a hexadecimal string.")}R.assertIsHexString=J;function Q(ee){(0,U.assert)(Y(ee),'Value must be a hexadecimal string, starting with "0x".')}R.assertIsStrictHexString=Q;function X(ee){return ee.startsWith("0x")?ee:ee.startsWith("0X")?`0x${ee.substring(2)}`:`0x${ee}`}R.add0x=X;function Z(ee){return ee.startsWith("0x")||ee.startsWith("0X")?ee.substring(2):ee}R.remove0x=Z})(hex);Object.defineProperty(bytes,"__esModule",{value:!0});bytes.createDataView=bytes.concatBytes=bytes.valueToBytes=bytes.stringToBytes=bytes.numberToBytes=bytes.signedBigIntToBytes=bytes.bigIntToBytes=bytes.hexToBytes=bytes.bytesToString=bytes.bytesToNumber=bytes.bytesToSignedBigInt=bytes.bytesToBigInt=bytes.bytesToHex=bytes.assertIsBytes=bytes.isBytes=void 0;const assert_1$2=assert$2,hex_1$2=hex,HEX_MINIMUM_NUMBER_CHARACTER=48,HEX_MAXIMUM_NUMBER_CHARACTER=58,HEX_CHARACTER_OFFSET=87;function getPrecomputedHexValuesBuilder(){const R=[];return()=>{if(R.length===0)for(let E=0;E<256;E++)R.push(E.toString(16).padStart(2,"0"));return R}}const getPrecomputedHexValues=getPrecomputedHexValuesBuilder();function isBytes$1(R){return R instanceof Uint8Array}bytes.isBytes=isBytes$1;function assertIsBytes(R){(0,assert_1$2.assert)(isBytes$1(R),"Value must be a Uint8Array.")}bytes.assertIsBytes=assertIsBytes;function bytesToHex(R){if(assertIsBytes(R),R.length===0)return"0x";const E=getPrecomputedHexValues(),U=new Array(R.length);for(let G=0;G<R.length;G++)U[G]=E[R[G]];return(0,hex_1$2.add0x)(U.join(""))}bytes.bytesToHex=bytesToHex;function bytesToBigInt(R){assertIsBytes(R);const E=bytesToHex(R);return BigInt(E)}bytes.bytesToBigInt=bytesToBigInt;function bytesToSignedBigInt(R){assertIsBytes(R);let E=BigInt(0);for(const U of R)E=(E<<BigInt(8))+BigInt(U);return BigInt.asIntN(R.length*8,E)}bytes.bytesToSignedBigInt=bytesToSignedBigInt;function bytesToNumber(R){assertIsBytes(R);const E=bytesToBigInt(R);return(0,assert_1$2.assert)(E<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(E)}bytes.bytesToNumber=bytesToNumber;function bytesToString$1(R){return assertIsBytes(R),new TextDecoder().decode(R)}bytes.bytesToString=bytesToString$1;function hexToBytes(R){var E;if(((E=R==null?void 0:R.toLowerCase)===null||E===void 0?void 0:E.call(R))==="0x")return new Uint8Array;(0,hex_1$2.assertIsHexString)(R);const U=(0,hex_1$2.remove0x)(R).toLowerCase(),G=U.length%2===0?U:`0${U}`,Y=new Uint8Array(G.length/2);for(let J=0;J<Y.length;J++){const Q=G.charCodeAt(J*2),X=G.charCodeAt(J*2+1),Z=Q-(Q<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET),ee=X-(X<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET);Y[J]=Z*16+ee}return Y}bytes.hexToBytes=hexToBytes;function bigIntToBytes(R){(0,assert_1$2.assert)(typeof R=="bigint","Value must be a bigint."),(0,assert_1$2.assert)(R>=BigInt(0),"Value must be a non-negative bigint.");const E=R.toString(16);return hexToBytes(E)}bytes.bigIntToBytes=bigIntToBytes;function bigIntFits(R,E){(0,assert_1$2.assert)(E>0);const U=R>>BigInt(31);return!((~R&U)+(R&~U)>>BigInt(E*8+-1))}function signedBigIntToBytes(R,E){(0,assert_1$2.assert)(typeof R=="bigint","Value must be a bigint."),(0,assert_1$2.assert)(typeof E=="number","Byte length must be a number."),(0,assert_1$2.assert)(E>0,"Byte length must be greater than 0."),(0,assert_1$2.assert)(bigIntFits(R,E),"Byte length is too small to represent the given value.");let U=R;const G=new Uint8Array(E);for(let Y=0;Y<G.length;Y++)G[Y]=Number(BigInt.asUintN(8,U)),U>>=BigInt(8);return G.reverse()}bytes.signedBigIntToBytes=signedBigIntToBytes;function numberToBytes(R){(0,assert_1$2.assert)(typeof R=="number","Value must be a number."),(0,assert_1$2.assert)(R>=0,"Value must be a non-negative number."),(0,assert_1$2.assert)(Number.isSafeInteger(R),"Value is not a safe integer. Use `bigIntToBytes` instead.");const E=R.toString(16);return hexToBytes(E)}bytes.numberToBytes=numberToBytes;function stringToBytes$1(R){return(0,assert_1$2.assert)(typeof R=="string","Value must be a string."),new TextEncoder().encode(R)}bytes.stringToBytes=stringToBytes$1;function valueToBytes(R){if(typeof R=="bigint")return bigIntToBytes(R);if(typeof R=="number")return numberToBytes(R);if(typeof R=="string")return R.startsWith("0x")?hexToBytes(R):stringToBytes$1(R);if(isBytes$1(R))return R;throw new TypeError(`Unsupported value type: "${typeof R}".`)}bytes.valueToBytes=valueToBytes;function concatBytes(R){const E=new Array(R.length);let U=0;for(let Y=0;Y<R.length;Y++){const J=valueToBytes(R[Y]);E[Y]=J,U+=J.length}const G=new Uint8Array(U);for(let Y=0,J=0;Y<E.length;Y++)G.set(E[Y],J),J+=E[Y].length;return G}bytes.concatBytes=concatBytes;function createDataView(R){if(typeof Buffer<"u"&&R instanceof Buffer){const E=R.buffer.slice(R.byteOffset,R.byteOffset+R.byteLength);return new DataView(E)}return new DataView(R.buffer,R.byteOffset,R.byteLength)}bytes.createDataView=createDataView;var checksum={};Object.defineProperty(checksum,"__esModule",{value:!0});checksum.ChecksumStruct=void 0;const superstruct_1$1=require$$1$3,base64_1$1=base64$5;checksum.ChecksumStruct=(0,superstruct_1$1.size)((0,base64_1$1.base64)((0,superstruct_1$1.string)(),{paddingRequired:!0}),44,44);var coercers={};Object.defineProperty(coercers,"__esModule",{value:!0});coercers.createHex=coercers.createBytes=coercers.createBigInt=coercers.createNumber=void 0;const superstruct_1=require$$1$3,assert_1$1=assert$2,bytes_1=bytes,hex_1$1=hex,NumberLikeStruct=(0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.bigint)(),(0,superstruct_1.string)(),hex_1$1.StrictHexStruct]),NumberCoercer=(0,superstruct_1.coerce)((0,superstruct_1.number)(),NumberLikeStruct,Number),BigIntCoercer=(0,superstruct_1.coerce)((0,superstruct_1.bigint)(),NumberLikeStruct,BigInt);(0,superstruct_1.union)([hex_1$1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array)]);const BytesCoercer=(0,superstruct_1.coerce)((0,superstruct_1.instance)(Uint8Array),(0,superstruct_1.union)([hex_1$1.StrictHexStruct]),bytes_1.hexToBytes),HexCoercer=(0,superstruct_1.coerce)(hex_1$1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array),bytes_1.bytesToHex);function createNumber(R){try{const E=(0,superstruct_1.create)(R,NumberCoercer);return(0,assert_1$1.assert)(Number.isFinite(E),`Expected a number-like value, got "${R}".`),E}catch(E){throw E instanceof superstruct_1.StructError?new Error(`Expected a number-like value, got "${R}".`):E}}coercers.createNumber=createNumber;function createBigInt(R){try{return(0,superstruct_1.create)(R,BigIntCoercer)}catch(E){throw E instanceof superstruct_1.StructError?new Error(`Expected a number-like value, got "${String(E.value)}".`):E}}coercers.createBigInt=createBigInt;function createBytes(R){if(typeof R=="string"&&R.toLowerCase()==="0x")return new Uint8Array;try{return(0,superstruct_1.create)(R,BytesCoercer)}catch(E){throw E instanceof superstruct_1.StructError?new Error(`Expected a bytes-like value, got "${String(E.value)}".`):E}}coercers.createBytes=createBytes;function createHex(R){if(R instanceof Uint8Array&&R.length===0||typeof R=="string"&&R.toLowerCase()==="0x")return"0x";try{return(0,superstruct_1.create)(R,HexCoercer)}catch(E){throw E instanceof superstruct_1.StructError?new Error(`Expected a bytes-like value, got "${String(E.value)}".`):E}}coercers.createHex=createHex;var collections={},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(R,E,U,G,Y){if(G==="m")throw new TypeError("Private method is not writable");if(G==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof E=="function"?R!==E||!Y:!E.has(R))throw new TypeError("Cannot write private member to an object whose class did not declare it");return G==="a"?Y.call(R,U):Y?Y.value=U:E.set(R,U),U},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(R,E,U,G){if(U==="a"&&!G)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?R!==E||!G:!E.has(R))throw new TypeError("Cannot read private member from an object whose class did not declare it");return U==="m"?G:U==="a"?G.call(R):G?G.value:E.get(R)},_FrozenMap_map,_FrozenSet_set;Object.defineProperty(collections,"__esModule",{value:!0});collections.FrozenSet=collections.FrozenMap=void 0;class FrozenMap{constructor(E){_FrozenMap_map.set(this,void 0),__classPrivateFieldSet(this,_FrozenMap_map,new Map(E),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").size}[(_FrozenMap_map=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenMap_map,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").entries()}forEach(E,U){return __classPrivateFieldGet(this,_FrozenMap_map,"f").forEach((G,Y,J)=>E.call(U,G,Y,this))}get(E){return __classPrivateFieldGet(this,_FrozenMap_map,"f").get(E)}has(E){return __classPrivateFieldGet(this,_FrozenMap_map,"f").has(E)}keys(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([E,U])=>`${String(E)} => ${String(U)}`).join(", ")} `:""}}`}}collections.FrozenMap=FrozenMap;class FrozenSet{constructor(E){_FrozenSet_set.set(this,void 0),__classPrivateFieldSet(this,_FrozenSet_set,new Set(E),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").size}[(_FrozenSet_set=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenSet_set,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").entries()}forEach(E,U){return __classPrivateFieldGet(this,_FrozenSet_set,"f").forEach((G,Y,J)=>E.call(U,G,Y,this))}has(E){return __classPrivateFieldGet(this,_FrozenSet_set,"f").has(E)}keys(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(E=>String(E)).join(", ")} `:""}}`}}collections.FrozenSet=FrozenSet;Object.freeze(FrozenMap);Object.freeze(FrozenMap.prototype);Object.freeze(FrozenSet);Object.freeze(FrozenSet.prototype);var json$1={},misc={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.calculateNumberSize=R.calculateStringSize=R.isASCII=R.isPlainObject=R.ESCAPE_CHARACTERS_REGEXP=R.JsonSize=R.hasProperty=R.isObject=R.isNullOrUndefined=R.isNonEmptyArray=void 0;function E(ee){return Array.isArray(ee)&&ee.length>0}R.isNonEmptyArray=E;function U(ee){return ee==null}R.isNullOrUndefined=U;function G(ee){return Boolean(ee)&&typeof ee=="object"&&!Array.isArray(ee)}R.isObject=G;const Y=(ee,te)=>Object.hasOwnProperty.call(ee,te);R.hasProperty=Y,function(ee){ee[ee.Null=4]="Null",ee[ee.Comma=1]="Comma",ee[ee.Wrapper=1]="Wrapper",ee[ee.True=4]="True",ee[ee.False=5]="False",ee[ee.Quote=1]="Quote",ee[ee.Colon=1]="Colon",ee[ee.Date=24]="Date"}(R.JsonSize||(R.JsonSize={})),R.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function J(ee){if(typeof ee!="object"||ee===null)return!1;try{let te=ee;for(;Object.getPrototypeOf(te)!==null;)te=Object.getPrototypeOf(te);return Object.getPrototypeOf(ee)===te}catch{return!1}}R.isPlainObject=J;function Q(ee){return ee.charCodeAt(0)<=127}R.isASCII=Q;function X(ee){var te;return ee.split("").reduce((oe,ce)=>Q(ce)?oe+1:oe+2,0)+((te=ee.match(R.ESCAPE_CHARACTERS_REGEXP))!==null&&te!==void 0?te:[]).length}R.calculateStringSize=X;function Z(ee){return ee.toString().length}R.calculateNumberSize=Z})(misc);(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.validateJsonAndGetSize=R.getJsonRpcIdValidator=R.assertIsJsonRpcError=R.isJsonRpcError=R.assertIsJsonRpcFailure=R.isJsonRpcFailure=R.assertIsJsonRpcSuccess=R.isJsonRpcSuccess=R.assertIsJsonRpcResponse=R.isJsonRpcResponse=R.assertIsPendingJsonRpcResponse=R.isPendingJsonRpcResponse=R.JsonRpcResponseStruct=R.JsonRpcFailureStruct=R.JsonRpcSuccessStruct=R.PendingJsonRpcResponseStruct=R.assertIsJsonRpcRequest=R.isJsonRpcRequest=R.assertIsJsonRpcNotification=R.isJsonRpcNotification=R.JsonRpcNotificationStruct=R.JsonRpcRequestStruct=R.JsonRpcParamsStruct=R.JsonRpcErrorStruct=R.JsonRpcIdStruct=R.JsonRpcVersionStruct=R.jsonrpc2=R.isValidJson=R.JsonStruct=void 0;const E=require$$1$3,U=assert$2,G=misc;R.JsonStruct=(0,E.define)("Json",Re=>{const[Ae]=Ee(Re,!0);return Ae?!0:"Expected a valid JSON-serializable value"});function Y(Re){return(0,E.is)(Re,R.JsonStruct)}R.isValidJson=Y,R.jsonrpc2="2.0",R.JsonRpcVersionStruct=(0,E.literal)(R.jsonrpc2),R.JsonRpcIdStruct=(0,E.nullable)((0,E.union)([(0,E.number)(),(0,E.string)()])),R.JsonRpcErrorStruct=(0,E.object)({code:(0,E.integer)(),message:(0,E.string)(),data:(0,E.optional)(R.JsonStruct),stack:(0,E.optional)((0,E.string)())}),R.JsonRpcParamsStruct=(0,E.optional)((0,E.union)([(0,E.record)((0,E.string)(),R.JsonStruct),(0,E.array)(R.JsonStruct)])),R.JsonRpcRequestStruct=(0,E.object)({id:R.JsonRpcIdStruct,jsonrpc:R.JsonRpcVersionStruct,method:(0,E.string)(),params:R.JsonRpcParamsStruct}),R.JsonRpcNotificationStruct=(0,E.omit)(R.JsonRpcRequestStruct,["id"]);function J(Re){return(0,E.is)(Re,R.JsonRpcNotificationStruct)}R.isJsonRpcNotification=J;function Q(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",Ae)}R.assertIsJsonRpcNotification=Q;function X(Re){return(0,E.is)(Re,R.JsonRpcRequestStruct)}R.isJsonRpcRequest=X;function Z(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcRequestStruct,"Invalid JSON-RPC request",Ae)}R.assertIsJsonRpcRequest=Z,R.PendingJsonRpcResponseStruct=(0,E.object)({id:R.JsonRpcIdStruct,jsonrpc:R.JsonRpcVersionStruct,result:(0,E.optional)((0,E.unknown)()),error:(0,E.optional)(R.JsonRpcErrorStruct)}),R.JsonRpcSuccessStruct=(0,E.object)({id:R.JsonRpcIdStruct,jsonrpc:R.JsonRpcVersionStruct,result:R.JsonStruct}),R.JsonRpcFailureStruct=(0,E.object)({id:R.JsonRpcIdStruct,jsonrpc:R.JsonRpcVersionStruct,error:R.JsonRpcErrorStruct}),R.JsonRpcResponseStruct=(0,E.union)([R.JsonRpcSuccessStruct,R.JsonRpcFailureStruct]);function ee(Re){return(0,E.is)(Re,R.PendingJsonRpcResponseStruct)}R.isPendingJsonRpcResponse=ee;function te(Re,Ae){(0,U.assertStruct)(Re,R.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",Ae)}R.assertIsPendingJsonRpcResponse=te;function ne(Re){return(0,E.is)(Re,R.JsonRpcResponseStruct)}R.isJsonRpcResponse=ne;function oe(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcResponseStruct,"Invalid JSON-RPC response",Ae)}R.assertIsJsonRpcResponse=oe;function ce(Re){return(0,E.is)(Re,R.JsonRpcSuccessStruct)}R.isJsonRpcSuccess=ce;function pe(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",Ae)}R.assertIsJsonRpcSuccess=pe;function ye(Re){return(0,E.is)(Re,R.JsonRpcFailureStruct)}R.isJsonRpcFailure=ye;function Se(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",Ae)}R.assertIsJsonRpcFailure=Se;function ge(Re){return(0,E.is)(Re,R.JsonRpcErrorStruct)}R.isJsonRpcError=ge;function _e(Re,Ae){(0,U.assertStruct)(Re,R.JsonRpcErrorStruct,"Invalid JSON-RPC error",Ae)}R.assertIsJsonRpcError=_e;function Te(Re){const{permitEmptyString:Ae,permitFractions:Ie,permitNull:Oe}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},Re);return Le=>Boolean(typeof Le=="number"&&(Ie||Number.isInteger(Le))||typeof Le=="string"&&(Ae||Le.length>0)||Oe&&Le===null)}R.getJsonRpcIdValidator=Te;function Ee(Re,Ae=!1){const Ie=new Set;function Oe(Pe,Le){if(Pe===void 0)return[!1,0];if(Pe===null)return[!0,Le?0:G.JsonSize.Null];const Me=typeof Pe;try{if(Me==="function")return[!1,0];if(Me==="string"||Pe instanceof String)return[!0,Le?0:(0,G.calculateStringSize)(Pe)+G.JsonSize.Quote*2];if(Me==="boolean"||Pe instanceof Boolean)return Le?[!0,0]:[!0,Pe==!0?G.JsonSize.True:G.JsonSize.False];if(Me==="number"||Pe instanceof Number)return Le?[!0,0]:[!0,(0,G.calculateNumberSize)(Pe)];if(Pe instanceof Date)return Le?[!0,0]:[!0,isNaN(Pe.getDate())?G.JsonSize.Null:G.JsonSize.Date+G.JsonSize.Quote*2]}catch{return[!1,0]}if(!(0,G.isPlainObject)(Pe)&&!Array.isArray(Pe))return[!1,0];if(Ie.has(Pe))return[!1,0];Ie.add(Pe);try{return[!0,Object.entries(Pe).reduce((ue,[ae,se],le,fe)=>{let[be,ve]=Oe(se,Le);if(!be)throw new Error("JSON validation did not pass. Validation process stopped.");if(Ie.delete(Pe),Le)return 0;const xe=Array.isArray(Pe)?0:ae.length+G.JsonSize.Comma+G.JsonSize.Colon*2,he=le<fe.length-1?G.JsonSize.Comma:0;return ue+xe+ve+he},Le?0:G.JsonSize.Wrapper*2)]}catch{return[!1,0]}}return Oe(Re,Ae)}R.validateJsonAndGetSize=Ee})(json$1);var logging={},browser$1={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var R=1e3,E=R*60,U=E*60,G=U*24,Y=G*7,J=G*365.25;ms=function(te,ne){ne=ne||{};var oe=typeof te;if(oe==="string"&&te.length>0)return Q(te);if(oe==="number"&&isFinite(te))return ne.long?Z(te):X(te);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(te))};function Q(te){if(te=String(te),!(te.length>100)){var ne=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(te);if(!!ne){var oe=parseFloat(ne[1]),ce=(ne[2]||"ms").toLowerCase();switch(ce){case"years":case"year":case"yrs":case"yr":case"y":return oe*J;case"weeks":case"week":case"w":return oe*Y;case"days":case"day":case"d":return oe*G;case"hours":case"hour":case"hrs":case"hr":case"h":return oe*U;case"minutes":case"minute":case"mins":case"min":case"m":return oe*E;case"seconds":case"second":case"secs":case"sec":case"s":return oe*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return oe;default:return}}}}function X(te){var ne=Math.abs(te);return ne>=G?Math.round(te/G)+"d":ne>=U?Math.round(te/U)+"h":ne>=E?Math.round(te/E)+"m":ne>=R?Math.round(te/R)+"s":te+"ms"}function Z(te){var ne=Math.abs(te);return ne>=G?ee(te,ne,G,"day"):ne>=U?ee(te,ne,U,"hour"):ne>=E?ee(te,ne,E,"minute"):ne>=R?ee(te,ne,R,"second"):te+" ms"}function ee(te,ne,oe,ce){var pe=ne>=oe*1.5;return Math.round(te/oe)+" "+ce+(pe?"s":"")}return ms}function setup(R){U.debug=U,U.default=U,U.coerce=Z,U.disable=J,U.enable=Y,U.enabled=Q,U.humanize=requireMs(),U.destroy=ee,Object.keys(R).forEach(te=>{U[te]=R[te]}),U.names=[],U.skips=[],U.formatters={};function E(te){let ne=0;for(let oe=0;oe<te.length;oe++)ne=(ne<<5)-ne+te.charCodeAt(oe),ne|=0;return U.colors[Math.abs(ne)%U.colors.length]}U.selectColor=E;function U(te){let ne,oe=null,ce,pe;function ye(...Se){if(!ye.enabled)return;const ge=ye,_e=Number(new Date),Te=_e-(ne||_e);ge.diff=Te,ge.prev=ne,ge.curr=_e,ne=_e,Se[0]=U.coerce(Se[0]),typeof Se[0]!="string"&&Se.unshift("%O");let Ee=0;Se[0]=Se[0].replace(/%([a-zA-Z%])/g,(Ae,Ie)=>{if(Ae==="%%")return"%";Ee++;const Oe=U.formatters[Ie];if(typeof Oe=="function"){const Pe=Se[Ee];Ae=Oe.call(ge,Pe),Se.splice(Ee,1),Ee--}return Ae}),U.formatArgs.call(ge,Se),(ge.log||U.log).apply(ge,Se)}return ye.namespace=te,ye.useColors=U.useColors(),ye.color=U.selectColor(te),ye.extend=G,ye.destroy=U.destroy,Object.defineProperty(ye,"enabled",{enumerable:!0,configurable:!1,get:()=>oe!==null?oe:(ce!==U.namespaces&&(ce=U.namespaces,pe=U.enabled(te)),pe),set:Se=>{oe=Se}}),typeof U.init=="function"&&U.init(ye),ye}function G(te,ne){const oe=U(this.namespace+(typeof ne>"u"?":":ne)+te);return oe.log=this.log,oe}function Y(te){U.save(te),U.namespaces=te,U.names=[],U.skips=[];let ne;const oe=(typeof te=="string"?te:"").split(/[\s,]+/),ce=oe.length;for(ne=0;ne<ce;ne++)!oe[ne]||(te=oe[ne].replace(/\*/g,".*?"),te[0]==="-"?U.skips.push(new RegExp("^"+te.slice(1)+"$")):U.names.push(new RegExp("^"+te+"$")))}function J(){const te=[...U.names.map(X),...U.skips.map(X).map(ne=>"-"+ne)].join(",");return U.enable(""),te}function Q(te){if(te[te.length-1]==="*")return!0;let ne,oe;for(ne=0,oe=U.skips.length;ne<oe;ne++)if(U.skips[ne].test(te))return!1;for(ne=0,oe=U.names.length;ne<oe;ne++)if(U.names[ne].test(te))return!0;return!1}function X(te){return te.toString().substring(2,te.toString().length-2).replace(/\.\*\?$/,"*")}function Z(te){return te instanceof Error?te.stack||te.message:te}function ee(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return U.enable(U.load()),U}var common=setup;(function(R,E){E.formatArgs=G,E.save=Y,E.load=J,E.useColors=U,E.storage=Q(),E.destroy=(()=>{let Z=!1;return()=>{Z||(Z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),E.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function U(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function G(Z){if(Z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Z[0]+(this.useColors?"%c ":" ")+"+"+R.exports.humanize(this.diff),!this.useColors)return;const ee="color: "+this.color;Z.splice(1,0,ee,"color: inherit");let te=0,ne=0;Z[0].replace(/%[a-zA-Z%]/g,oe=>{oe!=="%%"&&(te++,oe==="%c"&&(ne=te))}),Z.splice(ne,0,ee)}E.log=console.debug||console.log||(()=>{});function Y(Z){try{Z?E.storage.setItem("debug",Z):E.storage.removeItem("debug")}catch{}}function J(){let Z;try{Z=E.storage.getItem("debug")}catch{}return!Z&&typeof process<"u"&&"env"in process&&(Z=process.env.DEBUG),Z}function Q(){try{return localStorage}catch{}}R.exports=common(E);const{formatters:X}=R.exports;X.j=function(Z){try{return JSON.stringify(Z)}catch(ee){return"[UnexpectedJSONParseError]: "+ee.message}}})(browser$1,browser$1.exports);const debug$2=browser$1.exports;var __importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(logging,"__esModule",{value:!0});logging.createModuleLogger=logging.createProjectLogger=void 0;const debug_1$1=__importDefault$c(browser$1.exports),globalLogger=(0,debug_1$1.default)("metamask");function createProjectLogger(R){return globalLogger.extend(R)}logging.createProjectLogger=createProjectLogger;function createModuleLogger(R,E){return R.extend(E)}logging.createModuleLogger=createModuleLogger;var number={};Object.defineProperty(number,"__esModule",{value:!0});number.hexToBigInt=number.hexToNumber=number.bigIntToHex=number.numberToHex=void 0;const assert_1=assert$2,hex_1=hex,numberToHex=R=>((0,assert_1.assert)(typeof R=="number","Value must be a number."),(0,assert_1.assert)(R>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(R),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,hex_1.add0x)(R.toString(16)));number.numberToHex=numberToHex;const bigIntToHex=R=>((0,assert_1.assert)(typeof R=="bigint","Value must be a bigint."),(0,assert_1.assert)(R>=0,"Value must be a non-negative bigint."),(0,hex_1.add0x)(R.toString(16)));number.bigIntToHex=bigIntToHex;const hexToNumber=R=>{(0,hex_1.assertIsHexString)(R);const E=parseInt(R,16);return(0,assert_1.assert)(Number.isSafeInteger(E),"Value is not a safe integer. Use `hexToBigInt` instead."),E};number.hexToNumber=hexToNumber;const hexToBigInt=R=>((0,hex_1.assertIsHexString)(R),BigInt((0,hex_1.add0x)(R)));number.hexToBigInt=hexToBigInt;var opaque={};Object.defineProperty(opaque,"__esModule",{value:!0});var time={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.timeSince=R.inMilliseconds=R.Duration=void 0,function(J){J[J.Millisecond=1]="Millisecond",J[J.Second=1e3]="Second",J[J.Minute=6e4]="Minute",J[J.Hour=36e5]="Hour",J[J.Day=864e5]="Day",J[J.Week=6048e5]="Week",J[J.Year=31536e6]="Year"}(R.Duration||(R.Duration={}));const E=J=>Number.isInteger(J)&&J>=0,U=(J,Q)=>{if(!E(J))throw new Error(`"${Q}" must be a non-negative integer. Received: "${J}".`)};function G(J,Q){return U(J,"count"),J*Q}R.inMilliseconds=G;function Y(J){return U(J,"timestamp"),Date.now()-J}R.timeSince=Y})(time);var versions={},re$2={exports:{}};const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$1=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16,RELEASE_TYPES=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var constants$2={MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,RELEASE_TYPES,SEMVER_SPEC_VERSION,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const debug$1=(typeof process=="object"&&process.env,()=>{});var debug_1=debug$1;(function(R,E){const{MAX_SAFE_COMPONENT_LENGTH:U}=constants$2,G=debug_1;E=R.exports={};const Y=E.re=[],J=E.src=[],Q=E.t={};let X=0;const Z=(ee,te,ne)=>{const oe=X++;G(ee,oe,te),Q[ee]=oe,J[oe]=te,Y[oe]=new RegExp(te,ne?"g":void 0)};Z("NUMERICIDENTIFIER","0|[1-9]\\d*"),Z("NUMERICIDENTIFIERLOOSE","[0-9]+"),Z("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),Z("MAINVERSION",`(${J[Q.NUMERICIDENTIFIER]})\\.(${J[Q.NUMERICIDENTIFIER]})\\.(${J[Q.NUMERICIDENTIFIER]})`),Z("MAINVERSIONLOOSE",`(${J[Q.NUMERICIDENTIFIERLOOSE]})\\.(${J[Q.NUMERICIDENTIFIERLOOSE]})\\.(${J[Q.NUMERICIDENTIFIERLOOSE]})`),Z("PRERELEASEIDENTIFIER",`(?:${J[Q.NUMERICIDENTIFIER]}|${J[Q.NONNUMERICIDENTIFIER]})`),Z("PRERELEASEIDENTIFIERLOOSE",`(?:${J[Q.NUMERICIDENTIFIERLOOSE]}|${J[Q.NONNUMERICIDENTIFIER]})`),Z("PRERELEASE",`(?:-(${J[Q.PRERELEASEIDENTIFIER]}(?:\\.${J[Q.PRERELEASEIDENTIFIER]})*))`),Z("PRERELEASELOOSE",`(?:-?(${J[Q.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${J[Q.PRERELEASEIDENTIFIERLOOSE]})*))`),Z("BUILDIDENTIFIER","[0-9A-Za-z-]+"),Z("BUILD",`(?:\\+(${J[Q.BUILDIDENTIFIER]}(?:\\.${J[Q.BUILDIDENTIFIER]})*))`),Z("FULLPLAIN",`v?${J[Q.MAINVERSION]}${J[Q.PRERELEASE]}?${J[Q.BUILD]}?`),Z("FULL",`^${J[Q.FULLPLAIN]}$`),Z("LOOSEPLAIN",`[v=\\s]*${J[Q.MAINVERSIONLOOSE]}${J[Q.PRERELEASELOOSE]}?${J[Q.BUILD]}?`),Z("LOOSE",`^${J[Q.LOOSEPLAIN]}$`),Z("GTLT","((?:<|>)?=?)"),Z("XRANGEIDENTIFIERLOOSE",`${J[Q.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),Z("XRANGEIDENTIFIER",`${J[Q.NUMERICIDENTIFIER]}|x|X|\\*`),Z("XRANGEPLAIN",`[v=\\s]*(${J[Q.XRANGEIDENTIFIER]})(?:\\.(${J[Q.XRANGEIDENTIFIER]})(?:\\.(${J[Q.XRANGEIDENTIFIER]})(?:${J[Q.PRERELEASE]})?${J[Q.BUILD]}?)?)?`),Z("XRANGEPLAINLOOSE",`[v=\\s]*(${J[Q.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Q.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Q.XRANGEIDENTIFIERLOOSE]})(?:${J[Q.PRERELEASELOOSE]})?${J[Q.BUILD]}?)?)?`),Z("XRANGE",`^${J[Q.GTLT]}\\s*${J[Q.XRANGEPLAIN]}$`),Z("XRANGELOOSE",`^${J[Q.GTLT]}\\s*${J[Q.XRANGEPLAINLOOSE]}$`),Z("COERCE",`(^|[^\\d])(\\d{1,${U}})(?:\\.(\\d{1,${U}}))?(?:\\.(\\d{1,${U}}))?(?:$|[^\\d])`),Z("COERCERTL",J[Q.COERCE],!0),Z("LONETILDE","(?:~>?)"),Z("TILDETRIM",`(\\s*)${J[Q.LONETILDE]}\\s+`,!0),E.tildeTrimReplace="$1~",Z("TILDE",`^${J[Q.LONETILDE]}${J[Q.XRANGEPLAIN]}$`),Z("TILDELOOSE",`^${J[Q.LONETILDE]}${J[Q.XRANGEPLAINLOOSE]}$`),Z("LONECARET","(?:\\^)"),Z("CARETTRIM",`(\\s*)${J[Q.LONECARET]}\\s+`,!0),E.caretTrimReplace="$1^",Z("CARET",`^${J[Q.LONECARET]}${J[Q.XRANGEPLAIN]}$`),Z("CARETLOOSE",`^${J[Q.LONECARET]}${J[Q.XRANGEPLAINLOOSE]}$`),Z("COMPARATORLOOSE",`^${J[Q.GTLT]}\\s*(${J[Q.LOOSEPLAIN]})$|^$`),Z("COMPARATOR",`^${J[Q.GTLT]}\\s*(${J[Q.FULLPLAIN]})$|^$`),Z("COMPARATORTRIM",`(\\s*)${J[Q.GTLT]}\\s*(${J[Q.LOOSEPLAIN]}|${J[Q.XRANGEPLAIN]})`,!0),E.comparatorTrimReplace="$1$2$3",Z("HYPHENRANGE",`^\\s*(${J[Q.XRANGEPLAIN]})\\s+-\\s+(${J[Q.XRANGEPLAIN]})\\s*$`),Z("HYPHENRANGELOOSE",`^\\s*(${J[Q.XRANGEPLAINLOOSE]})\\s+-\\s+(${J[Q.XRANGEPLAINLOOSE]})\\s*$`),Z("STAR","(<|>)?=?\\s*\\*"),Z("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),Z("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$2,re$2.exports);const looseOption=Object.freeze({loose:!0}),emptyOpts=Object.freeze({}),parseOptions$1=R=>R?typeof R!="object"?looseOption:R:emptyOpts;var parseOptions_1=parseOptions$1;const numeric=/^[0-9]+$/,compareIdentifiers$1=(R,E)=>{const U=numeric.test(R),G=numeric.test(E);return U&&G&&(R=+R,E=+E),R===E?0:U&&!G?-1:G&&!U?1:R<E?-1:1},rcompareIdentifiers=(R,E)=>compareIdentifiers$1(E,R);var identifiers$1={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH,MAX_SAFE_INTEGER}=constants$2,{re:re$1,t:t$3}=re$2.exports,parseOptions=parseOptions_1,{compareIdentifiers}=identifiers$1;class SemVer$d{constructor(E,U){if(U=parseOptions(U),E instanceof SemVer$d){if(E.loose===!!U.loose&&E.includePrerelease===!!U.includePrerelease)return E;E=E.version}else if(typeof E!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof E}".`);if(E.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",E,U),this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease;const G=E.trim().match(U.loose?re$1[t$3.LOOSE]:re$1[t$3.FULL]);if(!G)throw new TypeError(`Invalid Version: ${E}`);if(this.raw=E,this.major=+G[1],this.minor=+G[2],this.patch=+G[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");G[4]?this.prerelease=G[4].split(".").map(Y=>{if(/^[0-9]+$/.test(Y)){const J=+Y;if(J>=0&&J<MAX_SAFE_INTEGER)return J}return Y}):this.prerelease=[],this.build=G[5]?G[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(E){if(debug("SemVer.compare",this.version,this.options,E),!(E instanceof SemVer$d)){if(typeof E=="string"&&E===this.version)return 0;E=new SemVer$d(E,this.options)}return E.version===this.version?0:this.compareMain(E)||this.comparePre(E)}compareMain(E){return E instanceof SemVer$d||(E=new SemVer$d(E,this.options)),compareIdentifiers(this.major,E.major)||compareIdentifiers(this.minor,E.minor)||compareIdentifiers(this.patch,E.patch)}comparePre(E){if(E instanceof SemVer$d||(E=new SemVer$d(E,this.options)),this.prerelease.length&&!E.prerelease.length)return-1;if(!this.prerelease.length&&E.prerelease.length)return 1;if(!this.prerelease.length&&!E.prerelease.length)return 0;let U=0;do{const G=this.prerelease[U],Y=E.prerelease[U];if(debug("prerelease compare",U,G,Y),G===void 0&&Y===void 0)return 0;if(Y===void 0)return 1;if(G===void 0)return-1;if(G===Y)continue;return compareIdentifiers(G,Y)}while(++U)}compareBuild(E){E instanceof SemVer$d||(E=new SemVer$d(E,this.options));let U=0;do{const G=this.build[U],Y=E.build[U];if(debug("prerelease compare",U,G,Y),G===void 0&&Y===void 0)return 0;if(Y===void 0)return 1;if(G===void 0)return-1;if(G===Y)continue;return compareIdentifiers(G,Y)}while(++U)}inc(E,U,G){switch(E){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",U,G);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",U,G);break;case"prepatch":this.prerelease.length=0,this.inc("patch",U,G),this.inc("pre",U,G);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",U,G),this.inc("pre",U,G);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const Y=Number(G)?1:0;if(!U&&G===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[Y];else{let J=this.prerelease.length;for(;--J>=0;)typeof this.prerelease[J]=="number"&&(this.prerelease[J]++,J=-2);if(J===-1){if(U===this.prerelease.join(".")&&G===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(Y)}}if(U){let J=[U,Y];G===!1&&(J=[U]),compareIdentifiers(this.prerelease[0],U)===0?isNaN(this.prerelease[1])&&(this.prerelease=J):this.prerelease=J}break}default:throw new Error(`invalid increment argument: ${E}`)}return this.format(),this.raw=this.version,this}}var semver$1=SemVer$d;const SemVer$c=semver$1,parse$8=(R,E,U=!1)=>{if(R instanceof SemVer$c)return R;try{return new SemVer$c(R,E)}catch(G){if(!U)return null;throw G}};var parse_1=parse$8;const parse$7=parse_1,valid$2=(R,E)=>{const U=parse$7(R,E);return U?U.version:null};var valid_1=valid$2;const parse$6=parse_1,clean$1=(R,E)=>{const U=parse$6(R.trim().replace(/^[=v]+/,""),E);return U?U.version:null};var clean_1=clean$1;const SemVer$b=semver$1,inc$1=(R,E,U,G,Y)=>{typeof U=="string"&&(Y=G,G=U,U=void 0);try{return new SemVer$b(R instanceof SemVer$b?R.version:R,U).inc(E,G,Y).version}catch{return null}};var inc_1=inc$1;const parse$5=parse_1,diff$1=(R,E)=>{const U=parse$5(R,null,!0),G=parse$5(E,null,!0),Y=U.compare(G);if(Y===0)return null;const J=Y>0,Q=J?U:G,X=J?G:U,Z=!!Q.prerelease.length,ee=Z?"pre":"";return U.major!==G.major?ee+"major":U.minor!==G.minor?ee+"minor":U.patch!==G.patch?ee+"patch":Z?"prerelease":X.patch?"patch":X.minor?"minor":"major"};var diff_1=diff$1;const SemVer$a=semver$1,major$1=(R,E)=>new SemVer$a(R,E).major;var major_1=major$1;const SemVer$9=semver$1,minor$1=(R,E)=>new SemVer$9(R,E).minor;var minor_1=minor$1;const SemVer$8=semver$1,patch$1=(R,E)=>new SemVer$8(R,E).patch;var patch_1=patch$1;const parse$4=parse_1,prerelease$1=(R,E)=>{const U=parse$4(R,E);return U&&U.prerelease.length?U.prerelease:null};var prerelease_1=prerelease$1;const SemVer$7=semver$1,compare$c=(R,E,U)=>new SemVer$7(R,U).compare(new SemVer$7(E,U));var compare_1=compare$c;const compare$b=compare_1,rcompare$1=(R,E,U)=>compare$b(E,R,U);var rcompare_1=rcompare$1;const compare$a=compare_1,compareLoose$1=(R,E)=>compare$a(R,E,!0);var compareLoose_1=compareLoose$1;const SemVer$6=semver$1,compareBuild$3=(R,E,U)=>{const G=new SemVer$6(R,U),Y=new SemVer$6(E,U);return G.compare(Y)||G.compareBuild(Y)};var compareBuild_1=compareBuild$3;const compareBuild$2=compareBuild_1,sort$1=(R,E)=>R.sort((U,G)=>compareBuild$2(U,G,E));var sort_1=sort$1;const compareBuild$1=compareBuild_1,rsort$1=(R,E)=>R.sort((U,G)=>compareBuild$1(G,U,E));var rsort_1=rsort$1;const compare$9=compare_1,gt$4=(R,E,U)=>compare$9(R,E,U)>0;var gt_1=gt$4;const compare$8=compare_1,lt$3=(R,E,U)=>compare$8(R,E,U)<0;var lt_1=lt$3;const compare$7=compare_1,eq$2=(R,E,U)=>compare$7(R,E,U)===0;var eq_1=eq$2;const compare$6=compare_1,neq$2=(R,E,U)=>compare$6(R,E,U)!==0;var neq_1=neq$2;const compare$5=compare_1,gte$3=(R,E,U)=>compare$5(R,E,U)>=0;var gte_1=gte$3;const compare$4=compare_1,lte$3=(R,E,U)=>compare$4(R,E,U)<=0;var lte_1=lte$3;const eq$1=eq_1,neq$1=neq_1,gt$3=gt_1,gte$2=gte_1,lt$2=lt_1,lte$2=lte_1,cmp$2=(R,E,U,G)=>{switch(E){case"===":return typeof R=="object"&&(R=R.version),typeof U=="object"&&(U=U.version),R===U;case"!==":return typeof R=="object"&&(R=R.version),typeof U=="object"&&(U=U.version),R!==U;case"":case"=":case"==":return eq$1(R,U,G);case"!=":return neq$1(R,U,G);case">":return gt$3(R,U,G);case">=":return gte$2(R,U,G);case"<":return lt$2(R,U,G);case"<=":return lte$2(R,U,G);default:throw new TypeError(`Invalid operator: ${E}`)}};var cmp_1=cmp$2;const SemVer$5=semver$1,parse$3=parse_1,{re,t:t$2}=re$2.exports,coerce$2=(R,E)=>{if(R instanceof SemVer$5)return R;if(typeof R=="number"&&(R=String(R)),typeof R!="string")return null;E=E||{};let U=null;if(!E.rtl)U=R.match(re[t$2.COERCE]);else{let G;for(;(G=re[t$2.COERCERTL].exec(R))&&(!U||U.index+U[0].length!==R.length);)(!U||G.index+G[0].length!==U.index+U[0].length)&&(U=G),re[t$2.COERCERTL].lastIndex=G.index+G[1].length+G[2].length;re[t$2.COERCERTL].lastIndex=-1}return U===null?null:parse$3(`${U[2]}.${U[3]||"0"}.${U[4]||"0"}`,E)};var coerce_1=coerce$2,iterator$1,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator$1=function(R){R.prototype[Symbol.iterator]=function*(){for(let E=this.head;E;E=E.next)yield E.value}}),iterator$1}var yallist=Yallist$1;Yallist$1.Node=Node$2;Yallist$1.create=Yallist$1;function Yallist$1(R){var E=this;if(E instanceof Yallist$1||(E=new Yallist$1),E.tail=null,E.head=null,E.length=0,R&&typeof R.forEach=="function")R.forEach(function(Y){E.push(Y)});else if(arguments.length>0)for(var U=0,G=arguments.length;U<G;U++)E.push(arguments[U]);return E}Yallist$1.prototype.removeNode=function(R){if(R.list!==this)throw new Error("removing node which does not belong to this list");var E=R.next,U=R.prev;return E&&(E.prev=U),U&&(U.next=E),R===this.head&&(this.head=E),R===this.tail&&(this.tail=U),R.list.length--,R.next=null,R.prev=null,R.list=null,E};Yallist$1.prototype.unshiftNode=function(R){if(R!==this.head){R.list&&R.list.removeNode(R);var E=this.head;R.list=this,R.next=E,E&&(E.prev=R),this.head=R,this.tail||(this.tail=R),this.length++}};Yallist$1.prototype.pushNode=function(R){if(R!==this.tail){R.list&&R.list.removeNode(R);var E=this.tail;R.list=this,R.prev=E,E&&(E.next=R),this.tail=R,this.head||(this.head=R),this.length++}};Yallist$1.prototype.push=function(){for(var R=0,E=arguments.length;R<E;R++)push(this,arguments[R]);return this.length};Yallist$1.prototype.unshift=function(){for(var R=0,E=arguments.length;R<E;R++)unshift(this,arguments[R]);return this.length};Yallist$1.prototype.pop=function(){if(!!this.tail){var R=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,R}};Yallist$1.prototype.shift=function(){if(!!this.head){var R=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,R}};Yallist$1.prototype.forEach=function(R,E){E=E||this;for(var U=this.head,G=0;U!==null;G++)R.call(E,U.value,G,this),U=U.next};Yallist$1.prototype.forEachReverse=function(R,E){E=E||this;for(var U=this.tail,G=this.length-1;U!==null;G--)R.call(E,U.value,G,this),U=U.prev};Yallist$1.prototype.get=function(R){for(var E=0,U=this.head;U!==null&&E<R;E++)U=U.next;if(E===R&&U!==null)return U.value};Yallist$1.prototype.getReverse=function(R){for(var E=0,U=this.tail;U!==null&&E<R;E++)U=U.prev;if(E===R&&U!==null)return U.value};Yallist$1.prototype.map=function(R,E){E=E||this;for(var U=new Yallist$1,G=this.head;G!==null;)U.push(R.call(E,G.value,this)),G=G.next;return U};Yallist$1.prototype.mapReverse=function(R,E){E=E||this;for(var U=new Yallist$1,G=this.tail;G!==null;)U.push(R.call(E,G.value,this)),G=G.prev;return U};Yallist$1.prototype.reduce=function(R,E){var U,G=this.head;if(arguments.length>1)U=E;else if(this.head)G=this.head.next,U=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Y=0;G!==null;Y++)U=R(U,G.value,Y),G=G.next;return U};Yallist$1.prototype.reduceReverse=function(R,E){var U,G=this.tail;if(arguments.length>1)U=E;else if(this.tail)G=this.tail.prev,U=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Y=this.length-1;G!==null;Y--)U=R(U,G.value,Y),G=G.prev;return U};Yallist$1.prototype.toArray=function(){for(var R=new Array(this.length),E=0,U=this.head;U!==null;E++)R[E]=U.value,U=U.next;return R};Yallist$1.prototype.toArrayReverse=function(){for(var R=new Array(this.length),E=0,U=this.tail;U!==null;E++)R[E]=U.value,U=U.prev;return R};Yallist$1.prototype.slice=function(R,E){E=E||this.length,E<0&&(E+=this.length),R=R||0,R<0&&(R+=this.length);var U=new Yallist$1;if(E<R||E<0)return U;R<0&&(R=0),E>this.length&&(E=this.length);for(var G=0,Y=this.head;Y!==null&&G<R;G++)Y=Y.next;for(;Y!==null&&G<E;G++,Y=Y.next)U.push(Y.value);return U};Yallist$1.prototype.sliceReverse=function(R,E){E=E||this.length,E<0&&(E+=this.length),R=R||0,R<0&&(R+=this.length);var U=new Yallist$1;if(E<R||E<0)return U;R<0&&(R=0),E>this.length&&(E=this.length);for(var G=this.length,Y=this.tail;Y!==null&&G>E;G--)Y=Y.prev;for(;Y!==null&&G>R;G--,Y=Y.prev)U.push(Y.value);return U};Yallist$1.prototype.splice=function(R,E,...U){R>this.length&&(R=this.length-1),R<0&&(R=this.length+R);for(var G=0,Y=this.head;Y!==null&&G<R;G++)Y=Y.next;for(var J=[],G=0;Y&&G<E;G++)J.push(Y.value),Y=this.removeNode(Y);Y===null&&(Y=this.tail),Y!==this.head&&Y!==this.tail&&(Y=Y.prev);for(var G=0;G<U.length;G++)Y=insert(this,Y,U[G]);return J};Yallist$1.prototype.reverse=function(){for(var R=this.head,E=this.tail,U=R;U!==null;U=U.prev){var G=U.prev;U.prev=U.next,U.next=G}return this.head=E,this.tail=R,this};function insert(R,E,U){var G=E===R.head?new Node$2(U,null,E,R):new Node$2(U,E,E.next,R);return G.next===null&&(R.tail=G),G.prev===null&&(R.head=G),R.length++,G}function push(R,E){R.tail=new Node$2(E,R.tail,null,R),R.head||(R.head=R.tail),R.length++}function unshift(R,E){R.head=new Node$2(E,null,R.head,R),R.tail||(R.tail=R.head),R.length++}function Node$2(R,E,U,G){if(!(this instanceof Node$2))return new Node$2(R,E,U,G);this.list=G,this.value=R,E?(E.next=this,this.prev=E):this.prev=null,U?(U.prev=this,this.next=U):this.next=null}try{requireIterator()(Yallist$1)}catch{}const Yallist=yallist,MAX$1=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(E){if(typeof E=="number"&&(E={max:E}),E||(E={}),E.max&&(typeof E.max!="number"||E.max<0))throw new TypeError("max must be a non-negative number");this[MAX$1]=E.max||1/0;const U=E.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof U!="function"?naiveLength:U,this[ALLOW_STALE]=E.stale||!1,E.maxAge&&typeof E.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=E.maxAge||0,this[DISPOSE]=E.dispose,this[NO_DISPOSE_ON_SET]=E.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=E.updateAgeOnGet||!1,this.reset()}set max(E){if(typeof E!="number"||E<0)throw new TypeError("max must be a non-negative number");this[MAX$1]=E||1/0,trim(this)}get max(){return this[MAX$1]}set allowStale(E){this[ALLOW_STALE]=!!E}get allowStale(){return this[ALLOW_STALE]}set maxAge(E){if(typeof E!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=E,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(E){typeof E!="function"&&(E=naiveLength),E!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=E,this[LENGTH]=0,this[LRU_LIST].forEach(U=>{U.length=this[LENGTH_CALCULATOR](U.value,U.key),this[LENGTH]+=U.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(E,U){U=U||this;for(let G=this[LRU_LIST].tail;G!==null;){const Y=G.prev;forEachStep(this,E,G,U),G=Y}}forEach(E,U){U=U||this;for(let G=this[LRU_LIST].head;G!==null;){const Y=G.next;forEachStep(this,E,G,U),G=Y}}keys(){return this[LRU_LIST].toArray().map(E=>E.key)}values(){return this[LRU_LIST].toArray().map(E=>E.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(E=>this[DISPOSE](E.key,E.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(E=>isStale(this,E)?!1:{k:E.key,v:E.value,e:E.now+(E.maxAge||0)}).toArray().filter(E=>E)}dumpLru(){return this[LRU_LIST]}set(E,U,G){if(G=G||this[MAX_AGE],G&&typeof G!="number")throw new TypeError("maxAge must be a number");const Y=G?Date.now():0,J=this[LENGTH_CALCULATOR](U,E);if(this[CACHE].has(E)){if(J>this[MAX$1])return del(this,this[CACHE].get(E)),!1;const Z=this[CACHE].get(E).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](E,Z.value)),Z.now=Y,Z.maxAge=G,Z.value=U,this[LENGTH]+=J-Z.length,Z.length=J,this.get(E),trim(this),!0}const Q=new Entry(E,U,J,Y,G);return Q.length>this[MAX$1]?(this[DISPOSE]&&this[DISPOSE](E,U),!1):(this[LENGTH]+=Q.length,this[LRU_LIST].unshift(Q),this[CACHE].set(E,this[LRU_LIST].head),trim(this),!0)}has(E){if(!this[CACHE].has(E))return!1;const U=this[CACHE].get(E).value;return!isStale(this,U)}get(E){return get(this,E,!0)}peek(E){return get(this,E,!1)}pop(){const E=this[LRU_LIST].tail;return E?(del(this,E),E.value):null}del(E){del(this,this[CACHE].get(E))}load(E){this.reset();const U=Date.now();for(let G=E.length-1;G>=0;G--){const Y=E[G],J=Y.e||0;if(J===0)this.set(Y.k,Y.v);else{const Q=J-U;Q>0&&this.set(Y.k,Y.v,Q)}}}prune(){this[CACHE].forEach((E,U)=>get(this,U,!1))}}const get=(R,E,U)=>{const G=R[CACHE].get(E);if(G){const Y=G.value;if(isStale(R,Y)){if(del(R,G),!R[ALLOW_STALE])return}else U&&(R[UPDATE_AGE_ON_GET]&&(G.value.now=Date.now()),R[LRU_LIST].unshiftNode(G));return Y.value}},isStale=(R,E)=>{if(!E||!E.maxAge&&!R[MAX_AGE])return!1;const U=Date.now()-E.now;return E.maxAge?U>E.maxAge:R[MAX_AGE]&&U>R[MAX_AGE]},trim=R=>{if(R[LENGTH]>R[MAX$1])for(let E=R[LRU_LIST].tail;R[LENGTH]>R[MAX$1]&&E!==null;){const U=E.prev;del(R,E),E=U}},del=(R,E)=>{if(E){const U=E.value;R[DISPOSE]&&R[DISPOSE](U.key,U.value),R[LENGTH]-=U.length,R[CACHE].delete(U.key),R[LRU_LIST].removeNode(E)}};class Entry{constructor(E,U,G,Y,J){this.key=E,this.value=U,this.length=G,this.now=Y,this.maxAge=J||0}}const forEachStep=(R,E,U,G)=>{let Y=U.value;isStale(R,Y)&&(del(R,U),R[ALLOW_STALE]||(Y=void 0)),Y&&E.call(G,Y.value,Y.key,R)};var lruCache=LRUCache,range$1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range$1;hasRequiredRange=1;class R{constructor(se,le){if(le=G(le),se instanceof R)return se.loose===!!le.loose&&se.includePrerelease===!!le.includePrerelease?se:new R(se.raw,le);if(se instanceof Y)return this.raw=se.value,this.set=[[se]],this.format(),this;if(this.options=le,this.loose=!!le.loose,this.includePrerelease=!!le.includePrerelease,this.raw=se,this.set=se.split("||").map(fe=>this.parseRange(fe.trim())).filter(fe=>fe.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${se}`);if(this.set.length>1){const fe=this.set[0];if(this.set=this.set.filter(be=>!pe(be[0])),this.set.length===0)this.set=[fe];else if(this.set.length>1){for(const be of this.set)if(be.length===1&&ye(be[0])){this.set=[be];break}}}this.format()}format(){return this.range=this.set.map(se=>se.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(se){se=se.trim();const fe=((this.options.includePrerelease&&oe)|(this.options.loose&&ce))+":"+se,be=U.get(fe);if(be)return be;const ve=this.options.loose,xe=ve?X[Z.HYPHENRANGELOOSE]:X[Z.HYPHENRANGE];se=se.replace(xe,Me(this.options.includePrerelease)),J("hyphen replace",se),se=se.replace(X[Z.COMPARATORTRIM],ee),J("comparator trim",se),se=se.replace(X[Z.TILDETRIM],te),se=se.replace(X[Z.CARETTRIM],ne),se=se.split(/\s+/).join(" ");let he=se.split(" ").map(Fe=>ge(Fe,this.options)).join(" ").split(/\s+/).map(Fe=>Le(Fe,this.options));ve&&(he=he.filter(Fe=>(J("loose invalid filter",Fe,this.options),!!Fe.match(X[Z.COMPARATORLOOSE])))),J("range list",he);const me=new Map,de=he.map(Fe=>new Y(Fe,this.options));for(const Fe of de){if(pe(Fe))return[Fe];me.set(Fe.value,Fe)}me.size>1&&me.has("")&&me.delete("");const Ce=[...me.values()];return U.set(fe,Ce),Ce}intersects(se,le){if(!(se instanceof R))throw new TypeError("a Range is required");return this.set.some(fe=>Se(fe,le)&&se.set.some(be=>Se(be,le)&&fe.every(ve=>be.every(xe=>ve.intersects(xe,le)))))}test(se){if(!se)return!1;if(typeof se=="string")try{se=new Q(se,this.options)}catch{return!1}for(let le=0;le<this.set.length;le++)if(ue(this.set[le],se,this.options))return!0;return!1}}range$1=R;const E=lruCache,U=new E({max:1e3}),G=parseOptions_1,Y=requireComparator(),J=debug_1,Q=semver$1,{re:X,t:Z,comparatorTrimReplace:ee,tildeTrimReplace:te,caretTrimReplace:ne}=re$2.exports,{FLAG_INCLUDE_PRERELEASE:oe,FLAG_LOOSE:ce}=constants$2,pe=ae=>ae.value==="<0.0.0-0",ye=ae=>ae.value==="",Se=(ae,se)=>{let le=!0;const fe=ae.slice();let be=fe.pop();for(;le&&fe.length;)le=fe.every(ve=>be.intersects(ve,se)),be=fe.pop();return le},ge=(ae,se)=>(J("comp",ae,se),ae=Re(ae,se),J("caret",ae),ae=Te(ae,se),J("tildes",ae),ae=Ie(ae,se),J("xrange",ae),ae=Pe(ae,se),J("stars",ae),ae),_e=ae=>!ae||ae.toLowerCase()==="x"||ae==="*",Te=(ae,se)=>ae.trim().split(/\s+/).map(le=>Ee(le,se)).join(" "),Ee=(ae,se)=>{const le=se.loose?X[Z.TILDELOOSE]:X[Z.TILDE];return ae.replace(le,(fe,be,ve,xe,he)=>{J("tilde",ae,fe,be,ve,xe,he);let me;return _e(be)?me="":_e(ve)?me=`>=${be}.0.0 <${+be+1}.0.0-0`:_e(xe)?me=`>=${be}.${ve}.0 <${be}.${+ve+1}.0-0`:he?(J("replaceTilde pr",he),me=`>=${be}.${ve}.${xe}-${he} <${be}.${+ve+1}.0-0`):me=`>=${be}.${ve}.${xe} <${be}.${+ve+1}.0-0`,J("tilde return",me),me})},Re=(ae,se)=>ae.trim().split(/\s+/).map(le=>Ae(le,se)).join(" "),Ae=(ae,se)=>{J("caret",ae,se);const le=se.loose?X[Z.CARETLOOSE]:X[Z.CARET],fe=se.includePrerelease?"-0":"";return ae.replace(le,(be,ve,xe,he,me)=>{J("caret",ae,be,ve,xe,he,me);let de;return _e(ve)?de="":_e(xe)?de=`>=${ve}.0.0${fe} <${+ve+1}.0.0-0`:_e(he)?ve==="0"?de=`>=${ve}.${xe}.0${fe} <${ve}.${+xe+1}.0-0`:de=`>=${ve}.${xe}.0${fe} <${+ve+1}.0.0-0`:me?(J("replaceCaret pr",me),ve==="0"?xe==="0"?de=`>=${ve}.${xe}.${he}-${me} <${ve}.${xe}.${+he+1}-0`:de=`>=${ve}.${xe}.${he}-${me} <${ve}.${+xe+1}.0-0`:de=`>=${ve}.${xe}.${he}-${me} <${+ve+1}.0.0-0`):(J("no pr"),ve==="0"?xe==="0"?de=`>=${ve}.${xe}.${he}${fe} <${ve}.${xe}.${+he+1}-0`:de=`>=${ve}.${xe}.${he}${fe} <${ve}.${+xe+1}.0-0`:de=`>=${ve}.${xe}.${he} <${+ve+1}.0.0-0`),J("caret return",de),de})},Ie=(ae,se)=>(J("replaceXRanges",ae,se),ae.split(/\s+/).map(le=>Oe(le,se)).join(" ")),Oe=(ae,se)=>{ae=ae.trim();const le=se.loose?X[Z.XRANGELOOSE]:X[Z.XRANGE];return ae.replace(le,(fe,be,ve,xe,he,me)=>{J("xRange",ae,fe,be,ve,xe,he,me);const de=_e(ve),Ce=de||_e(xe),Fe=Ce||_e(he),we=Fe;return be==="="&&we&&(be=""),me=se.includePrerelease?"-0":"",de?be===">"||be==="<"?fe="<0.0.0-0":fe="*":be&&we?(Ce&&(xe=0),he=0,be===">"?(be=">=",Ce?(ve=+ve+1,xe=0,he=0):(xe=+xe+1,he=0)):be==="<="&&(be="<",Ce?ve=+ve+1:xe=+xe+1),be==="<"&&(me="-0"),fe=`${be+ve}.${xe}.${he}${me}`):Ce?fe=`>=${ve}.0.0${me} <${+ve+1}.0.0-0`:Fe&&(fe=`>=${ve}.${xe}.0${me} <${ve}.${+xe+1}.0-0`),J("xRange return",fe),fe})},Pe=(ae,se)=>(J("replaceStars",ae,se),ae.trim().replace(X[Z.STAR],"")),Le=(ae,se)=>(J("replaceGTE0",ae,se),ae.trim().replace(X[se.includePrerelease?Z.GTE0PRE:Z.GTE0],"")),Me=ae=>(se,le,fe,be,ve,xe,he,me,de,Ce,Fe,we,ke)=>(_e(fe)?le="":_e(be)?le=`>=${fe}.0.0${ae?"-0":""}`:_e(ve)?le=`>=${fe}.${be}.0${ae?"-0":""}`:xe?le=`>=${le}`:le=`>=${le}${ae?"-0":""}`,_e(de)?me="":_e(Ce)?me=`<${+de+1}.0.0-0`:_e(Fe)?me=`<${de}.${+Ce+1}.0-0`:we?me=`<=${de}.${Ce}.${Fe}-${we}`:ae?me=`<${de}.${Ce}.${+Fe+1}-0`:me=`<=${me}`,`${le} ${me}`.trim()),ue=(ae,se,le)=>{for(let fe=0;fe<ae.length;fe++)if(!ae[fe].test(se))return!1;if(se.prerelease.length&&!le.includePrerelease){for(let fe=0;fe<ae.length;fe++)if(J(ae[fe].semver),ae[fe].semver!==Y.ANY&&ae[fe].semver.prerelease.length>0){const be=ae[fe].semver;if(be.major===se.major&&be.minor===se.minor&&be.patch===se.patch)return!0}return!1}return!0};return range$1}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const R=Symbol("SemVer ANY");class E{static get ANY(){return R}constructor(te,ne){if(ne=U(ne),te instanceof E){if(te.loose===!!ne.loose)return te;te=te.value}Q("comparator",te,ne),this.options=ne,this.loose=!!ne.loose,this.parse(te),this.semver===R?this.value="":this.value=this.operator+this.semver.version,Q("comp",this)}parse(te){const ne=this.options.loose?G[Y.COMPARATORLOOSE]:G[Y.COMPARATOR],oe=te.match(ne);if(!oe)throw new TypeError(`Invalid comparator: ${te}`);this.operator=oe[1]!==void 0?oe[1]:"",this.operator==="="&&(this.operator=""),oe[2]?this.semver=new X(oe[2],this.options.loose):this.semver=R}toString(){return this.value}test(te){if(Q("Comparator.test",te,this.options.loose),this.semver===R||te===R)return!0;if(typeof te=="string")try{te=new X(te,this.options)}catch{return!1}return J(te,this.operator,this.semver,this.options)}intersects(te,ne){if(!(te instanceof E))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Z(te.value,ne).test(this.value):te.operator===""?te.value===""?!0:new Z(this.value,ne).test(te.semver):(ne=U(ne),ne.includePrerelease&&(this.value==="<0.0.0-0"||te.value==="<0.0.0-0")||!ne.includePrerelease&&(this.value.startsWith("<0.0.0")||te.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&te.operator.startsWith(">")||this.operator.startsWith("<")&&te.operator.startsWith("<")||this.semver.version===te.semver.version&&this.operator.includes("=")&&te.operator.includes("=")||J(this.semver,"<",te.semver,ne)&&this.operator.startsWith(">")&&te.operator.startsWith("<")||J(this.semver,">",te.semver,ne)&&this.operator.startsWith("<")&&te.operator.startsWith(">")))}}comparator=E;const U=parseOptions_1,{re:G,t:Y}=re$2.exports,J=cmp_1,Q=debug_1,X=semver$1,Z=requireRange();return comparator}const Range$9=requireRange(),satisfies$4=(R,E,U)=>{try{E=new Range$9(E,U)}catch{return!1}return E.test(R)};var satisfies_1=satisfies$4;const Range$8=requireRange(),toComparators$1=(R,E)=>new Range$8(R,E).set.map(U=>U.map(G=>G.value).join(" ").trim().split(" "));var toComparators_1=toComparators$1;const SemVer$4=semver$1,Range$7=requireRange(),maxSatisfying$1=(R,E,U)=>{let G=null,Y=null,J=null;try{J=new Range$7(E,U)}catch{return null}return R.forEach(Q=>{J.test(Q)&&(!G||Y.compare(Q)===-1)&&(G=Q,Y=new SemVer$4(G,U))}),G};var maxSatisfying_1=maxSatisfying$1;const SemVer$3=semver$1,Range$6=requireRange(),minSatisfying$1=(R,E,U)=>{let G=null,Y=null,J=null;try{J=new Range$6(E,U)}catch{return null}return R.forEach(Q=>{J.test(Q)&&(!G||Y.compare(Q)===1)&&(G=Q,Y=new SemVer$3(G,U))}),G};var minSatisfying_1=minSatisfying$1;const SemVer$2=semver$1,Range$5=requireRange(),gt$2=gt_1,minVersion$1=(R,E)=>{R=new Range$5(R,E);let U=new SemVer$2("0.0.0");if(R.test(U)||(U=new SemVer$2("0.0.0-0"),R.test(U)))return U;U=null;for(let G=0;G<R.set.length;++G){const Y=R.set[G];let J=null;Y.forEach(Q=>{const X=new SemVer$2(Q.semver.version);switch(Q.operator){case">":X.prerelease.length===0?X.patch++:X.prerelease.push(0),X.raw=X.format();case"":case">=":(!J||gt$2(X,J))&&(J=X);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${Q.operator}`)}}),J&&(!U||gt$2(U,J))&&(U=J)}return U&&R.test(U)?U:null};var minVersion_1=minVersion$1;const Range$4=requireRange(),validRange$1=(R,E)=>{try{return new Range$4(R,E).range||"*"}catch{return null}};var valid$1=validRange$1;const SemVer$1=semver$1,Comparator$2=requireComparator(),{ANY:ANY$1}=Comparator$2,Range$3=requireRange(),satisfies$3=satisfies_1,gt$1=gt_1,lt$1=lt_1,lte$1=lte_1,gte$1=gte_1,outside$3=(R,E,U,G)=>{R=new SemVer$1(R,G),E=new Range$3(E,G);let Y,J,Q,X,Z;switch(U){case">":Y=gt$1,J=lte$1,Q=lt$1,X=">",Z=">=";break;case"<":Y=lt$1,J=gte$1,Q=gt$1,X="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$3(R,E,G))return!1;for(let ee=0;ee<E.set.length;++ee){const te=E.set[ee];let ne=null,oe=null;if(te.forEach(ce=>{ce.semver===ANY$1&&(ce=new Comparator$2(">=0.0.0")),ne=ne||ce,oe=oe||ce,Y(ce.semver,ne.semver,G)?ne=ce:Q(ce.semver,oe.semver,G)&&(oe=ce)}),ne.operator===X||ne.operator===Z||(!oe.operator||oe.operator===X)&&J(R,oe.semver))return!1;if(oe.operator===Z&&Q(R,oe.semver))return!1}return!0};var outside_1=outside$3;const outside$2=outside_1,gtr$1=(R,E,U)=>outside$2(R,E,">",U);var gtr_1=gtr$1;const outside$1=outside_1,ltr$1=(R,E,U)=>outside$1(R,E,"<",U);var ltr_1=ltr$1;const Range$2=requireRange(),intersects$1=(R,E,U)=>(R=new Range$2(R,U),E=new Range$2(E,U),R.intersects(E,U));var intersects_1=intersects$1;const satisfies$2=satisfies_1,compare$3=compare_1;var simplify=(R,E,U)=>{const G=[];let Y=null,J=null;const Q=R.sort((te,ne)=>compare$3(te,ne,U));for(const te of Q)satisfies$2(te,E,U)?(J=te,Y||(Y=te)):(J&&G.push([Y,J]),J=null,Y=null);Y&&G.push([Y,null]);const X=[];for(const[te,ne]of G)te===ne?X.push(te):!ne&&te===Q[0]?X.push("*"):ne?te===Q[0]?X.push(`<=${ne}`):X.push(`${te} - ${ne}`):X.push(`>=${te}`);const Z=X.join(" || "),ee=typeof E.raw=="string"?E.raw:String(E);return Z.length<ee.length?Z:E};const Range$1=requireRange(),Comparator$1=requireComparator(),{ANY}=Comparator$1,satisfies$1=satisfies_1,compare$2=compare_1,subset$1=(R,E,U={})=>{if(R===E)return!0;R=new Range$1(R,U),E=new Range$1(E,U);let G=!1;e:for(const Y of R.set){for(const J of E.set){const Q=simpleSubset(Y,J,U);if(G=G||Q!==null,Q)continue e}if(G)return!1}return!0},minimumVersionWithPreRelease=[new Comparator$1(">=0.0.0-0")],minimumVersion=[new Comparator$1(">=0.0.0")],simpleSubset=(R,E,U)=>{if(R===E)return!0;if(R.length===1&&R[0].semver===ANY){if(E.length===1&&E[0].semver===ANY)return!0;U.includePrerelease?R=minimumVersionWithPreRelease:R=minimumVersion}if(E.length===1&&E[0].semver===ANY){if(U.includePrerelease)return!0;E=minimumVersion}const G=new Set;let Y,J;for(const ce of R)ce.operator===">"||ce.operator===">="?Y=higherGT(Y,ce,U):ce.operator==="<"||ce.operator==="<="?J=lowerLT(J,ce,U):G.add(ce.semver);if(G.size>1)return null;let Q;if(Y&&J){if(Q=compare$2(Y.semver,J.semver,U),Q>0)return null;if(Q===0&&(Y.operator!==">="||J.operator!=="<="))return null}for(const ce of G){if(Y&&!satisfies$1(ce,String(Y),U)||J&&!satisfies$1(ce,String(J),U))return null;for(const pe of E)if(!satisfies$1(ce,String(pe),U))return!1;return!0}let X,Z,ee,te,ne=J&&!U.includePrerelease&&J.semver.prerelease.length?J.semver:!1,oe=Y&&!U.includePrerelease&&Y.semver.prerelease.length?Y.semver:!1;ne&&ne.prerelease.length===1&&J.operator==="<"&&ne.prerelease[0]===0&&(ne=!1);for(const ce of E){if(te=te||ce.operator===">"||ce.operator===">=",ee=ee||ce.operator==="<"||ce.operator==="<=",Y){if(oe&&ce.semver.prerelease&&ce.semver.prerelease.length&&ce.semver.major===oe.major&&ce.semver.minor===oe.minor&&ce.semver.patch===oe.patch&&(oe=!1),ce.operator===">"||ce.operator===">="){if(X=higherGT(Y,ce,U),X===ce&&X!==Y)return!1}else if(Y.operator===">="&&!satisfies$1(Y.semver,String(ce),U))return!1}if(J){if(ne&&ce.semver.prerelease&&ce.semver.prerelease.length&&ce.semver.major===ne.major&&ce.semver.minor===ne.minor&&ce.semver.patch===ne.patch&&(ne=!1),ce.operator==="<"||ce.operator==="<="){if(Z=lowerLT(J,ce,U),Z===ce&&Z!==J)return!1}else if(J.operator==="<="&&!satisfies$1(J.semver,String(ce),U))return!1}if(!ce.operator&&(J||Y)&&Q!==0)return!1}return!(Y&&ee&&!J&&Q!==0||J&&te&&!Y&&Q!==0||oe||ne)},higherGT=(R,E,U)=>{if(!R)return E;const G=compare$2(R.semver,E.semver,U);return G>0?R:G<0||E.operator===">"&&R.operator===">="?E:R},lowerLT=(R,E,U)=>{if(!R)return E;const G=compare$2(R.semver,E.semver,U);return G<0?R:G>0||E.operator==="<"&&R.operator==="<="?E:R};var subset_1=subset$1;const internalRe=re$2.exports,constants$1=constants$2,SemVer=semver$1,identifiers=identifiers$1,parse$2=parse_1,valid=valid_1,clean=clean_1,inc=inc_1,diff=diff_1,major=major_1,minor=minor_1,patch=patch_1,prerelease=prerelease_1,compare$1=compare_1,rcompare=rcompare_1,compareLoose=compareLoose_1,compareBuild=compareBuild_1,sort=sort_1,rsort=rsort_1,gt=gt_1,lt=lt_1,eq=eq_1,neq=neq_1,gte=gte_1,lte=lte_1,cmp$1=cmp_1,coerce$1=coerce_1,Comparator=requireComparator(),Range=requireRange(),satisfies=satisfies_1,toComparators=toComparators_1,maxSatisfying=maxSatisfying_1,minSatisfying=minSatisfying_1,minVersion=minVersion_1,validRange=valid$1,outside=outside_1,gtr=gtr_1,ltr=ltr_1,intersects=intersects_1,simplifyRange=simplify,subset=subset_1;var semver={parse:parse$2,valid,clean,inc,diff,major,minor,patch,prerelease,compare:compare$1,rcompare,compareLoose,compareBuild,sort,rsort,gt,lt,eq,neq,gte,lte,cmp:cmp$1,coerce:coerce$1,Comparator,Range,satisfies,toComparators,maxSatisfying,minSatisfying,minVersion,validRange,outside,gtr,ltr,intersects,simplifyRange,subset,SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants$1.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants$1.RELEASE_TYPES,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.satisfiesVersionRange=R.gtRange=R.gtVersion=R.assertIsSemVerRange=R.assertIsSemVerVersion=R.isValidSemVerRange=R.isValidSemVerVersion=R.VersionRangeStruct=R.VersionStruct=void 0;const E=semver,U=require$$1$3,G=assert$2;R.VersionStruct=(0,U.refine)((0,U.string)(),"Version",ne=>(0,E.valid)(ne)===null?`Expected SemVer version, got "${ne}"`:!0),R.VersionRangeStruct=(0,U.refine)((0,U.string)(),"Version range",ne=>(0,E.validRange)(ne)===null?`Expected SemVer range, got "${ne}"`:!0);function Y(ne){return(0,U.is)(ne,R.VersionStruct)}R.isValidSemVerVersion=Y;function J(ne){return(0,U.is)(ne,R.VersionRangeStruct)}R.isValidSemVerRange=J;function Q(ne){(0,G.assertStruct)(ne,R.VersionStruct)}R.assertIsSemVerVersion=Q;function X(ne){(0,G.assertStruct)(ne,R.VersionRangeStruct)}R.assertIsSemVerRange=X;function Z(ne,oe){return(0,E.gt)(ne,oe)}R.gtVersion=Z;function ee(ne,oe){return(0,E.gtr)(ne,oe)}R.gtRange=ee;function te(ne,oe){return(0,E.satisfies)(ne,oe,{includePrerelease:!0})}R.satisfiesVersionRange=te})(versions);(function(R){var E=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(G,Y,J,Q){Q===void 0&&(Q=J);var X=Object.getOwnPropertyDescriptor(Y,J);(!X||("get"in X?!Y.__esModule:X.writable||X.configurable))&&(X={enumerable:!0,get:function(){return Y[J]}}),Object.defineProperty(G,Q,X)}:function(G,Y,J,Q){Q===void 0&&(Q=J),G[Q]=Y[J]}),U=commonjsGlobal&&commonjsGlobal.__exportStar||function(G,Y){for(var J in G)J!=="default"&&!Object.prototype.hasOwnProperty.call(Y,J)&&E(Y,G,J)};Object.defineProperty(R,"__esModule",{value:!0}),U(assert$2,R),U(base64$5,R),U(bytes,R),U(checksum,R),U(coercers,R),U(collections,R),U(hex,R),U(json$1,R),U(logging,R),U(misc,R),U(number,R),U(opaque,R),U(time,R),U(versions,R)})(dist$3);(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.createModuleLogger=R.projectLogger=void 0;const E=dist$3;Object.defineProperty(R,"createModuleLogger",{enumerable:!0,get:function(){return E.createModuleLogger}}),R.projectLogger=(0,E.createProjectLogger)("eth-block-tracker")})(loggingUtils);var __importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(PollingBlockTracker$1,"__esModule",{value:!0});PollingBlockTracker$1.PollingBlockTracker=void 0;const json_rpc_random_id_1$1=__importDefault$b(jsonRpcRandomId),pify_1=__importDefault$b(pify$2),BaseBlockTracker_1$1=BaseBlockTracker$1,logging_utils_1=loggingUtils,log$2=(0,logging_utils_1.createModuleLogger)(logging_utils_1.projectLogger,"polling-block-tracker"),createRandomId$2=(0,json_rpc_random_id_1$1.default)(),sec=1e3;class PollingBlockTracker extends BaseBlockTracker_1$1.BaseBlockTracker{constructor(E={}){var U;if(!E.provider)throw new Error("PollingBlockTracker - no provider specified.");super({blockResetDuration:(U=E.blockResetDuration)!==null&&U!==void 0?U:E.pollingInterval}),this._provider=E.provider,this._pollingInterval=E.pollingInterval||20*sec,this._retryTimeout=E.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=E.keepEventLoopActive===void 0?!0:E.keepEventLoopActive,this._setSkipCacheFlag=E.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var E;this._isRunning;)try{await this._updateLatestBlock();const U=timeout$2(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await U}catch(U){const G=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(E=U.stack)!==null&&E!==void 0?E:U}`);try{this.emit("error",G)}catch{console.error(G)}const Y=timeout$2(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await Y}}async _updateLatestBlock(){const E=await this._fetchLatestBlock();this._newPotentialLatest(E)}async _fetchLatestBlock(){const E={jsonrpc:"2.0",id:createRandomId$2(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(E.skipCache=!0),log$2("Making request",E);const U=await(0,pify_1.default)(G=>this._provider.sendAsync(E,G))();if(log$2("Got response",U),U.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${U.error.message}`);return U.result}}PollingBlockTracker$1.PollingBlockTracker=PollingBlockTracker;function timeout$2(R,E){return new Promise(U=>{const G=setTimeout(U,R);G.unref&&E&&G.unref()})}var SubscribeBlockTracker$1={},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(SubscribeBlockTracker$1,"__esModule",{value:!0});SubscribeBlockTracker$1.SubscribeBlockTracker=void 0;const json_rpc_random_id_1=__importDefault$a(jsonRpcRandomId),BaseBlockTracker_1=BaseBlockTracker$1,createRandomId$1=(0,json_rpc_random_id_1.default)();class SubscribeBlockTracker extends BaseBlockTracker_1.BaseBlockTracker{constructor(E={}){if(!E.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(E),this._provider=E.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const E=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(E)}catch(E){this.emit("error",E)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(E){this.emit("error",E)}}_call(E,...U){return new Promise((G,Y)=>{this._provider.sendAsync({id:createRandomId$1(),method:E,params:U,jsonrpc:"2.0"},(J,Q)=>{J?Y(J):G(Q.result)})})}_handleSubData(E,U){var G;U.method==="eth_subscription"&&((G=U.params)===null||G===void 0?void 0:G.subscription)===this._subscriptionId&&this._newPotentialLatest(U.params.result.number)}}SubscribeBlockTracker$1.SubscribeBlockTracker=SubscribeBlockTracker;var types$1={};Object.defineProperty(types$1,"__esModule",{value:!0});(function(R){var E=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(G,Y,J,Q){Q===void 0&&(Q=J),Object.defineProperty(G,Q,{enumerable:!0,get:function(){return Y[J]}})}:function(G,Y,J,Q){Q===void 0&&(Q=J),G[Q]=Y[J]}),U=commonjsGlobal&&commonjsGlobal.__exportStar||function(G,Y){for(var J in G)J!=="default"&&!Object.prototype.hasOwnProperty.call(Y,J)&&E(Y,G,J)};Object.defineProperty(R,"__esModule",{value:!0}),U(PollingBlockTracker$1,R),U(SubscribeBlockTracker$1,R),U(types$1,R)})(dist$4);var dist$1={},idRemapMiddleware={},getUniqueId$1={};Object.defineProperty(getUniqueId$1,"__esModule",{value:!0});getUniqueId$1.getUniqueId=void 0;const MAX=4294967295;let idCounter$1=Math.floor(Math.random()*MAX);function getUniqueId(){return idCounter$1=(idCounter$1+1)%MAX,idCounter$1}getUniqueId$1.getUniqueId=getUniqueId;Object.defineProperty(idRemapMiddleware,"__esModule",{value:!0});idRemapMiddleware.createIdRemapMiddleware=void 0;const getUniqueId_1=getUniqueId$1;function createIdRemapMiddleware(){return(R,E,U,G)=>{const Y=R.id,J=getUniqueId_1.getUniqueId();R.id=J,E.id=J,U(Q=>{R.id=Y,E.id=Y,Q()})}}idRemapMiddleware.createIdRemapMiddleware=createIdRemapMiddleware;var createAsyncMiddleware$3={};Object.defineProperty(createAsyncMiddleware$3,"__esModule",{value:!0});createAsyncMiddleware$3.createAsyncMiddleware=void 0;function createAsyncMiddleware$2(R){return async(E,U,G,Y)=>{let J;const Q=new Promise(te=>{J=te});let X=null,Z=!1;const ee=async()=>{Z=!0,G(te=>{X=te,J()}),await Q};try{await R(E,U,ee),Z?(await Q,X(null)):Y(null)}catch(te){X?X(te):Y(te)}}}createAsyncMiddleware$3.createAsyncMiddleware=createAsyncMiddleware$2;var createScaffoldMiddleware$3={};Object.defineProperty(createScaffoldMiddleware$3,"__esModule",{value:!0});createScaffoldMiddleware$3.createScaffoldMiddleware=void 0;function createScaffoldMiddleware$2(R){return(E,U,G,Y)=>{const J=R[E.method];return J===void 0?G():typeof J=="function"?J(E,U,G,Y):(U.result=J,Y())}}createScaffoldMiddleware$3.createScaffoldMiddleware=createScaffoldMiddleware$2;var JsonRpcEngine$1={},dist={},classes={};Object.defineProperty(classes,"__esModule",{value:!0});classes.EthereumProviderError=classes.EthereumRpcError=void 0;const fast_safe_stringify_1=fastSafeStringify;class EthereumRpcError extends Error{constructor(E,U,G){if(!Number.isInteger(E))throw new Error('"code" must be an integer.');if(!U||typeof U!="string")throw new Error('"message" must be a nonempty string.');super(U),this.code=E,G!==void 0&&(this.data=G)}serialize(){const E={code:this.code,message:this.message};return this.data!==void 0&&(E.data=this.data),this.stack&&(E.stack=this.stack),E}toString(){return fast_safe_stringify_1.default(this.serialize(),stringifyReplacer,2)}}classes.EthereumRpcError=EthereumRpcError;class EthereumProviderError extends EthereumRpcError{constructor(E,U,G){if(!isValidEthProviderCode(E))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(E,U,G)}}classes.EthereumProviderError=EthereumProviderError;function isValidEthProviderCode(R){return Number.isInteger(R)&&R>=1e3&&R<=4999}function stringifyReplacer(R,E){if(E!=="[Circular]")return E}var utils$1={},errorConstants={};Object.defineProperty(errorConstants,"__esModule",{value:!0});errorConstants.errorValues=errorConstants.errorCodes=void 0;errorConstants.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};errorConstants.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.serializeError=R.isValidCode=R.getMessageFromCode=R.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const E=errorConstants,U=classes,G=E.errorCodes.rpc.internal,Y="Unspecified error message. This is a bug, please report it.",J={code:G,message:Q(G)};R.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Q(oe,ce=Y){if(Number.isInteger(oe)){const pe=oe.toString();if(ne(E.errorValues,pe))return E.errorValues[pe].message;if(ee(oe))return R.JSON_RPC_SERVER_ERROR_MESSAGE}return ce}R.getMessageFromCode=Q;function X(oe){if(!Number.isInteger(oe))return!1;const ce=oe.toString();return!!(E.errorValues[ce]||ee(oe))}R.isValidCode=X;function Z(oe,{fallbackError:ce=J,shouldIncludeStack:pe=!1}={}){var ye,Se;if(!ce||!Number.isInteger(ce.code)||typeof ce.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(oe instanceof U.EthereumRpcError)return oe.serialize();const ge={};if(oe&&typeof oe=="object"&&!Array.isArray(oe)&&ne(oe,"code")&&X(oe.code)){const Te=oe;ge.code=Te.code,Te.message&&typeof Te.message=="string"?(ge.message=Te.message,ne(Te,"data")&&(ge.data=Te.data)):(ge.message=Q(ge.code),ge.data={originalError:te(oe)})}else{ge.code=ce.code;const Te=(ye=oe)===null||ye===void 0?void 0:ye.message;ge.message=Te&&typeof Te=="string"?Te:ce.message,ge.data={originalError:te(oe)}}const _e=(Se=oe)===null||Se===void 0?void 0:Se.stack;return pe&&oe&&_e&&typeof _e=="string"&&(ge.stack=_e),ge}R.serializeError=Z;function ee(oe){return oe>=-32099&&oe<=-32e3}function te(oe){return oe&&typeof oe=="object"&&!Array.isArray(oe)?Object.assign({},oe):oe}function ne(oe,ce){return Object.prototype.hasOwnProperty.call(oe,ce)}})(utils$1);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.ethErrors=void 0;const classes_1=classes,utils_1$2=utils$1,error_constants_1=errorConstants;errors.ethErrors={rpc:{parse:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse,R),invalidRequest:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest,R),invalidParams:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams,R),methodNotFound:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound,R),internal:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal,R),server:R=>{if(!R||typeof R!="object"||Array.isArray(R))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:E}=R;if(!Number.isInteger(E)||E>-32005||E<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(E,R)},invalidInput:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput,R),resourceNotFound:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound,R),resourceUnavailable:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable,R),transactionRejected:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected,R),methodNotSupported:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported,R),limitExceeded:R=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded,R)},provider:{userRejectedRequest:R=>getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest,R),unauthorized:R=>getEthProviderError(error_constants_1.errorCodes.provider.unauthorized,R),unsupportedMethod:R=>getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod,R),disconnected:R=>getEthProviderError(error_constants_1.errorCodes.provider.disconnected,R),chainDisconnected:R=>getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected,R),custom:R=>{if(!R||typeof R!="object"||Array.isArray(R))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:E,message:U,data:G}=R;if(!U||typeof U!="string")throw new Error('"message" must be a nonempty string');return new classes_1.EthereumProviderError(E,U,G)}}};function getEthJsonRpcError(R,E){const[U,G]=parseOpts(E);return new classes_1.EthereumRpcError(R,U||utils_1$2.getMessageFromCode(R),G)}function getEthProviderError(R,E){const[U,G]=parseOpts(E);return new classes_1.EthereumProviderError(R,U||utils_1$2.getMessageFromCode(R),G)}function parseOpts(R){if(R){if(typeof R=="string")return[R];if(typeof R=="object"&&!Array.isArray(R)){const{message:E,data:U}=R;if(E&&typeof E!="string")throw new Error("Must specify string message.");return[E||void 0,U]}}return[]}(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.getMessageFromCode=R.serializeError=R.EthereumProviderError=R.EthereumRpcError=R.ethErrors=R.errorCodes=void 0;const E=classes;Object.defineProperty(R,"EthereumRpcError",{enumerable:!0,get:function(){return E.EthereumRpcError}}),Object.defineProperty(R,"EthereumProviderError",{enumerable:!0,get:function(){return E.EthereumProviderError}});const U=utils$1;Object.defineProperty(R,"serializeError",{enumerable:!0,get:function(){return U.serializeError}}),Object.defineProperty(R,"getMessageFromCode",{enumerable:!0,get:function(){return U.getMessageFromCode}});const G=errors;Object.defineProperty(R,"ethErrors",{enumerable:!0,get:function(){return G.ethErrors}});const Y=errorConstants;Object.defineProperty(R,"errorCodes",{enumerable:!0,get:function(){return Y.errorCodes}})})(dist);var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(JsonRpcEngine$1,"__esModule",{value:!0});JsonRpcEngine$1.JsonRpcEngine=void 0;const safe_event_emitter_1$1=__importDefault$9(safeEventEmitter),eth_rpc_errors_1$2=dist;class JsonRpcEngine extends safe_event_emitter_1$1.default{constructor(){super(),this._middleware=[]}push(E){this._middleware.push(E)}handle(E,U){if(U&&typeof U!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(E)?U?this._handleBatch(E,U):this._handleBatch(E):U?this._handle(E,U):this._promiseHandle(E)}asMiddleware(){return async(E,U,G,Y)=>{try{const[J,Q,X]=await JsonRpcEngine._runAllMiddleware(E,U,this._middleware);return Q?(await JsonRpcEngine._runReturnHandlers(X),Y(J)):G(async Z=>{try{await JsonRpcEngine._runReturnHandlers(X)}catch(ee){return Z(ee)}return Z()})}catch(J){return Y(J)}}}async _handleBatch(E,U){try{const G=await Promise.all(E.map(this._promiseHandle.bind(this)));return U?U(null,G):G}catch(G){if(U)return U(G);throw G}}_promiseHandle(E){return new Promise(U=>{this._handle(E,(G,Y)=>{U(Y)})})}async _handle(E,U){if(!E||Array.isArray(E)||typeof E!="object"){const Q=new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof E}`,{request:E});return U(Q,{id:void 0,jsonrpc:"2.0",error:Q})}if(typeof E.method!="string"){const Q=new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof E.method}`,{request:E});return U(Q,{id:E.id,jsonrpc:"2.0",error:Q})}const G=Object.assign({},E),Y={id:G.id,jsonrpc:G.jsonrpc};let J=null;try{await this._processRequest(G,Y)}catch(Q){J=Q}return J&&(delete Y.result,Y.error||(Y.error=eth_rpc_errors_1$2.serializeError(J))),U(J,Y)}async _processRequest(E,U){const[G,Y,J]=await JsonRpcEngine._runAllMiddleware(E,U,this._middleware);if(JsonRpcEngine._checkForCompletion(E,U,Y),await JsonRpcEngine._runReturnHandlers(J),G)throw G}static async _runAllMiddleware(E,U,G){const Y=[];let J=null,Q=!1;for(const X of G)if([J,Q]=await JsonRpcEngine._runMiddleware(E,U,X,Y),Q)break;return[J,Q,Y.reverse()]}static _runMiddleware(E,U,G,Y){return new Promise(J=>{const Q=Z=>{const ee=Z||U.error;ee&&(U.error=eth_rpc_errors_1$2.serializeError(ee)),J([ee,!0])},X=Z=>{U.error?Q(U.error):(Z&&(typeof Z!="function"&&Q(new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof Z}" for request:
${jsonify(E)}`,{request:E})),Y.push(Z)),J([null,!1]))};try{G(E,U,X,Q)}catch(Z){Q(Z)}})}static async _runReturnHandlers(E){for(const U of E)await new Promise((G,Y)=>{U(J=>J?Y(J):G())})}static _checkForCompletion(E,U,G){if(!("result"in U)&&!("error"in U))throw new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${jsonify(E)}`,{request:E});if(!G)throw new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${jsonify(E)}`,{request:E})}}JsonRpcEngine$1.JsonRpcEngine=JsonRpcEngine;function jsonify(R){return JSON.stringify(R,null,2)}var mergeMiddleware$1={};Object.defineProperty(mergeMiddleware$1,"__esModule",{value:!0});mergeMiddleware$1.mergeMiddleware=void 0;const JsonRpcEngine_1=JsonRpcEngine$1;function mergeMiddleware(R){const E=new JsonRpcEngine_1.JsonRpcEngine;return R.forEach(U=>E.push(U)),E.asMiddleware()}mergeMiddleware$1.mergeMiddleware=mergeMiddleware;(function(R){var E=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(G,Y,J,Q){Q===void 0&&(Q=J),Object.defineProperty(G,Q,{enumerable:!0,get:function(){return Y[J]}})}:function(G,Y,J,Q){Q===void 0&&(Q=J),G[Q]=Y[J]}),U=commonjsGlobal&&commonjsGlobal.__exportStar||function(G,Y){for(var J in G)J!=="default"&&!Object.prototype.hasOwnProperty.call(Y,J)&&E(Y,G,J)};Object.defineProperty(R,"__esModule",{value:!0}),U(idRemapMiddleware,R),U(createAsyncMiddleware$3,R),U(createScaffoldMiddleware$3,R),U(getUniqueId$1,R),U(JsonRpcEngine$1,R),U(mergeMiddleware$1,R)})(dist$1);var lib$1={},Mutex$2={},tslib={exports:{}};(function(R){var E,U,G,Y,J,Q,X,Z,ee,te,ne,oe,ce,pe,ye,Se,ge,_e,Te,Ee,Re,Ae,Ie,Oe,Pe;(function(Le){var Me=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Le(ue(Me,ue(R.exports)));function ue(ae,se){return ae!==Me&&(typeof Object.create=="function"?Object.defineProperty(ae,"__esModule",{value:!0}):ae.__esModule=!0),function(le,fe){return ae[le]=se?se(le,fe):fe}}})(function(Le){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,se){ae.__proto__=se}||function(ae,se){for(var le in se)Object.prototype.hasOwnProperty.call(se,le)&&(ae[le]=se[le])};E=function(ae,se){if(typeof se!="function"&&se!==null)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");Me(ae,se);function le(){this.constructor=ae}ae.prototype=se===null?Object.create(se):(le.prototype=se.prototype,new le)},U=Object.assign||function(ae){for(var se,le=1,fe=arguments.length;le<fe;le++){se=arguments[le];for(var be in se)Object.prototype.hasOwnProperty.call(se,be)&&(ae[be]=se[be])}return ae},G=function(ae,se){var le={};for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&se.indexOf(fe)<0&&(le[fe]=ae[fe]);if(ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var be=0,fe=Object.getOwnPropertySymbols(ae);be<fe.length;be++)se.indexOf(fe[be])<0&&Object.prototype.propertyIsEnumerable.call(ae,fe[be])&&(le[fe[be]]=ae[fe[be]]);return le},Y=function(ae,se,le,fe){var be=arguments.length,ve=be<3?se:fe===null?fe=Object.getOwnPropertyDescriptor(se,le):fe,xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(ae,se,le,fe);else for(var he=ae.length-1;he>=0;he--)(xe=ae[he])&&(ve=(be<3?xe(ve):be>3?xe(se,le,ve):xe(se,le))||ve);return be>3&&ve&&Object.defineProperty(se,le,ve),ve},J=function(ae,se){return function(le,fe){se(le,fe,ae)}},Q=function(ae,se){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ae,se)},X=function(ae,se,le,fe){function be(ve){return ve instanceof le?ve:new le(function(xe){xe(ve)})}return new(le||(le=Promise))(function(ve,xe){function he(Ce){try{de(fe.next(Ce))}catch(Fe){xe(Fe)}}function me(Ce){try{de(fe.throw(Ce))}catch(Fe){xe(Fe)}}function de(Ce){Ce.done?ve(Ce.value):be(Ce.value).then(he,me)}de((fe=fe.apply(ae,se||[])).next())})},Z=function(ae,se){var le={label:0,sent:function(){if(ve[0]&1)throw ve[1];return ve[1]},trys:[],ops:[]},fe,be,ve,xe;return xe={next:he(0),throw:he(1),return:he(2)},typeof Symbol=="function"&&(xe[Symbol.iterator]=function(){return this}),xe;function he(de){return function(Ce){return me([de,Ce])}}function me(de){if(fe)throw new TypeError("Generator is already executing.");for(;le;)try{if(fe=1,be&&(ve=de[0]&2?be.return:de[0]?be.throw||((ve=be.return)&&ve.call(be),0):be.next)&&!(ve=ve.call(be,de[1])).done)return ve;switch(be=0,ve&&(de=[de[0]&2,ve.value]),de[0]){case 0:case 1:ve=de;break;case 4:return le.label++,{value:de[1],done:!1};case 5:le.label++,be=de[1],de=[0];continue;case 7:de=le.ops.pop(),le.trys.pop();continue;default:if(ve=le.trys,!(ve=ve.length>0&&ve[ve.length-1])&&(de[0]===6||de[0]===2)){le=0;continue}if(de[0]===3&&(!ve||de[1]>ve[0]&&de[1]<ve[3])){le.label=de[1];break}if(de[0]===6&&le.label<ve[1]){le.label=ve[1],ve=de;break}if(ve&&le.label<ve[2]){le.label=ve[2],le.ops.push(de);break}ve[2]&&le.ops.pop(),le.trys.pop();continue}de=se.call(ae,le)}catch(Ce){de=[6,Ce],be=0}finally{fe=ve=0}if(de[0]&5)throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}},ee=function(ae,se){for(var le in ae)le!=="default"&&!Object.prototype.hasOwnProperty.call(se,le)&&Pe(se,ae,le)},Pe=Object.create?function(ae,se,le,fe){fe===void 0&&(fe=le);var be=Object.getOwnPropertyDescriptor(se,le);(!be||("get"in be?!se.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return se[le]}}),Object.defineProperty(ae,fe,be)}:function(ae,se,le,fe){fe===void 0&&(fe=le),ae[fe]=se[le]},te=function(ae){var se=typeof Symbol=="function"&&Symbol.iterator,le=se&&ae[se],fe=0;if(le)return le.call(ae);if(ae&&typeof ae.length=="number")return{next:function(){return ae&&fe>=ae.length&&(ae=void 0),{value:ae&&ae[fe++],done:!ae}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(ae,se){var le=typeof Symbol=="function"&&ae[Symbol.iterator];if(!le)return ae;var fe=le.call(ae),be,ve=[],xe;try{for(;(se===void 0||se-- >0)&&!(be=fe.next()).done;)ve.push(be.value)}catch(he){xe={error:he}}finally{try{be&&!be.done&&(le=fe.return)&&le.call(fe)}finally{if(xe)throw xe.error}}return ve},oe=function(){for(var ae=[],se=0;se<arguments.length;se++)ae=ae.concat(ne(arguments[se]));return ae},ce=function(){for(var ae=0,se=0,le=arguments.length;se<le;se++)ae+=arguments[se].length;for(var fe=Array(ae),be=0,se=0;se<le;se++)for(var ve=arguments[se],xe=0,he=ve.length;xe<he;xe++,be++)fe[be]=ve[xe];return fe},pe=function(ae,se,le){if(le||arguments.length===2)for(var fe=0,be=se.length,ve;fe<be;fe++)(ve||!(fe in se))&&(ve||(ve=Array.prototype.slice.call(se,0,fe)),ve[fe]=se[fe]);return ae.concat(ve||Array.prototype.slice.call(se))},ye=function(ae){return this instanceof ye?(this.v=ae,this):new ye(ae)},Se=function(ae,se,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe=le.apply(ae,se||[]),be,ve=[];return be={},xe("next"),xe("throw"),xe("return"),be[Symbol.asyncIterator]=function(){return this},be;function xe(we){fe[we]&&(be[we]=function(ke){return new Promise(function(Ne,He){ve.push([we,ke,Ne,He])>1||he(we,ke)})})}function he(we,ke){try{me(fe[we](ke))}catch(Ne){Fe(ve[0][3],Ne)}}function me(we){we.value instanceof ye?Promise.resolve(we.value.v).then(de,Ce):Fe(ve[0][2],we)}function de(we){he("next",we)}function Ce(we){he("throw",we)}function Fe(we,ke){we(ke),ve.shift(),ve.length&&he(ve[0][0],ve[0][1])}},ge=function(ae){var se,le;return se={},fe("next"),fe("throw",function(be){throw be}),fe("return"),se[Symbol.iterator]=function(){return this},se;function fe(be,ve){se[be]=ae[be]?function(xe){return(le=!le)?{value:ye(ae[be](xe)),done:be==="return"}:ve?ve(xe):xe}:ve}},_e=function(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se=ae[Symbol.asyncIterator],le;return se?se.call(ae):(ae=typeof te=="function"?te(ae):ae[Symbol.iterator](),le={},fe("next"),fe("throw"),fe("return"),le[Symbol.asyncIterator]=function(){return this},le);function fe(ve){le[ve]=ae[ve]&&function(xe){return new Promise(function(he,me){xe=ae[ve](xe),be(he,me,xe.done,xe.value)})}}function be(ve,xe,he,me){Promise.resolve(me).then(function(de){ve({value:de,done:he})},xe)}},Te=function(ae,se){return Object.defineProperty?Object.defineProperty(ae,"raw",{value:se}):ae.raw=se,ae};var ue=Object.create?function(ae,se){Object.defineProperty(ae,"default",{enumerable:!0,value:se})}:function(ae,se){ae.default=se};Ee=function(ae){if(ae&&ae.__esModule)return ae;var se={};if(ae!=null)for(var le in ae)le!=="default"&&Object.prototype.hasOwnProperty.call(ae,le)&&Pe(se,ae,le);return ue(se,ae),se},Re=function(ae){return ae&&ae.__esModule?ae:{default:ae}},Ae=function(ae,se,le,fe){if(le==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof se=="function"?ae!==se||!fe:!se.has(ae))throw new TypeError("Cannot read private member from an object whose class did not declare it");return le==="m"?fe:le==="a"?fe.call(ae):fe?fe.value:se.get(ae)},Ie=function(ae,se,le,fe,be){if(fe==="m")throw new TypeError("Private method is not writable");if(fe==="a"&&!be)throw new TypeError("Private accessor was defined without a setter");if(typeof se=="function"?ae!==se||!be:!se.has(ae))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fe==="a"?be.call(ae,le):be?be.value=le:se.set(ae,le),le},Oe=function(ae,se){if(se===null||typeof se!="object"&&typeof se!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ae=="function"?se===ae:ae.has(se)},Le("__extends",E),Le("__assign",U),Le("__rest",G),Le("__decorate",Y),Le("__param",J),Le("__metadata",Q),Le("__awaiter",X),Le("__generator",Z),Le("__exportStar",ee),Le("__createBinding",Pe),Le("__values",te),Le("__read",ne),Le("__spread",oe),Le("__spreadArrays",ce),Le("__spreadArray",pe),Le("__await",ye),Le("__asyncGenerator",Se),Le("__asyncDelegator",ge),Le("__asyncValues",_e),Le("__makeTemplateObject",Te),Le("__importStar",Ee),Le("__importDefault",Re),Le("__classPrivateFieldGet",Ae),Le("__classPrivateFieldSet",Ie),Le("__classPrivateFieldIn",Oe)})})(tslib);var Semaphore$1={};Object.defineProperty(Semaphore$1,"__esModule",{value:!0});var tslib_1$2=tslib.exports,Semaphore=function(){function R(E){if(this._maxConcurrency=E,this._queue=[],E<=0)throw new Error("semaphore must be initialized to a positive value");this._value=E}return R.prototype.acquire=function(){var E=this,U=this.isLocked(),G=new Promise(function(Y){return E._queue.push(Y)});return U||this._dispatch(),G},R.prototype.runExclusive=function(E){return tslib_1$2.__awaiter(this,void 0,void 0,function(){var U,G,Y;return tslib_1$2.__generator(this,function(J){switch(J.label){case 0:return[4,this.acquire()];case 1:U=J.sent(),G=U[0],Y=U[1],J.label=2;case 2:return J.trys.push([2,,4,5]),[4,E(G)];case 3:return[2,J.sent()];case 4:return Y(),[7];case 5:return[2]}})})},R.prototype.isLocked=function(){return this._value<=0},R.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var E=this._currentReleaser;this._currentReleaser=void 0,E()}},R.prototype._dispatch=function(){var E=this,U=this._queue.shift();if(!!U){var G=!1;this._currentReleaser=function(){G||(G=!0,E._value++,E._dispatch())},U([this._value--,this._currentReleaser])}},R}();Semaphore$1.default=Semaphore;Object.defineProperty(Mutex$2,"__esModule",{value:!0});var tslib_1$1=tslib.exports,Semaphore_1=Semaphore$1,Mutex$1=function(){function R(){this._semaphore=new Semaphore_1.default(1)}return R.prototype.acquire=function(){return tslib_1$1.__awaiter(this,void 0,void 0,function(){var E,U;return tslib_1$1.__generator(this,function(G){switch(G.label){case 0:return[4,this._semaphore.acquire()];case 1:return E=G.sent(),U=E[1],[2,U]}})})},R.prototype.runExclusive=function(E){return this._semaphore.runExclusive(function(){return E()})},R.prototype.isLocked=function(){return this._semaphore.isLocked()},R.prototype.release=function(){this._semaphore.release()},R}();Mutex$2.default=Mutex$1;var withTimeout$1={};Object.defineProperty(withTimeout$1,"__esModule",{value:!0});withTimeout$1.withTimeout=void 0;var tslib_1=tslib.exports;function withTimeout(R,E,U){var G=this;return U===void 0&&(U=new Error("timeout")),{acquire:function(){return new Promise(function(Y,J){return tslib_1.__awaiter(G,void 0,void 0,function(){var Q,X,Z;return tslib_1.__generator(this,function(ee){switch(ee.label){case 0:return Q=!1,setTimeout(function(){Q=!0,J(U)},E),[4,R.acquire()];case 1:return X=ee.sent(),Q?(Z=Array.isArray(X)?X[1]:X,Z()):Y(X),[2]}})})})},runExclusive:function(Y){return tslib_1.__awaiter(this,void 0,void 0,function(){var J,Q;return tslib_1.__generator(this,function(X){switch(X.label){case 0:J=function(){},X.label=1;case 1:return X.trys.push([1,,7,8]),[4,this.acquire()];case 2:return Q=X.sent(),Array.isArray(Q)?(J=Q[1],[4,Y(Q[0])]):[3,4];case 3:return[2,X.sent()];case 4:return J=Q,[4,Y()];case 5:return[2,X.sent()];case 6:return[3,8];case 7:return J(),[7];case 8:return[2]}})})},release:function(){R.release()},isLocked:function(){return R.isLocked()}}}withTimeout$1.withTimeout=withTimeout;(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.withTimeout=R.Semaphore=R.Mutex=void 0;var E=Mutex$2;Object.defineProperty(R,"Mutex",{enumerable:!0,get:function(){return E.default}});var U=Semaphore$1;Object.defineProperty(R,"Semaphore",{enumerable:!0,get:function(){return U.default}});var G=withTimeout$1;Object.defineProperty(R,"withTimeout",{enumerable:!0,get:function(){return G.withTimeout}})})(lib$1);var immutable=extend$2,hasOwnProperty$1=Object.prototype.hasOwnProperty;function extend$2(){for(var R={},E=0;E<arguments.length;E++){var U=arguments[E];for(var G in U)hasOwnProperty$1.call(U,G)&&(R[G]=U[G])}return R}const extend$1=immutable,createRandomId=jsonRpcRandomId();var ethQuery=EthQuery$1;function EthQuery$1(R){const E=this;E.currentProvider=R}EthQuery$1.prototype.getBalance=generateFnWithDefaultBlockFor(2,"eth_getBalance");EthQuery$1.prototype.getCode=generateFnWithDefaultBlockFor(2,"eth_getCode");EthQuery$1.prototype.getTransactionCount=generateFnWithDefaultBlockFor(2,"eth_getTransactionCount");EthQuery$1.prototype.getStorageAt=generateFnWithDefaultBlockFor(3,"eth_getStorageAt");EthQuery$1.prototype.call=generateFnWithDefaultBlockFor(2,"eth_call");EthQuery$1.prototype.protocolVersion=generateFnFor("eth_protocolVersion");EthQuery$1.prototype.syncing=generateFnFor("eth_syncing");EthQuery$1.prototype.coinbase=generateFnFor("eth_coinbase");EthQuery$1.prototype.mining=generateFnFor("eth_mining");EthQuery$1.prototype.hashrate=generateFnFor("eth_hashrate");EthQuery$1.prototype.gasPrice=generateFnFor("eth_gasPrice");EthQuery$1.prototype.accounts=generateFnFor("eth_accounts");EthQuery$1.prototype.blockNumber=generateFnFor("eth_blockNumber");EthQuery$1.prototype.getBlockTransactionCountByHash=generateFnFor("eth_getBlockTransactionCountByHash");EthQuery$1.prototype.getBlockTransactionCountByNumber=generateFnFor("eth_getBlockTransactionCountByNumber");EthQuery$1.prototype.getUncleCountByBlockHash=generateFnFor("eth_getUncleCountByBlockHash");EthQuery$1.prototype.getUncleCountByBlockNumber=generateFnFor("eth_getUncleCountByBlockNumber");EthQuery$1.prototype.sign=generateFnFor("eth_sign");EthQuery$1.prototype.sendTransaction=generateFnFor("eth_sendTransaction");EthQuery$1.prototype.sendRawTransaction=generateFnFor("eth_sendRawTransaction");EthQuery$1.prototype.estimateGas=generateFnFor("eth_estimateGas");EthQuery$1.prototype.getBlockByHash=generateFnFor("eth_getBlockByHash");EthQuery$1.prototype.getBlockByNumber=generateFnFor("eth_getBlockByNumber");EthQuery$1.prototype.getTransactionByHash=generateFnFor("eth_getTransactionByHash");EthQuery$1.prototype.getTransactionByBlockHashAndIndex=generateFnFor("eth_getTransactionByBlockHashAndIndex");EthQuery$1.prototype.getTransactionByBlockNumberAndIndex=generateFnFor("eth_getTransactionByBlockNumberAndIndex");EthQuery$1.prototype.getTransactionReceipt=generateFnFor("eth_getTransactionReceipt");EthQuery$1.prototype.getUncleByBlockHashAndIndex=generateFnFor("eth_getUncleByBlockHashAndIndex");EthQuery$1.prototype.getUncleByBlockNumberAndIndex=generateFnFor("eth_getUncleByBlockNumberAndIndex");EthQuery$1.prototype.getCompilers=generateFnFor("eth_getCompilers");EthQuery$1.prototype.compileLLL=generateFnFor("eth_compileLLL");EthQuery$1.prototype.compileSolidity=generateFnFor("eth_compileSolidity");EthQuery$1.prototype.compileSerpent=generateFnFor("eth_compileSerpent");EthQuery$1.prototype.newFilter=generateFnFor("eth_newFilter");EthQuery$1.prototype.newBlockFilter=generateFnFor("eth_newBlockFilter");EthQuery$1.prototype.newPendingTransactionFilter=generateFnFor("eth_newPendingTransactionFilter");EthQuery$1.prototype.uninstallFilter=generateFnFor("eth_uninstallFilter");EthQuery$1.prototype.getFilterChanges=generateFnFor("eth_getFilterChanges");EthQuery$1.prototype.getFilterLogs=generateFnFor("eth_getFilterLogs");EthQuery$1.prototype.getLogs=generateFnFor("eth_getLogs");EthQuery$1.prototype.getWork=generateFnFor("eth_getWork");EthQuery$1.prototype.submitWork=generateFnFor("eth_submitWork");EthQuery$1.prototype.submitHashrate=generateFnFor("eth_submitHashrate");EthQuery$1.prototype.sendAsync=function(R,E){this.currentProvider.sendAsync(createPayload(R),function(G,Y){if(!G&&Y.error&&(G=new Error("EthQuery - RPC Error - "+Y.error.message)),G)return E(G);E(null,Y.result)})};function generateFnFor(R){return function(){const E=this;var U=[].slice.call(arguments),G=U.pop();E.sendAsync({method:R,params:U},G)}}function generateFnWithDefaultBlockFor(R,E){return function(){const U=this;var G=[].slice.call(arguments),Y=G.pop();G.length<R&&G.push("latest"),U.sendAsync({method:E,params:G},Y)}}function createPayload(R){return extend$1({id:createRandomId(),jsonrpc:"2.0",params:[]},R)}const processFn=(R,E,U,G)=>function(...Y){const J=E.promiseModule;return new J((Q,X)=>{E.multiArgs?Y.push((...ee)=>{E.errorFirst?ee[0]?X(ee):(ee.shift(),Q(ee)):Q(ee)}):E.errorFirst?Y.push((ee,te)=>{ee?X(ee):Q(te)}):Y.push(Q),Reflect.apply(R,this===U?G:this,Y)})},filterCache=new WeakMap;var pify$1=(R,E)=>{E={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...E};const U=typeof R;if(!(R!==null&&(U==="object"||U==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${R===null?"null":U}\``);const G=(Q,X)=>{let Z=filterCache.get(Q);if(Z||(Z={},filterCache.set(Q,Z)),X in Z)return Z[X];const ee=pe=>typeof pe=="string"||typeof X=="symbol"?X===pe:pe.test(X),te=Reflect.getOwnPropertyDescriptor(Q,X),ne=te===void 0||te.writable||te.configurable,ce=(E.include?E.include.some(ee):!E.exclude.some(ee))&&ne;return Z[X]=ce,ce},Y=new WeakMap,J=new Proxy(R,{apply(Q,X,Z){const ee=Y.get(Q);if(ee)return Reflect.apply(ee,X,Z);const te=E.excludeMain?Q:processFn(Q,E,J,Q);return Y.set(Q,te),Reflect.apply(te,X,Z)},get(Q,X){const Z=Q[X];if(!G(Q,X)||Z===Function.prototype[X])return Z;const ee=Y.get(Z);if(ee)return ee;if(typeof Z=="function"){const te=processFn(Z,E,J,Q);return Y.set(Z,te),te}return Z}});return J};const SafeEventEmitter$1=safeEventEmitter.default;class BaseFilter$3 extends SafeEventEmitter$1{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(E){this.updates=this.updates.concat(E),E.forEach(U=>this.emit("update",U))}addInitialResults(E){}getChangesAndClear(){const E=this.updates;return this.updates=[],E}}var baseFilter=BaseFilter$3;const BaseFilter$2=baseFilter;class BaseFilterWithHistory$1 extends BaseFilter$2{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(E){this.allResults=this.allResults.concat(E),super.addResults(E)}addInitialResults(E){this.allResults=this.allResults.concat(E),super.addInitialResults(E)}getAllResults(){return this.allResults}}var baseFilterHistory=BaseFilterWithHistory$1,hexUtils={minBlockRef:minBlockRef$1,maxBlockRef,sortBlockRefs,bnToHex:bnToHex$1,blockRefIsNumber:blockRefIsNumber$1,hexToInt:hexToInt$3,incrementHexInt:incrementHexInt$4,intToHex:intToHex$2,unsafeRandomBytes:unsafeRandomBytes$1};function minBlockRef$1(...R){return sortBlockRefs(R)[0]}function maxBlockRef(...R){const E=sortBlockRefs(R);return E[E.length-1]}function sortBlockRefs(R){return R.sort((E,U)=>E==="latest"||U==="earliest"?1:U==="latest"||E==="earliest"?-1:hexToInt$3(E)-hexToInt$3(U))}function bnToHex$1(R){return"0x"+R.toString(16)}function blockRefIsNumber$1(R){return R&&!["earliest","latest","pending"].includes(R)}function hexToInt$3(R){return R==null?R:Number.parseInt(R,16)}function incrementHexInt$4(R){if(R==null)return R;const E=hexToInt$3(R);return intToHex$2(E+1)}function intToHex$2(R){if(R==null)return R;let E=R.toString(16);return E.length%2&&(E="0"+E),"0x"+E}function unsafeRandomBytes$1(R){let E="0x";for(let U=0;U<R;U++)E+=unsafeRandomNibble(),E+=unsafeRandomNibble();return E}function unsafeRandomNibble(){return Math.floor(Math.random()*16).toString(16)}const EthQuery=ethQuery,pify=pify$1,BaseFilterWithHistory=baseFilterHistory,{bnToHex,hexToInt:hexToInt$2,incrementHexInt:incrementHexInt$3,minBlockRef,blockRefIsNumber}=hexUtils;class LogFilter$1 extends BaseFilterWithHistory{constructor({provider:E,params:U}){super(),this.type="log",this.ethQuery=new EthQuery(E),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},U),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(G=>G.toLowerCase()))}async initialize({currentBlock:E}){let U=this.params.fromBlock;["latest","pending"].includes(U)&&(U=E),U==="earliest"&&(U="0x0"),this.params.fromBlock=U;const G=minBlockRef(this.params.toBlock,E),Y=Object.assign({},this.params,{toBlock:G}),J=await this._fetchLogs(Y);this.addInitialResults(J)}async update({oldBlock:E,newBlock:U}){const G=U;let Y;E?Y=incrementHexInt$3(E):Y=U;const J=Object.assign({},this.params,{fromBlock:Y,toBlock:G}),X=(await this._fetchLogs(J)).filter(Z=>this.matchLog(Z));this.addResults(X)}async _fetchLogs(E){return await pify(G=>this.ethQuery.getLogs(E,G))()}matchLog(E){if(hexToInt$2(this.params.fromBlock)>=hexToInt$2(E.blockNumber)||blockRefIsNumber(this.params.toBlock)&&hexToInt$2(this.params.toBlock)<=hexToInt$2(E.blockNumber))return!1;const U=E.address&&E.address.toLowerCase();return this.params.address&&U&&!this.params.address.includes(U)?!1:this.params.topics.every((Y,J)=>{let Q=E.topics[J];if(!Q)return!1;Q=Q.toLowerCase();let X=Array.isArray(Y)?Y:[Y];return X.includes(null)?!0:(X=X.map(te=>te.toLowerCase()),X.includes(Q))})}}var logFilter=LogFilter$1,getBlocksForRange_1=getBlocksForRange$3;async function getBlocksForRange$3({provider:R,fromBlock:E,toBlock:U}){E||(E=U);const G=hexToInt$1(E),J=hexToInt$1(U)-G+1,Q=Array(J).fill().map((Z,ee)=>G+ee).map(intToHex$1);return await Promise.all(Q.map(Z=>query(R,"eth_getBlockByNumber",[Z,!1])))}function hexToInt$1(R){return R==null?R:Number.parseInt(R,16)}function intToHex$1(R){if(R==null)return R;const E=R.toString(16);return"0x"+E}function sendAsync(R,E){return new Promise((U,G)=>{R.sendAsync(E,(Y,J)=>{Y?G(Y):J.error?G(J.error):J.result?U(J.result):G(new Error("Result was empty"))})})}async function query(R,E,U){for(let G=0;G<3;G++)try{return await sendAsync(R,{id:1,jsonrpc:"2.0",method:E,params:U})}catch(Y){console.error(`provider.sendAsync failed: ${Y.stack||Y.message||Y}`)}throw new Error(`Block not found for params: ${JSON.stringify(U)}`)}const BaseFilter$1=baseFilter,getBlocksForRange$2=getBlocksForRange_1,{incrementHexInt:incrementHexInt$2}=hexUtils;class BlockFilter$1 extends BaseFilter$1{constructor({provider:E,params:U}){super(),this.type="block",this.provider=E}async update({oldBlock:E,newBlock:U}){const G=U,Y=incrementHexInt$2(E),Q=(await getBlocksForRange$2({provider:this.provider,fromBlock:Y,toBlock:G})).map(X=>X.hash);this.addResults(Q)}}var blockFilter=BlockFilter$1;const BaseFilter=baseFilter,getBlocksForRange$1=getBlocksForRange_1,{incrementHexInt:incrementHexInt$1}=hexUtils;class TxFilter$1 extends BaseFilter{constructor({provider:E}){super(),this.type="tx",this.provider=E}async update({oldBlock:E}){const U=E,G=incrementHexInt$1(E),Y=await getBlocksForRange$1({provider:this.provider,fromBlock:G,toBlock:U}),J=[];for(const Q of Y)J.push(...Q.transactions);this.addResults(J)}}var txFilter=TxFilter$1;const Mutex=lib$1.Mutex,{createAsyncMiddleware:createAsyncMiddleware$1,createScaffoldMiddleware:createScaffoldMiddleware$1}=dist$1,LogFilter=logFilter,BlockFilter=blockFilter,TxFilter=txFilter,{intToHex,hexToInt}=hexUtils;var ethJsonRpcFilters=createEthFilterMiddleware;function createEthFilterMiddleware({blockTracker:R,provider:E}){let U=0,G={};const Y=new Mutex,J=mutexMiddlewareWrapper({mutex:Y}),Q=createScaffoldMiddleware$1({eth_newFilter:J(toFilterCreationMiddleware(Z)),eth_newBlockFilter:J(toFilterCreationMiddleware(ee)),eth_newPendingTransactionFilter:J(toFilterCreationMiddleware(te)),eth_uninstallFilter:J(toAsyncRpcMiddleware(ce)),eth_getFilterChanges:J(toAsyncRpcMiddleware(ne)),eth_getFilterLogs:J(toAsyncRpcMiddleware(oe))}),X=async({oldBlock:_e,newBlock:Te})=>{if(G.length===0)return;const Ee=await Y.acquire();try{await Promise.all(objValues(G).map(async Re=>{try{await Re.update({oldBlock:_e,newBlock:Te})}catch(Ae){console.error(Ae)}}))}catch(Re){console.error(Re)}Ee()};return Q.newLogFilter=Z,Q.newBlockFilter=ee,Q.newPendingTransactionFilter=te,Q.uninstallFilter=ce,Q.getFilterChanges=ne,Q.getFilterLogs=oe,Q.destroy=()=>{Se()},Q;async function Z(_e){const Te=new LogFilter({provider:E,params:_e});return await pe(Te),Te}async function ee(){const _e=new BlockFilter({provider:E});return await pe(_e),_e}async function te(){const _e=new TxFilter({provider:E});return await pe(_e),_e}async function ne(_e){const Te=hexToInt(_e),Ee=G[Te];if(!Ee)throw new Error(`No filter for index "${Te}"`);return Ee.getChangesAndClear()}async function oe(_e){const Te=hexToInt(_e),Ee=G[Te];if(!Ee)throw new Error(`No filter for index "${Te}"`);let Re=[];return Ee.type==="log"&&(Re=Ee.getAllResults()),Re}async function ce(_e){const Te=hexToInt(_e),Ee=G[Te],Re=Boolean(Ee);return Re&&await ye(Te),Re}async function pe(_e){const Te=objValues(G).length,Ee=await R.getLatestBlock();await _e.initialize({currentBlock:Ee}),U++,G[U]=_e,_e.id=U,_e.idHex=intToHex(U);const Re=objValues(G).length;return ge({prevFilterCount:Te,newFilterCount:Re}),U}async function ye(_e){const Te=objValues(G).length;delete G[_e];const Ee=objValues(G).length;ge({prevFilterCount:Te,newFilterCount:Ee})}async function Se(){const _e=objValues(G).length;G={},ge({prevFilterCount:_e,newFilterCount:0})}function ge({prevFilterCount:_e,newFilterCount:Te}){if(_e===0&&Te>0){R.on("sync",X);return}if(_e>0&&Te===0){R.removeListener("sync",X);return}}}function toFilterCreationMiddleware(R){return toAsyncRpcMiddleware(async(...E)=>{const U=await R(...E);return intToHex(U.id)})}function toAsyncRpcMiddleware(R){return createAsyncMiddleware$1(async(E,U)=>{const G=await R.apply(null,E.params);U.result=G})}function mutexMiddlewareWrapper({mutex:R}){return E=>async(U,G,Y,J)=>{(await R.acquire())(),E(U,G,Y,J)}}function objValues(R,E){const U=[];for(let G in R)U.push(R[G]);return U}const SafeEventEmitter=safeEventEmitter.default,{createAsyncMiddleware,createScaffoldMiddleware}=dist$1,createFilterMiddleware=ethJsonRpcFilters,{unsafeRandomBytes,incrementHexInt}=hexUtils,getBlocksForRange=getBlocksForRange_1;var subscriptionManager=createSubscriptionMiddleware;function createSubscriptionMiddleware({blockTracker:R,provider:E}){const U={},G=createFilterMiddleware({blockTracker:R,provider:E});let Y=!1;const J=new SafeEventEmitter,Q=createScaffoldMiddleware({eth_subscribe:createAsyncMiddleware(X),eth_unsubscribe:createAsyncMiddleware(Z)});return Q.destroy=te,{events:J,middleware:Q};async function X(ne,oe){if(Y)throw new Error("SubscriptionManager - attempting to use after destroying");const ce=ne.params[0],pe=unsafeRandomBytes(16);let ye;switch(ce){case"newHeads":ye=Se({subId:pe});break;case"logs":const _e=ne.params[1],Te=await G.newLogFilter(_e);ye=ge({subId:pe,filter:Te});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${ce}"`)}U[pe]=ye,oe.result=pe;return;function Se({subId:_e}){const Te={type:ce,destroy:async()=>{R.removeListener("sync",Te.update)},update:async({oldBlock:Ee,newBlock:Re})=>{const Ae=Re,Ie=incrementHexInt(Ee);(await getBlocksForRange({provider:E,fromBlock:Ie,toBlock:Ae})).map(normalizeBlock).filter(Le=>Le!==null).forEach(Le=>{ee(_e,Le)})}};return R.on("sync",Te.update),Te}function ge({subId:_e,filter:Te}){return Te.on("update",Re=>ee(_e,Re)),{type:ce,destroy:async()=>await G.uninstallFilter(Te.idHex)}}}async function Z(ne,oe){if(Y)throw new Error("SubscriptionManager - attempting to use after destroying");const ce=ne.params[0],pe=U[ce];if(!pe){oe.result=!1;return}delete U[ce],await pe.destroy(),oe.result=!0}function ee(ne,oe){J.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:ne,result:oe}})}function te(){J.removeAllListeners();for(const ne in U)U[ne].destroy(),delete U[ne];Y=!0}}function normalizeBlock(R){return R==null?null:{hash:R.hash,parentHash:R.parentHash,sha3Uncles:R.sha3Uncles,miner:R.miner,stateRoot:R.stateRoot,transactionsRoot:R.transactionsRoot,receiptsRoot:R.receiptsRoot,logsBloom:R.logsBloom,difficulty:R.difficulty,number:R.number,gasLimit:R.gasLimit,gasUsed:R.gasUsed,nonce:R.nonce,mixHash:R.mixHash,timestamp:R.timestamp,extraData:R.extraData}}Object.defineProperty(SubscriptionManager$1,"__esModule",{value:!0});SubscriptionManager$1.SubscriptionManager=void 0;const eth_block_tracker_1=dist$4,createSubscriptionManager=subscriptionManager,noop$2=()=>{};class SubscriptionManager{constructor(E){const U=new eth_block_tracker_1.PollingBlockTracker({provider:E,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:G,middleware:Y}=createSubscriptionManager({blockTracker:U,provider:E});this.events=G,this.subscriptionMiddleware=Y}async handleRequest(E){const U={};return await this.subscriptionMiddleware(E,U,noop$2,noop$2),U}destroy(){this.subscriptionMiddleware.destroy()}}SubscriptionManager$1.SubscriptionManager=SubscriptionManager;var __importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(CoinbaseWalletProvider$1,"__esModule",{value:!0});CoinbaseWalletProvider$1.CoinbaseWalletProvider=void 0;const safe_event_emitter_1=__importDefault$8(safeEventEmitter),bn_js_1=__importDefault$8(bn.exports),eth_rpc_errors_1$1=dist$5,DiagnosticLogger_1$2=DiagnosticLogger,Session_1$2=Session$1,WalletSDKRelayAbstract_1$1=WalletSDKRelayAbstract$1,util_1$5=util$8,eth_eip712_util_1=__importDefault$8(ethEip712Util),FilterPolyfill_1=FilterPolyfill$1,JSONRPC_1=JSONRPC,SubscriptionManager_1=SubscriptionManager$1,DEFAULT_CHAIN_ID_KEY="DefaultChainId",DEFAULT_JSON_RPC_URL="DefaultJsonRpcUrl";class CoinbaseWalletProvider extends safe_event_emitter_1.default{constructor(E){var U,G;super(),this._filterPolyfill=new FilterPolyfill_1.FilterPolyfill(this),this._subscriptionManager=new SubscriptionManager_1.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this._send=this.send.bind(this),this._sendAsync=this.sendAsync.bind(this),this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=E.chainId,this._jsonRpcUrlFromOpts=E.jsonRpcUrl,this._overrideIsMetaMask=E.overrideIsMetaMask,this._relayProvider=E.relayProvider,this._storage=E.storage,this._relayEventManager=E.relayEventManager,this.diagnostic=E.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(U=E.overrideIsCoinbaseWallet)!==null&&U!==void 0?U:!0,this.isCoinbaseBrowser=(G=E.overrideIsCoinbaseBrowser)!==null&&G!==void 0?G:!1,this.qrUrl=E.qrUrl,this.supportsAddressSwitching=E.supportsAddressSwitching,this.isLedger=E.isLedger;const Y=this.getChainId(),J=(0,util_1$5.prepend0x)(Y.toString(16));this.emit("connect",{chainIdStr:J});const Q=this._storage.getItem(WalletSDKRelayAbstract_1$1.LOCAL_STORAGE_ADDRESSES_KEY);if(Q){const X=Q.split(" ");X[0]!==""&&(this._addresses=X.map(Z=>(0,util_1$5.ensureAddressString)(Z)),this.emit("accountsChanged",X))}this._subscriptionManager.events.on("notification",X=>{this.emit("message",{type:X.method,data:X.params})}),this._addresses.length>0&&this.initializeRelay(),window.addEventListener("message",X=>{var Z;if(!(X.origin!==location.origin||X.source!==window)&&X.data.type==="walletLinkMessage"){if(X.data.data.action==="defaultChainChanged"||X.data.data.action==="dappChainSwitched"){const ee=X.data.data.chainId,te=(Z=X.data.data.jsonRpcUrl)!==null&&Z!==void 0?Z:this.jsonRpcUrl;this.updateProviderInfo(te,Number(ee))}X.data.data.action==="addressChanged"&&this._setAddresses([X.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,util_1$5.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var E;return(E=this._storage.getItem(DEFAULT_JSON_RPC_URL))!==null&&E!==void 0?E:this._jsonRpcUrlFromOpts}set jsonRpcUrl(E){this._storage.setItem(DEFAULT_JSON_RPC_URL,E)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(E,U){this.isLedger||this.isCoinbaseBrowser||(this._chainIdFromOpts=U,this._jsonRpcUrlFromOpts=E),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(E,U){this.jsonRpcUrl=E;const G=this.getChainId();this._storage.setItem(DEFAULT_CHAIN_ID_KEY,U.toString(10)),((0,util_1$5.ensureIntNumber)(U)!==G||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(E,U,G,Y,J,Q){return!!(await(await this.initializeRelay()).watchAsset(E,U,G,Y,J,Q==null?void 0:Q.toString()).promise).result}async addEthereumChain(E,U,G,Y,J,Q){var X,Z;if((0,util_1$5.ensureIntNumber)(E)===this.getChainId())return!1;const ee=await this.initializeRelay(),te=ee.inlineAddEthereumChain(E.toString());!this._isAuthorized()&&!te&&await ee.requestEthereumAccounts().promise;const ne=await ee.addEthereumChain(E.toString(),U,J,G,Y,Q).promise;return((X=ne.result)===null||X===void 0?void 0:X.isApproved)===!0&&this.updateProviderInfo(U[0],E),((Z=ne.result)===null||Z===void 0?void 0:Z.isApproved)===!0}async switchEthereumChain(E){const G=await(await this.initializeRelay()).switchEthereumChain(E.toString(10),this.selectedAddress||void 0).promise;if(G.errorCode)throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:G.errorCode});const Y=G.result;Y.isApproved&&Y.rpcUrl.length>0&&this.updateProviderInfo(Y.rpcUrl,E)}setAppInfo(E,U){this.initializeRelay().then(G=>G.setAppInfo(E,U))}async enable(){var E;return(E=this.diagnostic)===null||E===void 0||E.log(DiagnosticLogger_1$2.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Session_1$2.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0?[...this._addresses]:await this._send(JSONRPC_1.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(E,U){if(typeof E=="string"){const Y=E,J=Array.isArray(U)?U:U!==void 0?[U]:[],Q={jsonrpc:"2.0",id:0,method:Y,params:J};return this._sendRequestAsync(Q).then(X=>X.result)}if(typeof U=="function"){const Y=E,J=U;return this._sendAsync(Y,J)}if(Array.isArray(E))return E.map(J=>this._sendRequest(J));const G=E;return this._sendRequest(G)}async sendAsync(E,U){if(typeof U!="function")throw new Error("callback is required");if(Array.isArray(E)){const Y=U;this._sendMultipleRequestsAsync(E).then(J=>Y(null,J)).catch(J=>Y(J,null));return}const G=U;return this._sendRequestAsync(E).then(Y=>G(null,Y)).catch(Y=>G(Y,null))}async request(E){if(!E||typeof E!="object"||Array.isArray(E))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:E});const{method:U,params:G}=E;if(typeof U!="string"||U.length===0)throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:E});if(G!==void 0&&!Array.isArray(G)&&(typeof G!="object"||G===null))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:E});const Y=G===void 0?[]:G,J=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:U,params:Y,jsonrpc:"2.0",id:J})).result}async scanQRCode(E){const G=await(await this.initializeRelay()).scanQRCode((0,util_1$5.ensureRegExpString)(E)).promise;if(typeof G.result!="string")throw new Error("result was not a string");return G.result}async genericRequest(E,U){const Y=await(await this.initializeRelay()).genericRequest(E,U).promise;if(typeof Y.result!="string")throw new Error("result was not a string");return Y.result}async selectProvider(E){const G=await(await this.initializeRelay()).selectProvider(E).promise;if(typeof G.result!="string")throw new Error("result was not a string");return G.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(E){const U={jsonrpc:"2.0",id:E.id},{method:G}=E;if(U.result=this._handleSynchronousMethods(E),U.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${G} synchronously without a callback. Please provide a callback parameter to call ${G} asynchronously.`);return U}_setAddresses(E,U){if(!Array.isArray(E))throw new Error("addresses is not an array");const G=E.map(Y=>(0,util_1$5.ensureAddressString)(Y));JSON.stringify(G)!==JSON.stringify(this._addresses)&&(this._addresses.length>0&&this.supportsAddressSwitching===!1&&!U||(this._addresses=G,this.emit("accountsChanged",this._addresses),this._storage.setItem(WalletSDKRelayAbstract_1$1.LOCAL_STORAGE_ADDRESSES_KEY,G.join(" "))))}_sendRequestAsync(E){return new Promise((U,G)=>{try{const Y=this._handleSynchronousMethods(E);if(Y!==void 0)return U({jsonrpc:"2.0",id:E.id,result:Y});const J=this._handleAsynchronousFilterMethods(E);if(J!==void 0){J.then(X=>U(Object.assign(Object.assign({},X),{id:E.id}))).catch(X=>G(X));return}const Q=this._handleSubscriptionMethods(E);if(Q!==void 0){Q.then(X=>U({jsonrpc:"2.0",id:E.id,result:X.result})).catch(X=>G(X));return}}catch(Y){return G(Y)}this._handleAsynchronousMethods(E).then(Y=>Y&&U(Object.assign(Object.assign({},Y),{id:E.id}))).catch(Y=>G(Y))})}_sendMultipleRequestsAsync(E){return Promise.all(E.map(U=>this._sendRequestAsync(U)))}_handleSynchronousMethods(E){const{method:U}=E,G=E.params||[];switch(U){case JSONRPC_1.JSONRPCMethod.eth_accounts:return this._eth_accounts();case JSONRPC_1.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case JSONRPC_1.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(G);case JSONRPC_1.JSONRPCMethod.net_version:return this._net_version();case JSONRPC_1.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(E){const{method:U}=E,G=E.params||[];switch(U){case JSONRPC_1.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case JSONRPC_1.JSONRPCMethod.eth_sign:return this._eth_sign(G);case JSONRPC_1.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(G);case JSONRPC_1.JSONRPCMethod.personal_sign:return this._personal_sign(G);case JSONRPC_1.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(G);case JSONRPC_1.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(G);case JSONRPC_1.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(G);case JSONRPC_1.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(G);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(G);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(G);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v4:case JSONRPC_1.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(G);case JSONRPC_1.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(G);case JSONRPC_1.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(G);case JSONRPC_1.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(G);case JSONRPC_1.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(G)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(E,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(E){const{method:U}=E,G=E.params||[];switch(U){case JSONRPC_1.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(G);case JSONRPC_1.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case JSONRPC_1.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case JSONRPC_1.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(G);case JSONRPC_1.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(G)}}_handleSubscriptionMethods(E){switch(E.method){case JSONRPC_1.JSONRPCMethod.eth_subscribe:case JSONRPC_1.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(E)}}_isKnownAddress(E){try{const U=(0,util_1$5.ensureAddressString)(E);return this._addresses.map(Y=>(0,util_1$5.ensureAddressString)(Y)).includes(U)}catch{}return!1}_ensureKnownAddress(E){var U;if(!this._isKnownAddress(E))throw(U=this.diagnostic)===null||U===void 0||U.log(DiagnosticLogger_1$2.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(E){const U=E.from?(0,util_1$5.ensureAddressString)(E.from):this.selectedAddress;if(!U)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(U);const G=E.to?(0,util_1$5.ensureAddressString)(E.to):null,Y=E.value!=null?(0,util_1$5.ensureBN)(E.value):new bn_js_1.default(0),J=E.data?(0,util_1$5.ensureBuffer)(E.data):Buffer.alloc(0),Q=E.nonce!=null?(0,util_1$5.ensureIntNumber)(E.nonce):null,X=E.gasPrice!=null?(0,util_1$5.ensureBN)(E.gasPrice):null,Z=E.maxFeePerGas!=null?(0,util_1$5.ensureBN)(E.maxFeePerGas):null,ee=E.maxPriorityFeePerGas!=null?(0,util_1$5.ensureBN)(E.maxPriorityFeePerGas):null,te=E.gas!=null?(0,util_1$5.ensureBN)(E.gas):null,ne=this.getChainId();return{fromAddress:U,toAddress:G,weiValue:Y,data:J,nonce:Q,gasPriceInWei:X,maxFeePerGas:Z,maxPriorityFeePerGas:ee,gasLimit:te,chainId:ne}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw eth_rpc_errors_1$1.ethErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw eth_rpc_errors_1$1.ethErrors.provider.unsupportedMethod({})}async _signEthereumMessage(E,U,G,Y){this._ensureKnownAddress(U);try{const Q=await(await this.initializeRelay()).signEthereumMessage(E,U,G,Y).promise;return{jsonrpc:"2.0",id:0,result:Q.result}}catch(J){throw typeof J.message=="string"&&J.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied message signature"):J}}async _ethereumAddressFromSignedMessage(E,U,G){const J=await(await this.initializeRelay()).ethereumAddressFromSignedMessage(E,U,G).promise;return{jsonrpc:"2.0",id:0,result:J.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,util_1$5.hexStringFromIntNumber)(this.getChainId())}getChainId(){const E=this._storage.getItem(DEFAULT_CHAIN_ID_KEY);if(!E)return(0,util_1$5.ensureIntNumber)(this._chainIdFromOpts);const U=parseInt(E,10);return(0,util_1$5.ensureIntNumber)(U)}async _eth_requestAccounts(){var E;if((E=this.diagnostic)===null||E===void 0||E.log(DiagnosticLogger_1$2.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Session_1$2.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0)return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let U;try{U=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(G){throw typeof G.message=="string"&&G.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied account authorization"):G}if(!U.result)throw new Error("accounts received is empty");return this._setAddresses(U.result),this.isLedger||this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(E){this._requireAuthorization();const U=(0,util_1$5.ensureAddressString)(E[0]),G=(0,util_1$5.ensureBuffer)(E[1]);return this._signEthereumMessage(G,U,!1)}_eth_ecRecover(E){const U=(0,util_1$5.ensureBuffer)(E[0]),G=(0,util_1$5.ensureBuffer)(E[1]);return this._ethereumAddressFromSignedMessage(U,G,!1)}_personal_sign(E){this._requireAuthorization();const U=(0,util_1$5.ensureBuffer)(E[0]),G=(0,util_1$5.ensureAddressString)(E[1]);return this._signEthereumMessage(U,G,!0)}_personal_ecRecover(E){const U=(0,util_1$5.ensureBuffer)(E[0]),G=(0,util_1$5.ensureBuffer)(E[1]);return this._ethereumAddressFromSignedMessage(U,G,!0)}async _eth_signTransaction(E){this._requireAuthorization();const U=this._prepareTransactionParams(E[0]||{});try{const Y=await(await this.initializeRelay()).signEthereumTransaction(U).promise;return{jsonrpc:"2.0",id:0,result:Y.result}}catch(G){throw typeof G.message=="string"&&G.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied transaction signature"):G}}async _eth_sendRawTransaction(E){const U=(0,util_1$5.ensureBuffer)(E[0]),Y=await(await this.initializeRelay()).submitEthereumTransaction(U,this.getChainId()).promise;return{jsonrpc:"2.0",id:0,result:Y.result}}async _eth_sendTransaction(E){this._requireAuthorization();const U=this._prepareTransactionParams(E[0]||{});try{const Y=await(await this.initializeRelay()).signAndSubmitEthereumTransaction(U).promise;return{jsonrpc:"2.0",id:0,result:Y.result}}catch(G){throw typeof G.message=="string"&&G.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied transaction signature"):G}}async _eth_signTypedData_v1(E){this._requireAuthorization();const U=(0,util_1$5.ensureParsedJSONObject)(E[0]),G=(0,util_1$5.ensureAddressString)(E[1]);this._ensureKnownAddress(G);const Y=eth_eip712_util_1.default.hashForSignTypedDataLegacy({data:U}),J=JSON.stringify(U,null,2);return this._signEthereumMessage(Y,G,!1,J)}async _eth_signTypedData_v3(E){this._requireAuthorization();const U=(0,util_1$5.ensureAddressString)(E[0]),G=(0,util_1$5.ensureParsedJSONObject)(E[1]);this._ensureKnownAddress(U);const Y=eth_eip712_util_1.default.hashForSignTypedData_v3({data:G}),J=JSON.stringify(G,null,2);return this._signEthereumMessage(Y,U,!1,J)}async _eth_signTypedData_v4(E){this._requireAuthorization();const U=(0,util_1$5.ensureAddressString)(E[0]),G=(0,util_1$5.ensureParsedJSONObject)(E[1]);this._ensureKnownAddress(U);const Y=eth_eip712_util_1.default.hashForSignTypedData_v4({data:G}),J=JSON.stringify(G,null,2);return this._signEthereumMessage(Y,U,!1,J)}async _cbwallet_arbitrary(E){const U=E[0],G=E[1];if(typeof G!="string")throw new Error("parameter must be a string");if(typeof U!="object"||U===null)throw new Error("parameter must be an object");const Y=await this.genericRequest(U,G);return{jsonrpc:"2.0",id:0,result:Y}}async _wallet_addEthereumChain(E){var U,G,Y,J;const Q=E[0];if(((U=Q.rpcUrls)===null||U===void 0?void 0:U.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!Q.chainName||Q.chainName.trim()==="")throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:0,message:"chainName is a required field"});if(!Q.nativeCurrency)throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:0,message:"nativeCurrency is a required field"});const X=parseInt(Q.chainId,16);return await this.addEthereumChain(X,(G=Q.rpcUrls)!==null&&G!==void 0?G:[],(Y=Q.blockExplorerUrls)!==null&&Y!==void 0?Y:[],Q.chainName,(J=Q.iconUrls)!==null&&J!==void 0?J:[],Q.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(E){const U=E[0];return await this.switchEthereumChain(parseInt(U.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(E){const U=Array.isArray(E)?E[0]:E;if(!U.type)throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Type is required"});if((U==null?void 0:U.type)!=="ERC20")throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:`Asset of type '${U.type}' is not supported`});if(!(U!=null&&U.options))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Options are required"});if(!(U!=null&&U.options.address))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Address is required"});const G=this.getChainId(),{address:Y,symbol:J,image:Q,decimals:X}=U.options,Z=await this.watchAsset(U.type,Y,J,X,Q,G);return{jsonrpc:"2.0",id:0,result:Z}}_eth_uninstallFilter(E){const U=(0,util_1$5.ensureHexString)(E[0]);return this._filterPolyfill.uninstallFilter(U)}async _eth_newFilter(E){const U=E[0],G=await this._filterPolyfill.newFilter(U);return{jsonrpc:"2.0",id:0,result:G}}async _eth_newBlockFilter(){const E=await this._filterPolyfill.newBlockFilter();return{jsonrpc:"2.0",id:0,result:E}}async _eth_newPendingTransactionFilter(){const E=await this._filterPolyfill.newPendingTransactionFilter();return{jsonrpc:"2.0",id:0,result:E}}_eth_getFilterChanges(E){const U=(0,util_1$5.ensureHexString)(E[0]);return this._filterPolyfill.getFilterChanges(U)}_eth_getFilterLogs(E){const U=(0,util_1$5.ensureHexString)(E[0]);return this._filterPolyfill.getFilterLogs(U)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(E=>(E.setAccountsCallback((U,G)=>this._setAddresses(U,G)),E.setChainCallback((U,G)=>{this.updateProviderInfo(G,parseInt(U,10))}),E.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=E,E))}}CoinbaseWalletProvider$1.CoinbaseWalletProvider=CoinbaseWalletProvider;var WalletSDKUI$1={},LinkFlow$1={},n,l$1,u$1,i$3,t$1,o$1,r$2,f$1,e$1={},c$1=[],s$1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a$1(R,E){for(var U in E)R[U]=E[U];return R}function h$1(R){var E=R.parentNode;E&&E.removeChild(R)}function v$1(R,E,U){var G,Y,J,Q={};for(J in E)J=="key"?G=E[J]:J=="ref"?Y=E[J]:Q[J]=E[J];if(arguments.length>2&&(Q.children=arguments.length>3?n.call(arguments,2):U),typeof R=="function"&&R.defaultProps!=null)for(J in R.defaultProps)Q[J]===void 0&&(Q[J]=R.defaultProps[J]);return y$1(R,Q,G,Y,null)}function y$1(R,E,U,G,Y){var J={type:R,props:E,key:U,ref:G,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Y==null?++u$1:Y};return Y==null&&l$1.vnode!=null&&l$1.vnode(J),J}function p$1(){return{current:null}}function d$1(R){return R.children}function _$1(R,E){this.props=R,this.context=E}function k$1(R,E){if(E==null)return R.__?k$1(R.__,R.__.__k.indexOf(R)+1):null;for(var U;E<R.__k.length;E++)if((U=R.__k[E])!=null&&U.__e!=null)return U.__e;return typeof R.type=="function"?k$1(R):null}function b$1(R){var E,U;if((R=R.__)!=null&&R.__c!=null){for(R.__e=R.__c.base=null,E=0;E<R.__k.length;E++)if((U=R.__k[E])!=null&&U.__e!=null){R.__e=R.__c.base=U.__e;break}return b$1(R)}}function m$1(R){(!R.__d&&(R.__d=!0)&&t$1.push(R)&&!g$1.__r++||r$2!==l$1.debounceRendering)&&((r$2=l$1.debounceRendering)||o$1)(g$1)}function g$1(){for(var R;g$1.__r=t$1.length;)R=t$1.sort(function(E,U){return E.__v.__b-U.__v.__b}),t$1=[],R.some(function(E){var U,G,Y,J,Q,X;E.__d&&(Q=(J=(U=E).__v).__e,(X=U.__P)&&(G=[],(Y=a$1({},J)).__v=J.__v+1,j$1(X,J,Y,U.__n,X.ownerSVGElement!==void 0,J.__h!=null?[Q]:null,G,Q==null?k$1(J):Q,J.__h),z(G,J),J.__e!=Q&&b$1(J)))})}function w$1(R,E,U,G,Y,J,Q,X,Z,ee){var te,ne,oe,ce,pe,ye,Se,ge=G&&G.__k||c$1,_e=ge.length;for(U.__k=[],te=0;te<E.length;te++)if((ce=U.__k[te]=(ce=E[te])==null||typeof ce=="boolean"?null:typeof ce=="string"||typeof ce=="number"||typeof ce=="bigint"?y$1(null,ce,null,null,ce):Array.isArray(ce)?y$1(d$1,{children:ce},null,null,null):ce.__b>0?y$1(ce.type,ce.props,ce.key,null,ce.__v):ce)!=null){if(ce.__=U,ce.__b=U.__b+1,(oe=ge[te])===null||oe&&ce.key==oe.key&&ce.type===oe.type)ge[te]=void 0;else for(ne=0;ne<_e;ne++){if((oe=ge[ne])&&ce.key==oe.key&&ce.type===oe.type){ge[ne]=void 0;break}oe=null}j$1(R,ce,oe=oe||e$1,Y,J,Q,X,Z,ee),pe=ce.__e,(ne=ce.ref)&&oe.ref!=ne&&(Se||(Se=[]),oe.ref&&Se.push(oe.ref,null,ce),Se.push(ne,ce.__c||pe,ce)),pe!=null?(ye==null&&(ye=pe),typeof ce.type=="function"&&ce.__k===oe.__k?ce.__d=Z=x$1(ce,Z,R):Z=P$1(R,ce,oe,ge,pe,Z),typeof U.type=="function"&&(U.__d=Z)):Z&&oe.__e==Z&&Z.parentNode!=R&&(Z=k$1(oe))}for(U.__e=ye,te=_e;te--;)ge[te]!=null&&(typeof U.type=="function"&&ge[te].__e!=null&&ge[te].__e==U.__d&&(U.__d=k$1(G,te+1)),N(ge[te],ge[te]));if(Se)for(te=0;te<Se.length;te++)M(Se[te],Se[++te],Se[++te])}function x$1(R,E,U){for(var G,Y=R.__k,J=0;Y&&J<Y.length;J++)(G=Y[J])&&(G.__=R,E=typeof G.type=="function"?x$1(G,E,U):P$1(U,G,G,Y,G.__e,E));return E}function A$1(R,E){return E=E||[],R==null||typeof R=="boolean"||(Array.isArray(R)?R.some(function(U){A$1(U,E)}):E.push(R)),E}function P$1(R,E,U,G,Y,J){var Q,X,Z;if(E.__d!==void 0)Q=E.__d,E.__d=void 0;else if(U==null||Y!=J||Y.parentNode==null)e:if(J==null||J.parentNode!==R)R.appendChild(Y),Q=null;else{for(X=J,Z=0;(X=X.nextSibling)&&Z<G.length;Z+=2)if(X==Y)break e;R.insertBefore(Y,J),Q=J}return Q!==void 0?Q:Y.nextSibling}function C(R,E,U,G,Y){var J;for(J in U)J==="children"||J==="key"||J in E||H(R,J,null,U[J],G);for(J in E)Y&&typeof E[J]!="function"||J==="children"||J==="key"||J==="value"||J==="checked"||U[J]===E[J]||H(R,J,E[J],U[J],G)}function $(R,E,U){E[0]==="-"?R.setProperty(E,U):R[E]=U==null?"":typeof U!="number"||s$1.test(E)?U:U+"px"}function H(R,E,U,G,Y){var J;e:if(E==="style")if(typeof U=="string")R.style.cssText=U;else{if(typeof G=="string"&&(R.style.cssText=G=""),G)for(E in G)U&&E in U||$(R.style,E,"");if(U)for(E in U)G&&U[E]===G[E]||$(R.style,E,U[E])}else if(E[0]==="o"&&E[1]==="n")J=E!==(E=E.replace(/Capture$/,"")),E=E.toLowerCase()in R?E.toLowerCase().slice(2):E.slice(2),R.l||(R.l={}),R.l[E+J]=U,U?G||R.addEventListener(E,J?T$1:I,J):R.removeEventListener(E,J?T$1:I,J);else if(E!=="dangerouslySetInnerHTML"){if(Y)E=E.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(E!=="href"&&E!=="list"&&E!=="form"&&E!=="tabIndex"&&E!=="download"&&E in R)try{R[E]=U==null?"":U;break e}catch{}typeof U=="function"||(U!=null&&(U!==!1||E[0]==="a"&&E[1]==="r")?R.setAttribute(E,U):R.removeAttribute(E))}}function I(R){this.l[R.type+!1](l$1.event?l$1.event(R):R)}function T$1(R){this.l[R.type+!0](l$1.event?l$1.event(R):R)}function j$1(R,E,U,G,Y,J,Q,X,Z){var ee,te,ne,oe,ce,pe,ye,Se,ge,_e,Te,Ee=E.type;if(E.constructor!==void 0)return null;U.__h!=null&&(Z=U.__h,X=E.__e=U.__e,E.__h=null,J=[X]),(ee=l$1.__b)&&ee(E);try{e:if(typeof Ee=="function"){if(Se=E.props,ge=(ee=Ee.contextType)&&G[ee.__c],_e=ee?ge?ge.props.value:ee.__:G,U.__c?ye=(te=E.__c=U.__c).__=te.__E:("prototype"in Ee&&Ee.prototype.render?E.__c=te=new Ee(Se,_e):(E.__c=te=new _$1(Se,_e),te.constructor=Ee,te.render=O),ge&&ge.sub(te),te.props=Se,te.state||(te.state={}),te.context=_e,te.__n=G,ne=te.__d=!0,te.__h=[]),te.__s==null&&(te.__s=te.state),Ee.getDerivedStateFromProps!=null&&(te.__s==te.state&&(te.__s=a$1({},te.__s)),a$1(te.__s,Ee.getDerivedStateFromProps(Se,te.__s))),oe=te.props,ce=te.state,ne)Ee.getDerivedStateFromProps==null&&te.componentWillMount!=null&&te.componentWillMount(),te.componentDidMount!=null&&te.__h.push(te.componentDidMount);else{if(Ee.getDerivedStateFromProps==null&&Se!==oe&&te.componentWillReceiveProps!=null&&te.componentWillReceiveProps(Se,_e),!te.__e&&te.shouldComponentUpdate!=null&&te.shouldComponentUpdate(Se,te.__s,_e)===!1||E.__v===U.__v){te.props=Se,te.state=te.__s,E.__v!==U.__v&&(te.__d=!1),te.__v=E,E.__e=U.__e,E.__k=U.__k,E.__k.forEach(function(Re){Re&&(Re.__=E)}),te.__h.length&&Q.push(te);break e}te.componentWillUpdate!=null&&te.componentWillUpdate(Se,te.__s,_e),te.componentDidUpdate!=null&&te.__h.push(function(){te.componentDidUpdate(oe,ce,pe)})}te.context=_e,te.props=Se,te.state=te.__s,(ee=l$1.__r)&&ee(E),te.__d=!1,te.__v=E,te.__P=R,ee=te.render(te.props,te.state,te.context),te.state=te.__s,te.getChildContext!=null&&(G=a$1(a$1({},G),te.getChildContext())),ne||te.getSnapshotBeforeUpdate==null||(pe=te.getSnapshotBeforeUpdate(oe,ce)),Te=ee!=null&&ee.type===d$1&&ee.key==null?ee.props.children:ee,w$1(R,Array.isArray(Te)?Te:[Te],E,U,G,Y,J,Q,X,Z),te.base=E.__e,E.__h=null,te.__h.length&&Q.push(te),ye&&(te.__E=te.__=null),te.__e=!1}else J==null&&E.__v===U.__v?(E.__k=U.__k,E.__e=U.__e):E.__e=L(U.__e,E,U,G,Y,J,Q,Z);(ee=l$1.diffed)&&ee(E)}catch(Re){E.__v=null,(Z||J!=null)&&(E.__e=X,E.__h=!!Z,J[J.indexOf(X)]=null),l$1.__e(Re,E,U)}}function z(R,E){l$1.__c&&l$1.__c(E,R),R.some(function(U){try{R=U.__h,U.__h=[],R.some(function(G){G.call(U)})}catch(G){l$1.__e(G,U.__v)}})}function L(R,E,U,G,Y,J,Q,X){var Z,ee,te,ne=U.props,oe=E.props,ce=E.type,pe=0;if(ce==="svg"&&(Y=!0),J!=null){for(;pe<J.length;pe++)if((Z=J[pe])&&"setAttribute"in Z==!!ce&&(ce?Z.localName===ce:Z.nodeType===3)){R=Z,J[pe]=null;break}}if(R==null){if(ce===null)return document.createTextNode(oe);R=Y?document.createElementNS("http://www.w3.org/2000/svg",ce):document.createElement(ce,oe.is&&oe),J=null,X=!1}if(ce===null)ne===oe||X&&R.data===oe||(R.data=oe);else{if(J=J&&n.call(R.childNodes),ee=(ne=U.props||e$1).dangerouslySetInnerHTML,te=oe.dangerouslySetInnerHTML,!X){if(J!=null)for(ne={},pe=0;pe<R.attributes.length;pe++)ne[R.attributes[pe].name]=R.attributes[pe].value;(te||ee)&&(te&&(ee&&te.__html==ee.__html||te.__html===R.innerHTML)||(R.innerHTML=te&&te.__html||""))}if(C(R,oe,ne,Y,X),te)E.__k=[];else if(pe=E.props.children,w$1(R,Array.isArray(pe)?pe:[pe],E,U,G,Y&&ce!=="foreignObject",J,Q,J?J[0]:U.__k&&k$1(U,0),X),J!=null)for(pe=J.length;pe--;)J[pe]!=null&&h$1(J[pe]);X||("value"in oe&&(pe=oe.value)!==void 0&&(pe!==R.value||ce==="progress"&&!pe||ce==="option"&&pe!==ne.value)&&H(R,"value",pe,ne.value,!1),"checked"in oe&&(pe=oe.checked)!==void 0&&pe!==R.checked&&H(R,"checked",pe,ne.checked,!1))}return R}function M(R,E,U){try{typeof R=="function"?R(E):R.current=E}catch(G){l$1.__e(G,U)}}function N(R,E,U){var G,Y;if(l$1.unmount&&l$1.unmount(R),(G=R.ref)&&(G.current&&G.current!==R.__e||M(G,null,E)),(G=R.__c)!=null){if(G.componentWillUnmount)try{G.componentWillUnmount()}catch(J){l$1.__e(J,E)}G.base=G.__P=null}if(G=R.__k)for(Y=0;Y<G.length;Y++)G[Y]&&N(G[Y],E,typeof R.type!="function");U||R.__e==null||h$1(R.__e),R.__e=R.__d=void 0}function O(R,E,U){return this.constructor(R,U)}function S(R,E,U){var G,Y,J;l$1.__&&l$1.__(R,E),Y=(G=typeof U=="function")?null:U&&U.__k||E.__k,J=[],j$1(E,R=(!G&&U||E).__k=v$1(d$1,null,[R]),Y||e$1,e$1,E.ownerSVGElement!==void 0,!G&&U?[U]:Y?null:E.firstChild?n.call(E.childNodes):null,J,!G&&U?U:Y?Y.__e:E.firstChild,G),z(J,R)}function q$1(R,E){S(R,E,q$1)}function B(R,E,U){var G,Y,J,Q=a$1({},R.props);for(J in E)J=="key"?G=E[J]:J=="ref"?Y=E[J]:Q[J]=E[J];return arguments.length>2&&(Q.children=arguments.length>3?n.call(arguments,2):U),y$1(R.type,Q,G||R.key,Y||R.ref,null)}function D(R,E){var U={__c:E="__cC"+f$1++,__:R,Consumer:function(G,Y){return G.children(Y)},Provider:function(G){var Y,J;return this.getChildContext||(Y=[],(J={})[E]=this,this.getChildContext=function(){return J},this.shouldComponentUpdate=function(Q){this.props.value!==Q.value&&Y.some(m$1)},this.sub=function(Q){Y.push(Q);var X=Q.componentWillUnmount;Q.componentWillUnmount=function(){Y.splice(Y.indexOf(Q),1),X&&X.call(Q)}}),G.children}};return U.Provider.__=U.Consumer.contextType=U}n=c$1.slice,l$1={__e:function(R,E,U,G){for(var Y,J,Q;E=E.__;)if((Y=E.__c)&&!Y.__)try{if((J=Y.constructor)&&J.getDerivedStateFromError!=null&&(Y.setState(J.getDerivedStateFromError(R)),Q=Y.__d),Y.componentDidCatch!=null&&(Y.componentDidCatch(R,G||{}),Q=Y.__d),Q)return Y.__E=Y}catch(X){R=X}throw R}},u$1=0,i$3=function(R){return R!=null&&R.constructor===void 0},_$1.prototype.setState=function(R,E){var U;U=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=a$1({},this.state),typeof R=="function"&&(R=R(a$1({},U),this.props)),R&&a$1(U,R),R!=null&&this.__v&&(E&&this.__h.push(E),m$1(this))},_$1.prototype.forceUpdate=function(R){this.__v&&(this.__e=!0,R&&this.__h.push(R),m$1(this))},_$1.prototype.render=d$1,t$1=[],o$1=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g$1.__r=0,f$1=0;const preact_module=Object.freeze(Object.defineProperty({__proto__:null,render:S,hydrate:q$1,createElement:v$1,h:v$1,Fragment:d$1,createRef:p$1,get isValidElement(){return i$3},Component:_$1,cloneElement:B,createContext:D,toChildArray:A$1,get options(){return l$1}},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(preact_module);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(R,E){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,G){U.__proto__=G}||function(U,G){for(var Y in G)G.hasOwnProperty(Y)&&(U[Y]=G[Y])},extendStatics(R,E)};function __extends(R,E){extendStatics(R,E);function U(){this.constructor=R}R.prototype=E===null?Object.create(E):(U.prototype=E.prototype,new U)}function isFunction$1(R){return typeof R=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(R){if(R){var E=new Error;""+E.stack}_enable_super_gross_mode_that_will_cause_bad_things=R},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(R){setTimeout(function(){throw R},0)}var empty$2={closed:!0,next:function(R){},error:function(R){if(config.useDeprecatedSynchronousErrorHandling)throw R;hostReportError(R)},complete:function(){}},isArray=function(){return Array.isArray||function(R){return R&&typeof R.length=="number"}}();function isObject(R){return R!==null&&typeof R=="object"}var UnsubscriptionErrorImpl=function(){function R(E){return Error.call(this),this.message=E?E.length+` errors occurred during unsubscription:
`+E.map(function(U,G){return G+1+") "+U.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=E,this}return R.prototype=Object.create(Error.prototype),R}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function R(E){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,E&&(this._ctorUnsubscribe=!0,this._unsubscribe=E)}return R.prototype.unsubscribe=function(){var E;if(!this.closed){var U=this,G=U._parentOrParents,Y=U._ctorUnsubscribe,J=U._unsubscribe,Q=U._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,G instanceof R)G.remove(this);else if(G!==null)for(var X=0;X<G.length;++X){var Z=G[X];Z.remove(this)}if(isFunction$1(J)){Y&&(this._unsubscribe=void 0);try{J.call(this)}catch(ne){E=ne instanceof UnsubscriptionError?flattenUnsubscriptionErrors(ne.errors):[ne]}}if(isArray(Q))for(var X=-1,ee=Q.length;++X<ee;){var te=Q[X];if(isObject(te))try{te.unsubscribe()}catch(oe){E=E||[],oe instanceof UnsubscriptionError?E=E.concat(flattenUnsubscriptionErrors(oe.errors)):E.push(oe)}}if(E)throw new UnsubscriptionError(E)}},R.prototype.add=function(E){var U=E;if(!E)return R.EMPTY;switch(typeof E){case"function":U=new R(E);case"object":if(U===this||U.closed||typeof U.unsubscribe!="function")return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof R)){var G=U;U=new R,U._subscriptions=[G]}break;default:throw new Error("unrecognized teardown "+E+" added to Subscription.")}var Y=U._parentOrParents;if(Y===null)U._parentOrParents=this;else if(Y instanceof R){if(Y===this)return U;U._parentOrParents=[Y,this]}else if(Y.indexOf(this)===-1)Y.push(this);else return U;var J=this._subscriptions;return J===null?this._subscriptions=[U]:J.push(U),U},R.prototype.remove=function(E){var U=this._subscriptions;if(U){var G=U.indexOf(E);G!==-1&&U.splice(G,1)}},R.EMPTY=function(E){return E.closed=!0,E}(new R),R}();function flattenUnsubscriptionErrors(R){return R.reduce(function(E,U){return E.concat(U instanceof UnsubscriptionError?U.errors:U)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this)||this;switch(J.syncErrorValue=null,J.syncErrorThrown=!1,J.syncErrorThrowable=!1,J.isStopped=!1,arguments.length){case 0:J.destination=empty$2;break;case 1:if(!U){J.destination=empty$2;break}if(typeof U=="object"){U instanceof E?(J.syncErrorThrowable=U.syncErrorThrowable,J.destination=U,U.add(J)):(J.syncErrorThrowable=!0,J.destination=new SafeSubscriber(J,U));break}default:J.syncErrorThrowable=!0,J.destination=new SafeSubscriber(J,U,G,Y);break}return J}return E.prototype[rxSubscriber]=function(){return this},E.create=function(U,G,Y){var J=new E(U,G,Y);return J.syncErrorThrowable=!1,J},E.prototype.next=function(U){this.isStopped||this._next(U)},E.prototype.error=function(U){this.isStopped||(this.isStopped=!0,this._error(U))},E.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},E.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,R.prototype.unsubscribe.call(this))},E.prototype._next=function(U){this.destination.next(U)},E.prototype._error=function(U){this.destination.error(U),this.unsubscribe()},E.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},E.prototype._unsubscribeAndRecycle=function(){var U=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this},E}(Subscription),SafeSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this)||this;Q._parentSubscriber=U;var X,Z=Q;return isFunction$1(G)?X=G:G&&(X=G.next,Y=G.error,J=G.complete,G!==empty$2&&(Z=Object.create(G),isFunction$1(Z.unsubscribe)&&Q.add(Z.unsubscribe.bind(Z)),Z.unsubscribe=Q.unsubscribe.bind(Q))),Q._context=Z,Q._next=X,Q._error=Y,Q._complete=J,Q}return E.prototype.next=function(U){if(!this.isStopped&&this._next){var G=this._parentSubscriber;!config.useDeprecatedSynchronousErrorHandling||!G.syncErrorThrowable?this.__tryOrUnsub(this._next,U):this.__tryOrSetError(G,this._next,U)&&this.unsubscribe()}},E.prototype.error=function(U){if(!this.isStopped){var G=this._parentSubscriber,Y=config.useDeprecatedSynchronousErrorHandling;if(this._error)!Y||!G.syncErrorThrowable?(this.__tryOrUnsub(this._error,U),this.unsubscribe()):(this.__tryOrSetError(G,this._error,U),this.unsubscribe());else if(G.syncErrorThrowable)Y?(G.syncErrorValue=U,G.syncErrorThrown=!0):hostReportError(U),this.unsubscribe();else{if(this.unsubscribe(),Y)throw U;hostReportError(U)}}},E.prototype.complete=function(){var U=this;if(!this.isStopped){var G=this._parentSubscriber;if(this._complete){var Y=function(){return U._complete.call(U._context)};!config.useDeprecatedSynchronousErrorHandling||!G.syncErrorThrowable?(this.__tryOrUnsub(Y),this.unsubscribe()):(this.__tryOrSetError(G,Y),this.unsubscribe())}else this.unsubscribe()}},E.prototype.__tryOrUnsub=function(U,G){try{U.call(this._context,G)}catch(Y){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw Y;hostReportError(Y)}},E.prototype.__tryOrSetError=function(U,G,Y){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,Y)}catch(J){return config.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=J,U.syncErrorThrown=!0,!0):(hostReportError(J),!0)}return!1},E.prototype._unsubscribe=function(){var U=this._parentSubscriber;this._context=null,this._parentSubscriber=null,U.unsubscribe()},E}(Subscriber);function canReportError(R){for(;R;){var E=R,U=E.closed,G=E.destination,Y=E.isStopped;if(U||Y)return!1;G&&G instanceof Subscriber?R=G:R=null}return!0}function toSubscriber(R,E,U){if(R){if(R instanceof Subscriber)return R;if(R[rxSubscriber])return R[rxSubscriber]()}return!R&&!E&&!U?new Subscriber(empty$2):new Subscriber(R,E,U)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$3(R){return R}function pipe(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return pipeFromArray(R)}function pipeFromArray(R){return R.length===0?identity$3:R.length===1?R[0]:function(U){return R.reduce(function(G,Y){return Y(G)},U)}}var Observable=function(){function R(E){this._isScalar=!1,E&&(this._subscribe=E)}return R.prototype.lift=function(E){var U=new R;return U.source=this,U.operator=E,U},R.prototype.subscribe=function(E,U,G){var Y=this.operator,J=toSubscriber(E,U,G);if(Y?J.add(Y.call(J,this.source)):J.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!J.syncErrorThrowable?this._subscribe(J):this._trySubscribe(J)),config.useDeprecatedSynchronousErrorHandling&&J.syncErrorThrowable&&(J.syncErrorThrowable=!1,J.syncErrorThrown))throw J.syncErrorValue;return J},R.prototype._trySubscribe=function(E){try{return this._subscribe(E)}catch(U){config.useDeprecatedSynchronousErrorHandling&&(E.syncErrorThrown=!0,E.syncErrorValue=U),canReportError(E)?E.error(U):console.warn(U)}},R.prototype.forEach=function(E,U){var G=this;return U=getPromiseCtor(U),new U(function(Y,J){var Q;Q=G.subscribe(function(X){try{E(X)}catch(Z){J(Z),Q&&Q.unsubscribe()}},J,Y)})},R.prototype._subscribe=function(E){var U=this.source;return U&&U.subscribe(E)},R.prototype[observable]=function(){return this},R.prototype.pipe=function(){for(var E=[],U=0;U<arguments.length;U++)E[U]=arguments[U];return E.length===0?this:pipeFromArray(E)(this)},R.prototype.toPromise=function(E){var U=this;return E=getPromiseCtor(E),new E(function(G,Y){var J;U.subscribe(function(Q){return J=Q},function(Q){return Y(Q)},function(){return G(J)})})},R.create=function(E){return new R(E)},R}();function getPromiseCtor(R){if(R||(R=config.Promise||Promise),!R)throw new Error("no Promise impl found");return R}var ObjectUnsubscribedErrorImpl=function(){function R(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return R.prototype=Object.create(Error.prototype),R}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(R){__extends(E,R);function E(U,G){var Y=R.call(this)||this;return Y.subject=U,Y.subscriber=G,Y.closed=!1,Y}return E.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var U=this.subject,G=U.observers;if(this.subject=null,!(!G||G.length===0||U.isStopped||U.closed)){var Y=G.indexOf(this.subscriber);Y!==-1&&G.splice(Y,1)}}},E}(Subscription),SubjectSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.destination=U,G}return E}(Subscriber),Subject=function(R){__extends(E,R);function E(){var U=R.call(this)||this;return U.observers=[],U.closed=!1,U.isStopped=!1,U.hasError=!1,U.thrownError=null,U}return E.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},E.prototype.lift=function(U){var G=new AnonymousSubject(this,this);return G.operator=U,G},E.prototype.next=function(U){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var G=this.observers,Y=G.length,J=G.slice(),Q=0;Q<Y;Q++)J[Q].next(U)},E.prototype.error=function(U){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=U,this.isStopped=!0;for(var G=this.observers,Y=G.length,J=G.slice(),Q=0;Q<Y;Q++)J[Q].error(U);this.observers.length=0},E.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var U=this.observers,G=U.length,Y=U.slice(),J=0;J<G;J++)Y[J].complete();this.observers.length=0},E.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},E.prototype._trySubscribe=function(U){if(this.closed)throw new ObjectUnsubscribedError;return R.prototype._trySubscribe.call(this,U)},E.prototype._subscribe=function(U){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(U.error(this.thrownError),Subscription.EMPTY):this.isStopped?(U.complete(),Subscription.EMPTY):(this.observers.push(U),new SubjectSubscription(this,U))},E.prototype.asObservable=function(){var U=new Observable;return U.source=this,U},E.create=function(U,G){return new AnonymousSubject(U,G)},E}(Observable),AnonymousSubject=function(R){__extends(E,R);function E(U,G){var Y=R.call(this)||this;return Y.destination=U,Y.source=G,Y}return E.prototype.next=function(U){var G=this.destination;G&&G.next&&G.next(U)},E.prototype.error=function(U){var G=this.destination;G&&G.error&&this.destination.error(U)},E.prototype.complete=function(){var U=this.destination;U&&U.complete&&this.destination.complete()},E.prototype._subscribe=function(U){var G=this.source;return G?this.source.subscribe(U):Subscription.EMPTY},E}(Subject);function refCount(){return function(E){return E.lift(new RefCountOperator(E))}}var RefCountOperator=function(){function R(E){this.connectable=E}return R.prototype.call=function(E,U){var G=this.connectable;G._refCount++;var Y=new RefCountSubscriber(E,G),J=U.subscribe(Y);return Y.closed||(Y.connection=G.connect()),J},R}(),RefCountSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.connectable=G,Y}return E.prototype._unsubscribe=function(){var U=this.connectable;if(!U){this.connection=null;return}this.connectable=null;var G=U._refCount;if(G<=0){this.connection=null;return}if(U._refCount=G-1,G>1){this.connection=null;return}var Y=this.connection,J=U._connection;this.connection=null,J&&(!Y||J===Y)&&J.unsubscribe()},E}(Subscriber),ConnectableObservable=function(R){__extends(E,R);function E(U,G){var Y=R.call(this)||this;return Y.source=U,Y.subjectFactory=G,Y._refCount=0,Y._isComplete=!1,Y}return E.prototype._subscribe=function(U){return this.getSubject().subscribe(U)},E.prototype.getSubject=function(){var U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject},E.prototype.connect=function(){var U=this._connection;return U||(this._isComplete=!1,U=this._connection=new Subscription,U.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),U.closed&&(this._connection=null,U=Subscription.EMPTY)),U},E.prototype.refCount=function(){return refCount()(this)},E}(Observable),connectableObservableDescriptor=function(){var R=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:R._subscribe},_isComplete:{value:R._isComplete,writable:!0},getSubject:{value:R.getSubject},connect:{value:R.connect},refCount:{value:R.refCount}}}(),ConnectableSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.connectable=G,Y}return E.prototype._error=function(U){this._unsubscribe(),R.prototype._error.call(this,U)},E.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),R.prototype._complete.call(this)},E.prototype._unsubscribe=function(){var U=this.connectable;if(U){this.connectable=null;var G=U._connection;U._refCount=0,U._subject=null,U._connection=null,G&&G.unsubscribe()}},E}(SubjectSubscriber);function groupBy(R,E,U,G){return function(Y){return Y.lift(new GroupByOperator(R,E,U,G))}}var GroupByOperator=function(){function R(E,U,G,Y){this.keySelector=E,this.elementSelector=U,this.durationSelector=G,this.subjectSelector=Y}return R.prototype.call=function(E,U){return U.subscribe(new GroupBySubscriber(E,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},R}(),GroupBySubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;return X.keySelector=G,X.elementSelector=Y,X.durationSelector=J,X.subjectSelector=Q,X.groups=null,X.attemptedToUnsubscribe=!1,X.count=0,X}return E.prototype._next=function(U){var G;try{G=this.keySelector(U)}catch(Y){this.error(Y);return}this._group(U,G)},E.prototype._group=function(U,G){var Y=this.groups;Y||(Y=this.groups=new Map);var J=Y.get(G),Q;if(this.elementSelector)try{Q=this.elementSelector(U)}catch(ee){this.error(ee)}else Q=U;if(!J){J=this.subjectSelector?this.subjectSelector():new Subject,Y.set(G,J);var X=new GroupedObservable(G,J,this);if(this.destination.next(X),this.durationSelector){var Z=void 0;try{Z=this.durationSelector(new GroupedObservable(G,J))}catch(ee){this.error(ee);return}this.add(Z.subscribe(new GroupDurationSubscriber(G,J,this)))}}J.closed||J.next(Q)},E.prototype._error=function(U){var G=this.groups;G&&(G.forEach(function(Y,J){Y.error(U)}),G.clear()),this.destination.error(U)},E.prototype._complete=function(){var U=this.groups;U&&(U.forEach(function(G,Y){G.complete()}),U.clear()),this.destination.complete()},E.prototype.removeGroup=function(U){this.groups.delete(U)},E.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&R.prototype.unsubscribe.call(this))},E}(Subscriber),GroupDurationSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,G)||this;return J.key=U,J.group=G,J.parent=Y,J}return E.prototype._next=function(U){this.complete()},E.prototype._unsubscribe=function(){var U=this,G=U.parent,Y=U.key;this.key=this.parent=null,G&&G.removeGroup(Y)},E}(Subscriber),GroupedObservable=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this)||this;return J.key=U,J.groupSubject=G,J.refCountSubscription=Y,J}return E.prototype._subscribe=function(U){var G=new Subscription,Y=this,J=Y.refCountSubscription,Q=Y.groupSubject;return J&&!J.closed&&G.add(new InnerRefCountSubscription(J)),G.add(Q.subscribe(U)),G},E}(Observable),InnerRefCountSubscription=function(R){__extends(E,R);function E(U){var G=R.call(this)||this;return G.parent=U,U.count++,G}return E.prototype.unsubscribe=function(){var U=this.parent;!U.closed&&!this.closed&&(R.prototype.unsubscribe.call(this),U.count-=1,U.count===0&&U.attemptedToUnsubscribe&&U.unsubscribe())},E}(Subscription),BehaviorSubject=function(R){__extends(E,R);function E(U){var G=R.call(this)||this;return G._value=U,G}return Object.defineProperty(E.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),E.prototype._subscribe=function(U){var G=R.prototype._subscribe.call(this,U);return G&&!G.closed&&U.next(this._value),G},E.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},E.prototype.next=function(U){R.prototype.next.call(this,this._value=U)},E}(Subject),Action=function(R){__extends(E,R);function E(U,G){return R.call(this)||this}return E.prototype.schedule=function(U,G){return this},E}(Subscription),AsyncAction=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U,G)||this;return Y.scheduler=U,Y.work=G,Y.pending=!1,Y}return E.prototype.schedule=function(U,G){if(G===void 0&&(G=0),this.closed)return this;this.state=U;var Y=this.id,J=this.scheduler;return Y!=null&&(this.id=this.recycleAsyncId(J,Y,G)),this.pending=!0,this.delay=G,this.id=this.id||this.requestAsyncId(J,this.id,G),this},E.prototype.requestAsyncId=function(U,G,Y){return Y===void 0&&(Y=0),setInterval(U.flush.bind(U,this),Y)},E.prototype.recycleAsyncId=function(U,G,Y){if(Y===void 0&&(Y=0),Y!==null&&this.delay===Y&&this.pending===!1)return G;clearInterval(G)},E.prototype.execute=function(U,G){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var Y=this._execute(U,G);if(Y)return Y;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},E.prototype._execute=function(U,G){var Y=!1,J=void 0;try{this.work(U)}catch(Q){Y=!0,J=!!Q&&Q||new Error(Q)}if(Y)return this.unsubscribe(),J},E.prototype._unsubscribe=function(){var U=this.id,G=this.scheduler,Y=G.actions,J=Y.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,J!==-1&&Y.splice(J,1),U!=null&&(this.id=this.recycleAsyncId(G,U,null)),this.delay=null},E}(Action),QueueAction=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U,G)||this;return Y.scheduler=U,Y.work=G,Y}return E.prototype.schedule=function(U,G){return G===void 0&&(G=0),G>0?R.prototype.schedule.call(this,U,G):(this.delay=G,this.state=U,this.scheduler.flush(this),this)},E.prototype.execute=function(U,G){return G>0||this.closed?R.prototype.execute.call(this,U,G):this._execute(U,G)},E.prototype.requestAsyncId=function(U,G,Y){return Y===void 0&&(Y=0),Y!==null&&Y>0||Y===null&&this.delay>0?R.prototype.requestAsyncId.call(this,U,G,Y):U.flush(this)},E}(AsyncAction),Scheduler=function(){function R(E,U){U===void 0&&(U=R.now),this.SchedulerAction=E,this.now=U}return R.prototype.schedule=function(E,U,G){return U===void 0&&(U=0),new this.SchedulerAction(this,E).schedule(G,U)},R.now=function(){return Date.now()},R}(),AsyncScheduler=function(R){__extends(E,R);function E(U,G){G===void 0&&(G=Scheduler.now);var Y=R.call(this,U,function(){return E.delegate&&E.delegate!==Y?E.delegate.now():G()})||this;return Y.actions=[],Y.active=!1,Y.scheduled=void 0,Y}return E.prototype.schedule=function(U,G,Y){return G===void 0&&(G=0),E.delegate&&E.delegate!==this?E.delegate.schedule(U,G,Y):R.prototype.schedule.call(this,U,G,Y)},E.prototype.flush=function(U){var G=this.actions;if(this.active){G.push(U);return}var Y;this.active=!0;do if(Y=U.execute(U.state,U.delay))break;while(U=G.shift());if(this.active=!1,Y){for(;U=G.shift();)U.unsubscribe();throw Y}},E}(Scheduler),QueueScheduler=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,EMPTY=new Observable(function(R){return R.complete()});function empty$1(R){return R?emptyScheduled(R):EMPTY}function emptyScheduled(R){return new Observable(function(E){return R.schedule(function(){return E.complete()})})}function isScheduler(R){return R&&typeof R.schedule=="function"}var subscribeToArray=function(R){return function(E){for(var U=0,G=R.length;U<G&&!E.closed;U++)E.next(R[U]);E.complete()}};function scheduleArray(R,E){return new Observable(function(U){var G=new Subscription,Y=0;return G.add(E.schedule(function(){if(Y===R.length){U.complete();return}U.next(R[Y++]),U.closed||G.add(this.schedule())})),G})}function fromArray$1(R,E){return E?scheduleArray(R,E):new Observable(subscribeToArray(R))}function of(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=R[R.length-1];return isScheduler(U)?(R.pop(),scheduleArray(R,U)):fromArray$1(R)}function throwError(R,E){return E?new Observable(function(U){return E.schedule(dispatch$7,0,{error:R,subscriber:U})}):new Observable(function(U){return U.error(R)})}function dispatch$7(R){var E=R.error,U=R.subscriber;U.error(E)}var NotificationKind;NotificationKind||(NotificationKind={});var Notification=function(){function R(E,U,G){this.kind=E,this.value=U,this.error=G,this.hasValue=E==="N"}return R.prototype.observe=function(E){switch(this.kind){case"N":return E.next&&E.next(this.value);case"E":return E.error&&E.error(this.error);case"C":return E.complete&&E.complete()}},R.prototype.do=function(E,U,G){var Y=this.kind;switch(Y){case"N":return E&&E(this.value);case"E":return U&&U(this.error);case"C":return G&&G()}},R.prototype.accept=function(E,U,G){return E&&typeof E.next=="function"?this.observe(E):this.do(E,U,G)},R.prototype.toObservable=function(){var E=this.kind;switch(E){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},R.createNext=function(E){return typeof E<"u"?new R("N",E):R.undefinedValueNotification},R.createError=function(E){return new R("E",void 0,E)},R.createComplete=function(){return R.completeNotification},R.completeNotification=new R("C"),R.undefinedValueNotification=new R("N",void 0),R}();function observeOn(R,E){return E===void 0&&(E=0),function(G){return G.lift(new ObserveOnOperator(R,E))}}var ObserveOnOperator=function(){function R(E,U){U===void 0&&(U=0),this.scheduler=E,this.delay=U}return R.prototype.call=function(E,U){return U.subscribe(new ObserveOnSubscriber(E,this.scheduler,this.delay))},R}(),ObserveOnSubscriber=function(R){__extends(E,R);function E(U,G,Y){Y===void 0&&(Y=0);var J=R.call(this,U)||this;return J.scheduler=G,J.delay=Y,J}return E.dispatch=function(U){var G=U.notification,Y=U.destination;G.observe(Y),this.unsubscribe()},E.prototype.scheduleMessage=function(U){var G=this.destination;G.add(this.scheduler.schedule(E.dispatch,this.delay,new ObserveOnMessage(U,this.destination)))},E.prototype._next=function(U){this.scheduleMessage(Notification.createNext(U))},E.prototype._error=function(U){this.scheduleMessage(Notification.createError(U)),this.unsubscribe()},E.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},E}(Subscriber),ObserveOnMessage=function(){function R(E,U){this.notification=E,this.destination=U}return R}(),ReplaySubject=function(R){__extends(E,R);function E(U,G,Y){U===void 0&&(U=Number.POSITIVE_INFINITY),G===void 0&&(G=Number.POSITIVE_INFINITY);var J=R.call(this)||this;return J.scheduler=Y,J._events=[],J._infiniteTimeWindow=!1,J._bufferSize=U<1?1:U,J._windowTime=G<1?1:G,G===Number.POSITIVE_INFINITY?(J._infiniteTimeWindow=!0,J.next=J.nextInfiniteTimeWindow):J.next=J.nextTimeWindow,J}return E.prototype.nextInfiniteTimeWindow=function(U){if(!this.isStopped){var G=this._events;G.push(U),G.length>this._bufferSize&&G.shift()}R.prototype.next.call(this,U)},E.prototype.nextTimeWindow=function(U){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),U)),this._trimBufferThenGetEvents()),R.prototype.next.call(this,U)},E.prototype._subscribe=function(U){var G=this._infiniteTimeWindow,Y=G?this._events:this._trimBufferThenGetEvents(),J=this.scheduler,Q=Y.length,X;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?X=Subscription.EMPTY:(this.observers.push(U),X=new SubjectSubscription(this,U)),J&&U.add(U=new ObserveOnSubscriber(U,J)),G)for(var Z=0;Z<Q&&!U.closed;Z++)U.next(Y[Z]);else for(var Z=0;Z<Q&&!U.closed;Z++)U.next(Y[Z].value);return this.hasError?U.error(this.thrownError):this.isStopped&&U.complete(),X},E.prototype._getNow=function(){return(this.scheduler||queue).now()},E.prototype._trimBufferThenGetEvents=function(){for(var U=this._getNow(),G=this._bufferSize,Y=this._windowTime,J=this._events,Q=J.length,X=0;X<Q&&!(U-J[X].time<Y);)X++;return Q>G&&(X=Math.max(X,Q-G)),X>0&&J.splice(0,X),J},E}(Subject),ReplayEvent=function(){function R(E,U){this.time=E,this.value=U}return R}(),AsyncSubject=function(R){__extends(E,R);function E(){var U=R!==null&&R.apply(this,arguments)||this;return U.value=null,U.hasNext=!1,U.hasCompleted=!1,U}return E.prototype._subscribe=function(U){return this.hasError?(U.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(U.next(this.value),U.complete(),Subscription.EMPTY):R.prototype._subscribe.call(this,U)},E.prototype.next=function(U){this.hasCompleted||(this.value=U,this.hasNext=!0)},E.prototype.error=function(U){this.hasCompleted||R.prototype.error.call(this,U)},E.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&R.prototype.next.call(this,this.value),R.prototype.complete.call(this)},E}(Subject),nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(R){return R in activeHandles?(delete activeHandles[R],!0):!1}var Immediate={setImmediate:function(R){var E=nextHandle++;return activeHandles[E]=!0,RESOLVED.then(function(){return findAndClearHandle(E)&&R()}),E},clearImmediate:function(R){findAndClearHandle(R)}},AsapAction=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U,G)||this;return Y.scheduler=U,Y.work=G,Y}return E.prototype.requestAsyncId=function(U,G,Y){return Y===void 0&&(Y=0),Y!==null&&Y>0?R.prototype.requestAsyncId.call(this,U,G,Y):(U.actions.push(this),U.scheduled||(U.scheduled=Immediate.setImmediate(U.flush.bind(U,null))))},E.prototype.recycleAsyncId=function(U,G,Y){if(Y===void 0&&(Y=0),Y!==null&&Y>0||Y===null&&this.delay>0)return R.prototype.recycleAsyncId.call(this,U,G,Y);U.actions.length===0&&(Immediate.clearImmediate(G),U.scheduled=void 0)},E}(AsyncAction),AsapScheduler=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E.prototype.flush=function(U){this.active=!0,this.scheduled=void 0;var G=this.actions,Y,J=-1,Q=G.length;U=U||G.shift();do if(Y=U.execute(U.state,U.delay))break;while(++J<Q&&(U=G.shift()));if(this.active=!1,Y){for(;++J<Q&&(U=G.shift());)U.unsubscribe();throw Y}},E}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler,AnimationFrameAction=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U,G)||this;return Y.scheduler=U,Y.work=G,Y}return E.prototype.requestAsyncId=function(U,G,Y){return Y===void 0&&(Y=0),Y!==null&&Y>0?R.prototype.requestAsyncId.call(this,U,G,Y):(U.actions.push(this),U.scheduled||(U.scheduled=requestAnimationFrame(function(){return U.flush(null)})))},E.prototype.recycleAsyncId=function(U,G,Y){if(Y===void 0&&(Y=0),Y!==null&&Y>0||Y===null&&this.delay>0)return R.prototype.recycleAsyncId.call(this,U,G,Y);U.actions.length===0&&(cancelAnimationFrame(G),U.scheduled=void 0)},E}(AsyncAction),AnimationFrameScheduler=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E.prototype.flush=function(U){this.active=!0,this.scheduled=void 0;var G=this.actions,Y,J=-1,Q=G.length;U=U||G.shift();do if(Y=U.execute(U.state,U.delay))break;while(++J<Q&&(U=G.shift()));if(this.active=!1,Y){for(;++J<Q&&(U=G.shift());)U.unsubscribe();throw Y}},E}(AsyncScheduler),animationFrameScheduler=new AnimationFrameScheduler(AnimationFrameAction),animationFrame=animationFrameScheduler,VirtualTimeScheduler=function(R){__extends(E,R);function E(U,G){U===void 0&&(U=VirtualAction),G===void 0&&(G=Number.POSITIVE_INFINITY);var Y=R.call(this,U,function(){return Y.frame})||this;return Y.maxFrames=G,Y.frame=0,Y.index=-1,Y}return E.prototype.flush=function(){for(var U=this,G=U.actions,Y=U.maxFrames,J,Q;(Q=G[0])&&Q.delay<=Y&&(G.shift(),this.frame=Q.delay,!(J=Q.execute(Q.state,Q.delay))););if(J){for(;Q=G.shift();)Q.unsubscribe();throw J}},E.frameTimeFactor=10,E}(AsyncScheduler),VirtualAction=function(R){__extends(E,R);function E(U,G,Y){Y===void 0&&(Y=U.index+=1);var J=R.call(this,U,G)||this;return J.scheduler=U,J.work=G,J.index=Y,J.active=!0,J.index=U.index=Y,J}return E.prototype.schedule=function(U,G){if(G===void 0&&(G=0),!this.id)return R.prototype.schedule.call(this,U,G);this.active=!1;var Y=new E(this.scheduler,this.work);return this.add(Y),Y.schedule(U,G)},E.prototype.requestAsyncId=function(U,G,Y){Y===void 0&&(Y=0),this.delay=U.frame+Y;var J=U.actions;return J.push(this),J.sort(E.sortActions),!0},E.prototype.recycleAsyncId=function(U,G,Y){},E.prototype._execute=function(U,G){if(this.active===!0)return R.prototype._execute.call(this,U,G)},E.sortActions=function(U,G){return U.delay===G.delay?U.index===G.index?0:U.index>G.index?1:-1:U.delay>G.delay?1:-1},E}(AsyncAction);function noop$1(){}function isObservable(R){return!!R&&(R instanceof Observable||typeof R.lift=="function"&&typeof R.subscribe=="function")}var ArgumentOutOfRangeErrorImpl=function(){function R(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return R.prototype=Object.create(Error.prototype),R}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function R(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return R.prototype=Object.create(Error.prototype),R}(),EmptyError=EmptyErrorImpl,TimeoutErrorImpl=function(){function R(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return R.prototype=Object.create(Error.prototype),R}(),TimeoutError$3=TimeoutErrorImpl;function map$1(R,E){return function(G){if(typeof R!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return G.lift(new MapOperator(R,E))}}var MapOperator=function(){function R(E,U){this.project=E,this.thisArg=U}return R.prototype.call=function(E,U){return U.subscribe(new MapSubscriber(E,this.project,this.thisArg))},R}(),MapSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.project=G,J.count=0,J.thisArg=Y||J,J}return E.prototype._next=function(U){var G;try{G=this.project.call(this.thisArg,U,this.count++)}catch(Y){this.destination.error(Y);return}this.destination.next(G)},E}(Subscriber);function bindCallback(R,E,U){if(E)if(isScheduler(E))U=E;else return function(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return bindCallback(R,U).apply(void 0,G).pipe(map$1(function(J){return isArray(J)?E.apply(void 0,J):E(J)}))};return function(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];var J=this,Q,X={context:J,subject:Q,callbackFunc:R,scheduler:U};return new Observable(function(Z){if(U){var te={args:G,subscriber:Z,params:X};return U.schedule(dispatch$6,0,te)}else{if(!Q){Q=new AsyncSubject;var ee=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];Q.next(ne.length<=1?ne[0]:ne),Q.complete()};try{R.apply(J,G.concat([ee]))}catch(ne){canReportError(Q)?Q.error(ne):console.warn(ne)}}return Q.subscribe(Z)}})}}function dispatch$6(R){var E=this,U=R.args,G=R.subscriber,Y=R.params,J=Y.callbackFunc,Q=Y.context,X=Y.scheduler,Z=Y.subject;if(!Z){Z=Y.subject=new AsyncSubject;var ee=function(){for(var te=[],ne=0;ne<arguments.length;ne++)te[ne]=arguments[ne];var oe=te.length<=1?te[0]:te;E.add(X.schedule(dispatchNext$3,0,{value:oe,subject:Z}))};try{J.apply(Q,U.concat([ee]))}catch(te){Z.error(te)}}this.add(Z.subscribe(G))}function dispatchNext$3(R){var E=R.value,U=R.subject;U.next(E),U.complete()}function bindNodeCallback(R,E,U){if(E)if(isScheduler(E))U=E;else return function(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return bindNodeCallback(R,U).apply(void 0,G).pipe(map$1(function(J){return isArray(J)?E.apply(void 0,J):E(J)}))};return function(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];var J={subject:void 0,args:G,callbackFunc:R,scheduler:U,context:this};return new Observable(function(Q){var X=J.context,Z=J.subject;if(U)return U.schedule(dispatch$5,0,{params:J,subscriber:Q,context:X});if(!Z){Z=J.subject=new AsyncSubject;var ee=function(){for(var te=[],ne=0;ne<arguments.length;ne++)te[ne]=arguments[ne];var oe=te.shift();if(oe){Z.error(oe);return}Z.next(te.length<=1?te[0]:te),Z.complete()};try{R.apply(X,G.concat([ee]))}catch(te){canReportError(Z)?Z.error(te):console.warn(te)}}return Z.subscribe(Q)})}}function dispatch$5(R){var E=this,U=R.params,G=R.subscriber,Y=R.context,J=U.callbackFunc,Q=U.args,X=U.scheduler,Z=U.subject;if(!Z){Z=U.subject=new AsyncSubject;var ee=function(){for(var te=[],ne=0;ne<arguments.length;ne++)te[ne]=arguments[ne];var oe=te.shift();if(oe)E.add(X.schedule(dispatchError,0,{err:oe,subject:Z}));else{var ce=te.length<=1?te[0]:te;E.add(X.schedule(dispatchNext$2,0,{value:ce,subject:Z}))}};try{J.apply(Y,Q.concat([ee]))}catch(te){this.add(X.schedule(dispatchError,0,{err:te,subject:Z}))}}this.add(Z.subscribe(G))}function dispatchNext$2(R){var E=R.value,U=R.subject;U.next(E),U.complete()}function dispatchError(R){var E=R.err,U=R.subject;U.error(E)}var OuterSubscriber=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E.prototype.notifyNext=function(U,G,Y,J,Q){this.destination.next(G)},E.prototype.notifyError=function(U,G){this.destination.error(U)},E.prototype.notifyComplete=function(U){this.destination.complete()},E}(Subscriber),InnerSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this)||this;return J.parent=U,J.outerValue=G,J.outerIndex=Y,J.index=0,J}return E.prototype._next=function(U){this.parent.notifyNext(this.outerValue,U,this.outerIndex,this.index++,this)},E.prototype._error=function(U){this.parent.notifyError(U,this),this.unsubscribe()},E.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},E}(Subscriber),subscribeToPromise=function(R){return function(E){return R.then(function(U){E.closed||(E.next(U),E.complete())},function(U){return E.error(U)}).then(null,hostReportError),E}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(R){return function(E){var U=R[iterator]();do{var G=void 0;try{G=U.next()}catch(Y){return E.error(Y),E}if(G.done){E.complete();break}if(E.next(G.value),E.closed)break}while(!0);return typeof U.return=="function"&&E.add(function(){U.return&&U.return()}),E}},subscribeToObservable=function(R){return function(E){var U=R[observable]();if(typeof U.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return U.subscribe(E)}},isArrayLike=function(R){return R&&typeof R.length=="number"&&typeof R!="function"};function isPromise(R){return!!R&&typeof R.subscribe!="function"&&typeof R.then=="function"}var subscribeTo=function(R){if(!!R&&typeof R[observable]=="function")return subscribeToObservable(R);if(isArrayLike(R))return subscribeToArray(R);if(isPromise(R))return subscribeToPromise(R);if(!!R&&typeof R[iterator]=="function")return subscribeToIterable(R);var E=isObject(R)?"an invalid object":"'"+R+"'",U="You provided "+E+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(U)};function subscribeToResult(R,E,U,G,Y){if(Y===void 0&&(Y=new InnerSubscriber(R,U,G)),!Y.closed)return E instanceof Observable?E.subscribe(Y):subscribeTo(E)(Y)}var NONE={};function combineLatest$1(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=void 0,G=void 0;return isScheduler(R[R.length-1])&&(G=R.pop()),typeof R[R.length-1]=="function"&&(U=R.pop()),R.length===1&&isArray(R[0])&&(R=R[0]),fromArray$1(R,G).lift(new CombineLatestOperator(U))}var CombineLatestOperator=function(){function R(E){this.resultSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new CombineLatestSubscriber(E,this.resultSelector))},R}(),CombineLatestSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.resultSelector=G,Y.active=0,Y.values=[],Y.observables=[],Y}return E.prototype._next=function(U){this.values.push(NONE),this.observables.push(U)},E.prototype._complete=function(){var U=this.observables,G=U.length;if(G===0)this.destination.complete();else{this.active=G,this.toRespond=G;for(var Y=0;Y<G;Y++){var J=U[Y];this.add(subscribeToResult(this,J,void 0,Y))}}},E.prototype.notifyComplete=function(U){(this.active-=1)===0&&this.destination.complete()},E.prototype.notifyNext=function(U,G,Y){var J=this.values,Q=J[Y],X=this.toRespond?Q===NONE?--this.toRespond:this.toRespond:0;J[Y]=G,X===0&&(this.resultSelector?this._tryResultSelector(J):this.destination.next(J.slice()))},E.prototype._tryResultSelector=function(U){var G;try{G=this.resultSelector.apply(this,U)}catch(Y){this.destination.error(Y);return}this.destination.next(G)},E}(OuterSubscriber);function scheduleObservable(R,E){return new Observable(function(U){var G=new Subscription;return G.add(E.schedule(function(){var Y=R[observable]();G.add(Y.subscribe({next:function(J){G.add(E.schedule(function(){return U.next(J)}))},error:function(J){G.add(E.schedule(function(){return U.error(J)}))},complete:function(){G.add(E.schedule(function(){return U.complete()}))}}))})),G})}function schedulePromise(R,E){return new Observable(function(U){var G=new Subscription;return G.add(E.schedule(function(){return R.then(function(Y){G.add(E.schedule(function(){U.next(Y),G.add(E.schedule(function(){return U.complete()}))}))},function(Y){G.add(E.schedule(function(){return U.error(Y)}))})})),G})}function scheduleIterable(R,E){if(!R)throw new Error("Iterable cannot be null");return new Observable(function(U){var G=new Subscription,Y;return G.add(function(){Y&&typeof Y.return=="function"&&Y.return()}),G.add(E.schedule(function(){Y=R[iterator](),G.add(E.schedule(function(){if(!U.closed){var J,Q;try{var X=Y.next();J=X.value,Q=X.done}catch(Z){U.error(Z);return}Q?U.complete():(U.next(J),this.schedule())}}))})),G})}function isInteropObservable(R){return R&&typeof R[observable]=="function"}function isIterable(R){return R&&typeof R[iterator]=="function"}function scheduled(R,E){if(R!=null){if(isInteropObservable(R))return scheduleObservable(R,E);if(isPromise(R))return schedulePromise(R,E);if(isArrayLike(R))return scheduleArray(R,E);if(isIterable(R)||typeof R=="string")return scheduleIterable(R,E)}throw new TypeError((R!==null&&typeof R||R)+" is not observable")}function from$2(R,E){return E?scheduled(R,E):R instanceof Observable?R:new Observable(subscribeTo(R))}var SimpleInnerSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this)||this;return G.parent=U,G}return E.prototype._next=function(U){this.parent.notifyNext(U)},E.prototype._error=function(U){this.parent.notifyError(U),this.unsubscribe()},E.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},E}(Subscriber),SimpleOuterSubscriber=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E.prototype.notifyNext=function(U){this.destination.next(U)},E.prototype.notifyError=function(U){this.destination.error(U)},E.prototype.notifyComplete=function(){this.destination.complete()},E}(Subscriber);function innerSubscribe(R,E){if(!E.closed){if(R instanceof Observable)return R.subscribe(E);var U;try{U=subscribeTo(R)(E)}catch(G){E.error(G)}return U}}function mergeMap(R,E,U){return U===void 0&&(U=Number.POSITIVE_INFINITY),typeof E=="function"?function(G){return G.pipe(mergeMap(function(Y,J){return from$2(R(Y,J)).pipe(map$1(function(Q,X){return E(Y,Q,J,X)}))},U))}:(typeof E=="number"&&(U=E),function(G){return G.lift(new MergeMapOperator(R,U))})}var MergeMapOperator=function(){function R(E,U){U===void 0&&(U=Number.POSITIVE_INFINITY),this.project=E,this.concurrent=U}return R.prototype.call=function(E,U){return U.subscribe(new MergeMapSubscriber(E,this.project,this.concurrent))},R}(),MergeMapSubscriber=function(R){__extends(E,R);function E(U,G,Y){Y===void 0&&(Y=Number.POSITIVE_INFINITY);var J=R.call(this,U)||this;return J.project=G,J.concurrent=Y,J.hasCompleted=!1,J.buffer=[],J.active=0,J.index=0,J}return E.prototype._next=function(U){this.active<this.concurrent?this._tryNext(U):this.buffer.push(U)},E.prototype._tryNext=function(U){var G,Y=this.index++;try{G=this.project(U,Y)}catch(J){this.destination.error(J);return}this.active++,this._innerSub(G)},E.prototype._innerSub=function(U){var G=new SimpleInnerSubscriber(this),Y=this.destination;Y.add(G);var J=innerSubscribe(U,G);J!==G&&Y.add(J)},E.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},E.prototype.notifyNext=function(U){this.destination.next(U)},E.prototype.notifyComplete=function(){var U=this.buffer;this.active--,U.length>0?this._next(U.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},E}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(R){return R===void 0&&(R=Number.POSITIVE_INFINITY),mergeMap(identity$3,R)}function concatAll(){return mergeAll(1)}function concat$3(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return concatAll()(of.apply(void 0,R))}function defer(R){return new Observable(function(E){var U;try{U=R()}catch(Y){E.error(Y);return}var G=U?from$2(U):empty$1();return G.subscribe(E)})}function forkJoin(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];if(R.length===1){var U=R[0];if(isArray(U))return forkJoinInternal(U,null);if(isObject(U)&&Object.getPrototypeOf(U)===Object.prototype){var G=Object.keys(U);return forkJoinInternal(G.map(function(J){return U[J]}),G)}}if(typeof R[R.length-1]=="function"){var Y=R.pop();return R=R.length===1&&isArray(R[0])?R[0]:R,forkJoinInternal(R,null).pipe(map$1(function(J){return Y.apply(void 0,J)}))}return forkJoinInternal(R,null)}function forkJoinInternal(R,E){return new Observable(function(U){var G=R.length;if(G===0){U.complete();return}for(var Y=new Array(G),J=0,Q=0,X=function(ee){var te=from$2(R[ee]),ne=!1;U.add(te.subscribe({next:function(oe){ne||(ne=!0,Q++),Y[ee]=oe},error:function(oe){return U.error(oe)},complete:function(){J++,(J===G||!ne)&&(Q===G&&U.next(E?E.reduce(function(oe,ce,pe){return oe[ce]=Y[pe],oe},{}):Y),U.complete())}}))},Z=0;Z<G;Z++)X(Z)})}function fromEvent(R,E,U,G){return isFunction$1(U)&&(G=U,U=void 0),G?fromEvent(R,E,U).pipe(map$1(function(Y){return isArray(Y)?G.apply(void 0,Y):G(Y)})):new Observable(function(Y){function J(Q){arguments.length>1?Y.next(Array.prototype.slice.call(arguments)):Y.next(Q)}setupSubscription(R,E,J,Y,U)})}function setupSubscription(R,E,U,G,Y){var J;if(isEventTarget(R)){var Q=R;R.addEventListener(E,U,Y),J=function(){return Q.removeEventListener(E,U,Y)}}else if(isJQueryStyleEventEmitter(R)){var X=R;R.on(E,U),J=function(){return X.off(E,U)}}else if(isNodeStyleEventEmitter(R)){var Z=R;R.addListener(E,U),J=function(){return Z.removeListener(E,U)}}else if(R&&R.length)for(var ee=0,te=R.length;ee<te;ee++)setupSubscription(R[ee],E,U,G,Y);else throw new TypeError("Invalid event target");G.add(J)}function isNodeStyleEventEmitter(R){return R&&typeof R.addListener=="function"&&typeof R.removeListener=="function"}function isJQueryStyleEventEmitter(R){return R&&typeof R.on=="function"&&typeof R.off=="function"}function isEventTarget(R){return R&&typeof R.addEventListener=="function"&&typeof R.removeEventListener=="function"}function fromEventPattern(R,E,U){return U?fromEventPattern(R,E).pipe(map$1(function(G){return isArray(G)?U.apply(void 0,G):U(G)})):new Observable(function(G){var Y=function(){for(var Q=[],X=0;X<arguments.length;X++)Q[X]=arguments[X];return G.next(Q.length===1?Q[0]:Q)},J;try{J=R(Y)}catch(Q){G.error(Q);return}if(!!isFunction$1(E))return function(){return E(Y,J)}})}function generate(R,E,U,G,Y){var J,Q;if(arguments.length==1){var X=R;Q=X.initialState,E=X.condition,U=X.iterate,J=X.resultSelector||identity$3,Y=X.scheduler}else G===void 0||isScheduler(G)?(Q=R,J=identity$3,Y=G):(Q=R,J=G);return new Observable(function(Z){var ee=Q;if(Y)return Y.schedule(dispatch$4,0,{subscriber:Z,iterate:U,condition:E,resultSelector:J,state:ee});do{if(E){var te=void 0;try{te=E(ee)}catch(oe){Z.error(oe);return}if(!te){Z.complete();break}}var ne=void 0;try{ne=J(ee)}catch(oe){Z.error(oe);return}if(Z.next(ne),Z.closed)break;try{ee=U(ee)}catch(oe){Z.error(oe);return}}while(!0)})}function dispatch$4(R){var E=R.subscriber,U=R.condition;if(!E.closed){if(R.needIterate)try{R.state=R.iterate(R.state)}catch(J){E.error(J);return}else R.needIterate=!0;if(U){var G=void 0;try{G=U(R.state)}catch(J){E.error(J);return}if(!G){E.complete();return}if(E.closed)return}var Y;try{Y=R.resultSelector(R.state)}catch(J){E.error(J);return}if(!E.closed&&(E.next(Y),!E.closed))return this.schedule(R)}}function iif(R,E,U){return E===void 0&&(E=EMPTY),U===void 0&&(U=EMPTY),defer(function(){return R()?E:U})}function isNumeric(R){return!isArray(R)&&R-parseFloat(R)+1>=0}function interval(R,E){return R===void 0&&(R=0),E===void 0&&(E=async),(!isNumeric(R)||R<0)&&(R=0),(!E||typeof E.schedule!="function")&&(E=async),new Observable(function(U){return U.add(E.schedule(dispatch$3,R,{subscriber:U,counter:0,period:R})),U})}function dispatch$3(R){var E=R.subscriber,U=R.counter,G=R.period;E.next(U),this.schedule({subscriber:E,counter:U+1,period:G},G)}function merge$4(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=Number.POSITIVE_INFINITY,G=null,Y=R[R.length-1];return isScheduler(Y)?(G=R.pop(),R.length>1&&typeof R[R.length-1]=="number"&&(U=R.pop())):typeof Y=="number"&&(U=R.pop()),G===null&&R.length===1&&R[0]instanceof Observable?R[0]:mergeAll(U)(fromArray$1(R,G))}var NEVER=new Observable(noop$1);function never(){return NEVER}function onErrorResumeNext$1(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];if(R.length===0)return EMPTY;var U=R[0],G=R.slice(1);return R.length===1&&isArray(U)?onErrorResumeNext$1.apply(void 0,U):new Observable(function(Y){var J=function(){return Y.add(onErrorResumeNext$1.apply(void 0,G).subscribe(Y))};return from$2(U).subscribe({next:function(Q){Y.next(Q)},error:J,complete:J})})}function pairs(R,E){return E?new Observable(function(U){var G=Object.keys(R),Y=new Subscription;return Y.add(E.schedule(dispatch$2,0,{keys:G,index:0,subscriber:U,subscription:Y,obj:R})),Y}):new Observable(function(U){for(var G=Object.keys(R),Y=0;Y<G.length&&!U.closed;Y++){var J=G[Y];R.hasOwnProperty(J)&&U.next([J,R[J]])}U.complete()})}function dispatch$2(R){var E=R.keys,U=R.index,G=R.subscriber,Y=R.subscription,J=R.obj;if(!G.closed)if(U<E.length){var Q=E[U];G.next([Q,J[Q]]),Y.add(this.schedule({keys:E,index:U+1,subscriber:G,subscription:Y,obj:J}))}else G.complete()}function not(R,E){function U(){return!U.pred.apply(U.thisArg,arguments)}return U.pred=R,U.thisArg=E,U}function filter$1(R,E){return function(G){return G.lift(new FilterOperator(R,E))}}var FilterOperator=function(){function R(E,U){this.predicate=E,this.thisArg=U}return R.prototype.call=function(E,U){return U.subscribe(new FilterSubscriber(E,this.predicate,this.thisArg))},R}(),FilterSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.predicate=G,J.thisArg=Y,J.count=0,J}return E.prototype._next=function(U){var G;try{G=this.predicate.call(this.thisArg,U,this.count++)}catch(Y){this.destination.error(Y);return}G&&this.destination.next(U)},E}(Subscriber);function partition$1(R,E,U){return[filter$1(E,U)(new Observable(subscribeTo(R))),filter$1(not(E,U))(new Observable(subscribeTo(R)))]}function race$1(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];if(R.length===1)if(isArray(R[0]))R=R[0];else return R[0];return fromArray$1(R,void 0).lift(new RaceOperator)}var RaceOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new RaceSubscriber(E))},R}(),RaceSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.hasFirst=!1,G.observables=[],G.subscriptions=[],G}return E.prototype._next=function(U){this.observables.push(U)},E.prototype._complete=function(){var U=this.observables,G=U.length;if(G===0)this.destination.complete();else{for(var Y=0;Y<G&&!this.hasFirst;Y++){var J=U[Y],Q=subscribeToResult(this,J,void 0,Y);this.subscriptions&&this.subscriptions.push(Q),this.add(Q)}this.observables=null}},E.prototype.notifyNext=function(U,G,Y){if(!this.hasFirst){this.hasFirst=!0;for(var J=0;J<this.subscriptions.length;J++)if(J!==Y){var Q=this.subscriptions[J];Q.unsubscribe(),this.remove(Q)}this.subscriptions=null}this.destination.next(G)},E}(OuterSubscriber);function range(R,E,U){return R===void 0&&(R=0),new Observable(function(G){E===void 0&&(E=R,R=0);var Y=0,J=R;if(U)return U.schedule(dispatch$1,0,{index:Y,count:E,start:R,subscriber:G});do{if(Y++>=E){G.complete();break}if(G.next(J++),G.closed)break}while(!0)})}function dispatch$1(R){var E=R.start,U=R.index,G=R.count,Y=R.subscriber;if(U>=G){Y.complete();return}Y.next(E),!Y.closed&&(R.index=U+1,R.start=E+1,this.schedule(R))}function timer(R,E,U){R===void 0&&(R=0);var G=-1;return isNumeric(E)?G=Number(E)<1&&1||Number(E):isScheduler(E)&&(U=E),isScheduler(U)||(U=async),new Observable(function(Y){var J=isNumeric(R)?R:+R-U.now();return U.schedule(dispatch,J,{index:0,period:G,subscriber:Y})})}function dispatch(R){var E=R.index,U=R.period,G=R.subscriber;if(G.next(E),!G.closed){if(U===-1)return G.complete();R.index=E+1,this.schedule(R,U)}}function using(R,E){return new Observable(function(U){var G;try{G=R()}catch(X){U.error(X);return}var Y;try{Y=E(G)}catch(X){U.error(X);return}var J=Y?from$2(Y):EMPTY,Q=J.subscribe(U);return function(){Q.unsubscribe(),G&&G.unsubscribe()}})}function zip$1(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=R[R.length-1];return typeof U=="function"&&R.pop(),fromArray$1(R,void 0).lift(new ZipOperator(U))}var ZipOperator=function(){function R(E){this.resultSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new ZipSubscriber(E,this.resultSelector))},R}(),ZipSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.resultSelector=G,J.iterators=[],J.active=0,J.resultSelector=typeof G=="function"?G:void 0,J}return E.prototype._next=function(U){var G=this.iterators;isArray(U)?G.push(new StaticArrayIterator(U)):typeof U[iterator]=="function"?G.push(new StaticIterator(U[iterator]())):G.push(new ZipBufferIterator(this.destination,this,U))},E.prototype._complete=function(){var U=this.iterators,G=U.length;if(this.unsubscribe(),G===0){this.destination.complete();return}this.active=G;for(var Y=0;Y<G;Y++){var J=U[Y];if(J.stillUnsubscribed){var Q=this.destination;Q.add(J.subscribe())}else this.active--}},E.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},E.prototype.checkIterators=function(){for(var U=this.iterators,G=U.length,Y=this.destination,J=0;J<G;J++){var Q=U[J];if(typeof Q.hasValue=="function"&&!Q.hasValue())return}for(var X=!1,Z=[],J=0;J<G;J++){var Q=U[J],ee=Q.next();if(Q.hasCompleted()&&(X=!0),ee.done){Y.complete();return}Z.push(ee.value)}this.resultSelector?this._tryresultSelector(Z):Y.next(Z),X&&Y.complete()},E.prototype._tryresultSelector=function(U){var G;try{G=this.resultSelector.apply(this,U)}catch(Y){this.destination.error(Y);return}this.destination.next(G)},E}(Subscriber),StaticIterator=function(){function R(E){this.iterator=E,this.nextResult=E.next()}return R.prototype.hasValue=function(){return!0},R.prototype.next=function(){var E=this.nextResult;return this.nextResult=this.iterator.next(),E},R.prototype.hasCompleted=function(){var E=this.nextResult;return Boolean(E&&E.done)},R}(),StaticArrayIterator=function(){function R(E){this.array=E,this.index=0,this.length=0,this.length=E.length}return R.prototype[iterator]=function(){return this},R.prototype.next=function(E){var U=this.index++,G=this.array;return U<this.length?{value:G[U],done:!1}:{value:null,done:!0}},R.prototype.hasValue=function(){return this.array.length>this.index},R.prototype.hasCompleted=function(){return this.array.length===this.index},R}(),ZipBufferIterator=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.parent=G,J.observable=Y,J.stillUnsubscribed=!0,J.buffer=[],J.isComplete=!1,J}return E.prototype[iterator]=function(){return this},E.prototype.next=function(){var U=this.buffer;return U.length===0&&this.isComplete?{value:null,done:!0}:{value:U.shift(),done:!1}},E.prototype.hasValue=function(){return this.buffer.length>0},E.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},E.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},E.prototype.notifyNext=function(U){this.buffer.push(U),this.parent.checkIterators()},E.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},E}(SimpleOuterSubscriber);const _esm5=Object.freeze(Object.defineProperty({__proto__:null,Observable,ConnectableObservable,GroupedObservable,observable,Subject,BehaviorSubject,ReplaySubject,AsyncSubject,asap,asapScheduler,async,asyncScheduler,queue,queueScheduler,animationFrame,animationFrameScheduler,VirtualTimeScheduler,VirtualAction,Scheduler,Subscription,Subscriber,Notification,get NotificationKind(){return NotificationKind},pipe,noop:noop$1,identity:identity$3,isObservable,ArgumentOutOfRangeError,EmptyError,ObjectUnsubscribedError,UnsubscriptionError,TimeoutError:TimeoutError$3,bindCallback,bindNodeCallback,combineLatest:combineLatest$1,concat:concat$3,defer,empty:empty$1,forkJoin,from:from$2,fromEvent,fromEventPattern,generate,iif,interval,merge:merge$4,never,of,onErrorResumeNext:onErrorResumeNext$1,pairs,partition:partition$1,race:race$1,range,throwError,timer,using,zip:zip$1,scheduled,EMPTY,NEVER,config},Symbol.toStringTag,{value:"Module"})),require$$2$2=getAugmentedNamespace(_esm5);var ConnectDialog$1={};function r$1(R){var E,U,G="";if(typeof R=="string"||typeof R=="number")G+=R;else if(typeof R=="object")if(Array.isArray(R))for(E=0;E<R.length;E++)R[E]&&(U=r$1(R[E]))&&(G&&(G+=" "),G+=U);else for(E in R)R[E]&&(G&&(G+=" "),G+=E);return G}function clsx(){for(var R,E,U=0,G="";U<arguments.length;)(R=arguments[U++])&&(E=r$1(R))&&(G&&(G+=" "),G+=E);return G}const clsx_m=Object.freeze(Object.defineProperty({__proto__:null,clsx,default:clsx},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(clsx_m);var t,u,r,o=0,i$2=[],c=l$1.__b,f=l$1.__r,e=l$1.diffed,a=l$1.__c,v=l$1.unmount;function l(R,E){l$1.__h&&l$1.__h(u,R,o||E),o=0;var U=u.__H||(u.__H={__:[],__h:[]});return R>=U.__.length&&U.__.push({}),U.__[R]}function m(R){return o=1,p(w,R)}function p(R,E,U){var G=l(t++,2);return G.t=R,G.__c||(G.__=[U?U(E):w(void 0,E),function(Y){var J=G.t(G.__[0],Y);G.__[0]!==J&&(G.__=[J,G.__[1]],G.__c.setState({}))}],G.__c=u),G.__}function y(R,E){var U=l(t++,3);!l$1.__s&&k(U.__H,E)&&(U.__=R,U.__H=E,u.__H.__h.push(U))}function d(R,E){var U=l(t++,4);!l$1.__s&&k(U.__H,E)&&(U.__=R,U.__H=E,u.__h.push(U))}function h(R){return o=5,_(function(){return{current:R}},[])}function s(R,E,U){o=6,d(function(){return typeof R=="function"?(R(E()),function(){return R(null)}):R?(R.current=E(),function(){return R.current=null}):void 0},U==null?U:U.concat(R))}function _(R,E){var U=l(t++,7);return k(U.__H,E)&&(U.__=R(),U.__H=E,U.__h=R),U.__}function A(R,E){return o=8,_(function(){return R},E)}function F(R){var E=u.context[R.__c],U=l(t++,9);return U.c=R,E?(U.__==null&&(U.__=!0,E.sub(u)),E.props.value):R.__}function T(R,E){l$1.useDebugValue&&l$1.useDebugValue(E?E(R):R)}function q(R){var E=l(t++,10),U=m();return E.__=R,u.componentDidCatch||(u.componentDidCatch=function(G){E.__&&E.__(G),U[1](G)}),[U[0],function(){U[1](void 0)}]}function x(){for(var R;R=i$2.shift();)if(R.__P)try{R.__H.__h.forEach(g),R.__H.__h.forEach(j),R.__H.__h=[]}catch(E){R.__H.__h=[],l$1.__e(E,R.__v)}}l$1.__b=function(R){u=null,c&&c(R)},l$1.__r=function(R){f&&f(R),t=0;var E=(u=R.__c).__H;E&&(E.__h.forEach(g),E.__h.forEach(j),E.__h=[])},l$1.diffed=function(R){e&&e(R);var E=R.__c;E&&E.__H&&E.__H.__h.length&&(i$2.push(E)!==1&&r===l$1.requestAnimationFrame||((r=l$1.requestAnimationFrame)||function(U){var G,Y=function(){clearTimeout(J),b&&cancelAnimationFrame(G),setTimeout(U)},J=setTimeout(Y,100);b&&(G=requestAnimationFrame(Y))})(x)),u=null},l$1.__c=function(R,E){E.some(function(U){try{U.__h.forEach(g),U.__h=U.__h.filter(function(G){return!G.__||j(G)})}catch(G){E.some(function(Y){Y.__h&&(Y.__h=[])}),E=[],l$1.__e(G,U.__v)}}),a&&a(R,E)},l$1.unmount=function(R){v&&v(R);var E,U=R.__c;U&&U.__H&&(U.__H.__.forEach(function(G){try{g(G)}catch(Y){E=Y}}),E&&l$1.__e(E,U.__v))};var b=typeof requestAnimationFrame=="function";function g(R){var E=u,U=R.__c;typeof U=="function"&&(R.__c=void 0,U()),u=E}function j(R){var E=u;R.__c=R.__(),u=E}function k(R,E){return!R||R.length!==E.length||E.some(function(U,G){return U!==R[G]})}function w(R,E){return typeof E=="function"?E(R):E}const hooks_module=Object.freeze(Object.defineProperty({__proto__:null,useState:m,useReducer:p,useEffect:y,useLayoutEffect:d,useRef:h,useImperativeHandle:s,useMemo:_,useCallback:A,useContext:F,useDebugValue:T,useErrorBoundary:q},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(hooks_module);var ConnectContent$1={},version$3={};Object.defineProperty(version$3,"__esModule",{value:!0});version$3.LIB_VERSION=void 0;version$3.LIB_VERSION="3.6.6";var CloseIcon$1={};Object.defineProperty(CloseIcon$1,"__esModule",{value:!0});CloseIcon$1.CloseIcon=void 0;const preact_1$b=require$$1$2;function CloseIcon(R){return(0,preact_1$b.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$b.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}CloseIcon$1.CloseIcon=CloseIcon;var coinbaseRoundSvg={};Object.defineProperty(coinbaseRoundSvg,"__esModule",{value:!0});coinbaseRoundSvg.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var coinbaseWalletRoundSvg={};Object.defineProperty(coinbaseWalletRoundSvg,"__esModule",{value:!0});coinbaseWalletRoundSvg.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var QRCodeIcon$1={};Object.defineProperty(QRCodeIcon$1,"__esModule",{value:!0});QRCodeIcon$1.QRCodeIcon=void 0;const preact_1$a=require$$1$2;function QRCodeIcon(R){return(0,preact_1$a.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$a.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,preact_1$a.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,preact_1$a.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,preact_1$a.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,preact_1$a.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,preact_1$a.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,preact_1$a.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,preact_1$a.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,preact_1$a.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}QRCodeIcon$1.QRCodeIcon=QRCodeIcon;var QRLogoCoinbase={};Object.defineProperty(QRLogoCoinbase,"__esModule",{value:!0});const svg=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;QRLogoCoinbase.default=svg;var QRLogoWallet={};Object.defineProperty(QRLogoWallet,"__esModule",{value:!0});QRLogoWallet.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var StatusDotIcon$1={};Object.defineProperty(StatusDotIcon$1,"__esModule",{value:!0});StatusDotIcon$1.StatusDotIcon=void 0;const preact_1$9=require$$1$2;function StatusDotIcon(R){return(0,preact_1$9.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$9.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}StatusDotIcon$1.StatusDotIcon=StatusDotIcon;var QRCode$2={};function QR8bitByte(R){this.mode=QRMode.MODE_8BIT_BYTE,this.data=R,this.parsedData=[];for(var E=0,U=this.data.length;E<U;E++){var G=[],Y=this.data.charCodeAt(E);Y>65536?(G[0]=240|(Y&1835008)>>>18,G[1]=128|(Y&258048)>>>12,G[2]=128|(Y&4032)>>>6,G[3]=128|Y&63):Y>2048?(G[0]=224|(Y&61440)>>>12,G[1]=128|(Y&4032)>>>6,G[2]=128|Y&63):Y>128?(G[0]=192|(Y&1984)>>>6,G[1]=128|Y&63):G[0]=Y,this.parsedData.push(G)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}QR8bitByte.prototype={getLength:function(R){return this.parsedData.length},write:function(R){for(var E=0,U=this.parsedData.length;E<U;E++)R.put(this.parsedData[E],8)}};function QRCodeModel(R,E){this.typeNumber=R,this.errorCorrectLevel=E,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}QRCodeModel.prototype={addData:function(R){var E=new QR8bitByte(R);this.dataList.push(E),this.dataCache=null},isDark:function(R,E){if(R<0||this.moduleCount<=R||E<0||this.moduleCount<=E)throw new Error(R+","+E);return this.modules[R][E]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(R,E){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var U=0;U<this.moduleCount;U++){this.modules[U]=new Array(this.moduleCount);for(var G=0;G<this.moduleCount;G++)this.modules[U][G]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(R,E),this.typeNumber>=7&&this.setupTypeNumber(R),this.dataCache==null&&(this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,E)},setupPositionProbePattern:function(R,E){for(var U=-1;U<=7;U++)if(!(R+U<=-1||this.moduleCount<=R+U))for(var G=-1;G<=7;G++)E+G<=-1||this.moduleCount<=E+G||(0<=U&&U<=6&&(G==0||G==6)||0<=G&&G<=6&&(U==0||U==6)||2<=U&&U<=4&&2<=G&&G<=4?this.modules[R+U][E+G]=!0:this.modules[R+U][E+G]=!1)},getBestMaskPattern:function(){for(var R=0,E=0,U=0;U<8;U++){this.makeImpl(!0,U);var G=QRUtil.getLostPoint(this);(U==0||R>G)&&(R=G,E=U)}return E},createMovieClip:function(R,E,U){var G=R.createEmptyMovieClip(E,U),Y=1;this.make();for(var J=0;J<this.modules.length;J++)for(var Q=J*Y,X=0;X<this.modules[J].length;X++){var Z=X*Y,ee=this.modules[J][X];ee&&(G.beginFill(0,100),G.moveTo(Z,Q),G.lineTo(Z+Y,Q),G.lineTo(Z+Y,Q+Y),G.lineTo(Z,Q+Y),G.endFill())}return G},setupTimingPattern:function(){for(var R=8;R<this.moduleCount-8;R++)this.modules[R][6]==null&&(this.modules[R][6]=R%2==0);for(var E=8;E<this.moduleCount-8;E++)this.modules[6][E]==null&&(this.modules[6][E]=E%2==0)},setupPositionAdjustPattern:function(){for(var R=QRUtil.getPatternPosition(this.typeNumber),E=0;E<R.length;E++)for(var U=0;U<R.length;U++){var G=R[E],Y=R[U];if(this.modules[G][Y]==null)for(var J=-2;J<=2;J++)for(var Q=-2;Q<=2;Q++)J==-2||J==2||Q==-2||Q==2||J==0&&Q==0?this.modules[G+J][Y+Q]=!0:this.modules[G+J][Y+Q]=!1}},setupTypeNumber:function(R){for(var E=QRUtil.getBCHTypeNumber(this.typeNumber),U=0;U<18;U++){var G=!R&&(E>>U&1)==1;this.modules[Math.floor(U/3)][U%3+this.moduleCount-8-3]=G}for(var U=0;U<18;U++){var G=!R&&(E>>U&1)==1;this.modules[U%3+this.moduleCount-8-3][Math.floor(U/3)]=G}},setupTypeInfo:function(R,E){for(var U=this.errorCorrectLevel<<3|E,G=QRUtil.getBCHTypeInfo(U),Y=0;Y<15;Y++){var J=!R&&(G>>Y&1)==1;Y<6?this.modules[Y][8]=J:Y<8?this.modules[Y+1][8]=J:this.modules[this.moduleCount-15+Y][8]=J}for(var Y=0;Y<15;Y++){var J=!R&&(G>>Y&1)==1;Y<8?this.modules[8][this.moduleCount-Y-1]=J:Y<9?this.modules[8][15-Y-1+1]=J:this.modules[8][15-Y-1]=J}this.modules[this.moduleCount-8][8]=!R},mapData:function(R,E){for(var U=-1,G=this.moduleCount-1,Y=7,J=0,Q=this.moduleCount-1;Q>0;Q-=2)for(Q==6&&Q--;;){for(var X=0;X<2;X++)if(this.modules[G][Q-X]==null){var Z=!1;J<R.length&&(Z=(R[J]>>>Y&1)==1);var ee=QRUtil.getMask(E,G,Q-X);ee&&(Z=!Z),this.modules[G][Q-X]=Z,Y--,Y==-1&&(J++,Y=7)}if(G+=U,G<0||this.moduleCount<=G){G-=U,U=-U;break}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(R,E,U){for(var G=QRRSBlock.getRSBlocks(R,E),Y=new QRBitBuffer,J=0;J<U.length;J++){var Q=U[J];Y.put(Q.mode,4),Y.put(Q.getLength(),QRUtil.getLengthInBits(Q.mode,R)),Q.write(Y)}for(var X=0,J=0;J<G.length;J++)X+=G[J].dataCount;if(Y.getLengthInBits()>X*8)throw new Error("code length overflow. ("+Y.getLengthInBits()+">"+X*8+")");for(Y.getLengthInBits()+4<=X*8&&Y.put(0,4);Y.getLengthInBits()%8!=0;)Y.putBit(!1);for(;!(Y.getLengthInBits()>=X*8||(Y.put(QRCodeModel.PAD0,8),Y.getLengthInBits()>=X*8));)Y.put(QRCodeModel.PAD1,8);return QRCodeModel.createBytes(Y,G)};QRCodeModel.createBytes=function(R,E){for(var U=0,G=0,Y=0,J=new Array(E.length),Q=new Array(E.length),X=0;X<E.length;X++){var Z=E[X].dataCount,ee=E[X].totalCount-Z;G=Math.max(G,Z),Y=Math.max(Y,ee),J[X]=new Array(Z);for(var te=0;te<J[X].length;te++)J[X][te]=255&R.buffer[te+U];U+=Z;var ne=QRUtil.getErrorCorrectPolynomial(ee),oe=new QRPolynomial(J[X],ne.getLength()-1),ce=oe.mod(ne);Q[X]=new Array(ne.getLength()-1);for(var te=0;te<Q[X].length;te++){var pe=te+ce.getLength()-Q[X].length;Q[X][te]=pe>=0?ce.get(pe):0}}for(var ye=0,te=0;te<E.length;te++)ye+=E[te].totalCount;for(var Se=new Array(ye),ge=0,te=0;te<G;te++)for(var X=0;X<E.length;X++)te<J[X].length&&(Se[ge++]=J[X][te]);for(var te=0;te<Y;te++)for(var X=0;X<E.length;X++)te<Q[X].length&&(Se[ge++]=Q[X][te]);return Se};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(R){for(var E=R<<10;QRUtil.getBCHDigit(E)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)E^=QRUtil.G15<<QRUtil.getBCHDigit(E)-QRUtil.getBCHDigit(QRUtil.G15);return(R<<10|E)^QRUtil.G15_MASK},getBCHTypeNumber:function(R){for(var E=R<<12;QRUtil.getBCHDigit(E)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)E^=QRUtil.G18<<QRUtil.getBCHDigit(E)-QRUtil.getBCHDigit(QRUtil.G18);return R<<12|E},getBCHDigit:function(R){for(var E=0;R!=0;)E++,R>>>=1;return E},getPatternPosition:function(R){return QRUtil.PATTERN_POSITION_TABLE[R-1]},getMask:function(R,E,U){switch(R){case QRMaskPattern.PATTERN000:return(E+U)%2==0;case QRMaskPattern.PATTERN001:return E%2==0;case QRMaskPattern.PATTERN010:return U%3==0;case QRMaskPattern.PATTERN011:return(E+U)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(E/2)+Math.floor(U/3))%2==0;case QRMaskPattern.PATTERN101:return E*U%2+E*U%3==0;case QRMaskPattern.PATTERN110:return(E*U%2+E*U%3)%2==0;case QRMaskPattern.PATTERN111:return(E*U%3+(E+U)%2)%2==0;default:throw new Error("bad maskPattern:"+R)}},getErrorCorrectPolynomial:function(R){for(var E=new QRPolynomial([1],0),U=0;U<R;U++)E=E.multiply(new QRPolynomial([1,QRMath.gexp(U)],0));return E},getLengthInBits:function(R,E){if(1<=E&&E<10)switch(R){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+R)}else if(E<27)switch(R){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+R)}else if(E<41)switch(R){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+R)}else throw new Error("type:"+E)},getLostPoint:function(R){for(var E=R.getModuleCount(),U=0,G=0;G<E;G++)for(var Y=0;Y<E;Y++){for(var J=0,Q=R.isDark(G,Y),X=-1;X<=1;X++)if(!(G+X<0||E<=G+X))for(var Z=-1;Z<=1;Z++)Y+Z<0||E<=Y+Z||X==0&&Z==0||Q==R.isDark(G+X,Y+Z)&&J++;J>5&&(U+=3+J-5)}for(var G=0;G<E-1;G++)for(var Y=0;Y<E-1;Y++){var ee=0;R.isDark(G,Y)&&ee++,R.isDark(G+1,Y)&&ee++,R.isDark(G,Y+1)&&ee++,R.isDark(G+1,Y+1)&&ee++,(ee==0||ee==4)&&(U+=3)}for(var G=0;G<E;G++)for(var Y=0;Y<E-6;Y++)R.isDark(G,Y)&&!R.isDark(G,Y+1)&&R.isDark(G,Y+2)&&R.isDark(G,Y+3)&&R.isDark(G,Y+4)&&!R.isDark(G,Y+5)&&R.isDark(G,Y+6)&&(U+=40);for(var Y=0;Y<E;Y++)for(var G=0;G<E-6;G++)R.isDark(G,Y)&&!R.isDark(G+1,Y)&&R.isDark(G+2,Y)&&R.isDark(G+3,Y)&&R.isDark(G+4,Y)&&!R.isDark(G+5,Y)&&R.isDark(G+6,Y)&&(U+=40);for(var te=0,Y=0;Y<E;Y++)for(var G=0;G<E;G++)R.isDark(G,Y)&&te++;var ne=Math.abs(100*te/E/E-50)/5;return U+=ne*10,U}},QRMath={glog:function(R){if(R<1)throw new Error("glog("+R+")");return QRMath.LOG_TABLE[R]},gexp:function(R){for(;R<0;)R+=255;for(;R>=256;)R-=255;return QRMath.EXP_TABLE[R]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i$1=0;i$1<8;i$1++)QRMath.EXP_TABLE[i$1]=1<<i$1;for(var i$1=8;i$1<256;i$1++)QRMath.EXP_TABLE[i$1]=QRMath.EXP_TABLE[i$1-4]^QRMath.EXP_TABLE[i$1-5]^QRMath.EXP_TABLE[i$1-6]^QRMath.EXP_TABLE[i$1-8];for(var i$1=0;i$1<255;i$1++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i$1]]=i$1;function QRPolynomial(R,E){if(R.length==null)throw new Error(R.length+"/"+E);for(var U=0;U<R.length&&R[U]==0;)U++;this.num=new Array(R.length-U+E);for(var G=0;G<R.length-U;G++)this.num[G]=R[G+U]}QRPolynomial.prototype={get:function(R){return this.num[R]},getLength:function(){return this.num.length},multiply:function(R){for(var E=new Array(this.getLength()+R.getLength()-1),U=0;U<this.getLength();U++)for(var G=0;G<R.getLength();G++)E[U+G]^=QRMath.gexp(QRMath.glog(this.get(U))+QRMath.glog(R.get(G)));return new QRPolynomial(E,0)},mod:function(R){if(this.getLength()-R.getLength()<0)return this;for(var E=QRMath.glog(this.get(0))-QRMath.glog(R.get(0)),U=new Array(this.getLength()),G=0;G<this.getLength();G++)U[G]=this.get(G);for(var G=0;G<R.getLength();G++)U[G]^=QRMath.gexp(QRMath.glog(R.get(G))+E);return new QRPolynomial(U,0).mod(R)}};function QRRSBlock(R,E){this.totalCount=R,this.dataCount=E}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(R,E){var U=QRRSBlock.getRsBlockTable(R,E);if(U==null)throw new Error("bad rs block @ typeNumber:"+R+"/errorCorrectLevel:"+E);for(var G=U.length/3,Y=[],J=0;J<G;J++)for(var Q=U[J*3+0],X=U[J*3+1],Z=U[J*3+2],ee=0;ee<Q;ee++)Y.push(new QRRSBlock(X,Z));return Y};QRRSBlock.getRsBlockTable=function(R,E){switch(E){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(R-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(R-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(R-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(R-1)*4+3];default:return}};function QRBitBuffer(){this.buffer=[],this.length=0}QRBitBuffer.prototype={get:function(R){var E=Math.floor(R/8);return(this.buffer[E]>>>7-R%8&1)==1},put:function(R,E){for(var U=0;U<E;U++)this.putBit((R>>>E-U-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(R){var E=Math.floor(this.length/8);this.buffer.length<=E&&this.buffer.push(0),R&&(this.buffer[E]|=128>>>this.length%8),this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function QRCode$1(R){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof R=="string"&&(R={content:R}),R)for(var E in R)this.options[E]=R[E];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function U(Z){switch(Z){case"L":return QRErrorCorrectLevel.L;case"M":return QRErrorCorrectLevel.M;case"Q":return QRErrorCorrectLevel.Q;case"H":return QRErrorCorrectLevel.H;default:throw new Error("Unknwon error correction level: "+Z)}}function G(Z,ee){for(var te=Y(Z),ne=1,oe=0,ce=0,pe=QRCodeLimitLength.length;ce<=pe;ce++){var ye=QRCodeLimitLength[ce];if(!ye)throw new Error("Content too long: expected "+oe+" but got "+te);switch(ee){case"L":oe=ye[0];break;case"M":oe=ye[1];break;case"Q":oe=ye[2];break;case"H":oe=ye[3];break;default:throw new Error("Unknwon error correction level: "+ee)}if(te<=oe)break;ne++}if(ne>QRCodeLimitLength.length)throw new Error("Content too long");return ne}function Y(Z){var ee=encodeURI(Z).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return ee.length+(ee.length!=Z?3:0)}var J=this.options.content,Q=G(J,this.options.ecl),X=U(this.options.ecl);this.qrcode=new QRCodeModel(Q,X),this.qrcode.addData(J),this.qrcode.make()}QRCode$1.prototype.svg=function(R){var E=this.options||{},U=this.qrcode.modules;typeof R>"u"&&(R={container:E.container||"svg"});for(var G=typeof E.pretty<"u"?!!E.pretty:!0,Y=G?"  ":"",J=G?`\r
`:"",Q=E.width,X=E.height,Z=U.length,ee=Q/(Z+2*E.padding),te=X/(Z+2*E.padding),ne=typeof E.join<"u"?!!E.join:!1,oe=typeof E.swap<"u"?!!E.swap:!1,ce=typeof E.xmlDeclaration<"u"?!!E.xmlDeclaration:!0,pe=typeof E.predefined<"u"?!!E.predefined:!1,ye=pe?Y+'<defs><path id="qrmodule" d="M0 0 h'+te+" v"+ee+' H0 z" style="fill:'+E.color+';shape-rendering:crispEdges;" /></defs>'+J:"",Se=Y+'<rect x="0" y="0" width="'+Q+'" height="'+X+'" style="fill:'+E.background+';shape-rendering:crispEdges;"/>'+J,ge="",_e="",Te=0;Te<Z;Te++)for(var Ee=0;Ee<Z;Ee++){var Re=U[Ee][Te];if(Re){var Ae=Ee*ee+E.padding*ee,Ie=Te*te+E.padding*te;if(oe){var Oe=Ae;Ae=Ie,Ie=Oe}if(ne){var Pe=ee+Ae,Le=te+Ie;Ae=Number.isInteger(Ae)?Number(Ae):Ae.toFixed(2),Ie=Number.isInteger(Ie)?Number(Ie):Ie.toFixed(2),Pe=Number.isInteger(Pe)?Number(Pe):Pe.toFixed(2),Le=Number.isInteger(Le)?Number(Le):Le.toFixed(2),_e+="M"+Ae+","+Ie+" V"+Le+" H"+Pe+" V"+Ie+" H"+Ae+" Z "}else pe?ge+=Y+'<use x="'+Ae.toString()+'" y="'+Ie.toString()+'" href="#qrmodule" />'+J:ge+=Y+'<rect x="'+Ae.toString()+'" y="'+Ie.toString()+'" width="'+ee+'" height="'+te+'" style="fill:'+E.color+';shape-rendering:crispEdges;"/>'+J}}ne&&(ge=Y+'<path x="0" y="0" style="fill:'+E.color+';shape-rendering:crispEdges;" d="'+_e+'" />');let Me="";if(this.options.image!==void 0&&this.options.image.svg){const ae=Q*this.options.image.width/100,se=X*this.options.image.height/100,le=Q/2-ae/2,fe=X/2-se/2;Me+=`<svg x="${le}" y="${fe}" width="${ae}" height="${se}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,Me+=this.options.image.svg+J,Me+="</svg>"}var ue="";switch(R.container){case"svg":ce&&(ue+='<?xml version="1.0" standalone="yes"?>'+J),ue+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+Q+'" height="'+X+'">'+J,ue+=ye+Se+ge,ue+=Me,ue+="</svg>";break;case"svg-viewbox":ce&&(ue+='<?xml version="1.0" standalone="yes"?>'+J),ue+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+Q+" "+X+'">'+J,ue+=ye+Se+ge,ue+=Me,ue+="</svg>";break;case"g":ue+='<g width="'+Q+'" height="'+X+'">'+J,ue+=ye+Se+ge,ue+=Me,ue+="</g>";break;default:ue+=(ye+Se+ge+Me).replace(/^\s+/,"");break}return ue};var qrcodeSvg=QRCode$1,__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(QRCode$2,"__esModule",{value:!0});QRCode$2.QRCode=void 0;const preact_1$8=require$$1$2,hooks_1$3=require$$2$1,qrcode_svg_1=__importDefault$7(qrcodeSvg),QRCode=R=>{const[E,U]=(0,hooks_1$3.useState)("");return(0,hooks_1$3.useEffect)(()=>{var G,Y;const J=new qrcode_svg_1.default({content:R.content,background:R.bgColor||"#ffffff",color:R.fgColor||"#000000",container:"svg",ecl:"M",width:(G=R.width)!==null&&G!==void 0?G:256,height:(Y=R.height)!==null&&Y!==void 0?Y:256,padding:0,image:R.image}),Q=Buffer.from(J.svg(),"utf8").toString("base64");U(`data:image/svg+xml;base64,${Q}`)}),E?(0,preact_1$8.h)("img",{src:E,alt:"QR Code"}):null};QRCode$2.QRCode=QRCode;var Spinner$1={},SpinnerCss={};Object.defineProperty(SpinnerCss,"__esModule",{value:!0});SpinnerCss.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var __importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(Spinner$1,"__esModule",{value:!0});Spinner$1.Spinner=void 0;const preact_1$7=require$$1$2,Spinner_css_1=__importDefault$6(SpinnerCss),Spinner=R=>{var E;const U=(E=R.size)!==null&&E!==void 0?E:64,G=R.color||"#000";return(0,preact_1$7.h)("div",{class:"-cbwsdk-spinner"},(0,preact_1$7.h)("style",null,Spinner_css_1.default),(0,preact_1$7.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:U,height:U}},(0,preact_1$7.h)("circle",{style:{cx:50,cy:50,r:45,stroke:G}})))};Spinner$1.Spinner=Spinner;var ConnectContentCss={};Object.defineProperty(ConnectContentCss,"__esModule",{value:!0});ConnectContentCss.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(ConnectContent$1,"__esModule",{value:!0});ConnectContent$1.CoinbaseAppSteps=ConnectContent$1.CoinbaseWalletSteps=ConnectContent$1.ConnectItem=ConnectContent$1.ConnectContent=void 0;const clsx_1$2=__importDefault$5(require$$0$1),preact_1$6=require$$1$2,hooks_1$2=require$$2$1,util_1$4=util$8,version_1=version$3,CloseIcon_1=CloseIcon$1,coinbase_round_svg_1=__importDefault$5(coinbaseRoundSvg),coinbase_wallet_round_svg_1=__importDefault$5(coinbaseWalletRoundSvg),QRCodeIcon_1=QRCodeIcon$1,QRLogoCoinbase_1=__importDefault$5(QRLogoCoinbase),QRLogoWallet_1=__importDefault$5(QRLogoWallet),StatusDotIcon_1=StatusDotIcon$1,QRCode_1=QRCode$2,Spinner_1=Spinner$1,ConnectContent_css_1=__importDefault$5(ConnectContentCss),wallets={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:coinbase_wallet_round_svg_1.default,steps:CoinbaseWalletSteps},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:coinbase_round_svg_1.default,steps:CoinbaseAppSteps}},makeQrCodeImage=R=>{switch(R){case"coinbase-app":return QRLogoCoinbase_1.default;case"coinbase-wallet-app":default:return QRLogoWallet_1.default}},makeIconColor=R=>R==="light"?"#FFFFFF":"#0A0B0D";function ConnectContent(R){const{theme:E}=R,[U,G]=(0,hooks_1$2.useState)("coinbase-wallet-app"),Y=(0,hooks_1$2.useCallback)(ee=>{G(ee)},[]),J=(0,util_1$4.createQrUrl)(R.sessionId,R.sessionSecret,R.linkAPIUrl,R.isParentConnection,R.version,R.chainId),Q=wallets[U];if(!U)return null;const X=Q.steps,Z=U==="coinbase-app";return(0,preact_1$6.h)("div",{"data-testid":"connect-content",class:(0,clsx_1$2.default)("-cbwsdk-connect-content",E)},(0,preact_1$6.h)("style",null,ConnectContent_css_1.default),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-header"},(0,preact_1$6.h)("h2",{class:(0,clsx_1$2.default)("-cbwsdk-connect-content-heading",E)},"Scan to connect with one of our mobile apps"),R.onCancel&&(0,preact_1$6.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:R.onCancel},(0,preact_1$6.h)(CloseIcon_1.CloseIcon,{fill:E==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,preact_1$6.h)("div",null,Object.entries(wallets).map(([ee,te])=>(0,preact_1$6.h)(ConnectItem,{key:ee,title:te.title,description:te.description,icon:te.icon,selected:U===ee,onClick:()=>Y(ee),theme:E}))),Z&&(0,preact_1$6.h)("div",{class:(0,clsx_1$2.default)("-cbwsdk-connect-content-update-app",E)},"Don\u2019t see a ",(0,preact_1$6.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,preact_1$6.h)(QRCode_1.QRCode,{content:J,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:makeQrCodeImage(U),width:25,height:25}}),(0,preact_1$6.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:version_1.LIB_VERSION}),(0,preact_1$6.h)("input",{type:"hidden",value:J})),(0,preact_1$6.h)(X,{theme:E}),!R.isConnected&&(0,preact_1$6.h)("div",{"data-testid":"connecting-spinner",class:(0,clsx_1$2.default)("-cbwsdk-connect-content-qr-connecting",E)},(0,preact_1$6.h)(Spinner_1.Spinner,{size:36,color:E==="dark"?"#FFF":"#000"}),(0,preact_1$6.h)("p",null,"Connecting...")))))}ConnectContent$1.ConnectContent=ConnectContent;function ConnectItem({title:R,description:E,icon:U,selected:G,theme:Y,onClick:J}){return(0,preact_1$6.h)("div",{onClick:J,class:(0,clsx_1$2.default)("-cbwsdk-connect-item",Y,{selected:G})},(0,preact_1$6.h)("div",null,(0,preact_1$6.h)("img",{src:U,alt:R})),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,preact_1$6.h)("h3",{class:"-cbwsdk-connect-item-title"},R),(0,preact_1$6.h)("p",{class:"-cbwsdk-connect-item-description"},E)))}ConnectContent$1.ConnectItem=ConnectItem;function CoinbaseWalletSteps({theme:R}){return(0,preact_1$6.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",R)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",R)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,preact_1$6.h)("span",null,"Tap ",(0,preact_1$6.h)("strong",null,"Scan")," "),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",R)},(0,preact_1$6.h)(QRCodeIcon_1.QRCodeIcon,{fill:makeIconColor(R)})))))}ConnectContent$1.CoinbaseWalletSteps=CoinbaseWalletSteps;function CoinbaseAppSteps({theme:R}){return(0,preact_1$6.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",R)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",R)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,preact_1$6.h)("span",null,"Tap ",(0,preact_1$6.h)("strong",null,"More")),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",R)},(0,preact_1$6.h)(StatusDotIcon_1.StatusDotIcon,{fill:makeIconColor(R)})),(0,preact_1$6.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,preact_1$6.h)("strong",null,"Scan")),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",R)},(0,preact_1$6.h)(QRCodeIcon_1.QRCodeIcon,{fill:makeIconColor(R)})))))}ConnectContent$1.CoinbaseAppSteps=CoinbaseAppSteps;var TryExtensionContent$1={},ArrowLeftIcon$1={};Object.defineProperty(ArrowLeftIcon$1,"__esModule",{value:!0});ArrowLeftIcon$1.ArrowLeftIcon=void 0;const preact_1$5=require$$1$2;function ArrowLeftIcon(R){return(0,preact_1$5.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$5.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}ArrowLeftIcon$1.ArrowLeftIcon=ArrowLeftIcon;var LaptopIcon$1={};Object.defineProperty(LaptopIcon$1,"__esModule",{value:!0});LaptopIcon$1.LaptopIcon=void 0;const preact_1$4=require$$1$2;function LaptopIcon(R){return(0,preact_1$4.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$4.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,preact_1$4.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}LaptopIcon$1.LaptopIcon=LaptopIcon;var SafeIcon$1={};Object.defineProperty(SafeIcon$1,"__esModule",{value:!0});SafeIcon$1.SafeIcon=void 0;const preact_1$3=require$$1$2;function SafeIcon(R){return(0,preact_1$3.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},R),(0,preact_1$3.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}SafeIcon$1.SafeIcon=SafeIcon;var TryExtensionContentCss={};Object.defineProperty(TryExtensionContentCss,"__esModule",{value:!0});TryExtensionContentCss.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(TryExtensionContent$1,"__esModule",{value:!0});TryExtensionContent$1.TryExtensionContent=void 0;const clsx_1$1=__importDefault$4(require$$0$1),preact_1$2=require$$1$2,hooks_1$1=require$$2$1,ArrowLeftIcon_1=ArrowLeftIcon$1,LaptopIcon_1=LaptopIcon$1,SafeIcon_1=SafeIcon$1,TryExtensionContent_css_1=__importDefault$4(TryExtensionContentCss);function TryExtensionContent({theme:R}){const[E,U]=(0,hooks_1$1.useState)(!1),G=(0,hooks_1$1.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),Y=(0,hooks_1$1.useCallback)(()=>{E?window.location.reload():(G(),U(!0))},[G,E]);return(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension",R)},(0,preact_1$2.h)("style",null,TryExtensionContent_css_1.default),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,preact_1$2.h)("h3",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-heading",R)},"Or try the Coinbase Wallet browser extension"),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,preact_1$2.h)("button",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-cta",R),onClick:Y},E?"Refresh":"Install"),(0,preact_1$2.h)("div",null,!E&&(0,preact_1$2.h)(ArrowLeftIcon_1.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:R==="light"?"#0052FF":"#588AF5"})))),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,preact_1$2.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,preact_1$2.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,preact_1$2.h)("span",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-icon",R)},(0,preact_1$2.h)(LaptopIcon_1.LaptopIcon,{fill:R==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-copy",R)},"Connect with dapps with just one click on your desktop browser")),(0,preact_1$2.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,preact_1$2.h)("span",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-icon",R)},(0,preact_1$2.h)(SafeIcon_1.SafeIcon,{fill:R==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-copy",R)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}TryExtensionContent$1.TryExtensionContent=TryExtensionContent;var ConnectDialogCss={};Object.defineProperty(ConnectDialogCss,"__esModule",{value:!0});ConnectDialogCss.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(ConnectDialog$1,"__esModule",{value:!0});ConnectDialog$1.ConnectDialog=void 0;const clsx_1=__importDefault$3(require$$0$1),preact_1$1=require$$1$2,hooks_1=require$$2$1,ConnectContent_1=ConnectContent$1,TryExtensionContent_1=TryExtensionContent$1,ConnectDialog_css_1=__importDefault$3(ConnectDialogCss),ConnectDialog=R=>{const{isOpen:E,darkMode:U}=R,[G,Y]=(0,hooks_1.useState)(!E),[J,Q]=(0,hooks_1.useState)(!E);(0,hooks_1.useEffect)(()=>{const Z=[window.setTimeout(()=>{Q(!E)},10)];return E?Y(!1):Z.push(window.setTimeout(()=>{Y(!0)},360)),()=>{Z.forEach(window.clearTimeout)}},[R.isOpen]);const X=U?"dark":"light";return(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-container",G&&"-cbwsdk-connect-dialog-container-hidden")},(0,preact_1$1.h)("style",null,ConnectDialog_css_1.default),(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-backdrop",X,J&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,preact_1$1.h)("div",{class:"-cbwsdk-connect-dialog"},(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-box",J&&"-cbwsdk-connect-dialog-box-hidden")},R.connectDisabled?null:(0,preact_1$1.h)(ConnectContent_1.ConnectContent,{theme:X,version:R.version,sessionId:R.sessionId,sessionSecret:R.sessionSecret,linkAPIUrl:R.linkAPIUrl,isConnected:R.isConnected,isParentConnection:R.isParentConnection,chainId:R.chainId,onCancel:R.onCancel}),(0,preact_1$1.h)(TryExtensionContent_1.TryExtensionContent,{theme:X}))))};ConnectDialog$1.ConnectDialog=ConnectDialog;Object.defineProperty(LinkFlow$1,"__esModule",{value:!0});LinkFlow$1.LinkFlow=void 0;const preact_1=require$$1$2,rxjs_1$2=require$$2$2,ConnectDialog_1=ConnectDialog$1;class LinkFlow{constructor(E){this.extensionUI$=new rxjs_1$2.BehaviorSubject({}),this.subscriptions=new rxjs_1$2.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=E.darkMode,this.version=E.version,this.sessionId=E.sessionId,this.sessionSecret=E.sessionSecret,this.linkAPIUrl=E.linkAPIUrl,this.isParentConnection=E.isParentConnection,this.connected$=E.connected$,this.chainId$=E.chainId$}attach(E){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",E.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(U=>{this.isConnected!==U&&(this.isConnected=U,this.render())})),this.subscriptions.add(this.chainId$.subscribe(U=>{this.chainId!==U&&(this.chainId=U,this.render())}))}detach(){var E;!this.root||(this.subscriptions.unsubscribe(),(0,preact_1.render)(null,this.root),(E=this.root.parentElement)===null||E===void 0||E.removeChild(this.root))}setConnectDisabled(E){this.connectDisabled=E}open(E){this.isOpen=!0,this.onCancel=E.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const E=this.extensionUI$.subscribe(()=>{!this.root||(0,preact_1.render)((0,preact_1.h)(ConnectDialog_1.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(E)}}LinkFlow$1.LinkFlow=LinkFlow;var Snackbar={},SnackbarCss={};Object.defineProperty(SnackbarCss,"__esModule",{value:!0});SnackbarCss.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(R){var E=commonjsGlobal&&commonjsGlobal.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(R,"__esModule",{value:!0}),R.SnackbarInstance=R.SnackbarContainer=R.Snackbar=void 0;const U=E(require$$0$1),G=require$$1$2,Y=require$$2$1,J=E(SnackbarCss),Q="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function X(ne){switch(ne){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class Z{constructor(oe){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=oe.darkMode}attach(oe){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",oe.appendChild(this.root),this.render()}presentItem(oe){const ce=this.nextItemKey++;return this.items.set(ce,oe),this.render(),()=>{this.items.delete(ce),this.render()}}clear(){this.items.clear(),this.render()}render(){!this.root||(0,G.render)((0,G.h)("div",null,(0,G.h)(R.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([oe,ce])=>(0,G.h)(R.SnackbarInstance,Object.assign({},ce,{key:oe}))))),this.root)}}R.Snackbar=Z;const ee=ne=>(0,G.h)("div",{class:(0,U.default)("-cbwsdk-snackbar-container")},(0,G.h)("style",null,J.default),(0,G.h)("div",{class:"-cbwsdk-snackbar"},ne.children));R.SnackbarContainer=ee;const te=({autoExpand:ne,message:oe,menuItems:ce,appSrc:pe})=>{const[ye,Se]=(0,Y.useState)(!0),[ge,_e]=(0,Y.useState)(ne!=null?ne:!1);(0,Y.useEffect)(()=>{const Ee=[window.setTimeout(()=>{Se(!1)},1),window.setTimeout(()=>{_e(!0)},1e4)];return()=>{Ee.forEach(window.clearTimeout)}});const Te=()=>{_e(!ge)};return(0,G.h)("div",{class:(0,U.default)("-cbwsdk-snackbar-instance",ye&&"-cbwsdk-snackbar-instance-hidden",ge&&"-cbwsdk-snackbar-instance-expanded")},(0,G.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:Te},(0,G.h)("img",{src:X(pe),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,G.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},oe),(0,G.h)("div",{class:"-gear-container"},!ge&&(0,G.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,G.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,G.h)("img",{src:Q,class:"-gear-icon",title:"Expand"}))),ce&&ce.length>0&&(0,G.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},ce.map((Ee,Re)=>(0,G.h)("div",{class:(0,U.default)("-cbwsdk-snackbar-instance-menu-item",Ee.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:Ee.onClick,key:Re},(0,G.h)("svg",{width:Ee.svgWidth,height:Ee.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,G.h)("path",{"fill-rule":Ee.defaultFillRule,"clip-rule":Ee.defaultClipRule,d:Ee.path,fill:"#AAAAAA"})),(0,G.h)("span",{class:(0,U.default)("-cbwsdk-snackbar-instance-menu-item-info",Ee.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},Ee.info)))))};R.SnackbarInstance=te})(Snackbar);var cssReset={},cssResetCss={};Object.defineProperty(cssResetCss,"__esModule",{value:!0});cssResetCss.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(cssReset,"__esModule",{value:!0});cssReset.injectCssReset=void 0;const cssReset_css_1=__importDefault$2(cssResetCss);function injectCssReset(){const R=document.createElement("style");R.type="text/css",R.appendChild(document.createTextNode(cssReset_css_1.default)),document.documentElement.appendChild(R)}cssReset.injectCssReset=injectCssReset;Object.defineProperty(WalletSDKUI$1,"__esModule",{value:!0});WalletSDKUI$1.WalletSDKUI=void 0;const LinkFlow_1=LinkFlow$1,Snackbar_1=Snackbar,cssReset_1=cssReset;class WalletSDKUI{constructor(E){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new Snackbar_1.Snackbar({darkMode:E.darkMode}),this.linkFlow=new LinkFlow_1.LinkFlow({darkMode:E.darkMode,version:E.version,sessionId:E.session.id,sessionSecret:E.session.secret,linkAPIUrl:E.linkAPIUrl,connected$:E.connected$,chainId$:E.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const E=document.documentElement,U=document.createElement("div");U.className="-cbwsdk-css-reset",E.appendChild(U),this.linkFlow.attach(U),this.snackbar.attach(U),this.attached=!0,(0,cssReset_1.injectCssReset)()}setConnectDisabled(E){this.linkFlow.setConnectDisabled(E)}addEthereumChain(E){}watchAsset(E){}switchEthereumChain(E){}requestEthereumAccounts(E){this.linkFlow.open({onCancel:E.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(E){}signEthereumTransaction(E){}submitEthereumTransaction(E){}ethereumAddressFromSignedMessage(E){}showConnecting(E){let U;return E.isUnlinkedErrorState?U={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:E.onResetConnection}]}:U={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:E.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:E.onResetConnection}]},this.snackbar.presentItem(U)}setAppSrc(E){this.appSrc=E}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(E){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(E){this.standalone=E}isStandalone(){var E;return(E=this.standalone)!==null&&E!==void 0?E:!1}}WalletSDKUI$1.WalletSDKUI=WalletSDKUI;var WalletSDKRelay$1={},bindDecorator={};Object.defineProperty(bindDecorator,"__esModule",{value:!0});var constants;(function(R){R.typeOfFunction="function",R.boolTrue=!0})(constants||(constants={}));function bind$1(R,E,U){if(!U||typeof U.value!==constants.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+E+"> is not a method!");return{configurable:constants.boolTrue,get:function(){var G=U.value.bind(this);return Object.defineProperty(this,E,{value:G,configurable:constants.boolTrue,writable:constants.boolTrue}),G}}}bindDecorator.bind=bind$1;bindDecorator.default=bind$1;function audit(R){return function(U){return U.lift(new AuditOperator(R))}}var AuditOperator=function(){function R(E){this.durationSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new AuditSubscriber(E,this.durationSelector))},R}(),AuditSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.durationSelector=G,Y.hasValue=!1,Y}return E.prototype._next=function(U){if(this.value=U,this.hasValue=!0,!this.throttled){var G=void 0;try{var Y=this.durationSelector;G=Y(U)}catch(Q){return this.destination.error(Q)}var J=innerSubscribe(G,new SimpleInnerSubscriber(this));!J||J.closed?this.clearThrottle():this.add(this.throttled=J)}},E.prototype.clearThrottle=function(){var U=this,G=U.value,Y=U.hasValue,J=U.throttled;J&&(this.remove(J),this.throttled=void 0,J.unsubscribe()),Y&&(this.value=void 0,this.hasValue=!1,this.destination.next(G))},E.prototype.notifyNext=function(){this.clearThrottle()},E.prototype.notifyComplete=function(){this.clearThrottle()},E}(SimpleOuterSubscriber);function auditTime(R,E){return E===void 0&&(E=async),audit(function(){return timer(R,E)})}function buffer$1(R){return function(U){return U.lift(new BufferOperator(R))}}var BufferOperator=function(){function R(E){this.closingNotifier=E}return R.prototype.call=function(E,U){return U.subscribe(new BufferSubscriber(E,this.closingNotifier))},R}(),BufferSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.buffer=[],Y.add(innerSubscribe(G,new SimpleInnerSubscriber(Y))),Y}return E.prototype._next=function(U){this.buffer.push(U)},E.prototype.notifyNext=function(){var U=this.buffer;this.buffer=[],this.destination.next(U)},E}(SimpleOuterSubscriber);function bufferCount(R,E){return E===void 0&&(E=null),function(G){return G.lift(new BufferCountOperator(R,E))}}var BufferCountOperator=function(){function R(E,U){this.bufferSize=E,this.startBufferEvery=U,!U||E===U?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return R.prototype.call=function(E,U){return U.subscribe(new this.subscriberClass(E,this.bufferSize,this.startBufferEvery))},R}(),BufferCountSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.bufferSize=G,Y.buffer=[],Y}return E.prototype._next=function(U){var G=this.buffer;G.push(U),G.length==this.bufferSize&&(this.destination.next(G),this.buffer=[])},E.prototype._complete=function(){var U=this.buffer;U.length>0&&this.destination.next(U),R.prototype._complete.call(this)},E}(Subscriber),BufferSkipCountSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.bufferSize=G,J.startBufferEvery=Y,J.buffers=[],J.count=0,J}return E.prototype._next=function(U){var G=this,Y=G.bufferSize,J=G.startBufferEvery,Q=G.buffers,X=G.count;this.count++,X%J===0&&Q.push([]);for(var Z=Q.length;Z--;){var ee=Q[Z];ee.push(U),ee.length===Y&&(Q.splice(Z,1),this.destination.next(ee))}},E.prototype._complete=function(){for(var U=this,G=U.buffers,Y=U.destination;G.length>0;){var J=G.shift();J.length>0&&Y.next(J)}R.prototype._complete.call(this)},E}(Subscriber);function bufferTime(R){var E=arguments.length,U=async;isScheduler(arguments[arguments.length-1])&&(U=arguments[arguments.length-1],E--);var G=null;E>=2&&(G=arguments[1]);var Y=Number.POSITIVE_INFINITY;return E>=3&&(Y=arguments[2]),function(Q){return Q.lift(new BufferTimeOperator(R,G,Y,U))}}var BufferTimeOperator=function(){function R(E,U,G,Y){this.bufferTimeSpan=E,this.bufferCreationInterval=U,this.maxBufferSize=G,this.scheduler=Y}return R.prototype.call=function(E,U){return U.subscribe(new BufferTimeSubscriber(E,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},R}(),Context=function(){function R(){this.buffer=[]}return R}(),BufferTimeSubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;X.bufferTimeSpan=G,X.bufferCreationInterval=Y,X.maxBufferSize=J,X.scheduler=Q,X.contexts=[];var Z=X.openContext();if(X.timespanOnly=Y==null||Y<0,X.timespanOnly){var ee={subscriber:X,context:Z,bufferTimeSpan:G};X.add(Z.closeAction=Q.schedule(dispatchBufferTimeSpanOnly,G,ee))}else{var te={subscriber:X,context:Z},ne={bufferTimeSpan:G,bufferCreationInterval:Y,subscriber:X,scheduler:Q};X.add(Z.closeAction=Q.schedule(dispatchBufferClose,G,te)),X.add(Q.schedule(dispatchBufferCreation,Y,ne))}return X}return E.prototype._next=function(U){for(var G=this.contexts,Y=G.length,J,Q=0;Q<Y;Q++){var X=G[Q],Z=X.buffer;Z.push(U),Z.length==this.maxBufferSize&&(J=X)}J&&this.onBufferFull(J)},E.prototype._error=function(U){this.contexts.length=0,R.prototype._error.call(this,U)},E.prototype._complete=function(){for(var U=this,G=U.contexts,Y=U.destination;G.length>0;){var J=G.shift();Y.next(J.buffer)}R.prototype._complete.call(this)},E.prototype._unsubscribe=function(){this.contexts=null},E.prototype.onBufferFull=function(U){this.closeContext(U);var G=U.closeAction;if(G.unsubscribe(),this.remove(G),!this.closed&&this.timespanOnly){U=this.openContext();var Y=this.bufferTimeSpan,J={subscriber:this,context:U,bufferTimeSpan:Y};this.add(U.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,Y,J))}},E.prototype.openContext=function(){var U=new Context;return this.contexts.push(U),U},E.prototype.closeContext=function(U){this.destination.next(U.buffer);var G=this.contexts,Y=G?G.indexOf(U):-1;Y>=0&&G.splice(G.indexOf(U),1)},E}(Subscriber);function dispatchBufferTimeSpanOnly(R){var E=R.subscriber,U=R.context;U&&E.closeContext(U),E.closed||(R.context=E.openContext(),R.context.closeAction=this.schedule(R,R.bufferTimeSpan))}function dispatchBufferCreation(R){var E=R.bufferCreationInterval,U=R.bufferTimeSpan,G=R.subscriber,Y=R.scheduler,J=G.openContext(),Q=this;G.closed||(G.add(J.closeAction=Y.schedule(dispatchBufferClose,U,{subscriber:G,context:J})),Q.schedule(R,E))}function dispatchBufferClose(R){var E=R.subscriber,U=R.context;E.closeContext(U)}function bufferToggle(R,E){return function(G){return G.lift(new BufferToggleOperator(R,E))}}var BufferToggleOperator=function(){function R(E,U){this.openings=E,this.closingSelector=U}return R.prototype.call=function(E,U){return U.subscribe(new BufferToggleSubscriber(E,this.openings,this.closingSelector))},R}(),BufferToggleSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.closingSelector=Y,J.contexts=[],J.add(subscribeToResult(J,G)),J}return E.prototype._next=function(U){for(var G=this.contexts,Y=G.length,J=0;J<Y;J++)G[J].buffer.push(U)},E.prototype._error=function(U){for(var G=this.contexts;G.length>0;){var Y=G.shift();Y.subscription.unsubscribe(),Y.buffer=null,Y.subscription=null}this.contexts=null,R.prototype._error.call(this,U)},E.prototype._complete=function(){for(var U=this.contexts;U.length>0;){var G=U.shift();this.destination.next(G.buffer),G.subscription.unsubscribe(),G.buffer=null,G.subscription=null}this.contexts=null,R.prototype._complete.call(this)},E.prototype.notifyNext=function(U,G){U?this.closeBuffer(U):this.openBuffer(G)},E.prototype.notifyComplete=function(U){this.closeBuffer(U.context)},E.prototype.openBuffer=function(U){try{var G=this.closingSelector,Y=G.call(this,U);Y&&this.trySubscribe(Y)}catch(J){this._error(J)}},E.prototype.closeBuffer=function(U){var G=this.contexts;if(G&&U){var Y=U.buffer,J=U.subscription;this.destination.next(Y),G.splice(G.indexOf(U),1),this.remove(J),J.unsubscribe()}},E.prototype.trySubscribe=function(U){var G=this.contexts,Y=[],J=new Subscription,Q={buffer:Y,subscription:J};G.push(Q);var X=subscribeToResult(this,U,Q);!X||X.closed?this.closeBuffer(Q):(X.context=Q,this.add(X),J.add(X))},E}(OuterSubscriber);function bufferWhen(R){return function(E){return E.lift(new BufferWhenOperator(R))}}var BufferWhenOperator=function(){function R(E){this.closingSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new BufferWhenSubscriber(E,this.closingSelector))},R}(),BufferWhenSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.closingSelector=G,Y.subscribing=!1,Y.openBuffer(),Y}return E.prototype._next=function(U){this.buffer.push(U)},E.prototype._complete=function(){var U=this.buffer;U&&this.destination.next(U),R.prototype._complete.call(this)},E.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},E.prototype.notifyNext=function(){this.openBuffer()},E.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},E.prototype.openBuffer=function(){var U=this.closingSubscription;U&&(this.remove(U),U.unsubscribe());var G=this.buffer;this.buffer&&this.destination.next(G),this.buffer=[];var Y;try{var J=this.closingSelector;Y=J()}catch(Q){return this.error(Q)}U=new Subscription,this.closingSubscription=U,this.add(U),this.subscribing=!0,U.add(innerSubscribe(Y,new SimpleInnerSubscriber(this))),this.subscribing=!1},E}(SimpleOuterSubscriber);function catchError(R){return function(U){var G=new CatchOperator(R),Y=U.lift(G);return G.caught=Y}}var CatchOperator=function(){function R(E){this.selector=E}return R.prototype.call=function(E,U){return U.subscribe(new CatchSubscriber(E,this.selector,this.caught))},R}(),CatchSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.selector=G,J.caught=Y,J}return E.prototype.error=function(U){if(!this.isStopped){var G=void 0;try{G=this.selector(U,this.caught)}catch(Q){R.prototype.error.call(this,Q);return}this._unsubscribeAndRecycle();var Y=new SimpleInnerSubscriber(this);this.add(Y);var J=innerSubscribe(G,Y);J!==Y&&this.add(J)}},E}(SimpleOuterSubscriber);function combineAll(R){return function(E){return E.lift(new CombineLatestOperator(R))}}function combineLatest(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=null;return typeof R[R.length-1]=="function"&&(U=R.pop()),R.length===1&&isArray(R[0])&&(R=R[0].slice()),function(G){return G.lift.call(from$2([G].concat(R)),new CombineLatestOperator(U))}}function concat$2(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(U){return U.lift.call(concat$3.apply(void 0,[U].concat(R)))}}function concatMap(R,E){return mergeMap(R,E,1)}function concatMapTo(R,E){return concatMap(function(){return R},E)}function count(R){return function(E){return E.lift(new CountOperator(R,E))}}var CountOperator=function(){function R(E,U){this.predicate=E,this.source=U}return R.prototype.call=function(E,U){return U.subscribe(new CountSubscriber(E,this.predicate,this.source))},R}(),CountSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.predicate=G,J.source=Y,J.count=0,J.index=0,J}return E.prototype._next=function(U){this.predicate?this._tryPredicate(U):this.count++},E.prototype._tryPredicate=function(U){var G;try{G=this.predicate(U,this.index++,this.source)}catch(Y){this.destination.error(Y);return}G&&this.count++},E.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},E}(Subscriber);function debounce$2(R){return function(E){return E.lift(new DebounceOperator(R))}}var DebounceOperator=function(){function R(E){this.durationSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new DebounceSubscriber(E,this.durationSelector))},R}(),DebounceSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.durationSelector=G,Y.hasValue=!1,Y}return E.prototype._next=function(U){try{var G=this.durationSelector.call(this,U);G&&this._tryNext(U,G)}catch(Y){this.destination.error(Y)}},E.prototype._complete=function(){this.emitValue(),this.destination.complete()},E.prototype._tryNext=function(U,G){var Y=this.durationSubscription;this.value=U,this.hasValue=!0,Y&&(Y.unsubscribe(),this.remove(Y)),Y=innerSubscribe(G,new SimpleInnerSubscriber(this)),Y&&!Y.closed&&this.add(this.durationSubscription=Y)},E.prototype.notifyNext=function(){this.emitValue()},E.prototype.notifyComplete=function(){this.emitValue()},E.prototype.emitValue=function(){if(this.hasValue){var U=this.value,G=this.durationSubscription;G&&(this.durationSubscription=void 0,G.unsubscribe(),this.remove(G)),this.value=void 0,this.hasValue=!1,R.prototype._next.call(this,U)}},E}(SimpleOuterSubscriber);function debounceTime(R,E){return E===void 0&&(E=async),function(U){return U.lift(new DebounceTimeOperator(R,E))}}var DebounceTimeOperator=function(){function R(E,U){this.dueTime=E,this.scheduler=U}return R.prototype.call=function(E,U){return U.subscribe(new DebounceTimeSubscriber(E,this.dueTime,this.scheduler))},R}(),DebounceTimeSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.dueTime=G,J.scheduler=Y,J.debouncedSubscription=null,J.lastValue=null,J.hasValue=!1,J}return E.prototype._next=function(U){this.clearDebounce(),this.lastValue=U,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},E.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},E.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var U=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(U)}},E.prototype.clearDebounce=function(){var U=this.debouncedSubscription;U!==null&&(this.remove(U),U.unsubscribe(),this.debouncedSubscription=null)},E}(Subscriber);function dispatchNext$1(R){R.debouncedNext()}function defaultIfEmpty(R){return R===void 0&&(R=null),function(E){return E.lift(new DefaultIfEmptyOperator(R))}}var DefaultIfEmptyOperator=function(){function R(E){this.defaultValue=E}return R.prototype.call=function(E,U){return U.subscribe(new DefaultIfEmptySubscriber(E,this.defaultValue))},R}(),DefaultIfEmptySubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.defaultValue=G,Y.isEmpty=!0,Y}return E.prototype._next=function(U){this.isEmpty=!1,this.destination.next(U)},E.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},E}(Subscriber);function isDate(R){return R instanceof Date&&!isNaN(+R)}function delay(R,E){E===void 0&&(E=async);var U=isDate(R),G=U?+R-E.now():Math.abs(R);return function(Y){return Y.lift(new DelayOperator(G,E))}}var DelayOperator=function(){function R(E,U){this.delay=E,this.scheduler=U}return R.prototype.call=function(E,U){return U.subscribe(new DelaySubscriber(E,this.delay,this.scheduler))},R}(),DelaySubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.delay=G,J.scheduler=Y,J.queue=[],J.active=!1,J.errored=!1,J}return E.dispatch=function(U){for(var G=U.source,Y=G.queue,J=U.scheduler,Q=U.destination;Y.length>0&&Y[0].time-J.now()<=0;)Y.shift().notification.observe(Q);if(Y.length>0){var X=Math.max(0,Y[0].time-J.now());this.schedule(U,X)}else this.unsubscribe(),G.active=!1},E.prototype._schedule=function(U){this.active=!0;var G=this.destination;G.add(U.schedule(E.dispatch,this.delay,{source:this,destination:this.destination,scheduler:U}))},E.prototype.scheduleNotification=function(U){if(this.errored!==!0){var G=this.scheduler,Y=new DelayMessage(G.now()+this.delay,U);this.queue.push(Y),this.active===!1&&this._schedule(G)}},E.prototype._next=function(U){this.scheduleNotification(Notification.createNext(U))},E.prototype._error=function(U){this.errored=!0,this.queue=[],this.destination.error(U),this.unsubscribe()},E.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},E}(Subscriber),DelayMessage=function(){function R(E,U){this.time=E,this.notification=U}return R}();function delayWhen(R,E){return E?function(U){return new SubscriptionDelayObservable(U,E).lift(new DelayWhenOperator(R))}:function(U){return U.lift(new DelayWhenOperator(R))}}var DelayWhenOperator=function(){function R(E){this.delayDurationSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new DelayWhenSubscriber(E,this.delayDurationSelector))},R}(),DelayWhenSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.delayDurationSelector=G,Y.completed=!1,Y.delayNotifierSubscriptions=[],Y.index=0,Y}return E.prototype.notifyNext=function(U,G,Y,J,Q){this.destination.next(U),this.removeSubscription(Q),this.tryComplete()},E.prototype.notifyError=function(U,G){this._error(U)},E.prototype.notifyComplete=function(U){var G=this.removeSubscription(U);G&&this.destination.next(G),this.tryComplete()},E.prototype._next=function(U){var G=this.index++;try{var Y=this.delayDurationSelector(U,G);Y&&this.tryDelay(Y,U)}catch(J){this.destination.error(J)}},E.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},E.prototype.removeSubscription=function(U){U.unsubscribe();var G=this.delayNotifierSubscriptions.indexOf(U);return G!==-1&&this.delayNotifierSubscriptions.splice(G,1),U.outerValue},E.prototype.tryDelay=function(U,G){var Y=subscribeToResult(this,U,G);if(Y&&!Y.closed){var J=this.destination;J.add(Y),this.delayNotifierSubscriptions.push(Y)}},E.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},E}(OuterSubscriber),SubscriptionDelayObservable=function(R){__extends(E,R);function E(U,G){var Y=R.call(this)||this;return Y.source=U,Y.subscriptionDelay=G,Y}return E.prototype._subscribe=function(U){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(U,this.source))},E}(Observable),SubscriptionDelaySubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this)||this;return Y.parent=U,Y.source=G,Y.sourceSubscribed=!1,Y}return E.prototype._next=function(U){this.subscribeToSource()},E.prototype._error=function(U){this.unsubscribe(),this.parent.error(U)},E.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},E.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},E}(Subscriber);function dematerialize(){return function(E){return E.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new DeMaterializeSubscriber(E))},R}(),DeMaterializeSubscriber=function(R){__extends(E,R);function E(U){return R.call(this,U)||this}return E.prototype._next=function(U){U.observe(this.destination)},E}(Subscriber);function distinct(R,E){return function(U){return U.lift(new DistinctOperator(R,E))}}var DistinctOperator=function(){function R(E,U){this.keySelector=E,this.flushes=U}return R.prototype.call=function(E,U){return U.subscribe(new DistinctSubscriber(E,this.keySelector,this.flushes))},R}(),DistinctSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.keySelector=G,J.values=new Set,Y&&J.add(innerSubscribe(Y,new SimpleInnerSubscriber(J))),J}return E.prototype.notifyNext=function(){this.values.clear()},E.prototype.notifyError=function(U){this._error(U)},E.prototype._next=function(U){this.keySelector?this._useKeySelector(U):this._finalizeNext(U,U)},E.prototype._useKeySelector=function(U){var G,Y=this.destination;try{G=this.keySelector(U)}catch(J){Y.error(J);return}this._finalizeNext(G,U)},E.prototype._finalizeNext=function(U,G){var Y=this.values;Y.has(U)||(Y.add(U),this.destination.next(G))},E}(SimpleOuterSubscriber);function distinctUntilChanged(R,E){return function(U){return U.lift(new DistinctUntilChangedOperator(R,E))}}var DistinctUntilChangedOperator=function(){function R(E,U){this.compare=E,this.keySelector=U}return R.prototype.call=function(E,U){return U.subscribe(new DistinctUntilChangedSubscriber(E,this.compare,this.keySelector))},R}(),DistinctUntilChangedSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.keySelector=Y,J.hasKey=!1,typeof G=="function"&&(J.compare=G),J}return E.prototype.compare=function(U,G){return U===G},E.prototype._next=function(U){var G;try{var Y=this.keySelector;G=Y?Y(U):U}catch(X){return this.destination.error(X)}var J=!1;if(this.hasKey)try{var Q=this.compare;J=Q(this.key,G)}catch(X){return this.destination.error(X)}else this.hasKey=!0;J||(this.key=G,this.destination.next(U))},E}(Subscriber);function distinctUntilKeyChanged(R,E){return distinctUntilChanged(function(U,G){return E?E(U[R],G[R]):U[R]===G[R]})}function throwIfEmpty(R){return R===void 0&&(R=defaultErrorFactory),function(E){return E.lift(new ThrowIfEmptyOperator(R))}}var ThrowIfEmptyOperator=function(){function R(E){this.errorFactory=E}return R.prototype.call=function(E,U){return U.subscribe(new ThrowIfEmptySubscriber(E,this.errorFactory))},R}(),ThrowIfEmptySubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.errorFactory=G,Y.hasValue=!1,Y}return E.prototype._next=function(U){this.hasValue=!0,this.destination.next(U)},E.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var U=void 0;try{U=this.errorFactory()}catch(G){U=G}this.destination.error(U)},E}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(R){return function(E){return R===0?empty$1():E.lift(new TakeOperator(R))}}var TakeOperator=function(){function R(E){if(this.total=E,this.total<0)throw new ArgumentOutOfRangeError}return R.prototype.call=function(E,U){return U.subscribe(new TakeSubscriber(E,this.total))},R}(),TakeSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.total=G,Y.count=0,Y}return E.prototype._next=function(U){var G=this.total,Y=++this.count;Y<=G&&(this.destination.next(U),Y===G&&(this.destination.complete(),this.unsubscribe()))},E}(Subscriber);function elementAt(R,E){if(R<0)throw new ArgumentOutOfRangeError;var U=arguments.length>=2;return function(G){return G.pipe(filter$1(function(Y,J){return J===R}),take(1),U?defaultIfEmpty(E):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(U){return concat$3(U,of.apply(void 0,R))}}function every(R,E){return function(U){return U.lift(new EveryOperator(R,E,U))}}var EveryOperator=function(){function R(E,U,G){this.predicate=E,this.thisArg=U,this.source=G}return R.prototype.call=function(E,U){return U.subscribe(new EverySubscriber(E,this.predicate,this.thisArg,this.source))},R}(),EverySubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q.predicate=G,Q.thisArg=Y,Q.source=J,Q.index=0,Q.thisArg=Y||Q,Q}return E.prototype.notifyComplete=function(U){this.destination.next(U),this.destination.complete()},E.prototype._next=function(U){var G=!1;try{G=this.predicate.call(this.thisArg,U,this.index++,this.source)}catch(Y){this.destination.error(Y);return}G||this.notifyComplete(!1)},E.prototype._complete=function(){this.notifyComplete(!0)},E}(Subscriber);function exhaust(){return function(R){return R.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new SwitchFirstSubscriber(E))},R}(),SwitchFirstSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.hasCompleted=!1,G.hasSubscription=!1,G}return E.prototype._next=function(U){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(U,new SimpleInnerSubscriber(this))))},E.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},E.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},E}(SimpleOuterSubscriber);function exhaustMap(R,E){return E?function(U){return U.pipe(exhaustMap(function(G,Y){return from$2(R(G,Y)).pipe(map$1(function(J,Q){return E(G,J,Y,Q)}))}))}:function(U){return U.lift(new ExhaustMapOperator(R))}}var ExhaustMapOperator=function(){function R(E){this.project=E}return R.prototype.call=function(E,U){return U.subscribe(new ExhaustMapSubscriber(E,this.project))},R}(),ExhaustMapSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.project=G,Y.hasSubscription=!1,Y.hasCompleted=!1,Y.index=0,Y}return E.prototype._next=function(U){this.hasSubscription||this.tryNext(U)},E.prototype.tryNext=function(U){var G,Y=this.index++;try{G=this.project(U,Y)}catch(J){this.destination.error(J);return}this.hasSubscription=!0,this._innerSub(G)},E.prototype._innerSub=function(U){var G=new SimpleInnerSubscriber(this),Y=this.destination;Y.add(G);var J=innerSubscribe(U,G);J!==G&&Y.add(J)},E.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},E.prototype.notifyNext=function(U){this.destination.next(U)},E.prototype.notifyError=function(U){this.destination.error(U)},E.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},E}(SimpleOuterSubscriber);function expand(R,E,U){return E===void 0&&(E=Number.POSITIVE_INFINITY),E=(E||0)<1?Number.POSITIVE_INFINITY:E,function(G){return G.lift(new ExpandOperator(R,E,U))}}var ExpandOperator=function(){function R(E,U,G){this.project=E,this.concurrent=U,this.scheduler=G}return R.prototype.call=function(E,U){return U.subscribe(new ExpandSubscriber(E,this.project,this.concurrent,this.scheduler))},R}(),ExpandSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q.project=G,Q.concurrent=Y,Q.scheduler=J,Q.index=0,Q.active=0,Q.hasCompleted=!1,Y<Number.POSITIVE_INFINITY&&(Q.buffer=[]),Q}return E.dispatch=function(U){var G=U.subscriber,Y=U.result,J=U.value,Q=U.index;G.subscribeToProjection(Y,J,Q)},E.prototype._next=function(U){var G=this.destination;if(G.closed){this._complete();return}var Y=this.index++;if(this.active<this.concurrent){G.next(U);try{var J=this.project,Q=J(U,Y);if(!this.scheduler)this.subscribeToProjection(Q,U,Y);else{var X={subscriber:this,result:Q,value:U,index:Y},Z=this.destination;Z.add(this.scheduler.schedule(E.dispatch,0,X))}}catch(ee){G.error(ee)}}else this.buffer.push(U)},E.prototype.subscribeToProjection=function(U,G,Y){this.active++;var J=this.destination;J.add(innerSubscribe(U,new SimpleInnerSubscriber(this)))},E.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},E.prototype.notifyNext=function(U){this._next(U)},E.prototype.notifyComplete=function(){var U=this.buffer;this.active--,U&&U.length>0&&this._next(U.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},E}(SimpleOuterSubscriber);function finalize(R){return function(E){return E.lift(new FinallyOperator(R))}}var FinallyOperator=function(){function R(E){this.callback=E}return R.prototype.call=function(E,U){return U.subscribe(new FinallySubscriber(E,this.callback))},R}(),FinallySubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.add(new Subscription(G)),Y}return E}(Subscriber);function find$1(R,E){if(typeof R!="function")throw new TypeError("predicate is not a function");return function(U){return U.lift(new FindValueOperator(R,U,!1,E))}}var FindValueOperator=function(){function R(E,U,G,Y){this.predicate=E,this.source=U,this.yieldIndex=G,this.thisArg=Y}return R.prototype.call=function(E,U){return U.subscribe(new FindValueSubscriber(E,this.predicate,this.source,this.yieldIndex,this.thisArg))},R}(),FindValueSubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;return X.predicate=G,X.source=Y,X.yieldIndex=J,X.thisArg=Q,X.index=0,X}return E.prototype.notifyComplete=function(U){var G=this.destination;G.next(U),G.complete(),this.unsubscribe()},E.prototype._next=function(U){var G=this,Y=G.predicate,J=G.thisArg,Q=this.index++;try{var X=Y.call(J||this,U,Q,this.source);X&&this.notifyComplete(this.yieldIndex?Q:U)}catch(Z){this.destination.error(Z)}},E.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},E}(Subscriber);function findIndex(R,E){return function(U){return U.lift(new FindValueOperator(R,U,!0,E))}}function first$2(R,E){var U=arguments.length>=2;return function(G){return G.pipe(R?filter$1(function(Y,J){return R(Y,J,G)}):identity$3,take(1),U?defaultIfEmpty(E):throwIfEmpty(function(){return new EmptyError}))}}function ignoreElements(){return function(E){return E.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new IgnoreElementsSubscriber(E))},R}(),IgnoreElementsSubscriber=function(R){__extends(E,R);function E(){return R!==null&&R.apply(this,arguments)||this}return E.prototype._next=function(U){},E}(Subscriber);function isEmpty(){return function(R){return R.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new IsEmptySubscriber(E))},R}(),IsEmptySubscriber=function(R){__extends(E,R);function E(U){return R.call(this,U)||this}return E.prototype.notifyComplete=function(U){var G=this.destination;G.next(U),G.complete()},E.prototype._next=function(U){this.notifyComplete(!1)},E.prototype._complete=function(){this.notifyComplete(!0)},E}(Subscriber);function takeLast(R){return function(U){return R===0?empty$1():U.lift(new TakeLastOperator(R))}}var TakeLastOperator=function(){function R(E){if(this.total=E,this.total<0)throw new ArgumentOutOfRangeError}return R.prototype.call=function(E,U){return U.subscribe(new TakeLastSubscriber(E,this.total))},R}(),TakeLastSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.total=G,Y.ring=new Array,Y.count=0,Y}return E.prototype._next=function(U){var G=this.ring,Y=this.total,J=this.count++;if(G.length<Y)G.push(U);else{var Q=J%Y;G[Q]=U}},E.prototype._complete=function(){var U=this.destination,G=this.count;if(G>0)for(var Y=this.count>=this.total?this.total:this.count,J=this.ring,Q=0;Q<Y;Q++){var X=G++%Y;U.next(J[X])}U.complete()},E}(Subscriber);function last$1(R,E){var U=arguments.length>=2;return function(G){return G.pipe(R?filter$1(function(Y,J){return R(Y,J,G)}):identity$3,takeLast(1),U?defaultIfEmpty(E):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(R){return function(E){return E.lift(new MapToOperator(R))}}var MapToOperator=function(){function R(E){this.value=E}return R.prototype.call=function(E,U){return U.subscribe(new MapToSubscriber(E,this.value))},R}(),MapToSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.value=G,Y}return E.prototype._next=function(U){this.destination.next(this.value)},E}(Subscriber);function materialize(){return function(E){return E.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new MaterializeSubscriber(E))},R}(),MaterializeSubscriber=function(R){__extends(E,R);function E(U){return R.call(this,U)||this}return E.prototype._next=function(U){this.destination.next(Notification.createNext(U))},E.prototype._error=function(U){var G=this.destination;G.next(Notification.createError(U)),G.complete()},E.prototype._complete=function(){var U=this.destination;U.next(Notification.createComplete()),U.complete()},E}(Subscriber);function scan(R,E){var U=!1;return arguments.length>=2&&(U=!0),function(Y){return Y.lift(new ScanOperator(R,E,U))}}var ScanOperator=function(){function R(E,U,G){G===void 0&&(G=!1),this.accumulator=E,this.seed=U,this.hasSeed=G}return R.prototype.call=function(E,U){return U.subscribe(new ScanSubscriber(E,this.accumulator,this.seed,this.hasSeed))},R}(),ScanSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q.accumulator=G,Q._seed=Y,Q.hasSeed=J,Q.index=0,Q}return Object.defineProperty(E.prototype,"seed",{get:function(){return this._seed},set:function(U){this.hasSeed=!0,this._seed=U},enumerable:!0,configurable:!0}),E.prototype._next=function(U){if(!this.hasSeed)this.seed=U,this.destination.next(U);else return this._tryNext(U)},E.prototype._tryNext=function(U){var G=this.index++,Y;try{Y=this.accumulator(this.seed,U,G)}catch(J){this.destination.error(J)}this.seed=Y,this.destination.next(Y)},E}(Subscriber);function reduce(R,E){return arguments.length>=2?function(G){return pipe(scan(R,E),takeLast(1),defaultIfEmpty(E))(G)}:function(G){return pipe(scan(function(Y,J,Q){return R(Y,J,Q+1)}),takeLast(1))(G)}}function max$1(R){var E=typeof R=="function"?function(U,G){return R(U,G)>0?U:G}:function(U,G){return U>G?U:G};return reduce(E)}function merge$3(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(U){return U.lift.call(merge$4.apply(void 0,[U].concat(R)))}}function mergeMapTo(R,E,U){return U===void 0&&(U=Number.POSITIVE_INFINITY),typeof E=="function"?mergeMap(function(){return R},E,U):(typeof E=="number"&&(U=E),mergeMap(function(){return R},U))}function mergeScan(R,E,U){return U===void 0&&(U=Number.POSITIVE_INFINITY),function(G){return G.lift(new MergeScanOperator(R,E,U))}}var MergeScanOperator=function(){function R(E,U,G){this.accumulator=E,this.seed=U,this.concurrent=G}return R.prototype.call=function(E,U){return U.subscribe(new MergeScanSubscriber(E,this.accumulator,this.seed,this.concurrent))},R}(),MergeScanSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q.accumulator=G,Q.acc=Y,Q.concurrent=J,Q.hasValue=!1,Q.hasCompleted=!1,Q.buffer=[],Q.active=0,Q.index=0,Q}return E.prototype._next=function(U){if(this.active<this.concurrent){var G=this.index++,Y=this.destination,J=void 0;try{var Q=this.accumulator;J=Q(this.acc,U,G)}catch(X){return Y.error(X)}this.active++,this._innerSub(J)}else this.buffer.push(U)},E.prototype._innerSub=function(U){var G=new SimpleInnerSubscriber(this),Y=this.destination;Y.add(G);var J=innerSubscribe(U,G);J!==G&&Y.add(J)},E.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},E.prototype.notifyNext=function(U){var G=this.destination;this.acc=U,this.hasValue=!0,G.next(U)},E.prototype.notifyComplete=function(){var U=this.buffer;this.active--,U.length>0?this._next(U.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},E}(SimpleOuterSubscriber);function min$1(R){var E=typeof R=="function"?function(U,G){return R(U,G)<0?U:G}:function(U,G){return U<G?U:G};return reduce(E)}function multicast(R,E){return function(G){var Y;if(typeof R=="function"?Y=R:Y=function(){return R},typeof E=="function")return G.lift(new MulticastOperator(Y,E));var J=Object.create(G,connectableObservableDescriptor);return J.source=G,J.subjectFactory=Y,J}}var MulticastOperator=function(){function R(E,U){this.subjectFactory=E,this.selector=U}return R.prototype.call=function(E,U){var G=this.selector,Y=this.subjectFactory(),J=G(Y).subscribe(E);return J.add(U.subscribe(Y)),J},R}();function onErrorResumeNext(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return R.length===1&&isArray(R[0])&&(R=R[0]),function(U){return U.lift(new OnErrorResumeNextOperator(R))}}var OnErrorResumeNextOperator=function(){function R(E){this.nextSources=E}return R.prototype.call=function(E,U){return U.subscribe(new OnErrorResumeNextSubscriber(E,this.nextSources))},R}(),OnErrorResumeNextSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.destination=U,Y.nextSources=G,Y}return E.prototype.notifyError=function(){this.subscribeToNextSource()},E.prototype.notifyComplete=function(){this.subscribeToNextSource()},E.prototype._error=function(U){this.subscribeToNextSource(),this.unsubscribe()},E.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},E.prototype.subscribeToNextSource=function(){var U=this.nextSources.shift();if(U){var G=new SimpleInnerSubscriber(this),Y=this.destination;Y.add(G);var J=innerSubscribe(U,G);J!==G&&Y.add(J)}else this.destination.complete()},E}(SimpleOuterSubscriber);function pairwise(){return function(R){return R.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function R(){}return R.prototype.call=function(E,U){return U.subscribe(new PairwiseSubscriber(E))},R}(),PairwiseSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.hasPrev=!1,G}return E.prototype._next=function(U){var G;this.hasPrev?G=[this.prev,U]:this.hasPrev=!0,this.prev=U,G&&this.destination.next(G)},E}(Subscriber);function partition(R,E){return function(U){return[filter$1(R,E)(U),filter$1(not(R,E))(U)]}}function pluck(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=R.length;if(U===0)throw new Error("list of properties cannot be empty.");return function(G){return map$1(plucker(R,U))(G)}}function plucker(R,E){var U=function(G){for(var Y=G,J=0;J<E;J++){var Q=Y!=null?Y[R[J]]:void 0;if(Q!==void 0)Y=Q;else return}return Y};return U}function publish(R){return R?multicast(function(){return new Subject},R):multicast(new Subject)}function publishBehavior(R){return function(E){return multicast(new BehaviorSubject(R))(E)}}function publishLast(){return function(R){return multicast(new AsyncSubject)(R)}}function publishReplay(R,E,U,G){U&&typeof U!="function"&&(G=U);var Y=typeof U=="function"?U:void 0,J=new ReplaySubject(R,E,G);return function(Q){return multicast(function(){return J},Y)(Q)}}function race(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(G){return R.length===1&&isArray(R[0])&&(R=R[0]),G.lift.call(race$1.apply(void 0,[G].concat(R)))}}function repeat(R){return R===void 0&&(R=-1),function(E){return R===0?empty$1():R<0?E.lift(new RepeatOperator(-1,E)):E.lift(new RepeatOperator(R-1,E))}}var RepeatOperator=function(){function R(E,U){this.count=E,this.source=U}return R.prototype.call=function(E,U){return U.subscribe(new RepeatSubscriber(E,this.count,this.source))},R}(),RepeatSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.count=G,J.source=Y,J}return E.prototype.complete=function(){if(!this.isStopped){var U=this,G=U.source,Y=U.count;if(Y===0)return R.prototype.complete.call(this);Y>-1&&(this.count=Y-1),G.subscribe(this._unsubscribeAndRecycle())}},E}(Subscriber);function repeatWhen(R){return function(E){return E.lift(new RepeatWhenOperator(R))}}var RepeatWhenOperator=function(){function R(E){this.notifier=E}return R.prototype.call=function(E,U){return U.subscribe(new RepeatWhenSubscriber(E,this.notifier,U))},R}(),RepeatWhenSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.notifier=G,J.source=Y,J.sourceIsBeingSubscribedTo=!0,J}return E.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},E.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return R.prototype.complete.call(this)},E.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return R.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},E.prototype._unsubscribe=function(){var U=this,G=U.notifications,Y=U.retriesSubscription;G&&(G.unsubscribe(),this.notifications=void 0),Y&&(Y.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},E.prototype._unsubscribeAndRecycle=function(){var U=this._unsubscribe;return this._unsubscribe=null,R.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=U,this},E.prototype.subscribeToRetries=function(){this.notifications=new Subject;var U;try{var G=this.notifier;U=G(this.notifications)}catch{return R.prototype.complete.call(this)}this.retries=U,this.retriesSubscription=innerSubscribe(U,new SimpleInnerSubscriber(this))},E}(SimpleOuterSubscriber);function retry(R){return R===void 0&&(R=-1),function(E){return E.lift(new RetryOperator(R,E))}}var RetryOperator=function(){function R(E,U){this.count=E,this.source=U}return R.prototype.call=function(E,U){return U.subscribe(new RetrySubscriber(E,this.count,this.source))},R}(),RetrySubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.count=G,J.source=Y,J}return E.prototype.error=function(U){if(!this.isStopped){var G=this,Y=G.source,J=G.count;if(J===0)return R.prototype.error.call(this,U);J>-1&&(this.count=J-1),Y.subscribe(this._unsubscribeAndRecycle())}},E}(Subscriber);function retryWhen(R){return function(E){return E.lift(new RetryWhenOperator(R,E))}}var RetryWhenOperator=function(){function R(E,U){this.notifier=E,this.source=U}return R.prototype.call=function(E,U){return U.subscribe(new RetryWhenSubscriber(E,this.notifier,this.source))},R}(),RetryWhenSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.notifier=G,J.source=Y,J}return E.prototype.error=function(U){if(!this.isStopped){var G=this.errors,Y=this.retries,J=this.retriesSubscription;if(Y)this.errors=void 0,this.retriesSubscription=void 0;else{G=new Subject;try{var Q=this.notifier;Y=Q(G)}catch(X){return R.prototype.error.call(this,X)}J=innerSubscribe(Y,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=G,this.retries=Y,this.retriesSubscription=J,G.next(U)}},E.prototype._unsubscribe=function(){var U=this,G=U.errors,Y=U.retriesSubscription;G&&(G.unsubscribe(),this.errors=void 0),Y&&(Y.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},E.prototype.notifyNext=function(){var U=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=U,this.source.subscribe(this)},E}(SimpleOuterSubscriber);function sample$1(R){return function(E){return E.lift(new SampleOperator(R))}}var SampleOperator=function(){function R(E){this.notifier=E}return R.prototype.call=function(E,U){var G=new SampleSubscriber(E),Y=U.subscribe(G);return Y.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(G))),Y},R}(),SampleSubscriber=function(R){__extends(E,R);function E(){var U=R!==null&&R.apply(this,arguments)||this;return U.hasValue=!1,U}return E.prototype._next=function(U){this.value=U,this.hasValue=!0},E.prototype.notifyNext=function(){this.emitValue()},E.prototype.notifyComplete=function(){this.emitValue()},E.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},E}(SimpleOuterSubscriber);function sampleTime(R,E){return E===void 0&&(E=async),function(U){return U.lift(new SampleTimeOperator(R,E))}}var SampleTimeOperator=function(){function R(E,U){this.period=E,this.scheduler=U}return R.prototype.call=function(E,U){return U.subscribe(new SampleTimeSubscriber(E,this.period,this.scheduler))},R}(),SampleTimeSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.period=G,J.scheduler=Y,J.hasValue=!1,J.add(Y.schedule(dispatchNotification,G,{subscriber:J,period:G})),J}return E.prototype._next=function(U){this.lastValue=U,this.hasValue=!0},E.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},E}(Subscriber);function dispatchNotification(R){var E=R.subscriber,U=R.period;E.notifyNext(),this.schedule(R,U)}function sequenceEqual(R,E){return function(U){return U.lift(new SequenceEqualOperator(R,E))}}var SequenceEqualOperator=function(){function R(E,U){this.compareTo=E,this.comparator=U}return R.prototype.call=function(E,U){return U.subscribe(new SequenceEqualSubscriber(E,this.compareTo,this.comparator))},R}(),SequenceEqualSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.compareTo=G,J.comparator=Y,J._a=[],J._b=[],J._oneComplete=!1,J.destination.add(G.subscribe(new SequenceEqualCompareToSubscriber(U,J))),J}return E.prototype._next=function(U){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(U),this.checkValues())},E.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},E.prototype.checkValues=function(){for(var U=this,G=U._a,Y=U._b,J=U.comparator;G.length>0&&Y.length>0;){var Q=G.shift(),X=Y.shift(),Z=!1;try{Z=J?J(Q,X):Q===X}catch(ee){this.destination.error(ee)}Z||this.emit(!1)}},E.prototype.emit=function(U){var G=this.destination;G.next(U),G.complete()},E.prototype.nextB=function(U){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(U),this.checkValues())},E.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},E}(Subscriber),SequenceEqualCompareToSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.parent=G,Y}return E.prototype._next=function(U){this.parent.nextB(U)},E.prototype._error=function(U){this.parent.error(U),this.unsubscribe()},E.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},E}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(R){return refCount()(multicast(shareSubjectFactory)(R))}}function shareReplay(R,E,U){var G;return R&&typeof R=="object"?G=R:G={bufferSize:R,windowTime:E,refCount:!1,scheduler:U},function(Y){return Y.lift(shareReplayOperator(G))}}function shareReplayOperator(R){var E=R.bufferSize,U=E===void 0?Number.POSITIVE_INFINITY:E,G=R.windowTime,Y=G===void 0?Number.POSITIVE_INFINITY:G,J=R.refCount,Q=R.scheduler,X,Z=0,ee,te=!1,ne=!1;return function(ce){Z++;var pe;!X||te?(te=!1,X=new ReplaySubject(U,Y,Q),pe=X.subscribe(this),ee=ce.subscribe({next:function(ye){X.next(ye)},error:function(ye){te=!0,X.error(ye)},complete:function(){ne=!0,ee=void 0,X.complete()}}),ne&&(ee=void 0)):pe=X.subscribe(this),this.add(function(){Z--,pe.unsubscribe(),pe=void 0,ee&&!ne&&J&&Z===0&&(ee.unsubscribe(),ee=void 0,X=void 0)})}}function single(R){return function(E){return E.lift(new SingleOperator(R,E))}}var SingleOperator=function(){function R(E,U){this.predicate=E,this.source=U}return R.prototype.call=function(E,U){return U.subscribe(new SingleSubscriber(E,this.predicate,this.source))},R}(),SingleSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.predicate=G,J.source=Y,J.seenValue=!1,J.index=0,J}return E.prototype.applySingleValue=function(U){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=U)},E.prototype._next=function(U){var G=this.index++;this.predicate?this.tryNext(U,G):this.applySingleValue(U)},E.prototype.tryNext=function(U,G){try{this.predicate(U,G,this.source)&&this.applySingleValue(U)}catch(Y){this.destination.error(Y)}},E.prototype._complete=function(){var U=this.destination;this.index>0?(U.next(this.seenValue?this.singleValue:void 0),U.complete()):U.error(new EmptyError)},E}(Subscriber);function skip(R){return function(E){return E.lift(new SkipOperator(R))}}var SkipOperator=function(){function R(E){this.total=E}return R.prototype.call=function(E,U){return U.subscribe(new SkipSubscriber(E,this.total))},R}(),SkipSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.total=G,Y.count=0,Y}return E.prototype._next=function(U){++this.count>this.total&&this.destination.next(U)},E}(Subscriber);function skipLast(R){return function(E){return E.lift(new SkipLastOperator(R))}}var SkipLastOperator=function(){function R(E){if(this._skipCount=E,this._skipCount<0)throw new ArgumentOutOfRangeError}return R.prototype.call=function(E,U){return this._skipCount===0?U.subscribe(new Subscriber(E)):U.subscribe(new SkipLastSubscriber(E,this._skipCount))},R}(),SkipLastSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y._skipCount=G,Y._count=0,Y._ring=new Array(G),Y}return E.prototype._next=function(U){var G=this._skipCount,Y=this._count++;if(Y<G)this._ring[Y]=U;else{var J=Y%G,Q=this._ring,X=Q[J];Q[J]=U,this.destination.next(X)}},E}(Subscriber);function skipUntil(R){return function(E){return E.lift(new SkipUntilOperator(R))}}var SkipUntilOperator=function(){function R(E){this.notifier=E}return R.prototype.call=function(E,U){return U.subscribe(new SkipUntilSubscriber(E,this.notifier))},R}(),SkipUntilSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;Y.hasValue=!1;var J=new SimpleInnerSubscriber(Y);Y.add(J),Y.innerSubscription=J;var Q=innerSubscribe(G,J);return Q!==J&&(Y.add(Q),Y.innerSubscription=Q),Y}return E.prototype._next=function(U){this.hasValue&&R.prototype._next.call(this,U)},E.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},E.prototype.notifyComplete=function(){},E}(SimpleOuterSubscriber);function skipWhile(R){return function(E){return E.lift(new SkipWhileOperator(R))}}var SkipWhileOperator=function(){function R(E){this.predicate=E}return R.prototype.call=function(E,U){return U.subscribe(new SkipWhileSubscriber(E,this.predicate))},R}(),SkipWhileSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.predicate=G,Y.skipping=!0,Y.index=0,Y}return E.prototype._next=function(U){var G=this.destination;this.skipping&&this.tryCallPredicate(U),this.skipping||G.next(U)},E.prototype.tryCallPredicate=function(U){try{var G=this.predicate(U,this.index++);this.skipping=Boolean(G)}catch(Y){this.destination.error(Y)}},E}(Subscriber);function startWith(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];var U=R[R.length-1];return isScheduler(U)?(R.pop(),function(G){return concat$3(R,G,U)}):function(G){return concat$3(R,G)}}var SubscribeOnObservable=function(R){__extends(E,R);function E(U,G,Y){G===void 0&&(G=0),Y===void 0&&(Y=asap);var J=R.call(this)||this;return J.source=U,J.delayTime=G,J.scheduler=Y,(!isNumeric(G)||G<0)&&(J.delayTime=0),(!Y||typeof Y.schedule!="function")&&(J.scheduler=asap),J}return E.create=function(U,G,Y){return G===void 0&&(G=0),Y===void 0&&(Y=asap),new E(U,G,Y)},E.dispatch=function(U){var G=U.source,Y=U.subscriber;return this.add(G.subscribe(Y))},E.prototype._subscribe=function(U){var G=this.delayTime,Y=this.source,J=this.scheduler;return J.schedule(E.dispatch,G,{source:Y,subscriber:U})},E}(Observable);function subscribeOn(R,E){return E===void 0&&(E=0),function(G){return G.lift(new SubscribeOnOperator(R,E))}}var SubscribeOnOperator=function(){function R(E,U){this.scheduler=E,this.delay=U}return R.prototype.call=function(E,U){return new SubscribeOnObservable(U,this.delay,this.scheduler).subscribe(E)},R}();function switchMap(R,E){return typeof E=="function"?function(U){return U.pipe(switchMap(function(G,Y){return from$2(R(G,Y)).pipe(map$1(function(J,Q){return E(G,J,Y,Q)}))}))}:function(U){return U.lift(new SwitchMapOperator(R))}}var SwitchMapOperator=function(){function R(E){this.project=E}return R.prototype.call=function(E,U){return U.subscribe(new SwitchMapSubscriber(E,this.project))},R}(),SwitchMapSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.project=G,Y.index=0,Y}return E.prototype._next=function(U){var G,Y=this.index++;try{G=this.project(U,Y)}catch(J){this.destination.error(J);return}this._innerSub(G)},E.prototype._innerSub=function(U){var G=this.innerSubscription;G&&G.unsubscribe();var Y=new SimpleInnerSubscriber(this),J=this.destination;J.add(Y),this.innerSubscription=innerSubscribe(U,Y),this.innerSubscription!==Y&&J.add(this.innerSubscription)},E.prototype._complete=function(){var U=this.innerSubscription;(!U||U.closed)&&R.prototype._complete.call(this),this.unsubscribe()},E.prototype._unsubscribe=function(){this.innerSubscription=void 0},E.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&R.prototype._complete.call(this)},E.prototype.notifyNext=function(U){this.destination.next(U)},E}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity$3)}function switchMapTo(R,E){return E?switchMap(function(){return R},E):switchMap(function(){return R})}function takeUntil(R){return function(E){return E.lift(new TakeUntilOperator(R))}}var TakeUntilOperator=function(){function R(E){this.notifier=E}return R.prototype.call=function(E,U){var G=new TakeUntilSubscriber(E),Y=innerSubscribe(this.notifier,new SimpleInnerSubscriber(G));return Y&&!G.seenValue?(G.add(Y),U.subscribe(G)):G},R}(),TakeUntilSubscriber=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.seenValue=!1,G}return E.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},E.prototype.notifyComplete=function(){},E}(SimpleOuterSubscriber);function takeWhile(R,E){return E===void 0&&(E=!1),function(U){return U.lift(new TakeWhileOperator(R,E))}}var TakeWhileOperator=function(){function R(E,U){this.predicate=E,this.inclusive=U}return R.prototype.call=function(E,U){return U.subscribe(new TakeWhileSubscriber(E,this.predicate,this.inclusive))},R}(),TakeWhileSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.predicate=G,J.inclusive=Y,J.index=0,J}return E.prototype._next=function(U){var G=this.destination,Y;try{Y=this.predicate(U,this.index++)}catch(J){G.error(J);return}this.nextOrComplete(U,Y)},E.prototype.nextOrComplete=function(U,G){var Y=this.destination;Boolean(G)?Y.next(U):(this.inclusive&&Y.next(U),Y.complete())},E}(Subscriber);function tap(R,E,U){return function(Y){return Y.lift(new DoOperator(R,E,U))}}var DoOperator=function(){function R(E,U,G){this.nextOrObserver=E,this.error=U,this.complete=G}return R.prototype.call=function(E,U){return U.subscribe(new TapSubscriber(E,this.nextOrObserver,this.error,this.complete))},R}(),TapSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q._tapNext=noop$1,Q._tapError=noop$1,Q._tapComplete=noop$1,Q._tapError=Y||noop$1,Q._tapComplete=J||noop$1,isFunction$1(G)?(Q._context=Q,Q._tapNext=G):G&&(Q._context=G,Q._tapNext=G.next||noop$1,Q._tapError=G.error||noop$1,Q._tapComplete=G.complete||noop$1),Q}return E.prototype._next=function(U){try{this._tapNext.call(this._context,U)}catch(G){this.destination.error(G);return}this.destination.next(U)},E.prototype._error=function(U){try{this._tapError.call(this._context,U)}catch(G){this.destination.error(G);return}this.destination.error(U)},E.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(U){this.destination.error(U);return}return this.destination.complete()},E}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle$1(R,E){return E===void 0&&(E=defaultThrottleConfig),function(U){return U.lift(new ThrottleOperator(R,!!E.leading,!!E.trailing))}}var ThrottleOperator=function(){function R(E,U,G){this.durationSelector=E,this.leading=U,this.trailing=G}return R.prototype.call=function(E,U){return U.subscribe(new ThrottleSubscriber(E,this.durationSelector,this.leading,this.trailing))},R}(),ThrottleSubscriber=function(R){__extends(E,R);function E(U,G,Y,J){var Q=R.call(this,U)||this;return Q.destination=U,Q.durationSelector=G,Q._leading=Y,Q._trailing=J,Q._hasValue=!1,Q}return E.prototype._next=function(U){this._hasValue=!0,this._sendValue=U,this._throttled||(this._leading?this.send():this.throttle(U))},E.prototype.send=function(){var U=this,G=U._hasValue,Y=U._sendValue;G&&(this.destination.next(Y),this.throttle(Y)),this._hasValue=!1,this._sendValue=void 0},E.prototype.throttle=function(U){var G=this.tryDurationSelector(U);G&&this.add(this._throttled=innerSubscribe(G,new SimpleInnerSubscriber(this)))},E.prototype.tryDurationSelector=function(U){try{return this.durationSelector(U)}catch(G){return this.destination.error(G),null}},E.prototype.throttlingDone=function(){var U=this,G=U._throttled,Y=U._trailing;G&&G.unsubscribe(),this._throttled=void 0,Y&&this.send()},E.prototype.notifyNext=function(){this.throttlingDone()},E.prototype.notifyComplete=function(){this.throttlingDone()},E}(SimpleOuterSubscriber);function throttleTime(R,E,U){return E===void 0&&(E=async),U===void 0&&(U=defaultThrottleConfig),function(G){return G.lift(new ThrottleTimeOperator(R,E,U.leading,U.trailing))}}var ThrottleTimeOperator=function(){function R(E,U,G,Y){this.duration=E,this.scheduler=U,this.leading=G,this.trailing=Y}return R.prototype.call=function(E,U){return U.subscribe(new ThrottleTimeSubscriber(E,this.duration,this.scheduler,this.leading,this.trailing))},R}(),ThrottleTimeSubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;return X.duration=G,X.scheduler=Y,X.leading=J,X.trailing=Q,X._hasTrailingValue=!1,X._trailingValue=null,X}return E.prototype._next=function(U){this.throttled?this.trailing&&(this._trailingValue=U,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(U):this.trailing&&(this._trailingValue=U,this._hasTrailingValue=!0))},E.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},E.prototype.clearThrottle=function(){var U=this.throttled;U&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),U.unsubscribe(),this.remove(U),this.throttled=null)},E}(Subscriber);function dispatchNext(R){var E=R.subscriber;E.clearThrottle()}function timeInterval(R){return R===void 0&&(R=async),function(E){return defer(function(){return E.pipe(scan(function(U,G){var Y=U.current;return{value:G,current:R.now(),last:Y}},{current:R.now(),value:void 0,last:void 0}),map$1(function(U){var G=U.current,Y=U.last,J=U.value;return new TimeInterval(J,G-Y)}))})}}var TimeInterval=function(){function R(E,U){this.value=E,this.interval=U}return R}();function timeoutWith(R,E,U){return U===void 0&&(U=async),function(G){var Y=isDate(R),J=Y?+R-U.now():Math.abs(R);return G.lift(new TimeoutWithOperator(J,Y,E,U))}}var TimeoutWithOperator=function(){function R(E,U,G,Y){this.waitFor=E,this.absoluteTimeout=U,this.withObservable=G,this.scheduler=Y}return R.prototype.call=function(E,U){return U.subscribe(new TimeoutWithSubscriber(E,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},R}(),TimeoutWithSubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;return X.absoluteTimeout=G,X.waitFor=Y,X.withObservable=J,X.scheduler=Q,X.scheduleTimeout(),X}return E.dispatchTimeout=function(U){var G=U.withObservable;U._unsubscribeAndRecycle(),U.add(innerSubscribe(G,new SimpleInnerSubscriber(U)))},E.prototype.scheduleTimeout=function(){var U=this.action;U?this.action=U.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(E.dispatchTimeout,this.waitFor,this))},E.prototype._next=function(U){this.absoluteTimeout||this.scheduleTimeout(),R.prototype._next.call(this,U)},E.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},E}(SimpleOuterSubscriber);function timeout$1(R,E){return E===void 0&&(E=async),timeoutWith(R,throwError(new TimeoutError$3),E)}function timestamp(R){return R===void 0&&(R=async),map$1(function(E){return new Timestamp(E,R.now())})}var Timestamp=function(){function R(E,U){this.value=E,this.timestamp=U}return R}();function toArrayReducer(R,E,U){return U===0?[E]:(R.push(E),R)}function toArray(){return reduce(toArrayReducer,[])}function window$1(R){return function(U){return U.lift(new WindowOperator$1(R))}}var WindowOperator$1=function(){function R(E){this.windowBoundaries=E}return R.prototype.call=function(E,U){var G=new WindowSubscriber$1(E),Y=U.subscribe(G);return Y.closed||G.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(G))),Y},R}(),WindowSubscriber$1=function(R){__extends(E,R);function E(U){var G=R.call(this,U)||this;return G.window=new Subject,U.next(G.window),G}return E.prototype.notifyNext=function(){this.openWindow()},E.prototype.notifyError=function(U){this._error(U)},E.prototype.notifyComplete=function(){this._complete()},E.prototype._next=function(U){this.window.next(U)},E.prototype._error=function(U){this.window.error(U),this.destination.error(U)},E.prototype._complete=function(){this.window.complete(),this.destination.complete()},E.prototype._unsubscribe=function(){this.window=null},E.prototype.openWindow=function(){var U=this.window;U&&U.complete();var G=this.destination,Y=this.window=new Subject;G.next(Y)},E}(SimpleOuterSubscriber);function windowCount(R,E){return E===void 0&&(E=0),function(G){return G.lift(new WindowCountOperator(R,E))}}var WindowCountOperator=function(){function R(E,U){this.windowSize=E,this.startWindowEvery=U}return R.prototype.call=function(E,U){return U.subscribe(new WindowCountSubscriber(E,this.windowSize,this.startWindowEvery))},R}(),WindowCountSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.destination=U,J.windowSize=G,J.startWindowEvery=Y,J.windows=[new Subject],J.count=0,U.next(J.windows[0]),J}return E.prototype._next=function(U){for(var G=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,Y=this.destination,J=this.windowSize,Q=this.windows,X=Q.length,Z=0;Z<X&&!this.closed;Z++)Q[Z].next(U);var ee=this.count-J+1;if(ee>=0&&ee%G===0&&!this.closed&&Q.shift().complete(),++this.count%G===0&&!this.closed){var te=new Subject;Q.push(te),Y.next(te)}},E.prototype._error=function(U){var G=this.windows;if(G)for(;G.length>0&&!this.closed;)G.shift().error(U);this.destination.error(U)},E.prototype._complete=function(){var U=this.windows;if(U)for(;U.length>0&&!this.closed;)U.shift().complete();this.destination.complete()},E.prototype._unsubscribe=function(){this.count=0,this.windows=null},E}(Subscriber);function windowTime(R){var E=async,U=null,G=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(E=arguments[3]),isScheduler(arguments[2])?E=arguments[2]:isNumeric(arguments[2])&&(G=Number(arguments[2])),isScheduler(arguments[1])?E=arguments[1]:isNumeric(arguments[1])&&(U=Number(arguments[1])),function(J){return J.lift(new WindowTimeOperator(R,U,G,E))}}var WindowTimeOperator=function(){function R(E,U,G,Y){this.windowTimeSpan=E,this.windowCreationInterval=U,this.maxWindowSize=G,this.scheduler=Y}return R.prototype.call=function(E,U){return U.subscribe(new WindowTimeSubscriber(E,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},R}(),CountedSubject=function(R){__extends(E,R);function E(){var U=R!==null&&R.apply(this,arguments)||this;return U._numberOfNextedValues=0,U}return E.prototype.next=function(U){this._numberOfNextedValues++,R.prototype.next.call(this,U)},Object.defineProperty(E.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),E}(Subject),WindowTimeSubscriber=function(R){__extends(E,R);function E(U,G,Y,J,Q){var X=R.call(this,U)||this;X.destination=U,X.windowTimeSpan=G,X.windowCreationInterval=Y,X.maxWindowSize=J,X.scheduler=Q,X.windows=[];var Z=X.openWindow();if(Y!==null&&Y>=0){var ee={subscriber:X,window:Z,context:null},te={windowTimeSpan:G,windowCreationInterval:Y,subscriber:X,scheduler:Q};X.add(Q.schedule(dispatchWindowClose,G,ee)),X.add(Q.schedule(dispatchWindowCreation,Y,te))}else{var ne={subscriber:X,window:Z,windowTimeSpan:G};X.add(Q.schedule(dispatchWindowTimeSpanOnly,G,ne))}return X}return E.prototype._next=function(U){for(var G=this.windows,Y=G.length,J=0;J<Y;J++){var Q=G[J];Q.closed||(Q.next(U),Q.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(Q))}},E.prototype._error=function(U){for(var G=this.windows;G.length>0;)G.shift().error(U);this.destination.error(U)},E.prototype._complete=function(){for(var U=this.windows;U.length>0;){var G=U.shift();G.closed||G.complete()}this.destination.complete()},E.prototype.openWindow=function(){var U=new CountedSubject;this.windows.push(U);var G=this.destination;return G.next(U),U},E.prototype.closeWindow=function(U){U.complete();var G=this.windows;G.splice(G.indexOf(U),1)},E}(Subscriber);function dispatchWindowTimeSpanOnly(R){var E=R.subscriber,U=R.windowTimeSpan,G=R.window;G&&E.closeWindow(G),R.window=E.openWindow(),this.schedule(R,U)}function dispatchWindowCreation(R){var E=R.windowTimeSpan,U=R.subscriber,G=R.scheduler,Y=R.windowCreationInterval,J=U.openWindow(),Q=this,X={action:Q,subscription:null},Z={subscriber:U,window:J,context:X};X.subscription=G.schedule(dispatchWindowClose,E,Z),Q.add(X.subscription),Q.schedule(R,Y)}function dispatchWindowClose(R){var E=R.subscriber,U=R.window,G=R.context;G&&G.action&&G.subscription&&G.action.remove(G.subscription),E.closeWindow(U)}function windowToggle(R,E){return function(U){return U.lift(new WindowToggleOperator(R,E))}}var WindowToggleOperator=function(){function R(E,U){this.openings=E,this.closingSelector=U}return R.prototype.call=function(E,U){return U.subscribe(new WindowToggleSubscriber(E,this.openings,this.closingSelector))},R}(),WindowToggleSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;return J.openings=G,J.closingSelector=Y,J.contexts=[],J.add(J.openSubscription=subscribeToResult(J,G,G)),J}return E.prototype._next=function(U){var G=this.contexts;if(G)for(var Y=G.length,J=0;J<Y;J++)G[J].window.next(U)},E.prototype._error=function(U){var G=this.contexts;if(this.contexts=null,G)for(var Y=G.length,J=-1;++J<Y;){var Q=G[J];Q.window.error(U),Q.subscription.unsubscribe()}R.prototype._error.call(this,U)},E.prototype._complete=function(){var U=this.contexts;if(this.contexts=null,U)for(var G=U.length,Y=-1;++Y<G;){var J=U[Y];J.window.complete(),J.subscription.unsubscribe()}R.prototype._complete.call(this)},E.prototype._unsubscribe=function(){var U=this.contexts;if(this.contexts=null,U)for(var G=U.length,Y=-1;++Y<G;){var J=U[Y];J.window.unsubscribe(),J.subscription.unsubscribe()}},E.prototype.notifyNext=function(U,G,Y,J,Q){if(U===this.openings){var X=void 0;try{var Z=this.closingSelector;X=Z(G)}catch(ce){return this.error(ce)}var ee=new Subject,te=new Subscription,ne={window:ee,subscription:te};this.contexts.push(ne);var oe=subscribeToResult(this,X,ne);oe.closed?this.closeWindow(this.contexts.length-1):(oe.context=ne,te.add(oe)),this.destination.next(ee)}else this.closeWindow(this.contexts.indexOf(U))},E.prototype.notifyError=function(U){this.error(U)},E.prototype.notifyComplete=function(U){U!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(U.context))},E.prototype.closeWindow=function(U){if(U!==-1){var G=this.contexts,Y=G[U],J=Y.window,Q=Y.subscription;G.splice(U,1),J.complete(),Q.unsubscribe()}},E}(OuterSubscriber);function windowWhen(R){return function(U){return U.lift(new WindowOperator(R))}}var WindowOperator=function(){function R(E){this.closingSelector=E}return R.prototype.call=function(E,U){return U.subscribe(new WindowSubscriber(E,this.closingSelector))},R}(),WindowSubscriber=function(R){__extends(E,R);function E(U,G){var Y=R.call(this,U)||this;return Y.destination=U,Y.closingSelector=G,Y.openWindow(),Y}return E.prototype.notifyNext=function(U,G,Y,J,Q){this.openWindow(Q)},E.prototype.notifyError=function(U){this._error(U)},E.prototype.notifyComplete=function(U){this.openWindow(U)},E.prototype._next=function(U){this.window.next(U)},E.prototype._error=function(U){this.window.error(U),this.destination.error(U),this.unsubscribeClosingNotification()},E.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},E.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},E.prototype.openWindow=function(U){U===void 0&&(U=null),U&&(this.remove(U),U.unsubscribe());var G=this.window;G&&G.complete();var Y=this.window=new Subject;this.destination.next(Y);var J;try{var Q=this.closingSelector;J=Q()}catch(X){this.destination.error(X),this.window.error(X);return}this.add(this.closingNotification=subscribeToResult(this,J))},E}(OuterSubscriber);function withLatestFrom(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(U){var G;typeof R[R.length-1]=="function"&&(G=R.pop());var Y=R;return U.lift(new WithLatestFromOperator(Y,G))}}var WithLatestFromOperator=function(){function R(E,U){this.observables=E,this.project=U}return R.prototype.call=function(E,U){return U.subscribe(new WithLatestFromSubscriber(E,this.observables,this.project))},R}(),WithLatestFromSubscriber=function(R){__extends(E,R);function E(U,G,Y){var J=R.call(this,U)||this;J.observables=G,J.project=Y,J.toRespond=[];var Q=G.length;J.values=new Array(Q);for(var X=0;X<Q;X++)J.toRespond.push(X);for(var X=0;X<Q;X++){var Z=G[X];J.add(subscribeToResult(J,Z,void 0,X))}return J}return E.prototype.notifyNext=function(U,G,Y){this.values[Y]=G;var J=this.toRespond;if(J.length>0){var Q=J.indexOf(Y);Q!==-1&&J.splice(Q,1)}},E.prototype.notifyComplete=function(){},E.prototype._next=function(U){if(this.toRespond.length===0){var G=[U].concat(this.values);this.project?this._tryProject(G):this.destination.next(G)}},E.prototype._tryProject=function(U){var G;try{G=this.project.apply(this,U)}catch(Y){this.destination.error(Y);return}this.destination.next(G)},E}(OuterSubscriber);function zip(){for(var R=[],E=0;E<arguments.length;E++)R[E]=arguments[E];return function(G){return G.lift.call(zip$1.apply(void 0,[G].concat(R)))}}function zipAll(R){return function(E){return E.lift(new ZipOperator(R))}}const operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer:buffer$1,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat:concat$2,concatAll,concatMap,concatMapTo,count,debounce:debounce$2,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter:filter$1,finalize,find:find$1,findIndex,first:first$2,groupBy,ignoreElements,isEmpty,last:last$1,map:map$1,mapTo,materialize,max:max$1,merge:merge$3,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min:min$1,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample:sample$1,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle:throttle$1,throttleTime,throwIfEmpty,timeInterval,timeout:timeout$1,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(operators);var WalletSDKConnection$1={},ClientMessage={};Object.defineProperty(ClientMessage,"__esModule",{value:!0});ClientMessage.ClientMessagePublishEvent=ClientMessage.ClientMessageSetSessionConfig=ClientMessage.ClientMessageGetSessionConfig=ClientMessage.ClientMessageIsLinked=ClientMessage.ClientMessageHostSession=void 0;function ClientMessageHostSession(R){return Object.assign({type:"HostSession"},R)}ClientMessage.ClientMessageHostSession=ClientMessageHostSession;function ClientMessageIsLinked(R){return Object.assign({type:"IsLinked"},R)}ClientMessage.ClientMessageIsLinked=ClientMessageIsLinked;function ClientMessageGetSessionConfig(R){return Object.assign({type:"GetSessionConfig"},R)}ClientMessage.ClientMessageGetSessionConfig=ClientMessageGetSessionConfig;function ClientMessageSetSessionConfig(R){return Object.assign({type:"SetSessionConfig"},R)}ClientMessage.ClientMessageSetSessionConfig=ClientMessageSetSessionConfig;function ClientMessagePublishEvent(R){return Object.assign({type:"PublishEvent"},R)}ClientMessage.ClientMessagePublishEvent=ClientMessagePublishEvent;var RxWebSocket={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.RxWebSocket=R.ConnectionState=void 0;const E=require$$2$2,U=require$$3;var G;(function(J){J[J.DISCONNECTED=0]="DISCONNECTED",J[J.CONNECTING=1]="CONNECTING",J[J.CONNECTED=2]="CONNECTED"})(G=R.ConnectionState||(R.ConnectionState={}));class Y{constructor(Q,X=WebSocket){this.WebSocketClass=X,this.webSocket=null,this.connectionStateSubject=new E.BehaviorSubject(G.DISCONNECTED),this.incomingDataSubject=new E.Subject,this.url=Q.replace(/^http/,"ws")}connect(){return this.webSocket?(0,E.throwError)(new Error("webSocket object is not null")):new E.Observable(Q=>{let X;try{this.webSocket=X=new this.WebSocketClass(this.url)}catch(Z){Q.error(Z);return}this.connectionStateSubject.next(G.CONNECTING),X.onclose=Z=>{this.clearWebSocket(),Q.error(new Error(`websocket error ${Z.code}: ${Z.reason}`)),this.connectionStateSubject.next(G.DISCONNECTED)},X.onopen=Z=>{Q.next(),Q.complete(),this.connectionStateSubject.next(G.CONNECTED)},X.onmessage=Z=>{this.incomingDataSubject.next(Z.data)}}).pipe((0,U.take)(1))}disconnect(){const{webSocket:Q}=this;if(!!Q){this.clearWebSocket(),this.connectionStateSubject.next(G.DISCONNECTED);try{Q.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,U.flatMap)(Q=>{let X;try{X=JSON.parse(Q)}catch{return(0,E.empty)()}return(0,E.of)(X)}))}sendData(Q){const{webSocket:X}=this;if(!X)throw new Error("websocket is not connected");X.send(Q)}clearWebSocket(){const{webSocket:Q}=this;!Q||(this.webSocket=null,Q.onclose=null,Q.onerror=null,Q.onmessage=null,Q.onopen=null)}}R.RxWebSocket=Y})(RxWebSocket);var ServerMessage={};Object.defineProperty(ServerMessage,"__esModule",{value:!0});ServerMessage.isServerMessageFail=void 0;function isServerMessageFail(R){return R&&R.type==="Fail"&&typeof R.id=="number"&&typeof R.sessionId=="string"&&typeof R.error=="string"}ServerMessage.isServerMessageFail=isServerMessageFail;Object.defineProperty(WalletSDKConnection$1,"__esModule",{value:!0});WalletSDKConnection$1.WalletSDKConnection=void 0;const rxjs_1$1=require$$2$2,operators_1$1=require$$3,Session_1$1=Session$1,types_1$1=types$2,ClientMessage_1=ClientMessage,DiagnosticLogger_1$1=DiagnosticLogger,RxWebSocket_1=RxWebSocket,ServerMessage_1=ServerMessage,HEARTBEAT_INTERVAL$1=1e4,REQUEST_TIMEOUT=6e4;class WalletSDKConnection{constructor(E,U,G,Y,J=WebSocket){this.sessionId=E,this.sessionKey=U,this.diagnostic=Y,this.subscriptions=new rxjs_1$1.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,types_1$1.IntNumber)(1),this.connectedSubject=new rxjs_1$1.BehaviorSubject(!1),this.linkedSubject=new rxjs_1$1.BehaviorSubject(!1),this.sessionConfigSubject=new rxjs_1$1.ReplaySubject(1);const Q=new RxWebSocket_1.RxWebSocket(G+"/rpc",J);this.ws=Q,this.subscriptions.add(Q.connectionState$.pipe((0,operators_1$1.tap)(X=>{var Z;return(Z=this.diagnostic)===null||Z===void 0?void 0:Z.log(DiagnosticLogger_1$1.EVENTS.CONNECTED_STATE_CHANGE,{state:X,sessionIdHash:Session_1$1.Session.hash(E)})}),(0,operators_1$1.skip)(1),(0,operators_1$1.filter)(X=>X===RxWebSocket_1.ConnectionState.DISCONNECTED&&!this.destroyed),(0,operators_1$1.delay)(5e3),(0,operators_1$1.filter)(X=>!this.destroyed),(0,operators_1$1.flatMap)(X=>Q.connect()),(0,operators_1$1.retry)()).subscribe()),this.subscriptions.add(Q.connectionState$.pipe((0,operators_1$1.skip)(2),(0,operators_1$1.switchMap)(X=>(0,rxjs_1$1.iif)(()=>X===RxWebSocket_1.ConnectionState.CONNECTED,this.authenticate().pipe((0,operators_1$1.tap)(Z=>this.sendIsLinked()),(0,operators_1$1.tap)(Z=>this.sendGetSessionConfig()),(0,operators_1$1.map)(Z=>!0)),(0,rxjs_1$1.of)(!1))),(0,operators_1$1.distinctUntilChanged)(),(0,operators_1$1.catchError)(X=>(0,rxjs_1$1.of)(!1))).subscribe(X=>this.connectedSubject.next(X))),this.subscriptions.add(Q.connectionState$.pipe((0,operators_1$1.skip)(1),(0,operators_1$1.switchMap)(X=>(0,rxjs_1$1.iif)(()=>X===RxWebSocket_1.ConnectionState.CONNECTED,(0,rxjs_1$1.timer)(0,HEARTBEAT_INTERVAL$1)))).subscribe(X=>X===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(Q.incomingData$.pipe((0,operators_1$1.filter)(X=>X==="h")).subscribe(X=>this.updateLastHeartbeat())),this.subscriptions.add(Q.incomingJSONData$.pipe((0,operators_1$1.filter)(X=>["IsLinkedOK","Linked"].includes(X.type))).subscribe(X=>{var Z;const ee=X;(Z=this.diagnostic)===null||Z===void 0||Z.log(DiagnosticLogger_1$1.EVENTS.LINKED,{sessionIdHash:Session_1$1.Session.hash(E),linked:ee.linked,type:X.type,onlineGuests:ee.onlineGuests}),this.linkedSubject.next(ee.linked||ee.onlineGuests>0)})),this.subscriptions.add(Q.incomingJSONData$.pipe((0,operators_1$1.filter)(X=>["GetSessionConfigOK","SessionConfigUpdated"].includes(X.type))).subscribe(X=>{var Z;const ee=X;(Z=this.diagnostic)===null||Z===void 0||Z.log(DiagnosticLogger_1$1.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Session_1$1.Session.hash(E),metadata_keys:ee&&ee.metadata?Object.keys(ee.metadata):void 0}),this.sessionConfigSubject.next({webhookId:ee.webhookId,webhookUrl:ee.webhookUrl,metadata:ee.metadata})}))}connect(){var E;if(this.destroyed)throw new Error("instance is destroyed");(E=this.diagnostic)===null||E===void 0||E.log(DiagnosticLogger_1$1.EVENTS.STARTED_CONNECTING,{sessionIdHash:Session_1$1.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var E;this.subscriptions.unsubscribe(),this.ws.disconnect(),(E=this.diagnostic)===null||E===void 0||E.log(DiagnosticLogger_1$1.EVENTS.DISCONNECTED,{sessionIdHash:Session_1$1.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,operators_1$1.filter)(E=>E),(0,operators_1$1.take)(1),(0,operators_1$1.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,operators_1$1.filter)(E=>E),(0,operators_1$1.take)(1),(0,operators_1$1.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,operators_1$1.filter)(E=>{if(E.type!=="Event")return!1;const U=E;return typeof U.sessionId=="string"&&typeof U.eventId=="string"&&typeof U.event=="string"&&typeof U.data=="string"}),(0,operators_1$1.map)(E=>E))}setSessionMetadata(E,U){const G=(0,ClientMessage_1.ClientMessageSetSessionConfig)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[E]:U}});return this.onceConnected$.pipe((0,operators_1$1.flatMap)(Y=>this.makeRequest(G)),(0,operators_1$1.map)(Y=>{if((0,ServerMessage_1.isServerMessageFail)(Y))throw new Error(Y.error||"failed to set session metadata")}))}publishEvent(E,U,G=!1){const Y=(0,ClientMessage_1.ClientMessagePublishEvent)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:E,data:U,callWebhook:G});return this.onceLinked$.pipe((0,operators_1$1.flatMap)(J=>this.makeRequest(Y)),(0,operators_1$1.map)(J=>{if((0,ServerMessage_1.isServerMessageFail)(J))throw new Error(J.error||"failed to publish event");return J.eventId}))}sendData(E){this.ws.sendData(JSON.stringify(E))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>HEARTBEAT_INTERVAL$1*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(E,U=REQUEST_TIMEOUT){const G=E.id;try{this.sendData(E)}catch(Y){return(0,rxjs_1$1.throwError)(Y)}return this.ws.incomingJSONData$.pipe((0,operators_1$1.timeoutWith)(U,(0,rxjs_1$1.throwError)(new Error(`request ${G} timed out`))),(0,operators_1$1.filter)(Y=>Y.id===G),(0,operators_1$1.take)(1))}authenticate(){const E=(0,ClientMessage_1.ClientMessageHostSession)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(E).pipe((0,operators_1$1.map)(U=>{if((0,ServerMessage_1.isServerMessageFail)(U))throw new Error(U.error||"failed to authentcate")}))}sendIsLinked(){const E=(0,ClientMessage_1.ClientMessageIsLinked)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(E)}sendGetSessionConfig(){const E=(0,ClientMessage_1.ClientMessageGetSessionConfig)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(E)}}WalletSDKConnection$1.WalletSDKConnection=WalletSDKConnection;var WalletUIError$1={};Object.defineProperty(WalletUIError$1,"__esModule",{value:!0});WalletUIError$1.WalletUIError=void 0;class WalletUIError extends Error{constructor(E,U){super(E),this.message=E,this.errorCode=U}}WalletUIError$1.WalletUIError=WalletUIError;WalletUIError.UserRejectedRequest=new WalletUIError("User rejected request");WalletUIError.SwitchEthereumChainUnsupportedChainId=new WalletUIError("Unsupported chainId",4902);var aes256gcm$1={};Object.defineProperty(aes256gcm$1,"__esModule",{value:!0});aes256gcm$1.decrypt=aes256gcm$1.encrypt=void 0;const util_1$3=util$8;async function encrypt(R,E){if(E.length!==64)throw Error("secret must be 256 bits");const U=crypto.getRandomValues(new Uint8Array(12)),G=await crypto.subtle.importKey("raw",(0,util_1$3.hexStringToUint8Array)(E),{name:"aes-gcm"},!1,["encrypt","decrypt"]),Y=new TextEncoder,J=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:U},G,Y.encode(R)),Q=16,X=J.slice(J.byteLength-Q),Z=J.slice(0,J.byteLength-Q),ee=new Uint8Array(X),te=new Uint8Array(Z),ne=new Uint8Array([...U,...ee,...te]);return(0,util_1$3.uint8ArrayToHex)(ne)}aes256gcm$1.encrypt=encrypt;function decrypt(R,E){if(E.length!==64)throw Error("secret must be 256 bits");return new Promise((U,G)=>{(async function(){const Y=await crypto.subtle.importKey("raw",(0,util_1$3.hexStringToUint8Array)(E),{name:"aes-gcm"},!1,["encrypt","decrypt"]),J=(0,util_1$3.hexStringToUint8Array)(R),Q=J.slice(0,12),X=J.slice(12,28),Z=J.slice(28),ee=new Uint8Array([...Z,...X]),te={name:"AES-GCM",iv:new Uint8Array(Q)};try{const ne=await window.crypto.subtle.decrypt(te,Y,ee),oe=new TextDecoder;U(oe.decode(ne))}catch(ne){G(ne)}})()})}aes256gcm$1.decrypt=decrypt;var Web3Method={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.Web3Method=void 0,function(E){E.requestEthereumAccounts="requestEthereumAccounts",E.signEthereumMessage="signEthereumMessage",E.signEthereumTransaction="signEthereumTransaction",E.submitEthereumTransaction="submitEthereumTransaction",E.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",E.scanQRCode="scanQRCode",E.generic="generic",E.childRequestEthereumAccounts="childRequestEthereumAccounts",E.addEthereumChain="addEthereumChain",E.switchEthereumChain="switchEthereumChain",E.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",E.watchAsset="watchAsset",E.selectProvider="selectProvider"}(R.Web3Method||(R.Web3Method={}))})(Web3Method);var Web3RequestCanceledMessage$1={},RelayMessage={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.RelayMessageType=void 0,function(E){E.SESSION_ID_REQUEST="SESSION_ID_REQUEST",E.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",E.LINKED="LINKED",E.UNLINKED="UNLINKED",E.WEB3_REQUEST="WEB3_REQUEST",E.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",E.WEB3_RESPONSE="WEB3_RESPONSE"}(R.RelayMessageType||(R.RelayMessageType={}))})(RelayMessage);Object.defineProperty(Web3RequestCanceledMessage$1,"__esModule",{value:!0});Web3RequestCanceledMessage$1.Web3RequestCanceledMessage=void 0;const RelayMessage_1$2=RelayMessage;function Web3RequestCanceledMessage(R){return{type:RelayMessage_1$2.RelayMessageType.WEB3_REQUEST_CANCELED,id:R}}Web3RequestCanceledMessage$1.Web3RequestCanceledMessage=Web3RequestCanceledMessage;var Web3RequestMessage$1={};Object.defineProperty(Web3RequestMessage$1,"__esModule",{value:!0});Web3RequestMessage$1.Web3RequestMessage=void 0;const RelayMessage_1$1=RelayMessage;function Web3RequestMessage(R){return Object.assign({type:RelayMessage_1$1.RelayMessageType.WEB3_REQUEST},R)}Web3RequestMessage$1.Web3RequestMessage=Web3RequestMessage;var Web3Response={};Object.defineProperty(Web3Response,"__esModule",{value:!0});Web3Response.EthereumAddressFromSignedMessageResponse=Web3Response.SubmitEthereumTransactionResponse=Web3Response.SignEthereumTransactionResponse=Web3Response.SignEthereumMessageResponse=Web3Response.isRequestEthereumAccountsResponse=Web3Response.SelectProviderResponse=Web3Response.WatchAssetReponse=Web3Response.RequestEthereumAccountsResponse=Web3Response.SwitchEthereumChainResponse=Web3Response.AddEthereumChainResponse=Web3Response.ErrorResponse=void 0;const Web3Method_1$1=Web3Method;function ErrorResponse(R,E,U){return{method:R,errorMessage:E,errorCode:U}}Web3Response.ErrorResponse=ErrorResponse;function AddEthereumChainResponse(R){return{method:Web3Method_1$1.Web3Method.addEthereumChain,result:R}}Web3Response.AddEthereumChainResponse=AddEthereumChainResponse;function SwitchEthereumChainResponse(R){return{method:Web3Method_1$1.Web3Method.switchEthereumChain,result:R}}Web3Response.SwitchEthereumChainResponse=SwitchEthereumChainResponse;function RequestEthereumAccountsResponse(R){return{method:Web3Method_1$1.Web3Method.requestEthereumAccounts,result:R}}Web3Response.RequestEthereumAccountsResponse=RequestEthereumAccountsResponse;function WatchAssetReponse(R){return{method:Web3Method_1$1.Web3Method.watchAsset,result:R}}Web3Response.WatchAssetReponse=WatchAssetReponse;function SelectProviderResponse(R){return{method:Web3Method_1$1.Web3Method.selectProvider,result:R}}Web3Response.SelectProviderResponse=SelectProviderResponse;function isRequestEthereumAccountsResponse(R){return R&&R.method===Web3Method_1$1.Web3Method.requestEthereumAccounts}Web3Response.isRequestEthereumAccountsResponse=isRequestEthereumAccountsResponse;function SignEthereumMessageResponse(R){return{method:Web3Method_1$1.Web3Method.signEthereumMessage,result:R}}Web3Response.SignEthereumMessageResponse=SignEthereumMessageResponse;function SignEthereumTransactionResponse(R){return{method:Web3Method_1$1.Web3Method.signEthereumTransaction,result:R}}Web3Response.SignEthereumTransactionResponse=SignEthereumTransactionResponse;function SubmitEthereumTransactionResponse(R){return{method:Web3Method_1$1.Web3Method.submitEthereumTransaction,result:R}}Web3Response.SubmitEthereumTransactionResponse=SubmitEthereumTransactionResponse;function EthereumAddressFromSignedMessageResponse(R){return{method:Web3Method_1$1.Web3Method.ethereumAddressFromSignedMessage,result:R}}Web3Response.EthereumAddressFromSignedMessageResponse=EthereumAddressFromSignedMessageResponse;var Web3ResponseMessage$1={};Object.defineProperty(Web3ResponseMessage$1,"__esModule",{value:!0});Web3ResponseMessage$1.isWeb3ResponseMessage=Web3ResponseMessage$1.Web3ResponseMessage=void 0;const RelayMessage_1=RelayMessage;function Web3ResponseMessage(R){return Object.assign({type:RelayMessage_1.RelayMessageType.WEB3_RESPONSE},R)}Web3ResponseMessage$1.Web3ResponseMessage=Web3ResponseMessage;function isWeb3ResponseMessage(R){return R&&R.type===RelayMessage_1.RelayMessageType.WEB3_RESPONSE}Web3ResponseMessage$1.isWeb3ResponseMessage=isWeb3ResponseMessage;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(R,E,U,G){G===void 0&&(G=U),Object.defineProperty(R,G,{enumerable:!0,get:function(){return E[U]}})}:function(R,E,U,G){G===void 0&&(G=U),R[G]=E[U]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(R,E){Object.defineProperty(R,"default",{enumerable:!0,value:E})}:function(R,E){R.default=E}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(R,E,U,G){var Y=arguments.length,J=Y<3?E:G===null?G=Object.getOwnPropertyDescriptor(E,U):G,Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(R,E,U,G);else for(var X=R.length-1;X>=0;X--)(Q=R[X])&&(J=(Y<3?Q(J):Y>3?Q(E,U,J):Q(E,U))||J);return Y>3&&J&&Object.defineProperty(E,U,J),J},__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(R){if(R&&R.__esModule)return R;var E={};if(R!=null)for(var U in R)U!=="default"&&Object.prototype.hasOwnProperty.call(R,U)&&__createBinding$1(E,R,U);return __setModuleDefault$1(E,R),E},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(WalletSDKRelay$1,"__esModule",{value:!0});WalletSDKRelay$1.WalletSDKRelay=void 0;const bind_decorator_1=__importDefault$1(bindDecorator),eth_rpc_errors_1=dist$5,rxjs_1=require$$2$2,operators_1=require$$3,DiagnosticLogger_1=DiagnosticLogger,WalletSDKConnection_1=WalletSDKConnection$1,WalletUIError_1=WalletUIError$1,types_1=types$2,util_1$2=util$8,aes256gcm=__importStar$1(aes256gcm$1),Session_1=Session$1,WalletSDKRelayAbstract_1=WalletSDKRelayAbstract$1,Web3Method_1=Web3Method,Web3RequestCanceledMessage_1=Web3RequestCanceledMessage$1,Web3RequestMessage_1=Web3RequestMessage$1,Web3Response_1=Web3Response,Web3ResponseMessage_1=Web3ResponseMessage$1;class WalletSDKRelay extends WalletSDKRelayAbstract_1.WalletSDKRelayAbstract{constructor(E){var U;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new rxjs_1.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new rxjs_1.Subscription,this.linkAPIUrl=E.linkAPIUrl,this.storage=E.storage,this.options=E;const{session:G,ui:Y,connection:J}=this.subscribe();if(this._session=G,this.connection=J,this.relayEventManager=E.relayEventManager,E.diagnosticLogger&&E.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");E.eventListener?this.diagnostic={log:E.eventListener.onEvent}:this.diagnostic=E.diagnosticLogger,this._reloadOnDisconnect=(U=E.reloadOnDisconnect)!==null&&U!==void 0?U:!0,this.ui=Y}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(Y=>{this.dappDefaultChain!==Y&&(this.dappDefaultChain=Y)}));const E=Session_1.Session.load(this.storage)||new Session_1.Session(this.storage).save(),U=new WalletSDKConnection_1.WalletSDKConnection(E.id,E.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(U.sessionConfig$.subscribe({next:Y=>{this.onSessionConfigChanged(Y)},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(U.incomingEvent$.pipe((0,operators_1.filter)(Y=>Y.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(U.linked$.pipe((0,operators_1.skip)(1),(0,operators_1.tap)(Y=>{var J;this.isLinked=Y;const Q=this.storage.getItem(WalletSDKRelayAbstract_1.LOCAL_STORAGE_ADDRESSES_KEY);if(Y&&(this.session.linked=Y),this.isUnlinkedErrorState=!1,Q){const X=Q.split(" "),Z=this.storage.getItem("IsStandaloneSigning")==="true";if(X[0]!==""&&!Y&&this.session.linked&&!Z){this.isUnlinkedErrorState=!0;const ee=this.getSessionIdHash();(J=this.diagnostic)===null||J===void 0||J.log(DiagnosticLogger_1.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:ee})}}})).subscribe()),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>!!Y.metadata&&Y.metadata.__destroyed==="1")).subscribe(()=>{var Y;const J=U.isDestroyed;return(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:J,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>Y.metadata&&Y.metadata.WalletUsername!==void 0)).pipe((0,operators_1.mergeMap)(Y=>aes256gcm.decrypt(Y.metadata.WalletUsername,E.secret))).subscribe({next:Y=>{this.storage.setItem(WalletSDKRelayAbstract_1.WALLET_USER_NAME_KEY,Y)},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>Y.metadata&&Y.metadata.AppVersion!==void 0)).pipe((0,operators_1.mergeMap)(Y=>aes256gcm.decrypt(Y.metadata.AppVersion,E.secret))).subscribe({next:Y=>{this.storage.setItem(WalletSDKRelayAbstract_1.APP_VERSION_KEY,Y)},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>Y.metadata&&Y.metadata.ChainId!==void 0&&Y.metadata.JsonRpcUrl!==void 0)).pipe((0,operators_1.mergeMap)(Y=>(0,rxjs_1.zip)(aes256gcm.decrypt(Y.metadata.ChainId,E.secret),aes256gcm.decrypt(Y.metadata.JsonRpcUrl,E.secret)))).pipe((0,operators_1.distinctUntilChanged)()).subscribe({next:([Y,J])=>{this.chainCallback&&this.chainCallback(Y,J)},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>Y.metadata&&Y.metadata.EthereumAddress!==void 0)).pipe((0,operators_1.mergeMap)(Y=>aes256gcm.decrypt(Y.metadata.EthereumAddress,E.secret))).subscribe({next:Y=>{this.accountsCallback&&this.accountsCallback([Y]),WalletSDKRelay.accountRequestCallbackIds.size>0&&(Array.from(WalletSDKRelay.accountRequestCallbackIds.values()).forEach(J=>{const Q=(0,Web3ResponseMessage_1.Web3ResponseMessage)({id:J,response:(0,Web3Response_1.RequestEthereumAccountsResponse)([Y])});this.invokeCallback(Object.assign(Object.assign({},Q),{id:J}))}),WalletSDKRelay.accountRequestCallbackIds.clear())},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(U.sessionConfig$.pipe((0,operators_1.filter)(Y=>Y.metadata&&Y.metadata.AppSrc!==void 0)).pipe((0,operators_1.mergeMap)(Y=>aes256gcm.decrypt(Y.metadata.AppSrc,E.secret))).subscribe({next:Y=>{this.ui.setAppSrc(Y)},error:()=>{var Y;(Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const G=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:E,connected$:U.connected$,chainId$:this.dappDefaultChainSubject});return U.connect(),{session:E,ui:G,connection:U}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,operators_1.timeout)(1e3),(0,operators_1.catchError)(E=>(0,rxjs_1.of)(null))).subscribe(E=>{var U,G,Y;const J=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(U=this.diagnostic)===null||U===void 0||U.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(G=this.diagnostic)===null||G===void 0||G.log(DiagnosticLogger_1.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const Q=Session_1.Session.load(this.storage);if((Q==null?void 0:Q.id)===this._session.id?this.storage.clear():Q&&((Y=this.diagnostic)===null||Y===void 0||Y.log(DiagnosticLogger_1.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:Session_1.Session.hash(Q.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new rxjs_1.Subscription;const{session:X,ui:Z,connection:ee}=this.subscribe();this._session=X,this.connection=ee,this.ui=Z,J&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},E=>{var U;(U=this.diagnostic)===null||U===void 0||U.log(DiagnosticLogger_1.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${E}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(E,U){this.appName=E,this.appLogoUrl=U}getStorageItem(E){return this.storage.getItem(E)}get session(){return this._session}setStorageItem(E,U){this.storage.setItem(E,U)}signEthereumMessage(E,U,G,Y){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumMessage,params:{message:(0,util_1$2.hexStringFromBuffer)(E,!0),address:U,addPrefix:G,typedDataJson:Y||null}})}ethereumAddressFromSignedMessage(E,U,G){return this.sendRequest({method:Web3Method_1.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,util_1$2.hexStringFromBuffer)(E,!0),signature:(0,util_1$2.hexStringFromBuffer)(U,!0),addPrefix:G}})}signEthereumTransaction(E){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumTransaction,params:{fromAddress:E.fromAddress,toAddress:E.toAddress,weiValue:(0,util_1$2.bigIntStringFromBN)(E.weiValue),data:(0,util_1$2.hexStringFromBuffer)(E.data,!0),nonce:E.nonce,gasPriceInWei:E.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(E.gasPriceInWei):null,maxFeePerGas:E.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(E.gasPriceInWei):null,maxPriorityFeePerGas:E.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(E.gasPriceInWei):null,gasLimit:E.gasLimit?(0,util_1$2.bigIntStringFromBN)(E.gasLimit):null,chainId:E.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(E){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumTransaction,params:{fromAddress:E.fromAddress,toAddress:E.toAddress,weiValue:(0,util_1$2.bigIntStringFromBN)(E.weiValue),data:(0,util_1$2.hexStringFromBuffer)(E.data,!0),nonce:E.nonce,gasPriceInWei:E.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(E.gasPriceInWei):null,maxFeePerGas:E.maxFeePerGas?(0,util_1$2.bigIntStringFromBN)(E.maxFeePerGas):null,maxPriorityFeePerGas:E.maxPriorityFeePerGas?(0,util_1$2.bigIntStringFromBN)(E.maxPriorityFeePerGas):null,gasLimit:E.gasLimit?(0,util_1$2.bigIntStringFromBN)(E.gasLimit):null,chainId:E.chainId,shouldSubmit:!0}})}submitEthereumTransaction(E,U){return this.sendRequest({method:Web3Method_1.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,util_1$2.hexStringFromBuffer)(E,!0),chainId:U}})}scanQRCode(E){return this.sendRequest({method:Web3Method_1.Web3Method.scanQRCode,params:{regExp:E}})}getQRCodeUrl(){return(0,util_1$2.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(E,U){return this.sendRequest({method:Web3Method_1.Web3Method.generic,params:{action:U,data:E}})}sendGenericMessage(E){return this.sendRequest(E)}sendRequest(E){let U=null;const G=(0,util_1$2.randomBytesHex)(8),Y=Q=>{this.publishWeb3RequestCanceledEvent(G),this.handleErrorResponse(G,E.method,Q),U==null||U()};return{promise:new Promise((Q,X)=>{this.ui.isStandalone()||(U=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:Y,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(G,Z=>{if(U==null||U(),Z.errorMessage)return X(new Error(Z.errorMessage));Q(Z)}),this.ui.isStandalone()?this.sendRequestStandalone(G,E):this.publishWeb3RequestEvent(G,E)}),cancel:Y}}setConnectDisabled(E){this.ui.setConnectDisabled(E)}setAccountsCallback(E){this.accountsCallback=E}setChainCallback(E){this.chainCallback=E}setDappDefaultChainCallback(E){this.dappDefaultChainSubject.next(E)}publishWeb3RequestEvent(E,U){var G;const Y=(0,Web3RequestMessage_1.Web3RequestMessage)({id:E,request:U}),J=Session_1.Session.load(this.storage);(G=this.diagnostic)===null||G===void 0||G.log(DiagnosticLogger_1.EVENTS.WEB3_REQUEST,{eventId:Y.id,method:`relay::${Y.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:J?Session_1.Session.hash(J.id):"",isSessionMismatched:((J==null?void 0:J.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",Y,!0).subscribe({next:Q=>{var X;(X=this.diagnostic)===null||X===void 0||X.log(DiagnosticLogger_1.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:Y.id,method:`relay::${Y.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:J?Session_1.Session.hash(J.id):"",isSessionMismatched:((J==null?void 0:J.id)!==this._session.id).toString()})},error:Q=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:Y.id,response:{method:Y.request.method,errorMessage:Q.message}}))}}))}publishWeb3RequestCanceledEvent(E){const U=(0,Web3RequestCanceledMessage_1.Web3RequestCanceledMessage)(E);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",U,!1).subscribe())}publishEvent(E,U,G){const Y=this.session.secret;return new rxjs_1.Observable(J=>{aes256gcm.encrypt(JSON.stringify(Object.assign(Object.assign({},U),{origin:location.origin})),Y).then(Q=>{J.next(Q),J.complete()})}).pipe((0,operators_1.mergeMap)(J=>this.connection.publishEvent(E,J,G)))}handleIncomingEvent(E){try{this.subscriptions.add((0,rxjs_1.from)(aes256gcm.decrypt(E.data,this.session.secret)).pipe((0,operators_1.map)(U=>JSON.parse(U))).subscribe({next:U=>{const G=(0,Web3ResponseMessage_1.isWeb3ResponseMessage)(U)?U:null;!G||this.handleWeb3ResponseMessage(G)},error:()=>{var U;(U=this.diagnostic)===null||U===void 0||U.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(E){var U;const{response:G}=E;if((U=this.diagnostic)===null||U===void 0||U.log(DiagnosticLogger_1.EVENTS.WEB3_RESPONSE,{eventId:E.id,method:`relay::${G.method}`,sessionIdHash:this.getSessionIdHash()}),(0,Web3Response_1.isRequestEthereumAccountsResponse)(G)){WalletSDKRelay.accountRequestCallbackIds.forEach(Y=>this.invokeCallback(Object.assign(Object.assign({},E),{id:Y}))),WalletSDKRelay.accountRequestCallbackIds.clear();return}this.invokeCallback(E)}handleErrorResponse(E,U,G,Y){this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:E,response:(0,Web3Response_1.ErrorResponse)(U,(G!=null?G:WalletUIError_1.WalletUIError.UserRejectedRequest).message,Y)}))}invokeCallback(E){const U=this.relayEventManager.callbacks.get(E.id);U&&(U(E.response),this.relayEventManager.callbacks.delete(E.id))}requestEthereumAccounts(){const E={method:Web3Method_1.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},U=(0,util_1$2.randomBytesHex)(8),G=J=>{this.publishWeb3RequestCanceledEvent(U),this.handleErrorResponse(U,E.method,J)};return{promise:new Promise((J,Q)=>{var X;this.relayEventManager.callbacks.set(U,ee=>{if(this.ui.hideRequestEthereumAccounts(),ee.errorMessage)return Q(new Error(ee.errorMessage));J(ee)});const Z=((X=window==null?void 0:window.navigator)===null||X===void 0?void 0:X.userAgent)||null;if(Z&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Z)){let ee;try{(0,util_1$2.isInIFrame)()&&window.top?ee=window.top.location:ee=window.location}catch{ee=window.location}ee.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(ee.href)}`;return}if(this.ui.inlineAccountsResponse()){const ee=te=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:U,response:(0,Web3Response_1.RequestEthereumAccountsResponse)(te)}))};this.ui.requestEthereumAccounts({onCancel:G,onAccounts:ee})}else{const ee=eth_rpc_errors_1.ethErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>G(ee)})}WalletSDKRelay.accountRequestCallbackIds.add(U),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(U,E)}),cancel:G}}selectProvider(E){const U={method:Web3Method_1.Web3Method.selectProvider,params:{providerOptions:E}},G=(0,util_1$2.randomBytesHex)(8),Y=Q=>{this.publishWeb3RequestCanceledEvent(G),this.handleErrorResponse(G,U.method,Q)},J=new Promise((Q,X)=>{this.relayEventManager.callbacks.set(G,te=>{if(te.errorMessage)return X(new Error(te.errorMessage));Q(te)});const Z=te=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:G,response:(0,Web3Response_1.SelectProviderResponse)(types_1.ProviderType.Unselected)}))},ee=te=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:G,response:(0,Web3Response_1.SelectProviderResponse)(te)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:ee,onCancel:Z,providerOptions:E})});return{cancel:Y,promise:J}}watchAsset(E,U,G,Y,J,Q){const X={method:Web3Method_1.Web3Method.watchAsset,params:{type:E,options:{address:U,symbol:G,decimals:Y,image:J},chainId:Q}};let Z=null;const ee=(0,util_1$2.randomBytesHex)(8),te=oe=>{this.publishWeb3RequestCanceledEvent(ee),this.handleErrorResponse(ee,X.method,oe),Z==null||Z()};this.ui.inlineWatchAsset()||(Z=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:te,onResetConnection:this.resetAndReload}));const ne=new Promise((oe,ce)=>{this.relayEventManager.callbacks.set(ee,Se=>{if(Z==null||Z(),Se.errorMessage)return ce(new Error(Se.errorMessage));oe(Se)});const pe=Se=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:ee,response:(0,Web3Response_1.WatchAssetReponse)(!1)}))},ye=()=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:ee,response:(0,Web3Response_1.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:ye,onCancel:pe,type:E,address:U,symbol:G,decimals:Y,image:J,chainId:Q}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(ee,X)});return{cancel:te,promise:ne}}addEthereumChain(E,U,G,Y,J,Q){const X={method:Web3Method_1.Web3Method.addEthereumChain,params:{chainId:E,rpcUrls:U,blockExplorerUrls:Y,chainName:J,iconUrls:G,nativeCurrency:Q}};let Z=null;const ee=(0,util_1$2.randomBytesHex)(8),te=oe=>{this.publishWeb3RequestCanceledEvent(ee),this.handleErrorResponse(ee,X.method,oe),Z==null||Z()};return this.ui.inlineAddEthereumChain(E)||(Z=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:te,onResetConnection:this.resetAndReload})),{promise:new Promise((oe,ce)=>{this.relayEventManager.callbacks.set(ee,Se=>{if(Z==null||Z(),Se.errorMessage)return ce(new Error(Se.errorMessage));oe(Se)});const pe=Se=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:ee,response:(0,Web3Response_1.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},ye=Se=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:ee,response:(0,Web3Response_1.AddEthereumChainResponse)({isApproved:!0,rpcUrl:Se})}))};this.ui.inlineAddEthereumChain(E)&&this.ui.addEthereumChain({onCancel:pe,onApprove:ye,chainId:X.params.chainId,rpcUrls:X.params.rpcUrls,blockExplorerUrls:X.params.blockExplorerUrls,chainName:X.params.chainName,iconUrls:X.params.iconUrls,nativeCurrency:X.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(E)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(ee,X)}),cancel:te}}switchEthereumChain(E,U){const G={method:Web3Method_1.Web3Method.switchEthereumChain,params:Object.assign({chainId:E},{address:U})},Y=(0,util_1$2.randomBytesHex)(8),J=X=>{this.publishWeb3RequestCanceledEvent(Y),this.handleErrorResponse(Y,G.method,X)};return{promise:new Promise((X,Z)=>{this.relayEventManager.callbacks.set(Y,ne=>{if(ne.errorMessage&&ne.errorCode)return Z(eth_rpc_errors_1.ethErrors.provider.custom({code:ne.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(ne.errorMessage)return Z(new Error(ne.errorMessage));X(ne)});const ee=ne=>{if(typeof ne=="number"){const oe=ne;this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:Y,response:(0,Web3Response_1.ErrorResponse)(Web3Method_1.Web3Method.switchEthereumChain,WalletUIError_1.WalletUIError.SwitchEthereumChainUnsupportedChainId.message,oe)}))}else ne instanceof WalletUIError_1.WalletUIError?this.handleErrorResponse(Y,Web3Method_1.Web3Method.switchEthereumChain,ne,ne.errorCode):this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:Y,response:(0,Web3Response_1.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},te=ne=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:Y,response:(0,Web3Response_1.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:ne})}))};this.ui.switchEthereumChain({onCancel:ee,onApprove:te,chainId:G.params.chainId,address:G.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(Y,G)}),cancel:J}}inlineAddEthereumChain(E){return this.ui.inlineAddEthereumChain(E)}getSessionIdHash(){return Session_1.Session.hash(this._session.id)}sendRequestStandalone(E,U){const G=J=>{this.handleErrorResponse(E,U.method,J)},Y=J=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:E,response:J}))};switch(U.method){case Web3Method_1.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:U,onSuccess:Y,onCancel:G});break;case Web3Method_1.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:U,onSuccess:Y,onCancel:G});break;case Web3Method_1.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:U,onSuccess:Y,onCancel:G});break;case Web3Method_1.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:U,onSuccess:Y});break;default:G();break}}onSessionConfigChanged(E){}}WalletSDKRelay.accountRequestCallbackIds=new Set;__decorate([bind_decorator_1.default],WalletSDKRelay.prototype,"resetAndReload",null);__decorate([bind_decorator_1.default],WalletSDKRelay.prototype,"handleIncomingEvent",null);WalletSDKRelay$1.WalletSDKRelay=WalletSDKRelay;var WalletSDKRelayEventManager$1={};Object.defineProperty(WalletSDKRelayEventManager$1,"__esModule",{value:!0});WalletSDKRelayEventManager$1.WalletSDKRelayEventManager=void 0;const util_1$1=util$8;class WalletSDKRelayEventManager{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const E=this._nextRequestId,U=(0,util_1$1.prepend0x)(E.toString(16));return this.callbacks.get(U)&&this.callbacks.delete(U),E}}WalletSDKRelayEventManager$1.WalletSDKRelayEventManager=WalletSDKRelayEventManager;const name$8="@coinbase/wallet-sdk",version$2="3.6.6",description="Coinbase Wallet JavaScript SDK",keywords=["cipher","cipherbrowser","coinbase","coinbasewallet","eth","ether","ethereum","etherium","injection","toshi","wallet","walletlink","web3"],main$1="dist/index.js",types="dist/index.d.ts",repository="https://github.com/coinbase/coinbase-wallet-sdk.git",author="Coinbase, Inc.",license="Apache-2.0",scripts={"pretest:unit":"node compile-assets.js","test:unit":"jest","test:unit:coverage":"yarn test:unit && open coverage/lcov-report/index.html","test:karma":"yarn build-npm && karma start",prebuild:`rm -rf ./build && node -p "'export const LIB_VERSION = ' + JSON.stringify(require('./package.json').version) + ';'" > src/version.ts`,build:"node compile-assets.js && webpack --config webpack.config.js","build-npm":"tsc -p ./tsconfig.build.json","build:dev":"export LINK_API_URL='http://localhost:3000'; yarn build","build:dev:watch":"nodemon -e 'ts,tsx,js,json,css,scss,svg' --ignore 'src/**/*-css.ts' --ignore 'src/**/*-svg.ts' --watch src/ --exec 'yarn build:dev'","build:prod":`yarn prebuild && yarn build && yarn build-npm && cp ./package.json ../../README.md ./LICENSE build/npm && cp -a src/vendor-js build/npm/dist && sed -i.bak 's|  "private": true,||g' build/npm/package.json && rm -f build/npm/package.json.bak`,"lint:types":"tsc --noEmit","lint:prettier":'prettier --check "{src,__tests__}/**/*.(js|ts|tsx)"',"lint:eslint":"eslint ./src --ext .ts,.tsx",lint:"yarn lint:eslint && yarn lint:types && yarn lint:prettier","fix:eslint":"yarn lint:eslint --fix","fix:prettier":"prettier . --write",release:"./scripts/release.sh"},dependencies={"@metamask/safe-event-emitter":"2.0.0","@solana/web3.js":"^1.70.1","bind-decorator":"^1.0.11","bn.js":"^5.1.1",buffer:"^6.0.3",clsx:"^1.1.0","eth-block-tracker":"6.1.0","eth-json-rpc-filters":"5.1.0","eth-rpc-errors":"4.0.2","json-rpc-engine":"6.1.0",keccak:"^3.0.1",preact:"^10.5.9",qs:"^6.10.3",rxjs:"^6.6.3","sha.js":"^2.4.11","stream-browserify":"^3.0.0",util:"^0.12.4"},devDependencies={"@babel/core":"^7.17.9","@babel/plugin-proposal-decorators":"^7.17.9","@babel/plugin-transform-react-jsx":"^7.17.3","@babel/preset-env":"^7.16.11","@babel/preset-typescript":"^7.16.7","@peculiar/webcrypto":"^1.3.3","@testing-library/jest-dom":"^5.16.4","@testing-library/preact":"^2.0.1","@types/bn.js":"^4.11.6","@types/jest":"^27.4.1","@types/node":"^14.14.20","@types/qs":"^6.9.7","@types/sha.js":"^2.4.0","@typescript-eslint/eslint-plugin":"^5.7.0","@typescript-eslint/eslint-plugin-tslint":"^5.7.0","@typescript-eslint/parser":"^5.7.0","babel-jest":"^27.5.1",browserify:"17.0.0","copy-webpack-plugin":"^6.4.1","core-js":"^3.8.2",eslint:"^8.4.1","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.25.3","eslint-plugin-preact":"^0.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-simple-import-sort":"^7.0.0",jasmine:"3.8.0",jest:"^27.5.1","jest-chrome":"^0.7.2","jest-websocket-mock":"^2.3.0",karma:"^6.4.0","karma-browserify":"8.1.0","karma-chrome-launcher":"^3.1.0","karma-jasmine":"^4.0.1",nodemon:"^2.0.6",prettier:"^2.5.1","raw-loader":"^4.0.2","regenerator-runtime":"^0.13.7",sass:"^1.50.0",svgo:"^2.8.0","ts-jest":"^27.1.4","ts-loader":"^8.0.13","ts-node":"^10.7.0",tslib:"^2.0.3",typescript:"^4.1.3",watchify:"4.0.0",webpack:"^5.76.0","webpack-cli":"^4.9.2","whatwg-fetch":"^3.5.0"},engines={node:">= 10.0.0"},require$$7={name:name$8,version:version$2,description,keywords,main:main$1,types,repository,author,license,scripts,dependencies,devDependencies,engines};Object.defineProperty(CoinbaseWalletSDK$2,"__esModule",{value:!0});CoinbaseWalletSDK$2.CoinbaseWalletSDK=void 0;const wallet_logo_1=walletLogo$1,ScopedLocalStorage_1=ScopedLocalStorage$1,CoinbaseWalletProvider_1=CoinbaseWalletProvider$1,WalletSDKUI_1=WalletSDKUI$1,WalletSDKRelay_1=WalletSDKRelay$1,WalletSDKRelayEventManager_1=WalletSDKRelayEventManager$1,util_1=util$8,LINK_API_URL="https://www.walletlink.org",SDK_VERSION$1=require$$7.version;class CoinbaseWalletSDK$1{constructor(E){var U,G,Y;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const J=E.linkAPIUrl||LINK_API_URL;let Q;if(E.uiConstructor?Q=E.uiConstructor:Q=ee=>new WalletSDKUI_1.WalletSDKUI(ee),typeof E.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=E.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(U=E.overrideIsCoinbaseWallet)!==null&&U!==void 0?U:!0,this._overrideIsCoinbaseBrowser=(G=E.overrideIsCoinbaseBrowser)!==null&&G!==void 0?G:!1,E.diagnosticLogger&&E.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");E.eventListener?this._diagnosticLogger={log:E.eventListener.onEvent}:this._diagnosticLogger=E.diagnosticLogger,this._reloadOnDisconnect=(Y=E.reloadOnDisconnect)!==null&&Y!==void 0?Y:!0;const X=new URL(J),Z=`${X.protocol}//${X.host}`;this._storage=new ScopedLocalStorage_1.ScopedLocalStorage(`-walletlink:${Z}`),this._storage.setItem("version",CoinbaseWalletSDK$1.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new WalletSDKRelayEventManager_1.WalletSDKRelayEventManager,this._relay=new WalletSDKRelay_1.WalletSDKRelay({linkAPIUrl:J,version:SDK_VERSION$1,darkMode:!!E.darkMode,uiConstructor:Q,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect}),this.setAppInfo(E.appName,E.appLogoUrl),!E.headlessMode&&this._relay.attachUI())}makeWeb3Provider(E="",U=1){const G=this.walletExtension;if(G)return this.isCipherProvider(G)||G.setProviderInfo(E,U),this._reloadOnDisconnect===!1&&typeof G.disableReloadOnDisconnect=="function"&&G.disableReloadOnDisconnect(),G;const Y=this.coinbaseBrowser;if(Y)return Y;const J=this._relay;if(!J||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return E||J.setConnectDisabled(!0),new CoinbaseWalletProvider_1.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(J),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:E,chainId:U,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(E,U){var G;this._appName=E||"DApp",this._appLogoUrl=U||(0,util_1.getFavicon)();const Y=this.walletExtension;Y?this.isCipherProvider(Y)||Y.setAppInfo(this._appName,this._appLogoUrl):(G=this._relay)===null||G===void 0||G.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var E;const U=this.walletExtension;U?U.close():(E=this._relay)===null||E===void 0||E.resetAndReload()}getQrUrl(){var E,U;return(U=(E=this._relay)===null||E===void 0?void 0:E.getQRCodeUrl())!==null&&U!==void 0?U:null}getCoinbaseWalletLogo(E,U=240){return(0,wallet_logo_1.walletLogo)(E,U)}get walletExtension(){var E;return(E=window.coinbaseWalletExtension)!==null&&E!==void 0?E:window.walletLinkExtension}get coinbaseBrowser(){var E,U;try{const G=(E=window.ethereum)!==null&&E!==void 0?E:(U=window.top)===null||U===void 0?void 0:U.ethereum;return G&&"isCoinbaseBrowser"in G&&G.isCoinbaseBrowser?G:void 0}catch{return}}isCipherProvider(E){return typeof E.isCipher=="boolean"&&E.isCipher}}CoinbaseWalletSDK$2.CoinbaseWalletSDK=CoinbaseWalletSDK$1;CoinbaseWalletSDK$1.VERSION=SDK_VERSION$1;(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.CoinbaseWalletProvider=R.CoinbaseWalletSDK=void 0;const E=CoinbaseWalletSDK$2,U=CoinbaseWalletProvider$1;var G=CoinbaseWalletSDK$2;Object.defineProperty(R,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return G.CoinbaseWalletSDK}});var Y=CoinbaseWalletProvider$1;Object.defineProperty(R,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return Y.CoinbaseWalletProvider}}),R.default=E.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=E.CoinbaseWalletSDK,window.CoinbaseWalletProvider=U.CoinbaseWalletProvider,window.WalletLink=E.CoinbaseWalletSDK,window.WalletLinkProvider=U.CoinbaseWalletProvider)})(dist$6);const CoinbaseWalletSDK=getDefaultExportFromCjs(dist$6);var EN_US=["second","minute","hour","day","week","month","year"];function en_US(R,E){if(E===0)return["just now","right now"];var U=EN_US[Math.floor(E/2)];return R>1&&(U+="s"),[R+" "+U+" ago","in "+R+" "+U]}var ZH_CN=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function zh_CN(R,E){if(E===0)return["\u521A\u521A","\u7247\u523B\u540E"];var U=ZH_CN[~~(E/2)];return[R+" "+U+"\u524D",R+" "+U+"\u540E"]}var Locales={},register=function(R,E){Locales[R]=E},getLocale=function(R){return Locales[R]||Locales.en_US},SEC_ARRAY=[60,60,24,7,365/7/12,12];function toDate(R){return R instanceof Date?R:!isNaN(R)||/^\d+$/.test(R)?new Date(parseInt(R)):(R=(R||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(R))}function formatDiff(R,E){var U=R<0?1:0;R=Math.abs(R);for(var G=R,Y=0;R>=SEC_ARRAY[Y]&&Y<SEC_ARRAY.length;Y++)R/=SEC_ARRAY[Y];return R=Math.floor(R),Y*=2,R>(Y===0?9:1)&&(Y+=1),E(R,Y,G)[U].replace("%s",R.toString())}function diffSec(R,E){var U=E?toDate(E):new Date;return(+U-+toDate(R))/1e3}var format$4=function(R,E,U){var G=diffSec(R,U&&U.relativeDate);return formatDiff(G,getLocale(E))};register("en_US",en_US);register("zh_CN",zh_CN);const isNil=R=>R==null,isServer=typeof window>"u",isDocumentVisibility=()=>{var R;return isServer||isNil((R=window.document)===null||R===void 0?void 0:R.visibilityState)?!0:window.document.visibilityState==="visible"};var _window;const FOCUS_LISTENER=new Set,VISIBLE_LISTENER=new Set,RECONNECT_LISTENER=new Set,observer=R=>{R.forEach(E=>{E()})};!isServer&&(_window=window)!==null&&_window!==void 0&&_window.addEventListener&&(window.addEventListener("visibilitychange",()=>{isDocumentVisibility()&&observer(VISIBLE_LISTENER)},!1),window.addEventListener("focus",()=>observer(FOCUS_LISTENER),!1),window.addEventListener("online",()=>observer(RECONNECT_LISTENER),!1));function OrderedMap(R){this.content=R}OrderedMap.prototype={constructor:OrderedMap,find:function(R){for(var E=0;E<this.content.length;E+=2)if(this.content[E]===R)return E;return-1},get:function(R){var E=this.find(R);return E==-1?void 0:this.content[E+1]},update:function(R,E,U){var G=U&&U!=R?this.remove(U):this,Y=G.find(R),J=G.content.slice();return Y==-1?J.push(U||R,E):(J[Y+1]=E,U&&(J[Y]=U)),new OrderedMap(J)},remove:function(R){var E=this.find(R);if(E==-1)return this;var U=this.content.slice();return U.splice(E,2),new OrderedMap(U)},addToStart:function(R,E){return new OrderedMap([R,E].concat(this.remove(R).content))},addToEnd:function(R,E){var U=this.remove(R).content.slice();return U.push(R,E),new OrderedMap(U)},addBefore:function(R,E,U){var G=this.remove(E),Y=G.content.slice(),J=G.find(R);return Y.splice(J==-1?Y.length:J,0,E,U),new OrderedMap(Y)},forEach:function(R){for(var E=0;E<this.content.length;E+=2)R(this.content[E],this.content[E+1])},prepend:function(R){return R=OrderedMap.from(R),R.size?new OrderedMap(R.content.concat(this.subtract(R).content)):this},append:function(R){return R=OrderedMap.from(R),R.size?new OrderedMap(this.subtract(R).content.concat(R.content)):this},subtract:function(R){var E=this;R=OrderedMap.from(R);for(var U=0;U<R.content.length;U+=2)E=E.remove(R.content[U]);return E},get size(){return this.content.length>>1}};OrderedMap.from=function(R){if(R instanceof OrderedMap)return R;var E=[];if(R)for(var U in R)E.push(U,R[U]);return new OrderedMap(E)};function findDiffStart$1(R,E,U){for(let G=0;;G++){if(G==R.childCount||G==E.childCount)return R.childCount==E.childCount?null:U;let Y=R.child(G),J=E.child(G);if(Y==J){U+=Y.nodeSize;continue}if(!Y.sameMarkup(J))return U;if(Y.isText&&Y.text!=J.text){for(let Q=0;Y.text[Q]==J.text[Q];Q++)U++;return U}if(Y.content.size||J.content.size){let Q=findDiffStart$1(Y.content,J.content,U+1);if(Q!=null)return Q}U+=Y.nodeSize}}function findDiffEnd$1(R,E,U,G){for(let Y=R.childCount,J=E.childCount;;){if(Y==0||J==0)return Y==J?null:{a:U,b:G};let Q=R.child(--Y),X=E.child(--J),Z=Q.nodeSize;if(Q==X){U-=Z,G-=Z;continue}if(!Q.sameMarkup(X))return{a:U,b:G};if(Q.isText&&Q.text!=X.text){let ee=0,te=Math.min(Q.text.length,X.text.length);for(;ee<te&&Q.text[Q.text.length-ee-1]==X.text[X.text.length-ee-1];)ee++,U--,G--;return{a:U,b:G}}if(Q.content.size||X.content.size){let ee=findDiffEnd$1(Q.content,X.content,U-1,G-1);if(ee)return ee}U-=Z,G-=Z}}class Fragment$1{constructor(E,U){if(this.content=E,this.size=U||0,U==null)for(let G=0;G<E.length;G++)this.size+=E[G].nodeSize}nodesBetween(E,U,G,Y=0,J){for(let Q=0,X=0;X<U;Q++){let Z=this.content[Q],ee=X+Z.nodeSize;if(ee>E&&G(Z,Y+X,J||null,Q)!==!1&&Z.content.size){let te=X+1;Z.nodesBetween(Math.max(0,E-te),Math.min(Z.content.size,U-te),G,Y+te)}X=ee}}descendants(E){this.nodesBetween(0,this.size,E)}textBetween(E,U,G,Y){let J="",Q=!0;return this.nodesBetween(E,U,(X,Z)=>{X.isText?(J+=X.text.slice(Math.max(E,Z)-Z,U-Z),Q=!G):X.isLeaf?(Y?J+=typeof Y=="function"?Y(X):Y:X.type.spec.leafText&&(J+=X.type.spec.leafText(X)),Q=!G):!Q&&X.isBlock&&(J+=G,Q=!0)},0),J}append(E){if(!E.size)return this;if(!this.size)return E;let U=this.lastChild,G=E.firstChild,Y=this.content.slice(),J=0;for(U.isText&&U.sameMarkup(G)&&(Y[Y.length-1]=U.withText(U.text+G.text),J=1);J<E.content.length;J++)Y.push(E.content[J]);return new Fragment$1(Y,this.size+E.size)}cut(E,U=this.size){if(E==0&&U==this.size)return this;let G=[],Y=0;if(U>E)for(let J=0,Q=0;Q<U;J++){let X=this.content[J],Z=Q+X.nodeSize;Z>E&&((Q<E||Z>U)&&(X.isText?X=X.cut(Math.max(0,E-Q),Math.min(X.text.length,U-Q)):X=X.cut(Math.max(0,E-Q-1),Math.min(X.content.size,U-Q-1))),G.push(X),Y+=X.nodeSize),Q=Z}return new Fragment$1(G,Y)}cutByIndex(E,U){return E==U?Fragment$1.empty:E==0&&U==this.content.length?this:new Fragment$1(this.content.slice(E,U))}replaceChild(E,U){let G=this.content[E];if(G==U)return this;let Y=this.content.slice(),J=this.size+U.nodeSize-G.nodeSize;return Y[E]=U,new Fragment$1(Y,J)}addToStart(E){return new Fragment$1([E].concat(this.content),this.size+E.nodeSize)}addToEnd(E){return new Fragment$1(this.content.concat(E),this.size+E.nodeSize)}eq(E){if(this.content.length!=E.content.length)return!1;for(let U=0;U<this.content.length;U++)if(!this.content[U].eq(E.content[U]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(E){let U=this.content[E];if(!U)throw new RangeError("Index "+E+" out of range for "+this);return U}maybeChild(E){return this.content[E]||null}forEach(E){for(let U=0,G=0;U<this.content.length;U++){let Y=this.content[U];E(Y,G,U),G+=Y.nodeSize}}findDiffStart(E,U=0){return findDiffStart$1(this,E,U)}findDiffEnd(E,U=this.size,G=E.size){return findDiffEnd$1(this,E,U,G)}findIndex(E,U=-1){if(E==0)return retIndex$1(0,E);if(E==this.size)return retIndex$1(this.content.length,E);if(E>this.size||E<0)throw new RangeError(`Position ${E} outside of fragment (${this})`);for(let G=0,Y=0;;G++){let J=this.child(G),Q=Y+J.nodeSize;if(Q>=E)return Q==E||U>0?retIndex$1(G+1,Q):retIndex$1(G,Y);Y=Q}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(E=>E.toJSON()):null}static fromJSON(E,U){if(!U)return Fragment$1.empty;if(!Array.isArray(U))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment$1(U.map(E.nodeFromJSON))}static fromArray(E){if(!E.length)return Fragment$1.empty;let U,G=0;for(let Y=0;Y<E.length;Y++){let J=E[Y];G+=J.nodeSize,Y&&J.isText&&E[Y-1].sameMarkup(J)?(U||(U=E.slice(0,Y)),U[U.length-1]=J.withText(U[U.length-1].text+J.text)):U&&U.push(J)}return new Fragment$1(U||E,G)}static from(E){if(!E)return Fragment$1.empty;if(E instanceof Fragment$1)return E;if(Array.isArray(E))return this.fromArray(E);if(E.attrs)return new Fragment$1([E],E.nodeSize);throw new RangeError("Can not convert "+E+" to a Fragment"+(E.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment$1.empty=new Fragment$1([],0);const found$1={index:0,offset:0};function retIndex$1(R,E){return found$1.index=R,found$1.offset=E,found$1}function compareDeep$1(R,E){if(R===E)return!0;if(!(R&&typeof R=="object")||!(E&&typeof E=="object"))return!1;let U=Array.isArray(R);if(Array.isArray(E)!=U)return!1;if(U){if(R.length!=E.length)return!1;for(let G=0;G<R.length;G++)if(!compareDeep$1(R[G],E[G]))return!1}else{for(let G in R)if(!(G in E)||!compareDeep$1(R[G],E[G]))return!1;for(let G in E)if(!(G in R))return!1}return!0}class Mark$2{constructor(E,U){this.type=E,this.attrs=U}addToSet(E){let U,G=!1;for(let Y=0;Y<E.length;Y++){let J=E[Y];if(this.eq(J))return E;if(this.type.excludes(J.type))U||(U=E.slice(0,Y));else{if(J.type.excludes(this.type))return E;!G&&J.type.rank>this.type.rank&&(U||(U=E.slice(0,Y)),U.push(this),G=!0),U&&U.push(J)}}return U||(U=E.slice()),G||U.push(this),U}removeFromSet(E){for(let U=0;U<E.length;U++)if(this.eq(E[U]))return E.slice(0,U).concat(E.slice(U+1));return E}isInSet(E){for(let U=0;U<E.length;U++)if(this.eq(E[U]))return!0;return!1}eq(E){return this==E||this.type==E.type&&compareDeep$1(this.attrs,E.attrs)}toJSON(){let E={type:this.type.name};for(let U in this.attrs){E.attrs=this.attrs;break}return E}static fromJSON(E,U){if(!U)throw new RangeError("Invalid input for Mark.fromJSON");let G=E.marks[U.type];if(!G)throw new RangeError(`There is no mark type ${U.type} in this schema`);return G.create(U.attrs)}static sameSet(E,U){if(E==U)return!0;if(E.length!=U.length)return!1;for(let G=0;G<E.length;G++)if(!E[G].eq(U[G]))return!1;return!0}static setFrom(E){if(!E||Array.isArray(E)&&E.length==0)return Mark$2.none;if(E instanceof Mark$2)return[E];let U=E.slice();return U.sort((G,Y)=>G.type.rank-Y.type.rank),U}}Mark$2.none=[];class ReplaceError$1 extends Error{}class Slice$1{constructor(E,U,G){this.content=E,this.openStart=U,this.openEnd=G}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(E,U){let G=insertInto$1(this.content,E+this.openStart,U);return G&&new Slice$1(G,this.openStart,this.openEnd)}removeBetween(E,U){return new Slice$1(removeRange$1(this.content,E+this.openStart,U+this.openStart),this.openStart,this.openEnd)}eq(E){return this.content.eq(E.content)&&this.openStart==E.openStart&&this.openEnd==E.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let E={content:this.content.toJSON()};return this.openStart>0&&(E.openStart=this.openStart),this.openEnd>0&&(E.openEnd=this.openEnd),E}static fromJSON(E,U){if(!U)return Slice$1.empty;let G=U.openStart||0,Y=U.openEnd||0;if(typeof G!="number"||typeof Y!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice$1(Fragment$1.fromJSON(E,U.content),G,Y)}static maxOpen(E,U=!0){let G=0,Y=0;for(let J=E.firstChild;J&&!J.isLeaf&&(U||!J.type.spec.isolating);J=J.firstChild)G++;for(let J=E.lastChild;J&&!J.isLeaf&&(U||!J.type.spec.isolating);J=J.lastChild)Y++;return new Slice$1(E,G,Y)}}Slice$1.empty=new Slice$1(Fragment$1.empty,0,0);function removeRange$1(R,E,U){let{index:G,offset:Y}=R.findIndex(E),J=R.maybeChild(G),{index:Q,offset:X}=R.findIndex(U);if(Y==E||J.isText){if(X!=U&&!R.child(Q).isText)throw new RangeError("Removing non-flat range");return R.cut(0,E).append(R.cut(U))}if(G!=Q)throw new RangeError("Removing non-flat range");return R.replaceChild(G,J.copy(removeRange$1(J.content,E-Y-1,U-Y-1)))}function insertInto$1(R,E,U,G){let{index:Y,offset:J}=R.findIndex(E),Q=R.maybeChild(Y);if(J==E||Q.isText)return G&&!G.canReplace(Y,Y,U)?null:R.cut(0,E).append(U).append(R.cut(E));let X=insertInto$1(Q.content,E-J-1,U);return X&&R.replaceChild(Y,Q.copy(X))}function replace(R,E,U){if(U.openStart>R.depth)throw new ReplaceError$1("Inserted content deeper than insertion position");if(R.depth-U.openStart!=E.depth-U.openEnd)throw new ReplaceError$1("Inconsistent open depths");return replaceOuter(R,E,U,0)}function replaceOuter(R,E,U,G){let Y=R.index(G),J=R.node(G);if(Y==E.index(G)&&G<R.depth-U.openStart){let Q=replaceOuter(R,E,U,G+1);return J.copy(J.content.replaceChild(Y,Q))}else if(U.content.size)if(!U.openStart&&!U.openEnd&&R.depth==G&&E.depth==G){let Q=R.parent,X=Q.content;return close(Q,X.cut(0,R.parentOffset).append(U.content).append(X.cut(E.parentOffset)))}else{let{start:Q,end:X}=prepareSliceForReplace(U,R);return close(J,replaceThreeWay(R,Q,X,E,G))}else return close(J,replaceTwoWay(R,E,G))}function checkJoin(R,E){if(!E.type.compatibleContent(R.type))throw new ReplaceError$1("Cannot join "+E.type.name+" onto "+R.type.name)}function joinable$1(R,E,U){let G=R.node(U);return checkJoin(G,E.node(U)),G}function addNode(R,E){let U=E.length-1;U>=0&&R.isText&&R.sameMarkup(E[U])?E[U]=R.withText(E[U].text+R.text):E.push(R)}function addRange(R,E,U,G){let Y=(E||R).node(U),J=0,Q=E?E.index(U):Y.childCount;R&&(J=R.index(U),R.depth>U?J++:R.textOffset&&(addNode(R.nodeAfter,G),J++));for(let X=J;X<Q;X++)addNode(Y.child(X),G);E&&E.depth==U&&E.textOffset&&addNode(E.nodeBefore,G)}function close(R,E){if(!R.type.validContent(E))throw new ReplaceError$1("Invalid content for node "+R.type.name);return R.copy(E)}function replaceThreeWay(R,E,U,G,Y){let J=R.depth>Y&&joinable$1(R,E,Y+1),Q=G.depth>Y&&joinable$1(U,G,Y+1),X=[];return addRange(null,R,Y,X),J&&Q&&E.index(Y)==U.index(Y)?(checkJoin(J,Q),addNode(close(J,replaceThreeWay(R,E,U,G,Y+1)),X)):(J&&addNode(close(J,replaceTwoWay(R,E,Y+1)),X),addRange(E,U,Y,X),Q&&addNode(close(Q,replaceTwoWay(U,G,Y+1)),X)),addRange(G,null,Y,X),new Fragment$1(X)}function replaceTwoWay(R,E,U){let G=[];if(addRange(null,R,U,G),R.depth>U){let Y=joinable$1(R,E,U+1);addNode(close(Y,replaceTwoWay(R,E,U+1)),G)}return addRange(E,null,U,G),new Fragment$1(G)}function prepareSliceForReplace(R,E){let U=E.depth-R.openStart,Y=E.node(U).copy(R.content);for(let J=U-1;J>=0;J--)Y=E.node(J).copy(Fragment$1.from(Y));return{start:Y.resolveNoCache(R.openStart+U),end:Y.resolveNoCache(Y.content.size-R.openEnd-U)}}class ResolvedPos{constructor(E,U,G){this.pos=E,this.path=U,this.parentOffset=G,this.depth=U.length/3-1}resolveDepth(E){return E==null?this.depth:E<0?this.depth+E:E}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(E){return this.path[this.resolveDepth(E)*3]}index(E){return this.path[this.resolveDepth(E)*3+1]}indexAfter(E){return E=this.resolveDepth(E),this.index(E)+(E==this.depth&&!this.textOffset?0:1)}start(E){return E=this.resolveDepth(E),E==0?0:this.path[E*3-1]+1}end(E){return E=this.resolveDepth(E),this.start(E)+this.node(E).content.size}before(E){if(E=this.resolveDepth(E),!E)throw new RangeError("There is no position before the top-level node");return E==this.depth+1?this.pos:this.path[E*3-1]}after(E){if(E=this.resolveDepth(E),!E)throw new RangeError("There is no position after the top-level node");return E==this.depth+1?this.pos:this.path[E*3-1]+this.path[E*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let E=this.parent,U=this.index(this.depth);if(U==E.childCount)return null;let G=this.pos-this.path[this.path.length-1],Y=E.child(U);return G?E.child(U).cut(G):Y}get nodeBefore(){let E=this.index(this.depth),U=this.pos-this.path[this.path.length-1];return U?this.parent.child(E).cut(0,U):E==0?null:this.parent.child(E-1)}posAtIndex(E,U){U=this.resolveDepth(U);let G=this.path[U*3],Y=U==0?0:this.path[U*3-1]+1;for(let J=0;J<E;J++)Y+=G.child(J).nodeSize;return Y}marks(){let E=this.parent,U=this.index();if(E.content.size==0)return Mark$2.none;if(this.textOffset)return E.child(U).marks;let G=E.maybeChild(U-1),Y=E.maybeChild(U);if(!G){let X=G;G=Y,Y=X}let J=G.marks;for(var Q=0;Q<J.length;Q++)J[Q].type.spec.inclusive===!1&&(!Y||!J[Q].isInSet(Y.marks))&&(J=J[Q--].removeFromSet(J));return J}marksAcross(E){let U=this.parent.maybeChild(this.index());if(!U||!U.isInline)return null;let G=U.marks,Y=E.parent.maybeChild(E.index());for(var J=0;J<G.length;J++)G[J].type.spec.inclusive===!1&&(!Y||!G[J].isInSet(Y.marks))&&(G=G[J--].removeFromSet(G));return G}sharedDepth(E){for(let U=this.depth;U>0;U--)if(this.start(U)<=E&&this.end(U)>=E)return U;return 0}blockRange(E=this,U){if(E.pos<this.pos)return E.blockRange(this);for(let G=this.depth-(this.parent.inlineContent||this.pos==E.pos?1:0);G>=0;G--)if(E.pos<=this.end(G)&&(!U||U(this.node(G))))return new NodeRange(this,E,G);return null}sameParent(E){return this.pos-this.parentOffset==E.pos-E.parentOffset}max(E){return E.pos>this.pos?E:this}min(E){return E.pos<this.pos?E:this}toString(){let E="";for(let U=1;U<=this.depth;U++)E+=(E?"/":"")+this.node(U).type.name+"_"+this.index(U-1);return E+":"+this.parentOffset}static resolve(E,U){if(!(U>=0&&U<=E.content.size))throw new RangeError("Position "+U+" out of range");let G=[],Y=0,J=U;for(let Q=E;;){let{index:X,offset:Z}=Q.content.findIndex(J),ee=J-Z;if(G.push(Q,X,Y+Z),!ee||(Q=Q.child(X),Q.isText))break;J=ee-1,Y+=Z+1}return new ResolvedPos(U,G,J)}static resolveCached(E,U){for(let Y=0;Y<resolveCache.length;Y++){let J=resolveCache[Y];if(J.pos==U&&J.doc==E)return J}let G=resolveCache[resolveCachePos]=ResolvedPos.resolve(E,U);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,G}}let resolveCache=[],resolveCachePos=0,resolveCacheSize=12;class NodeRange{constructor(E,U,G){this.$from=E,this.$to=U,this.depth=G}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);class Node$1{constructor(E,U,G,Y=Mark$2.none){this.type=E,this.attrs=U,this.marks=Y,this.content=G||Fragment$1.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(E){return this.content.child(E)}maybeChild(E){return this.content.maybeChild(E)}forEach(E){this.content.forEach(E)}nodesBetween(E,U,G,Y=0){this.content.nodesBetween(E,U,G,Y,this)}descendants(E){this.nodesBetween(0,this.content.size,E)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(E,U,G,Y){return this.content.textBetween(E,U,G,Y)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(E){return this==E||this.sameMarkup(E)&&this.content.eq(E.content)}sameMarkup(E){return this.hasMarkup(E.type,E.attrs,E.marks)}hasMarkup(E,U,G){return this.type==E&&compareDeep$1(this.attrs,U||E.defaultAttrs||emptyAttrs)&&Mark$2.sameSet(this.marks,G||Mark$2.none)}copy(E=null){return E==this.content?this:new Node$1(this.type,this.attrs,E,this.marks)}mark(E){return E==this.marks?this:new Node$1(this.type,this.attrs,this.content,E)}cut(E,U=this.content.size){return E==0&&U==this.content.size?this:this.copy(this.content.cut(E,U))}slice(E,U=this.content.size,G=!1){if(E==U)return Slice$1.empty;let Y=this.resolve(E),J=this.resolve(U),Q=G?0:Y.sharedDepth(U),X=Y.start(Q),ee=Y.node(Q).content.cut(Y.pos-X,J.pos-X);return new Slice$1(ee,Y.depth-Q,J.depth-Q)}replace(E,U,G){return replace(this.resolve(E),this.resolve(U),G)}nodeAt(E){for(let U=this;;){let{index:G,offset:Y}=U.content.findIndex(E);if(U=U.maybeChild(G),!U)return null;if(Y==E||U.isText)return U;E-=Y+1}}childAfter(E){let{index:U,offset:G}=this.content.findIndex(E);return{node:this.content.maybeChild(U),index:U,offset:G}}childBefore(E){if(E==0)return{node:null,index:0,offset:0};let{index:U,offset:G}=this.content.findIndex(E);if(G<E)return{node:this.content.child(U),index:U,offset:G};let Y=this.content.child(U-1);return{node:Y,index:U-1,offset:G-Y.nodeSize}}resolve(E){return ResolvedPos.resolveCached(this,E)}resolveNoCache(E){return ResolvedPos.resolve(this,E)}rangeHasMark(E,U,G){let Y=!1;return U>E&&this.nodesBetween(E,U,J=>(G.isInSet(J.marks)&&(Y=!0),!Y)),Y}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let E=this.type.name;return this.content.size&&(E+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,E)}contentMatchAt(E){let U=this.type.contentMatch.matchFragment(this.content,0,E);if(!U)throw new Error("Called contentMatchAt on a node with invalid content");return U}canReplace(E,U,G=Fragment$1.empty,Y=0,J=G.childCount){let Q=this.contentMatchAt(E).matchFragment(G,Y,J),X=Q&&Q.matchFragment(this.content,U);if(!X||!X.validEnd)return!1;for(let Z=Y;Z<J;Z++)if(!this.type.allowsMarks(G.child(Z).marks))return!1;return!0}canReplaceWith(E,U,G,Y){if(Y&&!this.type.allowsMarks(Y))return!1;let J=this.contentMatchAt(E).matchType(G),Q=J&&J.matchFragment(this.content,U);return Q?Q.validEnd:!1}canAppend(E){return E.content.size?this.canReplace(this.childCount,this.childCount,E.content):this.type.compatibleContent(E.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let E=Mark$2.none;for(let U=0;U<this.marks.length;U++)E=this.marks[U].addToSet(E);if(!Mark$2.sameSet(E,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(U=>U.type.name)}`);this.content.forEach(U=>U.check())}toJSON(){let E={type:this.type.name};for(let U in this.attrs){E.attrs=this.attrs;break}return this.content.size&&(E.content=this.content.toJSON()),this.marks.length&&(E.marks=this.marks.map(U=>U.toJSON())),E}static fromJSON(E,U){if(!U)throw new RangeError("Invalid input for Node.fromJSON");let G=null;if(U.marks){if(!Array.isArray(U.marks))throw new RangeError("Invalid mark data for Node.fromJSON");G=U.marks.map(E.markFromJSON)}if(U.type=="text"){if(typeof U.text!="string")throw new RangeError("Invalid text node in JSON");return E.text(U.text,G)}let Y=Fragment$1.fromJSON(E,U.content);return E.nodeType(U.type).create(U.attrs,Y,G)}}Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(E,U,G,Y){if(super(E,U,null,Y),!G)throw new RangeError("Empty text nodes are not allowed");this.text=G}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(E,U){return this.text.slice(E,U)}get nodeSize(){return this.text.length}mark(E){return E==this.marks?this:new TextNode(this.type,this.attrs,this.text,E)}withText(E){return E==this.text?this:new TextNode(this.type,this.attrs,E,this.marks)}cut(E=0,U=this.text.length){return E==0&&U==this.text.length?this:this.withText(this.text.slice(E,U))}eq(E){return this.sameMarkup(E)&&this.text==E.text}toJSON(){let E=super.toJSON();return E.text=this.text,E}}function wrapMarks(R,E){for(let U=R.length-1;U>=0;U--)E=R[U].type.name+"("+E+")";return E}class ContentMatch{constructor(E){this.validEnd=E,this.next=[],this.wrapCache=[]}static parse(E,U){let G=new TokenStream(E,U);if(G.next==null)return ContentMatch.empty;let Y=parseExpr(G);G.next&&G.err("Unexpected trailing text");let J=dfa(nfa(Y));return checkForDeadEnds(J,G),J}matchType(E){for(let U=0;U<this.next.length;U++)if(this.next[U].type==E)return this.next[U].next;return null}matchFragment(E,U=0,G=E.childCount){let Y=this;for(let J=U;Y&&J<G;J++)Y=Y.matchType(E.child(J).type);return Y}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let E=0;E<this.next.length;E++){let{type:U}=this.next[E];if(!(U.isText||U.hasRequiredAttrs()))return U}return null}compatible(E){for(let U=0;U<this.next.length;U++)for(let G=0;G<E.next.length;G++)if(this.next[U].type==E.next[G].type)return!0;return!1}fillBefore(E,U=!1,G=0){let Y=[this];function J(Q,X){let Z=Q.matchFragment(E,G);if(Z&&(!U||Z.validEnd))return Fragment$1.from(X.map(ee=>ee.createAndFill()));for(let ee=0;ee<Q.next.length;ee++){let{type:te,next:ne}=Q.next[ee];if(!(te.isText||te.hasRequiredAttrs())&&Y.indexOf(ne)==-1){Y.push(ne);let oe=J(ne,X.concat(te));if(oe)return oe}}return null}return J(this,[])}findWrapping(E){for(let G=0;G<this.wrapCache.length;G+=2)if(this.wrapCache[G]==E)return this.wrapCache[G+1];let U=this.computeWrapping(E);return this.wrapCache.push(E,U),U}computeWrapping(E){let U=Object.create(null),G=[{match:this,type:null,via:null}];for(;G.length;){let Y=G.shift(),J=Y.match;if(J.matchType(E)){let Q=[];for(let X=Y;X.type;X=X.via)Q.push(X.type);return Q.reverse()}for(let Q=0;Q<J.next.length;Q++){let{type:X,next:Z}=J.next[Q];!X.isLeaf&&!X.hasRequiredAttrs()&&!(X.name in U)&&(!Y.type||Z.validEnd)&&(G.push({match:X.contentMatch,type:X,via:Y}),U[X.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(E){if(E>=this.next.length)throw new RangeError(`There's no ${E}th edge in this content match`);return this.next[E]}toString(){let E=[];function U(G){E.push(G);for(let Y=0;Y<G.next.length;Y++)E.indexOf(G.next[Y].next)==-1&&U(G.next[Y].next)}return U(this),E.map((G,Y)=>{let J=Y+(G.validEnd?"*":" ")+" ";for(let Q=0;Q<G.next.length;Q++)J+=(Q?", ":"")+G.next[Q].type.name+"->"+E.indexOf(G.next[Q].next);return J}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(E,U){this.string=E,this.nodeTypes=U,this.inline=null,this.pos=0,this.tokens=E.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(E){return this.next==E&&(this.pos++||!0)}err(E){throw new SyntaxError(E+" (in content expression '"+this.string+"')")}}function parseExpr(R){let E=[];do E.push(parseExprSeq(R));while(R.eat("|"));return E.length==1?E[0]:{type:"choice",exprs:E}}function parseExprSeq(R){let E=[];do E.push(parseExprSubscript(R));while(R.next&&R.next!=")"&&R.next!="|");return E.length==1?E[0]:{type:"seq",exprs:E}}function parseExprSubscript(R){let E=parseExprAtom(R);for(;;)if(R.eat("+"))E={type:"plus",expr:E};else if(R.eat("*"))E={type:"star",expr:E};else if(R.eat("?"))E={type:"opt",expr:E};else if(R.eat("{"))E=parseExprRange(R,E);else break;return E}function parseNum(R){/\D/.test(R.next)&&R.err("Expected number, got '"+R.next+"'");let E=Number(R.next);return R.pos++,E}function parseExprRange(R,E){let U=parseNum(R),G=U;return R.eat(",")&&(R.next!="}"?G=parseNum(R):G=-1),R.eat("}")||R.err("Unclosed braced range"),{type:"range",min:U,max:G,expr:E}}function resolveName(R,E){let U=R.nodeTypes,G=U[E];if(G)return[G];let Y=[];for(let J in U){let Q=U[J];Q.groups.indexOf(E)>-1&&Y.push(Q)}return Y.length==0&&R.err("No node type or group '"+E+"' found"),Y}function parseExprAtom(R){if(R.eat("(")){let E=parseExpr(R);return R.eat(")")||R.err("Missing closing paren"),E}else if(/\W/.test(R.next))R.err("Unexpected token '"+R.next+"'");else{let E=resolveName(R,R.next).map(U=>(R.inline==null?R.inline=U.isInline:R.inline!=U.isInline&&R.err("Mixing inline and block content"),{type:"name",value:U}));return R.pos++,E.length==1?E[0]:{type:"choice",exprs:E}}}function nfa(R){let E=[[]];return Y(J(R,0),U()),E;function U(){return E.push([])-1}function G(Q,X,Z){let ee={term:Z,to:X};return E[Q].push(ee),ee}function Y(Q,X){Q.forEach(Z=>Z.to=X)}function J(Q,X){if(Q.type=="choice")return Q.exprs.reduce((Z,ee)=>Z.concat(J(ee,X)),[]);if(Q.type=="seq")for(let Z=0;;Z++){let ee=J(Q.exprs[Z],X);if(Z==Q.exprs.length-1)return ee;Y(ee,X=U())}else if(Q.type=="star"){let Z=U();return G(X,Z),Y(J(Q.expr,Z),Z),[G(Z)]}else if(Q.type=="plus"){let Z=U();return Y(J(Q.expr,X),Z),Y(J(Q.expr,Z),Z),[G(Z)]}else{if(Q.type=="opt")return[G(X)].concat(J(Q.expr,X));if(Q.type=="range"){let Z=X;for(let ee=0;ee<Q.min;ee++){let te=U();Y(J(Q.expr,Z),te),Z=te}if(Q.max==-1)Y(J(Q.expr,Z),Z);else for(let ee=Q.min;ee<Q.max;ee++){let te=U();G(Z,te),Y(J(Q.expr,Z),te),Z=te}return[G(Z)]}else{if(Q.type=="name")return[G(X,void 0,Q.value)];throw new Error("Unknown expr type")}}}}function cmp(R,E){return E-R}function nullFrom(R,E){let U=[];return G(E),U.sort(cmp);function G(Y){let J=R[Y];if(J.length==1&&!J[0].term)return G(J[0].to);U.push(Y);for(let Q=0;Q<J.length;Q++){let{term:X,to:Z}=J[Q];!X&&U.indexOf(Z)==-1&&G(Z)}}}function dfa(R){let E=Object.create(null);return U(nullFrom(R,0));function U(G){let Y=[];G.forEach(Q=>{R[Q].forEach(({term:X,to:Z})=>{if(!X)return;let ee;for(let te=0;te<Y.length;te++)Y[te][0]==X&&(ee=Y[te][1]);nullFrom(R,Z).forEach(te=>{ee||Y.push([X,ee=[]]),ee.indexOf(te)==-1&&ee.push(te)})})});let J=E[G.join(",")]=new ContentMatch(G.indexOf(R.length-1)>-1);for(let Q=0;Q<Y.length;Q++){let X=Y[Q][1].sort(cmp);J.next.push({type:Y[Q][0],next:E[X.join(",")]||U(X)})}return J}}function checkForDeadEnds(R,E){for(let U=0,G=[R];U<G.length;U++){let Y=G[U],J=!Y.validEnd,Q=[];for(let X=0;X<Y.next.length;X++){let{type:Z,next:ee}=Y.next[X];Q.push(Z.name),J&&!(Z.isText||Z.hasRequiredAttrs())&&(J=!1),G.indexOf(ee)==-1&&G.push(ee)}J&&E.err("Only non-generatable nodes ("+Q.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs$1(R){let E=Object.create(null);for(let U in R){let G=R[U];if(!G.hasDefault)return null;E[U]=G.default}return E}function computeAttrs$1(R,E){let U=Object.create(null);for(let G in R){let Y=E&&E[G];if(Y===void 0){let J=R[G];if(J.hasDefault)Y=J.default;else throw new RangeError("No value supplied for attribute "+G)}U[G]=Y}return U}function initAttrs$1(R){let E=Object.create(null);if(R)for(let U in R)E[U]=new Attribute$1(R[U]);return E}class NodeType$1{constructor(E,U,G){this.name=E,this.schema=U,this.spec=G,this.markSet=null,this.groups=G.group?G.group.split(" "):[],this.attrs=initAttrs$1(G.attrs),this.defaultAttrs=defaultAttrs$1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(G.inline||E=="text"),this.isText=E=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let E in this.attrs)if(this.attrs[E].isRequired)return!0;return!1}compatibleContent(E){return this==E||this.contentMatch.compatible(E.contentMatch)}computeAttrs(E){return!E&&this.defaultAttrs?this.defaultAttrs:computeAttrs$1(this.attrs,E)}create(E=null,U,G){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(E),Fragment$1.from(U),Mark$2.setFrom(G))}createChecked(E=null,U,G){if(U=Fragment$1.from(U),!this.validContent(U))throw new RangeError("Invalid content for node "+this.name);return new Node$1(this,this.computeAttrs(E),U,Mark$2.setFrom(G))}createAndFill(E=null,U,G){if(E=this.computeAttrs(E),U=Fragment$1.from(U),U.size){let Q=this.contentMatch.fillBefore(U);if(!Q)return null;U=Q.append(U)}let Y=this.contentMatch.matchFragment(U),J=Y&&Y.fillBefore(Fragment$1.empty,!0);return J?new Node$1(this,E,U.append(J),Mark$2.setFrom(G)):null}validContent(E){let U=this.contentMatch.matchFragment(E);if(!U||!U.validEnd)return!1;for(let G=0;G<E.childCount;G++)if(!this.allowsMarks(E.child(G).marks))return!1;return!0}allowsMarkType(E){return this.markSet==null||this.markSet.indexOf(E)>-1}allowsMarks(E){if(this.markSet==null)return!0;for(let U=0;U<E.length;U++)if(!this.allowsMarkType(E[U].type))return!1;return!0}allowedMarks(E){if(this.markSet==null)return E;let U;for(let G=0;G<E.length;G++)this.allowsMarkType(E[G].type)?U&&U.push(E[G]):U||(U=E.slice(0,G));return U?U.length?U:Mark$2.none:E}static compile(E,U){let G=Object.create(null);E.forEach((J,Q)=>G[J]=new NodeType$1(J,U,Q));let Y=U.spec.topNode||"doc";if(!G[Y])throw new RangeError("Schema is missing its top node type ('"+Y+"')");if(!G.text)throw new RangeError("Every schema needs a 'text' type");for(let J in G.text.attrs)throw new RangeError("The text node type should not have attributes");return G}}class Attribute$1{constructor(E){this.hasDefault=Object.prototype.hasOwnProperty.call(E,"default"),this.default=E.default}get isRequired(){return!this.hasDefault}}class MarkType$1{constructor(E,U,G,Y){this.name=E,this.rank=U,this.schema=G,this.spec=Y,this.attrs=initAttrs$1(Y.attrs),this.excluded=null;let J=defaultAttrs$1(this.attrs);this.instance=J?new Mark$2(this,J):null}create(E=null){return!E&&this.instance?this.instance:new Mark$2(this,computeAttrs$1(this.attrs,E))}static compile(E,U){let G=Object.create(null),Y=0;return E.forEach((J,Q)=>G[J]=new MarkType$1(J,Y++,U,Q)),G}removeFromSet(E){for(var U=0;U<E.length;U++)E[U].type==this&&(E=E.slice(0,U).concat(E.slice(U+1)),U--);return E}isInSet(E){for(let U=0;U<E.length;U++)if(E[U].type==this)return E[U]}excludes(E){return this.excluded.indexOf(E)>-1}}class Schema{constructor(E){this.cached=Object.create(null),this.spec={nodes:OrderedMap.from(E.nodes),marks:OrderedMap.from(E.marks||{}),topNode:E.topNode},this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType$1.compile(this.spec.marks,this);let U=Object.create(null);for(let G in this.nodes){if(G in this.marks)throw new RangeError(G+" can not be both a node and a mark");let Y=this.nodes[G],J=Y.spec.content||"",Q=Y.spec.marks;Y.contentMatch=U[J]||(U[J]=ContentMatch.parse(J,this.nodes)),Y.inlineContent=Y.contentMatch.inlineContent,Y.markSet=Q=="_"?null:Q?gatherMarks(this,Q.split(" ")):Q==""||!Y.inlineContent?[]:null}for(let G in this.marks){let Y=this.marks[G],J=Y.spec.excludes;Y.excluded=J==null?[Y]:J==""?[]:gatherMarks(this,J.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(E,U=null,G,Y){if(typeof E=="string")E=this.nodeType(E);else if(E instanceof NodeType$1){if(E.schema!=this)throw new RangeError("Node type from different schema used ("+E.name+")")}else throw new RangeError("Invalid node type: "+E);return E.createChecked(U,G,Y)}text(E,U){let G=this.nodes.text;return new TextNode(G,G.defaultAttrs,E,Mark$2.setFrom(U))}mark(E,U){return typeof E=="string"&&(E=this.marks[E]),E.create(U)}nodeFromJSON(E){return Node$1.fromJSON(this,E)}markFromJSON(E){return Mark$2.fromJSON(this,E)}nodeType(E){let U=this.nodes[E];if(!U)throw new RangeError("Unknown node type: "+E);return U}}function gatherMarks(R,E){let U=[];for(let G=0;G<E.length;G++){let Y=E[G],J=R.marks[Y],Q=J;if(J)U.push(J);else for(let X in R.marks){let Z=R.marks[X];(Y=="_"||Z.spec.group&&Z.spec.group.split(" ").indexOf(Y)>-1)&&U.push(Q=Z)}if(!Q)throw new SyntaxError("Unknown mark type: '"+E[G]+"'")}return U}class DOMParser$1{constructor(E,U){this.schema=E,this.rules=U,this.tags=[],this.styles=[],U.forEach(G=>{G.tag?this.tags.push(G):G.style&&this.styles.push(G)}),this.normalizeLists=!this.tags.some(G=>{if(!/^(ul|ol)\b/.test(G.tag)||!G.node)return!1;let Y=E.nodes[G.node];return Y.contentMatch.matchType(Y)})}parse(E,U={}){let G=new ParseContext$1(this,U,!1);return G.addAll(E,U.from,U.to),G.finish()}parseSlice(E,U={}){let G=new ParseContext$1(this,U,!0);return G.addAll(E,U.from,U.to),Slice$1.maxOpen(G.finish())}matchTag(E,U,G){for(let Y=G?this.tags.indexOf(G)+1:0;Y<this.tags.length;Y++){let J=this.tags[Y];if(matches$2(E,J.tag)&&(J.namespace===void 0||E.namespaceURI==J.namespace)&&(!J.context||U.matchesContext(J.context))){if(J.getAttrs){let Q=J.getAttrs(E);if(Q===!1)continue;J.attrs=Q||void 0}return J}}}matchStyle(E,U,G,Y){for(let J=Y?this.styles.indexOf(Y)+1:0;J<this.styles.length;J++){let Q=this.styles[J],X=Q.style;if(!(X.indexOf(E)!=0||Q.context&&!G.matchesContext(Q.context)||X.length>E.length&&(X.charCodeAt(E.length)!=61||X.slice(E.length+1)!=U))){if(Q.getAttrs){let Z=Q.getAttrs(U);if(Z===!1)continue;Q.attrs=Z||void 0}return Q}}}static schemaRules(E){let U=[];function G(Y){let J=Y.priority==null?50:Y.priority,Q=0;for(;Q<U.length;Q++){let X=U[Q];if((X.priority==null?50:X.priority)<J)break}U.splice(Q,0,Y)}for(let Y in E.marks){let J=E.marks[Y].spec.parseDOM;J&&J.forEach(Q=>{G(Q=copy$3(Q)),Q.mark=Y})}for(let Y in E.nodes){let J=E.nodes[Y].spec.parseDOM;J&&J.forEach(Q=>{G(Q=copy$3(Q)),Q.node=Y})}return U}static fromSchema(E){return E.cached.domParser||(E.cached.domParser=new DOMParser$1(E,DOMParser$1.schemaRules(E)))}}const blockTags$1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags$1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags$1={ol:!0,ul:!0},OPT_PRESERVE_WS$1=1,OPT_PRESERVE_WS_FULL$1=2,OPT_OPEN_LEFT$1=4;function wsOptionsFor$1(R,E,U){return E!=null?(E?OPT_PRESERVE_WS$1:0)|(E==="full"?OPT_PRESERVE_WS_FULL$1:0):R&&R.whitespace=="pre"?OPT_PRESERVE_WS$1|OPT_PRESERVE_WS_FULL$1:U&~OPT_OPEN_LEFT$1}class NodeContext$1{constructor(E,U,G,Y,J,Q,X){this.type=E,this.attrs=U,this.marks=G,this.pendingMarks=Y,this.solid=J,this.options=X,this.content=[],this.activeMarks=Mark$2.none,this.stashMarks=[],this.match=Q||(X&OPT_OPEN_LEFT$1?null:E.contentMatch)}findWrapping(E){if(!this.match){if(!this.type)return[];let U=this.type.contentMatch.fillBefore(Fragment$1.from(E));if(U)this.match=this.type.contentMatch.matchFragment(U);else{let G=this.type.contentMatch,Y;return(Y=G.findWrapping(E.type))?(this.match=G,Y):null}}return this.match.findWrapping(E.type)}finish(E){if(!(this.options&OPT_PRESERVE_WS$1)){let G=this.content[this.content.length-1],Y;if(G&&G.isText&&(Y=/[ \t\r\n\u000c]+$/.exec(G.text))){let J=G;G.text.length==Y[0].length?this.content.pop():this.content[this.content.length-1]=J.withText(J.text.slice(0,J.text.length-Y[0].length))}}let U=Fragment$1.from(this.content);return!E&&this.match&&(U=U.append(this.match.fillBefore(Fragment$1.empty,!0))),this.type?this.type.create(this.attrs,U,this.marks):U}popFromStashMark(E){for(let U=this.stashMarks.length-1;U>=0;U--)if(E.eq(this.stashMarks[U]))return this.stashMarks.splice(U,1)[0]}applyPending(E){for(let U=0,G=this.pendingMarks;U<G.length;U++){let Y=G[U];(this.type?this.type.allowsMarkType(Y.type):markMayApply$1(Y.type,E))&&!Y.isInSet(this.activeMarks)&&(this.activeMarks=Y.addToSet(this.activeMarks),this.pendingMarks=Y.removeFromSet(this.pendingMarks))}}inlineContext(E){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:E.parentNode&&!blockTags$1.hasOwnProperty(E.parentNode.nodeName.toLowerCase())}}class ParseContext$1{constructor(E,U,G){this.parser=E,this.options=U,this.isOpen=G,this.open=0;let Y=U.topNode,J,Q=wsOptionsFor$1(null,U.preserveWhitespace,0)|(G?OPT_OPEN_LEFT$1:0);Y?J=new NodeContext$1(Y.type,Y.attrs,Mark$2.none,Mark$2.none,!0,U.topMatch||Y.type.contentMatch,Q):G?J=new NodeContext$1(null,null,Mark$2.none,Mark$2.none,!0,null,Q):J=new NodeContext$1(E.schema.topNodeType,null,Mark$2.none,Mark$2.none,!0,null,Q),this.nodes=[J],this.find=U.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(E){if(E.nodeType==3)this.addTextNode(E);else if(E.nodeType==1){let U=E.getAttribute("style"),G=U?this.readStyles(parseStyles$1(U)):null,Y=this.top;if(G!=null)for(let J=0;J<G.length;J++)this.addPendingMark(G[J]);if(this.addElement(E),G!=null)for(let J=0;J<G.length;J++)this.removePendingMark(G[J],Y)}}addTextNode(E){let U=E.nodeValue,G=this.top;if(G.options&OPT_PRESERVE_WS_FULL$1||G.inlineContext(E)||/[^ \t\r\n\u000c]/.test(U)){if(G.options&OPT_PRESERVE_WS$1)G.options&OPT_PRESERVE_WS_FULL$1?U=U.replace(/\r\n?/g,`
`):U=U.replace(/\r?\n|\r/g," ");else if(U=U.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(U)&&this.open==this.nodes.length-1){let Y=G.content[G.content.length-1],J=E.previousSibling;(!Y||J&&J.nodeName=="BR"||Y.isText&&/[ \t\r\n\u000c]$/.test(Y.text))&&(U=U.slice(1))}U&&this.insertNode(this.parser.schema.text(U)),this.findInText(E)}else this.findInside(E)}addElement(E,U){let G=E.nodeName.toLowerCase(),Y;listTags$1.hasOwnProperty(G)&&this.parser.normalizeLists&&normalizeList$1(E);let J=this.options.ruleFromNode&&this.options.ruleFromNode(E)||(Y=this.parser.matchTag(E,this,U));if(J?J.ignore:ignoreTags$1.hasOwnProperty(G))this.findInside(E),this.ignoreFallback(E);else if(!J||J.skip||J.closeParent){J&&J.closeParent?this.open=Math.max(0,this.open-1):J&&J.skip.nodeType&&(E=J.skip);let Q,X=this.top,Z=this.needsBlock;if(blockTags$1.hasOwnProperty(G))Q=!0,X.type||(this.needsBlock=!0);else if(!E.firstChild){this.leafFallback(E);return}this.addAll(E),Q&&this.sync(X),this.needsBlock=Z}else this.addElementByRule(E,J,J.consuming===!1?Y:void 0)}leafFallback(E){E.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(E.ownerDocument.createTextNode(`
`))}ignoreFallback(E){E.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(E){let U=Mark$2.none;e:for(let G=0;G<E.length;G+=2)for(let Y=void 0;;){let J=this.parser.matchStyle(E[G],E[G+1],this,Y);if(!J)continue e;if(J.ignore)return null;if(U=this.parser.schema.marks[J.mark].create(J.attrs).addToSet(U),J.consuming===!1)Y=J;else break}return U}addElementByRule(E,U,G){let Y,J,Q;U.node?(J=this.parser.schema.nodes[U.node],J.isLeaf?this.insertNode(J.create(U.attrs))||this.leafFallback(E):Y=this.enter(J,U.attrs||null,U.preserveWhitespace)):(Q=this.parser.schema.marks[U.mark].create(U.attrs),this.addPendingMark(Q));let X=this.top;if(J&&J.isLeaf)this.findInside(E);else if(G)this.addElement(E,G);else if(U.getContent)this.findInside(E),U.getContent(E,this.parser.schema).forEach(Z=>this.insertNode(Z));else{let Z=E;typeof U.contentElement=="string"?Z=E.querySelector(U.contentElement):typeof U.contentElement=="function"?Z=U.contentElement(E):U.contentElement&&(Z=U.contentElement),this.findAround(E,Z,!0),this.addAll(Z)}Y&&this.sync(X)&&this.open--,Q&&this.removePendingMark(Q,X)}addAll(E,U,G){let Y=U||0;for(let J=U?E.childNodes[U]:E.firstChild,Q=G==null?null:E.childNodes[G];J!=Q;J=J.nextSibling,++Y)this.findAtPoint(E,Y),this.addDOM(J);this.findAtPoint(E,Y)}findPlace(E){let U,G;for(let Y=this.open;Y>=0;Y--){let J=this.nodes[Y],Q=J.findWrapping(E);if(Q&&(!U||U.length>Q.length)&&(U=Q,G=J,!Q.length)||J.solid)break}if(!U)return!1;this.sync(G);for(let Y=0;Y<U.length;Y++)this.enterInner(U[Y],null,!1);return!0}insertNode(E){if(E.isInline&&this.needsBlock&&!this.top.type){let U=this.textblockFromContext();U&&this.enterInner(U)}if(this.findPlace(E)){this.closeExtra();let U=this.top;U.applyPending(E.type),U.match&&(U.match=U.match.matchType(E.type));let G=U.activeMarks;for(let Y=0;Y<E.marks.length;Y++)(!U.type||U.type.allowsMarkType(E.marks[Y].type))&&(G=E.marks[Y].addToSet(G));return U.content.push(E.mark(G)),!0}return!1}enter(E,U,G){let Y=this.findPlace(E.create(U));return Y&&this.enterInner(E,U,!0,G),Y}enterInner(E,U=null,G=!1,Y){this.closeExtra();let J=this.top;J.applyPending(E),J.match=J.match&&J.match.matchType(E);let Q=wsOptionsFor$1(E,Y,J.options);J.options&OPT_OPEN_LEFT$1&&J.content.length==0&&(Q|=OPT_OPEN_LEFT$1),this.nodes.push(new NodeContext$1(E,U,J.activeMarks,J.pendingMarks,G,null,Q)),this.open++}closeExtra(E=!1){let U=this.nodes.length-1;if(U>this.open){for(;U>this.open;U--)this.nodes[U-1].content.push(this.nodes[U].finish(E));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(E){for(let U=this.open;U>=0;U--)if(this.nodes[U]==E)return this.open=U,!0;return!1}get currentPos(){this.closeExtra();let E=0;for(let U=this.open;U>=0;U--){let G=this.nodes[U].content;for(let Y=G.length-1;Y>=0;Y--)E+=G[Y].nodeSize;U&&E++}return E}findAtPoint(E,U){if(this.find)for(let G=0;G<this.find.length;G++)this.find[G].node==E&&this.find[G].offset==U&&(this.find[G].pos=this.currentPos)}findInside(E){if(this.find)for(let U=0;U<this.find.length;U++)this.find[U].pos==null&&E.nodeType==1&&E.contains(this.find[U].node)&&(this.find[U].pos=this.currentPos)}findAround(E,U,G){if(E!=U&&this.find)for(let Y=0;Y<this.find.length;Y++)this.find[Y].pos==null&&E.nodeType==1&&E.contains(this.find[Y].node)&&U.compareDocumentPosition(this.find[Y].node)&(G?2:4)&&(this.find[Y].pos=this.currentPos)}findInText(E){if(this.find)for(let U=0;U<this.find.length;U++)this.find[U].node==E&&(this.find[U].pos=this.currentPos-(E.nodeValue.length-this.find[U].offset))}matchesContext(E){if(E.indexOf("|")>-1)return E.split(/\s*\|\s*/).some(this.matchesContext,this);let U=E.split("/"),G=this.options.context,Y=!this.isOpen&&(!G||G.parent.type==this.nodes[0].type),J=-(G?G.depth+1:0)+(Y?0:1),Q=(X,Z)=>{for(;X>=0;X--){let ee=U[X];if(ee==""){if(X==U.length-1||X==0)continue;for(;Z>=J;Z--)if(Q(X-1,Z))return!0;return!1}else{let te=Z>0||Z==0&&Y?this.nodes[Z].type:G&&Z>=J?G.node(Z-J).type:null;if(!te||te.name!=ee&&te.groups.indexOf(ee)==-1)return!1;Z--}}return!0};return Q(U.length-1,this.open)}textblockFromContext(){let E=this.options.context;if(E)for(let U=E.depth;U>=0;U--){let G=E.node(U).contentMatchAt(E.indexAfter(U)).defaultType;if(G&&G.isTextblock&&G.defaultAttrs)return G}for(let U in this.parser.schema.nodes){let G=this.parser.schema.nodes[U];if(G.isTextblock&&G.defaultAttrs)return G}}addPendingMark(E){let U=findSameMarkInSet$1(E,this.top.pendingMarks);U&&this.top.stashMarks.push(U),this.top.pendingMarks=E.addToSet(this.top.pendingMarks)}removePendingMark(E,U){for(let G=this.open;G>=0;G--){let Y=this.nodes[G];if(Y.pendingMarks.lastIndexOf(E)>-1)Y.pendingMarks=E.removeFromSet(Y.pendingMarks);else{Y.activeMarks=E.removeFromSet(Y.activeMarks);let Q=Y.popFromStashMark(E);Q&&Y.type&&Y.type.allowsMarkType(Q.type)&&(Y.activeMarks=Q.addToSet(Y.activeMarks))}if(Y==U)break}}}function normalizeList$1(R){for(let E=R.firstChild,U=null;E;E=E.nextSibling){let G=E.nodeType==1?E.nodeName.toLowerCase():null;G&&listTags$1.hasOwnProperty(G)&&U?(U.appendChild(E),E=U):G=="li"?U=E:G&&(U=null)}}function matches$2(R,E){return(R.matches||R.msMatchesSelector||R.webkitMatchesSelector||R.mozMatchesSelector).call(R,E)}function parseStyles$1(R){let E=/\s*([\w-]+)\s*:\s*([^;]+)/g,U,G=[];for(;U=E.exec(R);)G.push(U[1],U[2].trim());return G}function copy$3(R){let E={};for(let U in R)E[U]=R[U];return E}function markMayApply$1(R,E){let U=E.schema.nodes;for(let G in U){let Y=U[G];if(!Y.allowsMarkType(R))continue;let J=[],Q=X=>{J.push(X);for(let Z=0;Z<X.edgeCount;Z++){let{type:ee,next:te}=X.edge(Z);if(ee==E||J.indexOf(te)<0&&Q(te))return!0}};if(Q(Y.contentMatch))return!0}}function findSameMarkInSet$1(R,E){for(let U=0;U<E.length;U++)if(R.eq(E[U]))return E[U]}class DOMSerializer$1{constructor(E,U){this.nodes=E,this.marks=U}serializeFragment(E,U={},G){G||(G=doc$2(U).createDocumentFragment());let Y=G,J=[];return E.forEach(Q=>{if(J.length||Q.marks.length){let X=0,Z=0;for(;X<J.length&&Z<Q.marks.length;){let ee=Q.marks[Z];if(!this.marks[ee.type.name]){Z++;continue}if(!ee.eq(J[X][0])||ee.type.spec.spanning===!1)break;X++,Z++}for(;X<J.length;)Y=J.pop()[1];for(;Z<Q.marks.length;){let ee=Q.marks[Z++],te=this.serializeMark(ee,Q.isInline,U);te&&(J.push([ee,Y]),Y.appendChild(te.dom),Y=te.contentDOM||te.dom)}}Y.appendChild(this.serializeNodeInner(Q,U))}),G}serializeNodeInner(E,U){let{dom:G,contentDOM:Y}=DOMSerializer$1.renderSpec(doc$2(U),this.nodes[E.type.name](E));if(Y){if(E.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(E.content,U,Y)}return G}serializeNode(E,U={}){let G=this.serializeNodeInner(E,U);for(let Y=E.marks.length-1;Y>=0;Y--){let J=this.serializeMark(E.marks[Y],E.isInline,U);J&&((J.contentDOM||J.dom).appendChild(G),G=J.dom)}return G}serializeMark(E,U,G={}){let Y=this.marks[E.type.name];return Y&&DOMSerializer$1.renderSpec(doc$2(G),Y(E,U))}static renderSpec(E,U,G=null){if(typeof U=="string")return{dom:E.createTextNode(U)};if(U.nodeType!=null)return{dom:U};if(U.dom&&U.dom.nodeType!=null)return U;let Y=U[0],J=Y.indexOf(" ");J>0&&(G=Y.slice(0,J),Y=Y.slice(J+1));let Q,X=G?E.createElementNS(G,Y):E.createElement(Y),Z=U[1],ee=1;if(Z&&typeof Z=="object"&&Z.nodeType==null&&!Array.isArray(Z)){ee=2;for(let te in Z)if(Z[te]!=null){let ne=te.indexOf(" ");ne>0?X.setAttributeNS(te.slice(0,ne),te.slice(ne+1),Z[te]):X.setAttribute(te,Z[te])}}for(let te=ee;te<U.length;te++){let ne=U[te];if(ne===0){if(te<U.length-1||te>ee)throw new RangeError("Content hole must be the only child of its parent node");return{dom:X,contentDOM:X}}else{let{dom:oe,contentDOM:ce}=DOMSerializer$1.renderSpec(E,ne,G);if(X.appendChild(oe),ce){if(Q)throw new RangeError("Multiple content holes");Q=ce}}}return{dom:X,contentDOM:Q}}static fromSchema(E){return E.cached.domSerializer||(E.cached.domSerializer=new DOMSerializer$1(this.nodesFromSchema(E),this.marksFromSchema(E)))}static nodesFromSchema(E){let U=gatherToDOM$1(E.nodes);return U.text||(U.text=G=>G.text),U}static marksFromSchema(E){return gatherToDOM$1(E.marks)}}function gatherToDOM$1(R){let E={};for(let U in R){let G=R[U].spec.toDOM;G&&(E[U]=G)}return E}function doc$2(R){return R.document||window.document}function findDiffStart(R,E,U){for(let G=0;;G++){if(G==R.childCount||G==E.childCount)return R.childCount==E.childCount?null:U;let Y=R.child(G),J=E.child(G);if(Y==J){U+=Y.nodeSize;continue}if(!Y.sameMarkup(J))return U;if(Y.isText&&Y.text!=J.text){for(let Q=0;Y.text[Q]==J.text[Q];Q++)U++;return U}if(Y.content.size||J.content.size){let Q=findDiffStart(Y.content,J.content,U+1);if(Q!=null)return Q}U+=Y.nodeSize}}function findDiffEnd(R,E,U,G){for(let Y=R.childCount,J=E.childCount;;){if(Y==0||J==0)return Y==J?null:{a:U,b:G};let Q=R.child(--Y),X=E.child(--J),Z=Q.nodeSize;if(Q==X){U-=Z,G-=Z;continue}if(!Q.sameMarkup(X))return{a:U,b:G};if(Q.isText&&Q.text!=X.text){let ee=0,te=Math.min(Q.text.length,X.text.length);for(;ee<te&&Q.text[Q.text.length-ee-1]==X.text[X.text.length-ee-1];)ee++,U--,G--;return{a:U,b:G}}if(Q.content.size||X.content.size){let ee=findDiffEnd(Q.content,X.content,U-1,G-1);if(ee)return ee}U-=Z,G-=Z}}class Fragment{constructor(E,U){if(this.content=E,this.size=U||0,U==null)for(let G=0;G<E.length;G++)this.size+=E[G].nodeSize}nodesBetween(E,U,G,Y=0,J){for(let Q=0,X=0;X<U;Q++){let Z=this.content[Q],ee=X+Z.nodeSize;if(ee>E&&G(Z,Y+X,J||null,Q)!==!1&&Z.content.size){let te=X+1;Z.nodesBetween(Math.max(0,E-te),Math.min(Z.content.size,U-te),G,Y+te)}X=ee}}descendants(E){this.nodesBetween(0,this.size,E)}textBetween(E,U,G,Y){let J="",Q=!0;return this.nodesBetween(E,U,(X,Z)=>{X.isText?(J+=X.text.slice(Math.max(E,Z)-Z,U-Z),Q=!G):X.isLeaf?(Y?J+=typeof Y=="function"?Y(X):Y:X.type.spec.leafText&&(J+=X.type.spec.leafText(X)),Q=!G):!Q&&X.isBlock&&(J+=G,Q=!0)},0),J}append(E){if(!E.size)return this;if(!this.size)return E;let U=this.lastChild,G=E.firstChild,Y=this.content.slice(),J=0;for(U.isText&&U.sameMarkup(G)&&(Y[Y.length-1]=U.withText(U.text+G.text),J=1);J<E.content.length;J++)Y.push(E.content[J]);return new Fragment(Y,this.size+E.size)}cut(E,U=this.size){if(E==0&&U==this.size)return this;let G=[],Y=0;if(U>E)for(let J=0,Q=0;Q<U;J++){let X=this.content[J],Z=Q+X.nodeSize;Z>E&&((Q<E||Z>U)&&(X.isText?X=X.cut(Math.max(0,E-Q),Math.min(X.text.length,U-Q)):X=X.cut(Math.max(0,E-Q-1),Math.min(X.content.size,U-Q-1))),G.push(X),Y+=X.nodeSize),Q=Z}return new Fragment(G,Y)}cutByIndex(E,U){return E==U?Fragment.empty:E==0&&U==this.content.length?this:new Fragment(this.content.slice(E,U))}replaceChild(E,U){let G=this.content[E];if(G==U)return this;let Y=this.content.slice(),J=this.size+U.nodeSize-G.nodeSize;return Y[E]=U,new Fragment(Y,J)}addToStart(E){return new Fragment([E].concat(this.content),this.size+E.nodeSize)}addToEnd(E){return new Fragment(this.content.concat(E),this.size+E.nodeSize)}eq(E){if(this.content.length!=E.content.length)return!1;for(let U=0;U<this.content.length;U++)if(!this.content[U].eq(E.content[U]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(E){let U=this.content[E];if(!U)throw new RangeError("Index "+E+" out of range for "+this);return U}maybeChild(E){return this.content[E]||null}forEach(E){for(let U=0,G=0;U<this.content.length;U++){let Y=this.content[U];E(Y,G,U),G+=Y.nodeSize}}findDiffStart(E,U=0){return findDiffStart(this,E,U)}findDiffEnd(E,U=this.size,G=E.size){return findDiffEnd(this,E,U,G)}findIndex(E,U=-1){if(E==0)return retIndex(0,E);if(E==this.size)return retIndex(this.content.length,E);if(E>this.size||E<0)throw new RangeError(`Position ${E} outside of fragment (${this})`);for(let G=0,Y=0;;G++){let J=this.child(G),Q=Y+J.nodeSize;if(Q>=E)return Q==E||U>0?retIndex(G+1,Q):retIndex(G,Y);Y=Q}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(E=>E.toJSON()):null}static fromJSON(E,U){if(!U)return Fragment.empty;if(!Array.isArray(U))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(U.map(E.nodeFromJSON))}static fromArray(E){if(!E.length)return Fragment.empty;let U,G=0;for(let Y=0;Y<E.length;Y++){let J=E[Y];G+=J.nodeSize,Y&&J.isText&&E[Y-1].sameMarkup(J)?(U||(U=E.slice(0,Y)),U[U.length-1]=J.withText(U[U.length-1].text+J.text)):U&&U.push(J)}return new Fragment(U||E,G)}static from(E){if(!E)return Fragment.empty;if(E instanceof Fragment)return E;if(Array.isArray(E))return this.fromArray(E);if(E.attrs)return new Fragment([E],E.nodeSize);throw new RangeError("Can not convert "+E+" to a Fragment"+(E.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(R,E){return found.index=R,found.offset=E,found}function compareDeep(R,E){if(R===E)return!0;if(!(R&&typeof R=="object")||!(E&&typeof E=="object"))return!1;let U=Array.isArray(R);if(Array.isArray(E)!=U)return!1;if(U){if(R.length!=E.length)return!1;for(let G=0;G<R.length;G++)if(!compareDeep(R[G],E[G]))return!1}else{for(let G in R)if(!(G in E)||!compareDeep(R[G],E[G]))return!1;for(let G in E)if(!(G in R))return!1}return!0}class Mark$1{constructor(E,U){this.type=E,this.attrs=U}addToSet(E){let U,G=!1;for(let Y=0;Y<E.length;Y++){let J=E[Y];if(this.eq(J))return E;if(this.type.excludes(J.type))U||(U=E.slice(0,Y));else{if(J.type.excludes(this.type))return E;!G&&J.type.rank>this.type.rank&&(U||(U=E.slice(0,Y)),U.push(this),G=!0),U&&U.push(J)}}return U||(U=E.slice()),G||U.push(this),U}removeFromSet(E){for(let U=0;U<E.length;U++)if(this.eq(E[U]))return E.slice(0,U).concat(E.slice(U+1));return E}isInSet(E){for(let U=0;U<E.length;U++)if(this.eq(E[U]))return!0;return!1}eq(E){return this==E||this.type==E.type&&compareDeep(this.attrs,E.attrs)}toJSON(){let E={type:this.type.name};for(let U in this.attrs){E.attrs=this.attrs;break}return E}static fromJSON(E,U){if(!U)throw new RangeError("Invalid input for Mark.fromJSON");let G=E.marks[U.type];if(!G)throw new RangeError(`There is no mark type ${U.type} in this schema`);return G.create(U.attrs)}static sameSet(E,U){if(E==U)return!0;if(E.length!=U.length)return!1;for(let G=0;G<E.length;G++)if(!E[G].eq(U[G]))return!1;return!0}static setFrom(E){if(!E||Array.isArray(E)&&E.length==0)return Mark$1.none;if(E instanceof Mark$1)return[E];let U=E.slice();return U.sort((G,Y)=>G.type.rank-Y.type.rank),U}}Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(E,U,G){this.content=E,this.openStart=U,this.openEnd=G}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(E,U){let G=insertInto(this.content,E+this.openStart,U);return G&&new Slice(G,this.openStart,this.openEnd)}removeBetween(E,U){return new Slice(removeRange(this.content,E+this.openStart,U+this.openStart),this.openStart,this.openEnd)}eq(E){return this.content.eq(E.content)&&this.openStart==E.openStart&&this.openEnd==E.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let E={content:this.content.toJSON()};return this.openStart>0&&(E.openStart=this.openStart),this.openEnd>0&&(E.openEnd=this.openEnd),E}static fromJSON(E,U){if(!U)return Slice.empty;let G=U.openStart||0,Y=U.openEnd||0;if(typeof G!="number"||typeof Y!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(E,U.content),G,Y)}static maxOpen(E,U=!0){let G=0,Y=0;for(let J=E.firstChild;J&&!J.isLeaf&&(U||!J.type.spec.isolating);J=J.firstChild)G++;for(let J=E.lastChild;J&&!J.isLeaf&&(U||!J.type.spec.isolating);J=J.lastChild)Y++;return new Slice(E,G,Y)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(R,E,U){let{index:G,offset:Y}=R.findIndex(E),J=R.maybeChild(G),{index:Q,offset:X}=R.findIndex(U);if(Y==E||J.isText){if(X!=U&&!R.child(Q).isText)throw new RangeError("Removing non-flat range");return R.cut(0,E).append(R.cut(U))}if(G!=Q)throw new RangeError("Removing non-flat range");return R.replaceChild(G,J.copy(removeRange(J.content,E-Y-1,U-Y-1)))}function insertInto(R,E,U,G){let{index:Y,offset:J}=R.findIndex(E),Q=R.maybeChild(Y);if(J==E||Q.isText)return G&&!G.canReplace(Y,Y,U)?null:R.cut(0,E).append(U).append(R.cut(E));let X=insertInto(Q.content,E-J-1,U);return X&&R.replaceChild(Y,Q.copy(X))}function defaultAttrs(R){let E=Object.create(null);for(let U in R){let G=R[U];if(!G.hasDefault)return null;E[U]=G.default}return E}function computeAttrs(R,E){let U=Object.create(null);for(let G in R){let Y=E&&E[G];if(Y===void 0){let J=R[G];if(J.hasDefault)Y=J.default;else throw new RangeError("No value supplied for attribute "+G)}U[G]=Y}return U}function initAttrs(R){let E=Object.create(null);if(R)for(let U in R)E[U]=new Attribute(R[U]);return E}class Attribute{constructor(E){this.hasDefault=Object.prototype.hasOwnProperty.call(E,"default"),this.default=E.default}get isRequired(){return!this.hasDefault}}class MarkType{constructor(E,U,G,Y){this.name=E,this.rank=U,this.schema=G,this.spec=Y,this.attrs=initAttrs(Y.attrs),this.excluded=null;let J=defaultAttrs(this.attrs);this.instance=J?new Mark$1(this,J):null}create(E=null){return!E&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,E))}static compile(E,U){let G=Object.create(null),Y=0;return E.forEach((J,Q)=>G[J]=new MarkType(J,Y++,U,Q)),G}removeFromSet(E){for(var U=0;U<E.length;U++)E[U].type==this&&(E=E.slice(0,U).concat(E.slice(U+1)),U--);return E}isInSet(E){for(let U=0;U<E.length;U++)if(E[U].type==this)return E[U]}excludes(E){return this.excluded.indexOf(E)>-1}}class DOMParser{constructor(E,U){this.schema=E,this.rules=U,this.tags=[],this.styles=[],U.forEach(G=>{G.tag?this.tags.push(G):G.style&&this.styles.push(G)}),this.normalizeLists=!this.tags.some(G=>{if(!/^(ul|ol)\b/.test(G.tag)||!G.node)return!1;let Y=E.nodes[G.node];return Y.contentMatch.matchType(Y)})}parse(E,U={}){let G=new ParseContext(this,U,!1);return G.addAll(E,U.from,U.to),G.finish()}parseSlice(E,U={}){let G=new ParseContext(this,U,!0);return G.addAll(E,U.from,U.to),Slice.maxOpen(G.finish())}matchTag(E,U,G){for(let Y=G?this.tags.indexOf(G)+1:0;Y<this.tags.length;Y++){let J=this.tags[Y];if(matches$1(E,J.tag)&&(J.namespace===void 0||E.namespaceURI==J.namespace)&&(!J.context||U.matchesContext(J.context))){if(J.getAttrs){let Q=J.getAttrs(E);if(Q===!1)continue;J.attrs=Q||void 0}return J}}}matchStyle(E,U,G,Y){for(let J=Y?this.styles.indexOf(Y)+1:0;J<this.styles.length;J++){let Q=this.styles[J],X=Q.style;if(!(X.indexOf(E)!=0||Q.context&&!G.matchesContext(Q.context)||X.length>E.length&&(X.charCodeAt(E.length)!=61||X.slice(E.length+1)!=U))){if(Q.getAttrs){let Z=Q.getAttrs(U);if(Z===!1)continue;Q.attrs=Z||void 0}return Q}}}static schemaRules(E){let U=[];function G(Y){let J=Y.priority==null?50:Y.priority,Q=0;for(;Q<U.length;Q++){let X=U[Q];if((X.priority==null?50:X.priority)<J)break}U.splice(Q,0,Y)}for(let Y in E.marks){let J=E.marks[Y].spec.parseDOM;J&&J.forEach(Q=>{G(Q=copy$2(Q)),Q.mark||Q.ignore||Q.clearMark||(Q.mark=Y)})}for(let Y in E.nodes){let J=E.nodes[Y].spec.parseDOM;J&&J.forEach(Q=>{G(Q=copy$2(Q)),Q.node||Q.ignore||Q.mark||(Q.node=Y)})}return U}static fromSchema(E){return E.cached.domParser||(E.cached.domParser=new DOMParser(E,DOMParser.schemaRules(E)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(R,E,U){return E!=null?(E?OPT_PRESERVE_WS:0)|(E==="full"?OPT_PRESERVE_WS_FULL:0):R&&R.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:U&~OPT_OPEN_LEFT}class NodeContext{constructor(E,U,G,Y,J,Q,X){this.type=E,this.attrs=U,this.marks=G,this.pendingMarks=Y,this.solid=J,this.options=X,this.content=[],this.activeMarks=Mark$1.none,this.stashMarks=[],this.match=Q||(X&OPT_OPEN_LEFT?null:E.contentMatch)}findWrapping(E){if(!this.match){if(!this.type)return[];let U=this.type.contentMatch.fillBefore(Fragment.from(E));if(U)this.match=this.type.contentMatch.matchFragment(U);else{let G=this.type.contentMatch,Y;return(Y=G.findWrapping(E.type))?(this.match=G,Y):null}}return this.match.findWrapping(E.type)}finish(E){if(!(this.options&OPT_PRESERVE_WS)){let G=this.content[this.content.length-1],Y;if(G&&G.isText&&(Y=/[ \t\r\n\u000c]+$/.exec(G.text))){let J=G;G.text.length==Y[0].length?this.content.pop():this.content[this.content.length-1]=J.withText(J.text.slice(0,J.text.length-Y[0].length))}}let U=Fragment.from(this.content);return!E&&this.match&&(U=U.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,U,this.marks):U}popFromStashMark(E){for(let U=this.stashMarks.length-1;U>=0;U--)if(E.eq(this.stashMarks[U]))return this.stashMarks.splice(U,1)[0]}applyPending(E){for(let U=0,G=this.pendingMarks;U<G.length;U++){let Y=G[U];(this.type?this.type.allowsMarkType(Y.type):markMayApply(Y.type,E))&&!Y.isInSet(this.activeMarks)&&(this.activeMarks=Y.addToSet(this.activeMarks),this.pendingMarks=Y.removeFromSet(this.pendingMarks))}}inlineContext(E){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:E.parentNode&&!blockTags.hasOwnProperty(E.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(E,U,G){this.parser=E,this.options=U,this.isOpen=G,this.open=0;let Y=U.topNode,J,Q=wsOptionsFor(null,U.preserveWhitespace,0)|(G?OPT_OPEN_LEFT:0);Y?J=new NodeContext(Y.type,Y.attrs,Mark$1.none,Mark$1.none,!0,U.topMatch||Y.type.contentMatch,Q):G?J=new NodeContext(null,null,Mark$1.none,Mark$1.none,!0,null,Q):J=new NodeContext(E.schema.topNodeType,null,Mark$1.none,Mark$1.none,!0,null,Q),this.nodes=[J],this.find=U.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(E){if(E.nodeType==3)this.addTextNode(E);else if(E.nodeType==1){let U=E.getAttribute("style");if(!U)this.addElement(E);else{let G=this.readStyles(parseStyles(U));if(!G)return;let[Y,J]=G,Q=this.top;for(let X=0;X<J.length;X++)this.removePendingMark(J[X],Q);for(let X=0;X<Y.length;X++)this.addPendingMark(Y[X]);this.addElement(E);for(let X=0;X<Y.length;X++)this.removePendingMark(Y[X],Q);for(let X=0;X<J.length;X++)this.addPendingMark(J[X])}}}addTextNode(E){let U=E.nodeValue,G=this.top;if(G.options&OPT_PRESERVE_WS_FULL||G.inlineContext(E)||/[^ \t\r\n\u000c]/.test(U)){if(G.options&OPT_PRESERVE_WS)G.options&OPT_PRESERVE_WS_FULL?U=U.replace(/\r\n?/g,`
`):U=U.replace(/\r?\n|\r/g," ");else if(U=U.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(U)&&this.open==this.nodes.length-1){let Y=G.content[G.content.length-1],J=E.previousSibling;(!Y||J&&J.nodeName=="BR"||Y.isText&&/[ \t\r\n\u000c]$/.test(Y.text))&&(U=U.slice(1))}U&&this.insertNode(this.parser.schema.text(U)),this.findInText(E)}else this.findInside(E)}addElement(E,U){let G=E.nodeName.toLowerCase(),Y;listTags.hasOwnProperty(G)&&this.parser.normalizeLists&&normalizeList(E);let J=this.options.ruleFromNode&&this.options.ruleFromNode(E)||(Y=this.parser.matchTag(E,this,U));if(J?J.ignore:ignoreTags.hasOwnProperty(G))this.findInside(E),this.ignoreFallback(E);else if(!J||J.skip||J.closeParent){J&&J.closeParent?this.open=Math.max(0,this.open-1):J&&J.skip.nodeType&&(E=J.skip);let Q,X=this.top,Z=this.needsBlock;if(blockTags.hasOwnProperty(G))X.content.length&&X.content[0].isInline&&this.open&&(this.open--,X=this.top),Q=!0,X.type||(this.needsBlock=!0);else if(!E.firstChild){this.leafFallback(E);return}this.addAll(E),Q&&this.sync(X),this.needsBlock=Z}else this.addElementByRule(E,J,J.consuming===!1?Y:void 0)}leafFallback(E){E.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(E.ownerDocument.createTextNode(`
`))}ignoreFallback(E){E.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(E){let U=Mark$1.none,G=Mark$1.none;e:for(let Y=0;Y<E.length;Y+=2)for(let J=void 0;;){let Q=this.parser.matchStyle(E[Y],E[Y+1],this,J);if(!Q)continue e;if(Q.ignore)return null;if(Q.clearMark?this.top.pendingMarks.forEach(X=>{Q.clearMark(X)&&(G=X.addToSet(G))}):U=this.parser.schema.marks[Q.mark].create(Q.attrs).addToSet(U),Q.consuming===!1)J=Q;else break}return[U,G]}addElementByRule(E,U,G){let Y,J,Q;U.node?(J=this.parser.schema.nodes[U.node],J.isLeaf?this.insertNode(J.create(U.attrs))||this.leafFallback(E):Y=this.enter(J,U.attrs||null,U.preserveWhitespace)):(Q=this.parser.schema.marks[U.mark].create(U.attrs),this.addPendingMark(Q));let X=this.top;if(J&&J.isLeaf)this.findInside(E);else if(G)this.addElement(E,G);else if(U.getContent)this.findInside(E),U.getContent(E,this.parser.schema).forEach(Z=>this.insertNode(Z));else{let Z=E;typeof U.contentElement=="string"?Z=E.querySelector(U.contentElement):typeof U.contentElement=="function"?Z=U.contentElement(E):U.contentElement&&(Z=U.contentElement),this.findAround(E,Z,!0),this.addAll(Z)}Y&&this.sync(X)&&this.open--,Q&&this.removePendingMark(Q,X)}addAll(E,U,G){let Y=U||0;for(let J=U?E.childNodes[U]:E.firstChild,Q=G==null?null:E.childNodes[G];J!=Q;J=J.nextSibling,++Y)this.findAtPoint(E,Y),this.addDOM(J);this.findAtPoint(E,Y)}findPlace(E){let U,G;for(let Y=this.open;Y>=0;Y--){let J=this.nodes[Y],Q=J.findWrapping(E);if(Q&&(!U||U.length>Q.length)&&(U=Q,G=J,!Q.length)||J.solid)break}if(!U)return!1;this.sync(G);for(let Y=0;Y<U.length;Y++)this.enterInner(U[Y],null,!1);return!0}insertNode(E){if(E.isInline&&this.needsBlock&&!this.top.type){let U=this.textblockFromContext();U&&this.enterInner(U)}if(this.findPlace(E)){this.closeExtra();let U=this.top;U.applyPending(E.type),U.match&&(U.match=U.match.matchType(E.type));let G=U.activeMarks;for(let Y=0;Y<E.marks.length;Y++)(!U.type||U.type.allowsMarkType(E.marks[Y].type))&&(G=E.marks[Y].addToSet(G));return U.content.push(E.mark(G)),!0}return!1}enter(E,U,G){let Y=this.findPlace(E.create(U));return Y&&this.enterInner(E,U,!0,G),Y}enterInner(E,U=null,G=!1,Y){this.closeExtra();let J=this.top;J.applyPending(E),J.match=J.match&&J.match.matchType(E);let Q=wsOptionsFor(E,Y,J.options);J.options&OPT_OPEN_LEFT&&J.content.length==0&&(Q|=OPT_OPEN_LEFT),this.nodes.push(new NodeContext(E,U,J.activeMarks,J.pendingMarks,G,null,Q)),this.open++}closeExtra(E=!1){let U=this.nodes.length-1;if(U>this.open){for(;U>this.open;U--)this.nodes[U-1].content.push(this.nodes[U].finish(E));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(E){for(let U=this.open;U>=0;U--)if(this.nodes[U]==E)return this.open=U,!0;return!1}get currentPos(){this.closeExtra();let E=0;for(let U=this.open;U>=0;U--){let G=this.nodes[U].content;for(let Y=G.length-1;Y>=0;Y--)E+=G[Y].nodeSize;U&&E++}return E}findAtPoint(E,U){if(this.find)for(let G=0;G<this.find.length;G++)this.find[G].node==E&&this.find[G].offset==U&&(this.find[G].pos=this.currentPos)}findInside(E){if(this.find)for(let U=0;U<this.find.length;U++)this.find[U].pos==null&&E.nodeType==1&&E.contains(this.find[U].node)&&(this.find[U].pos=this.currentPos)}findAround(E,U,G){if(E!=U&&this.find)for(let Y=0;Y<this.find.length;Y++)this.find[Y].pos==null&&E.nodeType==1&&E.contains(this.find[Y].node)&&U.compareDocumentPosition(this.find[Y].node)&(G?2:4)&&(this.find[Y].pos=this.currentPos)}findInText(E){if(this.find)for(let U=0;U<this.find.length;U++)this.find[U].node==E&&(this.find[U].pos=this.currentPos-(E.nodeValue.length-this.find[U].offset))}matchesContext(E){if(E.indexOf("|")>-1)return E.split(/\s*\|\s*/).some(this.matchesContext,this);let U=E.split("/"),G=this.options.context,Y=!this.isOpen&&(!G||G.parent.type==this.nodes[0].type),J=-(G?G.depth+1:0)+(Y?0:1),Q=(X,Z)=>{for(;X>=0;X--){let ee=U[X];if(ee==""){if(X==U.length-1||X==0)continue;for(;Z>=J;Z--)if(Q(X-1,Z))return!0;return!1}else{let te=Z>0||Z==0&&Y?this.nodes[Z].type:G&&Z>=J?G.node(Z-J).type:null;if(!te||te.name!=ee&&te.groups.indexOf(ee)==-1)return!1;Z--}}return!0};return Q(U.length-1,this.open)}textblockFromContext(){let E=this.options.context;if(E)for(let U=E.depth;U>=0;U--){let G=E.node(U).contentMatchAt(E.indexAfter(U)).defaultType;if(G&&G.isTextblock&&G.defaultAttrs)return G}for(let U in this.parser.schema.nodes){let G=this.parser.schema.nodes[U];if(G.isTextblock&&G.defaultAttrs)return G}}addPendingMark(E){let U=findSameMarkInSet(E,this.top.pendingMarks);U&&this.top.stashMarks.push(U),this.top.pendingMarks=E.addToSet(this.top.pendingMarks)}removePendingMark(E,U){for(let G=this.open;G>=0;G--){let Y=this.nodes[G];if(Y.pendingMarks.lastIndexOf(E)>-1)Y.pendingMarks=E.removeFromSet(Y.pendingMarks);else{Y.activeMarks=E.removeFromSet(Y.activeMarks);let Q=Y.popFromStashMark(E);Q&&Y.type&&Y.type.allowsMarkType(Q.type)&&(Y.activeMarks=Q.addToSet(Y.activeMarks))}if(Y==U)break}}}function normalizeList(R){for(let E=R.firstChild,U=null;E;E=E.nextSibling){let G=E.nodeType==1?E.nodeName.toLowerCase():null;G&&listTags.hasOwnProperty(G)&&U?(U.appendChild(E),E=U):G=="li"?U=E:G&&(U=null)}}function matches$1(R,E){return(R.matches||R.msMatchesSelector||R.webkitMatchesSelector||R.mozMatchesSelector).call(R,E)}function parseStyles(R){let E=/\s*([\w-]+)\s*:\s*([^;]+)/g,U,G=[];for(;U=E.exec(R);)G.push(U[1],U[2].trim());return G}function copy$2(R){let E={};for(let U in R)E[U]=R[U];return E}function markMayApply(R,E){let U=E.schema.nodes;for(let G in U){let Y=U[G];if(!Y.allowsMarkType(R))continue;let J=[],Q=X=>{J.push(X);for(let Z=0;Z<X.edgeCount;Z++){let{type:ee,next:te}=X.edge(Z);if(ee==E||J.indexOf(te)<0&&Q(te))return!0}};if(Q(Y.contentMatch))return!0}}function findSameMarkInSet(R,E){for(let U=0;U<E.length;U++)if(R.eq(E[U]))return E[U]}class DOMSerializer{constructor(E,U){this.nodes=E,this.marks=U}serializeFragment(E,U={},G){G||(G=doc$1(U).createDocumentFragment());let Y=G,J=[];return E.forEach(Q=>{if(J.length||Q.marks.length){let X=0,Z=0;for(;X<J.length&&Z<Q.marks.length;){let ee=Q.marks[Z];if(!this.marks[ee.type.name]){Z++;continue}if(!ee.eq(J[X][0])||ee.type.spec.spanning===!1)break;X++,Z++}for(;X<J.length;)Y=J.pop()[1];for(;Z<Q.marks.length;){let ee=Q.marks[Z++],te=this.serializeMark(ee,Q.isInline,U);te&&(J.push([ee,Y]),Y.appendChild(te.dom),Y=te.contentDOM||te.dom)}}Y.appendChild(this.serializeNodeInner(Q,U))}),G}serializeNodeInner(E,U){let{dom:G,contentDOM:Y}=DOMSerializer.renderSpec(doc$1(U),this.nodes[E.type.name](E));if(Y){if(E.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(E.content,U,Y)}return G}serializeNode(E,U={}){let G=this.serializeNodeInner(E,U);for(let Y=E.marks.length-1;Y>=0;Y--){let J=this.serializeMark(E.marks[Y],E.isInline,U);J&&((J.contentDOM||J.dom).appendChild(G),G=J.dom)}return G}serializeMark(E,U,G={}){let Y=this.marks[E.type.name];return Y&&DOMSerializer.renderSpec(doc$1(G),Y(E,U))}static renderSpec(E,U,G=null){if(typeof U=="string")return{dom:E.createTextNode(U)};if(U.nodeType!=null)return{dom:U};if(U.dom&&U.dom.nodeType!=null)return U;let Y=U[0],J=Y.indexOf(" ");J>0&&(G=Y.slice(0,J),Y=Y.slice(J+1));let Q,X=G?E.createElementNS(G,Y):E.createElement(Y),Z=U[1],ee=1;if(Z&&typeof Z=="object"&&Z.nodeType==null&&!Array.isArray(Z)){ee=2;for(let te in Z)if(Z[te]!=null){let ne=te.indexOf(" ");ne>0?X.setAttributeNS(te.slice(0,ne),te.slice(ne+1),Z[te]):X.setAttribute(te,Z[te])}}for(let te=ee;te<U.length;te++){let ne=U[te];if(ne===0){if(te<U.length-1||te>ee)throw new RangeError("Content hole must be the only child of its parent node");return{dom:X,contentDOM:X}}else{let{dom:oe,contentDOM:ce}=DOMSerializer.renderSpec(E,ne,G);if(X.appendChild(oe),ce){if(Q)throw new RangeError("Multiple content holes");Q=ce}}}return{dom:X,contentDOM:Q}}static fromSchema(E){return E.cached.domSerializer||(E.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(E),this.marksFromSchema(E)))}static nodesFromSchema(E){let U=gatherToDOM(E.nodes);return U.text||(U.text=G=>G.text),U}static marksFromSchema(E){return gatherToDOM(E.marks)}}function gatherToDOM(R){let E={};for(let U in R){let G=R[U].spec.toDOM;G&&(E[U]=G)}return E}function doc$1(R){return R.document||window.document}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(R,E){return R+E*factor16}function recoverIndex(R){return R&lower16}function recoverOffset(R){return(R-(R&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(E,U,G){this.pos=E,this.delInfo=U,this.recover=G}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(E,U=!1){if(this.ranges=E,this.inverted=U,!E.length&&StepMap.empty)return StepMap.empty}recover(E){let U=0,G=recoverIndex(E);if(!this.inverted)for(let Y=0;Y<G;Y++)U+=this.ranges[Y*3+2]-this.ranges[Y*3+1];return this.ranges[G*3]+U+recoverOffset(E)}mapResult(E,U=1){return this._map(E,U,!1)}map(E,U=1){return this._map(E,U,!0)}_map(E,U,G){let Y=0,J=this.inverted?2:1,Q=this.inverted?1:2;for(let X=0;X<this.ranges.length;X+=3){let Z=this.ranges[X]-(this.inverted?Y:0);if(Z>E)break;let ee=this.ranges[X+J],te=this.ranges[X+Q],ne=Z+ee;if(E<=ne){let oe=ee?E==Z?-1:E==ne?1:U:U,ce=Z+Y+(oe<0?0:te);if(G)return ce;let pe=E==(U<0?Z:ne)?null:makeRecover(X/3,E-Z),ye=E==Z?DEL_AFTER:E==ne?DEL_BEFORE:DEL_ACROSS;return(U<0?E!=Z:E!=ne)&&(ye|=DEL_SIDE),new MapResult(ce,ye,pe)}Y+=te-ee}return G?E+Y:new MapResult(E+Y,0,null)}touches(E,U){let G=0,Y=recoverIndex(U),J=this.inverted?2:1,Q=this.inverted?1:2;for(let X=0;X<this.ranges.length;X+=3){let Z=this.ranges[X]-(this.inverted?G:0);if(Z>E)break;let ee=this.ranges[X+J],te=Z+ee;if(E<=te&&X==Y*3)return!0;G+=this.ranges[X+Q]-ee}return!1}forEach(E){let U=this.inverted?2:1,G=this.inverted?1:2;for(let Y=0,J=0;Y<this.ranges.length;Y+=3){let Q=this.ranges[Y],X=Q-(this.inverted?J:0),Z=Q+(this.inverted?0:J),ee=this.ranges[Y+U],te=this.ranges[Y+G];E(X,X+ee,Z,Z+te),J+=te-ee}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(E){return E==0?StepMap.empty:new StepMap(E<0?[0,-E,0]:[0,0,E])}}StepMap.empty=new StepMap([]);class Mapping{constructor(E=[],U,G=0,Y=E.length){this.maps=E,this.mirror=U,this.from=G,this.to=Y}slice(E=0,U=this.maps.length){return new Mapping(this.maps,this.mirror,E,U)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(E,U){this.to=this.maps.push(E),U!=null&&this.setMirror(this.maps.length-1,U)}appendMapping(E){for(let U=0,G=this.maps.length;U<E.maps.length;U++){let Y=E.getMirror(U);this.appendMap(E.maps[U],Y!=null&&Y<U?G+Y:void 0)}}getMirror(E){if(this.mirror){for(let U=0;U<this.mirror.length;U++)if(this.mirror[U]==E)return this.mirror[U+(U%2?-1:1)]}}setMirror(E,U){this.mirror||(this.mirror=[]),this.mirror.push(E,U)}appendMappingInverted(E){for(let U=E.maps.length-1,G=this.maps.length+E.maps.length;U>=0;U--){let Y=E.getMirror(U);this.appendMap(E.maps[U].invert(),Y!=null&&Y>U?G-Y-1:void 0)}}invert(){let E=new Mapping;return E.appendMappingInverted(this),E}map(E,U=1){if(this.mirror)return this._map(E,U,!0);for(let G=this.from;G<this.to;G++)E=this.maps[G].map(E,U);return E}mapResult(E,U=1){return this._map(E,U,!1)}_map(E,U,G){let Y=0;for(let J=this.from;J<this.to;J++){let Q=this.maps[J],X=Q.mapResult(E,U);if(X.recover!=null){let Z=this.getMirror(J);if(Z!=null&&Z>J&&Z<this.to){J=Z,E=this.maps[Z].recover(X.recover);continue}}Y|=X.delInfo,E=X.pos}return G?E:new MapResult(E,Y,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(E){return null}static fromJSON(E,U){if(!U||!U.stepType)throw new RangeError("Invalid input for Step.fromJSON");let G=stepsByID[U.stepType];if(!G)throw new RangeError(`No step type ${U.stepType} defined`);return G.fromJSON(E,U)}static jsonID(E,U){if(E in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+E);return stepsByID[E]=U,U.prototype.jsonID=E,U}}class StepResult{constructor(E,U){this.doc=E,this.failed=U}static ok(E){return new StepResult(E,null)}static fail(E){return new StepResult(null,E)}static fromReplace(E,U,G,Y){try{return StepResult.ok(E.replace(U,G,Y))}catch(J){if(J instanceof ReplaceError)return StepResult.fail(J.message);throw J}}}function mapFragment(R,E,U){let G=[];for(let Y=0;Y<R.childCount;Y++){let J=R.child(Y);J.content.size&&(J=J.copy(mapFragment(J.content,E,J))),J.isInline&&(J=E(J,U,Y)),G.push(J)}return Fragment.fromArray(G)}class AddMarkStep extends Step{constructor(E,U,G){super(),this.from=E,this.to=U,this.mark=G}apply(E){let U=E.slice(this.from,this.to),G=E.resolve(this.from),Y=G.node(G.sharedDepth(this.to)),J=new Slice(mapFragment(U.content,(Q,X)=>!Q.isAtom||!X.type.allowsMarkType(this.mark.type)?Q:Q.mark(this.mark.addToSet(Q.marks)),Y),U.openStart,U.openEnd);return StepResult.fromReplace(E,this.from,this.to,J)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(E){let U=E.mapResult(this.from,1),G=E.mapResult(this.to,-1);return U.deleted&&G.deleted||U.pos>=G.pos?null:new AddMarkStep(U.pos,G.pos,this.mark)}merge(E){return E instanceof AddMarkStep&&E.mark.eq(this.mark)&&this.from<=E.to&&this.to>=E.from?new AddMarkStep(Math.min(this.from,E.from),Math.max(this.to,E.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(E,U){if(typeof U.from!="number"||typeof U.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(U.from,U.to,E.markFromJSON(U.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(E,U,G){super(),this.from=E,this.to=U,this.mark=G}apply(E){let U=E.slice(this.from,this.to),G=new Slice(mapFragment(U.content,Y=>Y.mark(this.mark.removeFromSet(Y.marks)),E),U.openStart,U.openEnd);return StepResult.fromReplace(E,this.from,this.to,G)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(E){let U=E.mapResult(this.from,1),G=E.mapResult(this.to,-1);return U.deleted&&G.deleted||U.pos>=G.pos?null:new RemoveMarkStep(U.pos,G.pos,this.mark)}merge(E){return E instanceof RemoveMarkStep&&E.mark.eq(this.mark)&&this.from<=E.to&&this.to>=E.from?new RemoveMarkStep(Math.min(this.from,E.from),Math.max(this.to,E.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(E,U){if(typeof U.from!="number"||typeof U.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(U.from,U.to,E.markFromJSON(U.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(E,U){super(),this.pos=E,this.mark=U}apply(E){let U=E.nodeAt(this.pos);if(!U)return StepResult.fail("No node at mark step's position");let G=U.type.create(U.attrs,null,this.mark.addToSet(U.marks));return StepResult.fromReplace(E,this.pos,this.pos+1,new Slice(Fragment.from(G),0,U.isLeaf?0:1))}invert(E){let U=E.nodeAt(this.pos);if(U){let G=this.mark.addToSet(U.marks);if(G.length==U.marks.length){for(let Y=0;Y<U.marks.length;Y++)if(!U.marks[Y].isInSet(G))return new AddNodeMarkStep(this.pos,U.marks[Y]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(E){let U=E.mapResult(this.pos,1);return U.deletedAfter?null:new AddNodeMarkStep(U.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(E,U){if(typeof U.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(U.pos,E.markFromJSON(U.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(E,U){super(),this.pos=E,this.mark=U}apply(E){let U=E.nodeAt(this.pos);if(!U)return StepResult.fail("No node at mark step's position");let G=U.type.create(U.attrs,null,this.mark.removeFromSet(U.marks));return StepResult.fromReplace(E,this.pos,this.pos+1,new Slice(Fragment.from(G),0,U.isLeaf?0:1))}invert(E){let U=E.nodeAt(this.pos);return!U||!this.mark.isInSet(U.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(E){let U=E.mapResult(this.pos,1);return U.deletedAfter?null:new RemoveNodeMarkStep(U.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(E,U){if(typeof U.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(U.pos,E.markFromJSON(U.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(E,U,G,Y=!1){super(),this.from=E,this.to=U,this.slice=G,this.structure=Y}apply(E){return this.structure&&contentBetween(E,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(E,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(E){return new ReplaceStep(this.from,this.from+this.slice.size,E.slice(this.from,this.to))}map(E){let U=E.mapResult(this.from,1),G=E.mapResult(this.to,-1);return U.deletedAcross&&G.deletedAcross?null:new ReplaceStep(U.pos,Math.max(U.pos,G.pos),this.slice)}merge(E){if(!(E instanceof ReplaceStep)||E.structure||this.structure)return null;if(this.from+this.slice.size==E.from&&!this.slice.openEnd&&!E.slice.openStart){let U=this.slice.size+E.slice.size==0?Slice.empty:new Slice(this.slice.content.append(E.slice.content),this.slice.openStart,E.slice.openEnd);return new ReplaceStep(this.from,this.to+(E.to-E.from),U,this.structure)}else if(E.to==this.from&&!this.slice.openStart&&!E.slice.openEnd){let U=this.slice.size+E.slice.size==0?Slice.empty:new Slice(E.slice.content.append(this.slice.content),E.slice.openStart,this.slice.openEnd);return new ReplaceStep(E.from,this.to,U,this.structure)}else return null}toJSON(){let E={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(E.slice=this.slice.toJSON()),this.structure&&(E.structure=!0),E}static fromJSON(E,U){if(typeof U.from!="number"||typeof U.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(U.from,U.to,Slice.fromJSON(E,U.slice),!!U.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(E,U,G,Y,J,Q,X=!1){super(),this.from=E,this.to=U,this.gapFrom=G,this.gapTo=Y,this.slice=J,this.insert=Q,this.structure=X}apply(E){if(this.structure&&(contentBetween(E,this.from,this.gapFrom)||contentBetween(E,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let U=E.slice(this.gapFrom,this.gapTo);if(U.openStart||U.openEnd)return StepResult.fail("Gap is not a flat range");let G=this.slice.insertAt(this.insert,U.content);return G?StepResult.fromReplace(E,this.from,this.to,G):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(E){let U=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+U,this.from+this.insert,this.from+this.insert+U,E.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(E){let U=E.mapResult(this.from,1),G=E.mapResult(this.to,-1),Y=E.map(this.gapFrom,-1),J=E.map(this.gapTo,1);return U.deletedAcross&&G.deletedAcross||Y<U.pos||J>G.pos?null:new ReplaceAroundStep(U.pos,G.pos,Y,J,this.slice,this.insert,this.structure)}toJSON(){let E={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(E.slice=this.slice.toJSON()),this.structure&&(E.structure=!0),E}static fromJSON(E,U){if(typeof U.from!="number"||typeof U.to!="number"||typeof U.gapFrom!="number"||typeof U.gapTo!="number"||typeof U.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(U.from,U.to,U.gapFrom,U.gapTo,Slice.fromJSON(E,U.slice),U.insert,!!U.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(R,E,U){let G=R.resolve(E),Y=U-E,J=G.depth;for(;Y>0&&J>0&&G.indexAfter(J)==G.node(J).childCount;)J--,Y--;if(Y>0){let Q=G.node(J).maybeChild(G.indexAfter(J));for(;Y>0;){if(!Q||Q.isLeaf)return!0;Q=Q.firstChild,Y--}}return!1}function addMark(R,E,U,G){let Y=[],J=[],Q,X;R.doc.nodesBetween(E,U,(Z,ee,te)=>{if(!Z.isInline)return;let ne=Z.marks;if(!G.isInSet(ne)&&te.type.allowsMarkType(G.type)){let oe=Math.max(ee,E),ce=Math.min(ee+Z.nodeSize,U),pe=G.addToSet(ne);for(let ye=0;ye<ne.length;ye++)ne[ye].isInSet(pe)||(Q&&Q.to==oe&&Q.mark.eq(ne[ye])?Q.to=ce:Y.push(Q=new RemoveMarkStep(oe,ce,ne[ye])));X&&X.to==oe?X.to=ce:J.push(X=new AddMarkStep(oe,ce,G))}}),Y.forEach(Z=>R.step(Z)),J.forEach(Z=>R.step(Z))}function removeMark(R,E,U,G){let Y=[],J=0;R.doc.nodesBetween(E,U,(Q,X)=>{if(!Q.isInline)return;J++;let Z=null;if(G instanceof MarkType){let ee=Q.marks,te;for(;te=G.isInSet(ee);)(Z||(Z=[])).push(te),ee=te.removeFromSet(ee)}else G?G.isInSet(Q.marks)&&(Z=[G]):Z=Q.marks;if(Z&&Z.length){let ee=Math.min(X+Q.nodeSize,U);for(let te=0;te<Z.length;te++){let ne=Z[te],oe;for(let ce=0;ce<Y.length;ce++){let pe=Y[ce];pe.step==J-1&&ne.eq(Y[ce].style)&&(oe=pe)}oe?(oe.to=ee,oe.step=J):Y.push({style:ne,from:Math.max(X,E),to:ee,step:J})}}}),Y.forEach(Q=>R.step(new RemoveMarkStep(Q.from,Q.to,Q.style)))}function clearIncompatible(R,E,U,G=U.contentMatch){let Y=R.doc.nodeAt(E),J=[],Q=E+1;for(let X=0;X<Y.childCount;X++){let Z=Y.child(X),ee=Q+Z.nodeSize,te=G.matchType(Z.type);if(!te)J.push(new ReplaceStep(Q,ee,Slice.empty));else{G=te;for(let ne=0;ne<Z.marks.length;ne++)U.allowsMarkType(Z.marks[ne].type)||R.step(new RemoveMarkStep(Q,ee,Z.marks[ne]))}Q=ee}if(!G.validEnd){let X=G.fillBefore(Fragment.empty,!0);R.replace(Q,Q,new Slice(X,0,0))}for(let X=J.length-1;X>=0;X--)R.step(J[X])}function canCut(R,E,U){return(E==0||R.canReplace(E,R.childCount))&&(U==R.childCount||R.canReplace(0,U))}function liftTarget(R){let U=R.parent.content.cutByIndex(R.startIndex,R.endIndex);for(let G=R.depth;;--G){let Y=R.$from.node(G),J=R.$from.index(G),Q=R.$to.indexAfter(G);if(G<R.depth&&Y.canReplace(J,Q,U))return G;if(G==0||Y.type.spec.isolating||!canCut(Y,J,Q))break}return null}function lift$2(R,E,U){let{$from:G,$to:Y,depth:J}=E,Q=G.before(J+1),X=Y.after(J+1),Z=Q,ee=X,te=Fragment.empty,ne=0;for(let pe=J,ye=!1;pe>U;pe--)ye||G.index(pe)>0?(ye=!0,te=Fragment.from(G.node(pe).copy(te)),ne++):Z--;let oe=Fragment.empty,ce=0;for(let pe=J,ye=!1;pe>U;pe--)ye||Y.after(pe+1)<Y.end(pe)?(ye=!0,oe=Fragment.from(Y.node(pe).copy(oe)),ce++):ee++;R.step(new ReplaceAroundStep(Z,ee,Q,X,new Slice(te.append(oe),ne,ce),te.size-ne,!0))}function findWrapping(R,E,U=null,G=R){let Y=findWrappingOutside(R,E),J=Y&&findWrappingInside(G,E);return J?Y.map(withAttrs).concat({type:E,attrs:U}).concat(J.map(withAttrs)):null}function withAttrs(R){return{type:R,attrs:null}}function findWrappingOutside(R,E){let{parent:U,startIndex:G,endIndex:Y}=R,J=U.contentMatchAt(G).findWrapping(E);if(!J)return null;let Q=J.length?J[0]:E;return U.canReplaceWith(G,Y,Q)?J:null}function findWrappingInside(R,E){let{parent:U,startIndex:G,endIndex:Y}=R,J=U.child(G),Q=E.contentMatch.findWrapping(J.type);if(!Q)return null;let Z=(Q.length?Q[Q.length-1]:E).contentMatch;for(let ee=G;Z&&ee<Y;ee++)Z=Z.matchType(U.child(ee).type);return!Z||!Z.validEnd?null:Q}function wrap$1(R,E,U){let G=Fragment.empty;for(let Q=U.length-1;Q>=0;Q--){if(G.size){let X=U[Q].type.contentMatch.matchFragment(G);if(!X||!X.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}G=Fragment.from(U[Q].type.create(U[Q].attrs,G))}let Y=E.start,J=E.end;R.step(new ReplaceAroundStep(Y,J,Y,J,new Slice(G,0,0),U.length,!0))}function setBlockType$1(R,E,U,G,Y){if(!G.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let J=R.steps.length;R.doc.nodesBetween(E,U,(Q,X)=>{if(Q.isTextblock&&!Q.hasMarkup(G,Y)&&canChangeType(R.doc,R.mapping.slice(J).map(X),G)){R.clearIncompatible(R.mapping.slice(J).map(X,1),G);let Z=R.mapping.slice(J),ee=Z.map(X,1),te=Z.map(X+Q.nodeSize,1);return R.step(new ReplaceAroundStep(ee,te,ee+1,te-1,new Slice(Fragment.from(G.create(Y,null,Q.marks)),0,0),1,!0)),!1}})}function canChangeType(R,E,U){let G=R.resolve(E),Y=G.index();return G.parent.canReplaceWith(Y,Y+1,U)}function setNodeMarkup(R,E,U,G,Y){let J=R.doc.nodeAt(E);if(!J)throw new RangeError("No node at given position");U||(U=J.type);let Q=U.create(G,null,Y||J.marks);if(J.isLeaf)return R.replaceWith(E,E+J.nodeSize,Q);if(!U.validContent(J.content))throw new RangeError("Invalid content for node type "+U.name);R.step(new ReplaceAroundStep(E,E+J.nodeSize,E+1,E+J.nodeSize-1,new Slice(Fragment.from(Q),0,0),1,!0))}function canSplit(R,E,U=1,G){let Y=R.resolve(E),J=Y.depth-U,Q=G&&G[G.length-1]||Y.parent;if(J<0||Y.parent.type.spec.isolating||!Y.parent.canReplace(Y.index(),Y.parent.childCount)||!Q.type.validContent(Y.parent.content.cutByIndex(Y.index(),Y.parent.childCount)))return!1;for(let ee=Y.depth-1,te=U-2;ee>J;ee--,te--){let ne=Y.node(ee),oe=Y.index(ee);if(ne.type.spec.isolating)return!1;let ce=ne.content.cutByIndex(oe,ne.childCount),pe=G&&G[te]||ne;if(pe!=ne&&(ce=ce.replaceChild(0,pe.type.create(pe.attrs))),!ne.canReplace(oe+1,ne.childCount)||!pe.type.validContent(ce))return!1}let X=Y.indexAfter(J),Z=G&&G[0];return Y.node(J).canReplaceWith(X,X,Z?Z.type:Y.node(J+1).type)}function split(R,E,U=1,G){let Y=R.doc.resolve(E),J=Fragment.empty,Q=Fragment.empty;for(let X=Y.depth,Z=Y.depth-U,ee=U-1;X>Z;X--,ee--){J=Fragment.from(Y.node(X).copy(J));let te=G&&G[ee];Q=Fragment.from(te?te.type.create(te.attrs,Q):Y.node(X).copy(Q))}R.step(new ReplaceStep(E,E,new Slice(J.append(Q),U,U),!0))}function canJoin(R,E){let U=R.resolve(E),G=U.index();return joinable(U.nodeBefore,U.nodeAfter)&&U.parent.canReplace(G,G+1)}function joinable(R,E){return!!(R&&E&&!R.isLeaf&&R.canAppend(E))}function joinPoint(R,E,U=-1){let G=R.resolve(E);for(let Y=G.depth;;Y--){let J,Q,X=G.index(Y);if(Y==G.depth?(J=G.nodeBefore,Q=G.nodeAfter):U>0?(J=G.node(Y+1),X++,Q=G.node(Y).maybeChild(X)):(J=G.node(Y).maybeChild(X-1),Q=G.node(Y+1)),J&&!J.isTextblock&&joinable(J,Q)&&G.node(Y).canReplace(X,X+1))return E;if(Y==0)break;E=U<0?G.before(Y):G.after(Y)}}function join(R,E,U){let G=new ReplaceStep(E-U,E+U,Slice.empty,!0);R.step(G)}function insertPoint(R,E,U){let G=R.resolve(E);if(G.parent.canReplaceWith(G.index(),G.index(),U))return E;if(G.parentOffset==0)for(let Y=G.depth-1;Y>=0;Y--){let J=G.index(Y);if(G.node(Y).canReplaceWith(J,J,U))return G.before(Y+1);if(J>0)return null}if(G.parentOffset==G.parent.content.size)for(let Y=G.depth-1;Y>=0;Y--){let J=G.indexAfter(Y);if(G.node(Y).canReplaceWith(J,J,U))return G.after(Y+1);if(J<G.node(Y).childCount)return null}return null}function dropPoint(R,E,U){let G=R.resolve(E);if(!U.content.size)return E;let Y=U.content;for(let J=0;J<U.openStart;J++)Y=Y.firstChild.content;for(let J=1;J<=(U.openStart==0&&U.size?2:1);J++)for(let Q=G.depth;Q>=0;Q--){let X=Q==G.depth?0:G.pos<=(G.start(Q+1)+G.end(Q+1))/2?-1:1,Z=G.index(Q)+(X>0?1:0),ee=G.node(Q),te=!1;if(J==1)te=ee.canReplace(Z,Z,Y);else{let ne=ee.contentMatchAt(Z).findWrapping(Y.firstChild.type);te=ne&&ee.canReplaceWith(Z,Z,ne[0])}if(te)return X==0?G.pos:X<0?G.before(Q+1):G.after(Q+1)}return null}function replaceStep(R,E,U=E,G=Slice.empty){if(E==U&&!G.size)return null;let Y=R.resolve(E),J=R.resolve(U);return fitsTrivially(Y,J,G)?new ReplaceStep(E,U,G):new Fitter(Y,J,G).fit()}function fitsTrivially(R,E,U){return!U.openStart&&!U.openEnd&&R.start()==E.start()&&R.parent.canReplace(R.index(),E.index(),U.content)}class Fitter{constructor(E,U,G){this.$from=E,this.$to=U,this.unplaced=G,this.frontier=[],this.placed=Fragment.empty;for(let Y=0;Y<=E.depth;Y++){let J=E.node(Y);this.frontier.push({type:J.type,match:J.contentMatchAt(E.indexAfter(Y))})}for(let Y=E.depth;Y>0;Y--)this.placed=Fragment.from(E.node(Y).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let ee=this.findFittable();ee?this.placeNodes(ee):this.openMore()||this.dropNode()}let E=this.mustMoveInline(),U=this.placed.size-this.depth-this.$from.depth,G=this.$from,Y=this.close(E<0?this.$to:G.doc.resolve(E));if(!Y)return null;let J=this.placed,Q=G.depth,X=Y.depth;for(;Q&&X&&J.childCount==1;)J=J.firstChild.content,Q--,X--;let Z=new Slice(J,Q,X);return E>-1?new ReplaceAroundStep(G.pos,E,this.$to.pos,this.$to.end(),Z,U):Z.size||G.pos!=this.$to.pos?new ReplaceStep(G.pos,Y.pos,Z):null}findFittable(){let E=this.unplaced.openStart;for(let U=this.unplaced.content,G=0,Y=this.unplaced.openEnd;G<E;G++){let J=U.firstChild;if(U.childCount>1&&(Y=0),J.type.spec.isolating&&Y<=G){E=G;break}U=J.content}for(let U=1;U<=2;U++)for(let G=U==1?E:this.unplaced.openStart;G>=0;G--){let Y,J=null;G?(J=contentAt(this.unplaced.content,G-1).firstChild,Y=J.content):Y=this.unplaced.content;let Q=Y.firstChild;for(let X=this.depth;X>=0;X--){let{type:Z,match:ee}=this.frontier[X],te,ne=null;if(U==1&&(Q?ee.matchType(Q.type)||(ne=ee.fillBefore(Fragment.from(Q),!1)):J&&Z.compatibleContent(J.type)))return{sliceDepth:G,frontierDepth:X,parent:J,inject:ne};if(U==2&&Q&&(te=ee.findWrapping(Q.type)))return{sliceDepth:G,frontierDepth:X,parent:J,wrap:te};if(J&&ee.matchType(J.type))break}}}openMore(){let{content:E,openStart:U,openEnd:G}=this.unplaced,Y=contentAt(E,U);return!Y.childCount||Y.firstChild.isLeaf?!1:(this.unplaced=new Slice(E,U+1,Math.max(G,Y.size+U>=E.size-G?U+1:0)),!0)}dropNode(){let{content:E,openStart:U,openEnd:G}=this.unplaced,Y=contentAt(E,U);if(Y.childCount<=1&&U>0){let J=E.size-U<=U+Y.size;this.unplaced=new Slice(dropFromFragment(E,U-1,1),U-1,J?U-1:G)}else this.unplaced=new Slice(dropFromFragment(E,U,1),U,G)}placeNodes({sliceDepth:E,frontierDepth:U,parent:G,inject:Y,wrap:J}){for(;this.depth>U;)this.closeFrontierNode();if(J)for(let ye=0;ye<J.length;ye++)this.openFrontierNode(J[ye]);let Q=this.unplaced,X=G?G.content:Q.content,Z=Q.openStart-E,ee=0,te=[],{match:ne,type:oe}=this.frontier[U];if(Y){for(let ye=0;ye<Y.childCount;ye++)te.push(Y.child(ye));ne=ne.matchFragment(Y)}let ce=X.size+E-(Q.content.size-Q.openEnd);for(;ee<X.childCount;){let ye=X.child(ee),Se=ne.matchType(ye.type);if(!Se)break;ee++,(ee>1||Z==0||ye.content.size)&&(ne=Se,te.push(closeNodeStart(ye.mark(oe.allowedMarks(ye.marks)),ee==1?Z:0,ee==X.childCount?ce:-1)))}let pe=ee==X.childCount;pe||(ce=-1),this.placed=addToFragment(this.placed,U,Fragment.from(te)),this.frontier[U].match=ne,pe&&ce<0&&G&&G.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let ye=0,Se=X;ye<ce;ye++){let ge=Se.lastChild;this.frontier.push({type:ge.type,match:ge.contentMatchAt(ge.childCount)}),Se=ge.content}this.unplaced=pe?E==0?Slice.empty:new Slice(dropFromFragment(Q.content,E-1,1),E-1,ce<0?Q.openEnd:E-1):new Slice(dropFromFragment(Q.content,E,ee),Q.openStart,Q.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let E=this.frontier[this.depth],U;if(!E.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,E.type,E.match,!1)||this.$to.depth==this.depth&&(U=this.findCloseLevel(this.$to))&&U.depth==this.depth)return-1;let{depth:G}=this.$to,Y=this.$to.after(G);for(;G>1&&Y==this.$to.end(--G);)++Y;return Y}findCloseLevel(E){e:for(let U=Math.min(this.depth,E.depth);U>=0;U--){let{match:G,type:Y}=this.frontier[U],J=U<E.depth&&E.end(U+1)==E.pos+(E.depth-(U+1)),Q=contentAfterFits(E,U,Y,G,J);if(!!Q){for(let X=U-1;X>=0;X--){let{match:Z,type:ee}=this.frontier[X],te=contentAfterFits(E,X,ee,Z,!0);if(!te||te.childCount)continue e}return{depth:U,fit:Q,move:J?E.doc.resolve(E.after(U+1)):E}}}}close(E){let U=this.findCloseLevel(E);if(!U)return null;for(;this.depth>U.depth;)this.closeFrontierNode();U.fit.childCount&&(this.placed=addToFragment(this.placed,U.depth,U.fit)),E=U.move;for(let G=U.depth+1;G<=E.depth;G++){let Y=E.node(G),J=Y.type.contentMatch.fillBefore(Y.content,!0,E.index(G));this.openFrontierNode(Y.type,Y.attrs,J)}return E}openFrontierNode(E,U=null,G){let Y=this.frontier[this.depth];Y.match=Y.match.matchType(E),this.placed=addToFragment(this.placed,this.depth,Fragment.from(E.create(U,G))),this.frontier.push({type:E,match:E.contentMatch})}closeFrontierNode(){let U=this.frontier.pop().match.fillBefore(Fragment.empty,!0);U.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,U))}}function dropFromFragment(R,E,U){return E==0?R.cutByIndex(U,R.childCount):R.replaceChild(0,R.firstChild.copy(dropFromFragment(R.firstChild.content,E-1,U)))}function addToFragment(R,E,U){return E==0?R.append(U):R.replaceChild(R.childCount-1,R.lastChild.copy(addToFragment(R.lastChild.content,E-1,U)))}function contentAt(R,E){for(let U=0;U<E;U++)R=R.firstChild.content;return R}function closeNodeStart(R,E,U){if(E<=0)return R;let G=R.content;return E>1&&(G=G.replaceChild(0,closeNodeStart(G.firstChild,E-1,G.childCount==1?U-1:0))),E>0&&(G=R.type.contentMatch.fillBefore(G).append(G),U<=0&&(G=G.append(R.type.contentMatch.matchFragment(G).fillBefore(Fragment.empty,!0)))),R.copy(G)}function contentAfterFits(R,E,U,G,Y){let J=R.node(E),Q=Y?R.indexAfter(E):R.index(E);if(Q==J.childCount&&!U.compatibleContent(J.type))return null;let X=G.fillBefore(J.content,!0,Q);return X&&!invalidMarks(U,J.content,Q)?X:null}function invalidMarks(R,E,U){for(let G=U;G<E.childCount;G++)if(!R.allowsMarks(E.child(G).marks))return!0;return!1}function definesContent(R){return R.spec.defining||R.spec.definingForContent}function replaceRange(R,E,U,G){if(!G.size)return R.deleteRange(E,U);let Y=R.doc.resolve(E),J=R.doc.resolve(U);if(fitsTrivially(Y,J,G))return R.step(new ReplaceStep(E,U,G));let Q=coveredDepths(Y,R.doc.resolve(U));Q[Q.length-1]==0&&Q.pop();let X=-(Y.depth+1);Q.unshift(X);for(let oe=Y.depth,ce=Y.pos-1;oe>0;oe--,ce--){let pe=Y.node(oe).type.spec;if(pe.defining||pe.definingAsContext||pe.isolating)break;Q.indexOf(oe)>-1?X=oe:Y.before(oe)==ce&&Q.splice(1,0,-oe)}let Z=Q.indexOf(X),ee=[],te=G.openStart;for(let oe=G.content,ce=0;;ce++){let pe=oe.firstChild;if(ee.push(pe),ce==G.openStart)break;oe=pe.content}for(let oe=te-1;oe>=0;oe--){let ce=ee[oe].type,pe=definesContent(ce);if(pe&&Y.node(Z).type!=ce)te=oe;else if(pe||!ce.isTextblock)break}for(let oe=G.openStart;oe>=0;oe--){let ce=(oe+te+1)%(G.openStart+1),pe=ee[ce];if(!!pe)for(let ye=0;ye<Q.length;ye++){let Se=Q[(ye+Z)%Q.length],ge=!0;Se<0&&(ge=!1,Se=-Se);let _e=Y.node(Se-1),Te=Y.index(Se-1);if(_e.canReplaceWith(Te,Te,pe.type,pe.marks))return R.replace(Y.before(Se),ge?J.after(Se):U,new Slice(closeFragment(G.content,0,G.openStart,ce),ce,G.openEnd))}}let ne=R.steps.length;for(let oe=Q.length-1;oe>=0&&(R.replace(E,U,G),!(R.steps.length>ne));oe--){let ce=Q[oe];ce<0||(E=Y.before(ce),U=J.after(ce))}}function closeFragment(R,E,U,G,Y){if(E<U){let J=R.firstChild;R=R.replaceChild(0,J.copy(closeFragment(J.content,E+1,U,G,J)))}if(E>G){let J=Y.contentMatchAt(0),Q=J.fillBefore(R).append(R);R=Q.append(J.matchFragment(Q).fillBefore(Fragment.empty,!0))}return R}function replaceRangeWith(R,E,U,G){if(!G.isInline&&E==U&&R.doc.resolve(E).parent.content.size){let Y=insertPoint(R.doc,E,G.type);Y!=null&&(E=U=Y)}R.replaceRange(E,U,new Slice(Fragment.from(G),0,0))}function deleteRange$1(R,E,U){let G=R.doc.resolve(E),Y=R.doc.resolve(U),J=coveredDepths(G,Y);for(let Q=0;Q<J.length;Q++){let X=J[Q],Z=Q==J.length-1;if(Z&&X==0||G.node(X).type.contentMatch.validEnd)return R.delete(G.start(X),Y.end(X));if(X>0&&(Z||G.node(X-1).canReplace(G.index(X-1),Y.indexAfter(X-1))))return R.delete(G.before(X),Y.after(X))}for(let Q=1;Q<=G.depth&&Q<=Y.depth;Q++)if(E-G.start(Q)==G.depth-Q&&U>G.end(Q)&&Y.end(Q)-U!=Y.depth-Q)return R.delete(G.before(Q),U);R.delete(E,U)}function coveredDepths(R,E){let U=[],G=Math.min(R.depth,E.depth);for(let Y=G;Y>=0;Y--){let J=R.start(Y);if(J<R.pos-(R.depth-Y)||E.end(Y)>E.pos+(E.depth-Y)||R.node(Y).type.spec.isolating||E.node(Y).type.spec.isolating)break;(J==E.start(Y)||Y==R.depth&&Y==E.depth&&R.parent.inlineContent&&E.parent.inlineContent&&Y&&E.start(Y-1)==J-1)&&U.push(Y)}return U}class AttrStep extends Step{constructor(E,U,G){super(),this.pos=E,this.attr=U,this.value=G}apply(E){let U=E.nodeAt(this.pos);if(!U)return StepResult.fail("No node at attribute step's position");let G=Object.create(null);for(let J in U.attrs)G[J]=U.attrs[J];G[this.attr]=this.value;let Y=U.type.create(G,null,U.marks);return StepResult.fromReplace(E,this.pos,this.pos+1,new Slice(Fragment.from(Y),0,U.isLeaf?0:1))}getMap(){return StepMap.empty}invert(E){return new AttrStep(this.pos,this.attr,E.nodeAt(this.pos).attrs[this.attr])}map(E){let U=E.mapResult(this.pos,1);return U.deletedAfter?null:new AttrStep(U.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(E,U){if(typeof U.pos!="number"||typeof U.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(U.pos,U.attr,U.value)}}Step.jsonID("attr",AttrStep);let TransformError=class extends Error{};TransformError=function R(E){let U=Error.call(this,E);return U.__proto__=R.prototype,U};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(E){this.doc=E,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(E){let U=this.maybeStep(E);if(U.failed)throw new TransformError(U.failed);return this}maybeStep(E){let U=E.apply(this.doc);return U.failed||this.addStep(E,U.doc),U}get docChanged(){return this.steps.length>0}addStep(E,U){this.docs.push(this.doc),this.steps.push(E),this.mapping.appendMap(E.getMap()),this.doc=U}replace(E,U=E,G=Slice.empty){let Y=replaceStep(this.doc,E,U,G);return Y&&this.step(Y),this}replaceWith(E,U,G){return this.replace(E,U,new Slice(Fragment.from(G),0,0))}delete(E,U){return this.replace(E,U,Slice.empty)}insert(E,U){return this.replaceWith(E,E,U)}replaceRange(E,U,G){return replaceRange(this,E,U,G),this}replaceRangeWith(E,U,G){return replaceRangeWith(this,E,U,G),this}deleteRange(E,U){return deleteRange$1(this,E,U),this}lift(E,U){return lift$2(this,E,U),this}join(E,U=1){return join(this,E,U),this}wrap(E,U){return wrap$1(this,E,U),this}setBlockType(E,U=E,G,Y=null){return setBlockType$1(this,E,U,G,Y),this}setNodeMarkup(E,U,G=null,Y){return setNodeMarkup(this,E,U,G,Y),this}setNodeAttribute(E,U,G){return this.step(new AttrStep(E,U,G)),this}addNodeMark(E,U){return this.step(new AddNodeMarkStep(E,U)),this}removeNodeMark(E,U){if(!(U instanceof Mark$1)){let G=this.doc.nodeAt(E);if(!G)throw new RangeError("No node at position "+E);if(U=U.isInSet(G.marks),!U)return this}return this.step(new RemoveNodeMarkStep(E,U)),this}split(E,U=1,G){return split(this,E,U,G),this}addMark(E,U,G){return addMark(this,E,U,G),this}removeMark(E,U,G){return removeMark(this,E,U,G),this}clearIncompatible(E,U,G){return clearIncompatible(this,E,U,G),this}}const classesById=Object.create(null);class Selection{constructor(E,U,G){this.$anchor=E,this.$head=U,this.ranges=G||[new SelectionRange(E.min(U),E.max(U))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let E=this.ranges;for(let U=0;U<E.length;U++)if(E[U].$from.pos!=E[U].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(E,U=Slice$1.empty){let G=U.content.lastChild,Y=null;for(let X=0;X<U.openEnd;X++)Y=G,G=G.lastChild;let J=E.steps.length,Q=this.ranges;for(let X=0;X<Q.length;X++){let{$from:Z,$to:ee}=Q[X],te=E.mapping.slice(J);E.replaceRange(te.map(Z.pos),te.map(ee.pos),X?Slice$1.empty:U),X==0&&selectionToInsertionEnd$1(E,J,(G?G.isInline:Y&&Y.isTextblock)?-1:1)}}replaceWith(E,U){let G=E.steps.length,Y=this.ranges;for(let J=0;J<Y.length;J++){let{$from:Q,$to:X}=Y[J],Z=E.mapping.slice(G),ee=Z.map(Q.pos),te=Z.map(X.pos);J?E.deleteRange(ee,te):(E.replaceRangeWith(ee,te,U),selectionToInsertionEnd$1(E,G,U.isInline?-1:1))}}static findFrom(E,U,G=!1){let Y=E.parent.inlineContent?new TextSelection(E):findSelectionIn(E.node(0),E.parent,E.pos,E.index(),U,G);if(Y)return Y;for(let J=E.depth-1;J>=0;J--){let Q=U<0?findSelectionIn(E.node(0),E.node(J),E.before(J+1),E.index(J),U,G):findSelectionIn(E.node(0),E.node(J),E.after(J+1),E.index(J)+1,U,G);if(Q)return Q}return null}static near(E,U=1){return this.findFrom(E,U)||this.findFrom(E,-U)||new AllSelection(E.node(0))}static atStart(E){return findSelectionIn(E,E,0,0,1)||new AllSelection(E)}static atEnd(E){return findSelectionIn(E,E,E.content.size,E.childCount,-1)||new AllSelection(E)}static fromJSON(E,U){if(!U||!U.type)throw new RangeError("Invalid input for Selection.fromJSON");let G=classesById[U.type];if(!G)throw new RangeError(`No selection type ${U.type} defined`);return G.fromJSON(E,U)}static jsonID(E,U){if(E in classesById)throw new RangeError("Duplicate use of selection JSON ID "+E);return classesById[E]=U,U.prototype.jsonID=E,U}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(E,U){this.$from=E,this.$to=U}}let warnedAboutTextSelection=!1;function checkTextSelection(R){!warnedAboutTextSelection&&!R.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+R.parent.type.name+")"))}class TextSelection extends Selection{constructor(E,U=E){checkTextSelection(E),checkTextSelection(U),super(E,U)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(E,U){let G=E.resolve(U.map(this.head));if(!G.parent.inlineContent)return Selection.near(G);let Y=E.resolve(U.map(this.anchor));return new TextSelection(Y.parent.inlineContent?Y:G,G)}replace(E,U=Slice$1.empty){if(super.replace(E,U),U==Slice$1.empty){let G=this.$from.marksAcross(this.$to);G&&E.ensureMarks(G)}}eq(E){return E instanceof TextSelection&&E.anchor==this.anchor&&E.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(E,U){if(typeof U.anchor!="number"||typeof U.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(E.resolve(U.anchor),E.resolve(U.head))}static create(E,U,G=U){let Y=E.resolve(U);return new this(Y,G==U?Y:E.resolve(G))}static between(E,U,G){let Y=E.pos-U.pos;if((!G||Y)&&(G=Y>=0?1:-1),!U.parent.inlineContent){let J=Selection.findFrom(U,G,!0)||Selection.findFrom(U,-G,!0);if(J)U=J.$head;else return Selection.near(U,G)}return E.parent.inlineContent||(Y==0?E=U:(E=(Selection.findFrom(E,-G,!0)||Selection.findFrom(E,G,!0)).$anchor,E.pos<U.pos!=Y<0&&(E=U))),new TextSelection(E,U)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(E,U){this.anchor=E,this.head=U}map(E){return new TextBookmark(E.map(this.anchor),E.map(this.head))}resolve(E){return TextSelection.between(E.resolve(this.anchor),E.resolve(this.head))}}class NodeSelection extends Selection{constructor(E){let U=E.nodeAfter,G=E.node(0).resolve(E.pos+U.nodeSize);super(E,G),this.node=U}map(E,U){let{deleted:G,pos:Y}=U.mapResult(this.anchor),J=E.resolve(Y);return G?Selection.near(J):new NodeSelection(J)}content(){return new Slice$1(Fragment$1.from(this.node),0,0)}eq(E){return E instanceof NodeSelection&&E.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(E,U){if(typeof U.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(E.resolve(U.anchor))}static create(E,U){return new NodeSelection(E.resolve(U))}static isSelectable(E){return!E.isText&&E.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(E){this.anchor=E}map(E){let{deleted:U,pos:G}=E.mapResult(this.anchor);return U?new TextBookmark(G,G):new NodeBookmark(G)}resolve(E){let U=E.resolve(this.anchor),G=U.nodeAfter;return G&&NodeSelection.isSelectable(G)?new NodeSelection(U):Selection.near(U)}}class AllSelection extends Selection{constructor(E){super(E.resolve(0),E.resolve(E.content.size))}replace(E,U=Slice$1.empty){if(U==Slice$1.empty){E.delete(0,E.doc.content.size);let G=Selection.atStart(E.doc);G.eq(E.selection)||E.setSelection(G)}else super.replace(E,U)}toJSON(){return{type:"all"}}static fromJSON(E){return new AllSelection(E)}map(E){return new AllSelection(E)}eq(E){return E instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(R){return new AllSelection(R)}};function findSelectionIn(R,E,U,G,Y,J=!1){if(E.inlineContent)return TextSelection.create(R,U);for(let Q=G-(Y>0?0:1);Y>0?Q<E.childCount:Q>=0;Q+=Y){let X=E.child(Q);if(X.isAtom){if(!J&&NodeSelection.isSelectable(X))return NodeSelection.create(R,U-(Y<0?X.nodeSize:0))}else{let Z=findSelectionIn(R,X,U+Y,Y<0?X.childCount:0,Y,J);if(Z)return Z}U+=X.nodeSize*Y}return null}function selectionToInsertionEnd$1(R,E,U){let G=R.steps.length-1;if(G<E)return;let Y=R.steps[G];if(!(Y instanceof ReplaceStep||Y instanceof ReplaceAroundStep))return;let J=R.mapping.maps[G],Q;J.forEach((X,Z,ee,te)=>{Q==null&&(Q=te)}),R.setSelection(Selection.near(R.doc.resolve(Q),U))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction$1 extends Transform{constructor(E){super(E.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=E.selection,this.storedMarks=E.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(E){if(E.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=E,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(E){return this.storedMarks=E,this.updated|=UPDATED_MARKS,this}ensureMarks(E){return Mark$2.sameSet(this.storedMarks||this.selection.$from.marks(),E)||this.setStoredMarks(E),this}addStoredMark(E){return this.ensureMarks(E.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(E){return this.ensureMarks(E.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(E,U){super.addStep(E,U),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(E){return this.time=E,this}replaceSelection(E){return this.selection.replace(this,E),this}replaceSelectionWith(E,U=!0){let G=this.selection;return U&&(E=E.mark(this.storedMarks||(G.empty?G.$from.marks():G.$from.marksAcross(G.$to)||Mark$2.none))),G.replaceWith(this,E),this}deleteSelection(){return this.selection.replace(this),this}insertText(E,U,G){let Y=this.doc.type.schema;if(U==null)return E?this.replaceSelectionWith(Y.text(E),!0):this.deleteSelection();{if(G==null&&(G=U),G=G==null?U:G,!E)return this.deleteRange(U,G);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(U);J=G==U?Q.marks():Q.marksAcross(this.doc.resolve(G))}return this.replaceRangeWith(U,G,Y.text(E,J)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(E,U){return this.meta[typeof E=="string"?E:E.key]=U,this}getMeta(E){return this.meta[typeof E=="string"?E:E.key]}get isGeneric(){for(let E in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(R,E){return!E||!R?R:R.bind(E)}class FieldDesc{constructor(E,U,G){this.name=E,this.init=bind(U.init,G),this.apply=bind(U.apply,G)}}const baseFields=[new FieldDesc("doc",{init(R){return R.doc||R.schema.topNodeType.createAndFill()},apply(R){return R.doc}}),new FieldDesc("selection",{init(R,E){return R.selection||Selection.atStart(E.doc)},apply(R){return R.selection}}),new FieldDesc("storedMarks",{init(R){return R.storedMarks||null},apply(R,E,U,G){return G.selection.$cursor?R.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(R,E){return R.scrolledIntoView?E+1:E}})];class Configuration{constructor(E,U){this.schema=E,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),U&&U.forEach(G=>{if(this.pluginsByKey[G.key])throw new RangeError("Adding different instances of a keyed plugin ("+G.key+")");this.plugins.push(G),this.pluginsByKey[G.key]=G,G.spec.state&&this.fields.push(new FieldDesc(G.key,G.spec.state,G))})}}class EditorState{constructor(E){this.config=E}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(E){return this.applyTransaction(E).state}filterTransaction(E,U=-1){for(let G=0;G<this.config.plugins.length;G++)if(G!=U){let Y=this.config.plugins[G];if(Y.spec.filterTransaction&&!Y.spec.filterTransaction.call(Y,E,this))return!1}return!0}applyTransaction(E){if(!this.filterTransaction(E))return{state:this,transactions:[]};let U=[E],G=this.applyInner(E),Y=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let X=this.config.plugins[Q];if(X.spec.appendTransaction){let Z=Y?Y[Q].n:0,ee=Y?Y[Q].state:this,te=Z<U.length&&X.spec.appendTransaction.call(X,Z?U.slice(Z):U,ee,G);if(te&&G.filterTransaction(te,Q)){if(te.setMeta("appendedTransaction",E),!Y){Y=[];for(let ne=0;ne<this.config.plugins.length;ne++)Y.push(ne<Q?{state:G,n:U.length}:{state:this,n:0})}U.push(te),G=G.applyInner(te),J=!0}Y&&(Y[Q]={state:G,n:U.length})}}if(!J)return{state:G,transactions:U}}}applyInner(E){if(!E.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let U=new EditorState(this.config),G=this.config.fields;for(let Y=0;Y<G.length;Y++){let J=G[Y];U[J.name]=J.apply(E,this[J.name],this,U)}return U}get tr(){return new Transaction$1(this)}static create(E){let U=new Configuration(E.doc?E.doc.type.schema:E.schema,E.plugins),G=new EditorState(U);for(let Y=0;Y<U.fields.length;Y++)G[U.fields[Y].name]=U.fields[Y].init(E,G);return G}reconfigure(E){let U=new Configuration(this.schema,E.plugins),G=U.fields,Y=new EditorState(U);for(let J=0;J<G.length;J++){let Q=G[J].name;Y[Q]=this.hasOwnProperty(Q)?this[Q]:G[J].init(E,Y)}return Y}toJSON(E){let U={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(U.storedMarks=this.storedMarks.map(G=>G.toJSON())),E&&typeof E=="object")for(let G in E){if(G=="doc"||G=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let Y=E[G],J=Y.spec.state;J&&J.toJSON&&(U[G]=J.toJSON.call(Y,this[Y.key]))}return U}static fromJSON(E,U,G){if(!U)throw new RangeError("Invalid input for EditorState.fromJSON");if(!E.schema)throw new RangeError("Required config field 'schema' missing");let Y=new Configuration(E.schema,E.plugins),J=new EditorState(Y);return Y.fields.forEach(Q=>{if(Q.name=="doc")J.doc=Node$1.fromJSON(E.schema,U.doc);else if(Q.name=="selection")J.selection=Selection.fromJSON(J.doc,U.selection);else if(Q.name=="storedMarks")U.storedMarks&&(J.storedMarks=U.storedMarks.map(E.schema.markFromJSON));else{if(G)for(let X in G){let Z=G[X],ee=Z.spec.state;if(Z.key==Q.name&&ee&&ee.fromJSON&&Object.prototype.hasOwnProperty.call(U,X)){J[Q.name]=ee.fromJSON.call(Z,E,U[X],J);return}}J[Q.name]=Q.init(E,J)}}),J}}function bindProps(R,E,U){for(let G in R){let Y=R[G];Y instanceof Function?Y=Y.bind(E):G=="handleDOMEvents"&&(Y=bindProps(Y,E,{})),U[G]=Y}return U}class Plugin{constructor(E){this.spec=E,this.props={},E.props&&bindProps(E.props,this,this.props),this.key=E.key?E.key.key:createKey$1("plugin")}getState(E){return E[this.key]}}const keys=Object.create(null);function createKey$1(R){return R in keys?R+"$"+ ++keys[R]:(keys[R]=0,R+"$")}class PluginKey{constructor(E="key"){this.key=createKey$1(E)}get(E){return E.config.pluginsByKey[this.key]}getState(E){return E[this.key]}}const domIndex=function(R){for(var E=0;;E++)if(R=R.previousSibling,!R)return E},parentNode=function(R){let E=R.assignedSlot||R.parentNode;return E&&E.nodeType==11?E.host:E};let reusedRange=null;const textRange=function(R,E,U){let G=reusedRange||(reusedRange=document.createRange());return G.setEnd(R,U==null?R.nodeValue.length:U),G.setStart(R,E||0),G},isEquivalentPosition=function(R,E,U,G){return U&&(scanFor(R,E,U,G,-1)||scanFor(R,E,U,G,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(R,E,U,G,Y){for(;;){if(R==U&&E==G)return!0;if(E==(Y<0?0:nodeSize(R))){let J=R.parentNode;if(!J||J.nodeType!=1||hasBlockDesc(R)||atomElements.test(R.nodeName)||R.contentEditable=="false")return!1;E=domIndex(R)+(Y<0?0:1),R=J}else if(R.nodeType==1){if(R=R.childNodes[E+(Y<0?-1:0)],R.contentEditable=="false")return!1;E=Y<0?nodeSize(R):0}else return!1}}function nodeSize(R){return R.nodeType==3?R.nodeValue.length:R.childNodes.length}function isOnEdge(R,E,U){for(let G=E==0,Y=E==nodeSize(R);G||Y;){if(R==U)return!0;let J=domIndex(R);if(R=R.parentNode,!R)return!1;G=G&&J==0,Y=Y&&J==nodeSize(R)}}function hasBlockDesc(R){let E;for(let U=R;U&&!(E=U.pmViewDesc);U=U.parentNode);return E&&E.node&&E.node.isBlock&&(E.dom==R||E.contentDOM==R)}const selectionCollapsed=function(R){return R.focusNode&&isEquivalentPosition(R.focusNode,R.focusOffset,R.anchorNode,R.anchorOffset)};function keyEvent(R,E){let U=document.createEvent("Event");return U.initEvent("keydown",!0,!0),U.keyCode=R,U.key=U.code=E,U}function deepActiveElement(R){let E=R.activeElement;for(;E&&E.shadowRoot;)E=E.shadowRoot.activeElement;return E}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko$2=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko$2&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome$2=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(R){return{left:0,right:R.documentElement.clientWidth,top:0,bottom:R.documentElement.clientHeight}}function getSide(R,E){return typeof R=="number"?R:R[E]}function clientRect(R){let E=R.getBoundingClientRect(),U=E.width/R.offsetWidth||1,G=E.height/R.offsetHeight||1;return{left:E.left,right:E.left+R.clientWidth*U,top:E.top,bottom:E.top+R.clientHeight*G}}function scrollRectIntoView(R,E,U){let G=R.someProp("scrollThreshold")||0,Y=R.someProp("scrollMargin")||5,J=R.dom.ownerDocument;for(let Q=U||R.dom;Q;Q=parentNode(Q)){if(Q.nodeType!=1)continue;let X=Q,Z=X==J.body,ee=Z?windowRect(J):clientRect(X),te=0,ne=0;if(E.top<ee.top+getSide(G,"top")?ne=-(ee.top-E.top+getSide(Y,"top")):E.bottom>ee.bottom-getSide(G,"bottom")&&(ne=E.bottom-ee.bottom+getSide(Y,"bottom")),E.left<ee.left+getSide(G,"left")?te=-(ee.left-E.left+getSide(Y,"left")):E.right>ee.right-getSide(G,"right")&&(te=E.right-ee.right+getSide(Y,"right")),te||ne)if(Z)J.defaultView.scrollBy(te,ne);else{let oe=X.scrollLeft,ce=X.scrollTop;ne&&(X.scrollTop+=ne),te&&(X.scrollLeft+=te);let pe=X.scrollLeft-oe,ye=X.scrollTop-ce;E={left:E.left-pe,top:E.top-ye,right:E.right-pe,bottom:E.bottom-ye}}if(Z)break}}function storeScrollPos(R){let E=R.dom.getBoundingClientRect(),U=Math.max(0,E.top),G,Y;for(let J=(E.left+E.right)/2,Q=U+1;Q<Math.min(innerHeight,E.bottom);Q+=5){let X=R.root.elementFromPoint(J,Q);if(!X||X==R.dom||!R.dom.contains(X))continue;let Z=X.getBoundingClientRect();if(Z.top>=U-20){G=X,Y=Z.top;break}}return{refDOM:G,refTop:Y,stack:scrollStack(R.dom)}}function scrollStack(R){let E=[],U=R.ownerDocument;for(let G=R;G&&(E.push({dom:G,top:G.scrollTop,left:G.scrollLeft}),R!=U);G=parentNode(G));return E}function resetScrollPos({refDOM:R,refTop:E,stack:U}){let G=R?R.getBoundingClientRect().top:0;restoreScrollStack(U,G==0?0:G-E)}function restoreScrollStack(R,E){for(let U=0;U<R.length;U++){let{dom:G,top:Y,left:J}=R[U];G.scrollTop!=Y+E&&(G.scrollTop=Y+E),G.scrollLeft!=J&&(G.scrollLeft=J)}}let preventScrollSupported=null;function focusPreventScroll(R){if(R.setActive)return R.setActive();if(preventScrollSupported)return R.focus(preventScrollSupported);let E=scrollStack(R);R.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(E,0))}function findOffsetInNode(R,E){let U,G=2e8,Y,J=0,Q=E.top,X=E.top;for(let Z=R.firstChild,ee=0;Z;Z=Z.nextSibling,ee++){let te;if(Z.nodeType==1)te=Z.getClientRects();else if(Z.nodeType==3)te=textRange(Z).getClientRects();else continue;for(let ne=0;ne<te.length;ne++){let oe=te[ne];if(oe.top<=Q&&oe.bottom>=X){Q=Math.max(oe.bottom,Q),X=Math.min(oe.top,X);let ce=oe.left>E.left?oe.left-E.left:oe.right<E.left?E.left-oe.right:0;if(ce<G){U=Z,G=ce,Y=ce&&U.nodeType==3?{left:oe.right<E.left?oe.right:oe.left,top:E.top}:E,Z.nodeType==1&&ce&&(J=ee+(E.left>=(oe.left+oe.right)/2?1:0));continue}}!U&&(E.left>=oe.right&&E.top>=oe.top||E.left>=oe.left&&E.top>=oe.bottom)&&(J=ee+1)}}return U&&U.nodeType==3?findOffsetInText(U,Y):!U||G&&U.nodeType==1?{node:R,offset:J}:findOffsetInNode(U,Y)}function findOffsetInText(R,E){let U=R.nodeValue.length,G=document.createRange();for(let Y=0;Y<U;Y++){G.setEnd(R,Y+1),G.setStart(R,Y);let J=singleRect(G,1);if(J.top!=J.bottom&&inRect(E,J))return{node:R,offset:Y+(E.left>=(J.left+J.right)/2?1:0)}}return{node:R,offset:0}}function inRect(R,E){return R.left>=E.left-1&&R.left<=E.right+1&&R.top>=E.top-1&&R.top<=E.bottom+1}function targetKludge(R,E){let U=R.parentNode;return U&&/^li$/i.test(U.nodeName)&&E.left<R.getBoundingClientRect().left?U:R}function posFromElement(R,E,U){let{node:G,offset:Y}=findOffsetInNode(E,U),J=-1;if(G.nodeType==1&&!G.firstChild){let Q=G.getBoundingClientRect();J=Q.left!=Q.right&&U.left>(Q.left+Q.right)/2?1:-1}return R.docView.posFromDOM(G,Y,J)}function posFromCaret(R,E,U,G){let Y=-1;for(let J=E,Q=!1;J!=R.dom;){let X=R.docView.nearestDesc(J,!0);if(!X)return null;if(X.dom.nodeType==1&&(X.node.isBlock&&X.parent&&!Q||!X.contentDOM)){let Z=X.dom.getBoundingClientRect();if(X.node.isBlock&&X.parent&&!Q&&(Q=!0,Z.left>G.left||Z.top>G.top?Y=X.posBefore:(Z.right<G.left||Z.bottom<G.top)&&(Y=X.posAfter)),!X.contentDOM&&Y<0)return(X.node.isBlock?G.top<(Z.top+Z.bottom)/2:G.left<(Z.left+Z.right)/2)?X.posBefore:X.posAfter}J=X.dom.parentNode}return Y>-1?Y:R.docView.posFromDOM(E,U,-1)}function elementFromPoint(R,E,U){let G=R.childNodes.length;if(G&&U.top<U.bottom)for(let Y=Math.max(0,Math.min(G-1,Math.floor(G*(E.top-U.top)/(U.bottom-U.top))-2)),J=Y;;){let Q=R.childNodes[J];if(Q.nodeType==1){let X=Q.getClientRects();for(let Z=0;Z<X.length;Z++){let ee=X[Z];if(inRect(E,ee))return elementFromPoint(Q,E,ee)}}if((J=(J+1)%G)==Y)break}return R}function posAtCoords(R,E){let U=R.dom.ownerDocument,G,Y=0;if(U.caretPositionFromPoint)try{let Z=U.caretPositionFromPoint(E.left,E.top);Z&&({offsetNode:G,offset:Y}=Z)}catch{}if(!G&&U.caretRangeFromPoint){let Z=U.caretRangeFromPoint(E.left,E.top);Z&&({startContainer:G,startOffset:Y}=Z)}let J=(R.root.elementFromPoint?R.root:U).elementFromPoint(E.left,E.top),Q;if(!J||!R.dom.contains(J.nodeType!=1?J.parentNode:J)){let Z=R.dom.getBoundingClientRect();if(!inRect(E,Z)||(J=elementFromPoint(R.dom,E,Z),!J))return null}if(safari$1)for(let Z=J;G&&Z;Z=parentNode(Z))Z.draggable&&(G=void 0);if(J=targetKludge(J,E),G){if(gecko$2&&G.nodeType==1&&(Y=Math.min(Y,G.childNodes.length),Y<G.childNodes.length)){let Z=G.childNodes[Y],ee;Z.nodeName=="IMG"&&(ee=Z.getBoundingClientRect()).right<=E.left&&ee.bottom>E.top&&Y++}G==R.dom&&Y==G.childNodes.length-1&&G.lastChild.nodeType==1&&E.top>G.lastChild.getBoundingClientRect().bottom?Q=R.state.doc.content.size:(Y==0||G.nodeType!=1||G.childNodes[Y-1].nodeName!="BR")&&(Q=posFromCaret(R,G,Y,E))}Q==null&&(Q=posFromElement(R,J,E));let X=R.docView.nearestDesc(J,!0);return{pos:Q,inside:X?X.posAtStart-X.border:-1}}function singleRect(R,E){let U=R.getClientRects();return U.length?U[E<0?0:U.length-1]:R.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(R,E,U){let{node:G,offset:Y,atom:J}=R.docView.domFromPos(E,U<0?-1:1),Q=webkit||gecko$2;if(G.nodeType==3)if(Q&&(BIDI.test(G.nodeValue)||(U<0?!Y:Y==G.nodeValue.length))){let Z=singleRect(textRange(G,Y,Y),U);if(gecko$2&&Y&&/\s/.test(G.nodeValue[Y-1])&&Y<G.nodeValue.length){let ee=singleRect(textRange(G,Y-1,Y-1),-1);if(ee.top==Z.top){let te=singleRect(textRange(G,Y,Y+1),-1);if(te.top!=Z.top)return flattenV(te,te.left<ee.left)}}return Z}else{let Z=Y,ee=Y,te=U<0?1:-1;return U<0&&!Y?(ee++,te=-1):U>=0&&Y==G.nodeValue.length?(Z--,te=1):U<0?Z--:ee++,flattenV(singleRect(textRange(G,Z,ee),1),te<0)}if(!R.state.doc.resolve(E-(J||0)).parent.inlineContent){if(J==null&&Y&&(U<0||Y==nodeSize(G))){let Z=G.childNodes[Y-1];if(Z.nodeType==1)return flattenH(Z.getBoundingClientRect(),!1)}if(J==null&&Y<nodeSize(G)){let Z=G.childNodes[Y];if(Z.nodeType==1)return flattenH(Z.getBoundingClientRect(),!0)}return flattenH(G.getBoundingClientRect(),U>=0)}if(J==null&&Y&&(U<0||Y==nodeSize(G))){let Z=G.childNodes[Y-1],ee=Z.nodeType==3?textRange(Z,nodeSize(Z)-(Q?0:1)):Z.nodeType==1&&(Z.nodeName!="BR"||!Z.nextSibling)?Z:null;if(ee)return flattenV(singleRect(ee,1),!1)}if(J==null&&Y<nodeSize(G)){let Z=G.childNodes[Y];for(;Z.pmViewDesc&&Z.pmViewDesc.ignoreForCoords;)Z=Z.nextSibling;let ee=Z?Z.nodeType==3?textRange(Z,0,Q?0:1):Z.nodeType==1?Z:null:null;if(ee)return flattenV(singleRect(ee,-1),!0)}return flattenV(singleRect(G.nodeType==3?textRange(G):G,-U),U>=0)}function flattenV(R,E){if(R.width==0)return R;let U=E?R.left:R.right;return{top:R.top,bottom:R.bottom,left:U,right:U}}function flattenH(R,E){if(R.height==0)return R;let U=E?R.top:R.bottom;return{top:U,bottom:U,left:R.left,right:R.right}}function withFlushedState(R,E,U){let G=R.state,Y=R.root.activeElement;G!=E&&R.updateState(E),Y!=R.dom&&R.focus();try{return U()}finally{G!=E&&R.updateState(G),Y!=R.dom&&Y&&Y.focus()}}function endOfTextblockVertical(R,E,U){let G=E.selection,Y=U=="up"?G.$from:G.$to;return withFlushedState(R,E,()=>{let{node:J}=R.docView.domFromPos(Y.pos,U=="up"?-1:1);for(;;){let X=R.docView.nearestDesc(J,!0);if(!X)break;if(X.node.isBlock){J=X.contentDOM||X.dom;break}J=X.dom.parentNode}let Q=coordsAtPos(R,Y.pos,1);for(let X=J.firstChild;X;X=X.nextSibling){let Z;if(X.nodeType==1)Z=X.getClientRects();else if(X.nodeType==3)Z=textRange(X,0,X.nodeValue.length).getClientRects();else continue;for(let ee=0;ee<Z.length;ee++){let te=Z[ee];if(te.bottom>te.top+1&&(U=="up"?Q.top-te.top>(te.bottom-Q.top)*2:te.bottom-Q.bottom>(Q.bottom-te.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(R,E,U){let{$head:G}=E.selection;if(!G.parent.isTextblock)return!1;let Y=G.parentOffset,J=!Y,Q=Y==G.parent.content.size,X=R.domSelection();return!maybeRTL.test(G.parent.textContent)||!X.modify?U=="left"||U=="backward"?J:Q:withFlushedState(R,E,()=>{let{focusNode:Z,focusOffset:ee,anchorNode:te,anchorOffset:ne}=R.domSelectionRange(),oe=X.caretBidiLevel;X.modify("move",U,"character");let ce=G.depth?R.docView.domAfterPos(G.before()):R.dom,{focusNode:pe,focusOffset:ye}=R.domSelectionRange(),Se=pe&&!ce.contains(pe.nodeType==1?pe:pe.parentNode)||Z==pe&&ee==ye;try{X.collapse(te,ne),Z&&(Z!=te||ee!=ne)&&X.extend&&X.extend(Z,ee)}catch{}return oe!=null&&(X.caretBidiLevel=oe),Se})}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(R,E,U){return cachedState==E&&cachedDir==U?cachedResult:(cachedState=E,cachedDir=U,cachedResult=U=="up"||U=="down"?endOfTextblockVertical(R,E,U):endOfTextblockHorizontal(R,E,U))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(E,U,G,Y){this.parent=E,this.children=U,this.dom=G,this.contentDOM=Y,this.dirty=NOT_DIRTY,G.pmViewDesc=this}matchesWidget(E){return!1}matchesMark(E){return!1}matchesNode(E,U,G){return!1}matchesHack(E){return!1}parseRule(){return null}stopEvent(E){return!1}get size(){let E=0;for(let U=0;U<this.children.length;U++)E+=this.children[U].size;return E}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let E=0;E<this.children.length;E++)this.children[E].destroy()}posBeforeChild(E){for(let U=0,G=this.posAtStart;;U++){let Y=this.children[U];if(Y==E)return G;G+=Y.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(E,U,G){if(this.contentDOM&&this.contentDOM.contains(E.nodeType==1?E:E.parentNode))if(G<0){let J,Q;if(E==this.contentDOM)J=E.childNodes[U-1];else{for(;E.parentNode!=this.contentDOM;)E=E.parentNode;J=E.previousSibling}for(;J&&!((Q=J.pmViewDesc)&&Q.parent==this);)J=J.previousSibling;return J?this.posBeforeChild(Q)+Q.size:this.posAtStart}else{let J,Q;if(E==this.contentDOM)J=E.childNodes[U];else{for(;E.parentNode!=this.contentDOM;)E=E.parentNode;J=E.nextSibling}for(;J&&!((Q=J.pmViewDesc)&&Q.parent==this);)J=J.nextSibling;return J?this.posBeforeChild(Q):this.posAtEnd}let Y;if(E==this.dom&&this.contentDOM)Y=U>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))Y=E.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(U==0)for(let J=E;;J=J.parentNode){if(J==this.dom){Y=!1;break}if(J.previousSibling)break}if(Y==null&&U==E.childNodes.length)for(let J=E;;J=J.parentNode){if(J==this.dom){Y=!0;break}if(J.nextSibling)break}}return(Y==null?G>0:Y)?this.posAtEnd:this.posAtStart}nearestDesc(E,U=!1){for(let G=!0,Y=E;Y;Y=Y.parentNode){let J=this.getDesc(Y),Q;if(J&&(!U||J.node))if(G&&(Q=J.nodeDOM)&&!(Q.nodeType==1?Q.contains(E.nodeType==1?E:E.parentNode):Q==E))G=!1;else return J}}getDesc(E){let U=E.pmViewDesc;for(let G=U;G;G=G.parent)if(G==this)return U}posFromDOM(E,U,G){for(let Y=E;Y;Y=Y.parentNode){let J=this.getDesc(Y);if(J)return J.localPosFromDOM(E,U,G)}return-1}descAt(E){for(let U=0,G=0;U<this.children.length;U++){let Y=this.children[U],J=G+Y.size;if(G==E&&J!=G){for(;!Y.border&&Y.children.length;)Y=Y.children[0];return Y}if(E<J)return Y.descAt(E-G-Y.border);G=J}}domFromPos(E,U){if(!this.contentDOM)return{node:this.dom,offset:0,atom:E+1};let G=0,Y=0;for(let J=0;G<this.children.length;G++){let Q=this.children[G],X=J+Q.size;if(X>E||Q instanceof TrailingHackViewDesc){Y=E-J;break}J=X}if(Y)return this.children[G].domFromPos(Y-this.children[G].border,U);for(let J;G&&!(J=this.children[G-1]).size&&J instanceof WidgetViewDesc&&J.side>=0;G--);if(U<=0){let J,Q=!0;for(;J=G?this.children[G-1]:null,!(!J||J.dom.parentNode==this.contentDOM);G--,Q=!1);return J&&U&&Q&&!J.border&&!J.domAtom?J.domFromPos(J.size,U):{node:this.contentDOM,offset:J?domIndex(J.dom)+1:0}}else{let J,Q=!0;for(;J=G<this.children.length?this.children[G]:null,!(!J||J.dom.parentNode==this.contentDOM);G++,Q=!1);return J&&Q&&!J.border&&!J.domAtom?J.domFromPos(0,U):{node:this.contentDOM,offset:J?domIndex(J.dom):this.contentDOM.childNodes.length}}}parseRange(E,U,G=0){if(this.children.length==0)return{node:this.contentDOM,from:E,to:U,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let Y=-1,J=-1;for(let Q=G,X=0;;X++){let Z=this.children[X],ee=Q+Z.size;if(Y==-1&&E<=ee){let te=Q+Z.border;if(E>=te&&U<=ee-Z.border&&Z.node&&Z.contentDOM&&this.contentDOM.contains(Z.contentDOM))return Z.parseRange(E,U,te);E=Q;for(let ne=X;ne>0;ne--){let oe=this.children[ne-1];if(oe.size&&oe.dom.parentNode==this.contentDOM&&!oe.emptyChildAt(1)){Y=domIndex(oe.dom)+1;break}E-=oe.size}Y==-1&&(Y=0)}if(Y>-1&&(ee>U||X==this.children.length-1)){U=ee;for(let te=X+1;te<this.children.length;te++){let ne=this.children[te];if(ne.size&&ne.dom.parentNode==this.contentDOM&&!ne.emptyChildAt(-1)){J=domIndex(ne.dom);break}U+=ne.size}J==-1&&(J=this.contentDOM.childNodes.length);break}Q=ee}return{node:this.contentDOM,from:E,to:U,fromOffset:Y,toOffset:J}}emptyChildAt(E){if(this.border||!this.contentDOM||!this.children.length)return!1;let U=this.children[E<0?0:this.children.length-1];return U.size==0||U.emptyChildAt(E)}domAfterPos(E){let{node:U,offset:G}=this.domFromPos(E,0);if(U.nodeType!=1||G==U.childNodes.length)throw new RangeError("No node after pos "+E);return U.childNodes[G]}setSelection(E,U,G,Y=!1){let J=Math.min(E,U),Q=Math.max(E,U);for(let oe=0,ce=0;oe<this.children.length;oe++){let pe=this.children[oe],ye=ce+pe.size;if(J>ce&&Q<ye)return pe.setSelection(E-ce-pe.border,U-ce-pe.border,G,Y);ce=ye}let X=this.domFromPos(E,E?-1:1),Z=U==E?X:this.domFromPos(U,U?-1:1),ee=G.getSelection(),te=!1;if((gecko$2||safari$1)&&E==U){let{node:oe,offset:ce}=X;if(oe.nodeType==3){if(te=!!(ce&&oe.nodeValue[ce-1]==`
`),te&&ce==oe.nodeValue.length)for(let pe=oe,ye;pe;pe=pe.parentNode){if(ye=pe.nextSibling){ye.nodeName=="BR"&&(X=Z={node:ye.parentNode,offset:domIndex(ye)+1});break}let Se=pe.pmViewDesc;if(Se&&Se.node&&Se.node.isBlock)break}}else{let pe=oe.childNodes[ce-1];te=pe&&(pe.nodeName=="BR"||pe.contentEditable=="false")}}if(gecko$2&&ee.focusNode&&ee.focusNode!=Z.node&&ee.focusNode.nodeType==1){let oe=ee.focusNode.childNodes[ee.focusOffset];oe&&oe.contentEditable=="false"&&(Y=!0)}if(!(Y||te&&safari$1)&&isEquivalentPosition(X.node,X.offset,ee.anchorNode,ee.anchorOffset)&&isEquivalentPosition(Z.node,Z.offset,ee.focusNode,ee.focusOffset))return;let ne=!1;if((ee.extend||E==U)&&!te){ee.collapse(X.node,X.offset);try{E!=U&&ee.extend(Z.node,Z.offset),ne=!0}catch{}}if(!ne){if(E>U){let ce=X;X=Z,Z=ce}let oe=document.createRange();oe.setEnd(Z.node,Z.offset),oe.setStart(X.node,X.offset),ee.removeAllRanges(),ee.addRange(oe)}}ignoreMutation(E){return!this.contentDOM&&E.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(E,U){for(let G=0,Y=0;Y<this.children.length;Y++){let J=this.children[Y],Q=G+J.size;if(G==Q?E<=Q&&U>=G:E<Q&&U>G){let X=G+J.border,Z=Q-J.border;if(E>=X&&U<=Z){this.dirty=E==G||U==Q?CONTENT_DIRTY:CHILD_DIRTY,E==X&&U==Z&&(J.contentLost||J.dom.parentNode!=this.contentDOM)?J.dirty=NODE_DIRTY:J.markDirty(E-X,U-X);return}else J.dirty=J.dom==J.contentDOM&&J.dom.parentNode==this.contentDOM&&!J.children.length?CONTENT_DIRTY:NODE_DIRTY}G=Q}this.dirty=CONTENT_DIRTY}markParentsDirty(){let E=1;for(let U=this.parent;U;U=U.parent,E++){let G=E==1?CONTENT_DIRTY:CHILD_DIRTY;U.dirty<G&&(U.dirty=G)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class WidgetViewDesc extends ViewDesc{constructor(E,U,G,Y){let J,Q=U.type.toDOM;if(typeof Q=="function"&&(Q=Q(G,()=>{if(!J)return Y;if(J.parent)return J.parent.posBeforeChild(J)})),!U.type.spec.raw){if(Q.nodeType!=1){let X=document.createElement("span");X.appendChild(Q),Q=X}Q.contentEditable="false",Q.classList.add("ProseMirror-widget")}super(E,[],Q,null),this.widget=U,this.widget=U,J=this}matchesWidget(E){return this.dirty==NOT_DIRTY&&E.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(E){let U=this.widget.spec.stopEvent;return U?U(E):!1}ignoreMutation(E){return E.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(E,U,G,Y){super(E,[],U,null),this.textDOM=G,this.text=Y}get size(){return this.text.length}localPosFromDOM(E,U){return E!=this.textDOM?this.posAtStart+(U?this.size:0):this.posAtStart+U}domFromPos(E){return{node:this.textDOM,offset:E}}ignoreMutation(E){return E.type==="characterData"&&E.target.nodeValue==E.oldValue}}class MarkViewDesc extends ViewDesc{constructor(E,U,G,Y){super(E,[],G,Y),this.mark=U}static create(E,U,G,Y){let J=Y.nodeViews[U.type.name],Q=J&&J(U,Y,G);return(!Q||!Q.dom)&&(Q=DOMSerializer.renderSpec(document,U.type.spec.toDOM(U,G))),new MarkViewDesc(E,U,Q.dom,Q.contentDOM||Q.dom)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(E){return this.dirty!=NODE_DIRTY&&this.mark.eq(E)}markDirty(E,U){if(super.markDirty(E,U),this.dirty!=NOT_DIRTY){let G=this.parent;for(;!G.node;)G=G.parent;G.dirty<this.dirty&&(G.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(E,U,G){let Y=MarkViewDesc.create(this.parent,this.mark,!0,G),J=this.children,Q=this.size;U<Q&&(J=replaceNodes(J,U,Q,G)),E>0&&(J=replaceNodes(J,0,E,G));for(let X=0;X<J.length;X++)J[X].parent=Y;return Y.children=J,Y}}class NodeViewDesc extends ViewDesc{constructor(E,U,G,Y,J,Q,X,Z,ee){super(E,[],J,Q),this.node=U,this.outerDeco=G,this.innerDeco=Y,this.nodeDOM=X,Q&&this.updateChildren(Z,ee)}static create(E,U,G,Y,J,Q){let X=J.nodeViews[U.type.name],Z,ee=X&&X(U,J,()=>{if(!Z)return Q;if(Z.parent)return Z.parent.posBeforeChild(Z)},G,Y),te=ee&&ee.dom,ne=ee&&ee.contentDOM;if(U.isText){if(!te)te=document.createTextNode(U.text);else if(te.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else te||({dom:te,contentDOM:ne}=DOMSerializer.renderSpec(document,U.type.spec.toDOM(U)));!ne&&!U.isText&&te.nodeName!="BR"&&(te.hasAttribute("contenteditable")||(te.contentEditable="false"),U.type.spec.draggable&&(te.draggable=!0));let oe=te;return te=applyOuterDeco(te,G,U),ee?Z=new CustomNodeViewDesc(E,U,G,Y,te,ne||null,oe,ee,J,Q+1):U.isText?new TextViewDesc(E,U,G,Y,te,oe,J):new NodeViewDesc(E,U,G,Y,te,ne||null,oe,J,Q+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let E={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(E.preserveWhitespace="full"),!this.contentDOM)E.getContent=()=>this.node.content;else if(!this.contentLost)E.contentElement=this.contentDOM;else{for(let U=this.children.length-1;U>=0;U--){let G=this.children[U];if(this.dom.contains(G.dom.parentNode)){E.contentElement=G.dom.parentNode;break}}E.contentElement||(E.getContent=()=>Fragment.empty)}return E}matchesNode(E,U,G){return this.dirty==NOT_DIRTY&&E.eq(this.node)&&sameOuterDeco(U,this.outerDeco)&&G.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(E,U){let G=this.node.inlineContent,Y=U,J=E.composing?this.localCompositionInfo(E,U):null,Q=J&&J.pos>-1?J:null,X=J&&J.pos<0,Z=new ViewTreeUpdater(this,Q&&Q.node,E);iterDeco(this.node,this.innerDeco,(ee,te,ne)=>{ee.spec.marks?Z.syncToMarks(ee.spec.marks,G,E):ee.type.side>=0&&!ne&&Z.syncToMarks(te==this.node.childCount?Mark$1.none:this.node.child(te).marks,G,E),Z.placeWidget(ee,E,Y)},(ee,te,ne,oe)=>{Z.syncToMarks(ee.marks,G,E);let ce;Z.findNodeMatch(ee,te,ne,oe)||X&&E.state.selection.from>Y&&E.state.selection.to<Y+ee.nodeSize&&(ce=Z.findIndexWithChild(J.node))>-1&&Z.updateNodeAt(ee,te,ne,ce,E)||Z.updateNextNode(ee,te,ne,E,oe)||Z.addNode(ee,te,ne,E,Y),Y+=ee.nodeSize}),Z.syncToMarks([],G,E),this.node.isTextblock&&Z.addTextblockHacks(),Z.destroyRest(),(Z.changed||this.dirty==CONTENT_DIRTY)&&(Q&&this.protectLocalComposition(E,Q),renderDescs(this.contentDOM,this.children,E),ios&&iosHacks(this.dom))}localCompositionInfo(E,U){let{from:G,to:Y}=E.state.selection;if(!(E.state.selection instanceof TextSelection)||G<U||Y>U+this.node.content.size)return null;let J=E.domSelectionRange(),Q=nearbyTextNode(J.focusNode,J.focusOffset);if(!Q||!this.dom.contains(Q.parentNode))return null;if(this.node.inlineContent){let X=Q.nodeValue,Z=findTextInFragment(this.node.content,X,G-U,Y-U);return Z<0?null:{node:Q,pos:Z,text:X}}else return{node:Q,pos:-1,text:""}}protectLocalComposition(E,{node:U,pos:G,text:Y}){if(this.getDesc(U))return;let J=U;for(;J.parentNode!=this.contentDOM;J=J.parentNode){for(;J.previousSibling;)J.parentNode.removeChild(J.previousSibling);for(;J.nextSibling;)J.parentNode.removeChild(J.nextSibling);J.pmViewDesc&&(J.pmViewDesc=void 0)}let Q=new CompositionViewDesc(this,J,U,Y);E.input.compositionNodes.push(Q),this.children=replaceNodes(this.children,G,G+Y.length,E,Q)}update(E,U,G,Y){return this.dirty==NODE_DIRTY||!E.sameMarkup(this.node)?!1:(this.updateInner(E,U,G,Y),!0)}updateInner(E,U,G,Y){this.updateOuterDeco(U),this.node=E,this.innerDeco=G,this.contentDOM&&this.updateChildren(Y,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(E){if(sameOuterDeco(E,this.outerDeco))return;let U=this.nodeDOM.nodeType!=1,G=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,U),computeOuterDeco(E,this.node,U)),this.dom!=G&&(G.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=E}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function docViewDesc(R,E,U,G,Y){return applyOuterDeco(G,E,R),new NodeViewDesc(void 0,R,E,U,G,G,G,Y,0)}class TextViewDesc extends NodeViewDesc{constructor(E,U,G,Y,J,Q,X){super(E,U,G,Y,J,null,Q,X,0)}parseRule(){let E=this.nodeDOM.parentNode;for(;E&&E!=this.dom&&!E.pmIsDeco;)E=E.parentNode;return{skip:E||!0}}update(E,U,G,Y){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!E.sameMarkup(this.node)?!1:(this.updateOuterDeco(U),(this.dirty!=NOT_DIRTY||E.text!=this.node.text)&&E.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=E.text,Y.trackWrites==this.nodeDOM&&(Y.trackWrites=null)),this.node=E,this.dirty=NOT_DIRTY,!0)}inParent(){let E=this.parent.contentDOM;for(let U=this.nodeDOM;U;U=U.parentNode)if(U==E)return!0;return!1}domFromPos(E){return{node:this.nodeDOM,offset:E}}localPosFromDOM(E,U,G){return E==this.nodeDOM?this.posAtStart+Math.min(U,this.node.text.length):super.localPosFromDOM(E,U,G)}ignoreMutation(E){return E.type!="characterData"&&E.type!="selection"}slice(E,U,G){let Y=this.node.cut(E,U),J=document.createTextNode(Y.text);return new TextViewDesc(this.parent,Y,this.outerDeco,this.innerDeco,J,J,G)}markDirty(E,U){super.markDirty(E,U),this.dom!=this.nodeDOM&&(E==0||U==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(E){return this.dirty==NOT_DIRTY&&this.dom.nodeName==E}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(E,U,G,Y,J,Q,X,Z,ee,te){super(E,U,G,Y,J,Q,X,ee,te),this.spec=Z}update(E,U,G,Y){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update){let J=this.spec.update(E,U,G);return J&&this.updateInner(E,U,G,Y),J}else return!this.contentDOM&&!E.isLeaf?!1:super.update(E,U,G,Y)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(E,U,G,Y){this.spec.setSelection?this.spec.setSelection(E,U,G):super.setSelection(E,U,G,Y)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(E){return this.spec.stopEvent?this.spec.stopEvent(E):!1}ignoreMutation(E){return this.spec.ignoreMutation?this.spec.ignoreMutation(E):super.ignoreMutation(E)}}function renderDescs(R,E,U){let G=R.firstChild,Y=!1;for(let J=0;J<E.length;J++){let Q=E[J],X=Q.dom;if(X.parentNode==R){for(;X!=G;)G=rm(G),Y=!0;G=G.nextSibling}else Y=!0,R.insertBefore(X,G);if(Q instanceof MarkViewDesc){let Z=G?G.previousSibling:R.lastChild;renderDescs(Q.contentDOM,Q.children,U),G=Z?Z.nextSibling:R.firstChild}}for(;G;)G=rm(G),Y=!0;Y&&U.trackWrites==R&&(U.trackWrites=null)}const OuterDecoLevel=function(R){R&&(this.nodeName=R)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(R,E,U){if(R.length==0)return noDeco;let G=U?noDeco[0]:new OuterDecoLevel,Y=[G];for(let J=0;J<R.length;J++){let Q=R[J].type.attrs;if(!!Q){Q.nodeName&&Y.push(G=new OuterDecoLevel(Q.nodeName));for(let X in Q){let Z=Q[X];Z!=null&&(U&&Y.length==1&&Y.push(G=new OuterDecoLevel(E.isInline?"span":"div")),X=="class"?G.class=(G.class?G.class+" ":"")+Z:X=="style"?G.style=(G.style?G.style+";":"")+Z:X!="nodeName"&&(G[X]=Z))}}}return Y}function patchOuterDeco(R,E,U,G){if(U==noDeco&&G==noDeco)return E;let Y=E;for(let J=0;J<G.length;J++){let Q=G[J],X=U[J];if(J){let Z;X&&X.nodeName==Q.nodeName&&Y!=R&&(Z=Y.parentNode)&&Z.nodeName.toLowerCase()==Q.nodeName||(Z=document.createElement(Q.nodeName),Z.pmIsDeco=!0,Z.appendChild(Y),X=noDeco[0]),Y=Z}patchAttributes(Y,X||noDeco[0],Q)}return Y}function patchAttributes(R,E,U){for(let G in E)G!="class"&&G!="style"&&G!="nodeName"&&!(G in U)&&R.removeAttribute(G);for(let G in U)G!="class"&&G!="style"&&G!="nodeName"&&U[G]!=E[G]&&R.setAttribute(G,U[G]);if(E.class!=U.class){let G=E.class?E.class.split(" ").filter(Boolean):[],Y=U.class?U.class.split(" ").filter(Boolean):[];for(let J=0;J<G.length;J++)Y.indexOf(G[J])==-1&&R.classList.remove(G[J]);for(let J=0;J<Y.length;J++)G.indexOf(Y[J])==-1&&R.classList.add(Y[J]);R.classList.length==0&&R.removeAttribute("class")}if(E.style!=U.style){if(E.style){let G=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,Y;for(;Y=G.exec(E.style);)R.style.removeProperty(Y[1])}U.style&&(R.style.cssText+=U.style)}}function applyOuterDeco(R,E,U){return patchOuterDeco(R,R,noDeco,computeOuterDeco(E,U,R.nodeType!=1))}function sameOuterDeco(R,E){if(R.length!=E.length)return!1;for(let U=0;U<R.length;U++)if(!R[U].type.eq(E[U].type))return!1;return!0}function rm(R){let E=R.nextSibling;return R.parentNode.removeChild(R),E}class ViewTreeUpdater{constructor(E,U,G){this.lock=U,this.view=G,this.index=0,this.stack=[],this.changed=!1,this.top=E,this.preMatch=preMatch(E.node.content,E)}destroyBetween(E,U){if(E!=U){for(let G=E;G<U;G++)this.top.children[G].destroy();this.top.children.splice(E,U-E),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(E,U,G){let Y=0,J=this.stack.length>>1,Q=Math.min(J,E.length);for(;Y<Q&&(Y==J-1?this.top:this.stack[Y+1<<1]).matchesMark(E[Y])&&E[Y].type.spec.spanning!==!1;)Y++;for(;Y<J;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),J--;for(;J<E.length;){this.stack.push(this.top,this.index+1);let X=-1;for(let Z=this.index;Z<Math.min(this.index+3,this.top.children.length);Z++){let ee=this.top.children[Z];if(ee.matchesMark(E[J])&&!this.isLocked(ee.dom)){X=Z;break}}if(X>-1)X>this.index&&(this.changed=!0,this.destroyBetween(this.index,X)),this.top=this.top.children[this.index];else{let Z=MarkViewDesc.create(this.top,E[J],U,G);this.top.children.splice(this.index,0,Z),this.top=Z,this.changed=!0}this.index=0,J++}}findNodeMatch(E,U,G,Y){let J=-1,Q;if(Y>=this.preMatch.index&&(Q=this.preMatch.matches[Y-this.preMatch.index]).parent==this.top&&Q.matchesNode(E,U,G))J=this.top.children.indexOf(Q,this.index);else for(let X=this.index,Z=Math.min(this.top.children.length,X+5);X<Z;X++){let ee=this.top.children[X];if(ee.matchesNode(E,U,G)&&!this.preMatch.matched.has(ee)){J=X;break}}return J<0?!1:(this.destroyBetween(this.index,J),this.index++,!0)}updateNodeAt(E,U,G,Y,J){let Q=this.top.children[Y];return Q.dirty==NODE_DIRTY&&Q.dom==Q.contentDOM&&(Q.dirty=CONTENT_DIRTY),Q.update(E,U,G,J)?(this.destroyBetween(this.index,Y),this.index++,!0):!1}findIndexWithChild(E){for(;;){let U=E.parentNode;if(!U)return-1;if(U==this.top.contentDOM){let G=E.pmViewDesc;if(G){for(let Y=this.index;Y<this.top.children.length;Y++)if(this.top.children[Y]==G)return Y}return-1}E=U}}updateNextNode(E,U,G,Y,J){for(let Q=this.index;Q<this.top.children.length;Q++){let X=this.top.children[Q];if(X instanceof NodeViewDesc){let Z=this.preMatch.matched.get(X);if(Z!=null&&Z!=J)return!1;let ee=X.dom;if(!(this.isLocked(ee)&&!(E.isText&&X.node&&X.node.isText&&X.nodeDOM.nodeValue==E.text&&X.dirty!=NODE_DIRTY&&sameOuterDeco(U,X.outerDeco)))&&X.update(E,U,G,Y))return this.destroyBetween(this.index,Q),X.dom!=ee&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(E,U,G,Y,J){this.top.children.splice(this.index++,0,NodeViewDesc.create(this.top,E,U,G,Y,J)),this.changed=!0}placeWidget(E,U,G){let Y=this.index<this.top.children.length?this.top.children[this.index]:null;if(Y&&Y.matchesWidget(E)&&(E==Y.widget||!Y.widget.type.toDOM.parentNode))this.index++;else{let J=new WidgetViewDesc(this.top,E,U,G);this.top.children.splice(this.index++,0,J),this.changed=!0}}addTextblockHacks(){let E=this.top.children[this.index-1],U=this.top;for(;E instanceof MarkViewDesc;)U=E,E=U.children[U.children.length-1];(!E||!(E instanceof TextViewDesc)||/\n$/.test(E.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(E.node.text))&&((safari$1||chrome$2)&&E&&E.dom.contentEditable=="false"&&this.addHackNode("IMG",U),this.addHackNode("BR",this.top))}addHackNode(E,U){if(U==this.top&&this.index<U.children.length&&U.children[this.index].matchesHack(E))this.index++;else{let G=document.createElement(E);E=="IMG"&&(G.className="ProseMirror-separator",G.alt=""),E=="BR"&&(G.className="ProseMirror-trailingBreak");let Y=new TrailingHackViewDesc(this.top,[],G,null);U!=this.top?U.children.push(Y):U.children.splice(this.index++,0,Y),this.changed=!0}}isLocked(E){return this.lock&&(E==this.lock||E.nodeType==1&&E.contains(this.lock.parentNode))}}function preMatch(R,E){let U=E,G=U.children.length,Y=R.childCount,J=new Map,Q=[];e:for(;Y>0;){let X;for(;;)if(G){let ee=U.children[G-1];if(ee instanceof MarkViewDesc)U=ee,G=ee.children.length;else{X=ee,G--;break}}else{if(U==E)break e;G=U.parent.children.indexOf(U),U=U.parent}let Z=X.node;if(!!Z){if(Z!=R.child(Y-1))break;--Y,J.set(X,Y),Q.push(X)}}return{index:Y,matched:J,matches:Q.reverse()}}function compareSide(R,E){return R.type.side-E.type.side}function iterDeco(R,E,U,G){let Y=E.locals(R),J=0;if(Y.length==0){for(let ee=0;ee<R.childCount;ee++){let te=R.child(ee);G(te,Y,E.forChild(J,te),ee),J+=te.nodeSize}return}let Q=0,X=[],Z=null;for(let ee=0;;){if(Q<Y.length&&Y[Q].to==J){let pe=Y[Q++],ye;for(;Q<Y.length&&Y[Q].to==J;)(ye||(ye=[pe])).push(Y[Q++]);if(ye){ye.sort(compareSide);for(let Se=0;Se<ye.length;Se++)U(ye[Se],ee,!!Z)}else U(pe,ee,!!Z)}let te,ne;if(Z)ne=-1,te=Z,Z=null;else if(ee<R.childCount)ne=ee,te=R.child(ee++);else break;for(let pe=0;pe<X.length;pe++)X[pe].to<=J&&X.splice(pe--,1);for(;Q<Y.length&&Y[Q].from<=J&&Y[Q].to>J;)X.push(Y[Q++]);let oe=J+te.nodeSize;if(te.isText){let pe=oe;Q<Y.length&&Y[Q].from<pe&&(pe=Y[Q].from);for(let ye=0;ye<X.length;ye++)X[ye].to<pe&&(pe=X[ye].to);pe<oe&&(Z=te.cut(pe-J),te=te.cut(0,pe-J),oe=pe,ne=-1)}let ce=te.isInline&&!te.isLeaf?X.filter(pe=>!pe.inline):X.slice();G(te,ce,E.forChild(J,te),ne),J=oe}}function iosHacks(R){if(R.nodeName=="UL"||R.nodeName=="OL"){let E=R.style.cssText;R.style.cssText=E+"; list-style: square !important",window.getComputedStyle(R).listStyle,R.style.cssText=E}}function nearbyTextNode(R,E){for(;;){if(R.nodeType==3)return R;if(R.nodeType==1&&E>0){if(R.childNodes.length>E&&R.childNodes[E].nodeType==3)return R.childNodes[E];R=R.childNodes[E-1],E=nodeSize(R)}else if(R.nodeType==1&&E<R.childNodes.length)R=R.childNodes[E],E=0;else return null}}function findTextInFragment(R,E,U,G){for(let Y=0,J=0;Y<R.childCount&&J<=G;){let Q=R.child(Y++),X=J;if(J+=Q.nodeSize,!Q.isText)continue;let Z=Q.text;for(;Y<R.childCount;){let ee=R.child(Y++);if(J+=ee.nodeSize,!ee.isText)break;Z+=ee.text}if(J>=U){let ee=X<G?Z.lastIndexOf(E,G-X-1):-1;if(ee>=0&&ee+E.length+X>=U)return X+ee;if(U==G&&Z.length>=G+E.length-X&&Z.slice(G-X,G-X+E.length)==E)return G}}return-1}function replaceNodes(R,E,U,G,Y){let J=[];for(let Q=0,X=0;Q<R.length;Q++){let Z=R[Q],ee=X,te=X+=Z.size;ee>=U||te<=E?J.push(Z):(ee<E&&J.push(Z.slice(0,E-ee,G)),Y&&(J.push(Y),Y=void 0),te>U&&J.push(Z.slice(U-ee,Z.size,G)))}return J}function selectionFromDOM(R,E=null){let U=R.domSelectionRange(),G=R.state.doc;if(!U.focusNode)return null;let Y=R.docView.nearestDesc(U.focusNode),J=Y&&Y.size==0,Q=R.docView.posFromDOM(U.focusNode,U.focusOffset,1);if(Q<0)return null;let X=G.resolve(Q),Z,ee;if(selectionCollapsed(U)){for(Z=X;Y&&!Y.node;)Y=Y.parent;let te=Y.node;if(Y&&te.isAtom&&NodeSelection.isSelectable(te)&&Y.parent&&!(te.isInline&&isOnEdge(U.focusNode,U.focusOffset,Y.dom))){let ne=Y.posBefore;ee=new NodeSelection(Q==ne?X:G.resolve(ne))}}else{let te=R.docView.posFromDOM(U.anchorNode,U.anchorOffset,1);if(te<0)return null;Z=G.resolve(te)}if(!ee){let te=E=="pointer"||R.state.selection.head<X.pos&&!J?1:-1;ee=selectionBetween(R,Z,X,te)}return ee}function editorOwnsSelection(R){return R.editable?R.hasFocus():hasSelection(R)&&document.activeElement&&document.activeElement.contains(R.dom)}function selectionToDOM(R,E=!1){let U=R.state.selection;if(syncNodeSelection(R,U),!!editorOwnsSelection(R)){if(!E&&R.input.mouseDown&&R.input.mouseDown.allowDefault&&chrome$2){let G=R.domSelectionRange(),Y=R.domObserver.currentSelection;if(G.anchorNode&&Y.anchorNode&&isEquivalentPosition(G.anchorNode,G.anchorOffset,Y.anchorNode,Y.anchorOffset)){R.input.mouseDown.delayedSelectionSync=!0,R.domObserver.setCurSelection();return}}if(R.domObserver.disconnectSelection(),R.cursorWrapper)selectCursorWrapper(R);else{let{anchor:G,head:Y}=U,J,Q;brokenSelectBetweenUneditable&&!(U instanceof TextSelection)&&(U.$from.parent.inlineContent||(J=temporarilyEditableNear(R,U.from)),!U.empty&&!U.$from.parent.inlineContent&&(Q=temporarilyEditableNear(R,U.to))),R.docView.setSelection(G,Y,R.root,E),brokenSelectBetweenUneditable&&(J&&resetEditable(J),Q&&resetEditable(Q)),U.visible?R.dom.classList.remove("ProseMirror-hideselection"):(R.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(R))}R.domObserver.setCurSelection(),R.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$2&&chrome_version<63;function temporarilyEditableNear(R,E){let{node:U,offset:G}=R.docView.domFromPos(E,0),Y=G<U.childNodes.length?U.childNodes[G]:null,J=G?U.childNodes[G-1]:null;if(safari$1&&Y&&Y.contentEditable=="false")return setEditable(Y);if((!Y||Y.contentEditable=="false")&&(!J||J.contentEditable=="false")){if(Y)return setEditable(Y);if(J)return setEditable(J)}}function setEditable(R){return R.contentEditable="true",safari$1&&R.draggable&&(R.draggable=!1,R.wasDraggable=!0),R}function resetEditable(R){R.contentEditable="false",R.wasDraggable&&(R.draggable=!0,R.wasDraggable=null)}function removeClassOnSelectionChange(R){let E=R.dom.ownerDocument;E.removeEventListener("selectionchange",R.input.hideSelectionGuard);let U=R.domSelectionRange(),G=U.anchorNode,Y=U.anchorOffset;E.addEventListener("selectionchange",R.input.hideSelectionGuard=()=>{(U.anchorNode!=G||U.anchorOffset!=Y)&&(E.removeEventListener("selectionchange",R.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(R)||R.state.selection.visible)&&R.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(R){let E=R.domSelection(),U=document.createRange(),G=R.cursorWrapper.dom,Y=G.nodeName=="IMG";Y?U.setEnd(G.parentNode,domIndex(G)+1):U.setEnd(G,0),U.collapse(!1),E.removeAllRanges(),E.addRange(U),!Y&&!R.state.selection.visible&&ie$1&&ie_version<=11&&(G.disabled=!0,G.disabled=!1)}function syncNodeSelection(R,E){if(E instanceof NodeSelection){let U=R.docView.descAt(E.from);U!=R.lastSelectedViewDesc&&(clearNodeSelection(R),U&&U.selectNode(),R.lastSelectedViewDesc=U)}else clearNodeSelection(R)}function clearNodeSelection(R){R.lastSelectedViewDesc&&(R.lastSelectedViewDesc.parent&&R.lastSelectedViewDesc.deselectNode(),R.lastSelectedViewDesc=void 0)}function selectionBetween(R,E,U,G){return R.someProp("createSelectionBetween",Y=>Y(R,E,U))||TextSelection.between(E,U,G)}function hasFocusAndSelection(R){return R.editable&&!R.hasFocus()?!1:hasSelection(R)}function hasSelection(R){let E=R.domSelectionRange();if(!E.anchorNode)return!1;try{return R.dom.contains(E.anchorNode.nodeType==3?E.anchorNode.parentNode:E.anchorNode)&&(R.editable||R.dom.contains(E.focusNode.nodeType==3?E.focusNode.parentNode:E.focusNode))}catch{return!1}}function anchorInRightPlace(R){let E=R.docView.domFromPos(R.state.selection.anchor,0),U=R.domSelectionRange();return isEquivalentPosition(E.node,E.offset,U.anchorNode,U.anchorOffset)}function moveSelectionBlock(R,E){let{$anchor:U,$head:G}=R.selection,Y=E>0?U.max(G):U.min(G),J=Y.parent.inlineContent?Y.depth?R.doc.resolve(E>0?Y.after():Y.before()):null:Y;return J&&Selection.findFrom(J,E)}function apply(R,E){return R.dispatch(R.state.tr.setSelection(E).scrollIntoView()),!0}function selectHorizontally(R,E,U){let G=R.state.selection;if(G instanceof TextSelection){if(!G.empty||U.indexOf("s")>-1)return!1;if(R.endOfTextblock(E>0?"right":"left")){let Y=moveSelectionBlock(R.state,E);return Y&&Y instanceof NodeSelection?apply(R,Y):!1}else if(!(mac$2&&U.indexOf("m")>-1)){let Y=G.$head,J=Y.textOffset?null:E<0?Y.nodeBefore:Y.nodeAfter,Q;if(!J||J.isText)return!1;let X=E<0?Y.pos-J.nodeSize:Y.pos;return J.isAtom||(Q=R.docView.descAt(X))&&!Q.contentDOM?NodeSelection.isSelectable(J)?apply(R,new NodeSelection(E<0?R.state.doc.resolve(Y.pos-J.nodeSize):Y)):webkit?apply(R,new TextSelection(R.state.doc.resolve(E<0?X:X+J.nodeSize))):!1:!1}}else{if(G instanceof NodeSelection&&G.node.isInline)return apply(R,new TextSelection(E>0?G.$to:G.$from));{let Y=moveSelectionBlock(R.state,E);return Y?apply(R,Y):!1}}}function nodeLen(R){return R.nodeType==3?R.nodeValue.length:R.childNodes.length}function isIgnorable(R){let E=R.pmViewDesc;return E&&E.size==0&&(R.nextSibling||R.nodeName!="BR")}function skipIgnoredNodesLeft(R){let E=R.domSelectionRange(),U=E.focusNode,G=E.focusOffset;if(!U)return;let Y,J,Q=!1;for(gecko$2&&U.nodeType==1&&G<nodeLen(U)&&isIgnorable(U.childNodes[G])&&(Q=!0);;)if(G>0){if(U.nodeType!=1)break;{let X=U.childNodes[G-1];if(isIgnorable(X))Y=U,J=--G;else if(X.nodeType==3)U=X,G=U.nodeValue.length;else break}}else{if(isBlockNode(U))break;{let X=U.previousSibling;for(;X&&isIgnorable(X);)Y=U.parentNode,J=domIndex(X),X=X.previousSibling;if(X)U=X,G=nodeLen(U);else{if(U=U.parentNode,U==R.dom)break;G=0}}}Q?setSelFocus(R,U,G):Y&&setSelFocus(R,Y,J)}function skipIgnoredNodesRight(R){let E=R.domSelectionRange(),U=E.focusNode,G=E.focusOffset;if(!U)return;let Y=nodeLen(U),J,Q;for(;;)if(G<Y){if(U.nodeType!=1)break;let X=U.childNodes[G];if(isIgnorable(X))J=U,Q=++G;else break}else{if(isBlockNode(U))break;{let X=U.nextSibling;for(;X&&isIgnorable(X);)J=X.parentNode,Q=domIndex(X)+1,X=X.nextSibling;if(X)U=X,G=0,Y=nodeLen(U);else{if(U=U.parentNode,U==R.dom)break;G=Y=0}}}J&&setSelFocus(R,J,Q)}function isBlockNode(R){let E=R.pmViewDesc;return E&&E.node&&E.node.isBlock}function setSelFocus(R,E,U){let G=R.domSelection();if(selectionCollapsed(G)){let J=document.createRange();J.setEnd(E,U),J.setStart(E,U),G.removeAllRanges(),G.addRange(J)}else G.extend&&G.extend(E,U);R.domObserver.setCurSelection();let{state:Y}=R;setTimeout(()=>{R.state==Y&&selectionToDOM(R)},50)}function selectVertically(R,E,U){let G=R.state.selection;if(G instanceof TextSelection&&!G.empty||U.indexOf("s")>-1||mac$2&&U.indexOf("m")>-1)return!1;let{$from:Y,$to:J}=G;if(!Y.parent.inlineContent||R.endOfTextblock(E<0?"up":"down")){let Q=moveSelectionBlock(R.state,E);if(Q&&Q instanceof NodeSelection)return apply(R,Q)}if(!Y.parent.inlineContent){let Q=E<0?Y:J,X=G instanceof AllSelection?Selection.near(Q,E):Selection.findFrom(Q,E);return X?apply(R,X):!1}return!1}function stopNativeHorizontalDelete(R,E){if(!(R.state.selection instanceof TextSelection))return!0;let{$head:U,$anchor:G,empty:Y}=R.state.selection;if(!U.sameParent(G))return!0;if(!Y)return!1;if(R.endOfTextblock(E>0?"forward":"backward"))return!0;let J=!U.textOffset&&(E<0?U.nodeBefore:U.nodeAfter);if(J&&!J.isText){let Q=R.state.tr;return E<0?Q.delete(U.pos-J.nodeSize,U.pos):Q.delete(U.pos,U.pos+J.nodeSize),R.dispatch(Q),!0}return!1}function switchEditable(R,E,U){R.domObserver.stop(),E.contentEditable=U,R.domObserver.start()}function safariDownArrowBug(R){if(!safari$1||R.state.selection.$head.parentOffset>0)return!1;let{focusNode:E,focusOffset:U}=R.domSelectionRange();if(E&&E.nodeType==1&&U==0&&E.firstChild&&E.firstChild.contentEditable=="false"){let G=E.firstChild;switchEditable(R,G,"true"),setTimeout(()=>switchEditable(R,G,"false"),20)}return!1}function getMods(R){let E="";return R.ctrlKey&&(E+="c"),R.metaKey&&(E+="m"),R.altKey&&(E+="a"),R.shiftKey&&(E+="s"),E}function captureKeyDown(R,E){let U=E.keyCode,G=getMods(E);return U==8||mac$2&&U==72&&G=="c"?stopNativeHorizontalDelete(R,-1)||skipIgnoredNodesLeft(R):U==46||mac$2&&U==68&&G=="c"?stopNativeHorizontalDelete(R,1)||skipIgnoredNodesRight(R):U==13||U==27?!0:U==37||mac$2&&U==66&&G=="c"?selectHorizontally(R,-1,G)||skipIgnoredNodesLeft(R):U==39||mac$2&&U==70&&G=="c"?selectHorizontally(R,1,G)||skipIgnoredNodesRight(R):U==38||mac$2&&U==80&&G=="c"?selectVertically(R,-1,G)||skipIgnoredNodesLeft(R):U==40||mac$2&&U==78&&G=="c"?safariDownArrowBug(R)||selectVertically(R,1,G)||skipIgnoredNodesRight(R):G==(mac$2?"m":"c")&&(U==66||U==73||U==89||U==90)}function serializeForClipboard(R,E){R.someProp("transformCopied",ce=>{E=ce(E,R)});let U=[],{content:G,openStart:Y,openEnd:J}=E;for(;Y>1&&J>1&&G.childCount==1&&G.firstChild.childCount==1;){Y--,J--;let ce=G.firstChild;U.push(ce.type.name,ce.attrs!=ce.type.defaultAttrs?ce.attrs:null),G=ce.content}let Q=R.someProp("clipboardSerializer")||DOMSerializer.fromSchema(R.state.schema),X=detachedDoc(),Z=X.createElement("div");Z.appendChild(Q.serializeFragment(G,{document:X}));let ee=Z.firstChild,te,ne=0;for(;ee&&ee.nodeType==1&&(te=wrapMap[ee.nodeName.toLowerCase()]);){for(let ce=te.length-1;ce>=0;ce--){let pe=X.createElement(te[ce]);for(;Z.firstChild;)pe.appendChild(Z.firstChild);Z.appendChild(pe),ne++}ee=Z.firstChild}ee&&ee.nodeType==1&&ee.setAttribute("data-pm-slice",`${Y} ${J}${ne?` -${ne}`:""} ${JSON.stringify(U)}`);let oe=R.someProp("clipboardTextSerializer",ce=>ce(E,R))||E.content.textBetween(0,E.content.size,`

`);return{dom:Z,text:oe}}function parseFromClipboard(R,E,U,G,Y){let J=Y.parent.type.spec.code,Q,X;if(!U&&!E)return null;let Z=E&&(G||J||!U);if(Z){if(R.someProp("transformPastedText",oe=>{E=oe(E,J||G,R)}),J)return E?new Slice(Fragment.from(R.state.schema.text(E.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let ne=R.someProp("clipboardTextParser",oe=>oe(E,Y,G,R));if(ne)X=ne;else{let oe=Y.marks(),{schema:ce}=R.state,pe=DOMSerializer.fromSchema(ce);Q=document.createElement("div"),E.split(/(?:\r\n?|\n)+/).forEach(ye=>{let Se=Q.appendChild(document.createElement("p"));ye&&Se.appendChild(pe.serializeNode(ce.text(ye,oe)))})}}else R.someProp("transformPastedHTML",ne=>{U=ne(U,R)}),Q=readHTML(U),webkit&&restoreReplacedSpaces(Q);let ee=Q&&Q.querySelector("[data-pm-slice]"),te=ee&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(ee.getAttribute("data-pm-slice")||"");if(te&&te[3])for(let ne=+te[3];ne>0;ne--){let oe=Q.firstChild;for(;oe&&oe.nodeType!=1;)oe=oe.nextSibling;if(!oe)break;Q=oe}if(X||(X=(R.someProp("clipboardParser")||R.someProp("domParser")||DOMParser.fromSchema(R.state.schema)).parseSlice(Q,{preserveWhitespace:!!(Z||te),context:Y,ruleFromNode(oe){return oe.nodeName=="BR"&&!oe.nextSibling&&oe.parentNode&&!inlineParents.test(oe.parentNode.nodeName)?{ignore:!0}:null}})),te)X=addContext(closeSlice(X,+te[1],+te[2]),te[4]);else if(X=Slice.maxOpen(normalizeSiblings(X.content,Y),!0),X.openStart||X.openEnd){let ne=0,oe=0;for(let ce=X.content.firstChild;ne<X.openStart&&!ce.type.spec.isolating;ne++,ce=ce.firstChild);for(let ce=X.content.lastChild;oe<X.openEnd&&!ce.type.spec.isolating;oe++,ce=ce.lastChild);X=closeSlice(X,ne,oe)}return R.someProp("transformPasted",ne=>{X=ne(X,R)}),X}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(R,E){if(R.childCount<2)return R;for(let U=E.depth;U>=0;U--){let Y=E.node(U).contentMatchAt(E.index(U)),J,Q=[];if(R.forEach(X=>{if(!Q)return;let Z=Y.findWrapping(X.type),ee;if(!Z)return Q=null;if(ee=Q.length&&J.length&&addToSibling(Z,J,X,Q[Q.length-1],0))Q[Q.length-1]=ee;else{Q.length&&(Q[Q.length-1]=closeRight(Q[Q.length-1],J.length));let te=withWrappers(X,Z);Q.push(te),Y=Y.matchType(te.type),J=Z}}),Q)return Fragment.from(Q)}return R}function withWrappers(R,E,U=0){for(let G=E.length-1;G>=U;G--)R=E[G].create(null,Fragment.from(R));return R}function addToSibling(R,E,U,G,Y){if(Y<R.length&&Y<E.length&&R[Y]==E[Y]){let J=addToSibling(R,E,U,G.lastChild,Y+1);if(J)return G.copy(G.content.replaceChild(G.childCount-1,J));if(G.contentMatchAt(G.childCount).matchType(Y==R.length-1?U.type:R[Y+1]))return G.copy(G.content.append(Fragment.from(withWrappers(U,R,Y+1))))}}function closeRight(R,E){if(E==0)return R;let U=R.content.replaceChild(R.childCount-1,closeRight(R.lastChild,E-1)),G=R.contentMatchAt(R.childCount).fillBefore(Fragment.empty,!0);return R.copy(U.append(G))}function closeRange(R,E,U,G,Y,J){let Q=E<0?R.firstChild:R.lastChild,X=Q.content;return Y<G-1&&(X=closeRange(X,E,U,G,Y+1,J)),Y>=U&&(X=E<0?Q.contentMatchAt(0).fillBefore(X,R.childCount>1||J<=Y).append(X):X.append(Q.contentMatchAt(Q.childCount).fillBefore(Fragment.empty,!0))),R.replaceChild(E<0?0:R.childCount-1,Q.copy(X))}function closeSlice(R,E,U){return E<R.openStart&&(R=new Slice(closeRange(R.content,-1,E,R.openStart,0,R.openEnd),E,R.openEnd)),U<R.openEnd&&(R=new Slice(closeRange(R.content,1,U,R.openEnd,0,0),R.openStart,U)),R}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function readHTML(R){let E=/^(\s*<meta [^>]*>)*/.exec(R);E&&(R=R.slice(E[0].length));let U=detachedDoc().createElement("div"),G=/<([a-z][^>\s]+)/i.exec(R),Y;if((Y=G&&wrapMap[G[1].toLowerCase()])&&(R=Y.map(J=>"<"+J+">").join("")+R+Y.map(J=>"</"+J+">").reverse().join("")),U.innerHTML=R,Y)for(let J=0;J<Y.length;J++)U=U.querySelector(Y[J])||U;return U}function restoreReplacedSpaces(R){let E=R.querySelectorAll(chrome$2?"span:not([class]):not([style])":"span.Apple-converted-space");for(let U=0;U<E.length;U++){let G=E[U];G.childNodes.length==1&&G.textContent=="\xA0"&&G.parentNode&&G.parentNode.replaceChild(R.ownerDocument.createTextNode(" "),G)}}function addContext(R,E){if(!R.size)return R;let U=R.content.firstChild.type.schema,G;try{G=JSON.parse(E)}catch{return R}let{content:Y,openStart:J,openEnd:Q}=R;for(let X=G.length-2;X>=0;X-=2){let Z=U.nodes[G[X]];if(!Z||Z.hasRequiredAttrs())break;Y=Fragment.from(Z.create(G[X+1],Y)),J++,Q++}return new Slice(Y,J,Q)}const handlers$1={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(R){for(let E in handlers$1){let U=handlers$1[E];R.dom.addEventListener(E,R.input.eventHandlers[E]=G=>{eventBelongsToView(R,G)&&!runCustomHandler(R,G)&&(R.editable||!(G.type in editHandlers))&&U(R,G)},passiveHandlers[E]?{passive:!0}:void 0)}safari$1&&R.dom.addEventListener("input",()=>null),ensureListeners(R)}function setSelectionOrigin(R,E){R.input.lastSelectionOrigin=E,R.input.lastSelectionTime=Date.now()}function destroyInput(R){R.domObserver.stop();for(let E in R.input.eventHandlers)R.dom.removeEventListener(E,R.input.eventHandlers[E]);clearTimeout(R.input.composingTimeout),clearTimeout(R.input.lastIOSEnterFallbackTimeout)}function ensureListeners(R){R.someProp("handleDOMEvents",E=>{for(let U in E)R.input.eventHandlers[U]||R.dom.addEventListener(U,R.input.eventHandlers[U]=G=>runCustomHandler(R,G))})}function runCustomHandler(R,E){return R.someProp("handleDOMEvents",U=>{let G=U[E.type];return G?G(R,E)||E.defaultPrevented:!1})}function eventBelongsToView(R,E){if(!E.bubbles)return!0;if(E.defaultPrevented)return!1;for(let U=E.target;U!=R.dom;U=U.parentNode)if(!U||U.nodeType==11||U.pmViewDesc&&U.pmViewDesc.stopEvent(E))return!1;return!0}function dispatchEvent$1(R,E){!runCustomHandler(R,E)&&handlers$1[E.type]&&(R.editable||!(E.type in editHandlers))&&handlers$1[E.type](R,E)}editHandlers.keydown=(R,E)=>{let U=E;if(R.input.shiftKey=U.keyCode==16||U.shiftKey,!inOrNearComposition(R,U)&&(R.input.lastKeyCode=U.keyCode,R.input.lastKeyCodeTime=Date.now(),!(android&&chrome$2&&U.keyCode==13)))if(U.keyCode!=229&&R.domObserver.forceFlush(),ios&&U.keyCode==13&&!U.ctrlKey&&!U.altKey&&!U.metaKey){let G=Date.now();R.input.lastIOSEnter=G,R.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{R.input.lastIOSEnter==G&&(R.someProp("handleKeyDown",Y=>Y(R,keyEvent(13,"Enter"))),R.input.lastIOSEnter=0)},200)}else R.someProp("handleKeyDown",G=>G(R,U))||captureKeyDown(R,U)?U.preventDefault():setSelectionOrigin(R,"key")};editHandlers.keyup=(R,E)=>{E.keyCode==16&&(R.input.shiftKey=!1)};editHandlers.keypress=(R,E)=>{let U=E;if(inOrNearComposition(R,U)||!U.charCode||U.ctrlKey&&!U.altKey||mac$2&&U.metaKey)return;if(R.someProp("handleKeyPress",Y=>Y(R,U))){U.preventDefault();return}let G=R.state.selection;if(!(G instanceof TextSelection)||!G.$from.sameParent(G.$to)){let Y=String.fromCharCode(U.charCode);!/[\r\n]/.test(Y)&&!R.someProp("handleTextInput",J=>J(R,G.$from.pos,G.$to.pos,Y))&&R.dispatch(R.state.tr.insertText(Y).scrollIntoView()),U.preventDefault()}};function eventCoords(R){return{left:R.clientX,top:R.clientY}}function isNear(R,E){let U=E.x-R.clientX,G=E.y-R.clientY;return U*U+G*G<100}function runHandlerOnContext(R,E,U,G,Y){if(G==-1)return!1;let J=R.state.doc.resolve(G);for(let Q=J.depth+1;Q>0;Q--)if(R.someProp(E,X=>Q>J.depth?X(R,U,J.nodeAfter,J.before(Q),Y,!0):X(R,U,J.node(Q),J.before(Q),Y,!1)))return!0;return!1}function updateSelection(R,E,U){R.focused||R.focus();let G=R.state.tr.setSelection(E);U=="pointer"&&G.setMeta("pointer",!0),R.dispatch(G)}function selectClickedLeaf(R,E){if(E==-1)return!1;let U=R.state.doc.resolve(E),G=U.nodeAfter;return G&&G.isAtom&&NodeSelection.isSelectable(G)?(updateSelection(R,new NodeSelection(U),"pointer"),!0):!1}function selectClickedNode(R,E){if(E==-1)return!1;let U=R.state.selection,G,Y;U instanceof NodeSelection&&(G=U.node);let J=R.state.doc.resolve(E);for(let Q=J.depth+1;Q>0;Q--){let X=Q>J.depth?J.nodeAfter:J.node(Q);if(NodeSelection.isSelectable(X)){G&&U.$from.depth>0&&Q>=U.$from.depth&&J.before(U.$from.depth+1)==U.$from.pos?Y=J.before(U.$from.depth):Y=J.before(Q);break}}return Y!=null?(updateSelection(R,NodeSelection.create(R.state.doc,Y),"pointer"),!0):!1}function handleSingleClick(R,E,U,G,Y){return runHandlerOnContext(R,"handleClickOn",E,U,G)||R.someProp("handleClick",J=>J(R,E,G))||(Y?selectClickedNode(R,U):selectClickedLeaf(R,U))}function handleDoubleClick(R,E,U,G){return runHandlerOnContext(R,"handleDoubleClickOn",E,U,G)||R.someProp("handleDoubleClick",Y=>Y(R,E,G))}function handleTripleClick(R,E,U,G){return runHandlerOnContext(R,"handleTripleClickOn",E,U,G)||R.someProp("handleTripleClick",Y=>Y(R,E,G))||defaultTripleClick(R,U,G)}function defaultTripleClick(R,E,U){if(U.button!=0)return!1;let G=R.state.doc;if(E==-1)return G.inlineContent?(updateSelection(R,TextSelection.create(G,0,G.content.size),"pointer"),!0):!1;let Y=G.resolve(E);for(let J=Y.depth+1;J>0;J--){let Q=J>Y.depth?Y.nodeAfter:Y.node(J),X=Y.before(J);if(Q.inlineContent)updateSelection(R,TextSelection.create(G,X+1,X+1+Q.content.size),"pointer");else if(NodeSelection.isSelectable(Q))updateSelection(R,NodeSelection.create(G,X),"pointer");else continue;return!0}}function forceDOMFlush(R){return endComposition(R)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers$1.mousedown=(R,E)=>{let U=E;R.input.shiftKey=U.shiftKey;let G=forceDOMFlush(R),Y=Date.now(),J="singleClick";Y-R.input.lastClick.time<500&&isNear(U,R.input.lastClick)&&!U[selectNodeModifier]&&(R.input.lastClick.type=="singleClick"?J="doubleClick":R.input.lastClick.type=="doubleClick"&&(J="tripleClick")),R.input.lastClick={time:Y,x:U.clientX,y:U.clientY,type:J};let Q=R.posAtCoords(eventCoords(U));!Q||(J=="singleClick"?(R.input.mouseDown&&R.input.mouseDown.done(),R.input.mouseDown=new MouseDown(R,Q,U,!!G)):(J=="doubleClick"?handleDoubleClick:handleTripleClick)(R,Q.pos,Q.inside,U)?U.preventDefault():setSelectionOrigin(R,"pointer"))};class MouseDown{constructor(E,U,G,Y){this.view=E,this.pos=U,this.event=G,this.flushed=Y,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=E.state.doc,this.selectNode=!!G[selectNodeModifier],this.allowDefault=G.shiftKey;let J,Q;if(U.inside>-1)J=E.state.doc.nodeAt(U.inside),Q=U.inside;else{let te=E.state.doc.resolve(U.pos);J=te.parent,Q=te.depth?te.before():0}const X=Y?null:G.target,Z=X?E.docView.nearestDesc(X,!0):null;this.target=Z?Z.dom:null;let{selection:ee}=E.state;(G.button==0&&J.type.spec.draggable&&J.type.spec.selectable!==!1||ee instanceof NodeSelection&&ee.from<=Q&&ee.to>Q)&&(this.mightDrag={node:J,pos:Q,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko$2&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),E.root.addEventListener("mouseup",this.up=this.up.bind(this)),E.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(E,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(E){if(this.done(),!this.view.dom.contains(E.target))return;let U=this.pos;this.view.state.doc!=this.startDoc&&(U=this.view.posAtCoords(eventCoords(E))),this.updateAllowDefault(E),this.allowDefault||!U?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,U.pos,U.inside,E,this.selectNode)?E.preventDefault():E.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$2&&!this.view.state.selection.visible&&Math.min(Math.abs(U.pos-this.view.state.selection.from),Math.abs(U.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(U.pos)),"pointer"),E.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(E){this.updateAllowDefault(E),setSelectionOrigin(this.view,"pointer"),E.buttons==0&&this.done()}updateAllowDefault(E){!this.allowDefault&&(Math.abs(this.event.x-E.clientX)>4||Math.abs(this.event.y-E.clientY)>4)&&(this.allowDefault=!0)}}handlers$1.touchstart=R=>{R.input.lastTouch=Date.now(),forceDOMFlush(R),setSelectionOrigin(R,"pointer")};handlers$1.touchmove=R=>{R.input.lastTouch=Date.now(),setSelectionOrigin(R,"pointer")};handlers$1.contextmenu=R=>forceDOMFlush(R);function inOrNearComposition(R,E){return R.composing?!0:safari$1&&Math.abs(E.timeStamp-R.input.compositionEndedAt)<500?(R.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=R=>{if(!R.composing){R.domObserver.flush();let{state:E}=R,U=E.selection.$from;if(E.selection.empty&&(E.storedMarks||!U.textOffset&&U.parentOffset&&U.nodeBefore.marks.some(G=>G.type.spec.inclusive===!1)))R.markCursor=R.state.storedMarks||U.marks(),endComposition(R,!0),R.markCursor=null;else if(endComposition(R),gecko$2&&E.selection.empty&&U.parentOffset&&!U.textOffset&&U.nodeBefore.marks.length){let G=R.domSelectionRange();for(let Y=G.focusNode,J=G.focusOffset;Y&&Y.nodeType==1&&J!=0;){let Q=J<0?Y.lastChild:Y.childNodes[J-1];if(!Q)break;if(Q.nodeType==3){R.domSelection().collapse(Q,Q.nodeValue.length);break}else Y=Q,J=-1}}R.input.composing=!0}scheduleComposeEnd(R,timeoutComposition)};editHandlers.compositionend=(R,E)=>{R.composing&&(R.input.composing=!1,R.input.compositionEndedAt=E.timeStamp,scheduleComposeEnd(R,20))};function scheduleComposeEnd(R,E){clearTimeout(R.input.composingTimeout),E>-1&&(R.input.composingTimeout=setTimeout(()=>endComposition(R),E))}function clearComposition(R){for(R.composing&&(R.input.composing=!1,R.input.compositionEndedAt=timestampFromCustomEvent());R.input.compositionNodes.length>0;)R.input.compositionNodes.pop().markParentsDirty()}function timestampFromCustomEvent(){let R=document.createEvent("Event");return R.initEvent("event",!0,!0),R.timeStamp}function endComposition(R,E=!1){if(!(android&&R.domObserver.flushingSoon>=0)){if(R.domObserver.forceFlush(),clearComposition(R),E||R.docView&&R.docView.dirty){let U=selectionFromDOM(R);return U&&!U.eq(R.state.selection)?R.dispatch(R.state.tr.setSelection(U)):R.updateState(R.state),!0}return!1}}function captureCopy(R,E){if(!R.dom.parentNode)return;let U=R.dom.parentNode.appendChild(document.createElement("div"));U.appendChild(E),U.style.cssText="position: fixed; left: -10000px; top: 10px";let G=getSelection(),Y=document.createRange();Y.selectNodeContents(E),R.dom.blur(),G.removeAllRanges(),G.addRange(Y),setTimeout(()=>{U.parentNode&&U.parentNode.removeChild(U),R.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers$1.copy=editHandlers.cut=(R,E)=>{let U=E,G=R.state.selection,Y=U.type=="cut";if(G.empty)return;let J=brokenClipboardAPI?null:U.clipboardData,Q=G.content(),{dom:X,text:Z}=serializeForClipboard(R,Q);J?(U.preventDefault(),J.clearData(),J.setData("text/html",X.innerHTML),J.setData("text/plain",Z)):captureCopy(R,X),Y&&R.dispatch(R.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(R){return R.openStart==0&&R.openEnd==0&&R.content.childCount==1?R.content.firstChild:null}function capturePaste(R,E){if(!R.dom.parentNode)return;let U=R.input.shiftKey||R.state.selection.$from.parent.type.spec.code,G=R.dom.parentNode.appendChild(document.createElement(U?"textarea":"div"));U||(G.contentEditable="true"),G.style.cssText="position: fixed; left: -10000px; top: 10px",G.focus(),setTimeout(()=>{R.focus(),G.parentNode&&G.parentNode.removeChild(G),U?doPaste(R,G.value,null,R.input.shiftKey,E):doPaste(R,G.textContent,G.innerHTML,R.input.shiftKey,E)},50)}function doPaste(R,E,U,G,Y){let J=parseFromClipboard(R,E,U,G,R.state.selection.$from);if(R.someProp("handlePaste",Z=>Z(R,Y,J||Slice.empty)))return!0;if(!J)return!1;let Q=sliceSingleNode(J),X=Q?R.state.tr.replaceSelectionWith(Q,R.input.shiftKey):R.state.tr.replaceSelection(J);return R.dispatch(X.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}editHandlers.paste=(R,E)=>{let U=E;if(R.composing&&!android)return;let G=brokenClipboardAPI?null:U.clipboardData;G&&doPaste(R,G.getData("text/plain"),G.getData("text/html"),R.input.shiftKey,U)?U.preventDefault():capturePaste(R,U)};class Dragging{constructor(E,U){this.slice=E,this.move=U}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers$1.dragstart=(R,E)=>{let U=E,G=R.input.mouseDown;if(G&&G.done(),!U.dataTransfer)return;let Y=R.state.selection,J=Y.empty?null:R.posAtCoords(eventCoords(U));if(!(J&&J.pos>=Y.from&&J.pos<=(Y instanceof NodeSelection?Y.to-1:Y.to))){if(G&&G.mightDrag)R.dispatch(R.state.tr.setSelection(NodeSelection.create(R.state.doc,G.mightDrag.pos)));else if(U.target&&U.target.nodeType==1){let ee=R.docView.nearestDesc(U.target,!0);ee&&ee.node.type.spec.draggable&&ee!=R.docView&&R.dispatch(R.state.tr.setSelection(NodeSelection.create(R.state.doc,ee.posBefore)))}}let Q=R.state.selection.content(),{dom:X,text:Z}=serializeForClipboard(R,Q);U.dataTransfer.clearData(),U.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",X.innerHTML),U.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||U.dataTransfer.setData("text/plain",Z),R.dragging=new Dragging(Q,!U[dragCopyModifier])};handlers$1.dragend=R=>{let E=R.dragging;window.setTimeout(()=>{R.dragging==E&&(R.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(R,E)=>E.preventDefault();editHandlers.drop=(R,E)=>{let U=E,G=R.dragging;if(R.dragging=null,!U.dataTransfer)return;let Y=R.posAtCoords(eventCoords(U));if(!Y)return;let J=R.state.doc.resolve(Y.pos),Q=G&&G.slice;Q?R.someProp("transformPasted",pe=>{Q=pe(Q,R)}):Q=parseFromClipboard(R,U.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:U.dataTransfer.getData("text/html"),!1,J);let X=!!(G&&!U[dragCopyModifier]);if(R.someProp("handleDrop",pe=>pe(R,U,Q||Slice.empty,X))){U.preventDefault();return}if(!Q)return;U.preventDefault();let Z=Q?dropPoint(R.state.doc,J.pos,Q):J.pos;Z==null&&(Z=J.pos);let ee=R.state.tr;X&&ee.deleteSelection();let te=ee.mapping.map(Z),ne=Q.openStart==0&&Q.openEnd==0&&Q.content.childCount==1,oe=ee.doc;if(ne?ee.replaceRangeWith(te,te,Q.content.firstChild):ee.replaceRange(te,te,Q),ee.doc.eq(oe))return;let ce=ee.doc.resolve(te);if(ne&&NodeSelection.isSelectable(Q.content.firstChild)&&ce.nodeAfter&&ce.nodeAfter.sameMarkup(Q.content.firstChild))ee.setSelection(new NodeSelection(ce));else{let pe=ee.mapping.map(Z);ee.mapping.maps[ee.mapping.maps.length-1].forEach((ye,Se,ge,_e)=>pe=_e),ee.setSelection(selectionBetween(R,ce,ee.doc.resolve(pe)))}R.focus(),R.dispatch(ee.setMeta("uiEvent","drop"))};handlers$1.focus=R=>{R.input.lastFocus=Date.now(),R.focused||(R.domObserver.stop(),R.dom.classList.add("ProseMirror-focused"),R.domObserver.start(),R.focused=!0,setTimeout(()=>{R.docView&&R.hasFocus()&&!R.domObserver.currentSelection.eq(R.domSelectionRange())&&selectionToDOM(R)},20))};handlers$1.blur=(R,E)=>{let U=E;R.focused&&(R.domObserver.stop(),R.dom.classList.remove("ProseMirror-focused"),R.domObserver.start(),U.relatedTarget&&R.dom.contains(U.relatedTarget)&&R.domObserver.currentSelection.clear(),R.focused=!1)};handlers$1.beforeinput=(R,E)=>{if(chrome$2&&android&&E.inputType=="deleteContentBackward"){R.domObserver.flushSoon();let{domChangeCount:G}=R.input;setTimeout(()=>{if(R.input.domChangeCount!=G||(R.dom.blur(),R.focus(),R.someProp("handleKeyDown",J=>J(R,keyEvent(8,"Backspace")))))return;let{$cursor:Y}=R.state.selection;Y&&Y.pos>0&&R.dispatch(R.state.tr.delete(Y.pos-1,Y.pos).scrollIntoView())},50)}};for(let R in editHandlers)handlers$1[R]=editHandlers[R];function compareObjs(R,E){if(R==E)return!0;for(let U in R)if(R[U]!==E[U])return!1;for(let U in E)if(!(U in R))return!1;return!0}class WidgetType{constructor(E,U){this.toDOM=E,this.spec=U||noSpec,this.side=this.spec.side||0}map(E,U,G,Y){let{pos:J,deleted:Q}=E.mapResult(U.from+Y,this.side<0?-1:1);return Q?null:new Decoration(J-G,J-G,this)}valid(){return!0}eq(E){return this==E||E instanceof WidgetType&&(this.spec.key&&this.spec.key==E.spec.key||this.toDOM==E.toDOM&&compareObjs(this.spec,E.spec))}destroy(E){this.spec.destroy&&this.spec.destroy(E)}}class InlineType{constructor(E,U){this.attrs=E,this.spec=U||noSpec}map(E,U,G,Y){let J=E.map(U.from+Y,this.spec.inclusiveStart?-1:1)-G,Q=E.map(U.to+Y,this.spec.inclusiveEnd?1:-1)-G;return J>=Q?null:new Decoration(J,Q,this)}valid(E,U){return U.from<U.to}eq(E){return this==E||E instanceof InlineType&&compareObjs(this.attrs,E.attrs)&&compareObjs(this.spec,E.spec)}static is(E){return E.type instanceof InlineType}destroy(){}}class NodeType{constructor(E,U){this.attrs=E,this.spec=U||noSpec}map(E,U,G,Y){let J=E.mapResult(U.from+Y,1);if(J.deleted)return null;let Q=E.mapResult(U.to+Y,-1);return Q.deleted||Q.pos<=J.pos?null:new Decoration(J.pos-G,Q.pos-G,this)}valid(E,U){let{index:G,offset:Y}=E.content.findIndex(U.from),J;return Y==U.from&&!(J=E.child(G)).isText&&Y+J.nodeSize==U.to}eq(E){return this==E||E instanceof NodeType&&compareObjs(this.attrs,E.attrs)&&compareObjs(this.spec,E.spec)}destroy(){}}class Decoration{constructor(E,U,G){this.from=E,this.to=U,this.type=G}copy(E,U){return new Decoration(E,U,this.type)}eq(E,U=0){return this.type.eq(E.type)&&this.from+U==E.from&&this.to+U==E.to}map(E,U,G){return this.type.map(E,this,U,G)}static widget(E,U,G){return new Decoration(E,E,new WidgetType(U,G))}static inline(E,U,G,Y){return new Decoration(E,U,new InlineType(G,Y))}static node(E,U,G,Y){return new Decoration(E,U,new NodeType(G,Y))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}}const none=[],noSpec={};class DecorationSet{constructor(E,U){this.local=E.length?E:none,this.children=U.length?U:none}static create(E,U){return U.length?buildTree(U,E,0,noSpec):empty}find(E,U,G){let Y=[];return this.findInner(E==null?0:E,U==null?1e9:U,Y,0,G),Y}findInner(E,U,G,Y,J){for(let Q=0;Q<this.local.length;Q++){let X=this.local[Q];X.from<=U&&X.to>=E&&(!J||J(X.spec))&&G.push(X.copy(X.from+Y,X.to+Y))}for(let Q=0;Q<this.children.length;Q+=3)if(this.children[Q]<U&&this.children[Q+1]>E){let X=this.children[Q]+1;this.children[Q+2].findInner(E-X,U-X,G,Y+X,J)}}map(E,U,G){return this==empty||E.maps.length==0?this:this.mapInner(E,U,0,0,G||noSpec)}mapInner(E,U,G,Y,J){let Q;for(let X=0;X<this.local.length;X++){let Z=this.local[X].map(E,G,Y);Z&&Z.type.valid(U,Z)?(Q||(Q=[])).push(Z):J.onRemove&&J.onRemove(this.local[X].spec)}return this.children.length?mapChildren(this.children,Q||[],E,U,G,Y,J):Q?new DecorationSet(Q.sort(byPos),none):empty}add(E,U){return U.length?this==empty?DecorationSet.create(E,U):this.addInner(E,U,0):this}addInner(E,U,G){let Y,J=0;E.forEach((X,Z)=>{let ee=Z+G,te;if(!!(te=takeSpansForNode(U,X,ee))){for(Y||(Y=this.children.slice());J<Y.length&&Y[J]<Z;)J+=3;Y[J]==Z?Y[J+2]=Y[J+2].addInner(X,te,ee+1):Y.splice(J,0,Z,Z+X.nodeSize,buildTree(te,X,ee+1,noSpec)),J+=3}});let Q=moveSpans(J?withoutNulls(U):U,-G);for(let X=0;X<Q.length;X++)Q[X].type.valid(E,Q[X])||Q.splice(X--,1);return new DecorationSet(Q.length?this.local.concat(Q).sort(byPos):this.local,Y||this.children)}remove(E){return E.length==0||this==empty?this:this.removeInner(E,0)}removeInner(E,U){let G=this.children,Y=this.local;for(let J=0;J<G.length;J+=3){let Q,X=G[J]+U,Z=G[J+1]+U;for(let te=0,ne;te<E.length;te++)(ne=E[te])&&ne.from>X&&ne.to<Z&&(E[te]=null,(Q||(Q=[])).push(ne));if(!Q)continue;G==this.children&&(G=this.children.slice());let ee=G[J+2].removeInner(Q,X+1);ee!=empty?G[J+2]=ee:(G.splice(J,3),J-=3)}if(Y.length){for(let J=0,Q;J<E.length;J++)if(Q=E[J])for(let X=0;X<Y.length;X++)Y[X].eq(Q,U)&&(Y==this.local&&(Y=this.local.slice()),Y.splice(X--,1))}return G==this.children&&Y==this.local?this:Y.length||G.length?new DecorationSet(Y,G):empty}forChild(E,U){if(this==empty)return this;if(U.isLeaf)return DecorationSet.empty;let G,Y;for(let X=0;X<this.children.length;X+=3)if(this.children[X]>=E){this.children[X]==E&&(G=this.children[X+2]);break}let J=E+1,Q=J+U.content.size;for(let X=0;X<this.local.length;X++){let Z=this.local[X];if(Z.from<Q&&Z.to>J&&Z.type instanceof InlineType){let ee=Math.max(J,Z.from)-J,te=Math.min(Q,Z.to)-J;ee<te&&(Y||(Y=[])).push(Z.copy(ee,te))}}if(Y){let X=new DecorationSet(Y.sort(byPos),none);return G?new DecorationGroup([X,G]):X}return G||empty}eq(E){if(this==E)return!0;if(!(E instanceof DecorationSet)||this.local.length!=E.local.length||this.children.length!=E.children.length)return!1;for(let U=0;U<this.local.length;U++)if(!this.local[U].eq(E.local[U]))return!1;for(let U=0;U<this.children.length;U+=3)if(this.children[U]!=E.children[U]||this.children[U+1]!=E.children[U+1]||!this.children[U+2].eq(E.children[U+2]))return!1;return!0}locals(E){return removeOverlap(this.localsInner(E))}localsInner(E){if(this==empty)return none;if(E.inlineContent||!this.local.some(InlineType.is))return this.local;let U=[];for(let G=0;G<this.local.length;G++)this.local[G].type instanceof InlineType||U.push(this.local[G]);return U}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(E){this.members=E}map(E,U){const G=this.members.map(Y=>Y.map(E,U,noSpec));return DecorationGroup.from(G)}forChild(E,U){if(U.isLeaf)return DecorationSet.empty;let G=[];for(let Y=0;Y<this.members.length;Y++){let J=this.members[Y].forChild(E,U);J!=empty&&(J instanceof DecorationGroup?G=G.concat(J.members):G.push(J))}return DecorationGroup.from(G)}eq(E){if(!(E instanceof DecorationGroup)||E.members.length!=this.members.length)return!1;for(let U=0;U<this.members.length;U++)if(!this.members[U].eq(E.members[U]))return!1;return!0}locals(E){let U,G=!0;for(let Y=0;Y<this.members.length;Y++){let J=this.members[Y].localsInner(E);if(!!J.length)if(!U)U=J;else{G&&(U=U.slice(),G=!1);for(let Q=0;Q<J.length;Q++)U.push(J[Q])}}return U?removeOverlap(G?U:U.sort(byPos)):none}static from(E){switch(E.length){case 0:return empty;case 1:return E[0];default:return new DecorationGroup(E.every(U=>U instanceof DecorationSet)?E:E.reduce((U,G)=>U.concat(G instanceof DecorationSet?G:G.members),[]))}}}function mapChildren(R,E,U,G,Y,J,Q){let X=R.slice();for(let ee=0,te=J;ee<U.maps.length;ee++){let ne=0;U.maps[ee].forEach((oe,ce,pe,ye)=>{let Se=ye-pe-(ce-oe);for(let ge=0;ge<X.length;ge+=3){let _e=X[ge+1];if(_e<0||oe>_e+te-ne)continue;let Te=X[ge]+te-ne;ce>=Te?X[ge+1]=oe<=Te?-2:-1:pe>=Y&&Se&&(X[ge]+=Se,X[ge+1]+=Se)}ne+=Se}),te=U.maps[ee].map(te,-1)}let Z=!1;for(let ee=0;ee<X.length;ee+=3)if(X[ee+1]<0){if(X[ee+1]==-2){Z=!0,X[ee+1]=-1;continue}let te=U.map(R[ee]+J),ne=te-Y;if(ne<0||ne>=G.content.size){Z=!0;continue}let oe=U.map(R[ee+1]+J,-1),ce=oe-Y,{index:pe,offset:ye}=G.content.findIndex(ne),Se=G.maybeChild(pe);if(Se&&ye==ne&&ye+Se.nodeSize==ce){let ge=X[ee+2].mapInner(U,Se,te+1,R[ee]+J+1,Q);ge!=empty?(X[ee]=ne,X[ee+1]=ce,X[ee+2]=ge):(X[ee+1]=-2,Z=!0)}else Z=!0}if(Z){let ee=mapAndGatherRemainingDecorations(X,R,E,U,Y,J,Q),te=buildTree(ee,G,0,Q);E=te.local;for(let ne=0;ne<X.length;ne+=3)X[ne+1]<0&&(X.splice(ne,3),ne-=3);for(let ne=0,oe=0;ne<te.children.length;ne+=3){let ce=te.children[ne];for(;oe<X.length&&X[oe]<ce;)oe+=3;X.splice(oe,0,te.children[ne],te.children[ne+1],te.children[ne+2])}}return new DecorationSet(E.sort(byPos),X)}function moveSpans(R,E){if(!E||!R.length)return R;let U=[];for(let G=0;G<R.length;G++){let Y=R[G];U.push(new Decoration(Y.from+E,Y.to+E,Y.type))}return U}function mapAndGatherRemainingDecorations(R,E,U,G,Y,J,Q){function X(Z,ee){for(let te=0;te<Z.local.length;te++){let ne=Z.local[te].map(G,Y,ee);ne?U.push(ne):Q.onRemove&&Q.onRemove(Z.local[te].spec)}for(let te=0;te<Z.children.length;te+=3)X(Z.children[te+2],Z.children[te]+ee+1)}for(let Z=0;Z<R.length;Z+=3)R[Z+1]==-1&&X(R[Z+2],E[Z]+J+1);return U}function takeSpansForNode(R,E,U){if(E.isLeaf)return null;let G=U+E.nodeSize,Y=null;for(let J=0,Q;J<R.length;J++)(Q=R[J])&&Q.from>U&&Q.to<G&&((Y||(Y=[])).push(Q),R[J]=null);return Y}function withoutNulls(R){let E=[];for(let U=0;U<R.length;U++)R[U]!=null&&E.push(R[U]);return E}function buildTree(R,E,U,G){let Y=[],J=!1;E.forEach((X,Z)=>{let ee=takeSpansForNode(R,X,Z+U);if(ee){J=!0;let te=buildTree(ee,X,U+Z+1,G);te!=empty&&Y.push(Z,Z+X.nodeSize,te)}});let Q=moveSpans(J?withoutNulls(R):R,-U).sort(byPos);for(let X=0;X<Q.length;X++)Q[X].type.valid(E,Q[X])||(G.onRemove&&G.onRemove(Q[X].spec),Q.splice(X--,1));return Q.length||Y.length?new DecorationSet(Q,Y):empty}function byPos(R,E){return R.from-E.from||R.to-E.to}function removeOverlap(R){let E=R;for(let U=0;U<E.length-1;U++){let G=E[U];if(G.from!=G.to)for(let Y=U+1;Y<E.length;Y++){let J=E[Y];if(J.from==G.from){J.to!=G.to&&(E==R&&(E=R.slice()),E[Y]=J.copy(J.from,G.to),insertAhead(E,Y+1,J.copy(G.to,J.to)));continue}else{J.from<G.to&&(E==R&&(E=R.slice()),E[U]=G.copy(G.from,J.from),insertAhead(E,Y,G.copy(J.from,G.to)));break}}}return E}function insertAhead(R,E,U){for(;E<R.length&&byPos(U,R[E])>0;)E++;R.splice(E,0,U)}function viewDecorations(R){let E=[];return R.someProp("decorations",U=>{let G=U(R.state);G&&G!=empty&&E.push(G)}),R.cursorWrapper&&E.push(DecorationSet.create(R.state.doc,[R.cursorWrapper.deco])),DecorationGroup.from(E)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(E){this.anchorNode=E.anchorNode,this.anchorOffset=E.anchorOffset,this.focusNode=E.focusNode,this.focusOffset=E.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(E){return E.anchorNode==this.anchorNode&&E.anchorOffset==this.anchorOffset&&E.focusNode==this.focusNode&&E.focusOffset==this.focusOffset}}class DOMObserver{constructor(E,U){this.view=E,this.handleDOMChange=U,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(G=>{for(let Y=0;Y<G.length;Y++)this.queue.push(G[Y]);ie$1&&ie_version<=11&&G.some(Y=>Y.type=="childList"&&Y.removedNodes.length||Y.type=="characterData"&&Y.oldValue.length>Y.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=G=>{this.queue.push({target:G.target,type:"characterData",oldValue:G.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let E=this.observer.takeRecords();if(E.length){for(let U=0;U<E.length;U++)this.queue.push(E[U]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let E=this.view.domSelectionRange();if(E.focusNode&&isEquivalentPosition(E.focusNode,E.focusOffset,E.anchorNode,E.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(E){if(!E.focusNode)return!0;let U=new Set,G;for(let J=E.focusNode;J;J=parentNode(J))U.add(J);for(let J=E.anchorNode;J;J=parentNode(J))if(U.has(J)){G=J;break}let Y=G&&this.view.docView.nearestDesc(G);if(Y&&Y.ignoreMutation({type:"selection",target:G.nodeType==3?G.parentNode:G}))return this.setCurSelection(),!0}flush(){let{view:E}=this;if(!E.docView||this.flushingSoon>-1)return;let U=this.observer?this.observer.takeRecords():[];this.queue.length&&(U=this.queue.concat(U),this.queue.length=0);let G=E.domSelectionRange(),Y=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(G)&&hasFocusAndSelection(E)&&!this.ignoreSelectionChange(G),J=-1,Q=-1,X=!1,Z=[];if(E.editable)for(let te=0;te<U.length;te++){let ne=this.registerMutation(U[te],Z);ne&&(J=J<0?ne.from:Math.min(ne.from,J),Q=Q<0?ne.to:Math.max(ne.to,Q),ne.typeOver&&(X=!0))}if(gecko$2&&Z.length>1){let te=Z.filter(ne=>ne.nodeName=="BR");if(te.length==2){let ne=te[0],oe=te[1];ne.parentNode&&ne.parentNode.parentNode==oe.parentNode?oe.remove():ne.remove()}}let ee=null;J<0&&Y&&E.input.lastFocus>Date.now()-200&&Math.max(E.input.lastTouch,E.input.lastClick.time)<Date.now()-300&&selectionCollapsed(G)&&(ee=selectionFromDOM(E))&&ee.eq(Selection.near(E.state.doc.resolve(0),1))?(E.input.lastFocus=0,selectionToDOM(E),this.currentSelection.set(G),E.scrollToSelection()):(J>-1||Y)&&(J>-1&&(E.docView.markDirty(J,Q),checkCSS(E)),this.handleDOMChange(J,Q,X,Z),E.docView&&E.docView.dirty?E.updateState(E.state):this.currentSelection.eq(G)||selectionToDOM(E),this.currentSelection.set(G))}registerMutation(E,U){if(U.indexOf(E.target)>-1)return null;let G=this.view.docView.nearestDesc(E.target);if(E.type=="attributes"&&(G==this.view.docView||E.attributeName=="contenteditable"||E.attributeName=="style"&&!E.oldValue&&!E.target.getAttribute("style"))||!G||G.ignoreMutation(E))return null;if(E.type=="childList"){for(let te=0;te<E.addedNodes.length;te++)U.push(E.addedNodes[te]);if(G.contentDOM&&G.contentDOM!=G.dom&&!G.contentDOM.contains(E.target))return{from:G.posBefore,to:G.posAfter};let Y=E.previousSibling,J=E.nextSibling;if(ie$1&&ie_version<=11&&E.addedNodes.length)for(let te=0;te<E.addedNodes.length;te++){let{previousSibling:ne,nextSibling:oe}=E.addedNodes[te];(!ne||Array.prototype.indexOf.call(E.addedNodes,ne)<0)&&(Y=ne),(!oe||Array.prototype.indexOf.call(E.addedNodes,oe)<0)&&(J=oe)}let Q=Y&&Y.parentNode==E.target?domIndex(Y)+1:0,X=G.localPosFromDOM(E.target,Q,-1),Z=J&&J.parentNode==E.target?domIndex(J):E.target.childNodes.length,ee=G.localPosFromDOM(E.target,Z,1);return{from:X,to:ee}}else return E.type=="attributes"?{from:G.posAtStart-G.border,to:G.posAtEnd+G.border}:{from:G.posAtStart,to:G.posAtEnd,typeOver:E.target.nodeValue==E.oldValue}}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(R){if(!cssChecked.has(R)&&(cssChecked.set(R,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(R.dom).whiteSpace)!==-1)){if(R.requiresGeckoHackNode=gecko$2,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function safariShadowSelectionRange(R){let E;function U(Z){Z.preventDefault(),Z.stopImmediatePropagation(),E=Z.getTargetRanges()[0]}R.dom.addEventListener("beforeinput",U,!0),document.execCommand("indent"),R.dom.removeEventListener("beforeinput",U,!0);let G=E.startContainer,Y=E.startOffset,J=E.endContainer,Q=E.endOffset,X=R.domAtPos(R.state.selection.anchor);return isEquivalentPosition(X.node,X.offset,J,Q)&&([G,Y,J,Q]=[J,Q,G,Y]),{anchorNode:G,anchorOffset:Y,focusNode:J,focusOffset:Q}}function parseBetween(R,E,U){let{node:G,fromOffset:Y,toOffset:J,from:Q,to:X}=R.docView.parseRange(E,U),Z=R.domSelectionRange(),ee,te=Z.anchorNode;if(te&&R.dom.contains(te.nodeType==1?te:te.parentNode)&&(ee=[{node:te,offset:Z.anchorOffset}],selectionCollapsed(Z)||ee.push({node:Z.focusNode,offset:Z.focusOffset})),chrome$2&&R.input.lastKeyCode===8)for(let Se=J;Se>Y;Se--){let ge=G.childNodes[Se-1],_e=ge.pmViewDesc;if(ge.nodeName=="BR"&&!_e){J=Se;break}if(!_e||_e.size)break}let ne=R.state.doc,oe=R.someProp("domParser")||DOMParser.fromSchema(R.state.schema),ce=ne.resolve(Q),pe=null,ye=oe.parse(G,{topNode:ce.parent,topMatch:ce.parent.contentMatchAt(ce.index()),topOpen:!0,from:Y,to:J,preserveWhitespace:ce.parent.type.whitespace=="pre"?"full":!0,findPositions:ee,ruleFromNode,context:ce});if(ee&&ee[0].pos!=null){let Se=ee[0].pos,ge=ee[1]&&ee[1].pos;ge==null&&(ge=Se),pe={anchor:Se+Q,head:ge+Q}}return{doc:ye,sel:pe,from:Q,to:X}}function ruleFromNode(R){let E=R.pmViewDesc;if(E)return E.parseRule();if(R.nodeName=="BR"&&R.parentNode){if(safari$1&&/^(ul|ol)$/i.test(R.parentNode.nodeName)){let U=document.createElement("div");return U.appendChild(document.createElement("li")),{skip:U}}else if(R.parentNode.lastChild==R||safari$1&&/^(tr|table)$/i.test(R.parentNode.nodeName))return{ignore:!0}}else if(R.nodeName=="IMG"&&R.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(R,E,U,G,Y){if(E<0){let Oe=R.input.lastSelectionTime>Date.now()-50?R.input.lastSelectionOrigin:null,Pe=selectionFromDOM(R,Oe);if(Pe&&!R.state.selection.eq(Pe)){if(chrome$2&&android&&R.input.lastKeyCode===13&&Date.now()-100<R.input.lastKeyCodeTime&&R.someProp("handleKeyDown",Me=>Me(R,keyEvent(13,"Enter"))))return;let Le=R.state.tr.setSelection(Pe);Oe=="pointer"?Le.setMeta("pointer",!0):Oe=="key"&&Le.scrollIntoView(),R.dispatch(Le)}return}let J=R.state.doc.resolve(E),Q=J.sharedDepth(U);E=J.before(Q+1),U=R.state.doc.resolve(U).after(Q+1);let X=R.state.selection,Z=parseBetween(R,E,U),ee=R.state.doc,te=ee.slice(Z.from,Z.to),ne,oe;R.input.lastKeyCode===8&&Date.now()-100<R.input.lastKeyCodeTime?(ne=R.state.selection.to,oe="end"):(ne=R.state.selection.from,oe="start"),R.input.lastKeyCode=null;let ce=findDiff(te.content,Z.doc.content,Z.from,ne,oe);if((ios&&R.input.lastIOSEnter>Date.now()-225||android)&&Y.some(Oe=>Oe.nodeType==1&&!isInline.test(Oe.nodeName))&&(!ce||ce.endA>=ce.endB)&&R.someProp("handleKeyDown",Oe=>Oe(R,keyEvent(13,"Enter")))){R.input.lastIOSEnter=0;return}if(!ce)if(G&&X instanceof TextSelection&&!X.empty&&X.$head.sameParent(X.$anchor)&&!R.composing&&!(Z.sel&&Z.sel.anchor!=Z.sel.head))ce={start:X.from,endA:X.to,endB:X.to};else{if(Z.sel){let Oe=resolveSelection(R,R.state.doc,Z.sel);Oe&&!Oe.eq(R.state.selection)&&R.dispatch(R.state.tr.setSelection(Oe))}return}if(chrome$2&&R.cursorWrapper&&Z.sel&&Z.sel.anchor==R.cursorWrapper.deco.from&&Z.sel.head==Z.sel.anchor){let Oe=ce.endB-ce.start;Z.sel={anchor:Z.sel.anchor+Oe,head:Z.sel.anchor+Oe}}R.input.domChangeCount++,R.state.selection.from<R.state.selection.to&&ce.start==ce.endB&&R.state.selection instanceof TextSelection&&(ce.start>R.state.selection.from&&ce.start<=R.state.selection.from+2&&R.state.selection.from>=Z.from?ce.start=R.state.selection.from:ce.endA<R.state.selection.to&&ce.endA>=R.state.selection.to-2&&R.state.selection.to<=Z.to&&(ce.endB+=R.state.selection.to-ce.endA,ce.endA=R.state.selection.to)),ie$1&&ie_version<=11&&ce.endB==ce.start+1&&ce.endA==ce.start&&ce.start>Z.from&&Z.doc.textBetween(ce.start-Z.from-1,ce.start-Z.from+1)==" \xA0"&&(ce.start--,ce.endA--,ce.endB--);let pe=Z.doc.resolveNoCache(ce.start-Z.from),ye=Z.doc.resolveNoCache(ce.endB-Z.from),Se=ee.resolve(ce.start),ge=pe.sameParent(ye)&&pe.parent.inlineContent&&Se.end()>=ce.endA,_e;if((ios&&R.input.lastIOSEnter>Date.now()-225&&(!ge||Y.some(Oe=>Oe.nodeName=="DIV"||Oe.nodeName=="P"))||!ge&&pe.pos<Z.doc.content.size&&(_e=Selection.findFrom(Z.doc.resolve(pe.pos+1),1,!0))&&_e.head==ye.pos)&&R.someProp("handleKeyDown",Oe=>Oe(R,keyEvent(13,"Enter")))){R.input.lastIOSEnter=0;return}if(R.state.selection.anchor>ce.start&&looksLikeJoin(ee,ce.start,ce.endA,pe,ye)&&R.someProp("handleKeyDown",Oe=>Oe(R,keyEvent(8,"Backspace")))){android&&chrome$2&&R.domObserver.suppressSelectionUpdates();return}chrome$2&&android&&ce.endB==ce.start&&(R.input.lastAndroidDelete=Date.now()),android&&!ge&&pe.start()!=ye.start()&&ye.parentOffset==0&&pe.depth==ye.depth&&Z.sel&&Z.sel.anchor==Z.sel.head&&Z.sel.head==ce.endA&&(ce.endB-=2,ye=Z.doc.resolveNoCache(ce.endB-Z.from),setTimeout(()=>{R.someProp("handleKeyDown",function(Oe){return Oe(R,keyEvent(13,"Enter"))})},20));let Te=ce.start,Ee=ce.endA,Re,Ae,Ie;if(ge){if(pe.pos==ye.pos)ie$1&&ie_version<=11&&pe.parentOffset==0&&(R.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(R),20)),Re=R.state.tr.delete(Te,Ee),Ae=ee.resolve(ce.start).marksAcross(ee.resolve(ce.endA));else if(ce.endA==ce.endB&&(Ie=isMarkChange(pe.parent.content.cut(pe.parentOffset,ye.parentOffset),Se.parent.content.cut(Se.parentOffset,ce.endA-Se.start()))))Re=R.state.tr,Ie.type=="add"?Re.addMark(Te,Ee,Ie.mark):Re.removeMark(Te,Ee,Ie.mark);else if(pe.parent.child(pe.index()).isText&&pe.index()==ye.index()-(ye.textOffset?0:1)){let Oe=pe.parent.textBetween(pe.parentOffset,ye.parentOffset);if(R.someProp("handleTextInput",Pe=>Pe(R,Te,Ee,Oe)))return;Re=R.state.tr.insertText(Oe,Te,Ee)}}if(Re||(Re=R.state.tr.replace(Te,Ee,Z.doc.slice(ce.start-Z.from,ce.endB-Z.from))),Z.sel){let Oe=resolveSelection(R,Re.doc,Z.sel);Oe&&!(chrome$2&&android&&R.composing&&Oe.empty&&(ce.start!=ce.endB||R.input.lastAndroidDelete<Date.now()-100)&&(Oe.head==Te||Oe.head==Re.mapping.map(Ee)-1)||ie$1&&Oe.empty&&Oe.head==Te)&&Re.setSelection(Oe)}Ae&&Re.ensureMarks(Ae),R.dispatch(Re.scrollIntoView())}function resolveSelection(R,E,U){return Math.max(U.anchor,U.head)>E.content.size?null:selectionBetween(R,E.resolve(U.anchor),E.resolve(U.head))}function isMarkChange(R,E){let U=R.firstChild.marks,G=E.firstChild.marks,Y=U,J=G,Q,X,Z;for(let te=0;te<G.length;te++)Y=G[te].removeFromSet(Y);for(let te=0;te<U.length;te++)J=U[te].removeFromSet(J);if(Y.length==1&&J.length==0)X=Y[0],Q="add",Z=te=>te.mark(X.addToSet(te.marks));else if(Y.length==0&&J.length==1)X=J[0],Q="remove",Z=te=>te.mark(X.removeFromSet(te.marks));else return null;let ee=[];for(let te=0;te<E.childCount;te++)ee.push(Z(E.child(te)));if(Fragment.from(ee).eq(R))return{mark:X,type:Q}}function looksLikeJoin(R,E,U,G,Y){if(!G.parent.isTextblock||U-E<=Y.pos-G.pos||skipClosingAndOpening(G,!0,!1)<Y.pos)return!1;let J=R.resolve(E);if(J.parentOffset<J.parent.content.size||!J.parent.isTextblock)return!1;let Q=R.resolve(skipClosingAndOpening(J,!0,!0));return!Q.parent.isTextblock||Q.pos>U||skipClosingAndOpening(Q,!0,!1)<U?!1:G.parent.content.cut(G.parentOffset).eq(Q.parent.content)}function skipClosingAndOpening(R,E,U){let G=R.depth,Y=E?R.end():R.pos;for(;G>0&&(E||R.indexAfter(G)==R.node(G).childCount);)G--,Y++,E=!1;if(U){let J=R.node(G).maybeChild(R.indexAfter(G));for(;J&&!J.isLeaf;)J=J.firstChild,Y++}return Y}function findDiff(R,E,U,G,Y){let J=R.findDiffStart(E,U);if(J==null)return null;let{a:Q,b:X}=R.findDiffEnd(E,U+R.size,U+E.size);if(Y=="end"){let Z=Math.max(0,J-Math.min(Q,X));G-=Q+Z-J}return Q<J&&R.size<E.size?(J-=G<=J&&G>=Q?J-G:0,X=J+(X-Q),Q=J):X<J&&(J-=G<=J&&G>=X?J-G:0,Q=J+(Q-X),X=J),{start:J,endA:Q,endB:X}}class EditorView{constructor(E,U){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=U,this.state=U.state,this.directPlugins=U.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=E&&E.mount||document.createElement("div"),E&&(E.appendChild?E.appendChild(this.dom):typeof E=="function"?E(this.dom):E.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(G,Y,J,Q)=>readDOMChange(this,G,Y,J,Q)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let E=this._props;this._props={};for(let U in E)this._props[U]=E[U];this._props.state=this.state}return this._props}update(E){E.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let U=this._props;this._props=E,E.plugins&&(E.plugins.forEach(checkStateComponent),this.directPlugins=E.plugins),this.updateStateInner(E.state,U)}setProps(E){let U={};for(let G in this._props)U[G]=this._props[G];U.state=this.state;for(let G in E)U[G]=E[G];this.update(U)}updateState(E){this.updateStateInner(E,this._props)}updateStateInner(E,U){let G=this.state,Y=!1,J=!1;E.storedMarks&&this.composing&&(clearComposition(this),J=!0),this.state=E;let Q=G.plugins!=E.plugins||this._props.plugins!=U.plugins;if(Q||this._props.plugins!=U.plugins||this._props.nodeViews!=U.nodeViews){let oe=buildNodeViews(this);changedNodeViews(oe,this.nodeViews)&&(this.nodeViews=oe,Y=!0)}(Q||U.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let X=viewDecorations(this),Z=computeDocDeco(this),ee=G.plugins!=E.plugins&&!G.doc.eq(E.doc)?"reset":E.scrollToSelection>G.scrollToSelection?"to selection":"preserve",te=Y||!this.docView.matchesNode(E.doc,Z,X);(te||!E.selection.eq(G.selection))&&(J=!0);let ne=ee=="preserve"&&J&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(J){this.domObserver.stop();let oe=te&&(ie$1||chrome$2)&&!this.composing&&!G.selection.empty&&!E.selection.empty&&selectionContextChanged(G.selection,E.selection);if(te){let ce=chrome$2?this.trackWrites=this.domSelectionRange().focusNode:null;(Y||!this.docView.update(E.doc,Z,X,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(E.doc,Z,X,this.dom,this)),ce&&!this.trackWrites&&(oe=!0)}oe||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,oe):(syncNodeSelection(this,E.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(G),ee=="reset"?this.dom.scrollTop=0:ee=="to selection"?this.scrollToSelection():ne&&resetScrollPos(ne)}scrollToSelection(){let E=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",U=>U(this)))if(this.state.selection instanceof NodeSelection){let U=this.docView.domAfterPos(this.state.selection.from);U.nodeType==1&&scrollRectIntoView(this,U.getBoundingClientRect(),E)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),E)}destroyPluginViews(){let E;for(;E=this.pluginViews.pop();)E.destroy&&E.destroy()}updatePluginViews(E){if(!E||E.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let U=0;U<this.directPlugins.length;U++){let G=this.directPlugins[U];G.spec.view&&this.pluginViews.push(G.spec.view(this))}for(let U=0;U<this.state.plugins.length;U++){let G=this.state.plugins[U];G.spec.view&&this.pluginViews.push(G.spec.view(this))}}else for(let U=0;U<this.pluginViews.length;U++){let G=this.pluginViews[U];G.update&&G.update(this,E)}}someProp(E,U){let G=this._props&&this._props[E],Y;if(G!=null&&(Y=U?U(G):G))return Y;for(let Q=0;Q<this.directPlugins.length;Q++){let X=this.directPlugins[Q].props[E];if(X!=null&&(Y=U?U(X):X))return Y}let J=this.state.plugins;if(J)for(let Q=0;Q<J.length;Q++){let X=J[Q].props[E];if(X!=null&&(Y=U?U(X):X))return Y}}hasFocus(){if(ie$1){let E=this.root.activeElement;if(E==this.dom)return!0;if(!E||!this.dom.contains(E))return!1;for(;E&&this.dom!=E&&this.dom.contains(E);){if(E.contentEditable=="false")return!1;E=E.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let E=this._root;if(E==null){for(let U=this.dom.parentNode;U;U=U.parentNode)if(U.nodeType==9||U.nodeType==11&&U.host)return U.getSelection||(Object.getPrototypeOf(U).getSelection=()=>U.ownerDocument.getSelection()),this._root=U}return E||document}posAtCoords(E){return posAtCoords(this,E)}coordsAtPos(E,U=1){return coordsAtPos(this,E,U)}domAtPos(E,U=0){return this.docView.domFromPos(E,U)}nodeDOM(E){let U=this.docView.descAt(E);return U?U.nodeDOM:null}posAtDOM(E,U,G=-1){let Y=this.docView.posFromDOM(E,U,G);if(Y==null)throw new RangeError("DOM position not inside the editor");return Y}endOfTextblock(E,U){return endOfTextblock(this,U||this.state,E)}pasteHTML(E,U){return doPaste(this,"",E,!1,U||new ClipboardEvent("paste"))}pasteText(E,U){return doPaste(this,E,null,!0,U||new ClipboardEvent("paste"))}destroy(){!this.docView||(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(E){return dispatchEvent$1(this,E)}dispatch(E){let U=this._props.dispatchTransaction;U?U.call(this,E):this.updateState(this.state.apply(E))}domSelectionRange(){return safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom?safariShadowSelectionRange(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function computeDocDeco(R){let E=Object.create(null);return E.class="ProseMirror",E.contenteditable=String(R.editable),E.translate="no",R.someProp("attributes",U=>{if(typeof U=="function"&&(U=U(R.state)),U)for(let G in U)G=="class"&&(E.class+=" "+U[G]),G=="style"?E.style=(E.style?E.style+";":"")+U[G]:!E[G]&&G!="contenteditable"&&G!="nodeName"&&(E[G]=String(U[G]))}),[Decoration.node(0,R.state.doc.content.size,E)]}function updateCursorWrapper(R){if(R.markCursor){let E=document.createElement("img");E.className="ProseMirror-separator",E.setAttribute("mark-placeholder","true"),E.setAttribute("alt",""),R.cursorWrapper={dom:E,deco:Decoration.widget(R.state.selection.head,E,{raw:!0,marks:R.markCursor})}}else R.cursorWrapper=null}function getEditable(R){return!R.someProp("editable",E=>E(R.state)===!1)}function selectionContextChanged(R,E){let U=Math.min(R.$anchor.sharedDepth(R.head),E.$anchor.sharedDepth(E.head));return R.$anchor.start(U)!=E.$anchor.start(U)}function buildNodeViews(R){let E=Object.create(null);function U(G){for(let Y in G)Object.prototype.hasOwnProperty.call(E,Y)||(E[Y]=G[Y])}return R.someProp("nodeViews",U),R.someProp("markViews",U),E}function changedNodeViews(R,E){let U=0,G=0;for(let Y in R){if(R[Y]!=E[Y])return!0;U++}for(let Y in E)G++;return U!=G}function checkStateComponent(R){if(R.spec.state||R.spec.filterTransaction||R.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base$1={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),safari=typeof navigator<"u"&&/Apple Computer/.test(navigator.vendor),gecko$1=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=chrome$1&&(mac$1||+chrome$1[1]<57)||gecko$1&&mac$1;for(var i=0;i<10;i++)base$1[48+i]=base$1[96+i]=String(i);for(var i=1;i<=24;i++)base$1[i+111]="F"+i;for(var i=65;i<=90;i++)base$1[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code$8 in base$1)shift.hasOwnProperty(code$8)||(shift[code$8]=base$1[code$8]);function keyName(R){var E=brokenModifierNames&&(R.ctrlKey||R.altKey||R.metaKey)||(safari||ie)&&R.shiftKey&&R.key&&R.key.length==1,U=!E&&R.key||(R.shiftKey?shift:base$1)[R.keyCode]||R.key||"Unidentified";return U=="Esc"&&(U="Escape"),U=="Del"&&(U="Delete"),U=="Left"&&(U="ArrowLeft"),U=="Up"&&(U="ArrowUp"),U=="Right"&&(U="ArrowRight"),U=="Down"&&(U="ArrowDown"),U}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(R){let E=R.split(/-(?!$)/),U=E[E.length-1];U=="Space"&&(U=" ");let G,Y,J,Q;for(let X=0;X<E.length-1;X++){let Z=E[X];if(/^(cmd|meta|m)$/i.test(Z))Q=!0;else if(/^a(lt)?$/i.test(Z))G=!0;else if(/^(c|ctrl|control)$/i.test(Z))Y=!0;else if(/^s(hift)?$/i.test(Z))J=!0;else if(/^mod$/i.test(Z))mac?Q=!0:Y=!0;else throw new Error("Unrecognized modifier name: "+Z)}return G&&(U="Alt-"+U),Y&&(U="Ctrl-"+U),Q&&(U="Meta-"+U),J&&(U="Shift-"+U),U}function normalize$1(R){let E=Object.create(null);for(let U in R)E[normalizeKeyName$1(U)]=R[U];return E}function modifiers(R,E,U){return E.altKey&&(R="Alt-"+R),E.ctrlKey&&(R="Ctrl-"+R),E.metaKey&&(R="Meta-"+R),U!==!1&&E.shiftKey&&(R="Shift-"+R),R}function keymap(R){return new Plugin({props:{handleKeyDown:keydownHandler(R)}})}function keydownHandler(R){let E=normalize$1(R);return function(U,G){let Y=keyName(G),J=Y.length==1&&Y!=" ",Q,X=E[modifiers(Y,G,!J)];if(X&&X(U.state,U.dispatch,U))return!0;if(J&&(G.shiftKey||G.altKey||G.metaKey||Y.charCodeAt(0)>127)&&(Q=base$1[G.keyCode])&&Q!=Y){let Z=E[modifiers(Q,G,!0)];if(Z&&Z(U.state,U.dispatch,U))return!0}else if(J&&G.shiftKey){let Z=E[modifiers(Y,G,!0)];if(Z&&Z(U.state,U.dispatch,U))return!0}return!1}}const deleteSelection$1=(R,E)=>R.selection.empty?!1:(E&&E(R.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(R,E){let{$cursor:U}=R.selection;return!U||(E?!E.endOfTextblock("backward",R):U.parentOffset>0)?null:U}const joinBackward$1=(R,E,U)=>{let G=atBlockStart(R,U);if(!G)return!1;let Y=findCutBefore(G);if(!Y){let Q=G.blockRange(),X=Q&&liftTarget(Q);return X==null?!1:(E&&E(R.tr.lift(Q,X).scrollIntoView()),!0)}let J=Y.nodeBefore;if(!J.type.spec.isolating&&deleteBarrier(R,Y,E))return!0;if(G.parent.content.size==0&&(textblockAt(J,"end")||NodeSelection.isSelectable(J))){let Q=replaceStep(R.doc,G.before(),G.after(),Slice$1.empty);if(Q&&Q.slice.size<Q.to-Q.from){if(E){let X=R.tr.step(Q);X.setSelection(textblockAt(J,"end")?Selection.findFrom(X.doc.resolve(X.mapping.map(Y.pos,-1)),-1):NodeSelection.create(X.doc,Y.pos-J.nodeSize)),E(X.scrollIntoView())}return!0}}return J.isAtom&&Y.depth==G.depth-1?(E&&E(R.tr.delete(Y.pos-J.nodeSize,Y.pos).scrollIntoView()),!0):!1};function textblockAt(R,E,U=!1){for(let G=R;G;G=E=="start"?G.firstChild:G.lastChild){if(G.isTextblock)return!0;if(U&&G.childCount!=1)return!1}return!1}const selectNodeBackward$1=(R,E,U)=>{let{$head:G,empty:Y}=R.selection,J=G;if(!Y)return!1;if(G.parent.isTextblock){if(U?!U.endOfTextblock("backward",R):G.parentOffset>0)return!1;J=findCutBefore(G)}let Q=J&&J.nodeBefore;return!Q||!NodeSelection.isSelectable(Q)?!1:(E&&E(R.tr.setSelection(NodeSelection.create(R.doc,J.pos-Q.nodeSize)).scrollIntoView()),!0)};function findCutBefore(R){if(!R.parent.type.spec.isolating)for(let E=R.depth-1;E>=0;E--){if(R.index(E)>0)return R.doc.resolve(R.before(E+1));if(R.node(E).type.spec.isolating)break}return null}function atBlockEnd(R,E){let{$cursor:U}=R.selection;return!U||(E?!E.endOfTextblock("forward",R):U.parentOffset<U.parent.content.size)?null:U}const joinForward$1=(R,E,U)=>{let G=atBlockEnd(R,U);if(!G)return!1;let Y=findCutAfter(G);if(!Y)return!1;let J=Y.nodeAfter;if(deleteBarrier(R,Y,E))return!0;if(G.parent.content.size==0&&(textblockAt(J,"start")||NodeSelection.isSelectable(J))){let Q=replaceStep(R.doc,G.before(),G.after(),Slice$1.empty);if(Q&&Q.slice.size<Q.to-Q.from){if(E){let X=R.tr.step(Q);X.setSelection(textblockAt(J,"start")?Selection.findFrom(X.doc.resolve(X.mapping.map(Y.pos)),1):NodeSelection.create(X.doc,X.mapping.map(Y.pos))),E(X.scrollIntoView())}return!0}}return J.isAtom&&Y.depth==G.depth-1?(E&&E(R.tr.delete(Y.pos,Y.pos+J.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(R,E,U)=>{let{$head:G,empty:Y}=R.selection,J=G;if(!Y)return!1;if(G.parent.isTextblock){if(U?!U.endOfTextblock("forward",R):G.parentOffset<G.parent.content.size)return!1;J=findCutAfter(G)}let Q=J&&J.nodeAfter;return!Q||!NodeSelection.isSelectable(Q)?!1:(E&&E(R.tr.setSelection(NodeSelection.create(R.doc,J.pos)).scrollIntoView()),!0)};function findCutAfter(R){if(!R.parent.type.spec.isolating)for(let E=R.depth-1;E>=0;E--){let U=R.node(E);if(R.index(E)+1<U.childCount)return R.doc.resolve(R.after(E+1));if(U.type.spec.isolating)break}return null}const joinUp$1=(R,E)=>{let U=R.selection,G=U instanceof NodeSelection,Y;if(G){if(U.node.isTextblock||!canJoin(R.doc,U.from))return!1;Y=U.from}else if(Y=joinPoint(R.doc,U.from,-1),Y==null)return!1;if(E){let J=R.tr.join(Y);G&&J.setSelection(NodeSelection.create(J.doc,Y-R.doc.resolve(Y).nodeBefore.nodeSize)),E(J.scrollIntoView())}return!0},joinDown$1=(R,E)=>{let U=R.selection,G;if(U instanceof NodeSelection){if(U.node.isTextblock||!canJoin(R.doc,U.to))return!1;G=U.to}else if(G=joinPoint(R.doc,U.to,1),G==null)return!1;return E&&E(R.tr.join(G).scrollIntoView()),!0},lift$1=(R,E)=>{let{$from:U,$to:G}=R.selection,Y=U.blockRange(G),J=Y&&liftTarget(Y);return J==null?!1:(E&&E(R.tr.lift(Y,J).scrollIntoView()),!0)},newlineInCode$1=(R,E)=>{let{$head:U,$anchor:G}=R.selection;return!U.parent.type.spec.code||!U.sameParent(G)?!1:(E&&E(R.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(R){for(let E=0;E<R.edgeCount;E++){let{type:U}=R.edge(E);if(U.isTextblock&&!U.hasRequiredAttrs())return U}return null}const exitCode$1=(R,E)=>{let{$head:U,$anchor:G}=R.selection;if(!U.parent.type.spec.code||!U.sameParent(G))return!1;let Y=U.node(-1),J=U.indexAfter(-1),Q=defaultBlockAt$1(Y.contentMatchAt(J));if(!Q||!Y.canReplaceWith(J,J,Q))return!1;if(E){let X=U.after(),Z=R.tr.replaceWith(X,X,Q.createAndFill());Z.setSelection(Selection.near(Z.doc.resolve(X),1)),E(Z.scrollIntoView())}return!0},createParagraphNear$1=(R,E)=>{let U=R.selection,{$from:G,$to:Y}=U;if(U instanceof AllSelection||G.parent.inlineContent||Y.parent.inlineContent)return!1;let J=defaultBlockAt$1(Y.parent.contentMatchAt(Y.indexAfter()));if(!J||!J.isTextblock)return!1;if(E){let Q=(!G.parentOffset&&Y.index()<Y.parent.childCount?G:Y).pos,X=R.tr.insert(Q,J.createAndFill());X.setSelection(TextSelection.create(X.doc,Q+1)),E(X.scrollIntoView())}return!0},liftEmptyBlock$1=(R,E)=>{let{$cursor:U}=R.selection;if(!U||U.parent.content.size)return!1;if(U.depth>1&&U.after()!=U.end(-1)){let J=U.before();if(canSplit(R.doc,J))return E&&E(R.tr.split(J).scrollIntoView()),!0}let G=U.blockRange(),Y=G&&liftTarget(G);return Y==null?!1:(E&&E(R.tr.lift(G,Y).scrollIntoView()),!0)},selectParentNode$1=(R,E)=>{let{$from:U,to:G}=R.selection,Y,J=U.sharedDepth(G);return J==0?!1:(Y=U.before(J),E&&E(R.tr.setSelection(NodeSelection.create(R.doc,Y))),!0)};function joinMaybeClear(R,E,U){let G=E.nodeBefore,Y=E.nodeAfter,J=E.index();return!G||!Y||!G.type.compatibleContent(Y.type)?!1:!G.content.size&&E.parent.canReplace(J-1,J)?(U&&U(R.tr.delete(E.pos-G.nodeSize,E.pos).scrollIntoView()),!0):!E.parent.canReplace(J,J+1)||!(Y.isTextblock||canJoin(R.doc,E.pos))?!1:(U&&U(R.tr.clearIncompatible(E.pos,G.type,G.contentMatchAt(G.childCount)).join(E.pos).scrollIntoView()),!0)}function deleteBarrier(R,E,U){let G=E.nodeBefore,Y=E.nodeAfter,J,Q;if(G.type.spec.isolating||Y.type.spec.isolating)return!1;if(joinMaybeClear(R,E,U))return!0;let X=E.parent.canReplace(E.index(),E.index()+1);if(X&&(J=(Q=G.contentMatchAt(G.childCount)).findWrapping(Y.type))&&Q.matchType(J[0]||Y.type).validEnd){if(U){let ne=E.pos+Y.nodeSize,oe=Fragment$1.empty;for(let ye=J.length-1;ye>=0;ye--)oe=Fragment$1.from(J[ye].create(null,oe));oe=Fragment$1.from(G.copy(oe));let ce=R.tr.step(new ReplaceAroundStep(E.pos-1,ne,E.pos,ne,new Slice$1(oe,1,0),J.length,!0)),pe=ne+2*J.length;canJoin(ce.doc,pe)&&ce.join(pe),U(ce.scrollIntoView())}return!0}let Z=Selection.findFrom(E,1),ee=Z&&Z.$from.blockRange(Z.$to),te=ee&&liftTarget(ee);if(te!=null&&te>=E.depth)return U&&U(R.tr.lift(ee,te).scrollIntoView()),!0;if(X&&textblockAt(Y,"start",!0)&&textblockAt(G,"end")){let ne=G,oe=[];for(;oe.push(ne),!ne.isTextblock;)ne=ne.lastChild;let ce=Y,pe=1;for(;!ce.isTextblock;ce=ce.firstChild)pe++;if(ne.canReplace(ne.childCount,ne.childCount,ce.content)){if(U){let ye=Fragment$1.empty;for(let ge=oe.length-1;ge>=0;ge--)ye=Fragment$1.from(oe[ge].copy(ye));let Se=R.tr.step(new ReplaceAroundStep(E.pos-oe.length,E.pos+Y.nodeSize,E.pos+pe,E.pos+Y.nodeSize-pe,new Slice$1(ye,oe.length,0),0,!0));U(Se.scrollIntoView())}return!0}}return!1}function selectTextblockSide(R){return function(E,U){let G=E.selection,Y=R<0?G.$from:G.$to,J=Y.depth;for(;Y.node(J).isInline;){if(!J)return!1;J--}return Y.node(J).isTextblock?(U&&U(E.tr.setSelection(TextSelection.create(E.doc,R<0?Y.start(J):Y.end(J)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(R,E=null){return function(U,G){let{$from:Y,$to:J}=U.selection,Q=Y.blockRange(J),X=Q&&findWrapping(Q,R,E);return X?(G&&G(U.tr.wrap(Q,X).scrollIntoView()),!0):!1}}function setBlockType(R,E=null){return function(U,G){let Y=!1;for(let J=0;J<U.selection.ranges.length&&!Y;J++){let{$from:{pos:Q},$to:{pos:X}}=U.selection.ranges[J];U.doc.nodesBetween(Q,X,(Z,ee)=>{if(Y)return!1;if(!(!Z.isTextblock||Z.hasMarkup(R,E)))if(Z.type==R)Y=!0;else{let te=U.doc.resolve(ee),ne=te.index();Y=te.parent.canReplaceWith(ne,ne+1,R)}})}if(!Y)return!1;if(G){let J=U.tr;for(let Q=0;Q<U.selection.ranges.length;Q++){let{$from:{pos:X},$to:{pos:Z}}=U.selection.ranges[Q];J.setBlockType(X,Z,R,E)}G(J.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(R,E=null){return function(U,G){let{$from:Y,$to:J}=U.selection,Q=Y.blockRange(J),X=!1,Z=Q;if(!Q)return!1;if(Q.depth>=2&&Y.node(Q.depth-1).type.compatibleContent(R)&&Q.startIndex==0){if(Y.index(Q.depth-1)==0)return!1;let te=U.doc.resolve(Q.start-2);Z=new NodeRange(te,te,Q.depth),Q.endIndex<Q.parent.childCount&&(Q=new NodeRange(Y,U.doc.resolve(J.end(Q.depth)),Q.depth)),X=!0}let ee=findWrapping(Z,R,E,Q);return ee?(G&&G(doWrapInList(U.tr,Q,ee,X,R).scrollIntoView()),!0):!1}}function doWrapInList(R,E,U,G,Y){let J=Fragment$1.empty;for(let te=U.length-1;te>=0;te--)J=Fragment$1.from(U[te].type.create(U[te].attrs,J));R.step(new ReplaceAroundStep(E.start-(G?2:0),E.end,E.start,E.end,new Slice$1(J,0,0),U.length,!0));let Q=0;for(let te=0;te<U.length;te++)U[te].type==Y&&(Q=te+1);let X=U.length-Q,Z=E.start+U.length-(G?2:0),ee=E.parent;for(let te=E.startIndex,ne=E.endIndex,oe=!0;te<ne;te++,oe=!1)!oe&&canSplit(R.doc,Z,X)&&(R.split(Z,X),Z+=2*X),Z+=ee.child(te).nodeSize;return R}function liftListItem$1(R){return function(E,U){let{$from:G,$to:Y}=E.selection,J=G.blockRange(Y,Q=>Q.childCount>0&&Q.firstChild.type==R);return J?U?G.node(J.depth-1).type==R?liftToOuterList(E,U,R,J):liftOutOfList(E,U,J):!0:!1}}function liftToOuterList(R,E,U,G){let Y=R.tr,J=G.end,Q=G.$to.end(G.depth);J<Q&&(Y.step(new ReplaceAroundStep(J-1,Q,J,Q,new Slice$1(Fragment$1.from(U.create(null,G.parent.copy())),1,0),1,!0)),G=new NodeRange(Y.doc.resolve(G.$from.pos),Y.doc.resolve(Q),G.depth));const X=liftTarget(G);if(X==null)return!1;Y.lift(G,X);let Z=Y.mapping.map(J,-1)-1;return canJoin(Y.doc,Z)&&Y.join(Z),E(Y.scrollIntoView()),!0}function liftOutOfList(R,E,U){let G=R.tr,Y=U.parent;for(let ce=U.end,pe=U.endIndex-1,ye=U.startIndex;pe>ye;pe--)ce-=Y.child(pe).nodeSize,G.delete(ce-1,ce+1);let J=G.doc.resolve(U.start),Q=J.nodeAfter;if(G.mapping.map(U.end)!=U.start+J.nodeAfter.nodeSize)return!1;let X=U.startIndex==0,Z=U.endIndex==Y.childCount,ee=J.node(-1),te=J.index(-1);if(!ee.canReplace(te+(X?0:1),te+1,Q.content.append(Z?Fragment$1.empty:Fragment$1.from(Y))))return!1;let ne=J.pos,oe=ne+Q.nodeSize;return G.step(new ReplaceAroundStep(ne-(X?1:0),oe+(Z?1:0),ne+1,oe-1,new Slice$1((X?Fragment$1.empty:Fragment$1.from(Y.copy(Fragment$1.empty))).append(Z?Fragment$1.empty:Fragment$1.from(Y.copy(Fragment$1.empty))),X?0:1,Z?0:1),X?0:1)),E(G.scrollIntoView()),!0}function sinkListItem$1(R){return function(E,U){let{$from:G,$to:Y}=E.selection,J=G.blockRange(Y,ee=>ee.childCount>0&&ee.firstChild.type==R);if(!J)return!1;let Q=J.startIndex;if(Q==0)return!1;let X=J.parent,Z=X.child(Q-1);if(Z.type!=R)return!1;if(U){let ee=Z.lastChild&&Z.lastChild.type==X.type,te=Fragment$1.from(ee?R.create():null),ne=new Slice$1(Fragment$1.from(R.create(null,Fragment$1.from(X.type.create(null,te)))),ee?3:1,0),oe=J.start,ce=J.end;U(E.tr.step(new ReplaceAroundStep(oe-(ee?3:1),ce,oe,ce,ne,1,!0)).scrollIntoView())}return!0}}function createChainableState(R){const{state:E,transaction:U}=R;let{selection:G}=U,{doc:Y}=U,{storedMarks:J}=U;return{...E,apply:E.apply.bind(E),applyTransaction:E.applyTransaction.bind(E),filterTransaction:E.filterTransaction,plugins:E.plugins,schema:E.schema,reconfigure:E.reconfigure.bind(E),toJSON:E.toJSON.bind(E),get storedMarks(){return J},get selection(){return G},get doc(){return Y},get tr(){return G=U.selection,Y=U.doc,J=U.storedMarks,U}}}class CommandManager{constructor(E){this.editor=E.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=E.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:E,editor:U,state:G}=this,{view:Y}=U,{tr:J}=G,Q=this.buildProps(J);return Object.fromEntries(Object.entries(E).map(([X,Z])=>[X,(...te)=>{const ne=Z(...te)(Q);return!J.getMeta("preventDispatch")&&!this.hasCustomState&&Y.dispatch(J),ne}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(E,U=!0){const{rawCommands:G,editor:Y,state:J}=this,{view:Q}=Y,X=[],Z=!!E,ee=E||J.tr,te=()=>(!Z&&U&&!ee.getMeta("preventDispatch")&&!this.hasCustomState&&Q.dispatch(ee),X.every(oe=>oe===!0)),ne={...Object.fromEntries(Object.entries(G).map(([oe,ce])=>[oe,(...ye)=>{const Se=this.buildProps(ee,U),ge=ce(...ye)(Se);return X.push(ge),ne}])),run:te};return ne}createCan(E){const{rawCommands:U,state:G}=this,Y=!1,J=E||G.tr,Q=this.buildProps(J,Y);return{...Object.fromEntries(Object.entries(U).map(([Z,ee])=>[Z,(...te)=>ee(...te)({...Q,dispatch:void 0})])),chain:()=>this.createChain(J,Y)}}buildProps(E,U=!0){const{rawCommands:G,editor:Y,state:J}=this,{view:Q}=Y;J.storedMarks&&E.setStoredMarks(J.storedMarks);const X={tr:E,editor:Y,view:Q,state:createChainableState({state:J,transaction:E}),dispatch:U?()=>{}:void 0,chain:()=>this.createChain(E),can:()=>this.createCan(E),get commands(){return Object.fromEntries(Object.entries(G).map(([Z,ee])=>[Z,(...te)=>ee(...te)(X)]))}};return X}}class EventEmitter$1{constructor(){this.callbacks={}}on(E,U){return this.callbacks[E]||(this.callbacks[E]=[]),this.callbacks[E].push(U),this}emit(E,...U){const G=this.callbacks[E];return G&&G.forEach(Y=>Y.apply(this,U)),this}off(E,U){const G=this.callbacks[E];return G&&(U?this.callbacks[E]=G.filter(Y=>Y!==U):delete this.callbacks[E]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(R,E,U){return R.config[E]===void 0&&R.parent?getExtensionField(R.parent,E,U):typeof R.config[E]=="function"?R.config[E].bind({...U,parent:R.parent?getExtensionField(R.parent,E,U):null}):R.config[E]}function splitExtensions(R){const E=R.filter(Y=>Y.type==="extension"),U=R.filter(Y=>Y.type==="node"),G=R.filter(Y=>Y.type==="mark");return{baseExtensions:E,nodeExtensions:U,markExtensions:G}}function getAttributesFromExtensions(R){const E=[],{nodeExtensions:U,markExtensions:G}=splitExtensions(R),Y=[...U,...G],J={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return R.forEach(Q=>{const X={name:Q.name,options:Q.options,storage:Q.storage},Z=getExtensionField(Q,"addGlobalAttributes",X);if(!Z)return;Z().forEach(te=>{te.types.forEach(ne=>{Object.entries(te.attributes).forEach(([oe,ce])=>{E.push({type:ne,name:oe,attribute:{...J,...ce}})})})})}),Y.forEach(Q=>{const X={name:Q.name,options:Q.options,storage:Q.storage},Z=getExtensionField(Q,"addAttributes",X);if(!Z)return;const ee=Z();Object.entries(ee).forEach(([te,ne])=>{const oe={...J,...ne};typeof(oe==null?void 0:oe.default)=="function"&&(oe.default=oe.default()),(oe==null?void 0:oe.isRequired)&&(oe==null?void 0:oe.default)===void 0&&delete oe.default,E.push({type:Q.name,name:te,attribute:oe})})}),E}function getNodeType(R,E){if(typeof R=="string"){if(!E.nodes[R])throw Error(`There is no node type named '${R}'. Maybe you forgot to add the extension?`);return E.nodes[R]}return R}function mergeAttributes(...R){return R.filter(E=>!!E).reduce((E,U)=>{const G={...E};return Object.entries(U).forEach(([Y,J])=>{if(!G[Y]){G[Y]=J;return}Y==="class"?G[Y]=[G[Y],J].join(" "):Y==="style"?G[Y]=[G[Y],J].join("; "):G[Y]=J}),G},{})}function getRenderedAttributes(R,E){return E.filter(U=>U.attribute.rendered).map(U=>U.attribute.renderHTML?U.attribute.renderHTML(R.attrs)||{}:{[U.name]:R.attrs[U.name]}).reduce((U,G)=>mergeAttributes(U,G),{})}function isFunction(R){return typeof R=="function"}function callOrReturn(R,E=void 0,...U){return isFunction(R)?E?R.bind(E)(...U):R(...U):R}function isEmptyObject(R={}){return Object.keys(R).length===0&&R.constructor===Object}function fromString$4(R){return typeof R!="string"?R:R.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(R):R==="true"?!0:R==="false"?!1:R}function injectExtensionAttributesToParseRule(R,E){return R.style?R:{...R,getAttrs:U=>{const G=R.getAttrs?R.getAttrs(U):R.attrs;if(G===!1)return!1;const Y=E.reduce((J,Q)=>{const X=Q.attribute.parseHTML?Q.attribute.parseHTML(U):fromString$4(U.getAttribute(Q.name));return X==null?J:{...J,[Q.name]:X}},{});return{...G,...Y}}}}function cleanUpSchemaItem(R){return Object.fromEntries(Object.entries(R).filter(([E,U])=>E==="attrs"&&isEmptyObject(U)?!1:U!=null))}function getSchemaByResolvedExtensions(R,E){var U;const G=getAttributesFromExtensions(R),{nodeExtensions:Y,markExtensions:J}=splitExtensions(R),Q=(U=Y.find(ee=>getExtensionField(ee,"topNode")))===null||U===void 0?void 0:U.name,X=Object.fromEntries(Y.map(ee=>{const te=G.filter(ge=>ge.type===ee.name),ne={name:ee.name,options:ee.options,storage:ee.storage,editor:E},oe=R.reduce((ge,_e)=>{const Te=getExtensionField(_e,"extendNodeSchema",ne);return{...ge,...Te?Te(ee):{}}},{}),ce=cleanUpSchemaItem({...oe,content:callOrReturn(getExtensionField(ee,"content",ne)),marks:callOrReturn(getExtensionField(ee,"marks",ne)),group:callOrReturn(getExtensionField(ee,"group",ne)),inline:callOrReturn(getExtensionField(ee,"inline",ne)),atom:callOrReturn(getExtensionField(ee,"atom",ne)),selectable:callOrReturn(getExtensionField(ee,"selectable",ne)),draggable:callOrReturn(getExtensionField(ee,"draggable",ne)),code:callOrReturn(getExtensionField(ee,"code",ne)),defining:callOrReturn(getExtensionField(ee,"defining",ne)),isolating:callOrReturn(getExtensionField(ee,"isolating",ne)),attrs:Object.fromEntries(te.map(ge=>{var _e;return[ge.name,{default:(_e=ge==null?void 0:ge.attribute)===null||_e===void 0?void 0:_e.default}]}))}),pe=callOrReturn(getExtensionField(ee,"parseHTML",ne));pe&&(ce.parseDOM=pe.map(ge=>injectExtensionAttributesToParseRule(ge,te)));const ye=getExtensionField(ee,"renderHTML",ne);ye&&(ce.toDOM=ge=>ye({node:ge,HTMLAttributes:getRenderedAttributes(ge,te)}));const Se=getExtensionField(ee,"renderText",ne);return Se&&(ce.toText=Se),[ee.name,ce]})),Z=Object.fromEntries(J.map(ee=>{const te=G.filter(Se=>Se.type===ee.name),ne={name:ee.name,options:ee.options,storage:ee.storage,editor:E},oe=R.reduce((Se,ge)=>{const _e=getExtensionField(ge,"extendMarkSchema",ne);return{...Se,..._e?_e(ee):{}}},{}),ce=cleanUpSchemaItem({...oe,inclusive:callOrReturn(getExtensionField(ee,"inclusive",ne)),excludes:callOrReturn(getExtensionField(ee,"excludes",ne)),group:callOrReturn(getExtensionField(ee,"group",ne)),spanning:callOrReturn(getExtensionField(ee,"spanning",ne)),code:callOrReturn(getExtensionField(ee,"code",ne)),attrs:Object.fromEntries(te.map(Se=>{var ge;return[Se.name,{default:(ge=Se==null?void 0:Se.attribute)===null||ge===void 0?void 0:ge.default}]}))}),pe=callOrReturn(getExtensionField(ee,"parseHTML",ne));pe&&(ce.parseDOM=pe.map(Se=>injectExtensionAttributesToParseRule(Se,te)));const ye=getExtensionField(ee,"renderHTML",ne);return ye&&(ce.toDOM=Se=>ye({mark:Se,HTMLAttributes:getRenderedAttributes(Se,te)})),[ee.name,ce]}));return new Schema({topNode:Q,nodes:X,marks:Z})}function getSchemaTypeByName(R,E){return E.nodes[R]||E.marks[R]||null}function isExtensionRulesEnabled(R,E){return Array.isArray(E)?E.some(U=>(typeof U=="string"?U:U.name)===R.name):E}const getTextContentFromNodes=(R,E=500)=>{let U="";const G=R.parentOffset;return R.parent.nodesBetween(Math.max(0,G-E),G,(Y,J,Q,X)=>{var Z,ee;U+=(((ee=(Z=Y.type.spec).toText)===null||ee===void 0?void 0:ee.call(Z,{node:Y,pos:J,parent:Q,index:X}))||Y.textContent||"%leaf%").slice(0,Math.max(0,G-J))}),U};function isRegExp$1(R){return Object.prototype.toString.call(R)==="[object RegExp]"}class InputRule{constructor(E){this.find=E.find,this.handler=E.handler}}const inputRuleMatcherHandler=(R,E)=>{if(isRegExp$1(E))return E.exec(R);const U=E(R);if(!U)return null;const G=[U.text];return G.index=U.index,G.input=R,G.data=U.data,U.replaceWith&&(U.text.includes(U.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),G.push(U.replaceWith)),G};function run$1(R){var E;const{editor:U,from:G,to:Y,text:J,rules:Q,plugin:X}=R,{view:Z}=U;if(Z.composing)return!1;const ee=Z.state.doc.resolve(G);if(ee.parent.type.spec.code||!!(!((E=ee.nodeBefore||ee.nodeAfter)===null||E===void 0)&&E.marks.find(oe=>oe.type.spec.code)))return!1;let te=!1;const ne=getTextContentFromNodes(ee)+J;return Q.forEach(oe=>{if(te)return;const ce=inputRuleMatcherHandler(ne,oe.find);if(!ce)return;const pe=Z.state.tr,ye=createChainableState({state:Z.state,transaction:pe}),Se={from:G-(ce[0].length-J.length),to:Y},{commands:ge,chain:_e,can:Te}=new CommandManager({editor:U,state:ye});oe.handler({state:ye,range:Se,match:ce,commands:ge,chain:_e,can:Te})===null||!pe.steps.length||(pe.setMeta(X,{transform:pe,from:G,to:Y,text:J}),Z.dispatch(pe),te=!0)}),te}function inputRulesPlugin(R){const{editor:E,rules:U}=R,G=new Plugin({state:{init(){return null},apply(Y,J){const Q=Y.getMeta(G);return Q||(Y.selectionSet||Y.docChanged?null:J)}},props:{handleTextInput(Y,J,Q,X){return run$1({editor:E,from:J,to:Q,text:X,rules:U,plugin:G})},handleDOMEvents:{compositionend:Y=>(setTimeout(()=>{const{$cursor:J}=Y.state.selection;J&&run$1({editor:E,from:J.pos,to:J.pos,text:"",rules:U,plugin:G})}),!1)},handleKeyDown(Y,J){if(J.key!=="Enter")return!1;const{$cursor:Q}=Y.state.selection;return Q?run$1({editor:E,from:Q.pos,to:Q.pos,text:`
`,rules:U,plugin:G}):!1}},isInputRules:!0});return G}function isNumber(R){return typeof R=="number"}class PasteRule{constructor(E){this.find=E.find,this.handler=E.handler}}const pasteRuleMatcherHandler=(R,E)=>{if(isRegExp$1(E))return[...R.matchAll(E)];const U=E(R);return U?U.map(G=>{const Y=[G.text];return Y.index=G.index,Y.input=R,Y.data=G.data,G.replaceWith&&(G.text.includes(G.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),Y.push(G.replaceWith)),Y}):[]};function run(R){const{editor:E,state:U,from:G,to:Y,rule:J}=R,{commands:Q,chain:X,can:Z}=new CommandManager({editor:E,state:U}),ee=[];return U.doc.nodesBetween(G,Y,(ne,oe)=>{if(!ne.isTextblock||ne.type.spec.code)return;const ce=Math.max(G,oe),pe=Math.min(Y,oe+ne.content.size),ye=ne.textBetween(ce-oe,pe-oe,void 0,"\uFFFC");pasteRuleMatcherHandler(ye,J.find).forEach(ge=>{if(ge.index===void 0)return;const _e=ce+ge.index+1,Te=_e+ge[0].length,Ee={from:U.tr.mapping.map(_e),to:U.tr.mapping.map(Te)},Re=J.handler({state:U,range:Ee,match:ge,commands:Q,chain:X,can:Z});ee.push(Re)})}),ee.every(ne=>ne!==null)}function pasteRulesPlugin(R){const{editor:E,rules:U}=R;let G=null,Y=!1,J=!1;return U.map(X=>new Plugin({view(Z){const ee=te=>{var ne;G=!((ne=Z.dom.parentElement)===null||ne===void 0)&&ne.contains(te.target)?Z.dom.parentElement:null};return window.addEventListener("dragstart",ee),{destroy(){window.removeEventListener("dragstart",ee)}}},props:{handleDOMEvents:{drop:Z=>(J=G===Z.dom.parentElement,!1),paste:(Z,ee)=>{var te;const ne=(te=ee.clipboardData)===null||te===void 0?void 0:te.getData("text/html");return Y=!!(ne!=null&&ne.includes("data-pm-slice")),!1}}},appendTransaction:(Z,ee,te)=>{const ne=Z[0],oe=ne.getMeta("uiEvent")==="paste"&&!Y,ce=ne.getMeta("uiEvent")==="drop"&&!J;if(!oe&&!ce)return;const pe=ee.doc.content.findDiffStart(te.doc.content),ye=ee.doc.content.findDiffEnd(te.doc.content);if(!isNumber(pe)||!ye||pe===ye.b)return;const Se=te.tr,ge=createChainableState({state:te,transaction:Se});if(!(!run({editor:E,state:ge,from:Math.max(pe-1,0),to:ye.b-1,rule:X})||!Se.steps.length))return Se}}))}function findDuplicates(R){const E=R.filter((U,G)=>R.indexOf(U)!==G);return[...new Set(E)]}class ExtensionManager{constructor(E,U){this.splittableMarks=[],this.editor=U,this.extensions=ExtensionManager.resolve(E),this.schema=getSchemaByResolvedExtensions(this.extensions,U),this.extensions.forEach(G=>{var Y;this.editor.extensionStorage[G.name]=G.storage;const J={name:G.name,options:G.options,storage:G.storage,editor:this.editor,type:getSchemaTypeByName(G.name,this.schema)};G.type==="mark"&&((Y=callOrReturn(getExtensionField(G,"keepOnSplit",J)))!==null&&Y!==void 0?Y:!0)&&this.splittableMarks.push(G.name);const Q=getExtensionField(G,"onBeforeCreate",J);Q&&this.editor.on("beforeCreate",Q);const X=getExtensionField(G,"onCreate",J);X&&this.editor.on("create",X);const Z=getExtensionField(G,"onUpdate",J);Z&&this.editor.on("update",Z);const ee=getExtensionField(G,"onSelectionUpdate",J);ee&&this.editor.on("selectionUpdate",ee);const te=getExtensionField(G,"onTransaction",J);te&&this.editor.on("transaction",te);const ne=getExtensionField(G,"onFocus",J);ne&&this.editor.on("focus",ne);const oe=getExtensionField(G,"onBlur",J);oe&&this.editor.on("blur",oe);const ce=getExtensionField(G,"onDestroy",J);ce&&this.editor.on("destroy",ce)})}static resolve(E){const U=ExtensionManager.sort(ExtensionManager.flatten(E)),G=findDuplicates(U.map(Y=>Y.name));return G.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${G.map(Y=>`'${Y}'`).join(", ")}]. This can lead to issues.`),U}static flatten(E){return E.map(U=>{const G={name:U.name,options:U.options,storage:U.storage},Y=getExtensionField(U,"addExtensions",G);return Y?[U,...this.flatten(Y())]:U}).flat(10)}static sort(E){return E.sort((G,Y)=>{const J=getExtensionField(G,"priority")||100,Q=getExtensionField(Y,"priority")||100;return J>Q?-1:J<Q?1:0})}get commands(){return this.extensions.reduce((E,U)=>{const G={name:U.name,options:U.options,storage:U.storage,editor:this.editor,type:getSchemaTypeByName(U.name,this.schema)},Y=getExtensionField(U,"addCommands",G);return Y?{...E,...Y()}:E},{})}get plugins(){const{editor:E}=this,U=ExtensionManager.sort([...this.extensions].reverse()),G=[],Y=[],J=U.map(Q=>{const X={name:Q.name,options:Q.options,storage:Q.storage,editor:E,type:getSchemaTypeByName(Q.name,this.schema)},Z=[],ee=getExtensionField(Q,"addKeyboardShortcuts",X);let te={};if(Q.type==="mark"&&Q.config.exitable&&(te.ArrowRight=()=>Mark.handleExit({editor:E,mark:Q})),ee){const ye=Object.fromEntries(Object.entries(ee()).map(([Se,ge])=>[Se,()=>ge({editor:E})]));te={...te,...ye}}const ne=keymap(te);Z.push(ne);const oe=getExtensionField(Q,"addInputRules",X);isExtensionRulesEnabled(Q,E.options.enableInputRules)&&oe&&G.push(...oe());const ce=getExtensionField(Q,"addPasteRules",X);isExtensionRulesEnabled(Q,E.options.enablePasteRules)&&ce&&Y.push(...ce());const pe=getExtensionField(Q,"addProseMirrorPlugins",X);if(pe){const ye=pe();Z.push(...ye)}return Z}).flat();return[inputRulesPlugin({editor:E,rules:G}),...pasteRulesPlugin({editor:E,rules:Y}),...J]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:E}=this,{nodeExtensions:U}=splitExtensions(this.extensions);return Object.fromEntries(U.filter(G=>!!getExtensionField(G,"addNodeView")).map(G=>{const Y=this.attributes.filter(Z=>Z.type===G.name),J={name:G.name,options:G.options,storage:G.storage,editor:E,type:getNodeType(G.name,this.schema)},Q=getExtensionField(G,"addNodeView",J);if(!Q)return[];const X=(Z,ee,te,ne)=>{const oe=getRenderedAttributes(Z,Y);return Q()({editor:E,node:Z,getPos:te,decorations:ne,HTMLAttributes:oe,extension:G})};return[G.name,X]}))}}function getType(R){return Object.prototype.toString.call(R).slice(8,-1)}function isPlainObject$1(R){return getType(R)!=="Object"?!1:R.constructor===Object&&Object.getPrototypeOf(R)===Object.prototype}function mergeDeep(R,E){const U={...R};return isPlainObject$1(R)&&isPlainObject$1(E)&&Object.keys(E).forEach(G=>{isPlainObject$1(E[G])?G in R?U[G]=mergeDeep(R[G],E[G]):Object.assign(U,{[G]:E[G]}):Object.assign(U,{[G]:E[G]})}),U}class Extension{constructor(E={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...E},this.name=this.config.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(E={}){return new Extension(E)}configure(E={}){const U=this.extend();return U.options=mergeDeep(this.options,E),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}extend(E={}){const U=new Extension(E);return U.parent=this,this.child=U,U.name=E.name?E.name:U.parent.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${U.name}".`),U.options=callOrReturn(getExtensionField(U,"addOptions",{name:U.name})),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}}function getTextBetween(R,E,U){const{from:G,to:Y}=E,{blockSeparator:J=`

`,textSerializers:Q={}}=U||{};let X="",Z=!0;return R.nodesBetween(G,Y,(ee,te,ne,oe)=>{var ce;const pe=Q==null?void 0:Q[ee.type.name];pe?(ee.isBlock&&!Z&&(X+=J,Z=!0),ne&&(X+=pe({node:ee,pos:te,parent:ne,index:oe,range:E}))):ee.isText?(X+=(ce=ee==null?void 0:ee.text)===null||ce===void 0?void 0:ce.slice(Math.max(G,te)-te,Y-te),Z=!1):ee.isBlock&&!Z&&(X+=J,Z=!0)}),X}function getTextSerializersFromSchema(R){return Object.fromEntries(Object.entries(R.nodes).filter(([,E])=>E.spec.toText).map(([E,U])=>[E,U.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:R}=this,{state:E,schema:U}=R,{doc:G,selection:Y}=E,{ranges:J}=Y,Q=Math.min(...J.map(te=>te.$from.pos)),X=Math.max(...J.map(te=>te.$to.pos)),Z=getTextSerializersFromSchema(U);return getTextBetween(G,{from:Q,to:X},{textSerializers:Z})}}})]}}),blur=()=>({editor:R,view:E})=>(requestAnimationFrame(()=>{var U;R.isDestroyed||(E.dom.blur(),(U=window==null?void 0:window.getSelection())===null||U===void 0||U.removeAllRanges())}),!0),clearContent=(R=!1)=>({commands:E})=>E.setContent("",R),clearNodes=()=>({state:R,tr:E,dispatch:U})=>{const{selection:G}=E,{ranges:Y}=G;return U&&Y.forEach(({$from:J,$to:Q})=>{R.doc.nodesBetween(J.pos,Q.pos,(X,Z)=>{if(X.type.isText)return;const{doc:ee,mapping:te}=E,ne=ee.resolve(te.map(Z)),oe=ee.resolve(te.map(Z+X.nodeSize)),ce=ne.blockRange(oe);if(!ce)return;const pe=liftTarget(ce);if(X.type.isTextblock){const{defaultType:ye}=ne.parent.contentMatchAt(ne.index());E.setNodeMarkup(ce.start,ye)}(pe||pe===0)&&E.lift(ce,pe)})}),!0},command=R=>E=>R(E),createParagraphNear=()=>({state:R,dispatch:E})=>createParagraphNear$1(R,E),deleteCurrentNode=()=>({tr:R,dispatch:E})=>{const{selection:U}=R,G=U.$anchor.node();if(G.content.size>0)return!1;const Y=R.selection.$anchor;for(let J=Y.depth;J>0;J-=1)if(Y.node(J).type===G.type){if(E){const X=Y.before(J),Z=Y.after(J);R.delete(X,Z).scrollIntoView()}return!0}return!1},deleteNode=R=>({tr:E,state:U,dispatch:G})=>{const Y=getNodeType(R,U.schema),J=E.selection.$anchor;for(let Q=J.depth;Q>0;Q-=1)if(J.node(Q).type===Y){if(G){const Z=J.before(Q),ee=J.after(Q);E.delete(Z,ee).scrollIntoView()}return!0}return!1},deleteRange=R=>({tr:E,dispatch:U})=>{const{from:G,to:Y}=R;return U&&E.delete(G,Y),!0},deleteSelection=()=>({state:R,dispatch:E})=>deleteSelection$1(R,E),enter=()=>({commands:R})=>R.keyboardShortcut("Enter"),exitCode=()=>({state:R,dispatch:E})=>exitCode$1(R,E);function objectIncludes(R,E,U={strict:!0}){const G=Object.keys(E);return G.length?G.every(Y=>U.strict?E[Y]===R[Y]:isRegExp$1(E[Y])?E[Y].test(R[Y]):E[Y]===R[Y]):!0}function findMarkInSet(R,E,U={}){return R.find(G=>G.type===E&&objectIncludes(G.attrs,U))}function isMarkInSet(R,E,U={}){return!!findMarkInSet(R,E,U)}function getMarkRange(R,E,U={}){if(!R||!E)return;let G=R.parent.childAfter(R.parentOffset);if(R.parentOffset===G.offset&&G.offset!==0&&(G=R.parent.childBefore(R.parentOffset)),!G.node)return;const Y=findMarkInSet([...G.node.marks],E,U);if(!Y)return;let J=G.index,Q=R.start()+G.offset,X=J+1,Z=Q+G.node.nodeSize;for(findMarkInSet([...G.node.marks],E,U);J>0&&Y.isInSet(R.parent.child(J-1).marks);)J-=1,Q-=R.parent.child(J).nodeSize;for(;X<R.parent.childCount&&isMarkInSet([...R.parent.child(X).marks],E,U);)Z+=R.parent.child(X).nodeSize,X+=1;return{from:Q,to:Z}}function getMarkType(R,E){if(typeof R=="string"){if(!E.marks[R])throw Error(`There is no mark type named '${R}'. Maybe you forgot to add the extension?`);return E.marks[R]}return R}const extendMarkRange=(R,E={})=>({tr:U,state:G,dispatch:Y})=>{const J=getMarkType(R,G.schema),{doc:Q,selection:X}=U,{$from:Z,from:ee,to:te}=X;if(Y){const ne=getMarkRange(Z,J,E);if(ne&&ne.from<=ee&&ne.to>=te){const oe=TextSelection.create(Q,ne.from,ne.to);U.setSelection(oe)}}return!0},first$1=R=>E=>{const U=typeof R=="function"?R(E):R;for(let G=0;G<U.length;G+=1)if(U[G](E))return!0;return!1};function isTextSelection(R){return R instanceof TextSelection}function minMax(R=0,E=0,U=0){return Math.min(Math.max(R,E),U)}function resolveFocusPosition(R,E=null){if(!E)return null;const U=Selection.atStart(R),G=Selection.atEnd(R);if(E==="start"||E===!0)return U;if(E==="end")return G;const Y=U.from,J=G.to;return E==="all"?TextSelection.create(R,minMax(0,Y,J),minMax(R.content.size,Y,J)):TextSelection.create(R,minMax(E,Y,J),minMax(E,Y,J))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(R=null,E={})=>({editor:U,view:G,tr:Y,dispatch:J})=>{E={scrollIntoView:!0,...E};const Q=()=>{isiOS()&&G.dom.focus(),requestAnimationFrame(()=>{U.isDestroyed||(G.focus(),E!=null&&E.scrollIntoView&&U.commands.scrollIntoView())})};if(G.hasFocus()&&R===null||R===!1)return!0;if(J&&R===null&&!isTextSelection(U.state.selection))return Q(),!0;const X=resolveFocusPosition(Y.doc,R)||U.state.selection,Z=U.state.selection.eq(X);return J&&(Z||Y.setSelection(X),Z&&Y.storedMarks&&Y.setStoredMarks(Y.storedMarks),Q()),!0},forEach=(R,E)=>U=>R.every((G,Y)=>E(G,{...U,index:Y})),insertContent=(R,E)=>({tr:U,commands:G})=>G.insertContentAt({from:U.selection.from,to:U.selection.to},R,E);function elementFromString(R){const E=`<body>${R}</body>`;return new window.DOMParser().parseFromString(E,"text/html").body}function createNodeFromContent(R,E,U){if(U={slice:!0,parseOptions:{},...U},typeof R=="object"&&R!==null)try{return Array.isArray(R)&&R.length>0?Fragment$1.fromArray(R.map(G=>E.nodeFromJSON(G))):E.nodeFromJSON(R)}catch(G){return console.warn("[tiptap warn]: Invalid content.","Passed value:",R,"Error:",G),createNodeFromContent("",E,U)}if(typeof R=="string"){const G=DOMParser$1.fromSchema(E);return U.slice?G.parseSlice(elementFromString(R),U.parseOptions).content:G.parse(elementFromString(R),U.parseOptions)}return createNodeFromContent("",E,U)}function selectionToInsertionEnd(R,E,U){const G=R.steps.length-1;if(G<E)return;const Y=R.steps[G];if(!(Y instanceof ReplaceStep||Y instanceof ReplaceAroundStep))return;const J=R.mapping.maps[G];let Q=0;J.forEach((X,Z,ee,te)=>{Q===0&&(Q=te)}),R.setSelection(Selection.near(R.doc.resolve(Q),U))}const isFragment=R=>R.toString().startsWith("<"),insertContentAt=(R,E,U)=>({tr:G,dispatch:Y,editor:J})=>{if(Y){U={parseOptions:{},updateSelection:!0,...U};const Q=createNodeFromContent(E,J.schema,{parseOptions:{preserveWhitespace:"full",...U.parseOptions}});if(Q.toString()==="<>")return!0;let{from:X,to:Z}=typeof R=="number"?{from:R,to:R}:R,ee=!0,te=!0;if((isFragment(Q)?Q:[Q]).forEach(oe=>{oe.check(),ee=ee?oe.isText&&oe.marks.length===0:!1,te=te?oe.isBlock:!1}),X===Z&&te){const{parent:oe}=G.doc.resolve(X);oe.isTextblock&&!oe.type.spec.code&&!oe.childCount&&(X-=1,Z+=1)}ee?Array.isArray(E)?G.insertText(E.map(oe=>oe.text||"").join(""),X,Z):typeof E=="object"&&!!E&&!!E.text?G.insertText(E.text,X,Z):G.insertText(E,X,Z):G.replaceWith(X,Z,Q),U.updateSelection&&selectionToInsertionEnd(G,G.steps.length-1,-1)}return!0},joinUp=()=>({state:R,dispatch:E})=>joinUp$1(R,E),joinDown=()=>({state:R,dispatch:E})=>joinDown$1(R,E),joinBackward=()=>({state:R,dispatch:E})=>joinBackward$1(R,E),joinForward=()=>({state:R,dispatch:E})=>joinForward$1(R,E);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(R){const E=R.split(/-(?!$)/);let U=E[E.length-1];U==="Space"&&(U=" ");let G,Y,J,Q;for(let X=0;X<E.length-1;X+=1){const Z=E[X];if(/^(cmd|meta|m)$/i.test(Z))Q=!0;else if(/^a(lt)?$/i.test(Z))G=!0;else if(/^(c|ctrl|control)$/i.test(Z))Y=!0;else if(/^s(hift)?$/i.test(Z))J=!0;else if(/^mod$/i.test(Z))isiOS()||isMacOS()?Q=!0:Y=!0;else throw new Error(`Unrecognized modifier name: ${Z}`)}return G&&(U=`Alt-${U}`),Y&&(U=`Ctrl-${U}`),Q&&(U=`Meta-${U}`),J&&(U=`Shift-${U}`),U}const keyboardShortcut=R=>({editor:E,view:U,tr:G,dispatch:Y})=>{const J=normalizeKeyName(R).split(/-(?!$)/),Q=J.find(ee=>!["Alt","Ctrl","Meta","Shift"].includes(ee)),X=new KeyboardEvent("keydown",{key:Q==="Space"?" ":Q,altKey:J.includes("Alt"),ctrlKey:J.includes("Ctrl"),metaKey:J.includes("Meta"),shiftKey:J.includes("Shift"),bubbles:!0,cancelable:!0}),Z=E.captureTransaction(()=>{U.someProp("handleKeyDown",ee=>ee(U,X))});return Z==null||Z.steps.forEach(ee=>{const te=ee.map(G.mapping);te&&Y&&G.maybeStep(te)}),!0};function isNodeActive(R,E,U={}){const{from:G,to:Y,empty:J}=R.selection,Q=E?getNodeType(E,R.schema):null,X=[];R.doc.nodesBetween(G,Y,(ne,oe)=>{if(ne.isText)return;const ce=Math.max(G,oe),pe=Math.min(Y,oe+ne.nodeSize);X.push({node:ne,from:ce,to:pe})});const Z=Y-G,ee=X.filter(ne=>Q?Q.name===ne.node.type.name:!0).filter(ne=>objectIncludes(ne.node.attrs,U,{strict:!1}));return J?!!ee.length:ee.reduce((ne,oe)=>ne+oe.to-oe.from,0)>=Z}const lift=(R,E={})=>({state:U,dispatch:G})=>{const Y=getNodeType(R,U.schema);return isNodeActive(U,Y,E)?lift$1(U,G):!1},liftEmptyBlock=()=>({state:R,dispatch:E})=>liftEmptyBlock$1(R,E),liftListItem=R=>({state:E,dispatch:U})=>{const G=getNodeType(R,E.schema);return liftListItem$1(G)(E,U)},newlineInCode=()=>({state:R,dispatch:E})=>newlineInCode$1(R,E);function getSchemaTypeNameByName(R,E){return E.nodes[R]?"node":E.marks[R]?"mark":null}function deleteProps(R,E){const U=typeof E=="string"?[E]:E;return Object.keys(R).reduce((G,Y)=>(U.includes(Y)||(G[Y]=R[Y]),G),{})}const resetAttributes=(R,E)=>({tr:U,state:G,dispatch:Y})=>{let J=null,Q=null;const X=getSchemaTypeNameByName(typeof R=="string"?R:R.name,G.schema);return X?(X==="node"&&(J=getNodeType(R,G.schema)),X==="mark"&&(Q=getMarkType(R,G.schema)),Y&&U.selection.ranges.forEach(Z=>{G.doc.nodesBetween(Z.$from.pos,Z.$to.pos,(ee,te)=>{J&&J===ee.type&&U.setNodeMarkup(te,void 0,deleteProps(ee.attrs,E)),Q&&ee.marks.length&&ee.marks.forEach(ne=>{Q===ne.type&&U.addMark(te,te+ee.nodeSize,Q.create(deleteProps(ne.attrs,E)))})})}),!0):!1},scrollIntoView=()=>({tr:R,dispatch:E})=>(E&&R.scrollIntoView(),!0),selectAll=()=>({tr:R,commands:E})=>E.setTextSelection({from:0,to:R.doc.content.size}),selectNodeBackward=()=>({state:R,dispatch:E})=>selectNodeBackward$1(R,E),selectNodeForward=()=>({state:R,dispatch:E})=>selectNodeForward$1(R,E),selectParentNode=()=>({state:R,dispatch:E})=>selectParentNode$1(R,E),selectTextblockEnd=()=>({state:R,dispatch:E})=>selectTextblockEnd$1(R,E),selectTextblockStart=()=>({state:R,dispatch:E})=>selectTextblockStart$1(R,E);function createDocument(R,E,U={}){return createNodeFromContent(R,E,{slice:!1,parseOptions:U})}const setContent$1=(R,E=!1,U={})=>({tr:G,editor:Y,dispatch:J})=>{const{doc:Q}=G,X=createDocument(R,Y.schema,U);return J&&G.replaceWith(0,Q.content.size,X).setMeta("preventUpdate",!E),!0};function defaultBlockAt(R){for(let E=0;E<R.edgeCount;E+=1){const{type:U}=R.edge(E);if(U.isTextblock&&!U.hasRequiredAttrs())return U}return null}function findParentNodeClosestToPos(R,E){for(let U=R.depth;U>0;U-=1){const G=R.node(U);if(E(G))return{pos:U>0?R.before(U):0,start:R.start(U),depth:U,node:G}}}function findParentNode(R){return E=>findParentNodeClosestToPos(E.$from,R)}function getHTMLFromFragment(R,E){const U=DOMSerializer$1.fromSchema(E).serializeFragment(R),Y=document.implementation.createHTMLDocument().createElement("div");return Y.appendChild(U),Y.innerHTML}function getText(R,E){const U={from:0,to:R.content.size};return getTextBetween(R,U,E)}function getMarkAttributes(R,E){const U=getMarkType(E,R.schema),{from:G,to:Y,empty:J}=R.selection,Q=[];J?(R.storedMarks&&Q.push(...R.storedMarks),Q.push(...R.selection.$head.marks())):R.doc.nodesBetween(G,Y,Z=>{Q.push(...Z.marks)});const X=Q.find(Z=>Z.type.name===U.name);return X?{...X.attrs}:{}}function getNodeAttributes(R,E){const U=getNodeType(E,R.schema),{from:G,to:Y}=R.selection,J=[];R.doc.nodesBetween(G,Y,X=>{J.push(X)});const Q=J.reverse().find(X=>X.type.name===U.name);return Q?{...Q.attrs}:{}}function getAttributes(R,E){const U=getSchemaTypeNameByName(typeof E=="string"?E:E.name,R.schema);return U==="node"?getNodeAttributes(R,E):U==="mark"?getMarkAttributes(R,E):{}}function getMarksBetween(R,E,U){const G=[];return R===E?U.resolve(R).marks().forEach(Y=>{const J=U.resolve(R-1),Q=getMarkRange(J,Y.type);!Q||G.push({mark:Y,...Q})}):U.nodesBetween(R,E,(Y,J)=>{G.push(...Y.marks.map(Q=>({from:J,to:J+Y.nodeSize,mark:Q})))}),G}function getSplittedAttributes(R,E,U){return Object.fromEntries(Object.entries(U).filter(([G])=>{const Y=R.find(J=>J.type===E&&J.name===G);return Y?Y.attribute.keepOnSplit:!1}))}function isMarkActive(R,E,U={}){const{empty:G,ranges:Y}=R.selection,J=E?getMarkType(E,R.schema):null;if(G)return!!(R.storedMarks||R.selection.$from.marks()).filter(ne=>J?J.name===ne.type.name:!0).find(ne=>objectIncludes(ne.attrs,U,{strict:!1}));let Q=0;const X=[];if(Y.forEach(({$from:ne,$to:oe})=>{const ce=ne.pos,pe=oe.pos;R.doc.nodesBetween(ce,pe,(ye,Se)=>{if(!ye.isText&&!ye.marks.length)return;const ge=Math.max(ce,Se),_e=Math.min(pe,Se+ye.nodeSize);Q+=_e-ge,X.push(...ye.marks.map(Ee=>({mark:Ee,from:ge,to:_e})))})}),Q===0)return!1;const Z=X.filter(ne=>J?J.name===ne.mark.type.name:!0).filter(ne=>objectIncludes(ne.mark.attrs,U,{strict:!1})).reduce((ne,oe)=>ne+oe.to-oe.from,0),ee=X.filter(ne=>J?ne.mark.type!==J&&ne.mark.type.excludes(J):!0).reduce((ne,oe)=>ne+oe.to-oe.from,0);return(Z>0?Z+ee:Z)>=Q}function isActive(R,E,U={}){if(!E)return isNodeActive(R,null,U)||isMarkActive(R,null,U);const G=getSchemaTypeNameByName(E,R.schema);return G==="node"?isNodeActive(R,E,U):G==="mark"?isMarkActive(R,E,U):!1}function isList(R,E){const{nodeExtensions:U}=splitExtensions(E),G=U.find(Q=>Q.name===R);if(!G)return!1;const Y={name:G.name,options:G.options,storage:G.storage},J=callOrReturn(getExtensionField(G,"group",Y));return typeof J!="string"?!1:J.split(" ").includes("list")}function isNodeEmpty(R){var E;const U=(E=R.type.createAndFill())===null||E===void 0?void 0:E.toJSON(),G=R.toJSON();return JSON.stringify(U)===JSON.stringify(G)}function isNodeSelection(R){return R instanceof NodeSelection}function posToDOMRect(R,E,U){const Y=R.state.doc.content.size,J=minMax(E,0,Y),Q=minMax(U,0,Y),X=R.coordsAtPos(J),Z=R.coordsAtPos(Q,-1),ee=Math.min(X.top,Z.top),te=Math.max(X.bottom,Z.bottom),ne=Math.min(X.left,Z.left),oe=Math.max(X.right,Z.right),ce=oe-ne,pe=te-ee,ge={top:ee,bottom:te,left:ne,right:oe,width:ce,height:pe,x:ne,y:ee};return{...ge,toJSON:()=>ge}}function canSetMark(R,E,U){var G;const{selection:Y}=E;let J=null;if(isTextSelection(Y)&&(J=Y.$cursor),J){const X=(G=R.storedMarks)!==null&&G!==void 0?G:J.marks();return!!U.isInSet(X)||!X.some(Z=>Z.type.excludes(U))}const{ranges:Q}=Y;return Q.some(({$from:X,$to:Z})=>{let ee=X.depth===0?R.doc.inlineContent&&R.doc.type.allowsMarkType(U):!1;return R.doc.nodesBetween(X.pos,Z.pos,(te,ne,oe)=>{if(ee)return!1;if(te.isInline){const ce=!oe||oe.type.allowsMarkType(U),pe=!!U.isInSet(te.marks)||!te.marks.some(ye=>ye.type.excludes(U));ee=ce&&pe}return!ee}),ee})}const setMark=(R,E={})=>({tr:U,state:G,dispatch:Y})=>{const{selection:J}=U,{empty:Q,ranges:X}=J,Z=getMarkType(R,G.schema);if(Y)if(Q){const ee=getMarkAttributes(G,Z);U.addStoredMark(Z.create({...ee,...E}))}else X.forEach(ee=>{const te=ee.$from.pos,ne=ee.$to.pos;G.doc.nodesBetween(te,ne,(oe,ce)=>{const pe=Math.max(ce,te),ye=Math.min(ce+oe.nodeSize,ne);oe.marks.find(ge=>ge.type===Z)?oe.marks.forEach(ge=>{Z===ge.type&&U.addMark(pe,ye,Z.create({...ge.attrs,...E}))}):U.addMark(pe,ye,Z.create(E))})});return canSetMark(G,U,Z)},setMeta=(R,E)=>({tr:U})=>(U.setMeta(R,E),!0),setNode=(R,E={})=>({state:U,dispatch:G,chain:Y})=>{const J=getNodeType(R,U.schema);return J.isTextblock?Y().command(({commands:Q})=>setBlockType(J,E)(U)?!0:Q.clearNodes()).command(({state:Q})=>setBlockType(J,E)(Q,G)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=R=>({tr:E,dispatch:U})=>{if(U){const{doc:G}=E,Y=minMax(R,0,G.content.size),J=NodeSelection.create(G,Y);E.setSelection(J)}return!0},setTextSelection=R=>({tr:E,dispatch:U})=>{if(U){const{doc:G}=E,{from:Y,to:J}=typeof R=="number"?{from:R,to:R}:R,Q=TextSelection.atStart(G).from,X=TextSelection.atEnd(G).to,Z=minMax(Y,Q,X),ee=minMax(J,Q,X),te=TextSelection.create(G,Z,ee);E.setSelection(te)}return!0},sinkListItem=R=>({state:E,dispatch:U})=>{const G=getNodeType(R,E.schema);return sinkListItem$1(G)(E,U)};function ensureMarks(R,E){const U=R.storedMarks||R.selection.$to.parentOffset&&R.selection.$from.marks();if(U){const G=U.filter(Y=>E==null?void 0:E.includes(Y.type.name));R.tr.ensureMarks(G)}}const splitBlock=({keepMarks:R=!0}={})=>({tr:E,state:U,dispatch:G,editor:Y})=>{const{selection:J,doc:Q}=E,{$from:X,$to:Z}=J,ee=Y.extensionManager.attributes,te=getSplittedAttributes(ee,X.node().type.name,X.node().attrs);if(J instanceof NodeSelection&&J.node.isBlock)return!X.parentOffset||!canSplit(Q,X.pos)?!1:(G&&(R&&ensureMarks(U,Y.extensionManager.splittableMarks),E.split(X.pos).scrollIntoView()),!0);if(!X.parent.isBlock)return!1;if(G){const ne=Z.parentOffset===Z.parent.content.size;J instanceof TextSelection&&E.deleteSelection();const oe=X.depth===0?void 0:defaultBlockAt(X.node(-1).contentMatchAt(X.indexAfter(-1)));let ce=ne&&oe?[{type:oe,attrs:te}]:void 0,pe=canSplit(E.doc,E.mapping.map(X.pos),1,ce);if(!ce&&!pe&&canSplit(E.doc,E.mapping.map(X.pos),1,oe?[{type:oe}]:void 0)&&(pe=!0,ce=oe?[{type:oe,attrs:te}]:void 0),pe&&(E.split(E.mapping.map(X.pos),1,ce),oe&&!ne&&!X.parentOffset&&X.parent.type!==oe)){const ye=E.mapping.map(X.before()),Se=E.doc.resolve(ye);X.node(-1).canReplaceWith(Se.index(),Se.index()+1,oe)&&E.setNodeMarkup(E.mapping.map(X.before()),oe)}R&&ensureMarks(U,Y.extensionManager.splittableMarks),E.scrollIntoView()}return!0},splitListItem=R=>({tr:E,state:U,dispatch:G,editor:Y})=>{var J;const Q=getNodeType(R,U.schema),{$from:X,$to:Z}=U.selection,ee=U.selection.node;if(ee&&ee.isBlock||X.depth<2||!X.sameParent(Z))return!1;const te=X.node(-1);if(te.type!==Q)return!1;const ne=Y.extensionManager.attributes;if(X.parent.content.size===0&&X.node(-1).childCount===X.indexAfter(-1)){if(X.depth===2||X.node(-3).type!==Q||X.index(-2)!==X.node(-2).childCount-1)return!1;if(G){let Se=Fragment$1.empty;const ge=X.index(-1)?1:X.index(-2)?2:3;for(let Ie=X.depth-ge;Ie>=X.depth-3;Ie-=1)Se=Fragment$1.from(X.node(Ie).copy(Se));const _e=X.indexAfter(-1)<X.node(-2).childCount?1:X.indexAfter(-2)<X.node(-3).childCount?2:3,Te=getSplittedAttributes(ne,X.node().type.name,X.node().attrs),Ee=((J=Q.contentMatch.defaultType)===null||J===void 0?void 0:J.createAndFill(Te))||void 0;Se=Se.append(Fragment$1.from(Q.createAndFill(null,Ee)||void 0));const Re=X.before(X.depth-(ge-1));E.replace(Re,X.after(-_e),new Slice$1(Se,4-ge,0));let Ae=-1;E.doc.nodesBetween(Re,E.doc.content.size,(Ie,Oe)=>{if(Ae>-1)return!1;Ie.isTextblock&&Ie.content.size===0&&(Ae=Oe+1)}),Ae>-1&&E.setSelection(TextSelection.near(E.doc.resolve(Ae))),E.scrollIntoView()}return!0}const oe=Z.pos===X.end()?te.contentMatchAt(0).defaultType:null,ce=getSplittedAttributes(ne,te.type.name,te.attrs),pe=getSplittedAttributes(ne,X.node().type.name,X.node().attrs);E.delete(X.pos,Z.pos);const ye=oe?[{type:Q,attrs:ce},{type:oe,attrs:pe}]:[{type:Q,attrs:ce}];if(!canSplit(E.doc,X.pos,2))return!1;if(G){const{selection:Se,storedMarks:ge}=U,{splittableMarks:_e}=Y.extensionManager,Te=ge||Se.$to.parentOffset&&Se.$from.marks();if(E.split(X.pos,2,ye).scrollIntoView(),!Te||!G)return!0;const Ee=Te.filter(Re=>_e.includes(Re.type.name));E.ensureMarks(Ee)}return!0},joinListBackwards=(R,E)=>{const U=findParentNode(Q=>Q.type===E)(R.selection);if(!U)return!0;const G=R.doc.resolve(Math.max(0,U.pos-1)).before(U.depth);if(G===void 0)return!0;const Y=R.doc.nodeAt(G);return U.node.type===(Y==null?void 0:Y.type)&&canJoin(R.doc,U.pos)&&R.join(U.pos),!0},joinListForwards=(R,E)=>{const U=findParentNode(Q=>Q.type===E)(R.selection);if(!U)return!0;const G=R.doc.resolve(U.start).after(U.depth);if(G===void 0)return!0;const Y=R.doc.nodeAt(G);return U.node.type===(Y==null?void 0:Y.type)&&canJoin(R.doc,G)&&R.join(G),!0},toggleList=(R,E,U,G={})=>({editor:Y,tr:J,state:Q,dispatch:X,chain:Z,commands:ee,can:te})=>{const{extensions:ne,splittableMarks:oe}=Y.extensionManager,ce=getNodeType(R,Q.schema),pe=getNodeType(E,Q.schema),{selection:ye,storedMarks:Se}=Q,{$from:ge,$to:_e}=ye,Te=ge.blockRange(_e),Ee=Se||ye.$to.parentOffset&&ye.$from.marks();if(!Te)return!1;const Re=findParentNode(Ae=>isList(Ae.type.name,ne))(ye);if(Te.depth>=1&&Re&&Te.depth-Re.depth<=1){if(Re.node.type===ce)return ee.liftListItem(pe);if(isList(Re.node.type.name,ne)&&ce.validContent(Re.node.content)&&X)return Z().command(()=>(J.setNodeMarkup(Re.pos,ce),!0)).command(()=>joinListBackwards(J,ce)).command(()=>joinListForwards(J,ce)).run()}return!U||!Ee||!X?Z().command(()=>te().wrapInList(ce,G)?!0:ee.clearNodes()).wrapInList(ce,G).command(()=>joinListBackwards(J,ce)).command(()=>joinListForwards(J,ce)).run():Z().command(()=>{const Ae=te().wrapInList(ce,G),Ie=Ee.filter(Oe=>oe.includes(Oe.type.name));return J.ensureMarks(Ie),Ae?!0:ee.clearNodes()}).wrapInList(ce,G).command(()=>joinListBackwards(J,ce)).command(()=>joinListForwards(J,ce)).run()},toggleMark=(R,E={},U={})=>({state:G,commands:Y})=>{const{extendEmptyMarkRange:J=!1}=U,Q=getMarkType(R,G.schema);return isMarkActive(G,Q,E)?Y.unsetMark(Q,{extendEmptyMarkRange:J}):Y.setMark(Q,E)},toggleNode=(R,E,U={})=>({state:G,commands:Y})=>{const J=getNodeType(R,G.schema),Q=getNodeType(E,G.schema);return isNodeActive(G,J,U)?Y.setNode(Q):Y.setNode(J,U)},toggleWrap=(R,E={})=>({state:U,commands:G})=>{const Y=getNodeType(R,U.schema);return isNodeActive(U,Y,E)?G.lift(Y):G.wrapIn(Y,E)},undoInputRule=()=>({state:R,dispatch:E})=>{const U=R.plugins;for(let G=0;G<U.length;G+=1){const Y=U[G];let J;if(Y.spec.isInputRules&&(J=Y.getState(R))){if(E){const Q=R.tr,X=J.transform;for(let Z=X.steps.length-1;Z>=0;Z-=1)Q.step(X.steps[Z].invert(X.docs[Z]));if(J.text){const Z=Q.doc.resolve(J.from).marks();Q.replaceWith(J.from,J.to,R.schema.text(J.text,Z))}else Q.delete(J.from,J.to)}return!0}}return!1},unsetAllMarks=()=>({tr:R,dispatch:E})=>{const{selection:U}=R,{empty:G,ranges:Y}=U;return G||E&&Y.forEach(J=>{R.removeMark(J.$from.pos,J.$to.pos)}),!0},unsetMark=(R,E={})=>({tr:U,state:G,dispatch:Y})=>{var J;const{extendEmptyMarkRange:Q=!1}=E,{selection:X}=U,Z=getMarkType(R,G.schema),{$from:ee,empty:te,ranges:ne}=X;if(!Y)return!0;if(te&&Q){let{from:oe,to:ce}=X;const pe=(J=ee.marks().find(Se=>Se.type===Z))===null||J===void 0?void 0:J.attrs,ye=getMarkRange(ee,Z,pe);ye&&(oe=ye.from,ce=ye.to),U.removeMark(oe,ce,Z)}else ne.forEach(oe=>{U.removeMark(oe.$from.pos,oe.$to.pos,Z)});return U.removeStoredMark(Z),!0},updateAttributes=(R,E={})=>({tr:U,state:G,dispatch:Y})=>{let J=null,Q=null;const X=getSchemaTypeNameByName(typeof R=="string"?R:R.name,G.schema);return X?(X==="node"&&(J=getNodeType(R,G.schema)),X==="mark"&&(Q=getMarkType(R,G.schema)),Y&&U.selection.ranges.forEach(Z=>{const ee=Z.$from.pos,te=Z.$to.pos;G.doc.nodesBetween(ee,te,(ne,oe)=>{J&&J===ne.type&&U.setNodeMarkup(oe,void 0,{...ne.attrs,...E}),Q&&ne.marks.length&&ne.marks.forEach(ce=>{if(Q===ce.type){const pe=Math.max(oe,ee),ye=Math.min(oe+ne.nodeSize,te);U.addMark(pe,ye,Q.create({...ce.attrs,...E}))}})})}),!0):!1},wrapIn=(R,E={})=>({state:U,dispatch:G})=>{const Y=getNodeType(R,U.schema);return wrapIn$1(Y,E)(U,G)},wrapInList=(R,E={})=>({state:U,dispatch:G})=>{const Y=getNodeType(R,U.schema);return wrapInList$1(Y,E)(U,G)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first:first$1,focus,forEach,insertContent,insertContentAt,joinUp,joinDown,joinBackward,joinForward,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent:setContent$1,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:R}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(E,U)=>{R.isFocused=!0;const G=R.state.tr.setMeta("focus",{event:U}).setMeta("addToHistory",!1);return E.dispatch(G),!1},blur:(E,U)=>{R.isFocused=!1;const G=R.state.tr.setMeta("blur",{event:U}).setMeta("addToHistory",!1);return E.dispatch(G),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const R=()=>this.editor.commands.first(({commands:Q})=>[()=>Q.undoInputRule(),()=>Q.command(({tr:X})=>{const{selection:Z,doc:ee}=X,{empty:te,$anchor:ne}=Z,{pos:oe,parent:ce}=ne,pe=Selection.atStart(ee).from===oe;return!te||!pe||!ce.type.isTextblock||ce.textContent.length?!1:Q.clearNodes()}),()=>Q.deleteSelection(),()=>Q.joinBackward(),()=>Q.selectNodeBackward()]),E=()=>this.editor.commands.first(({commands:Q})=>[()=>Q.deleteSelection(),()=>Q.deleteCurrentNode(),()=>Q.joinForward(),()=>Q.selectNodeForward()]),G={Enter:()=>this.editor.commands.first(({commands:Q})=>[()=>Q.newlineInCode(),()=>Q.createParagraphNear(),()=>Q.liftEmptyBlock(),()=>Q.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:R,"Mod-Backspace":R,"Shift-Backspace":R,Delete:E,"Mod-Delete":E,"Mod-a":()=>this.editor.commands.selectAll()},Y={...G},J={...G,"Ctrl-h":R,"Alt-Backspace":R,"Ctrl-d":E,"Ctrl-Alt-Backspace":E,"Alt-Delete":E,"Alt-d":E,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?J:Y},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(R,E,U)=>{if(!(R.some(pe=>pe.docChanged)&&!E.doc.eq(U.doc)))return;const{empty:Y,from:J,to:Q}=E.selection,X=Selection.atStart(E.doc).from,Z=Selection.atEnd(E.doc).to;if(Y||!(J===X&&Q===Z)||!(U.doc.textBetween(0,U.doc.content.size," "," ").length===0))return;const ne=U.tr,oe=createChainableState({state:U,transaction:ne}),{commands:ce}=new CommandManager({editor:this.editor,state:oe});if(ce.clearNodes(),!!ne.steps.length)return ne}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var extensions=Object.freeze({__proto__:null,ClipboardTextSerializer,Commands,Editable,FocusEvents,Keymap,Tabindex});const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(R,E){const U=document.querySelector("style[data-tiptap-style]");if(U!==null)return U;const G=document.createElement("style");return E&&G.setAttribute("nonce",E),G.setAttribute("data-tiptap-style",""),G.innerHTML=R,document.getElementsByTagName("head")[0].appendChild(G),G}class Editor$1 extends EventEmitter$1{constructor(E={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(E),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(E={}){this.options={...this.options,...E},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(E,U=!0){this.setOptions({editable:E}),U&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(E,U){const G=isFunction(U)?U(E,[...this.state.plugins]):[...this.state.plugins,E],Y=this.state.reconfigure({plugins:G});this.view.updateState(Y)}unregisterPlugin(E){if(this.isDestroyed)return;const U=typeof E=="string"?`${E}$`:E.key,G=this.state.reconfigure({plugins:this.state.plugins.filter(Y=>!Y.key.startsWith(U))});this.view.updateState(G)}createExtensionManager(){const U=[...this.options.enableCoreExtensions?Object.values(extensions):[],...this.options.extensions].filter(G=>["extension","node","mark"].includes(G==null?void 0:G.type));this.extensionManager=new ExtensionManager(U,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const E=createDocument(this.options.content,this.schema,this.options.parseOptions),U=resolveFocusPosition(E,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:E,selection:U||void 0})});const G=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(G),this.createNodeViews();const Y=this.view.dom;Y.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(E){this.isCapturingTransaction=!0,E(),this.isCapturingTransaction=!1;const U=this.capturedTransaction;return this.capturedTransaction=null,U}dispatchTransaction(E){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=E;return}E.steps.forEach(Q=>{var X;return(X=this.capturedTransaction)===null||X===void 0?void 0:X.step(Q)});return}const U=this.state.apply(E),G=!this.state.selection.eq(U.selection);this.view.updateState(U),this.emit("transaction",{editor:this,transaction:E}),G&&this.emit("selectionUpdate",{editor:this,transaction:E});const Y=E.getMeta("focus"),J=E.getMeta("blur");Y&&this.emit("focus",{editor:this,event:Y.event,transaction:E}),J&&this.emit("blur",{editor:this,event:J.event,transaction:E}),!(!E.docChanged||E.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:E})}getAttributes(E){return getAttributes(this.state,E)}isActive(E,U){const G=typeof E=="string"?E:null,Y=typeof E=="string"?U:E;return isActive(this.state,G,Y)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(E){const{blockSeparator:U=`

`,textSerializers:G={}}=E||{};return getText(this.state.doc,{blockSeparator:U,textSerializers:{...getTextSerializersFromSchema(this.schema),...G}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var E;return!(!((E=this.view)===null||E===void 0)&&E.docView)}}function markInputRule(R){return new InputRule({find:R.find,handler:({state:E,range:U,match:G})=>{const Y=callOrReturn(R.getAttributes,void 0,G);if(Y===!1||Y===null)return null;const{tr:J}=E,Q=G[G.length-1],X=G[0];let Z=U.to;if(Q){const ee=X.search(/\S/),te=U.from+X.indexOf(Q),ne=te+Q.length;if(getMarksBetween(U.from,U.to,E.doc).filter(ce=>ce.mark.type.excluded.find(ye=>ye===R.type&&ye!==ce.mark.type)).filter(ce=>ce.to>te).length)return null;ne<U.to&&J.delete(ne,U.to),te>U.from&&J.delete(U.from+ee,te),Z=U.from+ee+Q.length,J.addMark(U.from+ee,Z,R.type.create(Y||{})),J.removeStoredMark(R.type)}}})}function nodeInputRule(R){return new InputRule({find:R.find,handler:({state:E,range:U,match:G})=>{const Y=callOrReturn(R.getAttributes,void 0,G)||{},{tr:J}=E,Q=U.from;let X=U.to;if(G[1]){const Z=G[0].lastIndexOf(G[1]);let ee=Q+Z;ee>X?ee=X:X=ee+G[1].length;const te=G[0][G[0].length-1];J.insertText(te,Q+G[0].length-1),J.replaceWith(ee,X,R.type.create(Y))}else G[0]&&J.replaceWith(Q,X,R.type.create(Y))}})}function textblockTypeInputRule(R){return new InputRule({find:R.find,handler:({state:E,range:U,match:G})=>{const Y=E.doc.resolve(U.from),J=callOrReturn(R.getAttributes,void 0,G)||{};if(!Y.node(-1).canReplaceWith(Y.index(-1),Y.indexAfter(-1),R.type))return null;E.tr.delete(U.from,U.to).setBlockType(U.from,U.from,R.type,J)}})}function wrappingInputRule(R){return new InputRule({find:R.find,handler:({state:E,range:U,match:G,chain:Y})=>{const J=callOrReturn(R.getAttributes,void 0,G)||{},Q=E.tr.delete(U.from,U.to),Z=Q.doc.resolve(U.from).blockRange(),ee=Z&&findWrapping(Z,R.type,J);if(!ee)return null;if(Q.wrap(Z,ee),R.keepMarks&&R.editor){const{selection:ne,storedMarks:oe}=E,{splittableMarks:ce}=R.editor.extensionManager,pe=oe||ne.$to.parentOffset&&ne.$from.marks();if(pe){const ye=pe.filter(Se=>ce.includes(Se.type.name));Q.ensureMarks(ye)}}if(R.keepAttributes){const ne=R.type.name==="bulletList"||R.type.name==="orderedList"?"listItem":"taskList";Y().updateAttributes(ne,J).run()}const te=Q.doc.resolve(U.from-1).nodeBefore;te&&te.type===R.type&&canJoin(Q.doc,U.from-1)&&(!R.joinPredicate||R.joinPredicate(G,te))&&Q.join(U.from-1)}})}class Mark{constructor(E={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...E},this.name=this.config.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(E={}){return new Mark(E)}configure(E={}){const U=this.extend();return U.options=mergeDeep(this.options,E),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}extend(E={}){const U=new Mark(E);return U.parent=this,this.child=U,U.name=E.name?E.name:U.parent.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${U.name}".`),U.options=callOrReturn(getExtensionField(U,"addOptions",{name:U.name})),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}static handleExit({editor:E,mark:U}){const{tr:G}=E.state,Y=E.state.selection.$from;if(Y.pos===Y.end()){const Q=Y.marks();if(!!!Q.find(ee=>(ee==null?void 0:ee.type.name)===U.name))return!1;const Z=Q.find(ee=>(ee==null?void 0:ee.type.name)===U.name);return Z&&G.removeStoredMark(Z),G.insertText(" ",Y.pos),E.view.dispatch(G),!0}return!1}}class Node{constructor(E={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...E},this.name=this.config.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(E={}){return new Node(E)}configure(E={}){const U=this.extend();return U.options=mergeDeep(this.options,E),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}extend(E={}){const U=new Node(E);return U.parent=this,this.child=U,U.name=E.name?E.name:U.parent.name,E.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${U.name}".`),U.options=callOrReturn(getExtensionField(U,"addOptions",{name:U.name})),U.storage=callOrReturn(getExtensionField(U,"addStorage",{name:U.name,options:U.options})),U}}function markPasteRule(R){return new PasteRule({find:R.find,handler:({state:E,range:U,match:G})=>{const Y=callOrReturn(R.getAttributes,void 0,G);if(Y===!1||Y===null)return null;const{tr:J}=E,Q=G[G.length-1],X=G[0];let Z=U.to;if(Q){const ee=X.search(/\S/),te=U.from+X.indexOf(Q),ne=te+Q.length;if(getMarksBetween(U.from,U.to,E.doc).filter(ce=>ce.mark.type.excluded.find(ye=>ye===R.type&&ye!==ce.mark.type)).filter(ce=>ce.to>te).length)return null;ne<U.to&&J.delete(ne,U.to),te>U.from&&J.delete(U.from+ee,te),Z=U.from+ee+Q.length,J.addMark(U.from+ee,Z,R.type.create(Y||{})),J.removeStoredMark(R.type)}}})}const CharacterCount=Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=R=>{const E=(R==null?void 0:R.node)||this.editor.state.doc;return((R==null?void 0:R.mode)||this.options.mode)==="textSize"?E.textBetween(0,E.content.size,void 0," ").length:E.nodeSize},this.storage.words=R=>{const E=(R==null?void 0:R.node)||this.editor.state.doc;return E.textBetween(0,E.content.size," "," ").split(" ").filter(Y=>Y!=="").length}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("characterCount"),filterTransaction:(R,E)=>{const U=this.options.limit;if(!R.docChanged||U===0||U===null||U===void 0)return!0;const G=this.storage.characters({node:E.doc}),Y=this.storage.characters({node:R.doc});if(Y<=U||G>U&&Y>U&&Y<=G)return!0;if(G>U&&Y>U&&Y>G||!R.getMeta("paste"))return!1;const Q=R.selection.$head.pos,X=Y-U,Z=Q-X,ee=Q;return R.deleteRange(Z,ee),!(this.storage.characters({node:R.doc})>U)}})]}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:R,selection:E})=>{const U=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:G}=E,Y=[];if(!U)return null;const J=R.type.createAndFill(),Q=(J==null?void 0:J.sameMarkup(R))&&J.content.findDiffStart(R.content)===null;return R.descendants((X,Z)=>{const ee=G>=Z&&G<=Z+X.nodeSize,te=!X.isLeaf&&!X.childCount;if((ee||!this.options.showOnlyCurrent)&&te){const ne=[this.options.emptyNodeClass];Q&&ne.push(this.options.emptyEditorClass);const oe=Decoration.node(Z,Z+X.nodeSize,{class:ne.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:X,pos:Z,hasAnchor:ee}):this.options.placeholder});Y.push(oe)}return this.options.includeChildren}),DecorationSet.create(R,Y)}}})]}}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:R=>R.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:R}){return["u",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setUnderline:()=>({commands:R})=>R.setMark(this.name),toggleUnderline:()=>({commands:R})=>R.toggleMark(this.name),unsetUnderline:()=>({commands:R})=>R.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),inputRegex$4=/^\s*>\s$/,Blockquote=Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:R}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setBlockquote:()=>({commands:R})=>R.wrapIn(this.name),toggleBlockquote:()=>({commands:R})=>R.toggleWrap(this.name),unsetBlockquote:()=>({commands:R})=>R.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,starPasteRegex$1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,underscoreInputRegex$1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,underscorePasteRegex$1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:R=>R.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:R=>/^(bold(er)?|[5-9]\d{2,})$/.test(R)&&null}]},renderHTML({HTMLAttributes:R}){return["strong",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setBold:()=>({commands:R})=>R.setMark(this.name),toggleBold:()=>({commands:R})=>R.toggleMark(this.name),unsetBold:()=>({commands:R})=>R.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItem$2=Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:R}){return["li",mergeAttributes(this.options.HTMLAttributes,R),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle$1=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:R=>R.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:R}){return["span",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:R,commands:E})=>{const U=getMarkAttributes(R,this.type);return Object.entries(U).some(([,Y])=>!!Y)?!0:E.unsetMark(this.name)}}}}),inputRegex$3=/^\s*([-+*])\s$/,BulletList=Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:R}){return["ul",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{toggleBulletList:()=>({commands:R,chain:E})=>this.options.keepAttributes?E().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem$2.name,this.editor.getAttributes(TextStyle$1.name)).run():R.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let R=wrappingInputRule({find:inputRegex$3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(R=wrappingInputRule({find:inputRegex$3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyle$1.name),editor:this.editor})),[R]}}),inputRegex$2=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,pasteRegex$1=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:R}){return["code",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setCode:()=>({commands:R})=>R.setMark(this.name),toggleCode:()=>({commands:R})=>R.toggleMark(this.name),unsetCode:()=>({commands:R})=>R.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:R=>{var E;const{languageClassPrefix:U}=this.options,J=[...((E=R.firstElementChild)===null||E===void 0?void 0:E.classList)||[]].filter(Q=>Q.startsWith(U)).map(Q=>Q.replace(U,""))[0];return J||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:R,HTMLAttributes:E}){return["pre",mergeAttributes(this.options.HTMLAttributes,E),["code",{class:R.attrs.language?this.options.languageClassPrefix+R.attrs.language:null},0]]},addCommands(){return{setCodeBlock:R=>({commands:E})=>E.setNode(this.name,R),toggleCodeBlock:R=>({commands:E})=>E.toggleNode(this.name,"paragraph",R)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:R,$anchor:E}=this.editor.state.selection,U=E.pos===1;return!R||E.parent.type.name!==this.name?!1:U||!E.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:R})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:E}=R,{selection:U}=E,{$from:G,empty:Y}=U;if(!Y||G.parent.type!==this.type)return!1;const J=G.parentOffset===G.parent.nodeSize-2,Q=G.parent.textContent.endsWith(`

`);return!J||!Q?!1:R.chain().command(({tr:X})=>(X.delete(G.pos-2,G.pos),!0)).exitCode().run()},ArrowDown:({editor:R})=>{if(!this.options.exitOnArrowDown)return!1;const{state:E}=R,{selection:U,doc:G}=E,{$from:Y,empty:J}=U;if(!J||Y.parent.type!==this.type||!(Y.parentOffset===Y.parent.nodeSize-2))return!1;const X=Y.after();return X===void 0||G.nodeAt(X)?!1:R.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:R=>({language:R[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:R=>({language:R[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(R,E)=>{if(!E.clipboardData||this.editor.isActive(this.type.name))return!1;const U=E.clipboardData.getData("text/plain"),G=E.clipboardData.getData("vscode-editor-data"),Y=G?JSON.parse(G):void 0,J=Y==null?void 0:Y.mode;if(!U||!J)return!1;const{tr:Q}=R.state;return Q.replaceSelectionWith(this.type.create({language:J})),Q.setSelection(TextSelection.near(Q.doc.resolve(Math.max(0,Q.selection.from-2)))),Q.insertText(U.replace(/\r\n?/g,`
`)),Q.setMeta("paste",!0),R.dispatch(Q),!0}}})]}}),Document=Node.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(R={}){return new Plugin({view(E){return new DropCursorView(E,R)}})}class DropCursorView{constructor(E,U){this.editorView=E,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=U.width||1,this.color=U.color||"black",this.class=U.class,this.handlers=["dragover","dragend","drop","dragleave"].map(G=>{let Y=J=>{this[G](J)};return E.dom.addEventListener(G,Y),{name:G,handler:Y}})}destroy(){this.handlers.forEach(({name:E,handler:U})=>this.editorView.dom.removeEventListener(E,U))}update(E,U){this.cursorPos!=null&&U.doc!=E.state.doc&&(this.cursorPos>E.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(E){E!=this.cursorPos&&(this.cursorPos=E,E==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let E=this.editorView.state.doc.resolve(this.cursorPos),U;if(!E.parent.inlineContent){let Q=E.nodeBefore,X=E.nodeAfter;if(Q||X){let Z=this.editorView.nodeDOM(this.cursorPos-(Q?Q.nodeSize:0)).getBoundingClientRect(),ee=Q?Z.bottom:Z.top;Q&&X&&(ee=(ee+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),U={left:Z.left,right:Z.right,top:ee-this.width/2,bottom:ee+this.width/2}}}if(!U){let Q=this.editorView.coordsAtPos(this.cursorPos);U={left:Q.left-this.width/2,right:Q.left+this.width/2,top:Q.top,bottom:Q.bottom}}let G=this.editorView.dom.offsetParent;this.element||(this.element=G.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);let Y,J;if(!G||G==document.body&&getComputedStyle(G).position=="static")Y=-pageXOffset,J=-pageYOffset;else{let Q=G.getBoundingClientRect();Y=Q.left-G.scrollLeft,J=Q.top-G.scrollTop}this.element.style.left=U.left-Y+"px",this.element.style.top=U.top-J+"px",this.element.style.width=U.right-U.left+"px",this.element.style.height=U.bottom-U.top+"px"}scheduleRemoval(E){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),E)}dragover(E){if(!this.editorView.editable)return;let U=this.editorView.posAtCoords({left:E.clientX,top:E.clientY}),G=U&&U.inside>=0&&this.editorView.state.doc.nodeAt(U.inside),Y=G&&G.type.spec.disableDropCursor,J=typeof Y=="function"?Y(this.editorView,U):Y;if(U&&!J){let Q=U.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(Q=dropPoint(this.editorView.state.doc,Q,this.editorView.dragging.slice),Q==null))return this.setCursor(null);this.setCursor(Q),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(E){(E.target==this.editorView.dom||!this.editorView.dom.contains(E.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(E){super(E,E)}map(E,U){let G=E.resolve(U.map(this.head));return GapCursor.valid(G)?new GapCursor(G):Selection.near(G)}content(){return Slice$1.empty}eq(E){return E instanceof GapCursor&&E.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(E,U){if(typeof U.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(E.resolve(U.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(E){let U=E.parent;if(U.isTextblock||!closedBefore(E)||!closedAfter(E))return!1;let G=U.type.spec.allowGapCursor;if(G!=null)return G;let Y=U.contentMatchAt(E.index()).defaultType;return Y&&Y.isTextblock}static findGapCursorFrom(E,U,G=!1){e:for(;;){if(!G&&GapCursor.valid(E))return E;let Y=E.pos,J=null;for(let Q=E.depth;;Q--){let X=E.node(Q);if(U>0?E.indexAfter(Q)<X.childCount:E.index(Q)>0){J=X.child(U>0?E.indexAfter(Q):E.index(Q)-1);break}else if(Q==0)return null;Y+=U;let Z=E.doc.resolve(Y);if(GapCursor.valid(Z))return Z}for(;;){let Q=U>0?J.firstChild:J.lastChild;if(!Q){if(J.isAtom&&!J.isText&&!NodeSelection.isSelectable(J)){E=E.doc.resolve(Y+J.nodeSize*U),G=!1;continue e}break}J=Q,Y+=U;let X=E.doc.resolve(Y);if(GapCursor.valid(X))return X}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(E){this.pos=E}map(E){return new GapBookmark(E.map(this.pos))}resolve(E){let U=E.resolve(this.pos);return GapCursor.valid(U)?new GapCursor(U):Selection.near(U)}}function closedBefore(R){for(let E=R.depth;E>=0;E--){let U=R.index(E),G=R.node(E);if(U==0){if(G.type.spec.isolating)return!0;continue}for(let Y=G.child(U-1);;Y=Y.lastChild){if(Y.childCount==0&&!Y.inlineContent||Y.isAtom||Y.type.spec.isolating)return!0;if(Y.inlineContent)return!1}}return!0}function closedAfter(R){for(let E=R.depth;E>=0;E--){let U=R.indexAfter(E),G=R.node(E);if(U==G.childCount){if(G.type.spec.isolating)return!0;continue}for(let Y=G.child(U);;Y=Y.firstChild){if(Y.childCount==0&&!Y.inlineContent||Y.isAtom||Y.type.spec.isolating)return!0;if(Y.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(R,E,U){return E.pos==U.pos&&GapCursor.valid(U)?new GapCursor(U):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow$2("horiz",-1),ArrowRight:arrow$2("horiz",1),ArrowUp:arrow$2("vert",-1),ArrowDown:arrow$2("vert",1)});function arrow$2(R,E){const U=R=="vert"?E>0?"down":"up":E>0?"right":"left";return function(G,Y,J){let Q=G.selection,X=E>0?Q.$to:Q.$from,Z=Q.empty;if(Q instanceof TextSelection){if(!J.endOfTextblock(U)||X.depth==0)return!1;Z=!1,X=G.doc.resolve(E>0?X.after():X.before())}let ee=GapCursor.findGapCursorFrom(X,E,Z);return ee?(Y&&Y(G.tr.setSelection(new GapCursor(ee))),!0):!1}}function handleClick(R,E,U){if(!R||!R.editable)return!1;let G=R.state.doc.resolve(E);if(!GapCursor.valid(G))return!1;let Y=R.posAtCoords({left:U.clientX,top:U.clientY});return Y&&Y.inside>-1&&NodeSelection.isSelectable(R.state.doc.nodeAt(Y.inside))?!1:(R.dispatch(R.state.tr.setSelection(new GapCursor(G))),!0)}function beforeinput(R,E){if(E.inputType!="insertCompositionText"||!(R.state.selection instanceof GapCursor))return!1;let{$from:U}=R.state.selection,G=U.parent.contentMatchAt(U.index()).findWrapping(R.state.schema.nodes.text);if(!G)return!1;let Y=Fragment$1.empty;for(let Q=G.length-1;Q>=0;Q--)Y=Fragment$1.from(G[Q].createAndFill(null,Y));let J=R.state.tr.replace(U.pos,U.pos,new Slice$1(Y,0,0));return J.setSelection(TextSelection.near(J.doc.resolve(U.pos+1))),R.dispatch(J),!1}function drawGapCursor(R){if(!(R.selection instanceof GapCursor))return null;let E=document.createElement("div");return E.className="ProseMirror-gapcursor",DecorationSet.create(R.doc,[Decoration.widget(R.selection.head,E,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(R){var E;const U={name:R.name,options:R.options,storage:R.storage};return{allowGapCursor:(E=callOrReturn(getExtensionField(R,"allowGapCursor",U)))!==null&&E!==void 0?E:null}}}),HardBreak=Node.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:R}){return["br",mergeAttributes(this.options.HTMLAttributes,R)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:R,chain:E,state:U,editor:G})=>R.first([()=>R.exitCode(),()=>R.command(()=>{const{selection:Y,storedMarks:J}=U;if(Y.$from.parent.type.spec.isolating)return!1;const{keepMarks:Q}=this.options,{splittableMarks:X}=G.extensionManager,Z=J||Y.$to.parentOffset&&Y.$from.marks();return E().insertContent({type:this.name}).command(({tr:ee,dispatch:te})=>{if(te&&Z&&Q){const ne=Z.filter(oe=>X.includes(oe.type.name));ee.ensureMarks(ne)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(R=>({tag:`h${R}`,attrs:{level:R}}))},renderHTML({node:R,HTMLAttributes:E}){return[`h${this.options.levels.includes(R.attrs.level)?R.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,E),0]},addCommands(){return{setHeading:R=>({commands:E})=>this.options.levels.includes(R.level)?E.setNode(this.name,R):!1,toggleHeading:R=>({commands:E})=>this.options.levels.includes(R.level)?E.toggleNode(this.name,"paragraph",R):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((R,E)=>({...R,[`Mod-Alt-${E}`]:()=>this.editor.commands.toggleHeading({level:E})}),{})},addInputRules(){return this.options.levels.map(R=>textblockTypeInputRule({find:new RegExp(`^(#{1,${R}})\\s$`),type:this.type,getAttributes:{level:R}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(E){return E.length?(E=RopeSequence.from(E),!this.length&&E||E.length<GOOD_LEAF_SIZE&&this.leafAppend(E)||this.length<GOOD_LEAF_SIZE&&E.leafPrepend(this)||this.appendInner(E)):this};RopeSequence.prototype.prepend=function(E){return E.length?RopeSequence.from(E).append(this):this};RopeSequence.prototype.appendInner=function(E){return new Append(this,E)};RopeSequence.prototype.slice=function(E,U){return E===void 0&&(E=0),U===void 0&&(U=this.length),E>=U?RopeSequence.empty:this.sliceInner(Math.max(0,E),Math.min(this.length,U))};RopeSequence.prototype.get=function(E){if(!(E<0||E>=this.length))return this.getInner(E)};RopeSequence.prototype.forEach=function(E,U,G){U===void 0&&(U=0),G===void 0&&(G=this.length),U<=G?this.forEachInner(E,U,G,0):this.forEachInvertedInner(E,U,G,0)};RopeSequence.prototype.map=function(E,U,G){U===void 0&&(U=0),G===void 0&&(G=this.length);var Y=[];return this.forEach(function(J,Q){return Y.push(E(J,Q))},U,G),Y};RopeSequence.from=function(E){return E instanceof RopeSequence?E:E&&E.length?new Leaf(E):RopeSequence.empty};var Leaf=function(R){function E(G){R.call(this),this.values=G}R&&(E.__proto__=R),E.prototype=Object.create(R&&R.prototype),E.prototype.constructor=E;var U={length:{configurable:!0},depth:{configurable:!0}};return E.prototype.flatten=function(){return this.values},E.prototype.sliceInner=function(Y,J){return Y==0&&J==this.length?this:new E(this.values.slice(Y,J))},E.prototype.getInner=function(Y){return this.values[Y]},E.prototype.forEachInner=function(Y,J,Q,X){for(var Z=J;Z<Q;Z++)if(Y(this.values[Z],X+Z)===!1)return!1},E.prototype.forEachInvertedInner=function(Y,J,Q,X){for(var Z=J-1;Z>=Q;Z--)if(Y(this.values[Z],X+Z)===!1)return!1},E.prototype.leafAppend=function(Y){if(this.length+Y.length<=GOOD_LEAF_SIZE)return new E(this.values.concat(Y.flatten()))},E.prototype.leafPrepend=function(Y){if(this.length+Y.length<=GOOD_LEAF_SIZE)return new E(Y.flatten().concat(this.values))},U.length.get=function(){return this.values.length},U.depth.get=function(){return 0},Object.defineProperties(E.prototype,U),E}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(R){function E(U,G){R.call(this),this.left=U,this.right=G,this.length=U.length+G.length,this.depth=Math.max(U.depth,G.depth)+1}return R&&(E.__proto__=R),E.prototype=Object.create(R&&R.prototype),E.prototype.constructor=E,E.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},E.prototype.getInner=function(G){return G<this.left.length?this.left.get(G):this.right.get(G-this.left.length)},E.prototype.forEachInner=function(G,Y,J,Q){var X=this.left.length;if(Y<X&&this.left.forEachInner(G,Y,Math.min(J,X),Q)===!1||J>X&&this.right.forEachInner(G,Math.max(Y-X,0),Math.min(this.length,J)-X,Q+X)===!1)return!1},E.prototype.forEachInvertedInner=function(G,Y,J,Q){var X=this.left.length;if(Y>X&&this.right.forEachInvertedInner(G,Y-X,Math.max(J,X)-X,Q+X)===!1||J<X&&this.left.forEachInvertedInner(G,Math.min(Y,X),J,Q)===!1)return!1},E.prototype.sliceInner=function(G,Y){if(G==0&&Y==this.length)return this;var J=this.left.length;return Y<=J?this.left.slice(G,Y):G>=J?this.right.slice(G-J,Y-J):this.left.slice(G,J).append(this.right.slice(0,Y-J))},E.prototype.leafAppend=function(G){var Y=this.right.leafAppend(G);if(Y)return new E(this.left,Y)},E.prototype.leafPrepend=function(G){var Y=this.left.leafPrepend(G);if(Y)return new E(Y,this.right)},E.prototype.appendInner=function(G){return this.left.depth>=Math.max(this.right.depth,G.depth)+1?new E(this.left,new E(this.right,G)):new E(this,G)},E}(RopeSequence),ropeSequence=RopeSequence;const max_empty_items=500;class Branch{constructor(E,U){this.items=E,this.eventCount=U}popEvent(E,U){if(this.eventCount==0)return null;let G=this.items.length;for(;;G--)if(this.items.get(G-1).selection){--G;break}let Y,J;U&&(Y=this.remapping(G,this.items.length),J=Y.maps.length);let Q=E.tr,X,Z,ee=[],te=[];return this.items.forEach((ne,oe)=>{if(!ne.step){Y||(Y=this.remapping(G,oe+1),J=Y.maps.length),J--,te.push(ne);return}if(Y){te.push(new Item(ne.map));let ce=ne.step.map(Y.slice(J)),pe;ce&&Q.maybeStep(ce).doc&&(pe=Q.mapping.maps[Q.mapping.maps.length-1],ee.push(new Item(pe,void 0,void 0,ee.length+te.length))),J--,pe&&Y.appendMap(pe,J)}else Q.maybeStep(ne.step);if(ne.selection)return X=Y?ne.selection.map(Y.slice(J)):ne.selection,Z=new Branch(this.items.slice(0,G).append(te.reverse().concat(ee)),this.eventCount-1),!1},this.items.length,0),{remaining:Z,transform:Q,selection:X}}addTransform(E,U,G,Y){let J=[],Q=this.eventCount,X=this.items,Z=!Y&&X.length?X.get(X.length-1):null;for(let te=0;te<E.steps.length;te++){let ne=E.steps[te].invert(E.docs[te]),oe=new Item(E.mapping.maps[te],ne,U),ce;(ce=Z&&Z.merge(oe))&&(oe=ce,te?J.pop():X=X.slice(0,X.length-1)),J.push(oe),U&&(Q++,U=void 0),Y||(Z=oe)}let ee=Q-G.depth;return ee>DEPTH_OVERFLOW&&(X=cutOffEvents(X,ee),Q-=ee),new Branch(X.append(J),Q)}remapping(E,U){let G=new Mapping;return this.items.forEach((Y,J)=>{let Q=Y.mirrorOffset!=null&&J-Y.mirrorOffset>=E?G.maps.length-Y.mirrorOffset:void 0;G.appendMap(Y.map,Q)},E,U),G}addMaps(E){return this.eventCount==0?this:new Branch(this.items.append(E.map(U=>new Item(U))),this.eventCount)}rebased(E,U){if(!this.eventCount)return this;let G=[],Y=Math.max(0,this.items.length-U),J=E.mapping,Q=E.steps.length,X=this.eventCount;this.items.forEach(oe=>{oe.selection&&X--},Y);let Z=U;this.items.forEach(oe=>{let ce=J.getMirror(--Z);if(ce==null)return;Q=Math.min(Q,ce);let pe=J.maps[ce];if(oe.step){let ye=E.steps[ce].invert(E.docs[ce]),Se=oe.selection&&oe.selection.map(J.slice(Z+1,ce));Se&&X++,G.push(new Item(pe,ye,Se))}else G.push(new Item(pe))},Y);let ee=[];for(let oe=U;oe<Q;oe++)ee.push(new Item(J.maps[oe]));let te=this.items.slice(0,Y).append(ee).append(G),ne=new Branch(te,X);return ne.emptyItemCount()>max_empty_items&&(ne=ne.compress(this.items.length-G.length)),ne}emptyItemCount(){let E=0;return this.items.forEach(U=>{U.step||E++}),E}compress(E=this.items.length){let U=this.remapping(0,E),G=U.maps.length,Y=[],J=0;return this.items.forEach((Q,X)=>{if(X>=E)Y.push(Q),Q.selection&&J++;else if(Q.step){let Z=Q.step.map(U.slice(G)),ee=Z&&Z.getMap();if(G--,ee&&U.appendMap(ee,G),Z){let te=Q.selection&&Q.selection.map(U.slice(G));te&&J++;let ne=new Item(ee.invert(),Z,te),oe,ce=Y.length-1;(oe=Y.length&&Y[ce].merge(ne))?Y[ce]=oe:Y.push(ne)}}else Q.map&&G--},this.items.length,0),new Branch(ropeSequence.from(Y.reverse()),J)}}Branch.empty=new Branch(ropeSequence.empty,0);function cutOffEvents(R,E){let U;return R.forEach((G,Y)=>{if(G.selection&&E--==0)return U=Y,!1}),R.slice(U)}class Item{constructor(E,U,G,Y){this.map=E,this.step=U,this.selection=G,this.mirrorOffset=Y}merge(E){if(this.step&&E.step&&!E.selection){let U=E.step.merge(this.step);if(U)return new Item(U.getMap().invert(),U,this.selection)}}}class HistoryState{constructor(E,U,G,Y){this.done=E,this.undone=U,this.prevRanges=G,this.prevTime=Y}}const DEPTH_OVERFLOW=20;function applyTransaction(R,E,U,G){let Y=U.getMeta(historyKey),J;if(Y)return Y.historyState;U.getMeta(closeHistoryKey)&&(R=new HistoryState(R.done,R.undone,null,0));let Q=U.getMeta("appendedTransaction");if(U.steps.length==0)return R;if(Q&&Q.getMeta(historyKey))return Q.getMeta(historyKey).redo?new HistoryState(R.done.addTransform(U,void 0,G,mustPreserveItems(E)),R.undone,rangesFor(U.mapping.maps[U.steps.length-1]),R.prevTime):new HistoryState(R.done,R.undone.addTransform(U,void 0,G,mustPreserveItems(E)),null,R.prevTime);if(U.getMeta("addToHistory")!==!1&&!(Q&&Q.getMeta("addToHistory")===!1)){let X=R.prevTime==0||!Q&&(R.prevTime<(U.time||0)-G.newGroupDelay||!isAdjacentTo(U,R.prevRanges)),Z=Q?mapRanges(R.prevRanges,U.mapping):rangesFor(U.mapping.maps[U.steps.length-1]);return new HistoryState(R.done.addTransform(U,X?E.selection.getBookmark():void 0,G,mustPreserveItems(E)),Branch.empty,Z,U.time)}else return(J=U.getMeta("rebased"))?new HistoryState(R.done.rebased(U,J),R.undone.rebased(U,J),mapRanges(R.prevRanges,U.mapping),R.prevTime):new HistoryState(R.done.addMaps(U.mapping.maps),R.undone.addMaps(U.mapping.maps),mapRanges(R.prevRanges,U.mapping),R.prevTime)}function isAdjacentTo(R,E){if(!E)return!1;if(!R.docChanged)return!0;let U=!1;return R.mapping.maps[0].forEach((G,Y)=>{for(let J=0;J<E.length;J+=2)G<=E[J+1]&&Y>=E[J]&&(U=!0)}),U}function rangesFor(R){let E=[];return R.forEach((U,G,Y,J)=>E.push(Y,J)),E}function mapRanges(R,E){if(!R)return null;let U=[];for(let G=0;G<R.length;G+=2){let Y=E.map(R[G],1),J=E.map(R[G+1],-1);Y<=J&&U.push(Y,J)}return U}function histTransaction(R,E,U,G){let Y=mustPreserveItems(E),J=historyKey.get(E).spec.config,Q=(G?R.undone:R.done).popEvent(E,Y);if(!Q)return;let X=Q.selection.resolve(Q.transform.doc),Z=(G?R.done:R.undone).addTransform(Q.transform,E.selection.getBookmark(),J,Y),ee=new HistoryState(G?Z:Q.remaining,G?Q.remaining:Z,null,0);U(Q.transform.setSelection(X).setMeta(historyKey,{redo:G,historyState:ee}).scrollIntoView())}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(R){let E=R.plugins;if(cachedPreserveItemsPlugins!=E){cachedPreserveItems=!1,cachedPreserveItemsPlugins=E;for(let U=0;U<E.length;U++)if(E[U].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(R={}){return R={depth:R.depth||100,newGroupDelay:R.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0)},apply(E,U,G){return applyTransaction(U,G,E,R)}},config:R,props:{handleDOMEvents:{beforeinput(E,U){let G=U.inputType,Y=G=="historyUndo"?undo:G=="historyRedo"?redo:null;return Y?(U.preventDefault(),Y(E.state,E.dispatch)):!1}}}})}const undo=(R,E)=>{let U=historyKey.getState(R);return!U||U.done.eventCount==0?!1:(E&&histTransaction(U,R,E,!1),!0)},redo=(R,E)=>{let U=historyKey.getState(R);return!U||U.undone.eventCount==0?!1:(E&&histTransaction(U,R,E,!0),!0)},History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:R,dispatch:E})=>undo(R,E),redo:()=>({state:R,dispatch:E})=>redo(R,E)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),HorizontalRule=Node.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:R}){return["hr",mergeAttributes(this.options.HTMLAttributes,R)]},addCommands(){return{setHorizontalRule:()=>({chain:R})=>R().insertContent({type:this.name}).command(({tr:E,dispatch:U})=>{var G;if(U){const{$to:Y}=E.selection,J=Y.end();if(Y.nodeAfter)E.setSelection(TextSelection.create(E.doc,Y.pos));else{const Q=(G=Y.parent.type.contentMatch.defaultType)===null||G===void 0?void 0:G.create();Q&&(E.insert(J,Q),E.setSelection(TextSelection.create(E.doc,J)))}E.scrollIntoView()}return!0}).run()}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,starPasteRegex=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,underscoreInputRegex=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,underscorePasteRegex=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:R=>R.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:R}){return["em",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setItalic:()=>({commands:R})=>R.setMark(this.name),toggleItalic:()=>({commands:R})=>R.toggleMark(this.name),unsetItalic:()=>({commands:R})=>R.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItem$1=Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:R}){return["li",mergeAttributes(this.options.HTMLAttributes,R),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ListItem=Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:R}){return["li",mergeAttributes(this.options.HTMLAttributes,R),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:R=>R.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:R}){return["span",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:R,commands:E})=>{const U=getMarkAttributes(R,this.type);return Object.entries(U).some(([,Y])=>!!Y)?!0:E.unsetMark(this.name)}}}}),inputRegex$1=/^(\d+)\.\s$/,OrderedList=Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:R=>R.hasAttribute("start")?parseInt(R.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:R}){const{start:E,...U}=R;return E===1?["ol",mergeAttributes(this.options.HTMLAttributes,U),0]:["ol",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{toggleOrderedList:()=>({commands:R,chain:E})=>this.options.keepAttributes?E().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():R.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let R=wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:E=>({start:+E[1]}),joinPredicate:(E,U)=>U.childCount+U.attrs.start===+E[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(R=wrappingInputRule({find:inputRegex$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:E=>({start:+E[1],...this.editor.getAttributes(TextStyle.name)}),joinPredicate:(E,U)=>U.childCount+U.attrs.start===+E[1],editor:this.editor})),[R]}}),Paragraph=Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:R}){return["p",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setParagraph:()=>({commands:R})=>R.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,pasteRegex=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:R=>R.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:R}){return["s",mergeAttributes(this.options.HTMLAttributes,R),0]},addCommands(){return{setStrike:()=>({commands:R})=>R.setMark(this.name),toggleStrike:()=>({commands:R})=>R.toggleMark(this.name),unsetStrike:()=>({commands:R})=>R.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var R,E,U,G,Y,J,Q,X,Z,ee,te,ne,oe,ce,pe,ye,Se,ge;const _e=[];return this.options.blockquote!==!1&&_e.push(Blockquote.configure((R=this.options)===null||R===void 0?void 0:R.blockquote)),this.options.bold!==!1&&_e.push(Bold.configure((E=this.options)===null||E===void 0?void 0:E.bold)),this.options.bulletList!==!1&&_e.push(BulletList.configure((U=this.options)===null||U===void 0?void 0:U.bulletList)),this.options.code!==!1&&_e.push(Code.configure((G=this.options)===null||G===void 0?void 0:G.code)),this.options.codeBlock!==!1&&_e.push(CodeBlock.configure((Y=this.options)===null||Y===void 0?void 0:Y.codeBlock)),this.options.document!==!1&&_e.push(Document.configure((J=this.options)===null||J===void 0?void 0:J.document)),this.options.dropcursor!==!1&&_e.push(Dropcursor.configure((Q=this.options)===null||Q===void 0?void 0:Q.dropcursor)),this.options.gapcursor!==!1&&_e.push(Gapcursor.configure((X=this.options)===null||X===void 0?void 0:X.gapcursor)),this.options.hardBreak!==!1&&_e.push(HardBreak.configure((Z=this.options)===null||Z===void 0?void 0:Z.hardBreak)),this.options.heading!==!1&&_e.push(Heading.configure((ee=this.options)===null||ee===void 0?void 0:ee.heading)),this.options.history!==!1&&_e.push(History.configure((te=this.options)===null||te===void 0?void 0:te.history)),this.options.horizontalRule!==!1&&_e.push(HorizontalRule.configure((ne=this.options)===null||ne===void 0?void 0:ne.horizontalRule)),this.options.italic!==!1&&_e.push(Italic.configure((oe=this.options)===null||oe===void 0?void 0:oe.italic)),this.options.listItem!==!1&&_e.push(ListItem$1.configure((ce=this.options)===null||ce===void 0?void 0:ce.listItem)),this.options.orderedList!==!1&&_e.push(OrderedList.configure((pe=this.options)===null||pe===void 0?void 0:pe.orderedList)),this.options.paragraph!==!1&&_e.push(Paragraph.configure((ye=this.options)===null||ye===void 0?void 0:ye.paragraph)),this.options.strike!==!1&&_e.push(Strike.configure((Se=this.options)===null||Se===void 0?void 0:Se.strike)),this.options.text!==!1&&_e.push(Text.configure((ge=this.options)===null||ge===void 0?void 0:ge.text)),_e}});var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(R,E){return R.concat([E+"-"+start,E+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(R,E){return R.concat([E,E+"-"+start,E+"-"+end])},[]),beforeRead="beforeRead",read$2="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read$2,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(R){return R?(R.nodeName||"").toLowerCase():null}function getWindow(R){if(R==null)return window;if(R.toString()!=="[object Window]"){var E=R.ownerDocument;return E&&E.defaultView||window}return R}function isElement$2(R){var E=getWindow(R).Element;return R instanceof E||R instanceof Element}function isHTMLElement(R){var E=getWindow(R).HTMLElement;return R instanceof E||R instanceof HTMLElement}function isShadowRoot(R){if(typeof ShadowRoot>"u")return!1;var E=getWindow(R).ShadowRoot;return R instanceof E||R instanceof ShadowRoot}function applyStyles(R){var E=R.state;Object.keys(E.elements).forEach(function(U){var G=E.styles[U]||{},Y=E.attributes[U]||{},J=E.elements[U];!isHTMLElement(J)||!getNodeName(J)||(Object.assign(J.style,G),Object.keys(Y).forEach(function(Q){var X=Y[Q];X===!1?J.removeAttribute(Q):J.setAttribute(Q,X===!0?"":X)}))})}function effect$2(R){var E=R.state,U={popper:{position:E.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(E.elements.popper.style,U.popper),E.styles=U,E.elements.arrow&&Object.assign(E.elements.arrow.style,U.arrow),function(){Object.keys(E.elements).forEach(function(G){var Y=E.elements[G],J=E.attributes[G]||{},Q=Object.keys(E.styles.hasOwnProperty(G)?E.styles[G]:U[G]),X=Q.reduce(function(Z,ee){return Z[ee]="",Z},{});!isHTMLElement(Y)||!getNodeName(Y)||(Object.assign(Y.style,X),Object.keys(J).forEach(function(Z){Y.removeAttribute(Z)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(R){return R.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getBoundingClientRect(R,E){E===void 0&&(E=!1);var U=R.getBoundingClientRect(),G=1,Y=1;if(isHTMLElement(R)&&E){var J=R.offsetHeight,Q=R.offsetWidth;Q>0&&(G=round$1(U.width)/Q||1),J>0&&(Y=round$1(U.height)/J||1)}return{width:U.width/G,height:U.height/Y,top:U.top/Y,right:U.right/G,bottom:U.bottom/Y,left:U.left/G,x:U.left/G,y:U.top/Y}}function getLayoutRect(R){var E=getBoundingClientRect(R),U=R.offsetWidth,G=R.offsetHeight;return Math.abs(E.width-U)<=1&&(U=E.width),Math.abs(E.height-G)<=1&&(G=E.height),{x:R.offsetLeft,y:R.offsetTop,width:U,height:G}}function contains(R,E){var U=E.getRootNode&&E.getRootNode();if(R.contains(E))return!0;if(U&&isShadowRoot(U)){var G=E;do{if(G&&R.isSameNode(G))return!0;G=G.parentNode||G.host}while(G)}return!1}function getComputedStyle$1(R){return getWindow(R).getComputedStyle(R)}function isTableElement(R){return["table","td","th"].indexOf(getNodeName(R))>=0}function getDocumentElement(R){return((isElement$2(R)?R.ownerDocument:R.document)||window.document).documentElement}function getParentNode(R){return getNodeName(R)==="html"?R:R.assignedSlot||R.parentNode||(isShadowRoot(R)?R.host:null)||getDocumentElement(R)}function getTrueOffsetParent(R){return!isHTMLElement(R)||getComputedStyle$1(R).position==="fixed"?null:R.offsetParent}function getContainingBlock(R){var E=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,U=navigator.userAgent.indexOf("Trident")!==-1;if(U&&isHTMLElement(R)){var G=getComputedStyle$1(R);if(G.position==="fixed")return null}var Y=getParentNode(R);for(isShadowRoot(Y)&&(Y=Y.host);isHTMLElement(Y)&&["html","body"].indexOf(getNodeName(Y))<0;){var J=getComputedStyle$1(Y);if(J.transform!=="none"||J.perspective!=="none"||J.contain==="paint"||["transform","perspective"].indexOf(J.willChange)!==-1||E&&J.willChange==="filter"||E&&J.filter&&J.filter!=="none")return Y;Y=Y.parentNode}return null}function getOffsetParent(R){for(var E=getWindow(R),U=getTrueOffsetParent(R);U&&isTableElement(U)&&getComputedStyle$1(U).position==="static";)U=getTrueOffsetParent(U);return U&&(getNodeName(U)==="html"||getNodeName(U)==="body"&&getComputedStyle$1(U).position==="static")?E:U||getContainingBlock(R)||E}function getMainAxisFromPlacement(R){return["top","bottom"].indexOf(R)>=0?"x":"y"}function within(R,E,U){return max(R,min(E,U))}function withinMaxClamp(R,E,U){var G=within(R,E,U);return G>U?U:G}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(R){return Object.assign({},getFreshSideObject(),R)}function expandToHashMap(R,E){return E.reduce(function(U,G){return U[G]=R,U},{})}var toPaddingObject=function(E,U){return E=typeof E=="function"?E(Object.assign({},U.rects,{placement:U.placement})):E,mergePaddingObject(typeof E!="number"?E:expandToHashMap(E,basePlacements))};function arrow(R){var E,U=R.state,G=R.name,Y=R.options,J=U.elements.arrow,Q=U.modifiersData.popperOffsets,X=getBasePlacement$1(U.placement),Z=getMainAxisFromPlacement(X),ee=[left,right].indexOf(X)>=0,te=ee?"height":"width";if(!(!J||!Q)){var ne=toPaddingObject(Y.padding,U),oe=getLayoutRect(J),ce=Z==="y"?top:left,pe=Z==="y"?bottom:right,ye=U.rects.reference[te]+U.rects.reference[Z]-Q[Z]-U.rects.popper[te],Se=Q[Z]-U.rects.reference[Z],ge=getOffsetParent(J),_e=ge?Z==="y"?ge.clientHeight||0:ge.clientWidth||0:0,Te=ye/2-Se/2,Ee=ne[ce],Re=_e-oe[te]-ne[pe],Ae=_e/2-oe[te]/2+Te,Ie=within(Ee,Ae,Re),Oe=Z;U.modifiersData[G]=(E={},E[Oe]=Ie,E.centerOffset=Ie-Ae,E)}}function effect$1(R){var E=R.state,U=R.options,G=U.element,Y=G===void 0?"[data-popper-arrow]":G;Y!=null&&(typeof Y=="string"&&(Y=E.elements.popper.querySelector(Y),!Y)||!contains(E.elements.popper,Y)||(E.elements.arrow=Y))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(R){return R.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(R){var E=R.x,U=R.y,G=window,Y=G.devicePixelRatio||1;return{x:round$1(E*Y)/Y||0,y:round$1(U*Y)/Y||0}}function mapToStyles(R){var E,U=R.popper,G=R.popperRect,Y=R.placement,J=R.variation,Q=R.offsets,X=R.position,Z=R.gpuAcceleration,ee=R.adaptive,te=R.roundOffsets,ne=R.isFixed,oe=Q.x,ce=oe===void 0?0:oe,pe=Q.y,ye=pe===void 0?0:pe,Se=typeof te=="function"?te({x:ce,y:ye}):{x:ce,y:ye};ce=Se.x,ye=Se.y;var ge=Q.hasOwnProperty("x"),_e=Q.hasOwnProperty("y"),Te=left,Ee=top,Re=window;if(ee){var Ae=getOffsetParent(U),Ie="clientHeight",Oe="clientWidth";if(Ae===getWindow(U)&&(Ae=getDocumentElement(U),getComputedStyle$1(Ae).position!=="static"&&X==="absolute"&&(Ie="scrollHeight",Oe="scrollWidth")),Ae=Ae,Y===top||(Y===left||Y===right)&&J===end){Ee=bottom;var Pe=ne&&Ae===Re&&Re.visualViewport?Re.visualViewport.height:Ae[Ie];ye-=Pe-G.height,ye*=Z?1:-1}if(Y===left||(Y===top||Y===bottom)&&J===end){Te=right;var Le=ne&&Ae===Re&&Re.visualViewport?Re.visualViewport.width:Ae[Oe];ce-=Le-G.width,ce*=Z?1:-1}}var Me=Object.assign({position:X},ee&&unsetSides),ue=te===!0?roundOffsetsByDPR({x:ce,y:ye}):{x:ce,y:ye};if(ce=ue.x,ye=ue.y,Z){var ae;return Object.assign({},Me,(ae={},ae[Ee]=_e?"0":"",ae[Te]=ge?"0":"",ae.transform=(Re.devicePixelRatio||1)<=1?"translate("+ce+"px, "+ye+"px)":"translate3d("+ce+"px, "+ye+"px, 0)",ae))}return Object.assign({},Me,(E={},E[Ee]=_e?ye+"px":"",E[Te]=ge?ce+"px":"",E.transform="",E))}function computeStyles(R){var E=R.state,U=R.options,G=U.gpuAcceleration,Y=G===void 0?!0:G,J=U.adaptive,Q=J===void 0?!0:J,X=U.roundOffsets,Z=X===void 0?!0:X,ee={placement:getBasePlacement$1(E.placement),variation:getVariation(E.placement),popper:E.elements.popper,popperRect:E.rects.popper,gpuAcceleration:Y,isFixed:E.options.strategy==="fixed"};E.modifiersData.popperOffsets!=null&&(E.styles.popper=Object.assign({},E.styles.popper,mapToStyles(Object.assign({},ee,{offsets:E.modifiersData.popperOffsets,position:E.options.strategy,adaptive:Q,roundOffsets:Z})))),E.modifiersData.arrow!=null&&(E.styles.arrow=Object.assign({},E.styles.arrow,mapToStyles(Object.assign({},ee,{offsets:E.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Z})))),E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-placement":E.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(R){var E=R.state,U=R.instance,G=R.options,Y=G.scroll,J=Y===void 0?!0:Y,Q=G.resize,X=Q===void 0?!0:Q,Z=getWindow(E.elements.popper),ee=[].concat(E.scrollParents.reference,E.scrollParents.popper);return J&&ee.forEach(function(te){te.addEventListener("scroll",U.update,passive)}),X&&Z.addEventListener("resize",U.update,passive),function(){J&&ee.forEach(function(te){te.removeEventListener("scroll",U.update,passive)}),X&&Z.removeEventListener("resize",U.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(R){return R.replace(/left|right|bottom|top/g,function(E){return hash$1[E]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(R){return R.replace(/start|end/g,function(E){return hash[E]})}function getWindowScroll(R){var E=getWindow(R),U=E.pageXOffset,G=E.pageYOffset;return{scrollLeft:U,scrollTop:G}}function getWindowScrollBarX(R){return getBoundingClientRect(getDocumentElement(R)).left+getWindowScroll(R).scrollLeft}function getViewportRect(R){var E=getWindow(R),U=getDocumentElement(R),G=E.visualViewport,Y=U.clientWidth,J=U.clientHeight,Q=0,X=0;return G&&(Y=G.width,J=G.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Q=G.offsetLeft,X=G.offsetTop)),{width:Y,height:J,x:Q+getWindowScrollBarX(R),y:X}}function getDocumentRect(R){var E,U=getDocumentElement(R),G=getWindowScroll(R),Y=(E=R.ownerDocument)==null?void 0:E.body,J=max(U.scrollWidth,U.clientWidth,Y?Y.scrollWidth:0,Y?Y.clientWidth:0),Q=max(U.scrollHeight,U.clientHeight,Y?Y.scrollHeight:0,Y?Y.clientHeight:0),X=-G.scrollLeft+getWindowScrollBarX(R),Z=-G.scrollTop;return getComputedStyle$1(Y||U).direction==="rtl"&&(X+=max(U.clientWidth,Y?Y.clientWidth:0)-J),{width:J,height:Q,x:X,y:Z}}function isScrollParent(R){var E=getComputedStyle$1(R),U=E.overflow,G=E.overflowX,Y=E.overflowY;return/auto|scroll|overlay|hidden/.test(U+Y+G)}function getScrollParent(R){return["html","body","#document"].indexOf(getNodeName(R))>=0?R.ownerDocument.body:isHTMLElement(R)&&isScrollParent(R)?R:getScrollParent(getParentNode(R))}function listScrollParents(R,E){var U;E===void 0&&(E=[]);var G=getScrollParent(R),Y=G===((U=R.ownerDocument)==null?void 0:U.body),J=getWindow(G),Q=Y?[J].concat(J.visualViewport||[],isScrollParent(G)?G:[]):G,X=E.concat(Q);return Y?X:X.concat(listScrollParents(getParentNode(Q)))}function rectToClientRect(R){return Object.assign({},R,{left:R.x,top:R.y,right:R.x+R.width,bottom:R.y+R.height})}function getInnerBoundingClientRect(R){var E=getBoundingClientRect(R);return E.top=E.top+R.clientTop,E.left=E.left+R.clientLeft,E.bottom=E.top+R.clientHeight,E.right=E.left+R.clientWidth,E.width=R.clientWidth,E.height=R.clientHeight,E.x=E.left,E.y=E.top,E}function getClientRectFromMixedType(R,E){return E===viewport?rectToClientRect(getViewportRect(R)):isElement$2(E)?getInnerBoundingClientRect(E):rectToClientRect(getDocumentRect(getDocumentElement(R)))}function getClippingParents(R){var E=listScrollParents(getParentNode(R)),U=["absolute","fixed"].indexOf(getComputedStyle$1(R).position)>=0,G=U&&isHTMLElement(R)?getOffsetParent(R):R;return isElement$2(G)?E.filter(function(Y){return isElement$2(Y)&&contains(Y,G)&&getNodeName(Y)!=="body"}):[]}function getClippingRect(R,E,U){var G=E==="clippingParents"?getClippingParents(R):[].concat(E),Y=[].concat(G,[U]),J=Y[0],Q=Y.reduce(function(X,Z){var ee=getClientRectFromMixedType(R,Z);return X.top=max(ee.top,X.top),X.right=min(ee.right,X.right),X.bottom=min(ee.bottom,X.bottom),X.left=max(ee.left,X.left),X},getClientRectFromMixedType(R,J));return Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,Q.x=Q.left,Q.y=Q.top,Q}function computeOffsets(R){var E=R.reference,U=R.element,G=R.placement,Y=G?getBasePlacement$1(G):null,J=G?getVariation(G):null,Q=E.x+E.width/2-U.width/2,X=E.y+E.height/2-U.height/2,Z;switch(Y){case top:Z={x:Q,y:E.y-U.height};break;case bottom:Z={x:Q,y:E.y+E.height};break;case right:Z={x:E.x+E.width,y:X};break;case left:Z={x:E.x-U.width,y:X};break;default:Z={x:E.x,y:E.y}}var ee=Y?getMainAxisFromPlacement(Y):null;if(ee!=null){var te=ee==="y"?"height":"width";switch(J){case start:Z[ee]=Z[ee]-(E[te]/2-U[te]/2);break;case end:Z[ee]=Z[ee]+(E[te]/2-U[te]/2);break}}return Z}function detectOverflow(R,E){E===void 0&&(E={});var U=E,G=U.placement,Y=G===void 0?R.placement:G,J=U.boundary,Q=J===void 0?clippingParents:J,X=U.rootBoundary,Z=X===void 0?viewport:X,ee=U.elementContext,te=ee===void 0?popper:ee,ne=U.altBoundary,oe=ne===void 0?!1:ne,ce=U.padding,pe=ce===void 0?0:ce,ye=mergePaddingObject(typeof pe!="number"?pe:expandToHashMap(pe,basePlacements)),Se=te===popper?reference:popper,ge=R.rects.popper,_e=R.elements[oe?Se:te],Te=getClippingRect(isElement$2(_e)?_e:_e.contextElement||getDocumentElement(R.elements.popper),Q,Z),Ee=getBoundingClientRect(R.elements.reference),Re=computeOffsets({reference:Ee,element:ge,strategy:"absolute",placement:Y}),Ae=rectToClientRect(Object.assign({},ge,Re)),Ie=te===popper?Ae:Ee,Oe={top:Te.top-Ie.top+ye.top,bottom:Ie.bottom-Te.bottom+ye.bottom,left:Te.left-Ie.left+ye.left,right:Ie.right-Te.right+ye.right},Pe=R.modifiersData.offset;if(te===popper&&Pe){var Le=Pe[Y];Object.keys(Oe).forEach(function(Me){var ue=[right,bottom].indexOf(Me)>=0?1:-1,ae=[top,bottom].indexOf(Me)>=0?"y":"x";Oe[Me]+=Le[ae]*ue})}return Oe}function computeAutoPlacement(R,E){E===void 0&&(E={});var U=E,G=U.placement,Y=U.boundary,J=U.rootBoundary,Q=U.padding,X=U.flipVariations,Z=U.allowedAutoPlacements,ee=Z===void 0?placements:Z,te=getVariation(G),ne=te?X?variationPlacements:variationPlacements.filter(function(pe){return getVariation(pe)===te}):basePlacements,oe=ne.filter(function(pe){return ee.indexOf(pe)>=0});oe.length===0&&(oe=ne);var ce=oe.reduce(function(pe,ye){return pe[ye]=detectOverflow(R,{placement:ye,boundary:Y,rootBoundary:J,padding:Q})[getBasePlacement$1(ye)],pe},{});return Object.keys(ce).sort(function(pe,ye){return ce[pe]-ce[ye]})}function getExpandedFallbackPlacements(R){if(getBasePlacement$1(R)===auto)return[];var E=getOppositePlacement(R);return[getOppositeVariationPlacement(R),E,getOppositeVariationPlacement(E)]}function flip(R){var E=R.state,U=R.options,G=R.name;if(!E.modifiersData[G]._skip){for(var Y=U.mainAxis,J=Y===void 0?!0:Y,Q=U.altAxis,X=Q===void 0?!0:Q,Z=U.fallbackPlacements,ee=U.padding,te=U.boundary,ne=U.rootBoundary,oe=U.altBoundary,ce=U.flipVariations,pe=ce===void 0?!0:ce,ye=U.allowedAutoPlacements,Se=E.options.placement,ge=getBasePlacement$1(Se),_e=ge===Se,Te=Z||(_e||!pe?[getOppositePlacement(Se)]:getExpandedFallbackPlacements(Se)),Ee=[Se].concat(Te).reduce(function(Fe,we){return Fe.concat(getBasePlacement$1(we)===auto?computeAutoPlacement(E,{placement:we,boundary:te,rootBoundary:ne,padding:ee,flipVariations:pe,allowedAutoPlacements:ye}):we)},[]),Re=E.rects.reference,Ae=E.rects.popper,Ie=new Map,Oe=!0,Pe=Ee[0],Le=0;Le<Ee.length;Le++){var Me=Ee[Le],ue=getBasePlacement$1(Me),ae=getVariation(Me)===start,se=[top,bottom].indexOf(ue)>=0,le=se?"width":"height",fe=detectOverflow(E,{placement:Me,boundary:te,rootBoundary:ne,altBoundary:oe,padding:ee}),be=se?ae?right:left:ae?bottom:top;Re[le]>Ae[le]&&(be=getOppositePlacement(be));var ve=getOppositePlacement(be),xe=[];if(J&&xe.push(fe[ue]<=0),X&&xe.push(fe[be]<=0,fe[ve]<=0),xe.every(function(Fe){return Fe})){Pe=Me,Oe=!1;break}Ie.set(Me,xe)}if(Oe)for(var he=pe?3:1,me=function(we){var ke=Ee.find(function(Ne){var He=Ie.get(Ne);if(He)return He.slice(0,we).every(function(Ue){return Ue})});if(ke)return Pe=ke,"break"},de=he;de>0;de--){var Ce=me(de);if(Ce==="break")break}E.placement!==Pe&&(E.modifiersData[G]._skip=!0,E.placement=Pe,E.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(R,E,U){return U===void 0&&(U={x:0,y:0}),{top:R.top-E.height-U.y,right:R.right-E.width+U.x,bottom:R.bottom-E.height+U.y,left:R.left-E.width-U.x}}function isAnySideFullyClipped(R){return[top,right,bottom,left].some(function(E){return R[E]>=0})}function hide(R){var E=R.state,U=R.name,G=E.rects.reference,Y=E.rects.popper,J=E.modifiersData.preventOverflow,Q=detectOverflow(E,{elementContext:"reference"}),X=detectOverflow(E,{altBoundary:!0}),Z=getSideOffsets(Q,G),ee=getSideOffsets(X,Y,J),te=isAnySideFullyClipped(Z),ne=isAnySideFullyClipped(ee);E.modifiersData[U]={referenceClippingOffsets:Z,popperEscapeOffsets:ee,isReferenceHidden:te,hasPopperEscaped:ne},E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-reference-hidden":te,"data-popper-escaped":ne})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(R,E,U){var G=getBasePlacement$1(R),Y=[left,top].indexOf(G)>=0?-1:1,J=typeof U=="function"?U(Object.assign({},E,{placement:R})):U,Q=J[0],X=J[1];return Q=Q||0,X=(X||0)*Y,[left,right].indexOf(G)>=0?{x:X,y:Q}:{x:Q,y:X}}function offset(R){var E=R.state,U=R.options,G=R.name,Y=U.offset,J=Y===void 0?[0,0]:Y,Q=placements.reduce(function(te,ne){return te[ne]=distanceAndSkiddingToXY(ne,E.rects,J),te},{}),X=Q[E.placement],Z=X.x,ee=X.y;E.modifiersData.popperOffsets!=null&&(E.modifiersData.popperOffsets.x+=Z,E.modifiersData.popperOffsets.y+=ee),E.modifiersData[G]=Q}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(R){var E=R.state,U=R.name;E.modifiersData[U]=computeOffsets({reference:E.rects.reference,element:E.rects.popper,strategy:"absolute",placement:E.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(R){return R==="x"?"y":"x"}function preventOverflow(R){var E=R.state,U=R.options,G=R.name,Y=U.mainAxis,J=Y===void 0?!0:Y,Q=U.altAxis,X=Q===void 0?!1:Q,Z=U.boundary,ee=U.rootBoundary,te=U.altBoundary,ne=U.padding,oe=U.tether,ce=oe===void 0?!0:oe,pe=U.tetherOffset,ye=pe===void 0?0:pe,Se=detectOverflow(E,{boundary:Z,rootBoundary:ee,padding:ne,altBoundary:te}),ge=getBasePlacement$1(E.placement),_e=getVariation(E.placement),Te=!_e,Ee=getMainAxisFromPlacement(ge),Re=getAltAxis(Ee),Ae=E.modifiersData.popperOffsets,Ie=E.rects.reference,Oe=E.rects.popper,Pe=typeof ye=="function"?ye(Object.assign({},E.rects,{placement:E.placement})):ye,Le=typeof Pe=="number"?{mainAxis:Pe,altAxis:Pe}:Object.assign({mainAxis:0,altAxis:0},Pe),Me=E.modifiersData.offset?E.modifiersData.offset[E.placement]:null,ue={x:0,y:0};if(!!Ae){if(J){var ae,se=Ee==="y"?top:left,le=Ee==="y"?bottom:right,fe=Ee==="y"?"height":"width",be=Ae[Ee],ve=be+Se[se],xe=be-Se[le],he=ce?-Oe[fe]/2:0,me=_e===start?Ie[fe]:Oe[fe],de=_e===start?-Oe[fe]:-Ie[fe],Ce=E.elements.arrow,Fe=ce&&Ce?getLayoutRect(Ce):{width:0,height:0},we=E.modifiersData["arrow#persistent"]?E.modifiersData["arrow#persistent"].padding:getFreshSideObject(),ke=we[se],Ne=we[le],He=within(0,Ie[fe],Fe[fe]),Ue=Te?Ie[fe]/2-he-He-ke-Le.mainAxis:me-He-ke-Le.mainAxis,Ge=Te?-Ie[fe]/2+he+He+Ne+Le.mainAxis:de+He+Ne+Le.mainAxis,De=E.elements.arrow&&getOffsetParent(E.elements.arrow),$e=De?Ee==="y"?De.clientTop||0:De.clientLeft||0:0,Be=(ae=Me==null?void 0:Me[Ee])!=null?ae:0,je=be+Ue-Be-$e,ze=be+Ge-Be,We=within(ce?min(ve,je):ve,be,ce?max(xe,ze):xe);Ae[Ee]=We,ue[Ee]=We-be}if(X){var Ke,Ye=Ee==="x"?top:left,Je=Ee==="x"?bottom:right,Qe=Ae[Re],qe=Re==="y"?"height":"width",rt=Qe+Se[Ye],tt=Qe-Se[Je],Xe=[top,left].indexOf(ge)!==-1,it=(Ke=Me==null?void 0:Me[Re])!=null?Ke:0,st=Xe?rt:Qe-Ie[qe]-Oe[qe]-it+Le.altAxis,nt=Xe?Qe+Ie[qe]+Oe[qe]-it-Le.altAxis:tt,ot=ce&&Xe?withinMaxClamp(st,Qe,nt):within(ce?st:rt,Qe,ce?nt:tt);Ae[Re]=ot,ue[Re]=ot-Qe}E.modifiersData[G]=ue}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(R){return{scrollLeft:R.scrollLeft,scrollTop:R.scrollTop}}function getNodeScroll(R){return R===getWindow(R)||!isHTMLElement(R)?getWindowScroll(R):getHTMLElementScroll(R)}function isElementScaled(R){var E=R.getBoundingClientRect(),U=round$1(E.width)/R.offsetWidth||1,G=round$1(E.height)/R.offsetHeight||1;return U!==1||G!==1}function getCompositeRect(R,E,U){U===void 0&&(U=!1);var G=isHTMLElement(E),Y=isHTMLElement(E)&&isElementScaled(E),J=getDocumentElement(E),Q=getBoundingClientRect(R,Y),X={scrollLeft:0,scrollTop:0},Z={x:0,y:0};return(G||!G&&!U)&&((getNodeName(E)!=="body"||isScrollParent(J))&&(X=getNodeScroll(E)),isHTMLElement(E)?(Z=getBoundingClientRect(E,!0),Z.x+=E.clientLeft,Z.y+=E.clientTop):J&&(Z.x=getWindowScrollBarX(J))),{x:Q.left+X.scrollLeft-Z.x,y:Q.top+X.scrollTop-Z.y,width:Q.width,height:Q.height}}function order(R){var E=new Map,U=new Set,G=[];R.forEach(function(J){E.set(J.name,J)});function Y(J){U.add(J.name);var Q=[].concat(J.requires||[],J.requiresIfExists||[]);Q.forEach(function(X){if(!U.has(X)){var Z=E.get(X);Z&&Y(Z)}}),G.push(J)}return R.forEach(function(J){U.has(J.name)||Y(J)}),G}function orderModifiers(R){var E=order(R);return modifierPhases.reduce(function(U,G){return U.concat(E.filter(function(Y){return Y.phase===G}))},[])}function debounce$1(R){var E;return function(){return E||(E=new Promise(function(U){Promise.resolve().then(function(){E=void 0,U(R())})})),E}}function mergeByName(R){var E=R.reduce(function(U,G){var Y=U[G.name];return U[G.name]=Y?Object.assign({},Y,G,{options:Object.assign({},Y.options,G.options),data:Object.assign({},Y.data,G.data)}):G,U},{});return Object.keys(E).map(function(U){return E[U]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var R=arguments.length,E=new Array(R),U=0;U<R;U++)E[U]=arguments[U];return!E.some(function(G){return!(G&&typeof G.getBoundingClientRect=="function")})}function popperGenerator(R){R===void 0&&(R={});var E=R,U=E.defaultModifiers,G=U===void 0?[]:U,Y=E.defaultOptions,J=Y===void 0?DEFAULT_OPTIONS:Y;return function(X,Z,ee){ee===void 0&&(ee=J);var te={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,J),modifiersData:{},elements:{reference:X,popper:Z},attributes:{},styles:{}},ne=[],oe=!1,ce={state:te,setOptions:function(ge){var _e=typeof ge=="function"?ge(te.options):ge;ye(),te.options=Object.assign({},J,te.options,_e),te.scrollParents={reference:isElement$2(X)?listScrollParents(X):X.contextElement?listScrollParents(X.contextElement):[],popper:listScrollParents(Z)};var Te=orderModifiers(mergeByName([].concat(G,te.options.modifiers)));return te.orderedModifiers=Te.filter(function(Ee){return Ee.enabled}),pe(),ce.update()},forceUpdate:function(){if(!oe){var ge=te.elements,_e=ge.reference,Te=ge.popper;if(!!areValidElements(_e,Te)){te.rects={reference:getCompositeRect(_e,getOffsetParent(Te),te.options.strategy==="fixed"),popper:getLayoutRect(Te)},te.reset=!1,te.placement=te.options.placement,te.orderedModifiers.forEach(function(Le){return te.modifiersData[Le.name]=Object.assign({},Le.data)});for(var Ee=0;Ee<te.orderedModifiers.length;Ee++){if(te.reset===!0){te.reset=!1,Ee=-1;continue}var Re=te.orderedModifiers[Ee],Ae=Re.fn,Ie=Re.options,Oe=Ie===void 0?{}:Ie,Pe=Re.name;typeof Ae=="function"&&(te=Ae({state:te,options:Oe,name:Pe,instance:ce})||te)}}}},update:debounce$1(function(){return new Promise(function(Se){ce.forceUpdate(),Se(te)})}),destroy:function(){ye(),oe=!0}};if(!areValidElements(X,Z))return ce;ce.setOptions(ee).then(function(Se){!oe&&ee.onFirstUpdate&&ee.onFirstUpdate(Se)});function pe(){te.orderedModifiers.forEach(function(Se){var ge=Se.name,_e=Se.options,Te=_e===void 0?{}:_e,Ee=Se.effect;if(typeof Ee=="function"){var Re=Ee({state:te,name:ge,instance:ce,options:Te}),Ae=function(){};ne.push(Re||Ae)}})}function ye(){ne.forEach(function(Se){return Se()}),ne=[]}return ce}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function(){return document.body};function getValueAtIndexOrReturn(R,E,U){if(Array.isArray(R)){var G=R[E];return G==null?Array.isArray(U)?U[E]:U:G}return R}function isType(R,E){var U={}.toString.call(R);return U.indexOf("[object")===0&&U.indexOf(E+"]")>-1}function invokeWithArgsOrReturn(R,E){return typeof R=="function"?R.apply(void 0,E):R}function debounce(R,E){if(E===0)return R;var U;return function(G){clearTimeout(U),U=setTimeout(function(){R(G)},E)}}function splitBySpaces(R){return R.split(/\s+/).filter(Boolean)}function normalizeToArray(R){return[].concat(R)}function pushIfUnique(R,E){R.indexOf(E)===-1&&R.push(E)}function unique(R){return R.filter(function(E,U){return R.indexOf(E)===U})}function getBasePlacement(R){return R.split("-")[0]}function arrayFrom(R){return[].slice.call(R)}function removeUndefinedProps(R){return Object.keys(R).reduce(function(E,U){return R[U]!==void 0&&(E[U]=R[U]),E},{})}function div(){return document.createElement("div")}function isElement$1(R){return["Element","Fragment"].some(function(E){return isType(R,E)})}function isNodeList(R){return isType(R,"NodeList")}function isMouseEvent(R){return isType(R,"MouseEvent")}function isReferenceElement(R){return!!(R&&R._tippy&&R._tippy.reference===R)}function getArrayOfElements(R){return isElement$1(R)?[R]:isNodeList(R)?arrayFrom(R):Array.isArray(R)?R:arrayFrom(document.querySelectorAll(R))}function setTransitionDuration(R,E){R.forEach(function(U){U&&(U.style.transitionDuration=E+"ms")})}function setVisibilityState(R,E){R.forEach(function(U){U&&U.setAttribute("data-state",E)})}function getOwnerDocument(R){var E,U=normalizeToArray(R),G=U[0];return G!=null&&(E=G.ownerDocument)!=null&&E.body?G.ownerDocument:document}function isCursorOutsideInteractiveBorder(R,E){var U=E.clientX,G=E.clientY;return R.every(function(Y){var J=Y.popperRect,Q=Y.popperState,X=Y.props,Z=X.interactiveBorder,ee=getBasePlacement(Q.placement),te=Q.modifiersData.offset;if(!te)return!0;var ne=ee==="bottom"?te.top.y:0,oe=ee==="top"?te.bottom.y:0,ce=ee==="right"?te.left.x:0,pe=ee==="left"?te.right.x:0,ye=J.top-G+ne>Z,Se=G-J.bottom-oe>Z,ge=J.left-U+ce>Z,_e=U-J.right-pe>Z;return ye||Se||ge||_e})}function updateTransitionEndListener(R,E,U){var G=E+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(Y){R[G](Y,U)})}function actualContains(R,E){for(var U=E;U;){var G;if(R.contains(U))return!0;U=U.getRootNode==null||(G=U.getRootNode())==null?void 0:G.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var R=performance.now();R-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=R}function onWindowBlur(){var R=document.activeElement;if(isReferenceElement(R)){var E=R._tippy;R.blur&&!E.state.isVisible&&R.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function(E){var U=Object.keys(E);U.forEach(function(G){defaultProps[G]=E[G]})};function getExtendedPassedProps(R){var E=R.plugins||[],U=E.reduce(function(G,Y){var J=Y.name,Q=Y.defaultValue;if(J){var X;G[J]=R[J]!==void 0?R[J]:(X=defaultProps[J])!=null?X:Q}return G},{});return Object.assign({},R,U)}function getDataAttributeProps(R,E){var U=E?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:E}))):defaultKeys,G=U.reduce(function(Y,J){var Q=(R.getAttribute("data-tippy-"+J)||"").trim();if(!Q)return Y;if(J==="content")Y[J]=Q;else try{Y[J]=JSON.parse(Q)}catch{Y[J]=Q}return Y},{});return G}function evaluateProps(R,E){var U=Object.assign({},E,{content:invokeWithArgsOrReturn(E.content,[R])},E.ignoreAttributes?{}:getDataAttributeProps(R,E.plugins));return U.aria=Object.assign({},defaultProps.aria,U.aria),U.aria={expanded:U.aria.expanded==="auto"?E.interactive:U.aria.expanded,content:U.aria.content==="auto"?E.interactive?null:"describedby":U.aria.content},U}var innerHTML=function(){return"innerHTML"};function dangerouslySetInnerHTML(R,E){R[innerHTML()]=E}function createArrowElement(R){var E=div();return R===!0?E.className=ARROW_CLASS:(E.className=SVG_ARROW_CLASS,isElement$1(R)?E.appendChild(R):dangerouslySetInnerHTML(E,R)),E}function setContent(R,E){isElement$1(E.content)?(dangerouslySetInnerHTML(R,""),R.appendChild(E.content)):typeof E.content!="function"&&(E.allowHTML?dangerouslySetInnerHTML(R,E.content):R.textContent=E.content)}function getChildren(R){var E=R.firstElementChild,U=arrayFrom(E.children);return{box:E,content:U.find(function(G){return G.classList.contains(CONTENT_CLASS)}),arrow:U.find(function(G){return G.classList.contains(ARROW_CLASS)||G.classList.contains(SVG_ARROW_CLASS)}),backdrop:U.find(function(G){return G.classList.contains(BACKDROP_CLASS)})}}function render(R){var E=div(),U=div();U.className=BOX_CLASS,U.setAttribute("data-state","hidden"),U.setAttribute("tabindex","-1");var G=div();G.className=CONTENT_CLASS,G.setAttribute("data-state","hidden"),setContent(G,R.props),E.appendChild(U),U.appendChild(G),Y(R.props,R.props);function Y(J,Q){var X=getChildren(E),Z=X.box,ee=X.content,te=X.arrow;Q.theme?Z.setAttribute("data-theme",Q.theme):Z.removeAttribute("data-theme"),typeof Q.animation=="string"?Z.setAttribute("data-animation",Q.animation):Z.removeAttribute("data-animation"),Q.inertia?Z.setAttribute("data-inertia",""):Z.removeAttribute("data-inertia"),Z.style.maxWidth=typeof Q.maxWidth=="number"?Q.maxWidth+"px":Q.maxWidth,Q.role?Z.setAttribute("role",Q.role):Z.removeAttribute("role"),(J.content!==Q.content||J.allowHTML!==Q.allowHTML)&&setContent(ee,R.props),Q.arrow?te?J.arrow!==Q.arrow&&(Z.removeChild(te),Z.appendChild(createArrowElement(Q.arrow))):Z.appendChild(createArrowElement(Q.arrow)):te&&Z.removeChild(te)}return{popper:E,onUpdate:Y}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(R,E){var U=evaluateProps(R,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(E)))),G,Y,J,Q=!1,X=!1,Z=!1,ee=!1,te,ne,oe,ce=[],pe=debounce(je,U.interactiveDebounce),ye,Se=idCounter++,ge=null,_e=unique(U.plugins),Te={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},Ee={id:Se,reference:R,popper:div(),popperInstance:ge,props:U,state:Te,plugins:_e,clearDelayTimeouts:st,setProps:nt,setContent:ot,show:pt,hide:dt,hideWithInteractivity:Et,enable:Xe,disable:it,unmount:Ct,destroy:ht};if(!U.render)return Ee;var Re=U.render(Ee),Ae=Re.popper,Ie=Re.onUpdate;Ae.setAttribute("data-tippy-root",""),Ae.id="tippy-"+Ee.id,Ee.popper=Ae,R._tippy=Ee,Ae._tippy=Ee;var Oe=_e.map(function(Ve){return Ve.fn(Ee)}),Pe=R.hasAttribute("aria-expanded");return De(),he(),be(),ve("onCreate",[Ee]),U.showOnCreate&&rt(),Ae.addEventListener("mouseenter",function(){Ee.props.interactive&&Ee.state.isVisible&&Ee.clearDelayTimeouts()}),Ae.addEventListener("mouseleave",function(){Ee.props.interactive&&Ee.props.trigger.indexOf("mouseenter")>=0&&se().addEventListener("mousemove",pe)}),Ee;function Le(){var Ve=Ee.props.touch;return Array.isArray(Ve)?Ve:[Ve,0]}function Me(){return Le()[0]==="hold"}function ue(){var Ve;return!!((Ve=Ee.props.render)!=null&&Ve.$$tippy)}function ae(){return ye||R}function se(){var Ve=ae().parentNode;return Ve?getOwnerDocument(Ve):document}function le(){return getChildren(Ae)}function fe(Ve){return Ee.state.isMounted&&!Ee.state.isVisible||currentInput.isTouch||te&&te.type==="focus"?0:getValueAtIndexOrReturn(Ee.props.delay,Ve?0:1,defaultProps.delay)}function be(Ve){Ve===void 0&&(Ve=!1),Ae.style.pointerEvents=Ee.props.interactive&&!Ve?"":"none",Ae.style.zIndex=""+Ee.props.zIndex}function ve(Ve,et,Ze){if(Ze===void 0&&(Ze=!0),Oe.forEach(function(at){at[Ve]&&at[Ve].apply(at,et)}),Ze){var ut;(ut=Ee.props)[Ve].apply(ut,et)}}function xe(){var Ve=Ee.props.aria;if(!!Ve.content){var et="aria-"+Ve.content,Ze=Ae.id,ut=normalizeToArray(Ee.props.triggerTarget||R);ut.forEach(function(at){var ct=at.getAttribute(et);if(Ee.state.isVisible)at.setAttribute(et,ct?ct+" "+Ze:Ze);else{var wt=ct&&ct.replace(Ze,"").trim();wt?at.setAttribute(et,wt):at.removeAttribute(et)}})}}function he(){if(!(Pe||!Ee.props.aria.expanded)){var Ve=normalizeToArray(Ee.props.triggerTarget||R);Ve.forEach(function(et){Ee.props.interactive?et.setAttribute("aria-expanded",Ee.state.isVisible&&et===ae()?"true":"false"):et.removeAttribute("aria-expanded")})}}function me(){se().removeEventListener("mousemove",pe),mouseMoveListeners=mouseMoveListeners.filter(function(Ve){return Ve!==pe})}function de(Ve){if(!(currentInput.isTouch&&(Z||Ve.type==="mousedown"))){var et=Ve.composedPath&&Ve.composedPath()[0]||Ve.target;if(!(Ee.props.interactive&&actualContains(Ae,et))){if(normalizeToArray(Ee.props.triggerTarget||R).some(function(Ze){return actualContains(Ze,et)})){if(currentInput.isTouch||Ee.state.isVisible&&Ee.props.trigger.indexOf("click")>=0)return}else ve("onClickOutside",[Ee,Ve]);Ee.props.hideOnClick===!0&&(Ee.clearDelayTimeouts(),Ee.hide(),X=!0,setTimeout(function(){X=!1}),Ee.state.isMounted||ke())}}}function Ce(){Z=!0}function Fe(){Z=!1}function we(){var Ve=se();Ve.addEventListener("mousedown",de,!0),Ve.addEventListener("touchend",de,TOUCH_OPTIONS),Ve.addEventListener("touchstart",Fe,TOUCH_OPTIONS),Ve.addEventListener("touchmove",Ce,TOUCH_OPTIONS)}function ke(){var Ve=se();Ve.removeEventListener("mousedown",de,!0),Ve.removeEventListener("touchend",de,TOUCH_OPTIONS),Ve.removeEventListener("touchstart",Fe,TOUCH_OPTIONS),Ve.removeEventListener("touchmove",Ce,TOUCH_OPTIONS)}function Ne(Ve,et){Ue(Ve,function(){!Ee.state.isVisible&&Ae.parentNode&&Ae.parentNode.contains(Ae)&&et()})}function He(Ve,et){Ue(Ve,et)}function Ue(Ve,et){var Ze=le().box;function ut(at){at.target===Ze&&(updateTransitionEndListener(Ze,"remove",ut),et())}if(Ve===0)return et();updateTransitionEndListener(Ze,"remove",ne),updateTransitionEndListener(Ze,"add",ut),ne=ut}function Ge(Ve,et,Ze){Ze===void 0&&(Ze=!1);var ut=normalizeToArray(Ee.props.triggerTarget||R);ut.forEach(function(at){at.addEventListener(Ve,et,Ze),ce.push({node:at,eventType:Ve,handler:et,options:Ze})})}function De(){Me()&&(Ge("touchstart",Be,{passive:!0}),Ge("touchend",ze,{passive:!0})),splitBySpaces(Ee.props.trigger).forEach(function(Ve){if(Ve!=="manual")switch(Ge(Ve,Be),Ve){case"mouseenter":Ge("mouseleave",ze);break;case"focus":Ge(isIE11?"focusout":"blur",We);break;case"focusin":Ge("focusout",We);break}})}function $e(){ce.forEach(function(Ve){var et=Ve.node,Ze=Ve.eventType,ut=Ve.handler,at=Ve.options;et.removeEventListener(Ze,ut,at)}),ce=[]}function Be(Ve){var et,Ze=!1;if(!(!Ee.state.isEnabled||Ke(Ve)||X)){var ut=((et=te)==null?void 0:et.type)==="focus";te=Ve,ye=Ve.currentTarget,he(),!Ee.state.isVisible&&isMouseEvent(Ve)&&mouseMoveListeners.forEach(function(at){return at(Ve)}),Ve.type==="click"&&(Ee.props.trigger.indexOf("mouseenter")<0||Q)&&Ee.props.hideOnClick!==!1&&Ee.state.isVisible?Ze=!0:rt(Ve),Ve.type==="click"&&(Q=!Ze),Ze&&!ut&&tt(Ve)}}function je(Ve){var et=Ve.target,Ze=ae().contains(et)||Ae.contains(et);if(!(Ve.type==="mousemove"&&Ze)){var ut=qe().concat(Ae).map(function(at){var ct,wt=at._tippy,Tt=(ct=wt.popperInstance)==null?void 0:ct.state;return Tt?{popperRect:at.getBoundingClientRect(),popperState:Tt,props:U}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(ut,Ve)&&(me(),tt(Ve))}}function ze(Ve){var et=Ke(Ve)||Ee.props.trigger.indexOf("click")>=0&&Q;if(!et){if(Ee.props.interactive){Ee.hideWithInteractivity(Ve);return}tt(Ve)}}function We(Ve){Ee.props.trigger.indexOf("focusin")<0&&Ve.target!==ae()||Ee.props.interactive&&Ve.relatedTarget&&Ae.contains(Ve.relatedTarget)||tt(Ve)}function Ke(Ve){return currentInput.isTouch?Me()!==Ve.type.indexOf("touch")>=0:!1}function Ye(){Je();var Ve=Ee.props,et=Ve.popperOptions,Ze=Ve.placement,ut=Ve.offset,at=Ve.getReferenceClientRect,ct=Ve.moveTransition,wt=ue()?getChildren(Ae).arrow:null,Tt=at?{getBoundingClientRect:at,contextElement:at.contextElement||ae()}:R,yt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(mt){var Mt=mt.state;if(ue()){var Ot=le(),bt=Ot.box;["placement","reference-hidden","escaped"].forEach(function(Rt){Rt==="placement"?bt.setAttribute("data-placement",Mt.placement):Mt.attributes.popper["data-popper-"+Rt]?bt.setAttribute("data-"+Rt,""):bt.removeAttribute("data-"+Rt)}),Mt.attributes.popper={}}}},$t=[{name:"offset",options:{offset:ut}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ct}},yt];ue()&&wt&&$t.push({name:"arrow",options:{element:wt,padding:3}}),$t.push.apply($t,(et==null?void 0:et.modifiers)||[]),Ee.popperInstance=createPopper(Tt,Ae,Object.assign({},et,{placement:Ze,onFirstUpdate:oe,modifiers:$t}))}function Je(){Ee.popperInstance&&(Ee.popperInstance.destroy(),Ee.popperInstance=null)}function Qe(){var Ve=Ee.props.appendTo,et,Ze=ae();Ee.props.interactive&&Ve===TIPPY_DEFAULT_APPEND_TO||Ve==="parent"?et=Ze.parentNode:et=invokeWithArgsOrReturn(Ve,[Ze]),et.contains(Ae)||et.appendChild(Ae),Ee.state.isMounted=!0,Ye()}function qe(){return arrayFrom(Ae.querySelectorAll("[data-tippy-root]"))}function rt(Ve){Ee.clearDelayTimeouts(),Ve&&ve("onTrigger",[Ee,Ve]),we();var et=fe(!0),Ze=Le(),ut=Ze[0],at=Ze[1];currentInput.isTouch&&ut==="hold"&&at&&(et=at),et?G=setTimeout(function(){Ee.show()},et):Ee.show()}function tt(Ve){if(Ee.clearDelayTimeouts(),ve("onUntrigger",[Ee,Ve]),!Ee.state.isVisible){ke();return}if(!(Ee.props.trigger.indexOf("mouseenter")>=0&&Ee.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ve.type)>=0&&Q)){var et=fe(!1);et?Y=setTimeout(function(){Ee.state.isVisible&&Ee.hide()},et):J=requestAnimationFrame(function(){Ee.hide()})}}function Xe(){Ee.state.isEnabled=!0}function it(){Ee.hide(),Ee.state.isEnabled=!1}function st(){clearTimeout(G),clearTimeout(Y),cancelAnimationFrame(J)}function nt(Ve){if(!Ee.state.isDestroyed){ve("onBeforeUpdate",[Ee,Ve]),$e();var et=Ee.props,Ze=evaluateProps(R,Object.assign({},et,removeUndefinedProps(Ve),{ignoreAttributes:!0}));Ee.props=Ze,De(),et.interactiveDebounce!==Ze.interactiveDebounce&&(me(),pe=debounce(je,Ze.interactiveDebounce)),et.triggerTarget&&!Ze.triggerTarget?normalizeToArray(et.triggerTarget).forEach(function(ut){ut.removeAttribute("aria-expanded")}):Ze.triggerTarget&&R.removeAttribute("aria-expanded"),he(),be(),Ie&&Ie(et,Ze),Ee.popperInstance&&(Ye(),qe().forEach(function(ut){requestAnimationFrame(ut._tippy.popperInstance.forceUpdate)})),ve("onAfterUpdate",[Ee,Ve])}}function ot(Ve){Ee.setProps({content:Ve})}function pt(){var Ve=Ee.state.isVisible,et=Ee.state.isDestroyed,Ze=!Ee.state.isEnabled,ut=currentInput.isTouch&&!Ee.props.touch,at=getValueAtIndexOrReturn(Ee.props.duration,0,defaultProps.duration);if(!(Ve||et||Ze||ut)&&!ae().hasAttribute("disabled")&&(ve("onShow",[Ee],!1),Ee.props.onShow(Ee)!==!1)){if(Ee.state.isVisible=!0,ue()&&(Ae.style.visibility="visible"),be(),we(),Ee.state.isMounted||(Ae.style.transition="none"),ue()){var ct=le(),wt=ct.box,Tt=ct.content;setTransitionDuration([wt,Tt],0)}oe=function(){var $t;if(!(!Ee.state.isVisible||ee)){if(ee=!0,Ae.offsetHeight,Ae.style.transition=Ee.props.moveTransition,ue()&&Ee.props.animation){var kt=le(),mt=kt.box,Mt=kt.content;setTransitionDuration([mt,Mt],at),setVisibilityState([mt,Mt],"visible")}xe(),he(),pushIfUnique(mountedInstances,Ee),($t=Ee.popperInstance)==null||$t.forceUpdate(),ve("onMount",[Ee]),Ee.props.animation&&ue()&&He(at,function(){Ee.state.isShown=!0,ve("onShown",[Ee])})}},Qe()}}function dt(){var Ve=!Ee.state.isVisible,et=Ee.state.isDestroyed,Ze=!Ee.state.isEnabled,ut=getValueAtIndexOrReturn(Ee.props.duration,1,defaultProps.duration);if(!(Ve||et||Ze)&&(ve("onHide",[Ee],!1),Ee.props.onHide(Ee)!==!1)){if(Ee.state.isVisible=!1,Ee.state.isShown=!1,ee=!1,Q=!1,ue()&&(Ae.style.visibility="hidden"),me(),ke(),be(!0),ue()){var at=le(),ct=at.box,wt=at.content;Ee.props.animation&&(setTransitionDuration([ct,wt],ut),setVisibilityState([ct,wt],"hidden"))}xe(),he(),Ee.props.animation?ue()&&Ne(ut,Ee.unmount):Ee.unmount()}}function Et(Ve){se().addEventListener("mousemove",pe),pushIfUnique(mouseMoveListeners,pe),pe(Ve)}function Ct(){Ee.state.isVisible&&Ee.hide(),Ee.state.isMounted&&(Je(),qe().forEach(function(Ve){Ve._tippy.unmount()}),Ae.parentNode&&Ae.parentNode.removeChild(Ae),mountedInstances=mountedInstances.filter(function(Ve){return Ve!==Ee}),Ee.state.isMounted=!1,ve("onHidden",[Ee]))}function ht(){Ee.state.isDestroyed||(Ee.clearDelayTimeouts(),Ee.unmount(),$e(),delete R._tippy,Ee.state.isDestroyed=!0,ve("onDestroy",[Ee]))}}function tippy(R,E){E===void 0&&(E={});var U=defaultProps.plugins.concat(E.plugins||[]);bindGlobalEventListeners();var G=Object.assign({},E,{plugins:U}),Y=getArrayOfElements(R),J=Y.reduce(function(Q,X){var Z=X&&createTippy(X,G);return Z&&Q.push(Z),Q},[]);return isElement$1(R)?J[0]:J}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function(E){var U=E.state,G={popper:{position:U.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(U.elements.popper.style,G.popper),U.styles=G,U.elements.arrow&&Object.assign(U.elements.arrow.style,G.arrow)}});tippy.setDefaultProps({render});class BubbleMenuView{constructor({editor:E,element:U,view:G,tippyOptions:Y={},updateDelay:J=250,shouldShow:Q}){this.preventHide=!1,this.shouldShow=({view:X,state:Z,from:ee,to:te})=>{const{doc:ne,selection:oe}=Z,{empty:ce}=oe,pe=!ne.textBetween(ee,te).length&&isTextSelection(Z.selection),ye=this.element.contains(document.activeElement);return!(!(X.hasFocus()||ye)||ce||pe||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:X})=>{var Z;if(this.preventHide){this.preventHide=!1;return}(X==null?void 0:X.relatedTarget)&&((Z=this.element.parentNode)===null||Z===void 0?void 0:Z.contains(X.relatedTarget))||this.hide()},this.tippyBlurHandler=X=>{this.blurHandler({event:X})},this.handleDebouncedUpdate=(X,Z)=>{const ee=!(Z!=null&&Z.selection.eq(X.state.selection)),te=!(Z!=null&&Z.doc.eq(X.state.doc));!ee&&!te||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(X,ee,te,Z)},this.updateDelay))},this.updateHandler=(X,Z,ee,te)=>{var ne,oe,ce;const{state:pe,composing:ye}=X,{selection:Se}=pe;if(ye||!Z&&!ee)return;this.createTooltip();const{ranges:_e}=Se,Te=Math.min(..._e.map(Ae=>Ae.$from.pos)),Ee=Math.max(..._e.map(Ae=>Ae.$to.pos));if(!((ne=this.shouldShow)===null||ne===void 0?void 0:ne.call(this,{editor:this.editor,view:X,state:pe,oldState:te,from:Te,to:Ee}))){this.hide();return}(oe=this.tippy)===null||oe===void 0||oe.setProps({getReferenceClientRect:((ce=this.tippyOptions)===null||ce===void 0?void 0:ce.getReferenceClientRect)||(()=>{if(isNodeSelection(pe.selection)){let Ae=X.nodeDOM(Te);const Ie=Ae.dataset.nodeViewWrapper?Ae:Ae.querySelector("[data-node-view-wrapper]");if(Ie&&(Ae=Ie.firstChild),Ae)return Ae.getBoundingClientRect()}return posToDOMRect(X,Te,Ee)})}),this.show()},this.editor=E,this.element=U,this.view=G,this.updateDelay=J,Q&&(this.shouldShow=Q),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=Y,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:E}=this.editor.options,U=!!E.parentElement;this.tippy||!U||(this.tippy=tippy(E,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(E,U){const{state:G}=E,Y=G.selection.$from.pos!==G.selection.$to.pos;if(this.updateDelay>0&&Y){this.handleDebouncedUpdate(E,U);return}const J=!(U!=null&&U.selection.eq(E.state.selection)),Q=!(U!=null&&U.doc.eq(E.state.doc));this.updateHandler(E,J,Q,U)}show(){var E;(E=this.tippy)===null||E===void 0||E.show()}hide(){var E;(E=this.tippy)===null||E===void 0||E.hide()}destroy(){var E,U;!((E=this.tippy)===null||E===void 0)&&E.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(U=this.tippy)===null||U===void 0||U.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const BubbleMenuPlugin=R=>new Plugin({key:typeof R.pluginKey=="string"?new PluginKey(R.pluginKey):R.pluginKey,view:E=>new BubbleMenuView({view:E,...R})});Extension.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[BubbleMenuPlugin({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class FloatingMenuView{constructor({editor:E,element:U,view:G,tippyOptions:Y={},shouldShow:J}){this.preventHide=!1,this.shouldShow=({view:Q,state:X})=>{const{selection:Z}=X,{$anchor:ee,empty:te}=Z,ne=ee.depth===1,oe=ee.parent.isTextblock&&!ee.parent.type.spec.code&&!ee.parent.textContent;return!(!Q.hasFocus()||!te||!ne||!oe||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:Q})=>{var X;if(this.preventHide){this.preventHide=!1;return}(Q==null?void 0:Q.relatedTarget)&&((X=this.element.parentNode)===null||X===void 0?void 0:X.contains(Q.relatedTarget))||this.hide()},this.tippyBlurHandler=Q=>{this.blurHandler({event:Q})},this.editor=E,this.element=U,this.view=G,J&&(this.shouldShow=J),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=Y,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:E}=this.editor.options,U=!!E.parentElement;this.tippy||!U||(this.tippy=tippy(E,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(E,U){var G,Y,J;const{state:Q}=E,{doc:X,selection:Z}=Q,{from:ee,to:te}=Z;if(U&&U.doc.eq(X)&&U.selection.eq(Z))return;if(this.createTooltip(),!((G=this.shouldShow)===null||G===void 0?void 0:G.call(this,{editor:this.editor,view:E,state:Q,oldState:U}))){this.hide();return}(Y=this.tippy)===null||Y===void 0||Y.setProps({getReferenceClientRect:((J=this.tippyOptions)===null||J===void 0?void 0:J.getReferenceClientRect)||(()=>posToDOMRect(E,ee,te))}),this.show()}show(){var E;(E=this.tippy)===null||E===void 0||E.show()}hide(){var E;(E=this.tippy)===null||E===void 0||E.hide()}destroy(){var E,U;!((E=this.tippy)===null||E===void 0)&&E.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(U=this.tippy)===null||U===void 0||U.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const FloatingMenuPlugin=R=>new Plugin({key:typeof R.pluginKey=="string"?new PluginKey(R.pluginKey):R.pluginKey,view:E=>new FloatingMenuView({view:E,...R})});Extension.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[FloatingMenuPlugin({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});defineComponent({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(R,{slots:E}){const U=ref(null);return onMounted(()=>{const{updateDelay:G,editor:Y,pluginKey:J,shouldShow:Q,tippyOptions:X}=R;Y.registerPlugin(BubbleMenuPlugin({updateDelay:G,editor:Y,element:U.value,pluginKey:J,shouldShow:Q,tippyOptions:X}))}),onBeforeUnmount(()=>{const{pluginKey:G,editor:Y}=R;Y.unregisterPlugin(G)}),()=>{var G;return h$2("div",{ref:U},(G=E.default)===null||G===void 0?void 0:G.call(E))}}});function useDebouncedRef(R){return customRef((E,U)=>({get(){return E(),R},set(G){R=G,requestAnimationFrame(()=>{requestAnimationFrame(()=>{U()})})}}))}class Editor extends Editor$1{constructor(E={}){return super(E),this.vueRenderers=reactive(new Map),this.contentComponent=null,this.reactiveState=useDebouncedRef(this.view.state),this.reactiveExtensionStorage=useDebouncedRef(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(E,U){super.registerPlugin(E,U),this.reactiveState.value=this.view.state}unregisterPlugin(E){super.unregisterPlugin(E),this.reactiveState.value=this.view.state}}const EditorContent=defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(R){const E=ref(),U=getCurrentInstance();return watchEffect(()=>{const G=R.editor;G&&G.options.element&&E.value&&nextTick(()=>{if(!E.value||!G.options.element.firstChild)return;const Y=unref(E.value);E.value.append(...G.options.element.childNodes),G.contentComponent=U.ctx._,G.setOptions({element:Y}),G.createNodeViews()})}),onBeforeUnmount(()=>{const G=R.editor;if(!G||(G.isDestroyed||G.view.setProps({nodeViews:{}}),G.contentComponent=null,!G.options.element.firstChild))return;const Y=document.createElement("div");Y.append(...G.options.element.childNodes),G.setOptions({element:Y})}),{rootEl:E}},render(){const R=[];return this.editor&&this.editor.vueRenderers.forEach(E=>{const U=h$2(Teleport,{to:E.teleportElement,key:E.id},h$2(E.component,{ref:E.id,...E.props}));R.push(U)}),h$2("div",{ref:E=>{this.rootEl=E}},...R)}});defineComponent({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(R,{slots:E}){const U=ref(null);return onMounted(()=>{const{pluginKey:G,editor:Y,tippyOptions:J,shouldShow:Q}=R;Y.registerPlugin(FloatingMenuPlugin({pluginKey:G,editor:Y,element:U.value,tippyOptions:J,shouldShow:Q}))}),onBeforeUnmount(()=>{const{pluginKey:G,editor:Y}=R;Y.unregisterPlugin(G)}),()=>{var G;return h$2("div",{ref:U},(G=E.default)===null||G===void 0?void 0:G.call(E))}}});defineComponent({props:{as:{type:String,default:"div"}},render(){return h$2(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});defineComponent({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var R,E;return h$2(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(E=(R=this.$slots).default)===null||E===void 0?void 0:E.call(R))}});const useEditor=(R={})=>{const E=shallowRef();return onMounted(()=>{E.value=new Editor(R)}),onBeforeUnmount(()=>{var U;(U=E.value)===null||U===void 0||U.destroy()}),E};function isBrowserBundle(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function isNodeEnv(){return!isBrowserBundle()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function dynamicRequire(R,E){return R.require(E)}function loadModule(R){let E;try{E=dynamicRequire(module,R)}catch{}try{const{cwd:U}=dynamicRequire(module,"process");E=dynamicRequire(module,`${U()}/node_modules/${R}`)}catch{}return E}var fallbackGlobalObject={};function getGlobalObject(){return isNodeEnv()?global:typeof window<"u"?window:typeof self<"u"?self:fallbackGlobalObject}function getGlobalSingleton(R,E,U){var G=U||getGlobalObject(),Y=G.__SENTRY__=G.__SENTRY__||{},J=Y[R]||(Y[R]=E());return J}var objectToString=Object.prototype.toString;function isError(R){switch(objectToString.call(R)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(R,Error)}}function isBuiltin(R,E){return objectToString.call(R)===`[object ${E}]`}function isErrorEvent(R){return isBuiltin(R,"ErrorEvent")}function isDOMError(R){return isBuiltin(R,"DOMError")}function isDOMException(R){return isBuiltin(R,"DOMException")}function isString(R){return isBuiltin(R,"String")}function isPrimitive(R){return R===null||typeof R!="object"&&typeof R!="function"}function isPlainObject(R){return isBuiltin(R,"Object")}function isEvent(R){return typeof Event<"u"&&isInstanceOf(R,Event)}function isElement(R){return typeof Element<"u"&&isInstanceOf(R,Element)}function isRegExp(R){return isBuiltin(R,"RegExp")}function isThenable(R){return Boolean(R&&R.then&&typeof R.then=="function")}function isSyntheticEvent(R){return isPlainObject(R)&&"nativeEvent"in R&&"preventDefault"in R&&"stopPropagation"in R}function isNaN$1(R){return typeof R=="number"&&R!==R}function isInstanceOf(R,E){try{return R instanceof E}catch{return!1}}function htmlTreeAsString(R,E){try{let X=R;var U=5,G=80,Y=[];let Z=0,ee=0;var J=" > ",Q=J.length;let te;for(;X&&Z++<U&&(te=_htmlElementAsString(X,E),!(te==="html"||Z>1&&ee+Y.length*Q+te.length>=G));)Y.push(te),ee+=te.length,X=X.parentNode;return Y.reverse().join(J)}catch{return"<unknown>"}}function _htmlElementAsString(R,E){var U=R,G=[];let Y,J,Q,X,Z;if(!U||!U.tagName)return"";G.push(U.tagName.toLowerCase());var ee=E&&E.length?E.filter(ne=>U.getAttribute(ne)).map(ne=>[ne,U.getAttribute(ne)]):null;if(ee&&ee.length)ee.forEach(ne=>{G.push(`[${ne[0]}="${ne[1]}"]`)});else if(U.id&&G.push(`#${U.id}`),Y=U.className,Y&&isString(Y))for(J=Y.split(/\s+/),Z=0;Z<J.length;Z++)G.push(`.${J[Z]}`);var te=["type","name","title","alt"];for(Z=0;Z<te.length;Z++)Q=te[Z],X=U.getAttribute(Q),X&&G.push(`[${Q}="${X}"]`);return G.join("")}function getLocationHref(){var R=getGlobalObject();try{return R.document.location.href}catch{return""}}function getDomElement(R){var E=getGlobalObject();return E.document&&E.document.querySelector?E.document.querySelector(R):null}class SentryError extends Error{constructor(E,U="warn"){super(E),this.message=E,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=U}}var DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function isValidProtocol(R){return R==="http"||R==="https"}function dsnToString(R,E=!1){const{host:U,path:G,pass:Y,port:J,projectId:Q,protocol:X,publicKey:Z}=R;return`${X}://${Z}${E&&Y?`:${Y}`:""}@${U}${J?`:${J}`:""}/${G&&`${G}/`}${Q}`}function dsnFromString(R){var E=DSN_REGEX.exec(R);if(!E)throw new SentryError(`Invalid Sentry Dsn: ${R}`);const[U,G,Y="",J,Q="",X]=E.slice(1);let Z="",ee=X;var te=ee.split("/");if(te.length>1&&(Z=te.slice(0,-1).join("/"),ee=te.pop()),ee){var ne=ee.match(/^\d+/);ne&&(ee=ne[0])}return dsnFromComponents({host:J,pass:Y,path:Z,projectId:ee,port:Q,protocol:U,publicKey:G})}function dsnFromComponents(R){return{protocol:R.protocol,publicKey:R.publicKey||"",pass:R.pass||"",host:R.host,port:R.port||"",path:R.path||"",projectId:R.projectId}}function validateDsn(R){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;const{port:E,projectId:U,protocol:G}=R;var Y=["protocol","publicKey","host","projectId"];if(Y.forEach(J=>{if(!R[J])throw new SentryError(`Invalid Sentry Dsn: ${J} missing`)}),!U.match(/^\d+$/))throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${U}`);if(!isValidProtocol(G))throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${G}`);if(E&&isNaN(parseInt(E,10)))throw new SentryError(`Invalid Sentry Dsn: Invalid port ${E}`);return!0}function makeDsn(R){var E=typeof R=="string"?dsnFromString(R):dsnFromComponents(R);return validateDsn(E),E}var global$7=getGlobalObject(),PREFIX="Sentry Logger ",CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"];function consoleSandbox(R){var E=getGlobalObject();if(!("console"in E))return R();var U=E.console,G={};CONSOLE_LEVELS.forEach(Y=>{var J=U[Y]&&U[Y].__sentry_original__;Y in E.console&&J&&(G[Y]=U[Y],U[Y]=J)});try{return R()}finally{Object.keys(G).forEach(Y=>{U[Y]=G[Y]})}}function makeLogger(){let R=!1;var E={enable:()=>{R=!0},disable:()=>{R=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?CONSOLE_LEVELS.forEach(U=>{E[U]=(...G)=>{R&&consoleSandbox(()=>{global$7.console[U](`${PREFIX}[${U}]:`,...G)})}}):CONSOLE_LEVELS.forEach(U=>{E[U]=()=>{}}),E}let logger$1;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?logger$1=getGlobalSingleton("logger",makeLogger):logger$1=makeLogger();function truncate(R,E=0){return typeof R!="string"||E===0||R.length<=E?R:`${R.substr(0,E)}...`}function safeJoin(R,E){if(!Array.isArray(R))return"";var U=[];for(let Y=0;Y<R.length;Y++){var G=R[Y];try{U.push(String(G))}catch{U.push("[value cannot be serialized]")}}return U.join(E)}function isMatchingPattern(R,E){return isString(R)?isRegExp(E)?E.test(R):typeof E=="string"?R.indexOf(E)!==-1:!1:!1}function fill(R,E,U){if(E in R){var G=R[E],Y=U(G);if(typeof Y=="function")try{markFunctionWrapped(Y,G)}catch{}R[E]=Y}}function addNonEnumerableProperty(R,E,U){Object.defineProperty(R,E,{value:U,writable:!0,configurable:!0})}function markFunctionWrapped(R,E){var U=E.prototype||{};R.prototype=E.prototype=U,addNonEnumerableProperty(R,"__sentry_original__",E)}function getOriginalFunction(R){return R.__sentry_original__}function urlEncode(R){return Object.keys(R).map(E=>`${encodeURIComponent(E)}=${encodeURIComponent(R[E])}`).join("&")}function convertToPlainObject(R){if(isError(R))return{message:R.message,name:R.name,stack:R.stack,...getOwnProperties(R)};if(isEvent(R)){var E={type:R.type,target:serializeEventTarget(R.target),currentTarget:serializeEventTarget(R.currentTarget),...getOwnProperties(R)};return typeof CustomEvent<"u"&&isInstanceOf(R,CustomEvent)&&(E.detail=R.detail),E}else return R}function serializeEventTarget(R){try{return isElement(R)?htmlTreeAsString(R):Object.prototype.toString.call(R)}catch{return"<unknown>"}}function getOwnProperties(R){if(typeof R=="object"&&R!==null){var E={};for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(E[U]=R[U]);return E}else return{}}function extractExceptionKeysForMessage(R,E=40){var U=Object.keys(convertToPlainObject(R));if(U.sort(),!U.length)return"[object has no keys]";if(U[0].length>=E)return truncate(U[0],E);for(let Y=U.length;Y>0;Y--){var G=U.slice(0,Y).join(", ");if(!(G.length>E))return Y===U.length?G:truncate(G,E)}return""}function dropUndefinedKeys(R){var E=new Map;return _dropUndefinedKeys(R,E)}function _dropUndefinedKeys(R,E){if(isPlainObject(R)){var U=E.get(R);if(U!==void 0)return U;var G={};E.set(R,G);for(var Y of Object.keys(R))typeof R[Y]<"u"&&(G[Y]=_dropUndefinedKeys(R[Y],E));return G}if(Array.isArray(R)){var U=E.get(R);if(U!==void 0)return U;var G=[];return E.set(R,G),R.forEach(X=>{G.push(_dropUndefinedKeys(X,E))}),G}return R}function _nullishCoalesce(R,E){return R!=null?R:E()}function _optionalChain(R){let E,U=R[0],G=1;for(;G<R.length;){var Y=R[G],J=R[G+1];if(G+=2,(Y==="optionalAccess"||Y==="optionalCall")&&U==null)return;Y==="access"||Y==="optionalAccess"?(E=U,U=J(U)):(Y==="call"||Y==="optionalCall")&&(U=J((...Q)=>U.call(E,...Q)),E=void 0)}return U}var STACKTRACE_LIMIT=50;function createStackParser(...R){var E=R.sort((U,G)=>U[0]-G[0]).map(U=>U[1]);return(U,G=0)=>{var Y=[];for(var J of U.split(`
`).slice(G)){var Q=J.replace(/\(error: (.*)\)/,"$1");for(var X of E){var Z=X(Q);if(Z){Y.push(Z);break}}}return stripSentryFramesAndReverse(Y)}}function stackParserFromStackParserOptions(R){return Array.isArray(R)?createStackParser(...R):R}function stripSentryFramesAndReverse(R){if(!R.length)return[];let E=R;var U=E[0].function||"",G=E[E.length-1].function||"";return(U.indexOf("captureMessage")!==-1||U.indexOf("captureException")!==-1)&&(E=E.slice(1)),G.indexOf("sentryWrapped")!==-1&&(E=E.slice(0,-1)),E.slice(0,STACKTRACE_LIMIT).map(Y=>({...Y,filename:Y.filename||E[0].filename,function:Y.function||"?"})).reverse()}var defaultFunctionName="<anonymous>";function getFunctionName(R){try{return!R||typeof R!="function"?defaultFunctionName:R.name||defaultFunctionName}catch{return defaultFunctionName}}function supportsFetch(){if(!("fetch"in getGlobalObject()))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function isNativeFetch(R){return R&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(R.toString())}function supportsNativeFetch(){if(!supportsFetch())return!1;var R=getGlobalObject();if(isNativeFetch(R.fetch))return!0;let E=!1;var U=R.document;if(U&&typeof U.createElement=="function")try{var G=U.createElement("iframe");G.hidden=!0,U.head.appendChild(G),G.contentWindow&&G.contentWindow.fetch&&(E=isNativeFetch(G.contentWindow.fetch)),U.head.removeChild(G)}catch(Y){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",Y)}return E}function supportsHistory(){var R=getGlobalObject(),E=R.chrome,U=E&&E.app&&E.app.runtime,G="history"in R&&!!R.history.pushState&&!!R.history.replaceState;return!U&&G}var global$6=getGlobalObject(),handlers={},instrumented={};function instrument(R){if(!instrumented[R])switch(instrumented[R]=!0,R){case"console":instrumentConsole();break;case"dom":instrumentDOM();break;case"xhr":instrumentXHR();break;case"fetch":instrumentFetch();break;case"history":instrumentHistory();break;case"error":instrumentError();break;case"unhandledrejection":instrumentUnhandledRejection();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("unknown instrumentation type:",R);return}}function addInstrumentationHandler(R,E){handlers[R]=handlers[R]||[],handlers[R].push(E),instrument(R)}function triggerHandlers(R,E){if(!(!R||!handlers[R]))for(var U of handlers[R]||[])try{U(E)}catch(G){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error(`Error while triggering instrumentation handler.
Type: ${R}
Name: ${getFunctionName(U)}
Error:`,G)}}function instrumentConsole(){"console"in global$6&&CONSOLE_LEVELS.forEach(function(R){R in global$6.console&&fill(global$6.console,R,function(E){return function(...U){triggerHandlers("console",{args:U,level:R}),E&&E.apply(global$6.console,U)}})})}function instrumentFetch(){!supportsNativeFetch()||fill(global$6,"fetch",function(R){return function(...E){var U={args:E,fetchData:{method:getFetchMethod(E),url:getFetchUrl(E)},startTimestamp:Date.now()};return triggerHandlers("fetch",{...U}),R.apply(global$6,E).then(G=>(triggerHandlers("fetch",{...U,endTimestamp:Date.now(),response:G}),G),G=>{throw triggerHandlers("fetch",{...U,endTimestamp:Date.now(),error:G}),G})}})}function getFetchMethod(R=[]){return"Request"in global$6&&isInstanceOf(R[0],Request)&&R[0].method?String(R[0].method).toUpperCase():R[1]&&R[1].method?String(R[1].method).toUpperCase():"GET"}function getFetchUrl(R=[]){return typeof R[0]=="string"?R[0]:"Request"in global$6&&isInstanceOf(R[0],Request)?R[0].url:String(R[0])}function instrumentXHR(){if("XMLHttpRequest"in global$6){var R=XMLHttpRequest.prototype;fill(R,"open",function(E){return function(...U){var G=this,Y=U[1],J=G.__sentry_xhr__={method:isString(U[0])?U[0].toUpperCase():U[0],url:U[1]};isString(Y)&&J.method==="POST"&&Y.match(/sentry_key/)&&(G.__sentry_own_request__=!0);var Q=function(){if(G.readyState===4){try{J.status_code=G.status}catch{}triggerHandlers("xhr",{args:U,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:G})}};return"onreadystatechange"in G&&typeof G.onreadystatechange=="function"?fill(G,"onreadystatechange",function(X){return function(...Z){return Q(),X.apply(G,Z)}}):G.addEventListener("readystatechange",Q),E.apply(G,U)}}),fill(R,"send",function(E){return function(...U){return this.__sentry_xhr__&&U[0]!==void 0&&(this.__sentry_xhr__.body=U[0]),triggerHandlers("xhr",{args:U,startTimestamp:Date.now(),xhr:this}),E.apply(this,U)}})}}let lastHref;function instrumentHistory(){if(!supportsHistory())return;var R=global$6.onpopstate;global$6.onpopstate=function(...U){var G=global$6.location.href,Y=lastHref;if(lastHref=G,triggerHandlers("history",{from:Y,to:G}),R)try{return R.apply(this,U)}catch{}};function E(U){return function(...G){var Y=G.length>2?G[2]:void 0;if(Y){var J=lastHref,Q=String(Y);lastHref=Q,triggerHandlers("history",{from:J,to:Q})}return U.apply(this,G)}}fill(global$6.history,"pushState",E),fill(global$6.history,"replaceState",E)}var debounceDuration=1e3;let debounceTimerID,lastCapturedEvent;function shouldShortcircuitPreviousDebounce(R,E){if(!R||R.type!==E.type)return!0;try{if(R.target!==E.target)return!0}catch{}return!1}function shouldSkipDOMEvent(R){if(R.type!=="keypress")return!1;try{var E=R.target;if(!E||!E.tagName)return!0;if(E.tagName==="INPUT"||E.tagName==="TEXTAREA"||E.isContentEditable)return!1}catch{}return!0}function makeDOMEventHandler(R,E=!1){return U=>{if(!(!U||lastCapturedEvent===U)&&!shouldSkipDOMEvent(U)){var G=U.type==="keypress"?"input":U.type;debounceTimerID===void 0?(R({event:U,name:G,global:E}),lastCapturedEvent=U):shouldShortcircuitPreviousDebounce(lastCapturedEvent,U)&&(R({event:U,name:G,global:E}),lastCapturedEvent=U),clearTimeout(debounceTimerID),debounceTimerID=global$6.setTimeout(()=>{debounceTimerID=void 0},debounceDuration)}}}function instrumentDOM(){if("document"in global$6){var R=triggerHandlers.bind(null,"dom"),E=makeDOMEventHandler(R,!0);global$6.document.addEventListener("click",E,!1),global$6.document.addEventListener("keypress",E,!1),["EventTarget","Node"].forEach(U=>{var G=global$6[U]&&global$6[U].prototype;!G||!G.hasOwnProperty||!G.hasOwnProperty("addEventListener")||(fill(G,"addEventListener",function(Y){return function(J,Q,X){if(J==="click"||J=="keypress")try{var Z=this,ee=Z.__sentry_instrumentation_handlers__=Z.__sentry_instrumentation_handlers__||{},te=ee[J]=ee[J]||{refCount:0};if(!te.handler){var ne=makeDOMEventHandler(R);te.handler=ne,Y.call(this,J,ne,X)}te.refCount+=1}catch{}return Y.call(this,J,Q,X)}}),fill(G,"removeEventListener",function(Y){return function(J,Q,X){if(J==="click"||J=="keypress")try{var Z=this,ee=Z.__sentry_instrumentation_handlers__||{},te=ee[J];te&&(te.refCount-=1,te.refCount<=0&&(Y.call(this,J,te.handler,X),te.handler=void 0,delete ee[J]),Object.keys(ee).length===0&&delete Z.__sentry_instrumentation_handlers__)}catch{}return Y.call(this,J,Q,X)}}))})}}let _oldOnErrorHandler=null;function instrumentError(){_oldOnErrorHandler=global$6.onerror,global$6.onerror=function(R,E,U,G,Y){return triggerHandlers("error",{column:G,error:Y,line:U,msg:R,url:E}),_oldOnErrorHandler?_oldOnErrorHandler.apply(this,arguments):!1}}let _oldOnUnhandledRejectionHandler=null;function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=global$6.onunhandledrejection,global$6.onunhandledrejection=function(R){return triggerHandlers("unhandledrejection",R),_oldOnUnhandledRejectionHandler?_oldOnUnhandledRejectionHandler.apply(this,arguments):!0}}function memoBuilder(){var R=typeof WeakSet=="function",E=R?new WeakSet:[];function U(Y){if(R)return E.has(Y)?!0:(E.add(Y),!1);for(let Q=0;Q<E.length;Q++){var J=E[Q];if(J===Y)return!0}return E.push(Y),!1}function G(Y){if(R)E.delete(Y);else for(let J=0;J<E.length;J++)if(E[J]===Y){E.splice(J,1);break}}return[U,G]}function uuid4(){var R=getGlobalObject(),E=R.crypto||R.msCrypto;if(E&&E.randomUUID)return E.randomUUID().replace(/-/g,"");var U=E&&E.getRandomValues?()=>E.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,G=>(G^(U()&15)>>G/4).toString(16))}function getFirstException(R){return R.exception&&R.exception.values?R.exception.values[0]:void 0}function getEventDescription(R){const{message:E,event_id:U}=R;if(E)return E;var G=getFirstException(R);return G?G.type&&G.value?`${G.type}: ${G.value}`:G.type||G.value||U||"<unknown>":U||"<unknown>"}function addExceptionTypeValue(R,E,U){var G=R.exception=R.exception||{},Y=G.values=G.values||[],J=Y[0]=Y[0]||{};J.value||(J.value=E||""),J.type||(J.type=U||"Error")}function addExceptionMechanism(R,E){var U=getFirstException(R);if(!!U){var G={type:"generic",handled:!0},Y=U.mechanism;if(U.mechanism={...G,...Y,...E},E&&"data"in E){var J={...Y&&Y.data,...E.data};U.mechanism.data=J}}}function checkOrSetAlreadyCaught(R){if(R&&R.__sentry_captured__)return!0;try{addNonEnumerableProperty(R,"__sentry_captured__",!0)}catch{}return!1}function arrayify(R){return Array.isArray(R)?R:[R]}function normalize(R,E=1/0,U=1/0){try{return visit("",R,E,U)}catch(G){return{ERROR:`**non-serializable** (${G})`}}}function normalizeToSize(R,E=3,U=100*1024){var G=normalize(R,E);return jsonSize(G)>U?normalizeToSize(R,E-1,U):G}function visit(R,E,U=1/0,G=1/0,Y=memoBuilder()){const[J,Q]=Y;if(E===null||["number","boolean","string"].includes(typeof E)&&!isNaN$1(E))return E;var X=stringifyValue(R,E);if(!X.startsWith("[object "))return X;if(E.__sentry_skip_normalization__)return E;if(U===0)return X.replace("object ","");if(J(E))return"[Circular ~]";var Z=E;if(Z&&typeof Z.toJSON=="function")try{var ee=Z.toJSON();return visit("",ee,U-1,G,Y)}catch{}var te=Array.isArray(E)?[]:{};let ne=0;var oe=convertToPlainObject(E);for(var ce in oe)if(!!Object.prototype.hasOwnProperty.call(oe,ce)){if(ne>=G){te[ce]="[MaxProperties ~]";break}var pe=oe[ce];te[ce]=visit(ce,pe,U-1,G,Y),ne+=1}return Q(E),te}function stringifyValue(R,E){try{return R==="domain"&&E&&typeof E=="object"&&E._events?"[Domain]":R==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&E===global?"[Global]":typeof window<"u"&&E===window?"[Window]":typeof document<"u"&&E===document?"[Document]":isSyntheticEvent(E)?"[SyntheticEvent]":typeof E=="number"&&E!==E?"[NaN]":E===void 0?"[undefined]":typeof E=="function"?`[Function: ${getFunctionName(E)}]`:typeof E=="symbol"?`[${String(E)}]`:typeof E=="bigint"?`[BigInt: ${String(E)}]`:`[object ${Object.getPrototypeOf(E).constructor.name}]`}catch(U){return`**non-serializable** (${U})`}}function utf8Length(R){return~-encodeURI(R).split(/%..|./).length}function jsonSize(R){return utf8Length(JSON.stringify(R))}var States;(function(R){var E=0;R[R.PENDING=E]="PENDING";var U=1;R[R.RESOLVED=U]="RESOLVED";var G=2;R[R.REJECTED=G]="REJECTED"})(States||(States={}));function resolvedSyncPromise(R){return new SyncPromise(E=>{E(R)})}function rejectedSyncPromise(R){return new SyncPromise((E,U)=>{U(R)})}class SyncPromise{__init(){this._state=States.PENDING}__init2(){this._handlers=[]}constructor(E){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),SyncPromise.prototype.__init5.call(this),SyncPromise.prototype.__init6.call(this);try{E(this._resolve,this._reject)}catch(U){this._reject(U)}}then(E,U){return new SyncPromise((G,Y)=>{this._handlers.push([!1,J=>{if(!E)G(J);else try{G(E(J))}catch(Q){Y(Q)}},J=>{if(!U)Y(J);else try{G(U(J))}catch(Q){Y(Q)}}]),this._executeHandlers()})}catch(E){return this.then(U=>U,E)}finally(E){return new SyncPromise((U,G)=>{let Y,J;return this.then(Q=>{J=!1,Y=Q,E&&E()},Q=>{J=!0,Y=Q,E&&E()}).then(()=>{if(J){G(Y);return}U(Y)})})}__init3(){this._resolve=E=>{this._setResult(States.RESOLVED,E)}}__init4(){this._reject=E=>{this._setResult(States.REJECTED,E)}}__init5(){this._setResult=(E,U)=>{if(this._state===States.PENDING){if(isThenable(U)){U.then(this._resolve,this._reject);return}this._state=E,this._value=U,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state!==States.PENDING){var E=this._handlers.slice();this._handlers=[],E.forEach(U=>{U[0]||(this._state===States.RESOLVED&&U[1](this._value),this._state===States.REJECTED&&U[2](this._value),U[0]=!0)})}}}}function makePromiseBuffer(R){var E=[];function U(){return R===void 0||E.length<R}function G(Q){return E.splice(E.indexOf(Q),1)[0]}function Y(Q){if(!U())return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));var X=Q();return E.indexOf(X)===-1&&E.push(X),X.then(()=>G(X)).then(null,()=>G(X).then(null,()=>{})),X}function J(Q){return new SyncPromise((X,Z)=>{let ee=E.length;if(!ee)return X(!0);var te=setTimeout(()=>{Q&&Q>0&&X(!1)},Q);E.forEach(ne=>{resolvedSyncPromise(ne).then(()=>{--ee||(clearTimeout(te),X(!0))},Z)})})}return{$:E,add:Y,drain:J}}function parseUrl(R){if(!R)return{};var E=R.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!E)return{};var U=E[6]||"",G=E[8]||"";return{host:E[4],path:E[5],protocol:E[2],relative:E[5]+U+G}}var validSeverityLevels=["fatal","error","warning","log","info","debug"];function severityLevelFromString(R){return R==="warn"?"warning":validSeverityLevels.includes(R)?R:"log"}var dateTimestampSource={nowSeconds:()=>Date.now()/1e3};function getBrowserPerformance(){const{performance:R}=getGlobalObject();if(!(!R||!R.now)){var E=Date.now()-R.now();return{now:()=>R.now(),timeOrigin:E}}}function getNodePerformance(){try{var R=dynamicRequire(module,"perf_hooks");return R.performance}catch{return}}var platformPerformance=isNodeEnv()?getNodePerformance():getBrowserPerformance(),timestampSource=platformPerformance===void 0?dateTimestampSource:{nowSeconds:()=>(platformPerformance.timeOrigin+platformPerformance.now())/1e3},dateTimestampInSeconds=dateTimestampSource.nowSeconds.bind(dateTimestampSource),timestampInSeconds=timestampSource.nowSeconds.bind(timestampSource),timestampWithMs=timestampInSeconds,browserPerformanceTimeOrigin=(()=>{const{performance:R}=getGlobalObject();if(!(!R||!R.now)){var E=3600*1e3,U=R.now(),G=Date.now(),Y=R.timeOrigin?Math.abs(R.timeOrigin+U-G):E,J=Y<E,Q=R.timing&&R.timing.navigationStart,X=typeof Q=="number",Z=X?Math.abs(Q+U-G):E,ee=Z<E;return J||ee?Y<=Z?R.timeOrigin:Q:G}})(),TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function extractTraceparentData(R){var E=R.match(TRACEPARENT_REGEXP);if(!R||!E)return;let U;return E[3]==="1"?U=!0:E[3]==="0"&&(U=!1),{traceId:E[1],parentSampled:U,parentSpanId:E[2]}}function createEnvelope(R,E=[]){return[R,E]}function addItemToEnvelope(R,E){const[U,G]=R;return[U,[...G,E]]}function forEachEnvelopeItem(R,E){var U=R[1];U.forEach(G=>{var Y=G[0].type;E(G,Y)})}function encodeUTF8(R,E){var U=E||new TextEncoder;return U.encode(R)}function serializeEnvelope(R,E){const[U,G]=R;let Y=JSON.stringify(U);function J(X){typeof Y=="string"?Y=typeof X=="string"?Y+X:[encodeUTF8(Y,E),X]:Y.push(typeof X=="string"?encodeUTF8(X,E):X)}for(var Q of G){const[X,Z]=Q;J(`
${JSON.stringify(X)}
`),J(typeof Z=="string"||Z instanceof Uint8Array?Z:JSON.stringify(Z))}return typeof Y=="string"?Y:concatBuffers(Y)}function concatBuffers(R){var E=R.reduce((J,Q)=>J+Q.length,0),U=new Uint8Array(E);let G=0;for(var Y of R)U.set(Y,G),G+=Y.length;return U}function createAttachmentEnvelopeItem(R,E){var U=typeof R.data=="string"?encodeUTF8(R.data,E):R.data;return[dropUndefinedKeys({type:"attachment",length:U.length,filename:R.filename,content_type:R.contentType,attachment_type:R.attachmentType}),U]}var ITEM_TYPE_TO_DATA_CATEGORY_MAP={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function envelopeItemTypeToDataCategory(R){return ITEM_TYPE_TO_DATA_CATEGORY_MAP[R]}function createClientReportEnvelope(R,E,U){var G=[{type:"client_report"},{timestamp:U||dateTimestampInSeconds(),discarded_events:R}];return createEnvelope(E?{dsn:E}:{},[G])}var DEFAULT_RETRY_AFTER=60*1e3;function parseRetryAfterHeader(R,E=Date.now()){var U=parseInt(`${R}`,10);if(!isNaN(U))return U*1e3;var G=Date.parse(`${R}`);return isNaN(G)?DEFAULT_RETRY_AFTER:G-E}function disabledUntil(R,E){return R[E]||R.all||0}function isRateLimited(R,E,U=Date.now()){return disabledUntil(R,E)>U}function updateRateLimits(R,{statusCode:E,headers:U},G=Date.now()){var Y={...R},J=U&&U["x-sentry-rate-limits"],Q=U&&U["retry-after"];if(J)for(var X of J.trim().split(",")){const[ne,oe]=X.split(":",2);var Z=parseInt(ne,10),ee=(isNaN(Z)?60:Z)*1e3;if(!oe)Y.all=G+ee;else for(var te of oe.split(";"))Y[te]=G+ee}else Q?Y.all=G+parseRetryAfterHeader(Q,G):E===429&&(Y.all=G+60*1e3);return Y}var BAGGAGE_HEADER_NAME="baggage",SENTRY_BAGGAGE_KEY_PREFIX="sentry-",SENTRY_BAGGAGE_KEY_PREFIX_REGEX=/^sentry-/,MAX_BAGGAGE_STRING_LENGTH=8192;function baggageHeaderToDynamicSamplingContext(R){if(!isString(R)&&!Array.isArray(R))return;let E={};if(Array.isArray(R))E=R.reduce((G,Y)=>{var J=baggageHeaderToObject(Y);return{...G,...J}},{});else{if(!R)return;E=baggageHeaderToObject(R)}var U=Object.entries(E).reduce((G,[Y,J])=>{if(Y.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)){var Q=Y.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);G[Q]=J}return G},{});if(Object.keys(U).length>0)return U}function dynamicSamplingContextToSentryBaggageHeader(R){var E=Object.entries(R).reduce((U,[G,Y])=>(Y&&(U[`${SENTRY_BAGGAGE_KEY_PREFIX}${G}`]=Y),U),{});return objectToBaggageHeader(E)}function baggageHeaderToObject(R){return R.split(",").map(E=>E.split("=").map(U=>decodeURIComponent(U.trim()))).reduce((E,[U,G])=>(E[U]=G,E),{})}function objectToBaggageHeader(R){if(Object.keys(R).length!==0)return Object.entries(R).reduce((E,[U,G],Y)=>{var J=`${encodeURIComponent(U)}=${encodeURIComponent(G)}`,Q=Y===0?J:`${E},${J}`;return Q.length>MAX_BAGGAGE_STRING_LENGTH?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Not adding key: ${U} with val: ${G} to baggage header due to exceeding baggage size limits.`),E):Q},"")}function makeSession(R){var E=timestampInSeconds(),U={sid:uuid4(),init:!0,timestamp:E,started:E,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sessionToJSON(U)};return R&&updateSession(U,R),U}function updateSession(R,E={}){if(E.user&&(!R.ipAddress&&E.user.ip_address&&(R.ipAddress=E.user.ip_address),!R.did&&!E.did&&(R.did=E.user.id||E.user.email||E.user.username)),R.timestamp=E.timestamp||timestampInSeconds(),E.ignoreDuration&&(R.ignoreDuration=E.ignoreDuration),E.sid&&(R.sid=E.sid.length===32?E.sid:uuid4()),E.init!==void 0&&(R.init=E.init),!R.did&&E.did&&(R.did=`${E.did}`),typeof E.started=="number"&&(R.started=E.started),R.ignoreDuration)R.duration=void 0;else if(typeof E.duration=="number")R.duration=E.duration;else{var U=R.timestamp-R.started;R.duration=U>=0?U:0}E.release&&(R.release=E.release),E.environment&&(R.environment=E.environment),!R.ipAddress&&E.ipAddress&&(R.ipAddress=E.ipAddress),!R.userAgent&&E.userAgent&&(R.userAgent=E.userAgent),typeof E.errors=="number"&&(R.errors=E.errors),E.status&&(R.status=E.status)}function closeSession(R,E){let U={};E?U={status:E}:R.status==="ok"&&(U={status:"exited"}),updateSession(R,U)}function sessionToJSON(R){return dropUndefinedKeys({sid:`${R.sid}`,init:R.init,started:new Date(R.started*1e3).toISOString(),timestamp:new Date(R.timestamp*1e3).toISOString(),status:R.status,errors:R.errors,did:typeof R.did=="number"||typeof R.did=="string"?`${R.did}`:void 0,duration:R.duration,attrs:{release:R.release,environment:R.environment,ip_address:R.ipAddress,user_agent:R.userAgent}})}var MAX_BREADCRUMBS=100;class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(E){var U=new Scope;return E&&(U._breadcrumbs=[...E._breadcrumbs],U._tags={...E._tags},U._extra={...E._extra},U._contexts={...E._contexts},U._user=E._user,U._level=E._level,U._span=E._span,U._session=E._session,U._transactionName=E._transactionName,U._fingerprint=E._fingerprint,U._eventProcessors=[...E._eventProcessors],U._requestSession=E._requestSession,U._attachments=[...E._attachments]),U}addScopeListener(E){this._scopeListeners.push(E)}addEventProcessor(E){return this._eventProcessors.push(E),this}setUser(E){return this._user=E||{},this._session&&updateSession(this._session,{user:E}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(E){return this._requestSession=E,this}setTags(E){return this._tags={...this._tags,...E},this._notifyScopeListeners(),this}setTag(E,U){return this._tags={...this._tags,[E]:U},this._notifyScopeListeners(),this}setExtras(E){return this._extra={...this._extra,...E},this._notifyScopeListeners(),this}setExtra(E,U){return this._extra={...this._extra,[E]:U},this._notifyScopeListeners(),this}setFingerprint(E){return this._fingerprint=E,this._notifyScopeListeners(),this}setLevel(E){return this._level=E,this._notifyScopeListeners(),this}setTransactionName(E){return this._transactionName=E,this._notifyScopeListeners(),this}setContext(E,U){return U===null?delete this._contexts[E]:this._contexts={...this._contexts,[E]:U},this._notifyScopeListeners(),this}setSpan(E){return this._span=E,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){var E=this.getSpan();return E&&E.transaction}setSession(E){return E?this._session=E:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(E){if(!E)return this;if(typeof E=="function"){var U=E(this);return U instanceof Scope?U:this}return E instanceof Scope?(this._tags={...this._tags,...E._tags},this._extra={...this._extra,...E._extra},this._contexts={...this._contexts,...E._contexts},E._user&&Object.keys(E._user).length&&(this._user=E._user),E._level&&(this._level=E._level),E._fingerprint&&(this._fingerprint=E._fingerprint),E._requestSession&&(this._requestSession=E._requestSession)):isPlainObject(E)&&(E=E,this._tags={...this._tags,...E.tags},this._extra={...this._extra,...E.extra},this._contexts={...this._contexts,...E.contexts},E.user&&(this._user=E.user),E.level&&(this._level=E.level),E.fingerprint&&(this._fingerprint=E.fingerprint),E.requestSession&&(this._requestSession=E.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(E,U){var G=typeof U=="number"?Math.min(U,MAX_BREADCRUMBS):MAX_BREADCRUMBS;if(G<=0)return this;var Y={timestamp:dateTimestampInSeconds(),...E};return this._breadcrumbs=[...this._breadcrumbs,Y].slice(-G),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(E){return this._attachments.push(E),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(E,U={}){if(this._extra&&Object.keys(this._extra).length&&(E.extra={...this._extra,...E.extra}),this._tags&&Object.keys(this._tags).length&&(E.tags={...this._tags,...E.tags}),this._user&&Object.keys(this._user).length&&(E.user={...this._user,...E.user}),this._contexts&&Object.keys(this._contexts).length&&(E.contexts={...this._contexts,...E.contexts}),this._level&&(E.level=this._level),this._transactionName&&(E.transaction=this._transactionName),this._span){E.contexts={trace:this._span.getTraceContext(),...E.contexts};var G=this._span.transaction&&this._span.transaction.name;G&&(E.tags={transaction:G,...E.tags})}return this._applyFingerprint(E),E.breadcrumbs=[...E.breadcrumbs||[],...this._breadcrumbs],E.breadcrumbs=E.breadcrumbs.length>0?E.breadcrumbs:void 0,E.sdkProcessingMetadata={...E.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...getGlobalEventProcessors(),...this._eventProcessors],E,U)}setSDKProcessingMetadata(E){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...E},this}_notifyEventProcessors(E,U,G,Y=0){return new SyncPromise((J,Q)=>{var X=E[Y];if(U===null||typeof X!="function")J(U);else{var Z=X({...U},G);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&X.id&&Z===null&&logger$1.log(`Event processor "${X.id}" dropped event`),isThenable(Z)?Z.then(ee=>this._notifyEventProcessors(E,ee,G,Y+1).then(J)).then(null,Q):this._notifyEventProcessors(E,Z,G,Y+1).then(J).then(null,Q)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(E=>{E(this)}),this._notifyingListeners=!1)}_applyFingerprint(E){E.fingerprint=E.fingerprint?arrayify(E.fingerprint):[],this._fingerprint&&(E.fingerprint=E.fingerprint.concat(this._fingerprint)),E.fingerprint&&!E.fingerprint.length&&delete E.fingerprint}}function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",()=>[])}function addGlobalEventProcessor(R){getGlobalEventProcessors().push(R)}var API_VERSION=4,DEFAULT_BREADCRUMBS=100;class Hub{__init(){this._stack=[{}]}constructor(E,U=new Scope,G=API_VERSION){this._version=G,Hub.prototype.__init.call(this),this.getStackTop().scope=U,E&&this.bindClient(E)}isOlderThan(E){return this._version<E}bindClient(E){var U=this.getStackTop();U.client=E,E&&E.setupIntegrations&&E.setupIntegrations()}pushScope(){var E=Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:E}),E}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(E){var U=this.pushScope();try{E(U)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(E,U){var G=this._lastEventId=U&&U.event_id?U.event_id:uuid4(),Y=new Error("Sentry syntheticException");return this._withClient((J,Q)=>{J.captureException(E,{originalException:E,syntheticException:Y,...U,event_id:G},Q)}),G}captureMessage(E,U,G){var Y=this._lastEventId=G&&G.event_id?G.event_id:uuid4(),J=new Error(E);return this._withClient((Q,X)=>{Q.captureMessage(E,U,{originalException:E,syntheticException:J,...G,event_id:Y},X)}),Y}captureEvent(E,U){var G=U&&U.event_id?U.event_id:uuid4();return E.type!=="transaction"&&(this._lastEventId=G),this._withClient((Y,J)=>{Y.captureEvent(E,{...U,event_id:G},J)}),G}lastEventId(){return this._lastEventId}addBreadcrumb(E,U){const{scope:G,client:Y}=this.getStackTop();if(!G||!Y)return;const{beforeBreadcrumb:J=null,maxBreadcrumbs:Q=DEFAULT_BREADCRUMBS}=Y.getOptions&&Y.getOptions()||{};if(!(Q<=0)){var X=dateTimestampInSeconds(),Z={timestamp:X,...E},ee=J?consoleSandbox(()=>J(Z,U)):Z;ee!==null&&G.addBreadcrumb(ee,Q)}}setUser(E){var U=this.getScope();U&&U.setUser(E)}setTags(E){var U=this.getScope();U&&U.setTags(E)}setExtras(E){var U=this.getScope();U&&U.setExtras(E)}setTag(E,U){var G=this.getScope();G&&G.setTag(E,U)}setExtra(E,U){var G=this.getScope();G&&G.setExtra(E,U)}setContext(E,U){var G=this.getScope();G&&G.setContext(E,U)}configureScope(E){const{scope:U,client:G}=this.getStackTop();U&&G&&E(U)}run(E){var U=makeMain(this);try{E(this)}finally{makeMain(U)}}getIntegration(E){var U=this.getClient();if(!U)return null;try{return U.getIntegration(E)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Cannot retrieve integration ${E.id} from the current Hub`),null}}startTransaction(E,U){return this._callExtensionMethod("startTransaction",E,U)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(E=!1){if(E)return this.endSession();this._sendSessionUpdate()}endSession(){var E=this.getStackTop(),U=E&&E.scope,G=U&&U.getSession();G&&closeSession(G),this._sendSessionUpdate(),U&&U.setSession()}startSession(E){const{scope:U,client:G}=this.getStackTop(),{release:Y,environment:J}=G&&G.getOptions()||{};var Q=getGlobalObject();const{userAgent:X}=Q.navigator||{};var Z=makeSession({release:Y,environment:J,...U&&{user:U.getUser()},...X&&{userAgent:X},...E});if(U){var ee=U.getSession&&U.getSession();ee&&ee.status==="ok"&&updateSession(ee,{status:"exited"}),this.endSession(),U.setSession(Z)}return Z}shouldSendDefaultPii(){var E=this.getClient(),U=E&&E.getOptions();return Boolean(U&&U.sendDefaultPii)}_sendSessionUpdate(){const{scope:E,client:U}=this.getStackTop();if(!!E){var G=E.getSession();G&&U&&U.captureSession&&U.captureSession(G)}}_withClient(E){const{scope:U,client:G}=this.getStackTop();G&&E(G,U)}_callExtensionMethod(E,...U){var G=getMainCarrier(),Y=G.__SENTRY__;if(Y&&Y.extensions&&typeof Y.extensions[E]=="function")return Y.extensions[E].apply(this,U);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Extension method ${E} couldn't be found, doing nothing.`)}}function getMainCarrier(){var R=getGlobalObject();return R.__SENTRY__=R.__SENTRY__||{extensions:{},hub:void 0},R}function makeMain(R){var E=getMainCarrier(),U=getHubFromCarrier(E);return setHubOnCarrier(E,R),U}function getCurrentHub(){var R=getMainCarrier();return(!hasHubOnCarrier(R)||getHubFromCarrier(R).isOlderThan(API_VERSION))&&setHubOnCarrier(R,new Hub),isNodeEnv()?getHubFromActiveDomain(R):getHubFromCarrier(R)}function getHubFromActiveDomain(R){try{var E=getMainCarrier().__SENTRY__,U=E&&E.extensions&&E.extensions.domain&&E.extensions.domain.active;if(!U)return getHubFromCarrier(R);if(!hasHubOnCarrier(U)||getHubFromCarrier(U).isOlderThan(API_VERSION)){var G=getHubFromCarrier(R).getStackTop();setHubOnCarrier(U,new Hub(G.client,Scope.clone(G.scope)))}return getHubFromCarrier(U)}catch{return getHubFromCarrier(R)}}function hasHubOnCarrier(R){return!!(R&&R.__SENTRY__&&R.__SENTRY__.hub)}function getHubFromCarrier(R){return getGlobalSingleton("hub",()=>new Hub,R)}function setHubOnCarrier(R,E){if(!R)return!1;var U=R.__SENTRY__=R.__SENTRY__||{};return U.hub=E,!0}function captureException(R,E){return getCurrentHub().captureException(R,{captureContext:E})}function captureMessage(R,E){var U=typeof E=="string"?E:void 0,G=typeof E!="string"?{captureContext:E}:void 0;return getCurrentHub().captureMessage(R,U,G)}function withScope(R){getCurrentHub().withScope(R)}var SENTRY_API_VERSION="7";function getBaseApiEndpoint(R){var E=R.protocol?`${R.protocol}:`:"",U=R.port?`:${R.port}`:"";return`${E}//${R.host}${U}${R.path?`/${R.path}`:""}/api/`}function _getIngestEndpoint(R){return`${getBaseApiEndpoint(R)}${R.projectId}/envelope/`}function _encodedAuth(R,E){return urlEncode({sentry_key:R.publicKey,sentry_version:SENTRY_API_VERSION,...E&&{sentry_client:`${E.name}/${E.version}`}})}function getEnvelopeEndpointWithUrlEncodedAuth(R,E={}){var U=typeof E=="string"?E:E.tunnel,G=typeof E=="string"||!E._metadata?void 0:E._metadata.sdk;return U||`${_getIngestEndpoint(R)}?${_encodedAuth(R,G)}`}function getSdkMetadataForEnvelopeHeader(R){if(!R||!R.sdk)return;const{name:E,version:U}=R.sdk;return{name:E,version:U}}function enhanceEventWithSdkInfo(R,E){return E&&(R.sdk=R.sdk||{},R.sdk.name=R.sdk.name||E.name,R.sdk.version=R.sdk.version||E.version,R.sdk.integrations=[...R.sdk.integrations||[],...E.integrations||[]],R.sdk.packages=[...R.sdk.packages||[],...E.packages||[]]),R}function createSessionEnvelope(R,E,U,G){var Y=getSdkMetadataForEnvelopeHeader(U),J={sent_at:new Date().toISOString(),...Y&&{sdk:Y},...!!G&&{dsn:dsnToString(E)}},Q="aggregates"in R?[{type:"sessions"},R]:[{type:"session"},R];return createEnvelope(J,[Q])}function createEventEnvelope(R,E,U,G){var Y=getSdkMetadataForEnvelopeHeader(U),J=R.type||"event";const{transactionSampling:Q}=R.sdkProcessingMetadata||{},{method:X,rate:Z}=Q||{};enhanceEventWithSdkInfo(R,U&&U.sdk);var ee=createEventEnvelopeHeaders(R,Y,G,E);delete R.sdkProcessingMetadata;var te=[{type:J,sample_rates:[{id:X,rate:Z}]},R];return createEnvelope(ee,[te])}function createEventEnvelopeHeaders(R,E,U,G){var Y=R.sdkProcessingMetadata&&R.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:R.event_id,sent_at:new Date().toISOString(),...E&&{sdk:E},...!!U&&{dsn:dsnToString(G)},...R.type==="transaction"&&Y&&{trace:dropUndefinedKeys({...Y})}}}var installedIntegrations=[];function filterDuplicates(R){var E={};return R.forEach(U=>{const{name:G}=U;var Y=E[G];Y&&!Y.isDefaultInstance&&U.isDefaultInstance||(E[G]=U)}),Object.values(E)}function getIntegrationsToSetup(R){var E=R.defaultIntegrations||[],U=R.integrations;E.forEach(Q=>{Q.isDefaultInstance=!0});let G;Array.isArray(U)?G=[...E,...U]:typeof U=="function"?G=arrayify(U(E)):G=E;var Y=filterDuplicates(G),J=Y.findIndex(Q=>Q.name==="Debug");if(J!==-1){const[Q]=Y.splice(J,1);Y.push(Q)}return Y}function setupIntegrations(R){var E={};return R.forEach(U=>{E[U.name]=U,installedIntegrations.indexOf(U.name)===-1&&(U.setupOnce(addGlobalEventProcessor,getCurrentHub),installedIntegrations.push(U.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`Integration installed: ${U.name}`))}),E}var ALREADY_SEEN_ERROR="Not capturing exception because it's already been captured.";class BaseClient{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(E){if(BaseClient.prototype.__init.call(this),BaseClient.prototype.__init2.call(this),BaseClient.prototype.__init3.call(this),BaseClient.prototype.__init4.call(this),this._options=E,E.dsn){this._dsn=makeDsn(E.dsn);var U=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,E);this._transport=E.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...E.transportOptions,url:U})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("No DSN provided, client will not do anything.")}captureException(E,U,G){if(checkOrSetAlreadyCaught(E)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(ALREADY_SEEN_ERROR);return}let Y=U&&U.event_id;return this._process(this.eventFromException(E,U).then(J=>this._captureEvent(J,U,G)).then(J=>{Y=J})),Y}captureMessage(E,U,G,Y){let J=G&&G.event_id;var Q=isPrimitive(E)?this.eventFromMessage(String(E),U,G):this.eventFromException(E,G);return this._process(Q.then(X=>this._captureEvent(X,G,Y)).then(X=>{J=X})),J}captureEvent(E,U,G){if(U&&U.originalException&&checkOrSetAlreadyCaught(U.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(ALREADY_SEEN_ERROR);return}let Y=U&&U.event_id;return this._process(this._captureEvent(E,U,G).then(J=>{Y=J})),Y}captureSession(E){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("SDK not enabled, will not capture session.");return}typeof E.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Discarded session because of missing or non-string release"):(this.sendSession(E),updateSession(E,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(E){var U=this._transport;return U?this._isClientDoneProcessing(E).then(G=>U.flush(E).then(Y=>G&&Y)):resolvedSyncPromise(!0)}close(E){return this.flush(E).then(U=>(this.getOptions().enabled=!1,U))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=setupIntegrations(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(E){return this._integrations[E]}getIntegration(E){try{return this._integrations[E.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Cannot retrieve integration ${E.id} from the current Client`),null}}sendEvent(E,U={}){if(this._dsn){let Y=createEventEnvelope(E,this._dsn,this._options._metadata,this._options.tunnel);for(var G of U.attachments||[])Y=addItemToEnvelope(Y,createAttachmentEnvelopeItem(G,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(Y)}}sendSession(E){if(this._dsn){var U=createSessionEnvelope(E,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(U)}}recordDroppedEvent(E,U){if(this._options.sendClientReports){var G=`${E}:${U}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`Adding outcome: "${G}"`),this._outcomes[G]=this._outcomes[G]+1||1}}_updateSessionFromEvent(E,U){let G=!1,Y=!1;var J=U.exception&&U.exception.values;if(J){Y=!0;for(var Q of J){var X=Q.mechanism;if(X&&X.handled===!1){G=!0;break}}}var Z=E.status==="ok",ee=Z&&E.errors===0||Z&&G;ee&&(updateSession(E,{...G&&{status:"crashed"},errors:E.errors||Number(Y||G)}),this.captureSession(E))}_isClientDoneProcessing(E){return new SyncPromise(U=>{let G=0;var Y=1,J=setInterval(()=>{this._numProcessing==0?(clearInterval(J),U(!0)):(G+=Y,E&&G>=E&&(clearInterval(J),U(!1)))},Y)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(E,U,G){const{normalizeDepth:Y=3,normalizeMaxBreadth:J=1e3}=this.getOptions();var Q={...E,event_id:E.event_id||U.event_id||uuid4(),timestamp:E.timestamp||dateTimestampInSeconds()};this._applyClientOptions(Q),this._applyIntegrationsMetadata(Q);let X=G;U.captureContext&&(X=Scope.clone(X).update(U.captureContext));let Z=resolvedSyncPromise(Q);if(X){var ee=[...U.attachments||[],...X.getAttachments()];ee.length&&(U.attachments=ee),Z=X.applyToEvent(Q,U)}return Z.then(te=>typeof Y=="number"&&Y>0?this._normalizeEvent(te,Y,J):te)}_normalizeEvent(E,U,G){if(!E)return null;var Y={...E,...E.breadcrumbs&&{breadcrumbs:E.breadcrumbs.map(J=>({...J,...J.data&&{data:normalize(J.data,U,G)}}))},...E.user&&{user:normalize(E.user,U,G)},...E.contexts&&{contexts:normalize(E.contexts,U,G)},...E.extra&&{extra:normalize(E.extra,U,G)}};return E.contexts&&E.contexts.trace&&Y.contexts&&(Y.contexts.trace=E.contexts.trace,E.contexts.trace.data&&(Y.contexts.trace.data=normalize(E.contexts.trace.data,U,G))),E.spans&&(Y.spans=E.spans.map(J=>(J.data&&(J.data=normalize(J.data,U,G)),J))),Y}_applyClientOptions(E){var U=this.getOptions();const{environment:G,release:Y,dist:J,maxValueLength:Q=250}=U;"environment"in E||(E.environment="environment"in U?G:"production"),E.release===void 0&&Y!==void 0&&(E.release=Y),E.dist===void 0&&J!==void 0&&(E.dist=J),E.message&&(E.message=truncate(E.message,Q));var X=E.exception&&E.exception.values&&E.exception.values[0];X&&X.value&&(X.value=truncate(X.value,Q));var Z=E.request;Z&&Z.url&&(Z.url=truncate(Z.url,Q))}_applyIntegrationsMetadata(E){var U=Object.keys(this._integrations);U.length>0&&(E.sdk=E.sdk||{},E.sdk.integrations=[...E.sdk.integrations||[],...U])}_captureEvent(E,U={},G){return this._processEvent(E,U,G).then(Y=>Y.event_id,Y=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){var J=Y;J.logLevel==="log"?logger$1.log(J.message):logger$1.warn(J)}})}_processEvent(E,U,G){const{beforeSend:Y,sampleRate:J}=this.getOptions();if(!this._isEnabled())return rejectedSyncPromise(new SentryError("SDK not enabled, will not capture event.","log"));var Q=E.type==="transaction";return!Q&&typeof J=="number"&&Math.random()>J?(this.recordDroppedEvent("sample_rate","error"),rejectedSyncPromise(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${J})`,"log"))):this._prepareEvent(E,U,G).then(X=>{if(X===null)throw this.recordDroppedEvent("event_processor",E.type||"error"),new SentryError("An event processor returned null, will not send event.","log");var Z=U.data&&U.data.__sentry__===!0;if(Z||Q||!Y)return X;var ee=Y(X,U);return _ensureBeforeSendRv(ee)}).then(X=>{if(X===null)throw this.recordDroppedEvent("before_send",E.type||"error"),new SentryError("`beforeSend` returned `null`, will not send event.","log");var Z=G&&G.getSession();!Q&&Z&&this._updateSessionFromEvent(Z,X);var ee=X.transaction_info;if(Q&&ee&&X.transaction!==E.transaction){var te="custom";X.transaction_info={...ee,source:te,changes:[...ee.changes,{source:te,timestamp:X.timestamp,propagations:ee.propagations}]}}return this.sendEvent(X,U),X}).then(null,X=>{throw X instanceof SentryError?X:(this.captureException(X,{data:{__sentry__:!0},originalException:X}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${X}`))})}_process(E){this._numProcessing+=1,E.then(U=>(this._numProcessing-=1,U),U=>(this._numProcessing-=1,U))}_sendEnvelope(E){this._transport&&this._dsn?this._transport.send(E).then(null,U=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error("Error while sending event:",U)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error("Transport disabled")}_clearOutcomes(){var E=this._outcomes;return this._outcomes={},Object.keys(E).map(U=>{const[G,Y]=U.split(":");return{reason:G,category:Y,quantity:E[U]}})}}function _ensureBeforeSendRv(R){var E="`beforeSend` method has to return `null` or a valid event.";if(isThenable(R))return R.then(U=>{if(!(isPlainObject(U)||U===null))throw new SentryError(E);return U},U=>{throw new SentryError(`beforeSend rejected with ${U}`)});if(!(isPlainObject(R)||R===null))throw new SentryError(E);return R}function initAndBind(R,E){E.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?logger$1.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var U=getCurrentHub(),G=U.getScope();G&&G.update(E.initialScope);var Y=new R(E);U.bindClient(Y)}var DEFAULT_TRANSPORT_BUFFER_SIZE=30;function createTransport(R,E,U=makePromiseBuffer(R.bufferSize||DEFAULT_TRANSPORT_BUFFER_SIZE)){let G={};var Y=Q=>U.drain(Q);function J(Q){var X=[];if(forEachEnvelopeItem(Q,(ne,oe)=>{var ce=envelopeItemTypeToDataCategory(oe);isRateLimited(G,ce)?R.recordDroppedEvent("ratelimit_backoff",ce):X.push(ne)}),X.length===0)return resolvedSyncPromise();var Z=createEnvelope(Q[0],X),ee=ne=>{forEachEnvelopeItem(Z,(oe,ce)=>{R.recordDroppedEvent(ne,envelopeItemTypeToDataCategory(ce))})},te=()=>E({body:serializeEnvelope(Z,R.textEncoder)}).then(ne=>{ne.statusCode!==void 0&&(ne.statusCode<200||ne.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Sentry responded with status code ${ne.statusCode} to sent event.`),G=updateRateLimits(G,ne)},ne=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error("Failed while sending event:",ne),ee("network_error")});return U.add(te).then(ne=>ne,ne=>{if(ne instanceof SentryError)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error("Skipped sending event because buffer is full."),ee("queue_overflow"),resolvedSyncPromise();throw ne})}return{send:J,flush:Y}}var SDK_VERSION="7.13.0";let originalFunctionToString;class FunctionToString{constructor(){FunctionToString.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=FunctionToString.id}setupOnce(){originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(...E){var U=getOriginalFunction(this)||this;return originalFunctionToString.apply(U,E)}}}FunctionToString.__initStatic();var DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class InboundFilters{static __initStatic(){this.id="InboundFilters"}__init(){this.name=InboundFilters.id}constructor(E={}){this._options=E,InboundFilters.prototype.__init.call(this)}setupOnce(E,U){var G=Y=>{var J=U();if(J){var Q=J.getIntegration(InboundFilters);if(Q){var X=J.getClient(),Z=X?X.getOptions():{},ee=_mergeOptions(Q._options,Z);return _shouldDropEvent$1(Y,ee)?null:Y}}return Y};G.id=this.name,E(G)}}InboundFilters.__initStatic();function _mergeOptions(R={},E={}){return{allowUrls:[...R.allowUrls||[],...E.allowUrls||[]],denyUrls:[...R.denyUrls||[],...E.denyUrls||[]],ignoreErrors:[...R.ignoreErrors||[],...E.ignoreErrors||[],...DEFAULT_IGNORE_ERRORS],ignoreInternal:R.ignoreInternal!==void 0?R.ignoreInternal:!0}}function _shouldDropEvent$1(R,E){return E.ignoreInternal&&_isSentryError(R)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Event dropped due to being internal Sentry Error.
Event: ${getEventDescription(R)}`),!0):_isIgnoredError(R,E.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${getEventDescription(R)}`),!0):_isDeniedUrl(R,E.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${getEventDescription(R)}.
Url: ${_getEventFilterUrl(R)}`),!0):_isAllowedUrl(R,E.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${getEventDescription(R)}.
Url: ${_getEventFilterUrl(R)}`),!0)}function _isIgnoredError(R,E){return!E||!E.length?!1:_getPossibleEventMessages(R).some(U=>E.some(G=>isMatchingPattern(U,G)))}function _isDeniedUrl(R,E){if(!E||!E.length)return!1;var U=_getEventFilterUrl(R);return U?E.some(G=>isMatchingPattern(U,G)):!1}function _isAllowedUrl(R,E){if(!E||!E.length)return!0;var U=_getEventFilterUrl(R);return U?E.some(G=>isMatchingPattern(U,G)):!0}function _getPossibleEventMessages(R){if(R.message)return[R.message];if(R.exception)try{const{type:E="",value:U=""}=R.exception.values&&R.exception.values[0]||{};return[`${U}`,`${E}: ${U}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error(`Cannot extract message for event ${getEventDescription(R)}`),[]}return[]}function _isSentryError(R){try{return R.exception.values[0].type==="SentryError"}catch{}return!1}function _getLastValidUrl(R=[]){for(let U=R.length-1;U>=0;U--){var E=R[U];if(E&&E.filename!=="<anonymous>"&&E.filename!=="[native code]")return E.filename||null}return null}function _getEventFilterUrl(R){try{let E;try{E=R.exception.values[0].stacktrace.frames}catch{}return E?_getLastValidUrl(E):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error(`Cannot extract url for event ${getEventDescription(R)}`),null}}function exceptionFromError(R,E){var U=parseStackFrames(R,E),G={type:E&&E.name,value:extractMessage(E)};return U.length&&(G.stacktrace={frames:U}),G.type===void 0&&G.value===""&&(G.value="Unrecoverable error caught"),G}function eventFromPlainObject(R,E,U,G){var Y=getCurrentHub(),J=Y.getClient(),Q=J&&J.getOptions().normalizeDepth,X={exception:{values:[{type:isEvent(E)?E.constructor.name:G?"UnhandledRejection":"Error",value:`Non-Error ${G?"promise rejection":"exception"} captured with keys: ${extractExceptionKeysForMessage(E)}`}]},extra:{__serialized__:normalizeToSize(E,Q)}};if(U){var Z=parseStackFrames(R,U);Z.length&&(X.exception.values[0].stacktrace={frames:Z})}return X}function eventFromError(R,E){return{exception:{values:[exceptionFromError(R,E)]}}}function parseStackFrames(R,E){var U=E.stacktrace||E.stack||"",G=getPopSize(E);try{return R(U,G)}catch{}return[]}var reactMinifiedRegexp=/Minified React error #\d+;/i;function getPopSize(R){if(R){if(typeof R.framesToPop=="number")return R.framesToPop;if(reactMinifiedRegexp.test(R.message))return 1}return 0}function extractMessage(R){var E=R&&R.message;return E?E.error&&typeof E.error.message=="string"?E.error.message:E:"No error message"}function eventFromException(R,E,U,G){var Y=U&&U.syntheticException||void 0,J=eventFromUnknownInput(R,E,Y,G);return addExceptionMechanism(J),J.level="error",U&&U.event_id&&(J.event_id=U.event_id),resolvedSyncPromise(J)}function eventFromMessage(R,E,U="info",G,Y){var J=G&&G.syntheticException||void 0,Q=eventFromString(R,E,J,Y);return Q.level=U,G&&G.event_id&&(Q.event_id=G.event_id),resolvedSyncPromise(Q)}function eventFromUnknownInput(R,E,U,G,Y){let J;if(isErrorEvent(E)&&E.error){var Q=E;return eventFromError(R,Q.error)}if(isDOMError(E)||isDOMException(E)){var X=E;if("stack"in E)J=eventFromError(R,E);else{var Z=X.name||(isDOMError(X)?"DOMError":"DOMException"),ee=X.message?`${Z}: ${X.message}`:Z;J=eventFromString(R,ee,U,G),addExceptionTypeValue(J,ee)}return"code"in X&&(J.tags={...J.tags,"DOMException.code":`${X.code}`}),J}if(isError(E))return eventFromError(R,E);if(isPlainObject(E)||isEvent(E)){var te=E;return J=eventFromPlainObject(R,te,U,Y),addExceptionMechanism(J,{synthetic:!0}),J}return J=eventFromString(R,E,U,G),addExceptionTypeValue(J,`${E}`,void 0),addExceptionMechanism(J,{synthetic:!0}),J}function eventFromString(R,E,U,G){var Y={message:E};if(G&&U){var J=parseStackFrames(R,U);J.length&&(Y.exception={values:[{value:E,stacktrace:{frames:J}}]})}return Y}var BREADCRUMB_INTEGRATION_ID="Breadcrumbs";class Breadcrumbs{static __initStatic(){this.id=BREADCRUMB_INTEGRATION_ID}__init(){this.name=Breadcrumbs.id}constructor(E){Breadcrumbs.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...E}}setupOnce(){this.options.console&&addInstrumentationHandler("console",_consoleBreadcrumb),this.options.dom&&addInstrumentationHandler("dom",_domBreadcrumb(this.options.dom)),this.options.xhr&&addInstrumentationHandler("xhr",_xhrBreadcrumb),this.options.fetch&&addInstrumentationHandler("fetch",_fetchBreadcrumb),this.options.history&&addInstrumentationHandler("history",_historyBreadcrumb)}}Breadcrumbs.__initStatic();function _domBreadcrumb(R){function E(U){let G,Y=typeof R=="object"?R.serializeAttribute:void 0;typeof Y=="string"&&(Y=[Y]);try{G=U.event.target?htmlTreeAsString(U.event.target,Y):htmlTreeAsString(U.event,Y)}catch{G="<unknown>"}G.length!==0&&getCurrentHub().addBreadcrumb({category:`ui.${U.name}`,message:G},{event:U.event,name:U.name,global:U.global})}return E}function _consoleBreadcrumb(R){var E={category:"console",data:{arguments:R.args,logger:"console"},level:severityLevelFromString(R.level),message:safeJoin(R.args," ")};if(R.level==="assert")if(R.args[0]===!1)E.message=`Assertion failed: ${safeJoin(R.args.slice(1)," ")||"console.assert"}`,E.data.arguments=R.args.slice(1);else return;getCurrentHub().addBreadcrumb(E,{input:R.args,level:R.level})}function _xhrBreadcrumb(R){if(R.endTimestamp){if(R.xhr.__sentry_own_request__)return;const{method:E,url:U,status_code:G,body:Y}=R.xhr.__sentry_xhr__||{};getCurrentHub().addBreadcrumb({category:"xhr",data:{method:E,url:U,status_code:G},type:"http"},{xhr:R.xhr,input:Y});return}}function _fetchBreadcrumb(R){!R.endTimestamp||R.fetchData.url.match(/sentry_key/)&&R.fetchData.method==="POST"||(R.error?getCurrentHub().addBreadcrumb({category:"fetch",data:R.fetchData,level:"error",type:"http"},{data:R.error,input:R.args}):getCurrentHub().addBreadcrumb({category:"fetch",data:{...R.fetchData,status_code:R.response.status},type:"http"},{input:R.args,response:R.response}))}function _historyBreadcrumb(R){var E=getGlobalObject();let U=R.from,G=R.to;var Y=parseUrl(E.location.href);let J=parseUrl(U);var Q=parseUrl(G);J.path||(J=Y),Y.protocol===Q.protocol&&Y.host===Q.host&&(G=Q.relative),Y.protocol===J.protocol&&Y.host===J.host&&(U=J.relative),getCurrentHub().addBreadcrumb({category:"navigation",data:{from:U,to:G}})}var global$5=getGlobalObject();let cachedFetchImpl;function getNativeFetchImplementation(){if(cachedFetchImpl)return cachedFetchImpl;if(isNativeFetch(global$5.fetch))return cachedFetchImpl=global$5.fetch.bind(global$5);var R=global$5.document;let E=global$5.fetch;if(R&&typeof R.createElement=="function")try{var U=R.createElement("iframe");U.hidden=!0,R.head.appendChild(U);var G=U.contentWindow;G&&G.fetch&&(E=G.fetch),R.head.removeChild(U)}catch(Y){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",Y)}return cachedFetchImpl=E.bind(global$5)}function sendReport(R,E){var U=Object.prototype.toString.call(global$5&&global$5.navigator)==="[object Navigator]",G=U&&typeof global$5.navigator.sendBeacon=="function";if(G){var Y=global$5.navigator.sendBeacon.bind(global$5.navigator);Y(R,E)}else if(supportsFetch()){var J=getNativeFetchImplementation();J(R,{body:E,method:"POST",credentials:"omit",keepalive:!0}).then(null,Q=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error(Q)})}}var globalObject=getGlobalObject();class BrowserClient extends BaseClient{constructor(E){E._metadata=E._metadata||{},E._metadata.sdk=E._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:SDK_VERSION}],version:SDK_VERSION},super(E),E.sendClientReports&&globalObject.document&&globalObject.document.addEventListener("visibilitychange",()=>{globalObject.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(E,U){return eventFromException(this._options.stackParser,E,U,this._options.attachStacktrace)}eventFromMessage(E,U="info",G){return eventFromMessage(this._options.stackParser,E,U,G,this._options.attachStacktrace)}sendEvent(E,U){var G=this.getIntegrationById(BREADCRUMB_INTEGRATION_ID);G&&G.options&&G.options.sentry&&getCurrentHub().addBreadcrumb({category:`sentry.${E.type==="transaction"?"transaction":"event"}`,event_id:E.event_id,level:E.level,message:getEventDescription(E)},{event:E}),super.sendEvent(E,U)}_prepareEvent(E,U,G){return E.platform=E.platform||"javascript",super._prepareEvent(E,U,G)}_flushOutcomes(){var E=this._clearOutcomes();if(E.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("Sending outcomes:",E);var U=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,this._options),G=createClientReportEnvelope(E,this._options.tunnel&&dsnToString(this._dsn));try{sendReport(U,serializeEnvelope(G))}catch(Y){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.error(Y)}}}function makeFetchTransport(R,E=getNativeFetchImplementation()){function U(G){var Y={body:G.body,method:"POST",referrerPolicy:"origin",headers:R.headers,keepalive:G.body.length<=65536,...R.fetchOptions};return E(R.url,Y).then(J=>({statusCode:J.status,headers:{"x-sentry-rate-limits":J.headers.get("X-Sentry-Rate-Limits"),"retry-after":J.headers.get("Retry-After")}}))}return createTransport(R,U)}var XHR_READYSTATE_DONE=4;function makeXHRTransport(R){function E(U){return new SyncPromise((G,Y)=>{var J=new XMLHttpRequest;J.onerror=Y,J.onreadystatechange=()=>{J.readyState===XHR_READYSTATE_DONE&&G({statusCode:J.status,headers:{"x-sentry-rate-limits":J.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":J.getResponseHeader("Retry-After")}})},J.open("POST",R.url);for(var Q in R.headers)Object.prototype.hasOwnProperty.call(R.headers,Q)&&J.setRequestHeader(Q,R.headers[Q]);J.send(U.body)})}return createTransport(R,E)}var UNKNOWN_FUNCTION="?",CHROME_PRIORITY=30,WINJS_PRIORITY=40,GECKO_PRIORITY=50;function createFrame(R,E,U,G){var Y={filename:R,function:E,in_app:!0};return U!==void 0&&(Y.lineno=U),G!==void 0&&(Y.colno=G),Y}var chromeRegex=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,chromeEvalRegex=/\((\S*)(?::(\d+))(?::(\d+))\)/,chrome=R=>{var E=chromeRegex.exec(R);if(E){var U=E[2]&&E[2].indexOf("eval")===0;if(U){var G=chromeEvalRegex.exec(E[2]);G&&(E[2]=G[1],E[3]=G[2],E[4]=G[3])}const[Y,J]=extractSafariExtensionDetails(E[1]||UNKNOWN_FUNCTION,E[2]);return createFrame(J,Y,E[3]?+E[3]:void 0,E[4]?+E[4]:void 0)}},chromeStackLineParser=[CHROME_PRIORITY,chrome],geckoREgex=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,geckoEvalRegex=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gecko=R=>{var E=geckoREgex.exec(R);if(E){var U=E[3]&&E[3].indexOf(" > eval")>-1;if(U){var G=geckoEvalRegex.exec(E[3]);G&&(E[1]=E[1]||"eval",E[3]=G[1],E[4]=G[2],E[5]="")}let Y=E[3],J=E[1]||UNKNOWN_FUNCTION;return[J,Y]=extractSafariExtensionDetails(J,Y),createFrame(Y,J,E[4]?+E[4]:void 0,E[5]?+E[5]:void 0)}},geckoStackLineParser=[GECKO_PRIORITY,gecko],winjsRegex=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,winjs=R=>{var E=winjsRegex.exec(R);return E?createFrame(E[2],E[1]||UNKNOWN_FUNCTION,+E[3],E[4]?+E[4]:void 0):void 0},winjsStackLineParser=[WINJS_PRIORITY,winjs],defaultStackLineParsers=[chromeStackLineParser,geckoStackLineParser,winjsStackLineParser],defaultStackParser=createStackParser(...defaultStackLineParsers),extractSafariExtensionDetails=(R,E)=>{var U=R.indexOf("safari-extension")!==-1,G=R.indexOf("safari-web-extension")!==-1;return U||G?[R.indexOf("@")!==-1?R.split("@")[0]:UNKNOWN_FUNCTION,U?`safari-extension:${E}`:`safari-web-extension:${E}`]:[R,E]};let ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError+=1,setTimeout(()=>{ignoreOnError-=1})}function wrap(R,E={},U){if(typeof R!="function")return R;try{var G=R.__sentry_wrapped__;if(G)return G;if(getOriginalFunction(R))return R}catch{return R}var Y=function(){var X=Array.prototype.slice.call(arguments);try{U&&typeof U=="function"&&U.apply(this,arguments);var Z=X.map(ee=>wrap(ee,E));return R.apply(this,Z)}catch(ee){throw ignoreNextOnError(),withScope(te=>{te.addEventProcessor(ne=>(E.mechanism&&(addExceptionTypeValue(ne,void 0,void 0),addExceptionMechanism(ne,E.mechanism)),ne.extra={...ne.extra,arguments:X},ne)),captureException(ee)}),ee}};try{for(var J in R)Object.prototype.hasOwnProperty.call(R,J)&&(Y[J]=R[J])}catch{}markFunctionWrapped(Y,R),addNonEnumerableProperty(R,"__sentry_wrapped__",Y);try{var Q=Object.getOwnPropertyDescriptor(Y,"name");Q.configurable&&Object.defineProperty(Y,"name",{get(){return R.name}})}catch{}return Y}class GlobalHandlers{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=GlobalHandlers.id}__init2(){this._installFunc={onerror:_installGlobalOnErrorHandler,onunhandledrejection:_installGlobalOnUnhandledRejectionHandler}}constructor(E){GlobalHandlers.prototype.__init.call(this),GlobalHandlers.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...E}}setupOnce(){Error.stackTraceLimit=50;var E=this._options;for(var U in E){var G=this._installFunc[U];G&&E[U]&&(globalHandlerLog(U),G(),this._installFunc[U]=void 0)}}}GlobalHandlers.__initStatic();function _installGlobalOnErrorHandler(){addInstrumentationHandler("error",R=>{const[E,U,G]=getHubAndOptions();if(!E.getIntegration(GlobalHandlers))return;const{msg:Y,url:J,line:Q,column:X,error:Z}=R;if(!(shouldIgnoreOnError()||Z&&Z.__sentry_own_request__)){var ee=Z===void 0&&isString(Y)?_eventFromIncompleteOnError(Y,J,Q,X):_enhanceEventWithInitialFrame(eventFromUnknownInput(U,Z||Y,void 0,G,!1),J,Q,X);ee.level="error",addMechanismAndCapture(E,Z,ee,"onerror")}})}function _installGlobalOnUnhandledRejectionHandler(){addInstrumentationHandler("unhandledrejection",R=>{const[E,U,G]=getHubAndOptions();if(!E.getIntegration(GlobalHandlers))return;let Y=R;try{"reason"in R?Y=R.reason:"detail"in R&&"reason"in R.detail&&(Y=R.detail.reason)}catch{}if(shouldIgnoreOnError()||Y&&Y.__sentry_own_request__)return!0;var J=isPrimitive(Y)?_eventFromRejectionWithPrimitive(Y):eventFromUnknownInput(U,Y,void 0,G,!0);J.level="error",addMechanismAndCapture(E,Y,J,"onunhandledrejection")})}function _eventFromRejectionWithPrimitive(R){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(R)}`}]}}}function _eventFromIncompleteOnError(R,E,U,G){var Y=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let J=isErrorEvent(R)?R.message:R,Q="Error";var X=J.match(Y);X&&(Q=X[1],J=X[2]);var Z={exception:{values:[{type:Q,value:J}]}};return _enhanceEventWithInitialFrame(Z,E,U,G)}function _enhanceEventWithInitialFrame(R,E,U,G){var Y=R.exception=R.exception||{},J=Y.values=Y.values||[],Q=J[0]=J[0]||{},X=Q.stacktrace=Q.stacktrace||{},Z=X.frames=X.frames||[],ee=isNaN(parseInt(G,10))?void 0:G,te=isNaN(parseInt(U,10))?void 0:U,ne=isString(E)&&E.length>0?E:getLocationHref();return Z.length===0&&Z.push({colno:ee,filename:ne,function:"?",in_app:!0,lineno:te}),R}function globalHandlerLog(R){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`Global Handler attached: ${R}`)}function addMechanismAndCapture(R,E,U,G){addExceptionMechanism(U,{handled:!1,type:G}),R.captureEvent(U,{originalException:E})}function getHubAndOptions(){var R=getCurrentHub(),E=R.getClient(),U=E&&E.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[R,U.stackParser,U.attachStacktrace]}var DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class TryCatch{static __initStatic(){this.id="TryCatch"}__init(){this.name=TryCatch.id}constructor(E){TryCatch.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...E}}setupOnce(){var E=getGlobalObject();this._options.setTimeout&&fill(E,"setTimeout",_wrapTimeFunction),this._options.setInterval&&fill(E,"setInterval",_wrapTimeFunction),this._options.requestAnimationFrame&&fill(E,"requestAnimationFrame",_wrapRAF),this._options.XMLHttpRequest&&"XMLHttpRequest"in E&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);var U=this._options.eventTarget;if(U){var G=Array.isArray(U)?U:DEFAULT_EVENT_TARGET;G.forEach(_wrapEventTarget)}}}TryCatch.__initStatic();function _wrapTimeFunction(R){return function(...E){var U=E[0];return E[0]=wrap(U,{mechanism:{data:{function:getFunctionName(R)},handled:!0,type:"instrument"}}),R.apply(this,E)}}function _wrapRAF(R){return function(E){return R.apply(this,[wrap(E,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(R)},handled:!0,type:"instrument"}})])}}function _wrapXHR(R){return function(...E){var U=this,G=["onload","onerror","onprogress","onreadystatechange"];return G.forEach(Y=>{Y in U&&typeof U[Y]=="function"&&fill(U,Y,function(J){var Q={mechanism:{data:{function:Y,handler:getFunctionName(J)},handled:!0,type:"instrument"}},X=getOriginalFunction(J);return X&&(Q.mechanism.data.handler=getFunctionName(X)),wrap(J,Q)})}),R.apply(this,E)}}function _wrapEventTarget(R){var E=getGlobalObject(),U=E[R]&&E[R].prototype;!U||!U.hasOwnProperty||!U.hasOwnProperty("addEventListener")||(fill(U,"addEventListener",function(G){return function(Y,J,Q){try{typeof J.handleEvent=="function"&&(J.handleEvent=wrap(J.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(J),target:R},handled:!0,type:"instrument"}}))}catch{}return G.apply(this,[Y,wrap(J,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(J),target:R},handled:!0,type:"instrument"}}),Q])}}),fill(U,"removeEventListener",function(G){return function(Y,J,Q){var X=J;try{var Z=X&&X.__sentry_wrapped__;Z&&G.call(this,Y,Z,Q)}catch{}return G.call(this,Y,X,Q)}}))}var DEFAULT_KEY="cause",DEFAULT_LIMIT=5;class LinkedErrors{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=LinkedErrors.id}constructor(E={}){LinkedErrors.prototype.__init.call(this),this._key=E.key||DEFAULT_KEY,this._limit=E.limit||DEFAULT_LIMIT}setupOnce(){var E=getCurrentHub().getClient();!E||addGlobalEventProcessor((U,G)=>{var Y=getCurrentHub().getIntegration(LinkedErrors);return Y?_handler(E.getOptions().stackParser,Y._key,Y._limit,U,G):U})}}LinkedErrors.__initStatic();function _handler(R,E,U,G,Y){if(!G.exception||!G.exception.values||!Y||!isInstanceOf(Y.originalException,Error))return G;var J=_walkErrorTree(R,U,Y.originalException,E);return G.exception.values=[...J,...G.exception.values],G}function _walkErrorTree(R,E,U,G,Y=[]){if(!isInstanceOf(U[G],Error)||Y.length+1>=E)return Y;var J=exceptionFromError(R,U[G]);return _walkErrorTree(R,E,U[G],G,[J,...Y])}var global$4=getGlobalObject();class HttpContext{constructor(){HttpContext.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=HttpContext.id}setupOnce(){addGlobalEventProcessor(E=>{if(getCurrentHub().getIntegration(HttpContext)){if(!global$4.navigator&&!global$4.location&&!global$4.document)return E;var U=E.request&&E.request.url||global$4.location&&global$4.location.href;const{referrer:J}=global$4.document||{},{userAgent:Q}=global$4.navigator||{};var G={...E.request&&E.request.headers,...J&&{Referer:J},...Q&&{"User-Agent":Q}},Y={...U&&{url:U},headers:G};return{...E,request:Y}}return E})}}HttpContext.__initStatic();class Dedupe{constructor(){Dedupe.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Dedupe.id}setupOnce(E,U){var G=Y=>{var J=U().getIntegration(Dedupe);if(J){try{if(_shouldDropEvent(Y,J._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return J._previousEvent=Y}return J._previousEvent=Y}return Y};G.id=this.name,E(G)}}Dedupe.__initStatic();function _shouldDropEvent(R,E){return E?!!(_isSameMessageEvent(R,E)||_isSameExceptionEvent(R,E)):!1}function _isSameMessageEvent(R,E){var U=R.message,G=E.message;return!(!U&&!G||U&&!G||!U&&G||U!==G||!_isSameFingerprint(R,E)||!_isSameStacktrace(R,E))}function _isSameExceptionEvent(R,E){var U=_getExceptionFromEvent(E),G=_getExceptionFromEvent(R);return!(!U||!G||U.type!==G.type||U.value!==G.value||!_isSameFingerprint(R,E)||!_isSameStacktrace(R,E))}function _isSameStacktrace(R,E){let U=_getFramesFromEvent(R),G=_getFramesFromEvent(E);if(!U&&!G)return!0;if(U&&!G||!U&&G||(U=U,G=G,G.length!==U.length))return!1;for(let Q=0;Q<G.length;Q++){var Y=G[Q],J=U[Q];if(Y.filename!==J.filename||Y.lineno!==J.lineno||Y.colno!==J.colno||Y.function!==J.function)return!1}return!0}function _isSameFingerprint(R,E){let U=R.fingerprint,G=E.fingerprint;if(!U&&!G)return!0;if(U&&!G||!U&&G)return!1;U=U,G=G;try{return U.join("")===G.join("")}catch{return!1}}function _getExceptionFromEvent(R){return R.exception&&R.exception.values&&R.exception.values[0]}function _getFramesFromEvent(R){var E=R.exception;if(E)try{return E.values[0].stacktrace.frames}catch{return}}var defaultIntegrations=[new InboundFilters,new FunctionToString,new TryCatch,new Breadcrumbs,new GlobalHandlers,new LinkedErrors,new Dedupe,new HttpContext];function init(R={}){if(R.defaultIntegrations===void 0&&(R.defaultIntegrations=defaultIntegrations),R.release===void 0){var E=getGlobalObject();E.SENTRY_RELEASE&&E.SENTRY_RELEASE.id&&(R.release=E.SENTRY_RELEASE.id)}R.autoSessionTracking===void 0&&(R.autoSessionTracking=!0),R.sendClientReports===void 0&&(R.sendClientReports=!0);var U={...R,stackParser:stackParserFromStackParserOptions(R.stackParser||defaultStackParser),integrations:getIntegrationsToSetup(R),transport:R.transport||(supportsFetch()?makeFetchTransport:makeXHRTransport)};initAndBind(BrowserClient,U),R.autoSessionTracking&&startSessionTracking()}function startSessionOnHub(R){R.startSession({ignoreDuration:!0}),R.captureSession()}function startSessionTracking(){var R=getGlobalObject(),E=R.document;if(typeof E>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var U=getCurrentHub();!U.captureSession||(startSessionOnHub(U),addInstrumentationHandler("history",({from:G,to:Y})=>{G===void 0||G===Y||startSessionOnHub(getCurrentHub())}))}function hasTracingEnabled(R){var E=getCurrentHub().getClient(),U=R||E&&E.getOptions();return!!U&&("tracesSampleRate"in U||"tracesSampler"in U)}function getActiveTransaction(R){var E=R||getCurrentHub(),U=E.getScope();return U&&U.getTransaction()}function msToSec(R){return R/1e3}function registerErrorInstrumentation(){addInstrumentationHandler("error",errorCallback),addInstrumentationHandler("unhandledrejection",errorCallback)}function errorCallback(){var R=getActiveTransaction();if(R){var E="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Transaction: ${E} -> Global error occured`),R.setStatus(E)}}class SpanRecorder{__init(){this.spans=[]}constructor(E=1e3){SpanRecorder.prototype.__init.call(this),this._maxlen=E}add(E){this.spans.length>this._maxlen?E.spanRecorder=void 0:this.spans.push(E)}}class Span{__init2(){this.traceId=uuid4()}__init3(){this.spanId=uuid4().substring(16)}__init4(){this.startTimestamp=timestampWithMs()}__init5(){this.tags={}}__init6(){this.data={}}constructor(E){if(Span.prototype.__init2.call(this),Span.prototype.__init3.call(this),Span.prototype.__init4.call(this),Span.prototype.__init5.call(this),Span.prototype.__init6.call(this),!E)return this;E.traceId&&(this.traceId=E.traceId),E.spanId&&(this.spanId=E.spanId),E.parentSpanId&&(this.parentSpanId=E.parentSpanId),"sampled"in E&&(this.sampled=E.sampled),E.op&&(this.op=E.op),E.description&&(this.description=E.description),E.data&&(this.data=E.data),E.tags&&(this.tags=E.tags),E.status&&(this.status=E.status),E.startTimestamp&&(this.startTimestamp=E.startTimestamp),E.endTimestamp&&(this.endTimestamp=E.endTimestamp)}startChild(E){var U=new Span({...E,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(U.spanRecorder=this.spanRecorder,U.spanRecorder&&U.spanRecorder.add(U),U.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&U.transaction){var G=E&&E.op||"< unknown op >",Y=U.transaction.name||"< unknown name >",J=U.transaction.spanId,Q=`[Tracing] Starting '${G}' span on transaction '${Y}' (${J}).`;U.transaction.metadata.spanMetadata[U.spanId]={logMessage:Q},logger$1.log(Q)}return U}setTag(E,U){return this.tags={...this.tags,[E]:U},this}setData(E,U){return this.data={...this.data,[E]:U},this}setStatus(E){return this.status=E,this}setHttpStatus(E){this.setTag("http.status_code",String(E));var U=spanStatusfromHttpCode(E);return U!=="unknown_error"&&this.setStatus(U),this}isSuccess(){return this.status==="ok"}finish(E){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:U}=this.transaction.metadata.spanMetadata[this.spanId];U&&logger$1.log(U.replace("Starting","Finishing"))}this.endTimestamp=typeof E=="number"?E:timestampWithMs()}toTraceparent(){let E="";return this.sampled!==void 0&&(E=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${E}`}toContext(){return dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(E){return this.data=_nullishCoalesce(E.data,()=>({})),this.description=E.description,this.endTimestamp=E.endTimestamp,this.op=E.op,this.parentSpanId=E.parentSpanId,this.sampled=E.sampled,this.spanId=_nullishCoalesce(E.spanId,()=>this.spanId),this.startTimestamp=_nullishCoalesce(E.startTimestamp,()=>this.startTimestamp),this.status=E.status,this.tags=_nullishCoalesce(E.tags,()=>({})),this.traceId=_nullishCoalesce(E.traceId,()=>this.traceId),this}getTraceContext(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function spanStatusfromHttpCode(R){if(R<400&&R>=100)return"ok";if(R>=400&&R<500)switch(R){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(R>=500&&R<600)switch(R){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class Transaction extends Span{__init(){this._measurements={}}__init2(){this._frozenDynamicSamplingContext=void 0}constructor(E,U){super(E),Transaction.prototype.__init.call(this),Transaction.prototype.__init2.call(this),this._hub=U||getCurrentHub(),this._name=E.name||"",this.metadata={source:"custom",...E.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=E.trimEnd,this.transaction=this;var G=this.metadata.dynamicSamplingContext;G&&(this._frozenDynamicSamplingContext={...G})}get name(){return this._name}set name(E){this.setName(E)}setName(E,U="custom"){(E!==this.name||U!==this.metadata.source)&&this.metadata.changes.push({source:this.metadata.source,timestamp:timestampInSeconds(),propagations:this.metadata.propagations}),this._name=E,this.metadata.source=U}initSpanRecorder(E=1e3){this.spanRecorder||(this.spanRecorder=new SpanRecorder(E)),this.spanRecorder.add(this)}setMeasurement(E,U,G=""){this._measurements[E]={value:U,unit:G}}setMetadata(E){this.metadata={...this.metadata,...E}}finish(E){if(this.endTimestamp===void 0){if(this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(E),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");var U=this._hub.getClient();U&&U.recordDroppedEvent("sample_rate","transaction");return}var G=this.spanRecorder?this.spanRecorder.spans.filter(X=>X!==this&&X.endTimestamp):[];this._trimEnd&&G.length>0&&(this.endTimestamp=G.reduce((X,Z)=>X.endTimestamp&&Z.endTimestamp?X.endTimestamp>Z.endTimestamp?X:Z:X).endTimestamp);var Y=this.metadata,J={contexts:{trace:this.getTraceContext()},spans:G,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...Y,dynamicSamplingContext:this.getDynamicSamplingContext()},...Y.source&&{transaction_info:{source:Y.source,changes:Y.changes,propagations:Y.propagations}}},Q=Object.keys(this._measurements).length>0;return Q&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),J.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(J)}}toContext(){var E=super.toContext();return dropUndefinedKeys({...E,name:this.name,trimEnd:this._trimEnd})}updateWithContext(E){return super.updateWithContext(E),this.name=_nullishCoalesce(E.name,()=>""),this._trimEnd=E.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;var E=this._hub||getCurrentHub(),U=E&&E.getClient();if(!U)return{};const{environment:G,release:Y}=U.getOptions()||{},{publicKey:J}=U.getDsn()||{};var Q=(this.metadata.transactionSampling||{}).rate,X=Q!==void 0?Q.toString():void 0,Z=E.getScope();const{segment:ee}=Z&&Z.getUser()||{};var te=this.metadata.source,ne=te&&te!=="url"?this.name:void 0,oe=dropUndefinedKeys({environment:G,release:Y,transaction:ne,user_segment:ee,public_key:J,trace_id:this.traceId,sample_rate:X});return oe}}var DEFAULT_IDLE_TIMEOUT=1e3,DEFAULT_FINAL_TIMEOUT=3e4,HEARTBEAT_INTERVAL=5e3;class IdleTransactionSpanRecorder extends SpanRecorder{constructor(E,U,G,Y){super(Y),this._pushActivity=E,this._popActivity=U,this.transactionSpanId=G}add(E){E.spanId!==this.transactionSpanId&&(E.finish=U=>{E.endTimestamp=typeof U=="number"?U:timestampWithMs(),this._popActivity(E.spanId)},E.endTimestamp===void 0&&this._pushActivity(E.spanId)),super.add(E)}}class IdleTransaction extends Transaction{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(E,U,G=DEFAULT_IDLE_TIMEOUT,Y=DEFAULT_FINAL_TIMEOUT,J=!1){super(E,U),this._idleHub=U,this._idleTimeout=G,this._finalTimeout=Y,this._onScope=J,IdleTransaction.prototype.__init.call(this),IdleTransaction.prototype.__init2.call(this),IdleTransaction.prototype.__init3.call(this),IdleTransaction.prototype.__init4.call(this),J&&(clearActiveTransaction(U),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),U.configureScope(Q=>Q.setSpan(this))),this._startIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())},this._finalTimeout)}finish(E=timestampWithMs()){if(this._finished=!0,this.activities={},this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] finishing IdleTransaction",new Date(E*1e3).toISOString(),this.op);for(var U of this._beforeFinishCallbacks)U(this,E);this.spanRecorder.spans=this.spanRecorder.spans.filter(G=>{if(G.spanId===this.spanId)return!0;G.endTimestamp||(G.endTimestamp=E,G.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(G,void 0,2)));var Y=G.startTimestamp<E;return Y||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(G,void 0,2)),Y}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] No active IdleTransaction");return this._onScope&&clearActiveTransaction(this._idleHub),super.finish(E)}registerBeforeFinishCallback(E){this._beforeFinishCallbacks.push(E)}initSpanRecorder(E){if(!this.spanRecorder){var U=Y=>{this._finished||this._pushActivity(Y)},G=Y=>{this._finished||this._popActivity(Y)};this.spanRecorder=new IdleTransactionSpanRecorder(U,G,this.spanId,E),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(E){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&this.finish(E)},this._idleTimeout)}_pushActivity(E){this._cancelIdleTimeout(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] pushActivity: ${E}`),this.activities[E]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(E){if(this.activities[E]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] popActivity ${E}`),delete this.activities[E],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){var U=timestampWithMs()+this._idleTimeout/1e3;this._startIdleTimeout(U)}}_beat(){if(!this._finished){var E=Object.keys(this.activities).join("");E===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=E,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},HEARTBEAT_INTERVAL)}}function clearActiveTransaction(R){var E=R.getScope();if(E){var U=E.getTransaction();U&&E.setSpan(void 0)}}function traceHeaders(){var R=this.getScope();if(R){var E=R.getSpan();if(E)return{"sentry-trace":E.toTraceparent()}}return{}}function sample(R,E,U){if(!hasTracingEnabled(E))return R.sampled=!1,R;if(R.sampled!==void 0)return R.setMetadata({transactionSampling:{method:"explicitly_set",rate:Number(R.sampled)}}),R;let G;return typeof E.tracesSampler=="function"?(G=E.tracesSampler(U),R.setMetadata({transactionSampling:{method:"client_sampler",rate:Number(G)}})):U.parentSampled!==void 0?(G=U.parentSampled,R.setMetadata({transactionSampling:{method:"inheritance"}})):(G=E.tracesSampleRate,R.setMetadata({transactionSampling:{method:"client_rate",rate:Number(G)}})),isValidSampleRate(G)?G?(R.sampled=Math.random()<G,R.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] starting ${R.op} transaction - ${R.name}`),R):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(G)})`),R)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Discarding transaction because ${typeof E.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),R.sampled=!1,R):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("[Tracing] Discarding transaction because of invalid sample rate."),R.sampled=!1,R)}function isValidSampleRate(R){return isNaN$1(R)||!(typeof R=="number"||typeof R=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(R)} of type ${JSON.stringify(typeof R)}.`),!1):R<0||R>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${R}.`),!1):!0}function _startTransaction(R,E){var U=this.getClient(),G=U&&U.getOptions()||{};let Y=new Transaction(R,this);return Y=sample(Y,G,{parentSampled:R.parentSampled,transactionContext:R,...E}),Y.sampled&&Y.initSpanRecorder(G._experiments&&G._experiments.maxSpans),Y}function startIdleTransaction(R,E,U,G,Y,J){var Q=R.getClient(),X=Q&&Q.getOptions()||{};let Z=new IdleTransaction(E,R,U,G,Y);return Z=sample(Z,X,{parentSampled:E.parentSampled,transactionContext:E,...J}),Z.sampled&&Z.initSpanRecorder(X._experiments&&X._experiments.maxSpans),Z}function _addTracingExtensions(){var R=getMainCarrier();!R.__SENTRY__||(R.__SENTRY__.extensions=R.__SENTRY__.extensions||{},R.__SENTRY__.extensions.startTransaction||(R.__SENTRY__.extensions.startTransaction=_startTransaction),R.__SENTRY__.extensions.traceHeaders||(R.__SENTRY__.extensions.traceHeaders=traceHeaders))}function _autoloadDatabaseIntegrations(){var R=getMainCarrier();if(!!R.__SENTRY__){var E={mongodb(){var G=dynamicRequire(module,"./integrations/node/mongo");return new G.Mongo},mongoose(){var G=dynamicRequire(module,"./integrations/node/mongo");return new G.Mongo({mongoose:!0})},mysql(){var G=dynamicRequire(module,"./integrations/node/mysql");return new G.Mysql},pg(){var G=dynamicRequire(module,"./integrations/node/postgres");return new G.Postgres}},U=Object.keys(E).filter(G=>!!loadModule(G)).map(G=>{try{return E[G]()}catch{return}}).filter(G=>G);U.length>0&&(R.__SENTRY__.integrations=[...R.__SENTRY__.integrations||[],...U])}}function addExtensionMethods(){_addTracingExtensions(),isNodeEnv()&&_autoloadDatabaseIntegrations(),registerErrorInstrumentation()}var global$3=getGlobalObject();function registerBackgroundTabDetection(){global$3&&global$3.document?global$3.document.addEventListener("visibilitychange",()=>{var R=getActiveTransaction();if(global$3.document.hidden&&R){var E="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Transaction: ${E} -> since tab moved to the background, op: ${R.op}`),R.status||R.setStatus(E),R.setTag("visibilitychange","document.hidden"),R.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var bindReporter=(R,E,U)=>{let G;return Y=>{E.value>=0&&(Y||U)&&(E.delta=E.value-(G||0),(E.delta||G===void 0)&&(G=E.value,R(E)))}},generateUniqueID=()=>`v2-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,initMetric=(R,E)=>({name:R,value:_nullishCoalesce(E,()=>-1),delta:0,entries:[],id:generateUniqueID()}),observe=(R,E)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(R)){if(R==="first-input"&&!("PerformanceEventTiming"in self))return;var U=new PerformanceObserver(G=>G.getEntries().map(E));return U.observe({type:R,buffered:!0}),U}}catch{}},onHidden=(R,E)=>{var U=G=>{(G.type==="pagehide"||getGlobalObject().document.visibilityState==="hidden")&&(R(G),E&&(removeEventListener("visibilitychange",U,!0),removeEventListener("pagehide",U,!0)))};addEventListener("visibilitychange",U,!0),addEventListener("pagehide",U,!0)},getCLS=(R,E)=>{var U=initMetric("CLS",0);let G,Y=0,J=[];var Q=Z=>{if(Z&&!Z.hadRecentInput){var ee=J[0],te=J[J.length-1];Y&&J.length!==0&&Z.startTime-te.startTime<1e3&&Z.startTime-ee.startTime<5e3?(Y+=Z.value,J.push(Z)):(Y=Z.value,J=[Z]),Y>U.value&&(U.value=Y,U.entries=J,G&&G())}},X=observe("layout-shift",Q);X&&(G=bindReporter(R,U,E),onHidden(()=>{X.takeRecords().map(Q),G(!0)}))};let firstHiddenTime=-1;var initHiddenTime=()=>getGlobalObject().document.visibilityState==="hidden"?0:1/0,trackChanges=()=>{onHidden(({timeStamp:R})=>{firstHiddenTime=R},!0)},getVisibilityWatcher=()=>(firstHiddenTime<0&&(firstHiddenTime=initHiddenTime(),trackChanges()),{get firstHiddenTime(){return firstHiddenTime}}),getFID=(R,E)=>{var U=getVisibilityWatcher(),G=initMetric("FID");let Y;var J=X=>{Y&&X.startTime<U.firstHiddenTime&&(G.value=X.processingStart-X.startTime,G.entries.push(X),Y(!0))},Q=observe("first-input",J);Q&&(Y=bindReporter(R,G,E),onHidden(()=>{Q.takeRecords().map(J),Q.disconnect()},!0))},reportedMetricIDs={},getLCP=(R,E)=>{var U=getVisibilityWatcher(),G=initMetric("LCP");let Y;var J=Z=>{var ee=Z.startTime;ee<U.firstHiddenTime&&(G.value=ee,G.entries.push(Z)),Y&&Y()},Q=observe("largest-contentful-paint",J);if(Q){Y=bindReporter(R,G,E);var X=()=>{reportedMetricIDs[G.id]||(Q.takeRecords().map(J),Q.disconnect(),reportedMetricIDs[G.id]=!0,Y(!0))};["keydown","click"].forEach(Z=>{addEventListener(Z,X,{once:!0,capture:!0})}),onHidden(X,!0)}};function isMeasurementValue(R){return typeof R=="number"&&isFinite(R)}function _startChild(R,{startTimestamp:E,...U}){return E&&R.startTimestamp>E&&(R.startTimestamp=E),R.startChild({startTimestamp:E,...U})}var global$2=getGlobalObject();function getBrowserPerformanceAPI(){return global$2&&global$2.addEventListener&&global$2.performance}let _performanceCursor=0,_measurements={},_lcpEntry,_clsEntry;function startTrackingWebVitals(R=!1){var E=getBrowserPerformanceAPI();E&&browserPerformanceTimeOrigin&&(E.mark&&global$2.performance.mark("sentry-tracing-init"),_trackCLS(),_trackLCP(R),_trackFID())}function startTrackingLongTasks(){var R=E=>{var U=getActiveTransaction();if(!!U){var G=msToSec(browserPerformanceTimeOrigin+E.startTime),Y=msToSec(E.duration);U.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:G,endTimestamp:G+Y})}};observe("longtask",R)}function _trackCLS(){getCLS(R=>{var E=R.entries.pop();!E||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding CLS"),_measurements.cls={value:R.value,unit:""},_clsEntry=E)})}function _trackLCP(R){getLCP(E=>{var U=E.entries.pop();!U||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding LCP"),_measurements.lcp={value:E.value,unit:"millisecond"},_lcpEntry=U)},R)}function _trackFID(){getFID(R=>{var E=R.entries.pop();if(!!E){var U=msToSec(browserPerformanceTimeOrigin),G=msToSec(E.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding FID"),_measurements.fid={value:R.value,unit:"millisecond"},_measurements["mark.fid"]={value:U+G,unit:"second"}}})}function addPerformanceEntries(R){var E=getBrowserPerformanceAPI();if(!E||!global$2.performance.getEntries||!browserPerformanceTimeOrigin)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Tracing] Adding & adjusting spans using Performance API");var U=msToSec(browserPerformanceTimeOrigin),G=E.getEntries();let Y,J;if(G.slice(_performanceCursor).forEach(X=>{var Z=msToSec(X.startTime),ee=msToSec(X.duration);if(!(R.op==="navigation"&&U+Z<R.startTimestamp))switch(X.entryType){case"navigation":{_addNavigationSpans(R,X,U),Y=U+msToSec(X.responseStart),J=U+msToSec(X.requestStart);break}case"mark":case"paint":case"measure":{_addMeasureSpans(R,X,Z,ee,U);var te=getVisibilityWatcher(),ne=X.startTime<te.firstHiddenTime;X.name==="first-paint"&&ne&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding FP"),_measurements.fp={value:X.startTime,unit:"millisecond"}),X.name==="first-contentful-paint"&&ne&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding FCP"),_measurements.fcp={value:X.startTime,unit:"millisecond"});break}case"resource":{var oe=X.name.replace(global$2.location.origin,"");_addResourceSpans(R,X,oe,Z,ee,U);break}}}),_performanceCursor=Math.max(G.length-1,0),_trackNavigator(R),R.op==="pageload"){typeof Y=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding TTFB"),_measurements.ttfb={value:(Y-R.startTimestamp)*1e3,unit:"millisecond"},typeof J=="number"&&J<=Y&&(_measurements["ttfb.requestTime"]={value:(Y-J)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(X=>{if(!(!_measurements[X]||U>=R.startTimestamp)){var Z=_measurements[X].value,ee=U+msToSec(Z),te=Math.abs((ee-R.startTimestamp)*1e3),ne=te-Z;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Measurements] Normalized ${X} from ${Z} to ${te} (${ne})`),_measurements[X].value=te}});var Q=_measurements["mark.fid"];Q&&_measurements.fid&&(_startChild(R,{description:"first input delay",endTimestamp:Q.value+msToSec(_measurements.fid.value),op:"web.vitals",startTimestamp:Q.value}),delete _measurements["mark.fid"]),"fcp"in _measurements||delete _measurements.cls,Object.keys(_measurements).forEach(X=>{R.setMeasurement(X,_measurements[X].value,_measurements[X].unit)}),_tagMetricInfo(R)}_lcpEntry=void 0,_clsEntry=void 0,_measurements={}}function _addMeasureSpans(R,E,U,G,Y){var J=Y+U,Q=J+G;return _startChild(R,{description:E.name,endTimestamp:Q,op:E.entryType,startTimestamp:J}),J}function _addNavigationSpans(R,E,U){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(G=>{_addPerformanceNavigationTiming(R,E,G,U)}),_addPerformanceNavigationTiming(R,E,"secureConnection",U,"TLS/SSL","connectEnd"),_addPerformanceNavigationTiming(R,E,"fetch",U,"cache","domainLookupStart"),_addPerformanceNavigationTiming(R,E,"domainLookup",U,"DNS"),_addRequest(R,E,U)}function _addPerformanceNavigationTiming(R,E,U,G,Y,J){var Q=J?E[J]:E[`${U}End`],X=E[`${U}Start`];!X||!Q||_startChild(R,{op:"browser",description:_nullishCoalesce(Y,()=>U),startTimestamp:G+msToSec(X),endTimestamp:G+msToSec(Q)})}function _addRequest(R,E,U){_startChild(R,{op:"browser",description:"request",startTimestamp:U+msToSec(E.requestStart),endTimestamp:U+msToSec(E.responseEnd)}),_startChild(R,{op:"browser",description:"response",startTimestamp:U+msToSec(E.responseStart),endTimestamp:U+msToSec(E.responseEnd)})}function _addResourceSpans(R,E,U,G,Y,J){if(!(E.initiatorType==="xmlhttprequest"||E.initiatorType==="fetch")){var Q={};"transferSize"in E&&(Q["Transfer Size"]=E.transferSize),"encodedBodySize"in E&&(Q["Encoded Body Size"]=E.encodedBodySize),"decodedBodySize"in E&&(Q["Decoded Body Size"]=E.decodedBodySize);var X=J+G,Z=X+Y;_startChild(R,{description:U,endTimestamp:Z,op:E.initiatorType?`resource.${E.initiatorType}`:"resource",startTimestamp:X,data:Q})}}function _trackNavigator(R){var E=global$2.navigator;if(!!E){var U=E.connection;U&&(U.effectiveType&&R.setTag("effectiveConnectionType",U.effectiveType),U.type&&R.setTag("connectionType",U.type),isMeasurementValue(U.rtt)&&(_measurements["connection.rtt"]={value:U.rtt,unit:"millisecond"}),isMeasurementValue(U.downlink)&&(_measurements["connection.downlink"]={value:U.downlink,unit:""})),isMeasurementValue(E.deviceMemory)&&R.setTag("deviceMemory",`${E.deviceMemory} GB`),isMeasurementValue(E.hardwareConcurrency)&&R.setTag("hardwareConcurrency",String(E.hardwareConcurrency))}}function _tagMetricInfo(R){_lcpEntry&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding LCP Data"),_lcpEntry.element&&R.setTag("lcp.element",htmlTreeAsString(_lcpEntry.element)),_lcpEntry.id&&R.setTag("lcp.id",_lcpEntry.id),_lcpEntry.url&&R.setTag("lcp.url",_lcpEntry.url.trim().slice(0,200)),R.setTag("lcp.size",_lcpEntry.size)),_clsEntry&&_clsEntry.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log("[Measurements] Adding CLS Data"),_clsEntry.sources.forEach((E,U)=>R.setTag(`cls.source.${U+1}`,htmlTreeAsString(E.node))))}var DEFAULT_TRACING_ORIGINS=["localhost",/^\//],defaultRequestInstrumentationOptions={traceFetch:!0,traceXHR:!0,tracingOrigins:DEFAULT_TRACING_ORIGINS};function instrumentOutgoingRequests(R){const{traceFetch:E,traceXHR:U,tracingOrigins:G,shouldCreateSpanForRequest:Y}={...defaultRequestInstrumentationOptions,...R};var J={},Q=ee=>{if(J[ee])return J[ee];var te=G;return J[ee]=te.some(ne=>isMatchingPattern(ee,ne))&&!isMatchingPattern(ee,"sentry_key"),J[ee]};let X=Q;typeof Y=="function"&&(X=ee=>Q(ee)&&Y(ee));var Z={};E&&addInstrumentationHandler("fetch",ee=>{fetchCallback(ee,X,Z)}),U&&addInstrumentationHandler("xhr",ee=>{xhrCallback(ee,X,Z)})}function fetchCallback(R,E,U){if(!(!hasTracingEnabled()||!(R.fetchData&&E(R.fetchData.url)))){if(R.endTimestamp){var G=R.fetchData.__span;if(!G)return;var Y=U[G];Y&&(R.response?Y.setHttpStatus(R.response.status):R.error&&Y.setStatus("internal_error"),Y.finish(),delete U[G]);return}var J=getActiveTransaction();if(J){var Y=J.startChild({data:{...R.fetchData,type:"fetch"},description:`${R.fetchData.method} ${R.fetchData.url}`,op:"http.client"});R.fetchData.__span=Y.spanId,U[Y.spanId]=Y;var Q=R.args[0];R.args[1]=R.args[1]||{};var X=R.args[1];X.headers=addTracingHeadersToFetchRequest(Q,J.getDynamicSamplingContext(),Y,X),J.metadata.propagations+=1}}}function addTracingHeadersToFetchRequest(R,E,U,G){var Y=dynamicSamplingContextToSentryBaggageHeader(E),J=U.toTraceparent(),Q=typeof Request<"u"&&isInstanceOf(R,Request)?R.headers:G.headers;if(Q)if(typeof Headers<"u"&&isInstanceOf(Q,Headers)){var X=new Headers(Q);return X.append("sentry-trace",J),Y&&X.append(BAGGAGE_HEADER_NAME,Y),X}else if(Array.isArray(Q)){var X=[...Q,["sentry-trace",J]];return Y&&X.push([BAGGAGE_HEADER_NAME,Y]),X}else{var Z="baggage"in Q?Q.baggage:void 0,ee=[];return Array.isArray(Z)?ee.push(...Z):Z&&ee.push(Z),Y&&ee.push(Y),{...Q,"sentry-trace":J,baggage:ee.length>0?ee.join(","):void 0}}else return{"sentry-trace":J,baggage:Y}}function xhrCallback(R,E,U){if(!(!hasTracingEnabled()||R.xhr&&R.xhr.__sentry_own_request__||!(R.xhr&&R.xhr.__sentry_xhr__&&E(R.xhr.__sentry_xhr__.url)))){var G=R.xhr.__sentry_xhr__;if(R.endTimestamp){var Y=R.xhr.__sentry_xhr_span_id__;if(!Y)return;var J=U[Y];J&&(J.setHttpStatus(G.status_code),J.finish(),delete U[Y]);return}var Q=getActiveTransaction();if(Q){var J=Q.startChild({data:{...G.data,type:"xhr",method:G.method,url:G.url},description:`${G.method} ${G.url}`,op:"http.client"});if(R.xhr.__sentry_xhr_span_id__=J.spanId,U[R.xhr.__sentry_xhr_span_id__]=J,R.xhr.setRequestHeader)try{R.xhr.setRequestHeader("sentry-trace",J.toTraceparent());var X=Q.getDynamicSamplingContext(),Z=dynamicSamplingContextToSentryBaggageHeader(X);Z&&R.xhr.setRequestHeader(BAGGAGE_HEADER_NAME,Z),Q.metadata.propagations+=1}catch{}}}}var global$1=getGlobalObject();function instrumentRoutingWithDefaults(R,E=!0,U=!0){if(!global$1||!global$1.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("Could not initialize routing instrumentation due to invalid location");return}let G=global$1.location.href,Y;E&&(Y=R({name:global$1.location.pathname,op:"pageload",metadata:{source:"url"}})),U&&addInstrumentationHandler("history",({to:J,from:Q})=>{if(Q===void 0&&G&&G.indexOf(J)!==-1){G=void 0;return}Q!==J&&(G=void 0,Y&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Finishing current transaction with op: ${Y.op}`),Y.finish()),Y=R({name:global$1.location.pathname,op:"navigation",metadata:{source:"url"}}))})}var BROWSER_TRACING_INTEGRATION_ID="BrowserTracing",DEFAULT_BROWSER_TRACING_OPTIONS={idleTimeout:DEFAULT_IDLE_TIMEOUT,finalTimeout:DEFAULT_FINAL_TIMEOUT,markBackgroundTransactions:!0,routingInstrumentation:instrumentRoutingWithDefaults,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0},...defaultRequestInstrumentationOptions};class BrowserTracing{__init(){this.name=BROWSER_TRACING_INTEGRATION_ID}constructor(E){BrowserTracing.prototype.__init.call(this);let U=defaultRequestInstrumentationOptions.tracingOrigins;E&&(E.tracingOrigins&&Array.isArray(E.tracingOrigins)?U=E.tracingOrigins:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._emitOptionsWarning=!0)),this.options={...DEFAULT_BROWSER_TRACING_OPTIONS,...E,tracingOrigins:U};const{_metricOptions:G}=this.options;startTrackingWebVitals(G&&G._reportAllChanges),_optionalChain([this,"access",Y=>Y.options,"access",Y=>Y._experiments,"optionalAccess",Y=>Y.enableLongTask])&&startTrackingLongTasks()}setupOnce(E,U){this._getCurrentHub=U,this._emitOptionsWarning&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`[Tracing] We added a reasonable default for you: ${defaultRequestInstrumentationOptions.tracingOrigins}`));const{routingInstrumentation:G,startTransactionOnLocationChange:Y,startTransactionOnPageLoad:J,markBackgroundTransactions:Q,traceFetch:X,traceXHR:Z,tracingOrigins:ee,shouldCreateSpanForRequest:te}=this.options;G(ne=>this._createRouteTransaction(ne),J,Y),Q&&registerBackgroundTabDetection(),instrumentOutgoingRequests({traceFetch:X,traceXHR:Z,tracingOrigins:ee,shouldCreateSpanForRequest:te})}_createRouteTransaction(E){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.warn(`[Tracing] Did not create ${E.op} transaction because _getCurrentHub is invalid.`);return}const{beforeNavigate:U,idleTimeout:G,finalTimeout:Y}=this.options;var J=E.op==="pageload",Q=J?getMetaContent("sentry-trace"):null,X=J?getMetaContent("baggage"):null,Z=Q?extractTraceparentData(Q):void 0,ee=X?baggageHeaderToDynamicSamplingContext(X):void 0,te={...E,...Z,metadata:{...E.metadata,dynamicSamplingContext:Z&&!ee?{}:ee},trimEnd:!0},ne=typeof U=="function"?U(te):te,oe=ne===void 0?{...te,sampled:!1}:ne;oe.metadata=oe.name!==te.name?{...oe.metadata,source:"custom"}:oe.metadata,oe.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Will not send ${oe.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger$1.log(`[Tracing] Starting ${oe.op} transaction on scope`);var ce=this._getCurrentHub();const{location:pe}=getGlobalObject();var ye=startIdleTransaction(ce,oe,G,Y,!0,{location:pe});return ye.registerBeforeFinishCallback(Se=>{addPerformanceEntries(Se),Se.setTag("sentry_reportAllChanges",Boolean(this.options._metricOptions&&this.options._metricOptions._reportAllChanges))}),ye}}function getMetaContent(R){var E=getDomElement(`meta[name=${R}]`);return E?E.getAttribute("content"):null}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&addExtensionMethods();var DP=20,RM=1,MAX_DP=1e6,MAX_POWER=1e6,NE=-7,PE=21,STRICT=!1,NAME="[big.js] ",INVALID=NAME+"Invalid ",INVALID_DP=INVALID+"decimal places",INVALID_RM=INVALID+"rounding mode",DIV_BY_ZERO=NAME+"Division by zero",P={},UNDEFINED=void 0,NUMERIC=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _Big_(){function R(E){var U=this;if(!(U instanceof R))return E===UNDEFINED?_Big_():new R(E);if(E instanceof R)U.s=E.s,U.e=E.e,U.c=E.c.slice();else{if(typeof E!="string"){if(R.strict===!0&&typeof E!="bigint")throw TypeError(INVALID+"value");E=E===0&&1/E<0?"-0":String(E)}parse$1(U,E)}U.constructor=R}return R.prototype=P,R.DP=DP,R.RM=RM,R.NE=NE,R.PE=PE,R.strict=STRICT,R.roundDown=0,R.roundHalfUp=1,R.roundHalfEven=2,R.roundUp=3,R}function parse$1(R,E){var U,G,Y;if(!NUMERIC.test(E))throw Error(INVALID+"number");for(R.s=E.charAt(0)=="-"?(E=E.slice(1),-1):1,(U=E.indexOf("."))>-1&&(E=E.replace(".","")),(G=E.search(/e/i))>0?(U<0&&(U=G),U+=+E.slice(G+1),E=E.substring(0,G)):U<0&&(U=E.length),Y=E.length,G=0;G<Y&&E.charAt(G)=="0";)++G;if(G==Y)R.c=[R.e=0];else{for(;Y>0&&E.charAt(--Y)=="0";);for(R.e=U-G-1,R.c=[],U=0;G<=Y;)R.c[U++]=+E.charAt(G++)}return R}function round(R,E,U,G){var Y=R.c;if(U===UNDEFINED&&(U=R.constructor.RM),U!==0&&U!==1&&U!==2&&U!==3)throw Error(INVALID_RM);if(E<1)G=U===3&&(G||!!Y[0])||E===0&&(U===1&&Y[0]>=5||U===2&&(Y[0]>5||Y[0]===5&&(G||Y[1]!==UNDEFINED))),Y.length=1,G?(R.e=R.e-E+1,Y[0]=1):Y[0]=R.e=0;else if(E<Y.length){if(G=U===1&&Y[E]>=5||U===2&&(Y[E]>5||Y[E]===5&&(G||Y[E+1]!==UNDEFINED||Y[E-1]&1))||U===3&&(G||!!Y[0]),Y.length=E,G){for(;++Y[--E]>9;)if(Y[E]=0,E===0){++R.e,Y.unshift(1);break}}for(E=Y.length;!Y[--E];)Y.pop()}return R}function stringify(R,E,U){var G=R.e,Y=R.c.join(""),J=Y.length;if(E)Y=Y.charAt(0)+(J>1?"."+Y.slice(1):"")+(G<0?"e":"e+")+G;else if(G<0){for(;++G;)Y="0"+Y;Y="0."+Y}else if(G>0)if(++G>J)for(G-=J;G--;)Y+="0";else G<J&&(Y=Y.slice(0,G)+"."+Y.slice(G));else J>1&&(Y=Y.charAt(0)+"."+Y.slice(1));return R.s<0&&U?"-"+Y:Y}P.abs=function(){var R=new this.constructor(this);return R.s=1,R};P.cmp=function(R){var E,U=this,G=U.c,Y=(R=new U.constructor(R)).c,J=U.s,Q=R.s,X=U.e,Z=R.e;if(!G[0]||!Y[0])return G[0]?J:Y[0]?-Q:0;if(J!=Q)return J;if(E=J<0,X!=Z)return X>Z^E?1:-1;for(Q=(X=G.length)<(Z=Y.length)?X:Z,J=-1;++J<Q;)if(G[J]!=Y[J])return G[J]>Y[J]^E?1:-1;return X==Z?0:X>Z^E?1:-1};P.div=function(R){var E=this,U=E.constructor,G=E.c,Y=(R=new U(R)).c,J=E.s==R.s?1:-1,Q=U.DP;if(Q!==~~Q||Q<0||Q>MAX_DP)throw Error(INVALID_DP);if(!Y[0])throw Error(DIV_BY_ZERO);if(!G[0])return R.s=J,R.c=[R.e=0],R;var X,Z,ee,te,ne,oe=Y.slice(),ce=X=Y.length,pe=G.length,ye=G.slice(0,X),Se=ye.length,ge=R,_e=ge.c=[],Te=0,Ee=Q+(ge.e=E.e-R.e)+1;for(ge.s=J,J=Ee<0?0:Ee,oe.unshift(0);Se++<X;)ye.push(0);do{for(ee=0;ee<10;ee++){if(X!=(Se=ye.length))te=X>Se?1:-1;else for(ne=-1,te=0;++ne<X;)if(Y[ne]!=ye[ne]){te=Y[ne]>ye[ne]?1:-1;break}if(te<0){for(Z=Se==X?Y:oe;Se;){if(ye[--Se]<Z[Se]){for(ne=Se;ne&&!ye[--ne];)ye[ne]=9;--ye[ne],ye[Se]+=10}ye[Se]-=Z[Se]}for(;!ye[0];)ye.shift()}else break}_e[Te++]=te?ee:++ee,ye[0]&&te?ye[Se]=G[ce]||0:ye=[G[ce]]}while((ce++<pe||ye[0]!==UNDEFINED)&&J--);return!_e[0]&&Te!=1&&(_e.shift(),ge.e--,Ee--),Te>Ee&&round(ge,Ee,U.RM,ye[0]!==UNDEFINED),ge};P.eq=function(R){return this.cmp(R)===0};P.gt=function(R){return this.cmp(R)>0};P.gte=function(R){return this.cmp(R)>-1};P.lt=function(R){return this.cmp(R)<0};P.lte=function(R){return this.cmp(R)<1};P.minus=P.sub=function(R){var E,U,G,Y,J=this,Q=J.constructor,X=J.s,Z=(R=new Q(R)).s;if(X!=Z)return R.s=-Z,J.plus(R);var ee=J.c.slice(),te=J.e,ne=R.c,oe=R.e;if(!ee[0]||!ne[0])return ne[0]?R.s=-Z:ee[0]?R=new Q(J):R.s=1,R;if(X=te-oe){for((Y=X<0)?(X=-X,G=ee):(oe=te,G=ne),G.reverse(),Z=X;Z--;)G.push(0);G.reverse()}else for(U=((Y=ee.length<ne.length)?ee:ne).length,X=Z=0;Z<U;Z++)if(ee[Z]!=ne[Z]){Y=ee[Z]<ne[Z];break}if(Y&&(G=ee,ee=ne,ne=G,R.s=-R.s),(Z=(U=ne.length)-(E=ee.length))>0)for(;Z--;)ee[E++]=0;for(Z=E;U>X;){if(ee[--U]<ne[U]){for(E=U;E&&!ee[--E];)ee[E]=9;--ee[E],ee[U]+=10}ee[U]-=ne[U]}for(;ee[--Z]===0;)ee.pop();for(;ee[0]===0;)ee.shift(),--oe;return ee[0]||(R.s=1,ee=[oe=0]),R.c=ee,R.e=oe,R};P.mod=function(R){var E,U=this,G=U.constructor,Y=U.s,J=(R=new G(R)).s;if(!R.c[0])throw Error(DIV_BY_ZERO);return U.s=R.s=1,E=R.cmp(U)==1,U.s=Y,R.s=J,E?new G(U):(Y=G.DP,J=G.RM,G.DP=G.RM=0,U=U.div(R),G.DP=Y,G.RM=J,this.minus(U.times(R)))};P.neg=function(){var R=new this.constructor(this);return R.s=-R.s,R};P.plus=P.add=function(R){var E,U,G,Y=this,J=Y.constructor;if(R=new J(R),Y.s!=R.s)return R.s=-R.s,Y.minus(R);var Q=Y.e,X=Y.c,Z=R.e,ee=R.c;if(!X[0]||!ee[0])return ee[0]||(X[0]?R=new J(Y):R.s=Y.s),R;if(X=X.slice(),E=Q-Z){for(E>0?(Z=Q,G=ee):(E=-E,G=X),G.reverse();E--;)G.push(0);G.reverse()}for(X.length-ee.length<0&&(G=ee,ee=X,X=G),E=ee.length,U=0;E;X[E]%=10)U=(X[--E]=X[E]+ee[E]+U)/10|0;for(U&&(X.unshift(U),++Z),E=X.length;X[--E]===0;)X.pop();return R.c=X,R.e=Z,R};P.pow=function(R){var E=this,U=new E.constructor("1"),G=U,Y=R<0;if(R!==~~R||R<-MAX_POWER||R>MAX_POWER)throw Error(INVALID+"exponent");for(Y&&(R=-R);R&1&&(G=G.times(E)),R>>=1,!!R;)E=E.times(E);return Y?U.div(G):G};P.prec=function(R,E){if(R!==~~R||R<1||R>MAX_DP)throw Error(INVALID+"precision");return round(new this.constructor(this),R,E)};P.round=function(R,E){if(R===UNDEFINED)R=0;else if(R!==~~R||R<-MAX_DP||R>MAX_DP)throw Error(INVALID_DP);return round(new this.constructor(this),R+this.e+1,E)};P.sqrt=function(){var R,E,U,G=this,Y=G.constructor,J=G.s,Q=G.e,X=new Y("0.5");if(!G.c[0])return new Y(G);if(J<0)throw Error(NAME+"No square root");J=Math.sqrt(G+""),J===0||J===1/0?(E=G.c.join(""),E.length+Q&1||(E+="0"),J=Math.sqrt(E),Q=((Q+1)/2|0)-(Q<0||Q&1),R=new Y((J==1/0?"5e":(J=J.toExponential()).slice(0,J.indexOf("e")+1))+Q)):R=new Y(J+""),Q=R.e+(Y.DP+=4);do U=R,R=X.times(U.plus(G.div(U)));while(U.c.slice(0,Q).join("")!==R.c.slice(0,Q).join(""));return round(R,(Y.DP-=4)+R.e+1,Y.RM)};P.times=P.mul=function(R){var E,U=this,G=U.constructor,Y=U.c,J=(R=new G(R)).c,Q=Y.length,X=J.length,Z=U.e,ee=R.e;if(R.s=U.s==R.s?1:-1,!Y[0]||!J[0])return R.c=[R.e=0],R;for(R.e=Z+ee,Q<X&&(E=Y,Y=J,J=E,ee=Q,Q=X,X=ee),E=new Array(ee=Q+X);ee--;)E[ee]=0;for(Z=X;Z--;){for(X=0,ee=Q+Z;ee>Z;)X=E[ee]+J[Z]*Y[ee-Z-1]+X,E[ee--]=X%10,X=X/10|0;E[ee]=X}for(X?++R.e:E.shift(),Z=E.length;!E[--Z];)E.pop();return R.c=E,R};P.toExponential=function(R,E){var U=this,G=U.c[0];if(R!==UNDEFINED){if(R!==~~R||R<0||R>MAX_DP)throw Error(INVALID_DP);for(U=round(new U.constructor(U),++R,E);U.c.length<R;)U.c.push(0)}return stringify(U,!0,!!G)};P.toFixed=function(R,E){var U=this,G=U.c[0];if(R!==UNDEFINED){if(R!==~~R||R<0||R>MAX_DP)throw Error(INVALID_DP);for(U=round(new U.constructor(U),R+U.e+1,E),R=R+U.e+1;U.c.length<R;)U.c.push(0)}return stringify(U,!1,!!G)};P[Symbol.for("nodejs.util.inspect.custom")]=P.toJSON=P.toString=function(){var R=this,E=R.constructor;return stringify(R,R.e<=E.NE||R.e>=E.PE,!!R.c[0])};P.toNumber=function(){var R=Number(stringify(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(R.toString()))throw Error(NAME+"Imprecise conversion");return R};P.toPrecision=function(R,E){var U=this,G=U.constructor,Y=U.c[0];if(R!==UNDEFINED){if(R!==~~R||R<1||R>MAX_DP)throw Error(INVALID+"precision");for(U=round(new G(U),R,E);U.c.length<R;)U.c.push(0)}return stringify(U,R<=U.e||U.e<=G.NE||U.e>=G.PE,!!Y)};P.valueOf=function(){var R=this,E=R.constructor;if(E.strict===!0)throw Error(NAME+"valueOf disallowed");return stringify(R,R.e<=E.NE||R.e>=E.PE,!0)};var Big=_Big_();const LOAD_BASE=R=>Promise.reject(new Error(`No base found for "${R}"`));class Multibases{constructor(E){this._basesByName={},this._basesByPrefix={},this._loadBase=E.loadBase||LOAD_BASE;for(const U of E.bases)this.addBase(U)}addBase(E){if(this._basesByName[E.name]||this._basesByPrefix[E.prefix])throw new Error(`Codec already exists for codec "${E.name}"`);this._basesByName[E.name]=E,this._basesByPrefix[E.prefix]=E}removeBase(E){delete this._basesByName[E.name],delete this._basesByPrefix[E.prefix]}async getBase(E){if(this._basesByName[E])return this._basesByName[E];if(this._basesByPrefix[E])return this._basesByPrefix[E];const U=await this._loadBase(E);return this._basesByName[U.name]==null&&this._basesByPrefix[U.prefix]==null&&this.addBase(U),U}listBases(){return Object.values(this._basesByName)}}const LOAD_CODEC=R=>Promise.reject(new Error(`No codec found for "${R}"`));class Multicodecs{constructor(E){this._codecsByName={},this._codecsByCode={},this._loadCodec=E.loadCodec||LOAD_CODEC;for(const U of E.codecs)this.addCodec(U)}addCodec(E){if(this._codecsByName[E.name]||this._codecsByCode[E.code])throw new Error(`Resolver already exists for codec "${E.name}"`);this._codecsByName[E.name]=E,this._codecsByCode[E.code]=E}removeCodec(E){delete this._codecsByName[E.name],delete this._codecsByCode[E.code]}async getCodec(E){const U=typeof E=="string"?this._codecsByName:this._codecsByCode;if(U[E])return U[E];const G=await this._loadCodec(E);return U[E]==null&&this.addCodec(G),G}listCodecs(){return Object.values(this._codecsByName)}}const LOAD_HASHER=R=>Promise.reject(new Error(`No hasher found for "${R}"`));class Multihashes{constructor(E){this._hashersByName={},this._hashersByCode={},this._loadHasher=E.loadHasher||LOAD_HASHER;for(const U of E.hashers)this.addHasher(U)}addHasher(E){if(this._hashersByName[E.name]||this._hashersByCode[E.code])throw new Error(`Resolver already exists for codec "${E.name}"`);this._hashersByName[E.name]=E,this._hashersByCode[E.code]=E}removeHasher(E){delete this._hashersByName[E.name],delete this._hashersByCode[E.code]}async getHasher(E){const U=typeof E=="string"?this._hashersByName:this._hashersByCode;if(U[E])return U[E];const G=await this._loadHasher(E);return U[E]==null&&this.addHasher(G),G}listHashers(){return Object.values(this._hashersByName)}}var encode_1$2=encode$f,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$f(R,E,U){E=E||[],U=U||0;for(var G=U;R>=INT$1;)E[U++]=R&255|MSB$2,R/=128;for(;R&MSBALL$1;)E[U++]=R&255|MSB$2,R>>>=7;return E[U]=R|0,encode$f.bytes=U-G+1,E}var decode$g=read$1,MSB$1$1=128,REST$1$1=127;function read$1(R,G){var U=0,G=G||0,Y=0,J=G,Q,X=R.length;do{if(J>=X)throw read$1.bytes=0,new RangeError("Could not decode varint");Q=R[J++],U+=Y<28?(Q&REST$1$1)<<Y:(Q&REST$1$1)*Math.pow(2,Y),Y+=7}while(Q>=MSB$1$1);return read$1.bytes=J-G,U}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(R){return R<N1$1?1:R<N2$1?2:R<N3$1?3:R<N4$1?4:R<N5$1?5:R<N6$1?6:R<N7$1?7:R<N8$1?8:R<N9$1?9:10},varint$1={encode:encode_1$2,decode:decode$g,encodingLength:length$1},_brrp_varint=varint$1;const decode$f=R=>[_brrp_varint.decode(R),_brrp_varint.decode.bytes],encodeTo=(R,E,U=0)=>(_brrp_varint.encode(R,E,U),E),encodingLength=R=>_brrp_varint.encodingLength(R),equals$2=(R,E)=>{if(R===E)return!0;if(R.byteLength!==E.byteLength)return!1;for(let U=0;U<R.byteLength;U++)if(R[U]!==E[U])return!1;return!0},coerce=R=>{if(R instanceof Uint8Array&&R.constructor.name==="Uint8Array")return R;if(R instanceof ArrayBuffer)return new Uint8Array(R);if(ArrayBuffer.isView(R))return new Uint8Array(R.buffer,R.byteOffset,R.byteLength);throw new Error("Unknown type, must be binary type")},fromString$3=R=>new TextEncoder().encode(R),toString$5=R=>new TextDecoder().decode(R),create$3=(R,E)=>{const U=E.byteLength,G=encodingLength(R),Y=G+encodingLength(U),J=new Uint8Array(Y+U);return encodeTo(R,J,0),encodeTo(U,J,G),J.set(E,Y),new Digest(R,U,E,J)},decode$e=R=>{const E=coerce(R),[U,G]=decode$f(E),[Y,J]=decode$f(E.subarray(G)),Q=E.subarray(G+J);if(Q.byteLength!==Y)throw new Error("Incorrect length");return new Digest(U,Y,Q,E)},equals$1=(R,E)=>R===E?!0:R.code===E.code&&R.size===E.size&&equals$2(R.bytes,E.bytes);class Digest{constructor(E,U,G,Y){this.code=E,this.size=U,this.digest=G,this.bytes=Y}}function base(R,E){if(R.length>=255)throw new TypeError("Alphabet too long");for(var U=new Uint8Array(256),G=0;G<U.length;G++)U[G]=255;for(var Y=0;Y<R.length;Y++){var J=R.charAt(Y),Q=J.charCodeAt(0);if(U[Q]!==255)throw new TypeError(J+" is ambiguous");U[Q]=Y}var X=R.length,Z=R.charAt(0),ee=Math.log(X)/Math.log(256),te=Math.log(256)/Math.log(X);function ne(pe){if(pe instanceof Uint8Array||(ArrayBuffer.isView(pe)?pe=new Uint8Array(pe.buffer,pe.byteOffset,pe.byteLength):Array.isArray(pe)&&(pe=Uint8Array.from(pe))),!(pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(pe.length===0)return"";for(var ye=0,Se=0,ge=0,_e=pe.length;ge!==_e&&pe[ge]===0;)ge++,ye++;for(var Te=(_e-ge)*te+1>>>0,Ee=new Uint8Array(Te);ge!==_e;){for(var Re=pe[ge],Ae=0,Ie=Te-1;(Re!==0||Ae<Se)&&Ie!==-1;Ie--,Ae++)Re+=256*Ee[Ie]>>>0,Ee[Ie]=Re%X>>>0,Re=Re/X>>>0;if(Re!==0)throw new Error("Non-zero carry");Se=Ae,ge++}for(var Oe=Te-Se;Oe!==Te&&Ee[Oe]===0;)Oe++;for(var Pe=Z.repeat(ye);Oe<Te;++Oe)Pe+=R.charAt(Ee[Oe]);return Pe}function oe(pe){if(typeof pe!="string")throw new TypeError("Expected String");if(pe.length===0)return new Uint8Array;var ye=0;if(pe[ye]!==" "){for(var Se=0,ge=0;pe[ye]===Z;)Se++,ye++;for(var _e=(pe.length-ye)*ee+1>>>0,Te=new Uint8Array(_e);pe[ye];){var Ee=U[pe.charCodeAt(ye)];if(Ee===255)return;for(var Re=0,Ae=_e-1;(Ee!==0||Re<ge)&&Ae!==-1;Ae--,Re++)Ee+=X*Te[Ae]>>>0,Te[Ae]=Ee%256>>>0,Ee=Ee/256>>>0;if(Ee!==0)throw new Error("Non-zero carry");ge=Re,ye++}if(pe[ye]!==" "){for(var Ie=_e-ge;Ie!==_e&&Te[Ie]===0;)Ie++;for(var Oe=new Uint8Array(Se+(_e-Ie)),Pe=Se;Ie!==_e;)Oe[Pe++]=Te[Ie++];return Oe}}}function ce(pe){var ye=oe(pe);if(ye)return ye;throw new Error(`Non-${E} character`)}return{encode:ne,decodeUnsafe:oe,decode:ce}}var src$1=base,_brrp__multiformats_scope_baseX=src$1;class Encoder{constructor(E,U,G){this.name=E,this.prefix=U,this.baseEncode=G}encode(E){if(E instanceof Uint8Array)return`${this.prefix}${this.baseEncode(E)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(E,U,G){if(this.name=E,this.prefix=U,U.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=U.codePointAt(0),this.baseDecode=G}decode(E){if(typeof E=="string"){if(E.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(E)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(E.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(E){return or(this,E)}}class ComposedDecoder{constructor(E){this.decoders=E}or(E){return or(this,E)}decode(E){const U=E[0],G=this.decoders[U];if(G)return G.decode(E);throw RangeError(`Unable to decode multibase string ${JSON.stringify(E)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(R,E)=>new ComposedDecoder({...R.decoders||{[R.prefix]:R},...E.decoders||{[E.prefix]:E}});class Codec{constructor(E,U,G,Y){this.name=E,this.prefix=U,this.baseEncode=G,this.baseDecode=Y,this.encoder=new Encoder(E,U,G),this.decoder=new Decoder(E,U,Y)}encode(E){return this.encoder.encode(E)}decode(E){return this.decoder.decode(E)}}const from$1=({name:R,prefix:E,encode:U,decode:G})=>new Codec(R,E,U,G),baseX=({prefix:R,name:E,alphabet:U})=>{const{encode:G,decode:Y}=_brrp__multiformats_scope_baseX(U,E);return from$1({prefix:R,name:E,encode:G,decode:J=>coerce(Y(J))})},decode$d=(R,E,U,G)=>{const Y={};for(let te=0;te<E.length;++te)Y[E[te]]=te;let J=R.length;for(;R[J-1]==="=";)--J;const Q=new Uint8Array(J*U/8|0);let X=0,Z=0,ee=0;for(let te=0;te<J;++te){const ne=Y[R[te]];if(ne===void 0)throw new SyntaxError(`Non-${G} character`);Z=Z<<U|ne,X+=U,X>=8&&(X-=8,Q[ee++]=255&Z>>X)}if(X>=U||255&Z<<8-X)throw new SyntaxError("Unexpected end of data");return Q},encode$e=(R,E,U)=>{const G=E[E.length-1]==="=",Y=(1<<U)-1;let J="",Q=0,X=0;for(let Z=0;Z<R.length;++Z)for(X=X<<8|R[Z],Q+=8;Q>U;)Q-=U,J+=E[Y&X>>Q];if(Q&&(J+=E[Y&X<<U-Q]),G)for(;J.length*U&7;)J+="=";return J},rfc4648=({name:R,prefix:E,bitsPerChar:U,alphabet:G})=>from$1({prefix:E,name:R,encode(Y){return encode$e(Y,G,U)},decode(Y){return decode$d(Y,G,U,R)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"}));class CID{constructor(E,U,G,Y){this.code=U,this.version=E,this.multihash=G,this.bytes=Y,this.byteOffset=Y.byteOffset,this.byteLength=Y.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:E,multihash:U}=this;if(E!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(U.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(U)}}}toV1(){switch(this.version){case 0:{const{code:E,digest:U}=this.multihash,G=create$3(E,U);return CID.createV1(this.code,G)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(E){return E&&this.code===E.code&&this.version===E.version&&equals$1(this.multihash,E.multihash)}toString(E){const{bytes:U,version:G,_baseCache:Y}=this;switch(G){case 0:return toStringV0(U,Y,E||base58btc.encoder);default:return toStringV1(U,Y,E||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(E){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(E&&(E[cidSymbol]||E.asCID===E))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(E){if(E instanceof CID)return E;if(E!=null&&E.asCID===E){const{version:U,code:G,multihash:Y,bytes:J}=E;return new CID(U,G,Y,J||encodeCID$1(U,G,Y.bytes))}else if(E!=null&&E[cidSymbol]===!0){const{version:U,multihash:G,code:Y}=E,J=decode$e(G);return CID.create(U,Y,J)}else return null}static create(E,U,G){if(typeof U!="number")throw new Error("String codecs are no longer supported");switch(E){case 0:{if(U!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(E,U,G,G.bytes)}case 1:{const Y=encodeCID$1(E,U,G.bytes);return new CID(E,U,G,Y)}default:throw new Error("Invalid version")}}static createV0(E){return CID.create(0,DAG_PB_CODE,E)}static createV1(E,U){return CID.create(1,E,U)}static decode(E){const[U,G]=CID.decodeFirst(E);if(G.length)throw new Error("Incorrect length");return U}static decodeFirst(E){const U=CID.inspectBytes(E),G=U.size-U.multihashSize,Y=coerce(E.subarray(G,G+U.multihashSize));if(Y.byteLength!==U.multihashSize)throw new Error("Incorrect length");const J=Y.subarray(U.multihashSize-U.digestSize),Q=new Digest(U.multihashCode,U.digestSize,J,Y);return[U.version===0?CID.createV0(Q):CID.createV1(U.codec,Q),E.subarray(U.size)]}static inspectBytes(E){let U=0;const G=()=>{const[ne,oe]=decode$f(E.subarray(U));return U+=oe,ne};let Y=G(),J=DAG_PB_CODE;if(Y===18?(Y=0,U=0):Y===1&&(J=G()),Y!==0&&Y!==1)throw new RangeError(`Invalid CID version ${Y}`);const Q=U,X=G(),Z=G(),ee=U+Z,te=ee-Q;return{version:Y,codec:J,multihashCode:X,digestSize:Z,multihashSize:te,size:ee}}static parse(E,U){const[G,Y]=parseCIDtoBytes(E,U),J=CID.decode(Y);return J._baseCache.set(G,E),J}}const parseCIDtoBytes=(R,E)=>{switch(R[0]){case"Q":{const U=E||base58btc;return[base58btc.prefix,U.decode(`${base58btc.prefix}${R}`)]}case base58btc.prefix:{const U=E||base58btc;return[base58btc.prefix,U.decode(R)]}case base32.prefix:{const U=E||base32;return[base32.prefix,U.decode(R)]}default:{if(E==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[R[0],E.decode(R)]}}},toStringV0=(R,E,U)=>{const{prefix:G}=U;if(G!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${U.name} encoding`);const Y=E.get(G);if(Y==null){const J=U.encode(R).slice(1);return E.set(G,J),J}else return Y},toStringV1=(R,E,U)=>{const{prefix:G}=U,Y=E.get(G);if(Y==null){const J=U.encode(R);return E.set(G,J),J}else return Y},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID$1=(R,E,U)=>{const G=encodingLength(R),Y=G+encodingLength(E),J=new Uint8Array(Y+U.byteLength);return encodeTo(R,J,0),encodeTo(E,J,G),J.set(U,Y),J},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$1="0.0.0-dev",deprecate=(R,E)=>{if(R.test(version$1))console.warn(E);else throw new Error(E)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,cid=Object.freeze(Object.defineProperty({__proto__:null,CID},Symbol.toStringTag,{value:"Module"})),textDecoder$2=new TextDecoder;function decodeVarint(R,E){let U=0;for(let G=0;;G+=7){if(G>=64)throw new Error("protobuf: varint overflow");if(E>=R.length)throw new Error("protobuf: unexpected end of data");const Y=R[E++];if(U+=G<28?(Y&127)<<G:(Y&127)*2**G,Y<128)break}return[U,E]}function decodeBytes(R,E){let U;[U,E]=decodeVarint(R,E);const G=E+U;if(U<0||G<0)throw new Error("protobuf: invalid length");if(G>R.length)throw new Error("protobuf: unexpected end of data");return[R.subarray(E,G),G]}function decodeKey(R,E){let U;return[U,E]=decodeVarint(R,E),[U&7,U>>3,E]}function decodeLink(R){const E={},U=R.length;let G=0;for(;G<U;){let Y,J;if([Y,J,G]=decodeKey(R,G),J===1){if(E.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(Y!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${Y}) for Hash`);if(E.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(E.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[E.Hash,G]=decodeBytes(R,G)}else if(J===2){if(E.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(Y!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${Y}) for Name`);if(E.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let Q;[Q,G]=decodeBytes(R,G),E.Name=textDecoder$2.decode(Q)}else if(J===3){if(E.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(Y!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${Y}) for Tsize`);[E.Tsize,G]=decodeVarint(R,G)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${J}`)}if(G>U)throw new Error("protobuf: (PBLink) unexpected end of data");return E}function decodeNode(R){const E=R.length;let U=0,G,Y=!1,J;for(;U<E;){let X,Z;if([X,Z,U]=decodeKey(R,U),X!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${X}`);if(Z===1){if(J)throw new Error("protobuf: (PBNode) duplicate Data section");[J,U]=decodeBytes(R,U),G&&(Y=!0)}else if(Z===2){if(Y)throw new Error("protobuf: (PBNode) duplicate Links section");G||(G=[]);let ee;[ee,U]=decodeBytes(R,U),G.push(decodeLink(ee))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${Z}`)}if(U>E)throw new Error("protobuf: (PBNode) unexpected end of data");const Q={};return J&&(Q.Data=J),Q.Links=G||[],Q}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(R,E){let U=E.length;if(typeof R.Tsize=="number"){if(R.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(R.Tsize))throw new Error("Tsize too large for encoding");U=encodeVarint(E,U,R.Tsize)-1,E[U]=24}if(typeof R.Name=="string"){const G=textEncoder$3.encode(R.Name);U-=G.length,E.set(G,U),U=encodeVarint(E,U,G.length)-1,E[U]=18}return R.Hash&&(U-=R.Hash.length,E.set(R.Hash,U),U=encodeVarint(E,U,R.Hash.length)-1,E[U]=10),E.length-U}function encodeNode(R){const E=sizeNode(R),U=new Uint8Array(E);let G=E;if(R.Data&&(G-=R.Data.length,U.set(R.Data,G),G=encodeVarint(U,G,R.Data.length)-1,U[G]=10),R.Links)for(let Y=R.Links.length-1;Y>=0;Y--){const J=encodeLink(R.Links[Y],U.subarray(0,G));G-=J,G=encodeVarint(U,G,J)-1,U[G]=18}return U}function sizeLink(R){let E=0;if(R.Hash){const U=R.Hash.length;E+=1+U+sov(U)}if(typeof R.Name=="string"){const U=textEncoder$3.encode(R.Name).length;E+=1+U+sov(U)}return typeof R.Tsize=="number"&&(E+=1+sov(R.Tsize)),E}function sizeNode(R){let E=0;if(R.Data){const U=R.Data.length;E+=1+U+sov(U)}if(R.Links)for(const U of R.Links){const G=sizeLink(U);E+=1+G+sov(G)}return E}function encodeVarint(R,E,U){E-=sov(U);const G=E;for(;U>=maxUInt32;)R[E++]=U&127|128,U/=128;for(;U>=128;)R[E++]=U&127|128,U>>>=7;return R[E]=U,G}function sov(R){return R%2===0&&R++,Math.floor((len64(R)+6)/7)}function len64(R){let E=0;return R>=maxInt32&&(R=Math.floor(R/maxInt32),E=32),R>=1<<16&&(R>>>=16,E+=16),R>=1<<8&&(R>>>=8,E+=8),E+len8tab[R]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(R,E){if(R===E)return 0;const U=R.Name?textEncoder$2.encode(R.Name):[],G=E.Name?textEncoder$2.encode(E.Name):[];let Y=U.length,J=G.length;for(let Q=0,X=Math.min(Y,J);Q<X;++Q)if(U[Q]!==G[Q]){Y=U[Q],J=G[Q];break}return Y<J?-1:J<Y?1:0}function hasOnlyProperties(R,E){return!Object.keys(R).some(U=>!E.includes(U))}function asLink(R){if(typeof R.asCID=="object"){const U=CID.asCID(R);if(!U)throw new TypeError("Invalid DAG-PB form");return{Hash:U}}if(typeof R!="object"||Array.isArray(R))throw new TypeError("Invalid DAG-PB form");const E={};if(R.Hash){let U=CID.asCID(R.Hash);try{U||(typeof R.Hash=="string"?U=CID.parse(R.Hash):R.Hash instanceof Uint8Array&&(U=CID.decode(R.Hash)))}catch(G){throw new TypeError(`Invalid DAG-PB form: ${G.message}`)}U&&(E.Hash=U)}if(!E.Hash)throw new TypeError("Invalid DAG-PB form");return typeof R.Name=="string"&&(E.Name=R.Name),typeof R.Tsize=="number"&&(E.Tsize=R.Tsize),E}function prepare(R){if((R instanceof Uint8Array||typeof R=="string")&&(R={Data:R}),typeof R!="object"||Array.isArray(R))throw new TypeError("Invalid DAG-PB form");const E={};if(R.Data!==void 0)if(typeof R.Data=="string")E.Data=textEncoder$2.encode(R.Data);else if(R.Data instanceof Uint8Array)E.Data=R.Data;else throw new TypeError("Invalid DAG-PB form");if(R.Links!==void 0)if(Array.isArray(R.Links))E.Links=R.Links.map(asLink),E.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else E.Links=[];return E}function validate(R){if(!R||typeof R!="object"||Array.isArray(R))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(R,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(R.Data!==void 0&&!(R.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(R.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let E=0;E<R.Links.length;E++){const U=R.Links[E];if(!U||typeof U!="object"||Array.isArray(U))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(U,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!U.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(U.Hash.asCID!==U.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(U.Name!==void 0&&typeof U.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(U.Tsize!==void 0&&(typeof U.Tsize!="number"||U.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(E>0&&linkComparator(U,R.Links[E-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(R,E=[]){return prepare({Data:R,Links:E})}function createLink(R,E,U){return asLink({Hash:U,Name:R,Tsize:E})}const name$7="dag-pb",code$7=112;function encode$d(R){validate(R);const E={};return R.Links&&(E.Links=R.Links.map(U=>{const G={};return U.Hash&&(G.Hash=U.Hash.bytes),U.Name!==void 0&&(G.Name=U.Name),U.Tsize!==void 0&&(G.Tsize=U.Tsize),G})),R.Data&&(E.Data=R.Data),encodeNode(E)}function decode$c(R){const E=decodeNode(R),U={};return E.Data&&(U.Data=E.Data),E.Links&&(U.Links=E.Links.map(G=>{const Y={};try{Y.Hash=CID.decode(G.Hash)}catch{}if(!Y.Hash)throw new Error("Invalid Hash field found in link, expected CID");return G.Name!==void 0&&(Y.Name=G.Name),G.Tsize!==void 0&&(Y.Tsize=G.Tsize),Y})),U}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,name:name$7,code:code$7,encode:encode$d,decode:decode$c,prepare,validate,createNode,createLink},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(R){if(R===null)return"null";if(R===void 0)return"undefined";if(R===!0||R===!1)return"boolean";const E=typeof R;if(typeofs.includes(E))return E;if(E==="function")return"Function";if(Array.isArray(R))return"Array";if(isBuffer$1(R))return"Buffer";const U=getObjectType(R);return U||"Object"}function isBuffer$1(R){return R&&R.constructor&&R.constructor.isBuffer&&R.constructor.isBuffer.call(null,R)}function getObjectType(R){const E=Object.prototype.toString.call(R).slice(8,-1);if(objectTypeNames.includes(E))return E}class Type{constructor(E,U,G){this.major=E,this.majorEncoded=E<<5,this.name=U,this.terminal=G}toString(){return`Type[${this.major}].${this.name}`}compare(E){return this.major<E.major?-1:this.major>E.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(E,U,G){this.type=E,this.value=U,this.encodedLength=G,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$1=new TextEncoder;function isBuffer(R){return useBuffer&&globalThis.Buffer.isBuffer(R)}function asU8A(R){return R instanceof Uint8Array?isBuffer(R)?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):R:Uint8Array.from(R)}const toString$4=useBuffer?(R,E,U)=>U-E>64?globalThis.Buffer.from(R.subarray(E,U)).toString("utf8"):utf8Slice(R,E,U):(R,E,U)=>U-E>64?textDecoder$1.decode(R.subarray(E,U)):utf8Slice(R,E,U),fromString$2=useBuffer?R=>R.length>64?globalThis.Buffer.from(R):utf8ToBytes(R):R=>R.length>64?textEncoder$1.encode(R):utf8ToBytes(R),fromArray=R=>Uint8Array.from(R),slice=useBuffer?(R,E,U)=>isBuffer(R)?new Uint8Array(R.subarray(E,U)):R.slice(E,U):(R,E,U)=>R.slice(E,U),concat$1=useBuffer?(R,E)=>(R=R.map(U=>U instanceof Uint8Array?U:globalThis.Buffer.from(U)),asU8A(globalThis.Buffer.concat(R,E))):(R,E)=>{const U=new Uint8Array(E);let G=0;for(let Y of R)G+Y.length>U.length&&(Y=Y.subarray(0,U.length-G)),U.set(Y,G),G+=Y.length;return U},alloc=useBuffer?R=>globalThis.Buffer.allocUnsafe(R):R=>new Uint8Array(R);function compare(R,E){if(isBuffer(R)&&isBuffer(E))return R.compare(E);for(let U=0;U<R.length;U++)if(R[U]!==E[U])return R[U]<E[U]?-1:1;return 0}function utf8ToBytes(R,E=1/0){let U;const G=R.length;let Y=null;const J=[];for(let Q=0;Q<G;++Q){if(U=R.charCodeAt(Q),U>55295&&U<57344){if(!Y){if(U>56319){(E-=3)>-1&&J.push(239,191,189);continue}else if(Q+1===G){(E-=3)>-1&&J.push(239,191,189);continue}Y=U;continue}if(U<56320){(E-=3)>-1&&J.push(239,191,189),Y=U;continue}U=(Y-55296<<10|U-56320)+65536}else Y&&(E-=3)>-1&&J.push(239,191,189);if(Y=null,U<128){if((E-=1)<0)break;J.push(U)}else if(U<2048){if((E-=2)<0)break;J.push(U>>6|192,U&63|128)}else if(U<65536){if((E-=3)<0)break;J.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((E-=4)<0)break;J.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return J}function utf8Slice(R,E,U){const G=[];for(;E<U;){const Y=R[E];let J=null,Q=Y>239?4:Y>223?3:Y>191?2:1;if(E+Q<=U){let X,Z,ee,te;switch(Q){case 1:Y<128&&(J=Y);break;case 2:X=R[E+1],(X&192)===128&&(te=(Y&31)<<6|X&63,te>127&&(J=te));break;case 3:X=R[E+1],Z=R[E+2],(X&192)===128&&(Z&192)===128&&(te=(Y&15)<<12|(X&63)<<6|Z&63,te>2047&&(te<55296||te>57343)&&(J=te));break;case 4:X=R[E+1],Z=R[E+2],ee=R[E+3],(X&192)===128&&(Z&192)===128&&(ee&192)===128&&(te=(Y&15)<<18|(X&63)<<12|(Z&63)<<6|ee&63,te>65535&&te<1114112&&(J=te))}}J===null?(J=65533,Q=1):J>65535&&(J-=65536,G.push(J>>>10&1023|55296),J=56320|J&1023),G.push(J),E+=Q}return decodeCodePointsArray(G)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(R){const E=R.length;if(E<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,R);let U="",G=0;for(;G<E;)U+=String.fromCharCode.apply(String,R.slice(G,G+=MAX_ARGUMENTS_LENGTH));return U}const defaultChunkSize=256;class Bl{constructor(E=defaultChunkSize){this.chunkSize=E,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(E){let U=this.chunks[this.chunks.length-1];if(this.cursor+E.length<=this.maxCursor+1){const Y=U.length-(this.maxCursor-this.cursor)-1;U.set(E,Y)}else{if(U){const Y=U.length-(this.maxCursor-this.cursor)-1;Y<U.length&&(this.chunks[this.chunks.length-1]=U.subarray(0,Y),this.maxCursor=this.cursor-1)}E.length<64&&E.length<this.chunkSize?(U=alloc(this.chunkSize),this.chunks.push(U),this.maxCursor+=U.length,this._initReuseChunk===null&&(this._initReuseChunk=U),U.set(E,0)):(this.chunks.push(E),this.maxCursor+=E.length)}this.cursor+=E.length}toBytes(E=!1){let U;if(this.chunks.length===1){const G=this.chunks[0];E&&this.cursor>G.length/2?(U=this.cursor===G.length?G:G.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):U=slice(G,0,this.cursor)}else U=concat$1(this.chunks,this.cursor);return E&&this.reset(),U}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(R,E,U){if(R.length-E<U)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(R,E,U){assertEnoughData(R,E,1);const G=R[E];if(U.strict===!0&&G<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return G}function readUint16(R,E,U){assertEnoughData(R,E,2);const G=R[E]<<8|R[E+1];if(U.strict===!0&&G<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return G}function readUint32(R,E,U){assertEnoughData(R,E,4);const G=R[E]*16777216+(R[E+1]<<16)+(R[E+2]<<8)+R[E+3];if(U.strict===!0&&G<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return G}function readUint64(R,E,U){assertEnoughData(R,E,8);const G=R[E]*16777216+(R[E+1]<<16)+(R[E+2]<<8)+R[E+3],Y=R[E+4]*16777216+(R[E+5]<<16)+(R[E+6]<<8)+R[E+7],J=(BigInt(G)<<BigInt(32))+BigInt(Y);if(U.strict===!0&&J<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(J<=Number.MAX_SAFE_INTEGER)return Number(J);if(U.allowBigInt===!0)return J;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(R,E,U,G){return new Token(Type.uint,readUint8(R,E+1,G),2)}function decodeUint16(R,E,U,G){return new Token(Type.uint,readUint16(R,E+1,G),3)}function decodeUint32(R,E,U,G){return new Token(Type.uint,readUint32(R,E+1,G),5)}function decodeUint64(R,E,U,G){return new Token(Type.uint,readUint64(R,E+1,G),9)}function encodeUint(R,E){return encodeUintValue(R,0,E.value)}function encodeUintValue(R,E,U){if(U<uintBoundaries[0]){const G=Number(U);R.push([E|G])}else if(U<uintBoundaries[1]){const G=Number(U);R.push([E|24,G])}else if(U<uintBoundaries[2]){const G=Number(U);R.push([E|25,G>>>8,G&255])}else if(U<uintBoundaries[3]){const G=Number(U);R.push([E|26,G>>>24&255,G>>>16&255,G>>>8&255,G&255])}else{const G=BigInt(U);if(G<uintBoundaries[4]){const Y=[E|27,0,0,0,0,0,0,0];let J=Number(G&BigInt(4294967295)),Q=Number(G>>BigInt(32)&BigInt(4294967295));Y[8]=J&255,J=J>>8,Y[7]=J&255,J=J>>8,Y[6]=J&255,J=J>>8,Y[5]=J&255,Y[4]=Q&255,Q=Q>>8,Y[3]=Q&255,Q=Q>>8,Y[2]=Q&255,Q=Q>>8,Y[1]=Q&255,R.push(Y)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(E){return encodeUintValue.encodedSize(E.value)};encodeUintValue.encodedSize=function(E){return E<uintBoundaries[0]?1:E<uintBoundaries[1]?2:E<uintBoundaries[2]?3:E<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(E,U){return E.value<U.value?-1:E.value>U.value?1:0};function decodeNegint8(R,E,U,G){return new Token(Type.negint,-1-readUint8(R,E+1,G),2)}function decodeNegint16(R,E,U,G){return new Token(Type.negint,-1-readUint16(R,E+1,G),3)}function decodeNegint32(R,E,U,G){return new Token(Type.negint,-1-readUint32(R,E+1,G),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(R,E,U,G){const Y=readUint64(R,E+1,G);if(typeof Y!="bigint"){const J=-1-Y;if(J>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,J,9)}if(G.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(Y),9)}function encodeNegint(R,E){const U=E.value,G=typeof U=="bigint"?U*neg1b-pos1b:U*-1-1;encodeUintValue(R,E.type.majorEncoded,G)}encodeNegint.encodedSize=function(E){const U=E.value,G=typeof U=="bigint"?U*neg1b-pos1b:U*-1-1;return G<uintBoundaries[0]?1:G<uintBoundaries[1]?2:G<uintBoundaries[2]?3:G<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(E,U){return E.value<U.value?1:E.value>U.value?-1:0};function toToken$3(R,E,U,G){assertEnoughData(R,E,U+G);const Y=slice(R,E+U,E+U+G);return new Token(Type.bytes,Y,U+G)}function decodeBytesCompact(R,E,U,G){return toToken$3(R,E,1,U)}function decodeBytes8(R,E,U,G){return toToken$3(R,E,2,readUint8(R,E+1,G))}function decodeBytes16(R,E,U,G){return toToken$3(R,E,3,readUint16(R,E+1,G))}function decodeBytes32(R,E,U,G){return toToken$3(R,E,5,readUint32(R,E+1,G))}function decodeBytes64(R,E,U,G){const Y=readUint64(R,E+1,G);if(typeof Y=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(R,E,9,Y)}function tokenBytes(R){return R.encodedBytes===void 0&&(R.encodedBytes=R.type===Type.string?fromString$2(R.value):R.value),R.encodedBytes}function encodeBytes(R,E){const U=tokenBytes(E);encodeUintValue(R,E.type.majorEncoded,U.length),R.push(U)}encodeBytes.encodedSize=function(E){const U=tokenBytes(E);return encodeUintValue.encodedSize(U.length)+U.length};encodeBytes.compareTokens=function(E,U){return compareBytes(tokenBytes(E),tokenBytes(U))};function compareBytes(R,E){return R.length<E.length?-1:R.length>E.length?1:compare(R,E)}function toToken$2(R,E,U,G,Y){const J=U+G;assertEnoughData(R,E,J);const Q=new Token(Type.string,toString$4(R,E+U,E+J),J);return Y.retainStringBytes===!0&&(Q.byteValue=slice(R,E+U,E+J)),Q}function decodeStringCompact(R,E,U,G){return toToken$2(R,E,1,U,G)}function decodeString8(R,E,U,G){return toToken$2(R,E,2,readUint8(R,E+1,G),G)}function decodeString16(R,E,U,G){return toToken$2(R,E,3,readUint16(R,E+1,G),G)}function decodeString32(R,E,U,G){return toToken$2(R,E,5,readUint32(R,E+1,G),G)}function decodeString64(R,E,U,G){const Y=readUint64(R,E+1,G);if(typeof Y=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(R,E,9,Y,G)}const encodeString=encodeBytes;function toToken$1(R,E,U,G){return new Token(Type.array,G,U)}function decodeArrayCompact(R,E,U,G){return toToken$1(R,E,1,U)}function decodeArray8(R,E,U,G){return toToken$1(R,E,2,readUint8(R,E+1,G))}function decodeArray16(R,E,U,G){return toToken$1(R,E,3,readUint16(R,E+1,G))}function decodeArray32(R,E,U,G){return toToken$1(R,E,5,readUint32(R,E+1,G))}function decodeArray64(R,E,U,G){const Y=readUint64(R,E+1,G);if(typeof Y=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(R,E,9,Y)}function decodeArrayIndefinite(R,E,U,G){if(G.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(R,E,1,1/0)}function encodeArray(R,E){encodeUintValue(R,Type.array.majorEncoded,E.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(E){return encodeUintValue.encodedSize(E.value)};function toToken(R,E,U,G){return new Token(Type.map,G,U)}function decodeMapCompact(R,E,U,G){return toToken(R,E,1,U)}function decodeMap8(R,E,U,G){return toToken(R,E,2,readUint8(R,E+1,G))}function decodeMap16(R,E,U,G){return toToken(R,E,3,readUint16(R,E+1,G))}function decodeMap32(R,E,U,G){return toToken(R,E,5,readUint32(R,E+1,G))}function decodeMap64(R,E,U,G){const Y=readUint64(R,E+1,G);if(typeof Y=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(R,E,9,Y)}function decodeMapIndefinite(R,E,U,G){if(G.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(R,E,1,1/0)}function encodeMap(R,E){encodeUintValue(R,Type.map.majorEncoded,E.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(E){return encodeUintValue.encodedSize(E.value)};function decodeTagCompact(R,E,U,G){return new Token(Type.tag,U,1)}function decodeTag8(R,E,U,G){return new Token(Type.tag,readUint8(R,E+1,G),2)}function decodeTag16(R,E,U,G){return new Token(Type.tag,readUint16(R,E+1,G),3)}function decodeTag32(R,E,U,G){return new Token(Type.tag,readUint32(R,E+1,G),5)}function decodeTag64(R,E,U,G){return new Token(Type.tag,readUint64(R,E+1,G),9)}function encodeTag(R,E){encodeUintValue(R,Type.tag.majorEncoded,E.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(E){return encodeUintValue.encodedSize(E.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(R,E,U,G){if(G.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return G.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(R,E,U,G){if(G.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(R,E,U){if(U){if(U.allowNaN===!1&&Number.isNaN(R))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(U.allowInfinity===!1&&(R===1/0||R===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,R,E)}function decodeFloat16(R,E,U,G){return createToken(readFloat16(R,E+1),3,G)}function decodeFloat32(R,E,U,G){return createToken(readFloat32(R,E+1),5,G)}function decodeFloat64(R,E,U,G){return createToken(readFloat64(R,E+1),9,G)}function encodeFloat(R,E,U){const G=E.value;if(G===!1)R.push([Type.float.majorEncoded|MINOR_FALSE]);else if(G===!0)R.push([Type.float.majorEncoded|MINOR_TRUE]);else if(G===null)R.push([Type.float.majorEncoded|MINOR_NULL]);else if(G===void 0)R.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let Y,J=!1;(!U||U.float64!==!0)&&(encodeFloat16(G),Y=readFloat16(ui8a,1),G===Y||Number.isNaN(G)?(ui8a[0]=249,R.push(ui8a.slice(0,3)),J=!0):(encodeFloat32(G),Y=readFloat32(ui8a,1),G===Y&&(ui8a[0]=250,R.push(ui8a.slice(0,5)),J=!0))),J||(encodeFloat64(G),Y=readFloat64(ui8a,1),ui8a[0]=251,R.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(E,U){const G=E.value;if(G===!1||G===!0||G===null||G===void 0)return 1;if(!U||U.float64!==!0){encodeFloat16(G);let Y=readFloat16(ui8a,1);if(G===Y||Number.isNaN(G))return 3;if(encodeFloat32(G),Y=readFloat32(ui8a,1),G===Y)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(R){if(R===1/0)dataView.setUint16(0,31744,!1);else if(R===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(R))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,R);const E=dataView.getUint32(0),U=(E&2139095040)>>23,G=E&8388607;if(U===255)dataView.setUint16(0,31744,!1);else if(U===0)dataView.setUint16(0,(R&2147483648)>>16|G>>13,!1);else{const Y=U-127;Y<-24?dataView.setUint16(0,0):Y<-14?dataView.setUint16(0,(E&2147483648)>>16|1<<24+Y,!1):dataView.setUint16(0,(E&2147483648)>>16|Y+15<<10|G>>13,!1)}}}function readFloat16(R,E){if(R.length-E<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const U=(R[E]<<8)+R[E+1];if(U===31744)return 1/0;if(U===64512)return-1/0;if(U===32256)return NaN;const G=U>>10&31,Y=U&1023;let J;return G===0?J=Y*2**-24:G!==31?J=(Y+1024)*2**(G-25):J=Y===0?1/0:NaN,U&32768?-J:J}function encodeFloat32(R){dataView.setFloat32(0,R,!1)}function readFloat32(R,E){if(R.length-E<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const U=(R.byteOffset||0)+E;return new DataView(R.buffer,U,4).getFloat32(0,!1)}function encodeFloat64(R){dataView.setFloat64(0,R,!1)}function readFloat64(R,E){if(R.length-E<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const U=(R.byteOffset||0)+E;return new DataView(R.buffer,U,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(R,E,U){throw new Error(`${decodeErrPrefix} encountered invalid minor (${U}) for major ${R[E]>>>5}`)}function errorer(R){return()=>{throw new Error(`${decodeErrPrefix} ${R}`)}}const jump=[];for(let R=0;R<=23;R++)jump[R]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let R=32;R<=55;R++)jump[R]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let R=64;R<=87;R++)jump[R]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let R=96;R<=119;R++)jump[R]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let R=128;R<=151;R++)jump[R]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let R=160;R<=183;R++)jump[R]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let R=192;R<=215;R++)jump[R]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let R=224;R<=243;R++)jump[R]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let R=0;R<24;R++)quick[R]=new Token(Type.uint,R,1);for(let R=-1;R>=-24;R--)quick[31-R]=new Token(Type.negint,R,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(R){switch(R.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return R.value.length?void 0:fromArray([64]);case Type.string:return R.value===""?fromArray([96]):void 0;case Type.array:return R.value===0?fromArray([128]):void 0;case Type.map:return R.value===0?fromArray([160]):void 0;case Type.uint:return R.value<24?fromArray([Number(R.value)]):void 0;case Type.negint:if(R.value>=-24)return fromArray([31-Number(R.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const R=[];return R[Type.uint.major]=encodeUint,R[Type.negint.major]=encodeNegint,R[Type.bytes.major]=encodeBytes,R[Type.string.major]=encodeString,R[Type.array.major]=encodeArray,R[Type.map.major]=encodeMap,R[Type.tag.major]=encodeTag,R[Type.float.major]=encodeFloat,R}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(E,U){this.obj=E,this.parent=U}includes(E){let U=this;do if(U.obj===E)return!0;while(U=U.parent);return!1}static createCheck(E,U){if(E&&E.includes(U))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(U,E)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(R,E,U,G){return!Number.isInteger(R)||!Number.isSafeInteger(R)?new Token(Type.float,R):R>=0?new Token(Type.uint,R):new Token(Type.negint,R)},bigint(R,E,U,G){return R>=BigInt(0)?new Token(Type.uint,R):new Token(Type.negint,R)},Uint8Array(R,E,U,G){return new Token(Type.bytes,R)},string(R,E,U,G){return new Token(Type.string,R)},boolean(R,E,U,G){return R?simpleTokens.true:simpleTokens.false},null(R,E,U,G){return simpleTokens.null},undefined(R,E,U,G){return simpleTokens.undefined},ArrayBuffer(R,E,U,G){return new Token(Type.bytes,new Uint8Array(R))},DataView(R,E,U,G){return new Token(Type.bytes,new Uint8Array(R.buffer,R.byteOffset,R.byteLength))},Array(R,E,U,G){if(!R.length)return U.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;G=Ref.createCheck(G,R);const Y=[];let J=0;for(const Q of R)Y[J++]=objectToTokens(Q,U,G);return U.addBreakTokens?[new Token(Type.array,R.length),Y,new Token(Type.break)]:[new Token(Type.array,R.length),Y]},Object(R,E,U,G){const Y=E!=="Object",J=Y?R.keys():Object.keys(R),Q=Y?R.size:J.length;if(!Q)return U.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;G=Ref.createCheck(G,R);const X=[];let Z=0;for(const ee of J)X[Z++]=[objectToTokens(ee,U,G),objectToTokens(Y?R.get(ee):R[ee],U,G)];return sortMapEntries(X,U),U.addBreakTokens?[new Token(Type.map,Q),X,new Token(Type.break)]:[new Token(Type.map,Q),X]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const R of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${R}Array`]=typeEncoders.DataView;function objectToTokens(R,E={},U){const G=is(R),Y=E&&E.typeEncoders&&E.typeEncoders[G]||typeEncoders[G];if(typeof Y=="function"){const Q=Y(R,G,E,U);if(Q!=null)return Q}const J=typeEncoders[G];if(!J)throw new Error(`${encodeErrPrefix} unsupported type: ${G}`);return J(R,G,E,U)}function sortMapEntries(R,E){E.mapSorter&&R.sort(E.mapSorter)}function mapSorter$1(R,E){const U=Array.isArray(R[0])?R[0][0]:R[0],G=Array.isArray(E[0])?E[0][0]:E[0];if(U.type!==G.type)return U.type.compare(G.type);const Y=U.type.major,J=cborEncoders[Y].compareTokens(U,G);return J===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),J}function tokensToEncoded(R,E,U,G){if(Array.isArray(E))for(const Y of E)tokensToEncoded(R,Y,U,G);else U[E.type.major](R,E,G)}function encodeCustom(R,E,U){const G=objectToTokens(R,U);if(!Array.isArray(G)&&U.quickEncodeToken){const Y=U.quickEncodeToken(G);if(Y)return Y;const J=E[G.type.major];if(J.encodedSize){const Q=J.encodedSize(G,U),X=new Bl(Q);if(J(X,G,U),X.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${G} was wrong`);return asU8A(X.chunks[0])}}return buf.reset(),tokensToEncoded(buf,G,E,U),buf.toBytes(!0)}function encode$c(R,E){return E=Object.assign({},defaultEncodeOptions$1,E),encodeCustom(R,cborEncoders,E)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(E,U={}){this.pos=0,this.data=E,this.options=U}done(){return this.pos>=this.data.length}next(){const E=this.data[this.pos];let U=quick[E];if(U===void 0){const G=jump[E];if(!G)throw new Error(`${decodeErrPrefix} no decoder for major type ${E>>>5} (byte 0x${E.toString(16).padStart(2,"0")})`);const Y=E&31;U=G(this.data,this.pos,Y,this.options)}return this.pos+=U.encodedLength,U}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(R,E,U){const G=[];for(let Y=0;Y<R.value;Y++){const J=tokensToObject(E,U);if(J===BREAK){if(R.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(J===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${Y}, expected ${R.value})`);G[Y]=J}return G}function tokenToMap(R,E,U){const G=U.useMaps===!0,Y=G?void 0:{},J=G?new Map:void 0;for(let Q=0;Q<R.value;Q++){const X=tokensToObject(E,U);if(X===BREAK){if(R.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(X===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${Q} [no key], expected ${R.value})`);if(G!==!0&&typeof X!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof X})`);const Z=tokensToObject(E,U);if(Z===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${Q} [no value], expected ${R.value})`);G?J.set(X,Z):Y[X]=Z}return G?J:Y}function tokensToObject(R,E){if(R.done())return DONE;const U=R.next();if(U.type===Type.break)return BREAK;if(U.type.terminal)return U.value;if(U.type===Type.array)return tokenToArray(U,R,E);if(U.type===Type.map)return tokenToMap(U,R,E);if(U.type===Type.tag){if(E.tags&&typeof E.tags[U.value]=="function"){const G=tokensToObject(R,E);return E.tags[U.value](G)}throw new Error(`${decodeErrPrefix} tag not supported (${U.value})`)}throw new Error("unsupported")}function decode$b(R,E){if(!(R instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);E=Object.assign({},defaultDecodeOptions,E);const U=E.tokenizer||new Tokeniser(R,E),G=tokensToObject(U,E);if(G===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(G===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!U.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return G}const CID_CBOR_TAG$1=42;function cidEncoder$2(R){if(R.asCID!==R)return null;const E=CID.asCID(R);if(!E)return null;const U=new Uint8Array(E.bytes.byteLength+1);return U.set(E.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,U)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(R){if(Number.isNaN(R))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(R===1/0||R===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$1(R){if(R[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(R.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$6="dag-cbor",code$6=113,encode$b=R=>encode$c(R,encodeOptions$2),decode$a=R=>decode$b(R,decodeOptions$2),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$6,code:code$6,encode:encode$b,decode:decode$a},Symbol.toStringTag,{value:"Module"})),from=({name:R,code:E,encode:U})=>new Hasher(R,E,U);class Hasher{constructor(E,U,G){this.name=E,this.code=U,this.encode=G}digest(E){if(E instanceof Uint8Array){const U=this.encode(E);return U instanceof Uint8Array?create$3(this.code,U):U.then(G=>create$3(this.code,G))}else throw Error("Unknown type, must be binary type")}}const base64$2=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"}));class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(E){const U=this.inRecursive[this.inRecursive.length-1];U&&(U.type===Type.array&&(U.elements++,U.elements!==1&&E.push([44])),U.type===Type.map&&(U.elements++,U.elements!==1&&(U.elements%2===1?E.push([44]):E.push([58]))))}[Type.uint.major](E,U){this.prefix(E);const G=String(U.value),Y=[];for(let J=0;J<G.length;J++)Y[J]=G.charCodeAt(J);E.push(Y)}[Type.negint.major](E,U){this[Type.uint.major](E,U)}[Type.bytes.major](E,U){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](E,U){this.prefix(E);const G=fromString$2(JSON.stringify(U.value));E.push(G.length>32?asU8A(G):G)}[Type.array.major](E,U){this.prefix(E),this.inRecursive.push({type:Type.array,elements:0}),E.push([91])}[Type.map.major](E,U){this.prefix(E),this.inRecursive.push({type:Type.map,elements:0}),E.push([123])}[Type.tag.major](E,U){}[Type.float.major](E,U){if(U.type.name==="break"){const Q=this.inRecursive.pop();if(Q){if(Q.type===Type.array)E.push([93]);else if(Q.type===Type.map)E.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(U.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(E),U.type.name==="true"){E.push([116,114,117,101]);return}else if(U.type.name==="false"){E.push([102,97,108,115,101]);return}else if(U.type.name==="null"){E.push([110,117,108,108]);return}const G=String(U.value),Y=[];let J=!1;for(let Q=0;Q<G.length;Q++)Y[Q]=G.charCodeAt(Q),!J&&(Y[Q]===46||Y[Q]===101||Y[Q]===69)&&(J=!0);J||(Y.push(46),Y.push(48)),E.push(Y)}}function mapSorter(R,E){if(Array.isArray(R[0])||Array.isArray(E[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const U=R[0],G=E[0];if(U.type!==Type.string||G.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(U<G)return-1;if(U>G)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$a(R,E){return E=Object.assign({},defaultEncodeOptions,E),encodeCustom(R,new JSONEncoder,E)}class Tokenizer{constructor(E,U={}){this.pos=0,this.data=E,this.options=U,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let E=this.ch();for(;E===32||E===9||E===13||E===10;)E=this.data[++this.pos]}expect(E){if(this.data.length-this.pos<E.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let U=0;U<E.length;U++)if(this.data[this.pos++]!==E[U])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...E)}'`)}parseNumber(){const E=this.pos;let U=!1,G=!1;const Y=X=>{for(;!this.done();){const Z=this.ch();if(X.includes(Z))this.pos++;else break}};if(this.ch()===45&&(U=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,G=!0;else return new Token(Type.uint,0,this.pos-E);if(Y([48,49,50,51,52,53,54,55,56,57]),U&&this.pos===E+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(G)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);G=!0,this.pos++,Y([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(G=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,Y([48,49,50,51,52,53,54,55,56,57]));const J=String.fromCharCode.apply(null,this.data.subarray(E,this.pos)),Q=parseFloat(J);return G?new Token(Type.float,Q,this.pos-E):this.options.allowBigInt!==!0||Number.isSafeInteger(Q)?new Token(Q>=0?Type.uint:Type.negint,Q,this.pos-E):new Token(Q>=0?Type.uint:Type.negint,BigInt(J),this.pos-E)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let J=this.pos,Q=0;J<this.data.length&&Q<65536;J++,Q++){const X=this.data[J];if(X===92||X<32||X>=128)break;if(X===34){const Z=String.fromCharCode.apply(null,this.data.subarray(this.pos,J));return this.pos=J+1,new Token(Type.string,Z,Q)}}const E=this.pos,U=[],G=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let J=0;for(let Q=0;Q<4;Q++){let X=this.ch();if(X>=48&&X<=57)X-=48;else if(X>=97&&X<=102)X=X-97+10;else if(X>=65&&X<=70)X=X-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);J=J*16+X,this.pos++}return J},Y=()=>{const J=this.ch();let Q=null,X=J>239?4:J>223?3:J>191?2:1;if(this.pos+X>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let Z,ee,te,ne;switch(X){case 1:J<128&&(Q=J);break;case 2:Z=this.data[this.pos+1],(Z&192)===128&&(ne=(J&31)<<6|Z&63,ne>127&&(Q=ne));break;case 3:Z=this.data[this.pos+1],ee=this.data[this.pos+2],(Z&192)===128&&(ee&192)===128&&(ne=(J&15)<<12|(Z&63)<<6|ee&63,ne>2047&&(ne<55296||ne>57343)&&(Q=ne));break;case 4:Z=this.data[this.pos+1],ee=this.data[this.pos+2],te=this.data[this.pos+3],(Z&192)===128&&(ee&192)===128&&(te&192)===128&&(ne=(J&15)<<18|(Z&63)<<12|(ee&63)<<6|te&63,ne>65535&&ne<1114112&&(Q=ne))}Q===null?(Q=65533,X=1):Q>65535&&(Q-=65536,U.push(Q>>>10&1023|55296),Q=56320|Q&1023),U.push(Q),this.pos+=X};for(;!this.done();){const J=this.ch();let Q;switch(J){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(Q=this.ch(),this.pos++,Q){case 34:case 39:case 92:case 47:U.push(Q);break;case 98:U.push(8);break;case 116:U.push(9);break;case 110:U.push(10);break;case 102:U.push(12);break;case 114:U.push(13);break;case 117:U.push(G());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(U),this.pos-E);default:if(J<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);J<128?(U.push(J),this.pos++):Y()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const E=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),E}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$9(R,E){return E=Object.assign({tokenizer:new Tokenizer(R,E)},E),decode$b(R,E)}function cidEncoder$1(R){if(R.asCID!==R)return null;const E=CID.asCID(R);if(!E)return null;const U=E.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,U,U.length),new Token(Type.break,void 0,1)]}function bytesEncoder(R){const E=base64$2.encode(R).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,E,E.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(R){if(Number.isNaN(R))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(R===1/0||R===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={typeEncoders:{Object:cidEncoder$1,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder$1,number:numberEncoder$1}};class DagJsonTokenizer extends Tokenizer{constructor(E,U){super(E,U),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const E=this._next();if(E.type===Type.map){const U=this._next();if(U.type===Type.string&&U.value==="/"){const G=this._next();if(G.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(G),new Token(Type.tag,42,0)}if(G.type===Type.map){const Y=this._next();if(Y.type===Type.string&&Y.value==="bytes"){const J=this._next();if(J.type===Type.string){for(let X=0;X<2;X++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const Q=base64$2.decode(`m${J.value}`);return new Token(Type.bytes,Q,J.value.length)}this.tokenBuffer.push(J)}this.tokenBuffer.push(Y)}this.tokenBuffer.push(G)}this.tokenBuffer.push(U)}return E}}const decodeOptions$1={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[42]=CID.parse;const name$5="dag-json",code$5=297,encode$9=R=>encode$a(R,encodeOptions$1),decode$8=R=>{const E=Object.assign(decodeOptions$1,{tokenizer:new DagJsonTokenizer(R,decodeOptions$1)});return decode$9(R,E)},dagJSON=Object.freeze(Object.defineProperty({__proto__:null,name:name$5,code:code$5,encode:encode$9,decode:decode$8},Symbol.toStringTag,{value:"Module"}));var lib={},signing={},utils={};const require$$0=getAugmentedNamespace(base64$3);Object.defineProperty(utils,"__esModule",{value:!0});utils.fromBase64url=utils.toBase64url=void 0;const base64_1=require$$0;function toBase64url(R){return base64_1.base64url.encode(R).slice(1)}utils.toBase64url=toBase64url;function fromBase64url(R){return base64_1.base64url.decode(`u${R}`)}utils.fromBase64url=fromBase64url;const require$$1$1=getAugmentedNamespace(cid);Object.defineProperty(signing,"__esModule",{value:!0});const utils_1$1=utils,cid_1=require$$1$1;function fromSplit$1(R){const[E,U,G]=R;return{payload:U,signatures:[{protected:E,signature:G}],link:cid_1.CID.decode(utils_1$1.fromBase64url(U))}}function encodeSignature(R){const E={signature:utils_1$1.fromBase64url(R.signature)};return R.header&&(E.header=R.header),R.protected&&(E.protected=utils_1$1.fromBase64url(R.protected)),E}function encode$8(R){const E=utils_1$1.fromBase64url(R.payload);try{cid_1.CID.decode(E)}catch{throw new Error("Not a valid DagJWS")}return{payload:E,signatures:R.signatures.map(encodeSignature)}}function decodeSignature(R){const E={signature:utils_1$1.toBase64url(R.signature)};return R.header&&(E.header=R.header),R.protected&&(E.protected=utils_1$1.toBase64url(R.protected)),E}function decode$7(R){const E={payload:utils_1$1.toBase64url(R.payload),signatures:R.signatures.map(decodeSignature)};return E.link=cid_1.CID.decode(new Uint8Array(R.payload)),E}signing.default={fromSplit:fromSplit$1,encode:encode$8,decode:decode$7};var encryption={};Object.defineProperty(encryption,"__esModule",{value:!0});const utils_1=utils;function fromSplit(R){const[E,U,G,Y,J]=R,Q={ciphertext:Y,iv:G,protected:E,tag:J};return U&&(Q.recipients=[{encrypted_key:U}]),Q}function encodeRecipient(R){const E={};return R.encrypted_key&&(E.encrypted_key=utils_1.fromBase64url(R.encrypted_key)),R.header&&(E.header=R.header),E}function encode$7(R){const E={ciphertext:utils_1.fromBase64url(R.ciphertext),protected:utils_1.fromBase64url(R.protected),iv:utils_1.fromBase64url(R.iv),tag:utils_1.fromBase64url(R.tag)};return R.aad&&(E.aad=utils_1.fromBase64url(R.aad)),R.recipients&&(E.recipients=R.recipients.map(encodeRecipient)),R.unprotected&&(E.unprotected=R.unprotected),E}function decodeRecipient(R){const E={};return R.encrypted_key&&(E.encrypted_key=utils_1.toBase64url(R.encrypted_key)),R.header&&(E.header=R.header),E}function decode$6(R){const E={ciphertext:utils_1.toBase64url(R.ciphertext),protected:utils_1.toBase64url(R.protected),iv:utils_1.toBase64url(R.iv),tag:utils_1.toBase64url(R.tag)};return R.aad&&(E.aad=utils_1.toBase64url(R.aad)),R.recipients&&(E.recipients=R.recipients.map(decodeRecipient)),R.unprotected&&(E.unprotected=R.unprotected),E}encryption.default={fromSplit,decode:decode$6,encode:encode$7};const CID_CBOR_TAG=42;function cidEncoder(R){if(R.asCID!==R)return null;const E=CID.asCID(R);if(!E)return null;const U=new Uint8Array(E.bytes.byteLength+1);return U.set(E.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,U)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(R){if(Number.isNaN(R))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(R===1/0||R===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(R){if(R[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(R.subarray(1))}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name$4="dag-cbor",code$4=113,encode$6=R=>encode$c(R,encodeOptions),decode$5=R=>decode$b(R,decodeOptions),esm=Object.freeze(Object.defineProperty({__proto__:null,name:name$4,code:code$4,encode:encode$6,decode:decode$5},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(esm);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(R,E,U,G){G===void 0&&(G=U),Object.defineProperty(R,G,{enumerable:!0,get:function(){return E[U]}})}:function(R,E,U,G){G===void 0&&(G=U),R[G]=E[U]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(R,E){Object.defineProperty(R,"default",{enumerable:!0,value:E})}:function(R,E){R.default=E}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(R){if(R&&R.__esModule)return R;var E={};if(R!=null)for(var U in R)U!=="default"&&Object.prototype.hasOwnProperty.call(R,U)&&__createBinding(E,R,U);return __setModuleDefault(E,R),E},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(lib,"__esModule",{value:!0});var decode_1=lib.decode=encode_1$1=lib.encode=toGeneral_1=lib.toGeneral=code$3=lib.code=name$3=lib.name=void 0;const signing_1=__importDefault(signing),encryption_1=__importDefault(encryption),cbor=__importStar(require$$2);var name$3=lib.name="dag-jose",code$3=lib.code=133;function isDagJWS(R){return"payload"in R&&typeof R.payload=="string"&&"signatures"in R&&Array.isArray(R.signatures)}function isEncodedJWS(R){return"payload"in R&&R.payload instanceof Uint8Array&&"signatures"in R&&Array.isArray(R.signatures)}function isEncodedJWE(R){return"ciphertext"in R&&R.ciphertext instanceof Uint8Array&&"iv"in R&&R.iv instanceof Uint8Array&&"protected"in R&&R.protected instanceof Uint8Array&&"tag"in R&&R.tag instanceof Uint8Array}function isDagJWE(R){return"ciphertext"in R&&typeof R.ciphertext=="string"&&"iv"in R&&typeof R.iv=="string"&&"protected"in R&&typeof R.protected=="string"&&"tag"in R&&typeof R.tag=="string"}function toGeneral(R){if(typeof R=="string"){const E=R.split(".");if(E.length===3)return signing_1.default.fromSplit(E);if(E.length===5)return encryption_1.default.fromSplit(E);throw new Error("Not a valid JOSE string")}if(isDagJWS(R)||isDagJWE(R))return R;throw new Error("Not a valid unencoded JOSE object")}var toGeneral_1=lib.toGeneral=toGeneral;function encode$5(R){typeof R=="string"&&(R=toGeneral(R));let E;if(isDagJWS(R))E=signing_1.default.encode(R);else if(isDagJWE(R))E=encryption_1.default.encode(R);else throw new Error("Not a valid JOSE object");return new Uint8Array(cbor.encode(E))}var encode_1$1=lib.encode=encode$5;function decode$4(R){let E;try{E=cbor.decode(R)}catch{throw new Error("Not a valid DAG-JOSE object")}if(isEncodedJWS(E))return signing_1.default.decode(E);if(isEncodedJWE(E))return encryption_1.default.decode(E);throw new Error("Not a valid DAG-JOSE object")}decode_1=lib.decode=decode$4;const dagJOSE=_mergeNamespaces({__proto__:null,get decode(){return decode_1},get encode(){return encode_1$1},get toGeneral(){return toGeneral_1},get code(){return code$3},get name(){return name$3},default:lib},[lib]),code$2=0,name$2="identity",encode$4=coerce,digest=R=>create$3(code$2,encode$4(R)),identity$1={code:code$2,name:name$2,encode:encode$4,digest},identity$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"})),identity=from$1({prefix:"\0",name:"identity",encode:R=>toString$5(R),decode:R=>fromString$3(R)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((R,E,U)=>(R[U]=E,R),[]),alphabetCharsToBytes=alphabet.reduce((R,E,U)=>(R[E.codePointAt(0)]=U,R),[]);function encode$3(R){return R.reduce((E,U)=>(E+=alphabetBytesToChars[U],E),"")}function decode$3(R){const E=[];for(const U of R){const G=alphabetCharsToBytes[U.codePointAt(0)];if(G===void 0)throw new Error(`Non-base256emoji character: ${U}`);E.push(G)}return new Uint8Array(E)}const base256emoji=from$1({prefix:"\u{1F680}",name:"base256emoji",encode:encode$3,decode:decode$3}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),sha=R=>async E=>new Uint8Array(await crypto.subtle.digest(R,E)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256,sha512},Symbol.toStringTag,{value:"Module"})),name$1="raw",code$1=85,encode$2=R=>coerce(R),decode$2=R=>coerce(R),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$1,code:code$1,encode:encode$2,decode:decode$2},Symbol.toStringTag,{value:"Module"})),textEncoder=new TextEncoder,textDecoder=new TextDecoder,name="json",code=512,encode$1=R=>textEncoder.encode(JSON.stringify(R)),decode$1=R=>JSON.parse(textDecoder.decode(R)),json=Object.freeze(Object.defineProperty({__proto__:null,name,code,encode:encode$1,decode:decode$1},Symbol.toStringTag,{value:"Module"})),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$3,...base256emoji$1},hashes={...sha2,...identity$2},codecs={raw,json},word="[a-fA-F\\d:]",boundry=R=>R&&R.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=R=>R&&R.exact?v46Exact:new RegExp(`(?:${boundry(R)}${v4}${boundry(R)})|(?:${boundry(R)}${v6}${boundry(R)})`,"g");ipRegex.v4=R=>R&&R.exact?v4exact:new RegExp(`${boundry(R)}${v4}${boundry(R)}`,"g");ipRegex.v6=R=>R&&R.exact?v6exact:new RegExp(`${boundry(R)}${v6}${boundry(R)}`,"g");function functionTimeout(R){const E=(...U)=>R(...U);return Object.defineProperty(E,"name",{value:`functionTimeout(${R.name||"<anonymous>"})`,configurable:!0}),E}const{toString:toString$3}=Object.prototype;function isRegexp(R){return toString$3.call(R)==="[object RegExp]"}const flagMap={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function clonedRegexp(R,E={}){if(!isRegexp(R))throw new TypeError("Expected a RegExp instance");const U=Object.keys(flagMap).map(Y=>(typeof E[Y]=="boolean"?E[Y]:R[Y])?flagMap[Y]:"").join(""),G=new RegExp(E.source||R.source,U);return G.lastIndex=typeof E.lastIndex=="number"?E.lastIndex:R.lastIndex,G}function isMatch(R,E,{timeout:U}={}){try{return functionTimeout(()=>clonedRegexp(R).test(E),{timeout:U})()}catch(G){throw G}}const maxIPv4Length=15,maxIPv6Length=45,options={timeout:400};function isIP(R){return isMatch(ipRegex({exact:!0}),R.slice(0,maxIPv6Length),options)}function isIPv6(R){return isMatch(ipRegex.v6({exact:!0}),R.slice(0,maxIPv6Length),options)}function isIPv4(R){return isMatch(ipRegex.v4({exact:!0}),R.slice(0,maxIPv4Length),options)}function allocUnsafe(R=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(R):new Uint8Array(R)}function createCodec(R,E,U,G){return{name:R,prefix:E,encoder:{name:R,prefix:E,encode:U},decoder:{decode:G}}}const string=createCodec("utf8","u",R=>{const E=new TextDecoder("utf8");return"u"+E.decode(R)},R=>new TextEncoder().encode(R.substring(1))),ascii=createCodec("ascii","a",R=>{let E="a";for(let U=0;U<R.length;U++)E+=String.fromCharCode(R[U]);return E},R=>{R=R.substring(1);const E=allocUnsafe(R.length);for(let U=0;U<R.length;U++)E[U]=R.charCodeAt(U);return E}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$2(R,E="utf8"){const U=BASES[E];if(!U)throw new Error(`Unsupported encoding "${E}"`);return(E==="utf8"||E==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(R.buffer,R.byteOffset,R.byteLength).toString("utf8"):U.encoder.encode(R).substring(1)}const isV4=isIPv4,isV6=isIPv6,toBytes$1=function(R){let E=0,U;if(isV4(R))U=new Uint8Array(E+4),R.split(/\./g).forEach(G=>{U[E++]=parseInt(G,10)&255});else if(isV6(R)){const G=R.split(":",8);let Y;for(Y=0;Y<G.length;Y++){const J=isV4(G[Y]);let Q;J&&(Q=toBytes$1(G[Y]),G[Y]=toString$2(Q.slice(0,2),"base16")),Q!=null&&++Y<8&&G.splice(Y,0,toString$2(Q.slice(2,4),"base16"))}if(G[0]==="")for(;G.length<8;)G.unshift("0");else if(G[G.length-1]==="")for(;G.length<8;)G.push("0");else if(G.length<8){for(Y=0;Y<G.length&&G[Y]!=="";Y++);const J=[Y,1];for(Y=9-G.length;Y>0;Y--)J.push("0");G.splice.apply(G,J)}for(U=new Uint8Array(E+16),Y=0;Y<G.length;Y++){const J=parseInt(G[Y],16);U[E++]=J>>8&255,U[E++]=J&255}}if(U==null)throw Error("Invalid ip address: "+R);return U},toString$1=function(R,E,U){E=~~E,U=U!=null?U:R.length-E;const G=[];let Y="";const J=new DataView(R.buffer);if(U===4){for(let Q=0;Q<U;Q++)G.push(R[E+Q]);Y=G.join(".")}else if(U===16){for(let Q=0;Q<U;Q+=2)G.push(J.getUint16(E+Q).toString(16));Y=G.join(":"),Y=Y.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),Y=Y.replace(/:{3,4}/,"::")}return Y},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(R=>{const E=createProtocol(...R);codes[E.code]=E,names[E.name]=E});function createProtocol(R,E,U,G,Y){return{code:R,size:E,name:U,resolvable:Boolean(G),path:Boolean(Y)}}function getProtocol(R){if(typeof R=="number"){if(codes[R]!=null)return codes[R];throw new Error(`no protocol with code: ${R}`)}else if(typeof R=="string"){if(names[R]!=null)return names[R];throw new Error(`no protocol with name: ${R}`)}throw new Error(`invalid protocol id type: ${typeof R}`)}var encode_1=encode,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode(R,E,U){if(Number.MAX_SAFE_INTEGER&&R>Number.MAX_SAFE_INTEGER)throw encode.bytes=0,new RangeError("Could not encode varint");E=E||[],U=U||0;for(var G=U;R>=INT;)E[U++]=R&255|MSB$1,R/=128;for(;R&MSBALL;)E[U++]=R&255|MSB$1,R>>>=7;return E[U]=R|0,encode.bytes=U-G+1,E}var decode=read,MSB=128,REST=127;function read(R,G){var U=0,G=G||0,Y=0,J=G,Q,X=R.length;do{if(J>=X||Y>49)throw read.bytes=0,new RangeError("Could not decode varint");Q=R[J++],U+=Y<28?(Q&REST)<<Y:(Q&REST)*Math.pow(2,Y),Y+=7}while(Q>=MSB);return read.bytes=J-G,U}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(R){return R<N1?1:R<N2?2:R<N3?3:R<N4?4:R<N5?5:R<N6?6:R<N7?7:R<N8?8:R<N9?9:10},varint={encode:encode_1,decode,encodingLength:length};function fromString$1(R,E="utf8"){const U=BASES[E];if(!U)throw new Error(`Unsupported encoding "${E}"`);return(E==="utf8"||E==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(R,"utf8"):U.decoder.decode(`${U.prefix}${R}`)}function concat(R,E){E||(E=R.reduce((Y,J)=>Y+J.length,0));const U=allocUnsafe(E);let G=0;for(const Y of R)U.set(Y,G),G+=Y.length;return U}function convertToString(R,E){switch(getProtocol(R).code){case 4:case 41:return bytes2ip(E);case 6:case 273:case 33:case 132:return bytes2port(E).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(E);case 421:return bytes2mh(E);case 444:return bytes2onion(E);case 445:return bytes2onion(E);case 466:return bytes2mb(E);default:return toString$2(E,"base16")}}function convertToBytes(R,E){switch(getProtocol(R).code){case 4:return ip2bytes(E);case 41:return ip2bytes(E);case 6:case 273:case 33:case 132:return port2bytes(parseInt(E,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(E);case 421:return mh2bytes(E);case 444:return onion2bytes(E);case 445:return onion32bytes(E);case 466:return mb2bytes(E);default:return fromString$1(E,"base16")}}const decoders=Object.values(bases).map(R=>R.decoder),anybaseDecoder=function(){let R=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(E=>R=R.or(E)),R}();function ip2bytes(R){if(!isIP(R))throw new Error("invalid ip address");return toBytes$1(R)}function bytes2ip(R){const E=toString$1(R,0,R.length);if(E==null||!isIP(E))throw new Error("invalid ip address");return E}function port2bytes(R){const E=new ArrayBuffer(2);return new DataView(E).setUint16(0,R),new Uint8Array(E)}function bytes2port(R){return new DataView(R.buffer).getUint16(R.byteOffset)}function str2bytes(R){const E=fromString$1(R),U=Uint8Array.from(varint.encode(E.length));return concat([U,E],U.length+E.length)}function bytes2str(R){const E=varint.decode(R);if(R=R.slice(varint.decode.bytes),R.length!==E)throw new Error("inconsistent lengths");return toString$2(R)}function mh2bytes(R){let E;R[0]==="Q"||R[0]==="1"?E=decode$e(base58btc.decode(`z${R}`)).bytes:E=CID.parse(R).multihash.bytes;const U=Uint8Array.from(varint.encode(E.length));return concat([U,E],U.length+E.length)}function mb2bytes(R){const E=anybaseDecoder.decode(R),U=Uint8Array.from(varint.encode(E.length));return concat([U,E],U.length+E.length)}function bytes2mb(R){const E=varint.decode(R),U=R.slice(varint.decode.bytes);if(U.length!==E)throw new Error("inconsistent lengths");return"u"+toString$2(U,"base64url")}function bytes2mh(R){const E=varint.decode(R),U=R.slice(varint.decode.bytes);if(U.length!==E)throw new Error("inconsistent lengths");return toString$2(U,"base58btc")}function onion2bytes(R){const E=R.split(":");if(E.length!==2)throw new Error(`failed to parse onion addr: ["'${E.join('", "')}'"]' does not contain a port number`);if(E[0].length!==16)throw new Error(`failed to parse onion addr: ${E[0]} not a Tor onion address.`);const U=base32.decode("b"+E[0]),G=parseInt(E[1],10);if(G<1||G>65536)throw new Error("Port number is not in range(1, 65536)");const Y=port2bytes(G);return concat([U,Y],U.length+Y.length)}function onion32bytes(R){const E=R.split(":");if(E.length!==2)throw new Error(`failed to parse onion addr: ["'${E.join('", "')}'"]' does not contain a port number`);if(E[0].length!==56)throw new Error(`failed to parse onion addr: ${E[0]} not a Tor onion3 address.`);const U=base32.decode(`b${E[0]}`),G=parseInt(E[1],10);if(G<1||G>65536)throw new Error("Port number is not in range(1, 65536)");const Y=port2bytes(G);return concat([U,Y],U.length+Y.length)}function bytes2onion(R){const E=R.slice(0,R.length-2),U=R.slice(R.length-2),G=toString$2(E,"base32"),Y=bytes2port(U);return`${G}:${Y}`}function stringToStringTuples(R){const E=[],U=R.split("/").slice(1);if(U.length===1&&U[0]==="")return[];for(let G=0;G<U.length;G++){const Y=U[G],J=getProtocol(Y);if(J.size===0){E.push([Y]);continue}if(G++,G>=U.length)throw ParseError("invalid address: "+R);if(J.path===!0){E.push([Y,cleanPath(U.slice(G).join("/"))]);break}E.push([Y,U[G]])}return E}function stringTuplesToString(R){const E=[];return R.map(U=>{const G=protoFromTuple(U);return E.push(G.name),U.length>1&&U[1]!=null&&E.push(U[1]),null}),cleanPath(E.join("/"))}function stringTuplesToTuples(R){return R.map(E=>{Array.isArray(E)||(E=[E]);const U=protoFromTuple(E);return E.length>1?[U.code,convertToBytes(U.code,E[1])]:[U.code]})}function tuplesToStringTuples(R){return R.map(E=>{const U=protoFromTuple(E);return E[1]!=null?[U.code,convertToString(U.code,E[1])]:[U.code]})}function tuplesToBytes(R){return fromBytes(concat(R.map(E=>{const U=protoFromTuple(E);let G=Uint8Array.from(varint.encode(U.code));return E.length>1&&E[1]!=null&&(G=concat([G,E[1]])),G})))}function sizeForAddr(R,E){return R.size>0?R.size/8:R.size===0?0:varint.decode(E)+varint.decode.bytes}function bytesToTuples(R){const E=[];let U=0;for(;U<R.length;){const G=varint.decode(R,U),Y=varint.decode.bytes,J=getProtocol(G),Q=sizeForAddr(J,R.slice(U+Y));if(Q===0){E.push([G]),U+=Y;continue}const X=R.slice(U+Y,U+Y+Q);if(U+=Q+Y,U>R.length)throw ParseError("Invalid address Uint8Array: "+toString$2(R,"base16"));E.push([G,X])}return E}function bytesToString(R){const E=bytesToTuples(R),U=tuplesToStringTuples(E);return stringTuplesToString(U)}function stringToBytes(R){R=cleanPath(R);const E=stringToStringTuples(R),U=stringTuplesToTuples(E);return tuplesToBytes(U)}function fromString(R){return stringToBytes(R)}function fromBytes(R){const E=validateBytes(R);if(E!=null)throw E;return Uint8Array.from(R)}function validateBytes(R){try{bytesToTuples(R)}catch(E){return E}}function cleanPath(R){return"/"+R.trim().split("/").filter(E=>E).join("/")}function ParseError(R){return new Error("Error parsing address: "+R)}function protoFromTuple(R){return getProtocol(R[0])}function assign(R,E){for(const U in E)Object.defineProperty(R,U,{value:E[U],enumerable:!0,configurable:!0});return R}function createError(R,E,U){if(!R||typeof R=="string")throw new TypeError("Please pass an Error to err-code");U||(U={}),typeof E=="object"&&(U=E,E=""),E&&(U.code=E);try{return assign(R,U)}catch{U.message=R.message,U.stack=R.stack;const Y=function(){};return Y.prototype=Object.create(Object.getPrototypeOf(R)),assign(new Y,U)}}var errCode=createError;function equals(R,E){if(R===E)return!0;if(R.byteLength!==E.byteLength)return!1;for(let U=0;U<R.byteLength;U++)if(R[U]!==E[U])return!1;return!0}const inspect=Symbol.for("nodejs.util.inspect.custom"),IP_CODES=[getProtocol("ip4").code,getProtocol("ip6").code],DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],P2P_CODES=[getProtocol("p2p").code,getProtocol("ipfs").code],TCP_UDP_CODES=[getProtocol("tcp").code,getProtocol("udp").code],resolvers=new Map,symbol$1=Symbol.for("@multiformats/js-multiaddr/multiaddr");class Multiaddr{constructor(E){if(E==null&&(E=""),Object.defineProperty(this,symbol$1,{value:!0}),E instanceof Uint8Array)this.bytes=fromBytes(E);else if(typeof E=="string"){if(E.length>0&&E.charAt(0)!=="/")throw new Error(`multiaddr "${E}" must start with a "/"`);this.bytes=fromString(E)}else if(Multiaddr.isMultiaddr(E))this.bytes=fromBytes(E.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const E=this.protoCodes(),U=this.toString().split("/").slice(1);let G,Y;if(U.length>2)DNS_CODES.includes(E[0])&&P2P_CODES.includes(E[1])?(G=getProtocol("tcp").name,Y=443):(G=getProtocol(U[2]).name,Y=parseInt(U[3]));else if(DNS_CODES.includes(E[0]))G=getProtocol("tcp").name,Y=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:E[0]===41||E[0]===55?6:4,host:U[1],transport:G,port:Y}}protos(){return this.protoCodes().map(E=>Object.assign({},getProtocol(E)))}protoCodes(){const E=[],U=this.bytes;let G=0;for(;G<U.length;){const Y=varint.decode(U,G),J=varint.decode.bytes,Q=getProtocol(Y);G+=sizeForAddr(Q,U.slice(G+J))+J,E.push(Y)}return E}protoNames(){return this.protos().map(E=>E.name)}tuples(){return bytesToTuples(this.bytes)}stringTuples(){const E=bytesToTuples(this.bytes);return tuplesToStringTuples(E)}encapsulate(E){return E=new Multiaddr(E),new Multiaddr(this.toString()+E.toString())}decapsulate(E){const U=E.toString(),G=this.toString(),Y=G.lastIndexOf(U);if(Y<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${E.toString()}`);return new Multiaddr(G.slice(0,Y))}decapsulateCode(E){const U=this.tuples();for(let G=U.length-1;G>=0;G--)if(U[G][0]===E)return new Multiaddr(tuplesToBytes(U.slice(0,G)));return this}getPeerId(){try{const U=this.stringTuples().filter(G=>G[0]===names.ipfs.code).pop();if((U==null?void 0:U[1])!=null){const G=U[1];return G[0]==="Q"||G[0]==="1"?toString$2(base58btc.decode(`z${G}`),"base58btc"):toString$2(CID.parse(G).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let E=null;try{E=this.stringTuples().filter(U=>getProtocol(U[0]).path===!0)[0][1],E==null&&(E=null)}catch{E=null}return E}equals(E){return equals(this.bytes,E.bytes)}async resolve(E){const U=this.protos().find(J=>J.resolvable);if(U==null)return[this];const G=resolvers.get(U.name);if(G==null)throw errCode(new Error(`no available resolver for ${U.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await G(this,E)).map(J=>new Multiaddr(J))}nodeAddress(){const E=this.protoCodes(),U=this.protoNames(),G=this.toString().split("/").slice(1);let Y=getProtocol(G[2]).code,J=parseInt(G[3]);if(DNS_CODES.includes(E[0])&&P2P_CODES.includes(E[1])&&(Y=getProtocol("tcp").code,J=443),G.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!IP_CODES.includes(E[0])&&!DNS_CODES.includes(E[0]))throw new Error(`no protocol with name: "'${U[0]}'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".`);if(!TCP_UDP_CODES.includes(Y))throw new Error(`no protocol with name: "'${U[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:E[0]===41||E[0]===55?6:4,address:G[1],port:J}}isThinWaistAddress(E){const U=(E!=null?E:this).protos();return!(U.length!==2||U[0].code!==4&&U[0].code!==41||U[1].code!==6&&U[1].code!==273)}static fromNodeAddress(E,U){if(E==null)throw new Error("requires node address object");if(U==null)throw new Error("requires transport protocol");let G;switch(E.family){case 4:G="ip4";break;case 6:G="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Multiaddr("/"+[G,E.address,U,E.port].join("/"))}static isName(E){return Multiaddr.isMultiaddr(E)?E.protos().some(U=>U.resolvable):!1}static isMultiaddr(E){return Boolean(E==null?void 0:E[symbol$1])}[inspect](){return"<Multiaddr "+toString$2(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+toString$2(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}}Multiaddr.resolvers=resolvers;function commonjsRequire(R){throw new Error('Could not dynamically require "'+R+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function isElectron$1(){return typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}var isElectron_1=isElectron$1;const isElectron=isElectron_1,IS_ENV_WITH_DOM=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,IS_ELECTRON=isElectron(),IS_BROWSER=IS_ENV_WITH_DOM&&!IS_ELECTRON,IS_ELECTRON_MAIN=IS_ELECTRON&&!IS_ENV_WITH_DOM,IS_ELECTRON_RENDERER=IS_ELECTRON&&IS_ENV_WITH_DOM,IS_NODE=typeof commonjsRequire=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!IS_ELECTRON,IS_WEBWORKER=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,IS_TEST=typeof process<"u"&&typeof process.env<"u"&&!1,IS_REACT_NATIVE=typeof navigator<"u"&&navigator.product==="ReactNative";var env={isTest:IS_TEST,isElectron:IS_ELECTRON,isElectronMain:IS_ELECTRON_MAIN,isElectronRenderer:IS_ELECTRON_RENDERER,isNode:IS_NODE,isBrowser:IS_BROWSER,isWebWorker:IS_WEBWORKER,isEnvWithDom:IS_ENV_WITH_DOM,isReactNative:IS_REACT_NATIVE};let durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;parse.nanosecond=parse.ns=1/1e6;parse.\u00B5s=parse.\u03BCs=parse.us=parse.microsecond=1/1e3;parse.millisecond=parse.ms=parse[""]=1;parse.second=parse.sec=parse.s=parse.ms*1e3;parse.minute=parse.min=parse.m=parse.s*60;parse.hour=parse.hr=parse.h=parse.m*60;parse.day=parse.d=parse.h*24;parse.week=parse.wk=parse.w=parse.d*7;parse.month=parse.b=parse.d*(365.25/12);parse.year=parse.yr=parse.y=parse.d*365.25;function parse(R="",E="ms"){var U=null;return R=(R+"").replace(/(\d)[,_](\d)/g,"$1$2"),R.replace(durationRE,function(G,Y,J){J=unitRatio(J),J&&(U=(U||0)+parseFloat(Y,10)*J)}),U&&U/(unitRatio(E)||1)}function unitRatio(R){return parse[R]||parse[R.toLowerCase().replace(/s$/,"")]}debug$2.formatters.b=R=>R==null?"undefined":base58btc.baseEncode(R);debug$2.formatters.t=R=>R==null?"undefined":base32.baseEncode(R);debug$2.formatters.m=R=>R==null?"undefined":base64$2.baseEncode(R);debug$2.formatters.p=R=>R==null?"undefined":R.toString();debug$2.formatters.c=R=>R==null?"undefined":R.toString();debug$2.formatters.k=R=>R==null?"undefined":R.toString();function logger(R){return Object.assign(debug$2(R),{error:debug$2(`${R}:error`),trace:debug$2(`${R}:trace`)})}var error={};class TimeoutError$2 extends Error{constructor(E="Request timed out"){super(E),this.name="TimeoutError"}}error.TimeoutError=TimeoutError$2;class AbortError$1 extends Error{constructor(E="The operation was aborted."){super(E),this.name="AbortError"}}error.AbortError=AbortError$1;class HTTPError$1 extends Error{constructor(E){super(E.statusText),this.name="HTTPError",this.response=E}}error.HTTPError=HTTPError$1;var fetch_browser$1={exports:{}},src={exports:{}},browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(R,E){var U=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof G<"u")return G;throw new Error("unable to locate global object")},G=U();R.exports=E=G.fetch,G.fetch&&(E.default=G.fetch.bind(G)),E.Headers=G.Headers,E.Request=G.Request,E.Response=G.Response}(browser,browser.exports)),browser.exports}globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src.exports={default:requireBrowser().default,Headers:requireBrowser().Headers,Request:requireBrowser().Request,Response:requireBrowser().Response};(function(R){R.exports=src.exports})(fetch_browser$1);const{TimeoutError:TimeoutError$1,AbortError}=error,{Response:Response$1,Request:Request$2,Headers:Headers$2,default:fetch$1}=fetch_browser$1.exports,fetchWithProgress=(R,E={})=>{const U=new XMLHttpRequest;U.open(E.method||"GET",R.toString(),!0);const{timeout:G,headers:Y}=E;if(G&&G>0&&G<1/0&&(U.timeout=G),E.overrideMimeType!=null&&U.overrideMimeType(E.overrideMimeType),Y)for(const[J,Q]of new Headers$2(Y))U.setRequestHeader(J,Q);return E.signal&&(E.signal.onabort=()=>U.abort()),E.onUploadProgress&&(U.upload.onprogress=E.onUploadProgress),U.responseType="arraybuffer",new Promise((J,Q)=>{const X=Z=>{switch(Z.type){case"error":{J(Response$1.error());break}case"load":{J(new ResponseWithURL(U.responseURL,U.response,{status:U.status,statusText:U.statusText,headers:parseHeaders(U.getAllResponseHeaders())}));break}case"timeout":{Q(new TimeoutError$1);break}case"abort":{Q(new AbortError);break}}};U.onerror=X,U.onload=X,U.ontimeout=X,U.onabort=X,U.send(E.body)})},fetchWithStreaming=fetch$1,fetchWith=(R,E={})=>E.onUploadProgress!=null?fetchWithProgress(R,E):fetchWithStreaming(R,E),parseHeaders=R=>{const E=new Headers$2;for(const U of R.trim().split(/[\r\n]+/)){const G=U.indexOf(": ");G>0&&E.set(U.slice(0,G),U.slice(G+1))}return E};class ResponseWithURL extends Response$1{constructor(E,U,G){super(U,G),Object.defineProperty(this,"url",{value:E})}}var fetch_browser={fetch:fetchWith,Request:Request$2,Headers:Headers$2},isPlainObj=R=>{if(Object.prototype.toString.call(R)!=="[object Object]")return!1;const E=Object.getPrototypeOf(R);return E===null||E===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(R,E,U)=>Object.defineProperty(R,E,{value:U,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=R=>{const E=[];for(const U in R)hasOwnProperty.call(R,U)&&E.push(U);if(Object.getOwnPropertySymbols){const U=Object.getOwnPropertySymbols(R);for(const G of U)propertyIsEnumerable.call(R,G)&&E.push(G)}return E};function clone$1(R){return Array.isArray(R)?cloneArray(R):isOptionObject(R)?cloneOptionObject(R):R}function cloneArray(R){const E=R.slice(0,0);return getEnumerableOwnPropertyKeys(R).forEach(U=>{defineProperty(E,U,clone$1(R[U]))}),E}function cloneOptionObject(R){const E=Object.getPrototypeOf(R)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(R).forEach(U=>{defineProperty(E,U,clone$1(R[U]))}),E}const mergeKeys=(R,E,U,G)=>(U.forEach(Y=>{typeof E[Y]>"u"&&G.ignoreUndefined||(Y in R&&R[Y]!==Object.getPrototypeOf(R)?defineProperty(R,Y,merge$2(R[Y],E[Y],G)):defineProperty(R,Y,clone$1(E[Y])))}),R),concatArrays=(R,E,U)=>{let G=R.slice(0,0),Y=0;return[R,E].forEach(J=>{const Q=[];for(let X=0;X<J.length;X++)!hasOwnProperty.call(J,X)||(Q.push(String(X)),J===R?defineProperty(G,Y++,J[X]):defineProperty(G,Y++,clone$1(J[X])));G=mergeKeys(G,J,getEnumerableOwnPropertyKeys(J).filter(X=>!Q.includes(X)),U)}),G};function merge$2(R,E,U){return U.concatArrays&&Array.isArray(R)&&Array.isArray(E)?concatArrays(R,E,U):!isOptionObject(E)||!isOptionObject(R)?clone$1(E):mergeKeys(R,E,getEnumerableOwnPropertyKeys(E),U)}var mergeOptions=function(...R){const E=merge$2(clone$1(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let U={_:{}};for(const G of R)if(G!==void 0){if(!isOptionObject(G))throw new TypeError("`"+G+"` is not an Option Object");U=merge$2(U,{_:G},E)}return U._};const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$2=self.URL,defaultBase$1=getDefaultBase();class URLWithLegacySupport$2{constructor(E="",U=defaultBase$1){this.super=new URL$2(E,U),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(E){this.super.hash=E}set host(E){this.super.host=E}set hostname(E){this.super.hostname=E}set href(E){this.super.href=E}set password(E){this.super.password=E}set pathname(E){this.super.pathname=E}set port(E){this.super.port=E}set protocol(E){this.super.protocol=E}set search(E){this.super.search=E}set username(E){this.super.username=E}static createObjectURL(E){return URL$2.createObjectURL(E)}static revokeObjectURL(E){URL$2.revokeObjectURL(E)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function format$3(R){if(typeof R=="string")return new URL$2(R).toString();if(!(R instanceof URL$2)){const E=R.username&&R.password?`${R.username}:${R.password}@`:"",U=R.auth?R.auth+"@":"",G=R.port?":"+R.port:"",Y=R.protocol?R.protocol+"//":"",J=R.host||"",Q=R.hostname||"",X=R.search||(R.query?"?"+R.query:""),Z=R.hash||"",ee=R.pathname||"",te=R.path||ee+X;return`${Y}${E||U}${J||Q+G}${te}${Z}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$3};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$2}=urlBrowser;var relative$1=(R,E={},U={},G)=>{let Y=E.protocol?E.protocol.replace(":",""):"http";Y=(U[Y]||G||Y)+":";let J;try{J=new URLWithLegacySupport$1(R)}catch{J={}}const Q=Object.assign({},E,{protocol:Y||J.protocol,host:E.host||J.host});return new URLWithLegacySupport$1(R,format$2(Q)).toString()};const{URLWithLegacySupport,format:format$1,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format:format$1,relative,defaultBase},anySignal$2={exports:{}};function anySignal$1(R){const E=new globalThis.AbortController;function U(){E.abort();for(const G of R)!G||!G.removeEventListener||G.removeEventListener("abort",U)}for(const G of R)if(!(!G||!G.addEventListener)){if(G.aborted){U();break}G.addEventListener("abort",U)}return E.signal}anySignal$2.exports=anySignal$1;var anySignal_2=anySignal$2.exports.anySignal=anySignal$1;const{fetch,Request:Request$1,Headers:Headers$1}=fetch_browser,{TimeoutError,HTTPError}=error,merge$1=mergeOptions.bind({ignoreUndefined:!0}),{URL:URL$1,URLSearchParams:URLSearchParams$1}=isoUrl,anySignal=anySignal$2.exports,timeout=(R,E,U)=>{if(E===void 0)return R;const G=Date.now(),Y=()=>Date.now()-G>=E;return new Promise((J,Q)=>{const X=setTimeout(()=>{Y()&&(Q(new TimeoutError),U.abort())},E),Z=ee=>ne=>{if(clearTimeout(X),Y()){Q(new TimeoutError);return}ee(ne)};R.then(Z(J),Z(Q))})},defaults$2={throwHttpErrors:!0,credentials:"same-origin"};class HTTP{constructor(E={}){this.opts=merge$1(defaults$2,E)}async fetch(E,U={}){const G=merge$1(this.opts,U),Y=new Headers$1(G.headers);if(typeof E!="string"&&!(E instanceof URL$1||E instanceof Request$1))throw new TypeError("`resource` must be a string, URL, or Request");const J=new URL$1(E.toString(),G.base),{searchParams:Q,transformSearchParams:X,json:Z}=G;Q&&(typeof X=="function"?J.search=X(new URLSearchParams$1(G.searchParams)):J.search=new URLSearchParams$1(G.searchParams)),Z&&(G.body=JSON.stringify(G.json),Y.set("content-type","application/json"));const ee=new AbortController,te=anySignal([ee.signal,G.signal]),ne=await timeout(fetch(J.toString(),{...G,signal:te,timeout:void 0,headers:Y}),G.timeout,ee);if(!ne.ok&&G.throwHttpErrors)throw G.handleError&&await G.handleError(ne),new HTTPError(ne);return ne.iterator=async function*(){yield*fromStream(ne.body)},ne.ndjson=async function*(){for await(const oe of ndjson(ne.iterator()))U.transform?yield U.transform(oe):yield oe},ne}post(E,U={}){return this.fetch(E,{...U,method:"POST"})}get(E,U={}){return this.fetch(E,{...U,method:"GET"})}put(E,U={}){return this.fetch(E,{...U,method:"PUT"})}delete(E,U={}){return this.fetch(E,{...U,method:"DELETE"})}options(E,U={}){return this.fetch(E,{...U,method:"OPTIONS"})}}const ndjson=async function*(R){const E=new TextDecoder;let U="";for await(const G of R){U+=E.decode(G,{stream:!0});const Y=U.split(/\r?\n/);for(let J=0;J<Y.length-1;J++){const Q=Y[J].trim();Q.length>0&&(yield JSON.parse(Q))}U=Y[Y.length-1]}U+=E.decode(),U=U.trim(),U.length!==0&&(yield JSON.parse(U))},fromStream=R=>{if(isNodeReadableStream(R)){const E=R[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:E.next.bind(E),return(U){return R.destroy(),typeof E.return=="function"?E.return():Promise.resolve({done:!0,value:U})}}}}}if(isWebReadableStream(R)){const E=R.getReader();return async function*(){try{for(;;){const{done:U,value:G}=await E.read();if(U)return;G&&(yield G)}}finally{E.releaseLock()}}()}if(isAsyncIterable(R))return R;throw new TypeError("Body can't be converted to AsyncIterable")},isAsyncIterable=R=>typeof R=="object"&&R!==null&&typeof R[Symbol.asyncIterator]=="function",isWebReadableStream=R=>R&&typeof R.getReader=="function",isNodeReadableStream=R=>Object.prototype.hasOwnProperty.call(R,"readable")&&Object.prototype.hasOwnProperty.call(R,"writable");HTTP.HTTPError=HTTPError;HTTP.TimeoutError=TimeoutError;HTTP.streamToAsyncIterator=fromStream;HTTP.post=(R,E)=>new HTTP(E).post(R,E);HTTP.get=(R,E)=>new HTTP(E).get(R,E);HTTP.put=(R,E)=>new HTTP(E).put(R,E);HTTP.delete=(R,E)=>new HTTP(E).delete(R,E);HTTP.options=(R,E)=>new HTTP(E).options(R,E);var http=HTTP;const reduceValue=(R,E)=>E,tcpUri=(R,E,U,G)=>{if(G!=null&&G.assumeHttp===!1)return`tcp://${R}:${E}`;let Y="tcp",J=`:${E}`;return U[U.length-1].protocol==="tcp"&&(Y=E==="443"?"https":"http",J=E==="443"||E==="80"?"":J),`${Y}://${R}${J}`},Reducers={ip4:reduceValue,ip6:(R,E,U,G)=>G.length===1&&G[0].protocol==="ip6"?E:`[${E}]`,tcp:(R,E,U,G,Y)=>G.some(J=>["http","https","ws","wss"].includes(J.protocol))?`${R}:${E}`:tcpUri(R,E,G,Y),udp:(R,E)=>`udp://${R}:${E}`,dnsaddr:reduceValue,dns4:reduceValue,dns6:reduceValue,ipfs:(R,E)=>`${R}/ipfs/${E}`,p2p:(R,E)=>`${R}/p2p/${E}`,http:R=>`http://${R}`,https:R=>`https://${R}`,ws:R=>`ws://${R}`,wss:R=>`wss://${R}`,"p2p-websocket-star":R=>`${R}/p2p-websocket-star`,"p2p-webrtc-star":R=>`${R}/p2p-webrtc-star`,"p2p-webrtc-direct":R=>`${R}/p2p-webrtc-direct`};function multiaddrToUri(R,E){const U=new Multiaddr(R),G=R.toString().split("/").slice(1);return U.tuples().map(Y=>{var J,Q;return{protocol:(J=G.shift())!=null?J:"",content:Y[1]!=null&&(Q=G.shift())!=null?Q:""}}).reduce((Y,J,Q,X)=>{const Z=Reducers[J.protocol];if(Z==null)throw new Error(`Unsupported protocol ${J.protocol}`);return Z(Y,J.content,Q,X,E)},"")}function toUrlString(R){try{R=multiaddrToUri(new Multiaddr(R))}catch{}return R=R.toString(),R}const getAgent=()=>{},log$1=logger("ipfs-http-client:lib:error-handler"),merge=mergeOptions.bind({ignoreUndefined:!0}),DEFAULT_PROTOCOL=env.isBrowser||env.isWebWorker?location.protocol:"http",DEFAULT_HOST=env.isBrowser||env.isWebWorker?location.hostname:"localhost",DEFAULT_PORT=env.isBrowser||env.isWebWorker?location.port:"5001",normalizeOptions=(R={})=>{let E,U={},G;if(typeof R=="string"||Multiaddr.isMultiaddr(R))E=new URL(toUrlString(R));else if(R instanceof URL)E=R;else if(typeof R.url=="string"||Multiaddr.isMultiaddr(R.url))E=new URL(toUrlString(R.url)),U=R;else if(R.url instanceof URL)E=R.url,U=R;else{U=R||{};const Y=(U.protocol||DEFAULT_PROTOCOL).replace(":",""),J=(U.host||DEFAULT_HOST).split(":")[0],Q=U.port||DEFAULT_PORT;E=new URL(`${Y}://${J}:${Q}`)}if(U.apiPath?E.pathname=U.apiPath:(E.pathname==="/"||E.pathname===void 0)&&(E.pathname="api/v0"),env.isNode){const Y=getAgent();G=U.agent||new Y({keepAlive:!0,maxSockets:6})}return{...U,host:E.host,protocol:E.protocol.replace(":",""),port:Number(E.port),apiPath:E.pathname,url:E,agent:G}},errorHandler=async R=>{let E;try{if((R.headers.get("Content-Type")||"").startsWith("application/json")){const G=await R.json();log$1(G),E=G.Message||G.message}else E=await R.text()}catch(G){log$1("Failed to parse error response",G),E=G.message}let U=new http.HTTPError(R);throw E&&(E.includes("deadline has elapsed")&&(U=new http.TimeoutError),E&&E.includes("context deadline exceeded")&&(U=new http.TimeoutError)),E&&E.includes("request timed out")&&(U=new http.TimeoutError),E&&(U.message=E),U},KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kebabCase=R=>R.replace(KEBAB_REGEX,function(E){return"-"+E.toLowerCase()}),parseTimeout=R=>typeof R=="string"?parse(R):R;class Client extends http{constructor(E={}){const U=normalizeOptions(E);super({timeout:parseTimeout(U.timeout||0)||void 0,headers:U.headers,base:`${U.url}`,handleError:errorHandler,transformSearchParams:Y=>{const J=new URLSearchParams;for(const[Q,X]of Y)X!=="undefined"&&X!=="null"&&Q!=="signal"&&J.append(kebabCase(Q),X),Q==="timeout"&&!isNaN(X)&&J.append(kebabCase(Q),X);return J},agent:U.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const G=this.fetch;this.fetch=(Y,J={})=>(typeof Y=="string"&&!Y.startsWith("/")&&(Y=`${U.url}/${Y}`),G.call(this,Y,merge(J,{method:"POST"})))}}const configure=R=>E=>R(new Client(E),E);function modeToString$1(R){if(R!=null)return typeof R=="string"?R:R.toString(8).padStart(4,"0")}function parseMtime$1(R){if(R==null)return;let E;if(R.secs!=null&&(E={secs:R.secs,nsecs:R.nsecs}),R.Seconds!=null&&(E={secs:R.Seconds,nsecs:R.FractionalNanoseconds}),Array.isArray(R)&&(E={secs:R[0],nsecs:R[1]}),R instanceof Date){const U=R.getTime(),G=Math.floor(U/1e3);E={secs:G,nsecs:(U-G*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(E,"secs")){if(E!=null&&E.nsecs!=null&&(E.nsecs<0||E.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return E}}function toUrlSearchParams({arg:R,searchParams:E,hashAlg:U,mtime:G,mode:Y,...J}={}){E&&(J={...J,...E}),U&&(J.hash=U),G!=null&&(G=parseMtime$1(G),J.mtime=G.secs,J.mtimeNsecs=G.nsecs),Y!=null&&(J.mode=modeToString$1(Y)),J.timeout&&!isNaN(J.timeout)&&(J.timeout=`${J.timeout}ms`),R==null?R=[]:Array.isArray(R)||(R=[R]);const Q=new URLSearchParams(J);return R.forEach(X=>Q.append("arg",X)),Q}const createWantlist=configure(R=>{async function E(U={}){return((await(await R.post("bitswap/wantlist",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).Keys||[]).map(Y=>CID.parse(Y["/"]))}return E}),createWantlistForPeer=configure(R=>{async function E(U,G={}){return((await(await R.post("bitswap/wantlist",{signal:G.signal,searchParams:toUrlSearchParams({...G,peer:U.toString()}),headers:G.headers})).json()).Keys||[]).map(J=>CID.parse(J["/"]))}return E}),symbol=Symbol.for("@libp2p/peer-id"),baseDecoder=Object.values(bases).map(R=>R.decoder).reduce((R,E)=>R.or(E),bases.identity.decoder),LIBP2P_KEY_CODE=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH=37;class PeerIdImpl{constructor(E){this.type=E.type,this.multihash=E.multihash,this.privateKey=E.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[symbol](){return!0}toString(){return this.string==null&&(this.string=base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID.createV1(LIBP2P_KEY_CODE,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(E){var U;if(E instanceof Uint8Array)return equals(this.multihash.bytes,E);if(typeof E=="string")return peerIdFromString(E).equals(this);if(((U=E==null?void 0:E.multihash)==null?void 0:U.bytes)!=null)return equals(this.multihash.bytes,E.multihash.bytes);throw new Error("not valid Id")}}class RSAPeerIdImpl extends PeerIdImpl{constructor(E){super({...E,type:"RSA"}),this.type="RSA",this.publicKey=E.publicKey}}class Ed25519PeerIdImpl extends PeerIdImpl{constructor(E){super({...E,type:"Ed25519"}),this.type="Ed25519",this.publicKey=E.multihash.digest}}class Secp256k1PeerIdImpl extends PeerIdImpl{constructor(E){super({...E,type:"secp256k1"}),this.type="secp256k1",this.publicKey=E.multihash.digest}}function peerIdFromString(R,E){if(R.charAt(0)==="1"||R.charAt(0)==="Q"){const U=decode$e(base58btc.decode(`z${R}`));return R.startsWith("12D")?new Ed25519PeerIdImpl({multihash:U}):R.startsWith("16U")?new Secp256k1PeerIdImpl({multihash:U}):new RSAPeerIdImpl({multihash:U})}return peerIdFromBytes(baseDecoder.decode(R))}function peerIdFromBytes(R){try{const E=decode$e(R);if(E.code===identity$1.code){if(E.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:E});if(E.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:E})}if(E.code===sha256.code)return new RSAPeerIdImpl({multihash:E})}catch{return peerIdFromCID(CID.decode(R))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID(R){if(R==null||R.multihash==null||R.version==null||R.version===1&&R.code!==LIBP2P_KEY_CODE)throw new Error("Supplied PeerID CID is invalid");const E=R.multihash;if(E.code===sha256.code)return new RSAPeerIdImpl({multihash:R.multihash});if(E.code===identity$1.code){if(E.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:R.multihash});if(E.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:R.multihash})}throw new Error("Supplied PeerID CID is invalid")}const createStat$4=configure(R=>{async function E(U={}){const G=await R.post("bitswap/stat",{searchParams:toUrlSearchParams(U),signal:U.signal,headers:U.headers});return toCoreInterface$4(await G.json())}return E});function toCoreInterface$4(R){return{provideBufLen:R.ProvideBufLen,wantlist:(R.Wantlist||[]).map(E=>CID.parse(E["/"])),peers:(R.Peers||[]).map(E=>peerIdFromString(E)),blocksReceived:BigInt(R.BlocksReceived),dataReceived:BigInt(R.DataReceived),blocksSent:BigInt(R.BlocksSent),dataSent:BigInt(R.DataSent),dupBlksReceived:BigInt(R.DupBlksReceived),dupDataReceived:BigInt(R.DupDataReceived)}}const createUnwant=configure(R=>{async function E(U,G={}){return(await R.post("bitswap/unwant",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers})).json()}return E});function createBitswap(R){return{wantlist:createWantlist(R),wantlistForPeer:createWantlistForPeer(R),unwant:createUnwant(R),stat:createStat$4(R)}}const createGet$5=configure(R=>{async function E(U,G={}){const Y=await R.post("block/get",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers});return new Uint8Array(await Y.arrayBuffer())}return E});function peekableIterator(R){const[E,U]=R[Symbol.asyncIterator]?[R[Symbol.asyncIterator](),Symbol.asyncIterator]:[R[Symbol.iterator](),Symbol.iterator],G=[];return{peek:()=>E.next(),push:Y=>{G.push(Y)},next:()=>G.length?{done:!1,value:G.shift()}:E.next(),[U](){return this}}}var itPeekable=peekableIterator;async function*browserReadableStreamToIt$1(R,E={}){const U=R.getReader();try{for(;;){const G=await U.read();if(G.done)return;yield G.value}}finally{E.preventCancel!==!0&&U.cancel(),U.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt$1;const all=async R=>{const E=[];for await(const U of R)E.push(U);return E};var itAll=all;function isBytes(R){return ArrayBuffer.isView(R)||R instanceof ArrayBuffer}function isBlob(R){return R.constructor&&(R.constructor.name==="Blob"||R.constructor.name==="File")&&typeof R.stream=="function"}function isFileObject(R){return typeof R=="object"&&(R.path||R.content)}const isReadableStream=R=>R&&typeof R.getReader=="function";async function normaliseContent$1(R){if(isBytes(R))return new Blob([R]);if(typeof R=="string"||R instanceof String)return new Blob([R.toString()]);if(isBlob(R))return R;if(isReadableStream(R)&&(R=browserReadablestreamToIt(R)),Symbol.iterator in R||Symbol.asyncIterator in R){const E=itPeekable(R),{value:U,done:G}=await E.peek();if(G)return itToBlob(E);if(E.push(U),Number.isInteger(U))return new Blob([Uint8Array.from(await itAll(E))]);if(isBytes(U)||typeof U=="string"||U instanceof String)return itToBlob(E)}throw errCode(new Error(`Unexpected input: ${R}`),"ERR_UNEXPECTED_INPUT")}async function itToBlob(R){const E=[];for await(const U of R)E.push(U);return new Blob(E)}const map=async function*(R,E){for await(const U of R)yield E(U)};var itMap=map,minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(R,E){for(var U=new Array(arguments.length-1),G=0,Y=2,J=!0;Y<arguments.length;)U[G++]=arguments[Y++];return new Promise(function(X,Z){U[G]=function(te){if(J)if(J=!1,te)Z(te);else{for(var ne=new Array(arguments.length-1),oe=0;oe<ne.length;)ne[oe++]=arguments[oe];X.apply(null,ne)}};try{R.apply(E||null,U)}catch(ee){J&&(J=!1,Z(ee))}})}var base64$1={};(function(R){var E=R;E.length=function(X){var Z=X.length;if(!Z)return 0;for(var ee=0;--Z%4>1&&X.charAt(Z)==="=";)++ee;return Math.ceil(X.length*3)/4-ee};for(var U=new Array(64),G=new Array(123),Y=0;Y<64;)G[U[Y]=Y<26?Y+65:Y<52?Y+71:Y<62?Y-4:Y-59|43]=Y++;E.encode=function(X,Z,ee){for(var te=null,ne=[],oe=0,ce=0,pe;Z<ee;){var ye=X[Z++];switch(ce){case 0:ne[oe++]=U[ye>>2],pe=(ye&3)<<4,ce=1;break;case 1:ne[oe++]=U[pe|ye>>4],pe=(ye&15)<<2,ce=2;break;case 2:ne[oe++]=U[pe|ye>>6],ne[oe++]=U[ye&63],ce=0;break}oe>8191&&((te||(te=[])).push(String.fromCharCode.apply(String,ne)),oe=0)}return ce&&(ne[oe++]=U[pe],ne[oe++]=61,ce===1&&(ne[oe++]=61)),te?(oe&&te.push(String.fromCharCode.apply(String,ne.slice(0,oe))),te.join("")):String.fromCharCode.apply(String,ne.slice(0,oe))};var J="invalid encoding";E.decode=function(X,Z,ee){for(var te=ee,ne=0,oe,ce=0;ce<X.length;){var pe=X.charCodeAt(ce++);if(pe===61&&ne>1)break;if((pe=G[pe])===void 0)throw Error(J);switch(ne){case 0:oe=pe,ne=1;break;case 1:Z[ee++]=oe<<2|(pe&48)>>4,oe=pe,ne=2;break;case 2:Z[ee++]=(oe&15)<<4|(pe&60)>>2,oe=pe,ne=3;break;case 3:Z[ee++]=(oe&3)<<6|pe,ne=0;break}}if(ne===1)throw Error(J);return ee-te},E.test=function(X){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(X)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(E,U,G){return(this._listeners[E]||(this._listeners[E]=[])).push({fn:U,ctx:G||this}),this};EventEmitter.prototype.off=function(E,U){if(E===void 0)this._listeners={};else if(U===void 0)this._listeners[E]=[];else for(var G=this._listeners[E],Y=0;Y<G.length;)G[Y].fn===U?G.splice(Y,1):++Y;return this};EventEmitter.prototype.emit=function(E){var U=this._listeners[E];if(U){for(var G=[],Y=1;Y<arguments.length;)G.push(arguments[Y++]);for(Y=0;Y<U.length;)U[Y].fn.apply(U[Y++].ctx,G)}return this};var float=factory(factory);function factory(R){return typeof Float32Array<"u"?function(){var E=new Float32Array([-0]),U=new Uint8Array(E.buffer),G=U[3]===128;function Y(Z,ee,te){E[0]=Z,ee[te]=U[0],ee[te+1]=U[1],ee[te+2]=U[2],ee[te+3]=U[3]}function J(Z,ee,te){E[0]=Z,ee[te]=U[3],ee[te+1]=U[2],ee[te+2]=U[1],ee[te+3]=U[0]}R.writeFloatLE=G?Y:J,R.writeFloatBE=G?J:Y;function Q(Z,ee){return U[0]=Z[ee],U[1]=Z[ee+1],U[2]=Z[ee+2],U[3]=Z[ee+3],E[0]}function X(Z,ee){return U[3]=Z[ee],U[2]=Z[ee+1],U[1]=Z[ee+2],U[0]=Z[ee+3],E[0]}R.readFloatLE=G?Q:X,R.readFloatBE=G?X:Q}():function(){function E(G,Y,J,Q){var X=Y<0?1:0;if(X&&(Y=-Y),Y===0)G(1/Y>0?0:2147483648,J,Q);else if(isNaN(Y))G(2143289344,J,Q);else if(Y>34028234663852886e22)G((X<<31|2139095040)>>>0,J,Q);else if(Y<11754943508222875e-54)G((X<<31|Math.round(Y/1401298464324817e-60))>>>0,J,Q);else{var Z=Math.floor(Math.log(Y)/Math.LN2),ee=Math.round(Y*Math.pow(2,-Z)*8388608)&8388607;G((X<<31|Z+127<<23|ee)>>>0,J,Q)}}R.writeFloatLE=E.bind(null,writeUintLE),R.writeFloatBE=E.bind(null,writeUintBE);function U(G,Y,J){var Q=G(Y,J),X=(Q>>31)*2+1,Z=Q>>>23&255,ee=Q&8388607;return Z===255?ee?NaN:X*(1/0):Z===0?X*1401298464324817e-60*ee:X*Math.pow(2,Z-150)*(ee+8388608)}R.readFloatLE=U.bind(null,readUintLE),R.readFloatBE=U.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var E=new Float64Array([-0]),U=new Uint8Array(E.buffer),G=U[7]===128;function Y(Z,ee,te){E[0]=Z,ee[te]=U[0],ee[te+1]=U[1],ee[te+2]=U[2],ee[te+3]=U[3],ee[te+4]=U[4],ee[te+5]=U[5],ee[te+6]=U[6],ee[te+7]=U[7]}function J(Z,ee,te){E[0]=Z,ee[te]=U[7],ee[te+1]=U[6],ee[te+2]=U[5],ee[te+3]=U[4],ee[te+4]=U[3],ee[te+5]=U[2],ee[te+6]=U[1],ee[te+7]=U[0]}R.writeDoubleLE=G?Y:J,R.writeDoubleBE=G?J:Y;function Q(Z,ee){return U[0]=Z[ee],U[1]=Z[ee+1],U[2]=Z[ee+2],U[3]=Z[ee+3],U[4]=Z[ee+4],U[5]=Z[ee+5],U[6]=Z[ee+6],U[7]=Z[ee+7],E[0]}function X(Z,ee){return U[7]=Z[ee],U[6]=Z[ee+1],U[5]=Z[ee+2],U[4]=Z[ee+3],U[3]=Z[ee+4],U[2]=Z[ee+5],U[1]=Z[ee+6],U[0]=Z[ee+7],E[0]}R.readDoubleLE=G?Q:X,R.readDoubleBE=G?X:Q}():function(){function E(G,Y,J,Q,X,Z){var ee=Q<0?1:0;if(ee&&(Q=-Q),Q===0)G(0,X,Z+Y),G(1/Q>0?0:2147483648,X,Z+J);else if(isNaN(Q))G(0,X,Z+Y),G(2146959360,X,Z+J);else if(Q>17976931348623157e292)G(0,X,Z+Y),G((ee<<31|2146435072)>>>0,X,Z+J);else{var te;if(Q<22250738585072014e-324)te=Q/5e-324,G(te>>>0,X,Z+Y),G((ee<<31|te/4294967296)>>>0,X,Z+J);else{var ne=Math.floor(Math.log(Q)/Math.LN2);ne===1024&&(ne=1023),te=Q*Math.pow(2,-ne),G(te*4503599627370496>>>0,X,Z+Y),G((ee<<31|ne+1023<<20|te*1048576&1048575)>>>0,X,Z+J)}}}R.writeDoubleLE=E.bind(null,writeUintLE,0,4),R.writeDoubleBE=E.bind(null,writeUintBE,4,0);function U(G,Y,J,Q,X){var Z=G(Q,X+Y),ee=G(Q,X+J),te=(ee>>31)*2+1,ne=ee>>>20&2047,oe=4294967296*(ee&1048575)+Z;return ne===2047?oe?NaN:te*(1/0):ne===0?te*5e-324*oe:te*Math.pow(2,ne-1075)*(oe+4503599627370496)}R.readDoubleLE=U.bind(null,readUintLE,0,4),R.readDoubleBE=U.bind(null,readUintBE,4,0)}(),R}function writeUintLE(R,E,U){E[U]=R&255,E[U+1]=R>>>8&255,E[U+2]=R>>>16&255,E[U+3]=R>>>24}function writeUintBE(R,E,U){E[U]=R>>>24,E[U+1]=R>>>16&255,E[U+2]=R>>>8&255,E[U+3]=R&255}function readUintLE(R,E){return(R[E]|R[E+1]<<8|R[E+2]<<16|R[E+3]<<24)>>>0}function readUintBE(R,E){return(R[E]<<24|R[E+1]<<16|R[E+2]<<8|R[E+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(R){}return null}var utf8$2={};(function(R){var E=R;E.length=function(G){for(var Y=0,J=0,Q=0;Q<G.length;++Q)J=G.charCodeAt(Q),J<128?Y+=1:J<2048?Y+=2:(J&64512)===55296&&(G.charCodeAt(Q+1)&64512)===56320?(++Q,Y+=4):Y+=3;return Y},E.read=function(G,Y,J){var Q=J-Y;if(Q<1)return"";for(var X=null,Z=[],ee=0,te;Y<J;)te=G[Y++],te<128?Z[ee++]=te:te>191&&te<224?Z[ee++]=(te&31)<<6|G[Y++]&63:te>239&&te<365?(te=((te&7)<<18|(G[Y++]&63)<<12|(G[Y++]&63)<<6|G[Y++]&63)-65536,Z[ee++]=55296+(te>>10),Z[ee++]=56320+(te&1023)):Z[ee++]=(te&15)<<12|(G[Y++]&63)<<6|G[Y++]&63,ee>8191&&((X||(X=[])).push(String.fromCharCode.apply(String,Z)),ee=0);return X?(ee&&X.push(String.fromCharCode.apply(String,Z.slice(0,ee))),X.join("")):String.fromCharCode.apply(String,Z.slice(0,ee))},E.write=function(G,Y,J){for(var Q=J,X,Z,ee=0;ee<G.length;++ee)X=G.charCodeAt(ee),X<128?Y[J++]=X:X<2048?(Y[J++]=X>>6|192,Y[J++]=X&63|128):(X&64512)===55296&&((Z=G.charCodeAt(ee+1))&64512)===56320?(X=65536+((X&1023)<<10)+(Z&1023),++ee,Y[J++]=X>>18|240,Y[J++]=X>>12&63|128,Y[J++]=X>>6&63|128,Y[J++]=X&63|128):(Y[J++]=X>>12|224,Y[J++]=X>>6&63|128,Y[J++]=X&63|128);return J-Q}})(utf8$2);var pool_1=pool;function pool(R,E,U){var G=U||8192,Y=G>>>1,J=null,Q=G;return function(Z){if(Z<1||Z>Y)return R(Z);Q+Z>G&&(J=R(G),Q=0);var ee=E.call(J,Q,Q+=Z);return Q&7&&(Q=(Q|7)+1),ee}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=E;var R=requireMinimal();function E(J,Q){this.lo=J>>>0,this.hi=Q>>>0}var U=E.zero=new E(0,0);U.toNumber=function(){return 0},U.zzEncode=U.zzDecode=function(){return this},U.length=function(){return 1};var G=E.zeroHash="\0\0\0\0\0\0\0\0";E.fromNumber=function(Q){if(Q===0)return U;var X=Q<0;X&&(Q=-Q);var Z=Q>>>0,ee=(Q-Z)/4294967296>>>0;return X&&(ee=~ee>>>0,Z=~Z>>>0,++Z>4294967295&&(Z=0,++ee>4294967295&&(ee=0))),new E(Z,ee)},E.from=function(Q){if(typeof Q=="number")return E.fromNumber(Q);if(R.isString(Q))if(R.Long)Q=R.Long.fromString(Q);else return E.fromNumber(parseInt(Q,10));return Q.low||Q.high?new E(Q.low>>>0,Q.high>>>0):U},E.prototype.toNumber=function(Q){if(!Q&&this.hi>>>31){var X=~this.lo+1>>>0,Z=~this.hi>>>0;return X||(Z=Z+1>>>0),-(X+Z*4294967296)}return this.lo+this.hi*4294967296},E.prototype.toLong=function(Q){return R.Long?new R.Long(this.lo|0,this.hi|0,Boolean(Q)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(Q)}};var Y=String.prototype.charCodeAt;return E.fromHash=function(Q){return Q===G?U:new E((Y.call(Q,0)|Y.call(Q,1)<<8|Y.call(Q,2)<<16|Y.call(Q,3)<<24)>>>0,(Y.call(Q,4)|Y.call(Q,5)<<8|Y.call(Q,6)<<16|Y.call(Q,7)<<24)>>>0)},E.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},E.prototype.zzEncode=function(){var Q=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Q)>>>0,this.lo=(this.lo<<1^Q)>>>0,this},E.prototype.zzDecode=function(){var Q=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Q)>>>0,this.hi=(this.hi>>>1^Q)>>>0,this},E.prototype.length=function(){var Q=this.lo,X=(this.lo>>>28|this.hi<<4)>>>0,Z=this.hi>>>24;return Z===0?X===0?Q<16384?Q<128?1:2:Q<2097152?3:4:X<16384?X<128?5:6:X<2097152?7:8:Z<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(R){var E=R;E.asPromise=aspromise,E.base64=base64$1,E.EventEmitter=eventemitter,E.float=float,E.inquire=inquire_1,E.utf8=utf8$2,E.pool=pool_1,E.LongBits=requireLongbits(),E.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),E.global=E.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,E.emptyArray=Object.freeze?Object.freeze([]):[],E.emptyObject=Object.freeze?Object.freeze({}):{},E.isInteger=Number.isInteger||function(J){return typeof J=="number"&&isFinite(J)&&Math.floor(J)===J},E.isString=function(J){return typeof J=="string"||J instanceof String},E.isObject=function(J){return J&&typeof J=="object"},E.isset=E.isSet=function(J,Q){var X=J[Q];return X!=null&&J.hasOwnProperty(Q)?typeof X!="object"||(Array.isArray(X)?X.length:Object.keys(X).length)>0:!1},E.Buffer=function(){try{var Y=E.inquire("buffer").Buffer;return Y.prototype.utf8Write?Y:null}catch{return null}}(),E._Buffer_from=null,E._Buffer_allocUnsafe=null,E.newBuffer=function(J){return typeof J=="number"?E.Buffer?E._Buffer_allocUnsafe(J):new E.Array(J):E.Buffer?E._Buffer_from(J):typeof Uint8Array>"u"?J:new Uint8Array(J)},E.Array=typeof Uint8Array<"u"?Uint8Array:Array,E.Long=E.global.dcodeIO&&E.global.dcodeIO.Long||E.global.Long||E.inquire("long"),E.key2Re=/^true|false|0|1$/,E.key32Re=/^-?(?:0|[1-9][0-9]*)$/,E.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,E.longToHash=function(J){return J?E.LongBits.from(J).toHash():E.LongBits.zeroHash},E.longFromHash=function(J,Q){var X=E.LongBits.fromHash(J);return E.Long?E.Long.fromBits(X.lo,X.hi,Q):X.toNumber(Boolean(Q))};function U(Y,J,Q){for(var X=Object.keys(J),Z=0;Z<X.length;++Z)(Y[X[Z]]===void 0||!Q)&&(Y[X[Z]]=J[X[Z]]);return Y}E.merge=U,E.lcFirst=function(J){return J.charAt(0).toLowerCase()+J.substring(1)};function G(Y){function J(Q,X){if(!(this instanceof J))return new J(Q,X);Object.defineProperty(this,"message",{get:function(){return Q}}),Error.captureStackTrace?Error.captureStackTrace(this,J):Object.defineProperty(this,"stack",{value:new Error().stack||""}),X&&U(this,X)}return(J.prototype=Object.create(Error.prototype)).constructor=J,Object.defineProperty(J.prototype,"name",{get:function(){return Y}}),J.prototype.toString=function(){return this.name+": "+this.message},J}E.newError=G,E.ProtocolError=G("ProtocolError"),E.oneOfGetter=function(J){for(var Q={},X=0;X<J.length;++X)Q[J[X]]=1;return function(){for(var Z=Object.keys(this),ee=Z.length-1;ee>-1;--ee)if(Q[Z[ee]]===1&&this[Z[ee]]!==void 0&&this[Z[ee]]!==null)return Z[ee]}},E.oneOfSetter=function(J){return function(Q){for(var X=0;X<J.length;++X)J[X]!==Q&&delete this[J[X]]}},E.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},E._configure=function(){var Y=E.Buffer;if(!Y){E._Buffer_from=E._Buffer_allocUnsafe=null;return}E._Buffer_from=Y.from!==Uint8Array.from&&Y.from||function(Q,X){return new Y(Q,X)},E._Buffer_allocUnsafe=Y.allocUnsafe||function(Q){return new Y(Q)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(R,E,U){this.fn=R,this.len=E,this.next=void 0,this.val=U}function noop(){}function State(R){this.head=R.head,this.tail=R.tail,this.len=R.len,this.next=R.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function R(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function R(E){return new util$4.Array(E)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function R(E,U,G){return this.tail=this.tail.next=new Op(E,U,G),this.len+=U,this};function writeByte(R,E,U){E[U]=R&255}function writeVarint32(R,E,U){for(;R>127;)E[U++]=R&127|128,R>>>=7;E[U]=R}function VarintOp(R,E){this.len=R,this.next=void 0,this.val=E}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function R(E){return this.len+=(this.tail=this.tail.next=new VarintOp((E=E>>>0)<128?1:E<16384?2:E<2097152?3:E<268435456?4:5,E)).len,this};Writer$1.prototype.int32=function R(E){return E<0?this._push(writeVarint64,10,LongBits$1.fromNumber(E)):this.uint32(E)};Writer$1.prototype.sint32=function R(E){return this.uint32((E<<1^E>>31)>>>0)};function writeVarint64(R,E,U){for(;R.hi;)E[U++]=R.lo&127|128,R.lo=(R.lo>>>7|R.hi<<25)>>>0,R.hi>>>=7;for(;R.lo>127;)E[U++]=R.lo&127|128,R.lo=R.lo>>>7;E[U++]=R.lo}Writer$1.prototype.uint64=function R(E){var U=LongBits$1.from(E);return this._push(writeVarint64,U.length(),U)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function R(E){var U=LongBits$1.from(E).zzEncode();return this._push(writeVarint64,U.length(),U)};Writer$1.prototype.bool=function R(E){return this._push(writeByte,1,E?1:0)};function writeFixed32(R,E,U){E[U]=R&255,E[U+1]=R>>>8&255,E[U+2]=R>>>16&255,E[U+3]=R>>>24}Writer$1.prototype.fixed32=function R(E){return this._push(writeFixed32,4,E>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function R(E){var U=LongBits$1.from(E);return this._push(writeFixed32,4,U.lo)._push(writeFixed32,4,U.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function R(E){return this._push(util$4.float.writeFloatLE,4,E)};Writer$1.prototype.double=function R(E){return this._push(util$4.float.writeDoubleLE,8,E)};var writeBytes=util$4.Array.prototype.set?function R(E,U,G){U.set(E,G)}:function R(E,U,G){for(var Y=0;Y<E.length;++Y)U[G+Y]=E[Y]};Writer$1.prototype.bytes=function R(E){var U=E.length>>>0;if(!U)return this._push(writeByte,1,0);if(util$4.isString(E)){var G=Writer$1.alloc(U=base64.length(E));base64.decode(E,G,0),E=G}return this.uint32(U)._push(writeBytes,U,E)};Writer$1.prototype.string=function R(E){var U=utf8$1.length(E);return U?this.uint32(U)._push(utf8$1.write,U,E):this._push(writeByte,1,0)};Writer$1.prototype.fork=function R(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function R(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function R(){var E=this.head,U=this.tail,G=this.len;return this.reset().uint32(G),G&&(this.tail.next=E.next,this.tail=U,this.len+=G),this};Writer$1.prototype.finish=function R(){for(var E=this.head.next,U=this.constructor.alloc(this.len),G=0;E;)E.fn(E.val,U,G),G+=E.len,E=E.next;return U};Writer$1._configure=function(R){BufferWriter$1=R,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(E,U,G){U.set(E,G)}:function(E,U,G){if(E.copy)E.copy(U,G,0,E.length);else for(var Y=0;Y<E.length;)U[G++]=E[Y++]}};BufferWriter.prototype.bytes=function R(E){util$3.isString(E)&&(E=util$3._Buffer_from(E,"base64"));var U=E.length>>>0;return this.uint32(U),U&&this._push(BufferWriter.writeBytesBuffer,U,E),this};function writeStringBuffer(R,E,U){R.length<40?util$3.utf8.write(R,E,U):E.utf8Write?E.utf8Write(R,U):E.write(R,U)}BufferWriter.prototype.string=function R(E){var U=util$3.Buffer.byteLength(E);return this.uint32(U),U&&this._push(writeStringBuffer,U,E),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(R,E){return RangeError("index out of range: "+R.pos+" + "+(E||1)+" > "+R.len)}function Reader$1(R){this.buf=R,this.pos=0,this.len=R.length}var create_array=typeof Uint8Array<"u"?function R(E){if(E instanceof Uint8Array||Array.isArray(E))return new Reader$1(E);throw Error("illegal buffer")}:function R(E){if(Array.isArray(E))return new Reader$1(E);throw Error("illegal buffer")},create$1=function R(){return util$2.Buffer?function(U){return(Reader$1.create=function(Y){return util$2.Buffer.isBuffer(Y)?new BufferReader$1(Y):create_array(Y)})(U)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function R(){var E=4294967295;return function(){if(E=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(E=(E|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return E;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return E}}();Reader$1.prototype.int32=function R(){return this.uint32()|0};Reader$1.prototype.sint32=function R(){var E=this.uint32();return E>>>1^-(E&1)|0};function readLongVarint(){var R=new LongBits(0,0),E=0;if(this.len-this.pos>4){for(;E<4;++E)if(R.lo=(R.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return R;if(R.lo=(R.lo|(this.buf[this.pos]&127)<<28)>>>0,R.hi=(R.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return R;E=0}else{for(;E<3;++E){if(this.pos>=this.len)throw indexOutOfRange(this);if(R.lo=(R.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return R}return R.lo=(R.lo|(this.buf[this.pos++]&127)<<E*7)>>>0,R}if(this.len-this.pos>4){for(;E<5;++E)if(R.hi=(R.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return R}else for(;E<5;++E){if(this.pos>=this.len)throw indexOutOfRange(this);if(R.hi=(R.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return R}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function R(){return this.uint32()!==0};function readFixed32_end(R,E){return(R[E-4]|R[E-3]<<8|R[E-2]<<16|R[E-1]<<24)>>>0}Reader$1.prototype.fixed32=function R(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function R(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function R(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var E=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,E};Reader$1.prototype.double=function R(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var E=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,E};Reader$1.prototype.bytes=function R(){var E=this.uint32(),U=this.pos,G=this.pos+E;if(G>this.len)throw indexOutOfRange(this,E);return this.pos+=E,Array.isArray(this.buf)?this.buf.slice(U,G):U===G?new this.buf.constructor(0):this._slice.call(this.buf,U,G)};Reader$1.prototype.string=function R(){var E=this.bytes();return utf8.read(E,0,E.length)};Reader$1.prototype.skip=function R(E){if(typeof E=="number"){if(this.pos+E>this.len)throw indexOutOfRange(this,E);this.pos+=E}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(R){switch(R){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(R=this.uint32()&7)!==4;)this.skipType(R);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+R+" at offset "+this.pos)}return this};Reader$1._configure=function(R){BufferReader$1=R,Reader$1.create=create$1(),BufferReader$1._configure();var E=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[E](!1)},uint64:function(){return readLongVarint.call(this)[E](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[E](!1)},fixed64:function(){return readFixed64.call(this)[E](!0)},sfixed64:function(){return readFixed64.call(this)[E](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(R){Reader.call(this,R)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function R(){var E=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+E,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+E,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(R,E,U){if(typeof R!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=R,this.requestDelimited=Boolean(E),this.responseDelimited=Boolean(U)}Service.prototype.rpcCall=function R(E,U,G,Y,J){if(!Y)throw TypeError("request must be specified");var Q=this;if(!J)return util.asPromise(R,Q,E,U,G,Y);if(!Q.rpcImpl){setTimeout(function(){J(Error("already ended"))},0);return}try{return Q.rpcImpl(E,U[Q.requestDelimited?"encodeDelimited":"encode"](Y).finish(),function(Z,ee){if(Z)return Q.emit("error",Z,E),J(Z);if(ee===null){Q.end(!0);return}if(!(ee instanceof G))try{ee=G[Q.responseDelimited?"decodeDelimited":"decode"](ee)}catch(te){return Q.emit("error",te,E),J(te)}return Q.emit("data",ee,E),J(null,ee)})}catch(X){Q.emit("error",X,E),setTimeout(function(){J(X)},0);return}};Service.prototype.end=function R(E){return this.rpcImpl&&(E||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(R){var E=R;E.Service=service})(rpc);var roots={};(function(R){var E=R;E.build="minimal",E.Writer=writer,E.BufferWriter=writer_buffer,E.Reader=reader,E.BufferReader=reader_buffer,E.util=requireMinimal(),E.rpc=rpc,E.roots=roots,E.configure=U;function U(){E.util._configure(),E.Writer._configure(E.BufferWriter),E.Reader._configure(E.BufferReader)}U()})(indexMinimal);(function(R){R.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimal$1.exports),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots["ipfs-unixfs"]||($protobuf.roots["ipfs-unixfs"]={});$root.Data=(()=>{function R(E){if(this.blocksizes=[],E)for(var U=Object.keys(E),G=0;G<U.length;++G)E[U[G]]!=null&&(this[U[G]]=E[U[G]])}return R.prototype.Type=0,R.prototype.Data=$util.newBuffer([]),R.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,R.prototype.blocksizes=$util.emptyArray,R.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,R.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,R.prototype.mode=0,R.prototype.mtime=null,R.encode=function(U,G){if(G||(G=$Writer.create()),G.uint32(8).int32(U.Type),U.Data!=null&&Object.hasOwnProperty.call(U,"Data")&&G.uint32(18).bytes(U.Data),U.filesize!=null&&Object.hasOwnProperty.call(U,"filesize")&&G.uint32(24).uint64(U.filesize),U.blocksizes!=null&&U.blocksizes.length)for(var Y=0;Y<U.blocksizes.length;++Y)G.uint32(32).uint64(U.blocksizes[Y]);return U.hashType!=null&&Object.hasOwnProperty.call(U,"hashType")&&G.uint32(40).uint64(U.hashType),U.fanout!=null&&Object.hasOwnProperty.call(U,"fanout")&&G.uint32(48).uint64(U.fanout),U.mode!=null&&Object.hasOwnProperty.call(U,"mode")&&G.uint32(56).uint32(U.mode),U.mtime!=null&&Object.hasOwnProperty.call(U,"mtime")&&$root.UnixTime.encode(U.mtime,G.uint32(66).fork()).ldelim(),G},R.decode=function(U,G){U instanceof $Reader||(U=$Reader.create(U));for(var Y=G===void 0?U.len:U.pos+G,J=new $root.Data;U.pos<Y;){var Q=U.uint32();switch(Q>>>3){case 1:J.Type=U.int32();break;case 2:J.Data=U.bytes();break;case 3:J.filesize=U.uint64();break;case 4:if(J.blocksizes&&J.blocksizes.length||(J.blocksizes=[]),(Q&7)===2)for(var X=U.uint32()+U.pos;U.pos<X;)J.blocksizes.push(U.uint64());else J.blocksizes.push(U.uint64());break;case 5:J.hashType=U.uint64();break;case 6:J.fanout=U.uint64();break;case 7:J.mode=U.uint32();break;case 8:J.mtime=$root.UnixTime.decode(U,U.uint32());break;default:U.skipType(Q&7);break}}if(!J.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:J});return J},R.fromObject=function(U){if(U instanceof $root.Data)return U;var G=new $root.Data;switch(U.Type){case"Raw":case 0:G.Type=0;break;case"Directory":case 1:G.Type=1;break;case"File":case 2:G.Type=2;break;case"Metadata":case 3:G.Type=3;break;case"Symlink":case 4:G.Type=4;break;case"HAMTShard":case 5:G.Type=5;break}if(U.Data!=null&&(typeof U.Data=="string"?$util.base64.decode(U.Data,G.Data=$util.newBuffer($util.base64.length(U.Data)),0):U.Data.length&&(G.Data=U.Data)),U.filesize!=null&&($util.Long?(G.filesize=$util.Long.fromValue(U.filesize)).unsigned=!0:typeof U.filesize=="string"?G.filesize=parseInt(U.filesize,10):typeof U.filesize=="number"?G.filesize=U.filesize:typeof U.filesize=="object"&&(G.filesize=new $util.LongBits(U.filesize.low>>>0,U.filesize.high>>>0).toNumber(!0))),U.blocksizes){if(!Array.isArray(U.blocksizes))throw TypeError(".Data.blocksizes: array expected");G.blocksizes=[];for(var Y=0;Y<U.blocksizes.length;++Y)$util.Long?(G.blocksizes[Y]=$util.Long.fromValue(U.blocksizes[Y])).unsigned=!0:typeof U.blocksizes[Y]=="string"?G.blocksizes[Y]=parseInt(U.blocksizes[Y],10):typeof U.blocksizes[Y]=="number"?G.blocksizes[Y]=U.blocksizes[Y]:typeof U.blocksizes[Y]=="object"&&(G.blocksizes[Y]=new $util.LongBits(U.blocksizes[Y].low>>>0,U.blocksizes[Y].high>>>0).toNumber(!0))}if(U.hashType!=null&&($util.Long?(G.hashType=$util.Long.fromValue(U.hashType)).unsigned=!0:typeof U.hashType=="string"?G.hashType=parseInt(U.hashType,10):typeof U.hashType=="number"?G.hashType=U.hashType:typeof U.hashType=="object"&&(G.hashType=new $util.LongBits(U.hashType.low>>>0,U.hashType.high>>>0).toNumber(!0))),U.fanout!=null&&($util.Long?(G.fanout=$util.Long.fromValue(U.fanout)).unsigned=!0:typeof U.fanout=="string"?G.fanout=parseInt(U.fanout,10):typeof U.fanout=="number"?G.fanout=U.fanout:typeof U.fanout=="object"&&(G.fanout=new $util.LongBits(U.fanout.low>>>0,U.fanout.high>>>0).toNumber(!0))),U.mode!=null&&(G.mode=U.mode>>>0),U.mtime!=null){if(typeof U.mtime!="object")throw TypeError(".Data.mtime: object expected");G.mtime=$root.UnixTime.fromObject(U.mtime)}return G},R.toObject=function(U,G){G||(G={});var Y={};if((G.arrays||G.defaults)&&(Y.blocksizes=[]),G.defaults){if(Y.Type=G.enums===String?"Raw":0,G.bytes===String?Y.Data="":(Y.Data=[],G.bytes!==Array&&(Y.Data=$util.newBuffer(Y.Data))),$util.Long){var J=new $util.Long(0,0,!0);Y.filesize=G.longs===String?J.toString():G.longs===Number?J.toNumber():J}else Y.filesize=G.longs===String?"0":0;if($util.Long){var J=new $util.Long(0,0,!0);Y.hashType=G.longs===String?J.toString():G.longs===Number?J.toNumber():J}else Y.hashType=G.longs===String?"0":0;if($util.Long){var J=new $util.Long(0,0,!0);Y.fanout=G.longs===String?J.toString():G.longs===Number?J.toNumber():J}else Y.fanout=G.longs===String?"0":0;Y.mode=0,Y.mtime=null}if(U.Type!=null&&U.hasOwnProperty("Type")&&(Y.Type=G.enums===String?$root.Data.DataType[U.Type]:U.Type),U.Data!=null&&U.hasOwnProperty("Data")&&(Y.Data=G.bytes===String?$util.base64.encode(U.Data,0,U.Data.length):G.bytes===Array?Array.prototype.slice.call(U.Data):U.Data),U.filesize!=null&&U.hasOwnProperty("filesize")&&(typeof U.filesize=="number"?Y.filesize=G.longs===String?String(U.filesize):U.filesize:Y.filesize=G.longs===String?$util.Long.prototype.toString.call(U.filesize):G.longs===Number?new $util.LongBits(U.filesize.low>>>0,U.filesize.high>>>0).toNumber(!0):U.filesize),U.blocksizes&&U.blocksizes.length){Y.blocksizes=[];for(var Q=0;Q<U.blocksizes.length;++Q)typeof U.blocksizes[Q]=="number"?Y.blocksizes[Q]=G.longs===String?String(U.blocksizes[Q]):U.blocksizes[Q]:Y.blocksizes[Q]=G.longs===String?$util.Long.prototype.toString.call(U.blocksizes[Q]):G.longs===Number?new $util.LongBits(U.blocksizes[Q].low>>>0,U.blocksizes[Q].high>>>0).toNumber(!0):U.blocksizes[Q]}return U.hashType!=null&&U.hasOwnProperty("hashType")&&(typeof U.hashType=="number"?Y.hashType=G.longs===String?String(U.hashType):U.hashType:Y.hashType=G.longs===String?$util.Long.prototype.toString.call(U.hashType):G.longs===Number?new $util.LongBits(U.hashType.low>>>0,U.hashType.high>>>0).toNumber(!0):U.hashType),U.fanout!=null&&U.hasOwnProperty("fanout")&&(typeof U.fanout=="number"?Y.fanout=G.longs===String?String(U.fanout):U.fanout:Y.fanout=G.longs===String?$util.Long.prototype.toString.call(U.fanout):G.longs===Number?new $util.LongBits(U.fanout.low>>>0,U.fanout.high>>>0).toNumber(!0):U.fanout),U.mode!=null&&U.hasOwnProperty("mode")&&(Y.mode=U.mode),U.mtime!=null&&U.hasOwnProperty("mtime")&&(Y.mtime=$root.UnixTime.toObject(U.mtime,G)),Y},R.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},R.DataType=function(){const E={},U=Object.create(E);return U[E[0]="Raw"]=0,U[E[1]="Directory"]=1,U[E[2]="File"]=2,U[E[3]="Metadata"]=3,U[E[4]="Symlink"]=4,U[E[5]="HAMTShard"]=5,U}(),R})();$root.UnixTime=(()=>{function R(E){if(E)for(var U=Object.keys(E),G=0;G<U.length;++G)E[U[G]]!=null&&(this[U[G]]=E[U[G]])}return R.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,R.prototype.FractionalNanoseconds=0,R.encode=function(U,G){return G||(G=$Writer.create()),G.uint32(8).int64(U.Seconds),U.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(U,"FractionalNanoseconds")&&G.uint32(21).fixed32(U.FractionalNanoseconds),G},R.decode=function(U,G){U instanceof $Reader||(U=$Reader.create(U));for(var Y=G===void 0?U.len:U.pos+G,J=new $root.UnixTime;U.pos<Y;){var Q=U.uint32();switch(Q>>>3){case 1:J.Seconds=U.int64();break;case 2:J.FractionalNanoseconds=U.fixed32();break;default:U.skipType(Q&7);break}}if(!J.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:J});return J},R.fromObject=function(U){if(U instanceof $root.UnixTime)return U;var G=new $root.UnixTime;return U.Seconds!=null&&($util.Long?(G.Seconds=$util.Long.fromValue(U.Seconds)).unsigned=!1:typeof U.Seconds=="string"?G.Seconds=parseInt(U.Seconds,10):typeof U.Seconds=="number"?G.Seconds=U.Seconds:typeof U.Seconds=="object"&&(G.Seconds=new $util.LongBits(U.Seconds.low>>>0,U.Seconds.high>>>0).toNumber())),U.FractionalNanoseconds!=null&&(G.FractionalNanoseconds=U.FractionalNanoseconds>>>0),G},R.toObject=function(U,G){G||(G={});var Y={};if(G.defaults){if($util.Long){var J=new $util.Long(0,0,!1);Y.Seconds=G.longs===String?J.toString():G.longs===Number?J.toNumber():J}else Y.Seconds=G.longs===String?"0":0;Y.FractionalNanoseconds=0}return U.Seconds!=null&&U.hasOwnProperty("Seconds")&&(typeof U.Seconds=="number"?Y.Seconds=G.longs===String?String(U.Seconds):U.Seconds:Y.Seconds=G.longs===String?$util.Long.prototype.toString.call(U.Seconds):G.longs===Number?new $util.LongBits(U.Seconds.low>>>0,U.Seconds.high>>>0).toNumber():U.Seconds),U.FractionalNanoseconds!=null&&U.hasOwnProperty("FractionalNanoseconds")&&(Y.FractionalNanoseconds=U.FractionalNanoseconds),Y},R.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},R})();$root.Metadata=(()=>{function R(E){if(E)for(var U=Object.keys(E),G=0;G<U.length;++G)E[U[G]]!=null&&(this[U[G]]=E[U[G]])}return R.prototype.MimeType="",R.encode=function(U,G){return G||(G=$Writer.create()),U.MimeType!=null&&Object.hasOwnProperty.call(U,"MimeType")&&G.uint32(10).string(U.MimeType),G},R.decode=function(U,G){U instanceof $Reader||(U=$Reader.create(U));for(var Y=G===void 0?U.len:U.pos+G,J=new $root.Metadata;U.pos<Y;){var Q=U.uint32();switch(Q>>>3){case 1:J.MimeType=U.string();break;default:U.skipType(Q&7);break}}return J},R.fromObject=function(U){if(U instanceof $root.Metadata)return U;var G=new $root.Metadata;return U.MimeType!=null&&(G.MimeType=String(U.MimeType)),G},R.toObject=function(U,G){G||(G={});var Y={};return G.defaults&&(Y.MimeType=""),U.MimeType!=null&&U.hasOwnProperty("MimeType")&&(Y.MimeType=U.MimeType),Y},R.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},R})();function parseMode(R){if(R!=null)return typeof R=="number"?R&4095:(R=R.toString(),R.substring(0,1)==="0"?parseInt(R,8)&4095:parseInt(R,10)&4095)}function parseMtime(R){if(R==null)return;let E;if(R.secs!=null&&(E={secs:R.secs,nsecs:R.nsecs}),R.Seconds!=null&&(E={secs:R.Seconds,nsecs:R.FractionalNanoseconds}),Array.isArray(R)&&(E={secs:R[0],nsecs:R[1]}),R instanceof Date){const U=R.getTime(),G=Math.floor(U/1e3);E={secs:G,nsecs:(U-G*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(E,"secs")){if(E!=null&&E.nsecs!=null&&(E.nsecs<0||E.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return E}}async function*normaliseCandidateMultiple(R,E){if(typeof R=="string"||R instanceof String||isBytes(R)||isBlob(R)||R._readableState)throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(R)&&(R=browserReadablestreamToIt(R)),Symbol.iterator in R||Symbol.asyncIterator in R){const U=itPeekable(R),{value:G,done:Y}=await U.peek();if(Y){yield*[];return}if(U.push(G),Number.isInteger(G))throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(G._readableState){yield*itMap(U,J=>toFileObject$1({content:J},E));return}if(isBytes(G)){yield toFileObject$1({content:U},E);return}if(isFileObject(G)||G[Symbol.iterator]||G[Symbol.asyncIterator]||isReadableStream(G)||isBlob(G)){yield*itMap(U,J=>toFileObject$1(J,E));return}}throw isFileObject(R)?errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode(new Error("Unexpected input: "+typeof R),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(R,E){const{path:U,mode:G,mtime:Y,content:J}=R,Q={path:U||"",mode:parseMode(G),mtime:parseMtime(Y)};return J?Q.content=await E(J):U||(Q.content=await E(R)),Q}function normaliseInput$2(R){return normaliseCandidateMultiple(R,normaliseContent$1)}function modeToString(R){if(R!=null)return typeof R=="string"?R:R.toString(8).padStart(4,"0")}async function multipartRequest(R,E,U={}){const G=[],Y=new FormData;let J=0,Q=0;for await(const{content:X,path:Z,mode:ee,mtime:te}of normaliseInput$2(R)){let ne="";const oe=X?"file":"dir";J>0&&(ne=`-${J}`);let ce=oe+ne;const pe=[];if(ee!=null&&pe.push(`mode=${modeToString(ee)}`),te!=null){const{secs:ye,nsecs:Se}=te;pe.push(`mtime=${ye}`),Se!=null&&pe.push(`mtime-nsecs=${Se}`)}if(pe.length&&(ce=`${ce}?${pe.join("&")}`),X){Y.set(ce,X,Z!=null?encodeURIComponent(Z):void 0);const ye=Q+X.size;G.push({name:Z,start:Q,end:ye}),Q=ye}else if(Z!=null)Y.set(ce,new File([""],encodeURIComponent(Z),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");J++}return{total:Q,parts:G,headers:U,body:Y}}function filter(R){return R.filter(Boolean)}function abortSignal(...R){return anySignal_2(filter(R))}const createPut$3=configure(R=>{async function E(U,G={}){const Y=new AbortController,J=abortSignal(Y.signal,G.signal);let Q;try{Q=await(await R.post("block/put",{signal:J,searchParams:toUrlSearchParams(G),...await multipartRequest([U],Y,G.headers)})).json()}catch(X){if(G.format==="dag-pb")return E(U,{...G,format:"protobuf"});if(G.format==="dag-cbor")return E(U,{...G,format:"cbor"});throw X}return CID.parse(Q.Key)}return E}),createRm$6=configure(R=>{async function*E(U,G={}){Array.isArray(U)||(U=[U]);const Y=await R.post("block/rm",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.map(J=>J.toString()),"stream-channels":!0,...G}),headers:G.headers});for await(const J of Y.ndjson())yield toCoreInterface$3(J)}return E});function toCoreInterface$3(R){const E={cid:CID.parse(R.Hash)};return R.Error&&(E.error=new Error(R.Error)),E}const createStat$3=configure(R=>{async function E(U,G={}){const J=await(await R.post("block/stat",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers})).json();return{cid:CID.parse(J.Key),size:J.Size}}return E});function createBlock(R){return{get:createGet$5(R),put:createPut$3(R),rm:createRm$6(R),stat:createStat$3(R)}}const createAdd$4=configure(R=>{async function E(U,G={}){const Y=await R.post("bootstrap/add",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),{Peers:J}=await Y.json();return{Peers:J.map(Q=>new Multiaddr(Q))}}return E}),createClear=configure(R=>{async function E(U={}){const G=await R.post("bootstrap/rm",{signal:U.signal,searchParams:toUrlSearchParams({...U,all:!0}),headers:U.headers}),{Peers:Y}=await G.json();return{Peers:Y.map(J=>new Multiaddr(J))}}return E}),createList$2=configure(R=>{async function E(U={}){const G=await R.post("bootstrap/list",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers}),{Peers:Y}=await G.json();return{Peers:Y.map(J=>new Multiaddr(J))}}return E}),createReset=configure(R=>{async function E(U={}){const G=await R.post("bootstrap/add",{signal:U.signal,searchParams:toUrlSearchParams({...U,default:!0}),headers:U.headers}),{Peers:Y}=await G.json();return{Peers:Y.map(J=>new Multiaddr(J))}}return E}),createRm$5=configure(R=>{async function E(U,G={}){const Y=await R.post("bootstrap/rm",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),{Peers:J}=await Y.json();return{Peers:J.map(Q=>new Multiaddr(Q))}}return E});function createBootstrap(R){return{add:createAdd$4(R),clear:createClear(R),list:createList$2(R),reset:createReset(R),rm:createRm$5(R)}}const createApply=configure(R=>{async function E(U,G={}){const J=await(await R.post("config/profile/apply",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json();return{original:J.OldCfg,updated:J.NewCfg}}return E});function objectToCamel(R){if(R==null)return R;const E=/^[A-Z]+$/,U={};return Object.keys(R).reduce((G,Y)=>(E.test(Y)?G[Y.toLowerCase()]=R[Y]:E.test(Y[0])?G[Y[0].toLowerCase()+Y.slice(1)]=R[Y]:G[Y]=R[Y],G),U)}const createList$1=configure(R=>{async function E(U={}){return(await(await R.post("config/profile/list",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).map(J=>objectToCamel(J))}return E});function createProfiles(R){return{apply:createApply(R),list:createList$1(R)}}const createGet$4=configure(R=>async(U,G={})=>{if(!U)throw new Error("key argument is required");return(await(await R.post("config",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json()).Value}),createGetAll=configure(R=>async(U={})=>await(await R.post("config/show",{signal:U.signal,searchParams:toUrlSearchParams({...U}),headers:U.headers})).json()),createReplace=configure(R=>async(U,G={})=>{const Y=new AbortController,J=abortSignal(Y.signal,G.signal);await(await R.post("config/replace",{signal:J,searchParams:toUrlSearchParams(G),...await multipartRequest([fromString$1(JSON.stringify(U))],Y,G.headers)})).text()}),createSet=configure(R=>async(U,G,Y={})=>{if(typeof U!="string")throw new Error("Invalid key type");const J={...Y,...encodeParam(U,G)};await(await R.post("config",{signal:Y.signal,searchParams:toUrlSearchParams(J),headers:Y.headers})).text()}),encodeParam=(R,E)=>{switch(typeof E){case"boolean":return{arg:[R,E.toString()],bool:!0};case"string":return{arg:[R,E]};default:return{arg:[R,JSON.stringify(E)],json:!0}}};function createConfig(R){return{getAll:createGetAll(R),get:createGet$4(R),set:createSet(R),replace:createReplace(R),profiles:createProfiles(R)}}const createExport$1=configure(R=>{async function*E(U,G={}){yield*(await R.post("dag/export",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString()}),headers:G.headers})).iterator()}return E});async function*resolve(R,E,U,G,Y){const J=async ee=>{const te=await U.getCodec(ee.code),ne=await G(ee,Y);return te.decode(ne)},Q=E.split("/").filter(Boolean);let X=await J(R),Z=R;for(;Q.length;){const ee=Q.shift();if(!ee)throw errCode(new Error(`Could not resolve path "${E}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(X,ee))X=X[ee],yield{value:X,remainderPath:Q.join("/")};else throw errCode(new Error(`no link named "${ee}" under ${Z}`),"ERR_NO_LINK");const te=CID.asCID(X);te&&(Z=te,X=await J(X))}yield{value:X,remainderPath:""}}const first=async R=>{for await(const E of R)return E};var itFirst=first;const last=async R=>{let E;for await(const U of R)E=U;return E};var itLast=last;const createGet$3=(R,E)=>configure((G,Y)=>{const J=createGet$5(Y);return async(X,Z={})=>{if(Z.path){const ce=Z.localResolve?await itFirst(resolve(X,Z.path,R,J,Z)):await itLast(resolve(X,Z.path,R,J,Z));if(!ce)throw errCode(new Error("Not found"),"ERR_NOT_FOUND");return ce}const ee=await R.getCodec(X.code),te=await J(X,Z);return{value:ee.decode(te),remainderPath:""}}})(E),createImport$1=configure(R=>{async function*E(U,G={}){const Y=new AbortController,J=abortSignal(Y.signal,G.signal),{headers:Q,body:X}=await multipartRequest(U,Y,G.headers),Z=await R.post("dag/import",{signal:J,headers:Q,body:X,searchParams:toUrlSearchParams({"pin-roots":G.pinRoots})});for await(const{Root:ee}of Z.ndjson())if(ee!==void 0){const{Cid:{"/":te},PinErrorMsg:ne}=ee;yield{root:{cid:CID.parse(te),pinErrorMsg:ne}}}}return E}),createPut$2=(R,E)=>configure(G=>async(J,Q={})=>{const X={storeCodec:"dag-cbor",hashAlg:"sha2-256",...Q};let Z;if(X.inputCodec){if(!(J instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");Z=J}else Z=(await R.getCodec(X.storeCodec)).encode(J),X.inputCodec=X.storeCodec;const ee=new AbortController,te=abortSignal(ee.signal,X.signal),oe=await(await G.post("dag/put",{timeout:X.timeout,signal:te,searchParams:toUrlSearchParams(X),...await multipartRequest([Z],ee,X.headers)})).json();return CID.parse(oe.Cid["/"])})(E),createResolve$2=configure(R=>async(U,G={})=>{const J=await(await R.post("dag/resolve",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U}${G.path?`/${G.path}`.replace(/\/[/]+/g,"/"):""}`,...G}),headers:G.headers})).json();return{cid:CID.parse(J.Cid["/"]),remainderPath:J.RemPath}});function createDag(R,E){return{export:createExport$1(E),get:createGet$3(R,E),import:createImport$1(E),put:createPut$2(R,E),resolve:createResolve$2(E)}}const SendingQuery=0,PeerResponse=1,FinalPeer=2,QueryError=3,Provider=4,Value=5,AddingPeer=6,DialingPeer=7,mapEvent=R=>{var E;if(R.Type===SendingQuery)return{name:"SENDING_QUERY",type:R.Type};if(R.Type===PeerResponse)return{from:peerIdFromString(R.ID),name:"PEER_RESPONSE",type:R.Type,messageType:0,messageName:"PUT_VALUE",closer:(R.Responses||[]).map(({ID:U,Addrs:G})=>({id:peerIdFromString(U),multiaddrs:G.map(Y=>new Multiaddr(Y)),protocols:[]})),providers:(R.Responses||[]).map(({ID:U,Addrs:G})=>({id:peerIdFromString(U),multiaddrs:G.map(Y=>new Multiaddr(Y)),protocols:[]}))};if(R.Type===FinalPeer){let U={id:(E=R.ID)!=null?E:peerIdFromString(R.ID),multiaddrs:[],protocols:[]};return R.Responses&&R.Responses.length&&(U={id:peerIdFromString(R.Responses[0].ID),multiaddrs:R.Responses[0].Addrs.map(G=>new Multiaddr(G)),protocols:[]}),{name:"FINAL_PEER",type:R.Type,peer:U}}if(R.Type===QueryError)return{name:"QUERY_ERROR",type:R.Type,error:new Error(R.Extra)};if(R.Type===Provider)return{name:"PROVIDER",type:R.Type,providers:R.Responses.map(({ID:U,Addrs:G})=>({id:peerIdFromString(U),multiaddrs:G.map(Y=>new Multiaddr(Y)),protocols:[]}))};if(R.Type===Value)return{name:"VALUE",type:R.Type,value:fromString$1(R.Extra,"base64pad")};if(R.Type===AddingPeer){const U=R.Responses.map(({ID:G})=>peerIdFromString(G));if(!U.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:R.Type,peer:U[0]}}if(R.Type===DialingPeer)return{name:"DIALING_PEER",type:R.Type,peer:peerIdFromString(R.ID)};throw new Error("Unknown DHT event type")},createFindPeer=configure(R=>{async function*E(U,G={}){const Y=await R.post("dht/findpeer",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers});for await(const J of Y.ndjson())yield mapEvent(J)}return E}),createFindProvs=configure(R=>{async function*E(U,G={}){const Y=await R.post("dht/findprovs",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers});for await(const J of Y.ndjson())yield mapEvent(J)}return E}),createGet$2=configure(R=>{async function*E(U,G={}){const Y=await R.post("dht/get",{signal:G.signal,searchParams:toUrlSearchParams({arg:U instanceof Uint8Array?toString$2(U):U.toString(),...G}),headers:G.headers});for await(const J of Y.ndjson())yield mapEvent(J)}return E}),createProvide=configure(R=>{async function*E(U,G={recursive:!1}){const Y=Array.isArray(U)?U:[U],J=await R.post("dht/provide",{signal:G.signal,searchParams:toUrlSearchParams({arg:Y.map(Q=>Q.toString()),...G}),headers:G.headers});for await(const Q of J.ndjson())yield mapEvent(Q)}return E}),createPut$1=configure(R=>{async function*E(U,G,Y={}){const J=new AbortController,Q=abortSignal(J.signal,Y.signal),X=await R.post("dht/put",{signal:Q,searchParams:toUrlSearchParams({arg:U instanceof Uint8Array?toString$2(U):U.toString(),...Y}),...await multipartRequest([G],J,Y.headers)});for await(const Z of X.ndjson())yield mapEvent(Z)}return E}),createQuery=configure(R=>{async function*E(U,G={}){const Y=await R.post("dht/query",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers});for await(const J of Y.ndjson())yield mapEvent(J)}return E});function createDht(R){return{findPeer:createFindPeer(R),findProvs:createFindProvs(R),get:createGet$2(R),provide:createProvide(R),put:createPut$1(R),query:createQuery(R)}}const createCmds=configure(R=>{async function E(U={}){return(await R.post("diag/cmds",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()}return E}),createNet=configure(R=>{async function E(U={}){return(await R.post("diag/net",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()}return E}),createSys=configure(R=>{async function E(U={}){return(await R.post("diag/sys",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()}return E});function createDiag(R){return{cmds:createCmds(R),net:createNet(R),sys:createSys(R)}}const createChmod=configure(R=>{async function E(U,G,Y={}){await(await R.post("files/chmod",{signal:Y.signal,searchParams:toUrlSearchParams({arg:U,mode:G,...Y}),headers:Y.headers})).text()}return E}),createCp=configure(R=>{async function E(U,G,Y={}){const J=Array.isArray(U)?U:[U];await(await R.post("files/cp",{signal:Y.signal,searchParams:toUrlSearchParams({arg:J.concat(G).map(X=>CID.asCID(X)?`/ipfs/${X}`:X),...Y}),headers:Y.headers})).text()}return E}),createFlush=configure(R=>{async function E(U,G={}){if(!U||typeof U!="string")throw new Error("ipfs.files.flush requires a path");const J=await(await R.post("files/flush",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json();return CID.parse(J.Cid)}return E});function objectToCamelWithMetadata(R){const E=objectToCamel(R);return Object.prototype.hasOwnProperty.call(E,"mode")&&(E.mode=parseInt(E.mode,8)),Object.prototype.hasOwnProperty.call(E,"mtime")&&(E.mtime={secs:E.mtime,nsecs:E.mtimeNsecs||0},delete E.mtimeNsecs),E}const createLs$6=configure(R=>{async function*E(U,G={}){if(!U)throw new Error("ipfs.files.ls requires a path");const Y=await R.post("files/ls",{signal:G.signal,searchParams:toUrlSearchParams({arg:CID.asCID(U)?`/ipfs/${U}`:U,long:!0,...G,stream:!0}),headers:G.headers});for await(const J of Y.ndjson())if("Entries"in J)for(const Q of J.Entries||[])yield toCoreInterface$2(objectToCamelWithMetadata(Q));else yield toCoreInterface$2(objectToCamelWithMetadata(J))}return E});function toCoreInterface$2(R){return R.hash&&(R.cid=CID.parse(R.hash)),delete R.hash,R.type=R.type===1?"directory":"file",R}const createMkdir=configure(R=>{async function E(U,G={}){await(await R.post("files/mkdir",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).text()}return E}),createMv=configure(R=>{async function E(U,G,Y={}){Array.isArray(U)||(U=[U]),await(await R.post("files/mv",{signal:Y.signal,searchParams:toUrlSearchParams({arg:U.concat(G),...Y}),headers:Y.headers})).text()}return E});var source=R=>{if(R[Symbol.asyncIterator])return R;if(R.getReader)return async function*(){const E=R.getReader();try{for(;;){const{done:U,value:G}=await E.read();if(U)return;yield G}}finally{E.releaseLock()}}();throw new Error("unknown stream")};const createRead=configure(R=>{async function*E(U,G={}){const Y=await R.post("files/read",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,count:G.length,...G}),headers:G.headers});yield*source(Y.body)}return E}),createRm$4=configure(R=>{async function E(U,G={}){const Y=await R.post("files/rm",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),J=await Y.text();if(J!==""){const Q=new http.HTTPError(Y);throw Q.message=J,Q}}return E}),createStat$2=configure(R=>{async function E(U,G={}){const J=await(await R.post("files/stat",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json();return J.WithLocality=J.WithLocality||!1,toCoreInterface$1(objectToCamelWithMetadata(J))}return E});function toCoreInterface$1(R){return R.cid=CID.parse(R.hash),delete R.hash,R}const createTouch=configure(R=>{async function E(U,G={}){await(await R.post("files/touch",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).text()}return E}),createWrite=configure(R=>{async function E(U,G,Y={}){const J=new AbortController,Q=abortSignal(J.signal,Y.signal);await(await R.post("files/write",{signal:Q,searchParams:toUrlSearchParams({arg:U,streamChannels:!0,count:Y.length,...Y}),...await multipartRequest([{content:G,path:"arg",mode:modeToString$1(Y.mode),mtime:parseMtime$1(Y.mtime)}],J,Y.headers)})).text()}return E});function createFiles(R){return{chmod:createChmod(R),cp:createCp(R),flush:createFlush(R),ls:createLs$6(R),mkdir:createMkdir(R),mv:createMv(R),read:createRead(R),rm:createRm$4(R),stat:createStat$2(R),touch:createTouch(R),write:createWrite(R)}}const createExport=configure(R=>async(U,G,Y={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createGen=configure(R=>{async function E(U,G={type:"Ed25519"}){const J=await(await R.post("key/gen",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json();return objectToCamel(J)}return E}),createImport=configure(R=>{async function E(U,G,Y,J={}){const X=await(await R.post("key/import",{signal:J.signal,searchParams:toUrlSearchParams({arg:U,pem:G,password:Y,...J}),headers:J.headers})).json();return objectToCamel(X)}return E}),createInfo=configure(R=>async(U,G={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createList=configure(R=>{async function E(U={}){return((await(await R.post("key/list",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).Keys||[]).map(J=>objectToCamel(J))}return E}),createRename=configure(R=>{async function E(U,G,Y={}){const J=await R.post("key/rename",{signal:Y.signal,searchParams:toUrlSearchParams({arg:[U,G],...Y}),headers:Y.headers});return objectToCamel(await J.json())}return E}),createRm$3=configure(R=>{async function E(U,G={}){const J=await(await R.post("key/rm",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json();return objectToCamel(J.Keys[0])}return E});function createKey(R){return{export:createExport(R),gen:createGen(R),import:createImport(R),info:createInfo(R),list:createList(R),rename:createRename(R),rm:createRm$3(R)}}const createLevel=configure(R=>{async function E(U,G,Y={}){const J=await R.post("log/level",{signal:Y.signal,searchParams:toUrlSearchParams({arg:[U,G],...Y}),headers:Y.headers});return objectToCamel(await J.json())}return E}),createLs$5=configure(R=>{async function E(U={}){return(await(await R.post("log/ls",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).Strings}return E}),createTail=configure(R=>{async function*E(U={}){yield*(await R.post("log/tail",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).ndjson()}return E});function createLog(R){return{level:createLevel(R),ls:createLs$5(R),tail:createTail(R)}}const createPublish$1=configure(R=>{async function E(U,G={}){const Y=await R.post("name/publish",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U}`,...G}),headers:G.headers});return objectToCamel(await Y.json())}return E}),createResolve$1=configure(R=>{async function*E(U,G={}){const Y=await R.post("name/resolve",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,stream:!0,...G}),headers:G.headers});for await(const J of Y.ndjson())yield J.Path}return E}),createCancel=configure(R=>{async function E(U,G={}){const Y=await R.post("name/pubsub/cancel",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers});return objectToCamel(await Y.json())}return E}),createState=configure(R=>{async function E(U={}){const G=await R.post("name/pubsub/state",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers});return objectToCamel(await G.json())}return E}),createSubs=configure(R=>{async function E(U={}){return(await(await R.post("name/pubsub/subs",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).Strings||[]}return E});function createPubsub$1(R){return{cancel:createCancel(R),state:createState(R),subs:createSubs(R)}}function createName(R){return{publish:createPublish$1(R),resolve:createResolve$1(R),pubsub:createPubsub$1(R)}}const createData=configure(R=>{async function E(U,G={}){const J=await(await R.post("object/data",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U instanceof Uint8Array?CID.decode(U):U}`,...G}),headers:G.headers})).arrayBuffer();return new Uint8Array(J,0,J.byteLength)}return E}),createGet$1=configure(R=>{async function E(U,G={}){const J=await(await R.post("object/get",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U instanceof Uint8Array?CID.decode(U):U}`,dataEncoding:"base64",...G}),headers:G.headers})).json();return{Data:fromString$1(J.Data,"base64pad"),Links:(J.Links||[]).map(Q=>({Name:Q.Name,Hash:CID.parse(Q.Hash),Tsize:Q.Size}))}}return E}),createLinks=configure(R=>{async function E(U,G={}){return((await(await R.post("object/links",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U instanceof Uint8Array?CID.decode(U):U}`,...G}),headers:G.headers})).json()).Links||[]).map(Q=>({Name:Q.Name,Tsize:Q.Size,Hash:CID.parse(Q.Hash)}))}return E}),createNew=configure(R=>{async function E(U={}){const G=await R.post("object/new",{signal:U.signal,searchParams:toUrlSearchParams({arg:U.template,...U}),headers:U.headers}),{Hash:Y}=await G.json();return CID.parse(Y)}return E}),createPut=(R,E)=>configure(G=>{const Y=createPut$2(R,E);async function J(Q,X={}){return Y(Q,{...X,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return J})(E),createStat$1=configure(R=>{async function E(U,G={}){const J=await(await R.post("object/stat",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U}`,...G}),headers:G.headers})).json();return{...J,Hash:CID.parse(J.Hash)}}return E}),createAddLink=configure(R=>{async function E(U,G,Y={}){const J=await R.post("object/patch/add-link",{signal:Y.signal,searchParams:toUrlSearchParams({arg:[`${U}`,G.Name||G.name||"",(G.Hash||G.cid||"").toString()||null],...Y}),headers:Y.headers}),{Hash:Q}=await J.json();return CID.parse(Q)}return E}),createAppendData=configure(R=>{async function E(U,G,Y={}){const J=new AbortController,Q=abortSignal(J.signal,Y.signal),X=await R.post("object/patch/append-data",{signal:Q,searchParams:toUrlSearchParams({arg:`${U}`,...Y}),...await multipartRequest([G],J,Y.headers)}),{Hash:Z}=await X.json();return CID.parse(Z)}return E}),createRmLink=configure(R=>{async function E(U,G,Y={}){const J=await R.post("object/patch/rm-link",{signal:Y.signal,searchParams:toUrlSearchParams({arg:[`${U}`,G.Name||G.name||null],...Y}),headers:Y.headers}),{Hash:Q}=await J.json();return CID.parse(Q)}return E}),createSetData=configure(R=>{async function E(U,G,Y={}){const J=new AbortController,Q=abortSignal(J.signal,Y.signal),X=await R.post("object/patch/set-data",{signal:Q,searchParams:toUrlSearchParams({arg:[`${U}`],...Y}),...await multipartRequest([G],J,Y.headers)}),{Hash:Z}=await X.json();return CID.parse(Z)}return E});function createPatch(R){return{addLink:createAddLink(R),appendData:createAppendData(R),rmLink:createRmLink(R),setData:createSetData(R)}}function createObject(R,E){return{data:createData(E),get:createGet$1(E),links:createLinks(E),new:createNew(E),put:createPut(R,E),stat:createStat$1(E),patch:createPatch(E)}}async function*normaliseInput$1(R){if(R==null)throw errCode(new Error(`Unexpected input: ${R}`),"ERR_UNEXPECTED_INPUT");const E=CID.asCID(R);if(E){yield toPin$1({cid:E});return}if(R instanceof String||typeof R=="string"){yield toPin$1({path:R});return}if(R.cid!=null||R.path!=null)return yield toPin$1(R);if(Symbol.iterator in R){const U=R[Symbol.iterator](),G=U.next();if(G.done)return U;if(CID.asCID(G.value)||G.value instanceof String||typeof G.value=="string"){yield toPin$1({cid:G.value});for(const Y of U)yield toPin$1({cid:Y});return}if(G.value.cid!=null||G.value.path!=null){yield toPin$1(G.value);for(const Y of U)yield toPin$1(Y);return}throw errCode(new Error("Unexpected input: "+typeof R),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in R){const U=R[Symbol.asyncIterator](),G=await U.next();if(G.done)return U;if(CID.asCID(G.value)||G.value instanceof String||typeof G.value=="string"){yield toPin$1({cid:G.value});for await(const Y of U)yield toPin$1({cid:Y});return}if(G.value.cid!=null||G.value.path!=null){yield toPin$1(G.value);for await(const Y of U)yield toPin$1(Y);return}throw errCode(new Error("Unexpected input: "+typeof R),"ERR_UNEXPECTED_INPUT")}throw errCode(new Error("Unexpected input: "+typeof R),"ERR_UNEXPECTED_INPUT")}function toPin$1(R){const E=R.cid||`${R.path}`;if(!E)throw errCode(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const U={path:E,recursive:R.recursive!==!1};return R.metadata!=null&&(U.metadata=R.metadata),U}const createAddAll$1=configure(R=>{async function*E(U,G={}){for await(const{path:Y,recursive:J,metadata:Q}of normaliseInput$1(U)){const X=await R.post("pin/add",{signal:G.signal,searchParams:toUrlSearchParams({...G,arg:Y,recursive:J,metadata:Q?JSON.stringify(Q):void 0,stream:!0}),headers:G.headers});for await(const Z of X.ndjson()){if(Z.Pins){for(const ee of Z.Pins)yield CID.parse(ee);continue}yield CID.parse(Z)}}}return E});function createAdd$3(R){const E=createAddAll$1(R);return configure(()=>{async function U(G,Y={}){return itLast(E([{path:G,...Y}],Y))}return U})(R)}function toPin(R,E,U){const G={type:R,cid:CID.parse(E)};return U&&(G.metadata=U),G}const createLs$4=configure(R=>{async function*E(U={}){let G=[];U.paths&&(G=Array.isArray(U.paths)?U.paths:[U.paths]);const Y=await R.post("pin/ls",{signal:U.signal,searchParams:toUrlSearchParams({...U,arg:G.map(J=>`${J}`),stream:!0}),headers:U.headers});for await(const J of Y.ndjson()){if(J.Keys){for(const Q of Object.keys(J.Keys))yield toPin(J.Keys[Q].Type,Q,J.Keys[Q].Metadata);return}yield toPin(J.Type,J.Cid,J.Metadata)}}return E}),createRmAll$1=configure(R=>{async function*E(U,G={}){for await(const{path:Y,recursive:J}of normaliseInput$1(U)){const Q=new URLSearchParams(G.searchParams);Q.append("arg",`${Y}`),J!=null&&Q.set("recursive",String(J));const X=await R.post("pin/rm",{signal:G.signal,headers:G.headers,searchParams:toUrlSearchParams({...G,arg:`${Y}`,recursive:J})});for await(const Z of X.ndjson()){if(Z.Pins){yield*Z.Pins.map(ee=>CID.parse(ee));continue}yield CID.parse(Z)}}}return E}),createRm$2=R=>{const E=createRmAll$1(R);return configure(()=>{async function U(G,Y={}){return itLast(E([{path:G,...Y}],Y))}return U})(R)},decodePin=({Name:R,Status:E,Cid:U})=>({cid:CID.parse(U),name:R,status:E}),encodeService=R=>{if(typeof R=="string"&&R!=="")return R;throw new TypeError("service name must be passed")},encodeCID=R=>{if(CID.asCID(R))return R.toString();throw new TypeError(`CID instance expected instead of ${typeof R}`)},encodeQuery=({service:R,cid:E,name:U,status:G,all:Y})=>{const J=toUrlSearchParams({service:encodeService(R),name:U,force:Y?!0:void 0});if(E)for(const Q of E)J.append("cid",encodeCID(Q));if(G)for(const Q of G)J.append("status",Q);return J},encodeAddParams=({cid:R,service:E,background:U,name:G,origins:Y})=>{const J=toUrlSearchParams({arg:encodeCID(R),service:encodeService(E),name:G,background:U?!0:void 0});if(Y)for(const Q of Y)J.append("origin",Q.toString());return J};function createAdd$2(R){async function E(U,{timeout:G,signal:Y,headers:J,...Q}){const X=await R.post("pin/remote/add",{timeout:G,signal:Y,headers:J,searchParams:encodeAddParams({cid:U,...Q})});return decodePin(await X.json())}return E}function createLs$3(R){async function*E({timeout:U,signal:G,headers:Y,...J}){const Q=await R.post("pin/remote/ls",{timeout:U,signal:G,headers:Y,searchParams:encodeQuery(J)});for await(const X of Q.ndjson())yield decodePin(X)}return E}function createRm$1(R){async function E({timeout:U,signal:G,headers:Y,...J}){await R.post("pin/remote/rm",{timeout:U,signal:G,headers:Y,searchParams:encodeQuery({...J,all:!1})})}return E}function createRmAll(R){async function E({timeout:U,signal:G,headers:Y,...J}){await R.post("pin/remote/rm",{timeout:U,signal:G,headers:Y,searchParams:encodeQuery({...J,all:!0})})}return E}function encodeEndpoint(R){const E=String(R);if(E==="undefined")throw Error("endpoint is required");return E[E.length-1]==="/"?E.slice(0,-1):E}function decodeRemoteService(R){return{service:R.Service,endpoint:new URL(R.ApiEndpoint),...R.Stat&&{stat:decodeStat(R.Stat)}}}function decodeStat(R){switch(R.Status){case"valid":{const{Pinning:E,Pinned:U,Queued:G,Failed:Y}=R.PinCount;return{status:"valid",pinCount:{queued:G,pinning:E,pinned:U,failed:Y}}}case"invalid":return{status:"invalid"};default:return{status:R.Status}}}function createAdd$1(R){async function E(U,G){const{endpoint:Y,key:J,headers:Q,timeout:X,signal:Z}=G;await R.post("pin/remote/service/add",{timeout:X,signal:Z,searchParams:toUrlSearchParams({arg:[U,encodeEndpoint(Y),J]}),headers:Q})}return E}function createLs$2(R){async function E(U={}){const{stat:G,headers:Y,timeout:J,signal:Q}=U,X=await R.post("pin/remote/service/ls",{timeout:J,signal:Q,headers:Y,searchParams:G===!0?toUrlSearchParams({stat:G}):void 0}),{RemoteServices:Z}=await X.json();return Z.map(decodeRemoteService)}return E}function createRm(R){async function E(U,G={}){await R.post("pin/remote/service/rm",{signal:G.signal,headers:G.headers,searchParams:toUrlSearchParams({arg:U})})}return E}function createService(R){const E=new Client(R);return{add:createAdd$1(E),ls:createLs$2(E),rm:createRm(E)}}function createRemote(R){const E=new Client(R);return{add:createAdd$2(E),ls:createLs$3(E),rm:createRm$1(E),rmAll:createRmAll(E),service:createService(R)}}function createPin(R){return{addAll:createAddAll$1(R),add:createAdd$3(R),ls:createLs$4(R),rmAll:createRmAll$1(R),rm:createRm$2(R),remote:createRemote(R)}}const rpcArrayToTextArray=R=>Array.isArray(R)?R.map(rpcToText):R,rpcToText=R=>toString$2(rpcToBytes(R)),rpcToBytes=R=>base64url.decode(R),rpcToBigInt=R=>BigInt(`0x${toString$2(base64url.decode(R),"base16")}`),textToUrlSafeRpc=R=>base64url.encode(fromString$1(R)),createLs$1=configure(R=>{async function E(U={}){const{Strings:G}=await(await R.post("pubsub/ls",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json();return rpcArrayToTextArray(G)||[]}return E}),createPeers$1=configure(R=>{async function E(U,G={}){const Y=await R.post("pubsub/peers",{signal:G.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(U),...G}),headers:G.headers}),{Strings:J}=await Y.json();return J||[]}return E}),createPublish=configure(R=>{async function E(U,G,Y={}){const J=toUrlSearchParams({arg:textToUrlSafeRpc(U),...Y}),Q=new AbortController,X=abortSignal(Q.signal,Y.signal);await(await R.post("pubsub/pub",{signal:X,searchParams:J,...await multipartRequest([G],Q,Y.headers)})).text()}return E}),log=logger("ipfs-http-client:pubsub:subscribe"),createSubscribe=(R,E)=>configure(U=>{async function G(Y,J,Q={}){Q.signal=E.subscribe(Y,J,Q.signal);let X,Z;const ee=new Promise((ne,oe)=>{X=ne,Z=oe}),te=setTimeout(()=>X(),1e3);return U.post("pubsub/sub",{signal:Q.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(Y),...Q}),headers:Q.headers}).catch(ne=>{E.unsubscribe(Y,J),Z(ne)}).then(ne=>{clearTimeout(te),ne&&(readMessages(ne,{onMessage:oe=>{if(!!J){if(typeof J=="function"){J(oe);return}typeof J.handleEvent=="function"&&J.handleEvent(oe)}},onEnd:()=>E.unsubscribe(Y,J),onError:Q.onError}),X())}),ee}return G})(R);async function readMessages(R,{onMessage:E,onEnd:U,onError:G}){G=G||log;try{for await(const Y of R.ndjson())try{if(!Y.from)continue;E({from:peerIdFromString(Y.from),data:rpcToBytes(Y.data),sequenceNumber:rpcToBigInt(Y.seqno),topic:rpcToText(Y.topicIDs[0])})}catch(J){J.message=`Failed to parse pubsub message: ${J.message}`,G(J,!1,Y)}}catch(Y){isAbortError(Y)||G(Y,!0)}finally{U()}}const isAbortError=R=>{switch(R.type){case"aborted":return!0;case"abort":return!0;default:return R.name==="AbortError"}},createUnsubscribe=(R,E)=>{async function U(G,Y){E.unsubscribe(G,Y)}return U};class SubscriptionTracker{constructor(){this._subs=new Map}subscribe(E,U,G){const Y=this._subs.get(E)||[];if(Y.find(Q=>Q.handler===U))throw new Error(`Already subscribed to ${E} with this handler`);const J=new AbortController;return this._subs.set(E,[{handler:U,controller:J}].concat(Y)),G&&G.addEventListener("abort",()=>this.unsubscribe(E,U)),J.signal}unsubscribe(E,U){const G=this._subs.get(E)||[];let Y;U?(this._subs.set(E,G.filter(J=>J.handler!==U)),Y=G.filter(J=>J.handler===U)):(this._subs.set(E,[]),Y=G),(this._subs.get(E)||[]).length||this._subs.delete(E),Y.forEach(J=>J.controller.abort())}}function createPubsub(R){const E=new SubscriptionTracker;return{ls:createLs$1(R),peers:createPeers$1(R),publish:createPublish(R),subscribe:createSubscribe(R,E),unsubscribe:createUnsubscribe(R,E)}}const createLocal=configure(R=>{async function*E(U={}){yield*(await R.post("refs/local",{signal:U.signal,transform:objectToCamel,searchParams:toUrlSearchParams(U),headers:U.headers})).ndjson()}return E}),createRefs=configure((R,E)=>Object.assign(async function*(G,Y={}){const J=Array.isArray(G)?G:[G];yield*(await R.post("refs",{signal:Y.signal,searchParams:toUrlSearchParams({arg:J.map(X=>`${X instanceof Uint8Array?CID.decode(X):X}`),...Y}),headers:Y.headers,transform:objectToCamel})).ndjson()},{local:createLocal(E)})),createGc=configure(R=>{async function*E(U={}){yield*(await R.post("repo/gc",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers,transform:Y=>({err:Y.Error?new Error(Y.Error):null,cid:(Y.Key||{})["/"]?CID.parse(Y.Key["/"]):null})})).ndjson()}return E}),createStat=configure(R=>{async function E(U={}){const Y=await(await R.post("repo/stat",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json();return{numObjects:BigInt(Y.NumObjects),repoSize:BigInt(Y.RepoSize),repoPath:Y.RepoPath,version:Y.Version,storageMax:BigInt(Y.StorageMax)}}return E}),createVersion$1=configure(R=>{async function E(U={}){return(await(await R.post("repo/version",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()).Version}return E});function createRepo(R){return{gc:createGc(R),stat:createStat(R),version:createVersion$1(R)}}const createBw=configure(R=>{async function*E(U={}){yield*(await R.post("stats/bw",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers,transform:Y=>({totalIn:BigInt(Y.TotalIn),totalOut:BigInt(Y.TotalOut),rateIn:parseFloat(Y.RateIn),rateOut:parseFloat(Y.RateOut)})})).ndjson()}return E});function createStats(R){return{bitswap:createStat$4(R),repo:createStat(R),bw:createBw(R)}}const createAddrs=configure(R=>{async function E(U={}){const G=await R.post("swarm/addrs",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers}),{Addrs:Y}=await G.json();return Object.keys(Y).map(J=>({id:peerIdFromString(J),addrs:(Y[J]||[]).map(Q=>new Multiaddr(Q))}))}return E}),createConnect=configure(R=>{async function E(U,G={}){const Y=await R.post("swarm/connect",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),{Strings:J}=await Y.json();return J||[]}return E}),createDisconnect=configure(R=>{async function E(U,G={}){const Y=await R.post("swarm/disconnect",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),{Strings:J}=await Y.json();return J||[]}return E}),createLocalAddrs=configure(R=>{async function E(U={}){const G=await R.post("swarm/addrs/local",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers}),{Strings:Y}=await G.json();return(Y||[]).map(J=>new Multiaddr(J))}return E}),createPeers=configure(R=>{async function E(U={}){const G=await R.post("swarm/peers",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers}),{Peers:Y}=await G.json();return(Y||[]).map(J=>({addr:new Multiaddr(J.Addr),peer:peerIdFromString(J.Peer),muxer:J.Muxer,latency:J.Latency,streams:J.Streams,direction:J.Direction==null?void 0:J.Direction===0?"inbound":"outbound"}))}return E});function createSwarm(R){return{addrs:createAddrs(R),connect:createConnect(R),disconnect:createDisconnect(R),localAddrs:createLocalAddrs(R),peers:createPeers(R)}}const createAddAll=configure(R=>{async function*E(U,G={}){const Y=new AbortController,J=abortSignal(Y.signal,G.signal),{headers:Q,body:X,total:Z,parts:ee}=await multipartRequest(U,Y,G.headers),[te,ne]=typeof G.progress=="function"?createProgressHandler(Z,ee,G.progress):[void 0,void 0],oe=await R.post("add",{searchParams:toUrlSearchParams({"stream-channels":!0,...G,progress:Boolean(te)}),onUploadProgress:ne,signal:J,headers:Q,body:X});for await(let ce of oe.ndjson())ce=objectToCamel(ce),ce.hash!==void 0?yield toCoreInterface(ce):te&&te(ce.bytes||0,ce.name)}return E}),createProgressHandler=(R,E,U)=>E?[void 0,createOnUploadProgress(R,E,U)]:[U,void 0],createOnUploadProgress=(R,E,U)=>{let G=0;const Y=E.length;return({loaded:J,total:Q})=>{const X=Math.floor(J/Q*R);for(;G<Y;){const{start:Z,end:ee,name:te}=E[G];if(X<ee){U(X-Z,te);break}else U(ee-Z,te),G+=1}}};function toCoreInterface({name:R,hash:E,size:U,mode:G,mtime:Y,mtimeNsecs:J}){const Q={path:R,cid:CID.parse(E),size:parseInt(U)};return G!=null&&(Q.mode=parseInt(G,8)),Y!=null&&(Q.mtime={secs:Y,nsecs:J||0}),Q}const browserReadableStreamToIt=browserReadablestreamToIt;function blobToIt(R){return typeof R.stream=="function"?browserReadableStreamToIt(R.stream()):browserReadableStreamToIt(new Response(R).body)}var blobToIt_1=blobToIt;async function*toAsyncIterable(R){yield R}async function normaliseContent(R){if(isBytes(R))return toAsyncIterable(toBytes(R));if(typeof R=="string"||R instanceof String)return toAsyncIterable(toBytes(R.toString()));if(isBlob(R))return blobToIt_1(R);if(isReadableStream(R)&&(R=browserReadablestreamToIt(R)),Symbol.iterator in R||Symbol.asyncIterator in R){const E=itPeekable(R),{value:U,done:G}=await E.peek();if(G)return toAsyncIterable(new Uint8Array(0));if(E.push(U),Number.isInteger(U))return toAsyncIterable(Uint8Array.from(await itAll(E)));if(isBytes(U)||typeof U=="string"||U instanceof String)return itMap(E,toBytes)}throw errCode(new Error(`Unexpected input: ${R}`),"ERR_UNEXPECTED_INPUT")}function toBytes(R){return R instanceof Uint8Array?R:ArrayBuffer.isView(R)?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):R instanceof ArrayBuffer?new Uint8Array(R):Array.isArray(R)?Uint8Array.from(R):fromString$1(R.toString())}async function*normaliseCandidateSingle(R,E){if(R==null)throw errCode(new Error(`Unexpected input: ${R}`),"ERR_UNEXPECTED_INPUT");if(typeof R=="string"||R instanceof String){yield toFileObject(R.toString(),E);return}if(isBytes(R)||isBlob(R)){yield toFileObject(R,E);return}if(isReadableStream(R)&&(R=browserReadablestreamToIt(R)),Symbol.iterator in R||Symbol.asyncIterator in R){const U=itPeekable(R),{value:G,done:Y}=await U.peek();if(Y){yield{content:[]};return}if(U.push(G),Number.isInteger(G)||isBytes(G)||typeof G=="string"||G instanceof String){yield toFileObject(U,E);return}throw errCode(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(R)){yield toFileObject(R,E);return}throw errCode(new Error('Unexpected input: cannot convert "'+typeof R+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(R,E){const{path:U,mode:G,mtime:Y,content:J}=R,Q={path:U||"",mode:parseMode(G),mtime:parseMtime(Y)};return J?Q.content=await E(J):U||(Q.content=await E(R)),Q}function normaliseInput(R){return normaliseCandidateSingle(R,normaliseContent)}function createAdd(R){const E=createAddAll(R);return configure(()=>{async function U(G,Y={}){return await itLast(E(normaliseInput(G),Y))}return U})(R)}const createCat=configure(R=>{async function*E(U,G={}){yield*(await R.post("cat",{signal:G.signal,searchParams:toUrlSearchParams({arg:U.toString(),...G}),headers:G.headers})).iterator()}return E}),createCommands=configure(R=>async(U={})=>(await R.post("commands",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).json()),createDns=configure(R=>async(U,G={})=>(await(await R.post("dns",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers})).json()).Path),createGetEndpointConfig=configure(R=>()=>{const E=new URL(R.opts.base||"");return{host:E.hostname,port:E.port,protocol:E.protocol,pathname:E.pathname,"api-path":E.pathname}}),createGet=configure(R=>{async function*E(U,G={}){const Y={arg:`${U instanceof Uint8Array?CID.decode(U):U}`,...G};Y.compressionLevel&&(Y["compression-level"]=Y.compressionLevel,delete Y.compressionLevel),yield*(await R.post("get",{signal:G.signal,searchParams:toUrlSearchParams(Y),headers:G.headers})).iterator()}return E}),createId=configure(R=>{async function E(U={}){const Y=await(await R.post("id",{signal:U.signal,searchParams:toUrlSearchParams({arg:U.peerId?U.peerId.toString():void 0,...U}),headers:U.headers})).json(),J={...objectToCamel(Y)};return J.id=peerIdFromString(J.id),J.addresses&&(J.addresses=J.addresses.map(Q=>new Multiaddr(Q))),J}return E}),createIsOnline=R=>{const E=createId(R);async function U(G={}){const Y=await E(G);return Boolean(Y&&Y.addresses&&Y.addresses.length)}return U},createLs=configure((R,E)=>{async function*U(G,Y={}){const J=`${G instanceof Uint8Array?CID.decode(G):G}`;async function Q(Z){let ee=Z.Hash;if(ee.includes("/")){const ne=ee.startsWith("/ipfs/")?ee:`/ipfs/${ee}`;ee=(await createStat$2(E)(ne)).cid}else ee=CID.parse(ee);const te={name:Z.Name,path:J+(Z.Name?`/${Z.Name}`:""),size:Z.Size,cid:ee,type:typeOf(Z)};return Z.Mode&&(te.mode=parseInt(Z.Mode,8)),Z.Mtime!==void 0&&Z.Mtime!==null&&(te.mtime={secs:Z.Mtime},Z.MtimeNsecs!==void 0&&Z.MtimeNsecs!==null&&(te.mtime.nsecs=Z.MtimeNsecs)),te}const X=await R.post("ls",{signal:Y.signal,searchParams:toUrlSearchParams({arg:J,...Y}),headers:Y.headers});for await(let Z of X.ndjson()){if(Z=Z.Objects,!Z)throw new Error("expected .Objects in results");if(Z=Z[0],!Z)throw new Error("expected one array in results.Objects");const ee=Z.Links;if(!Array.isArray(ee))throw new Error("expected one array in results.Objects[0].Links");if(!ee.length){yield Q(Z);return}yield*ee.map(Q)}}return U});function typeOf(R){switch(R.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const createMount=configure(R=>{async function E(U={}){const G=await R.post("dns",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers});return objectToCamel(await G.json())}return E}),createPing=configure(R=>{async function*E(U,G={}){yield*(await R.post("ping",{signal:G.signal,searchParams:toUrlSearchParams({arg:`${U}`,...G}),headers:G.headers,transform:objectToCamel})).ndjson()}return E}),createResolve=configure(R=>{async function E(U,G={}){const Y=await R.post("resolve",{signal:G.signal,searchParams:toUrlSearchParams({arg:U,...G}),headers:G.headers}),{Path:J}=await Y.json();return J}return E}),createStart=configure(R=>async(U={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createStop=configure(R=>{async function E(U={}){await(await R.post("shutdown",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers})).text()}return E}),createVersion=configure(R=>{async function E(U={}){const G=await R.post("version",{signal:U.signal,searchParams:toUrlSearchParams(U),headers:U.headers});return{...objectToCamel(await G.json()),"ipfs-http-client":"1.0.0"}}return E});function create(R={}){const E={name:identity$1.name,code:identity$1.code,encode:ee=>ee,decode:ee=>ee},U=Object.values(bases);(R.ipld&&R.ipld.bases?R.ipld.bases:[]).forEach(ee=>U.push(ee));const G=new Multibases({bases:U,loadBase:R.ipld&&R.ipld.loadBase}),Y=Object.values(codecs);[dagPB,dagCBOR,dagJSON,dagJOSE,E].concat(R.ipld&&R.ipld.codecs||[]).forEach(ee=>Y.push(ee));const J=new Multicodecs({codecs:Y,loadCodec:R.ipld&&R.ipld.loadCodec}),Q=Object.values(hashes);(R.ipld&&R.ipld.hashers?R.ipld.hashers:[]).forEach(ee=>Q.push(ee));const X=new Multihashes({hashers:Q,loadHasher:R.ipld&&R.ipld.loadHasher});return{add:createAdd(R),addAll:createAddAll(R),bitswap:createBitswap(R),block:createBlock(R),bootstrap:createBootstrap(R),cat:createCat(R),commands:createCommands(R),config:createConfig(R),dag:createDag(J,R),dht:createDht(R),diag:createDiag(R),dns:createDns(R),files:createFiles(R),get:createGet(R),getEndpointConfig:createGetEndpointConfig(R),id:createId(R),isOnline:createIsOnline(R),key:createKey(R),log:createLog(R),ls:createLs(R),mount:createMount(R),name:createName(R),object:createObject(J,R),pin:createPin(R),ping:createPing(R),pubsub:createPubsub(R),refs:createRefs(R),repo:createRepo(R),resolve:createResolve(R),start:createStart(R),stats:createStats(R),stop:createStop(R),swarm:createSwarm(R),version:createVersion(R),bases:G,codecs:J,hashers:X}}var toString=Object.prototype.toString;function isFunc(R){return toString.call(R)==="[object Function]"}var classCallCheck=function(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")},createClass=function(){function R(E,U){for(var G=0;G<U.length;G++){var Y=U[G];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(E,Y.key,Y)}}return function(E,U,G){return U&&R(E.prototype,U),G&&R(E,G),E}}();function icPart(R){return R.split("").map(function(E){return"(?:"+E.toUpperCase()+"|"+E.toLowerCase()+")"}).join("")}function remove(R,E){for(var U=R.length-1;U>=0;U--)R[U]===E&&Array.prototype.splice.call(R,U,1)}function hasProp(R,E){return Object.prototype.hasOwnProperty.call(R,E)}var instances={},Inflector=function(){createClass(R,null,[{key:"getInstance",value:function(U){return instances[U]=instances[U]||new R,instances[U]}}]);function R(){classCallCheck(this,R),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return createClass(R,[{key:"acronym",value:function(U){this.acronyms[U.toLowerCase()]=U;var G=[];for(var Y in this.acronyms)hasProp(this.acronyms,Y)&&G.push(this.acronyms[Y]);this.acronymRegex=new RegExp(G.join("|"))}},{key:"plural",value:function(U,G){typeof U=="string"&&remove(this.uncountables,U),remove(this.uncountables,G),this.plurals.unshift([U,G])}},{key:"singular",value:function(U,G){typeof U=="string"&&remove(this.uncountables,U),remove(this.uncountables,G),this.singulars.unshift([U,G])}},{key:"irregular",value:function(U,G){remove(this.uncountables,U),remove(this.uncountables,G);var Y=U[0],J=U.substr(1),Q=G[0],X=G.substr(1);if(Y.toUpperCase()===Q.toUpperCase())this.plural(new RegExp("("+Y+")"+J+"$","i"),"$1"+X),this.plural(new RegExp("("+Q+")"+X+"$","i"),"$1"+X),this.singular(new RegExp("("+Y+")"+J+"$","i"),"$1"+J),this.singular(new RegExp("("+Q+")"+X+"$","i"),"$1"+J);else{var Z=icPart(J),ee=icPart(X);this.plural(new RegExp(Y.toUpperCase()+Z+"$"),Q.toUpperCase()+X),this.plural(new RegExp(Y.toLowerCase()+Z+"$"),Q.toLowerCase()+X),this.plural(new RegExp(Q.toUpperCase()+ee+"$"),Q.toUpperCase()+X),this.plural(new RegExp(Q.toLowerCase()+ee+"$"),Q.toLowerCase()+X),this.singular(new RegExp(Y.toUpperCase()+Z+"$"),Y.toUpperCase()+J),this.singular(new RegExp(Y.toLowerCase()+Z+"$"),Y.toLowerCase()+J),this.singular(new RegExp(Q.toUpperCase()+ee+"$"),Y.toUpperCase()+J),this.singular(new RegExp(Q.toLowerCase()+ee+"$"),Y.toLowerCase()+J)}}},{key:"uncountable",value:function(){for(var U=arguments.length,G=Array(U),Y=0;Y<U;Y++)G[Y]=arguments[Y];this.uncountables=this.uncountables.concat(G)}},{key:"human",value:function(U,G){this.humans.unshift([U,G])}},{key:"clear",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all";U==="all"?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[U]=[]}}]),R}();function en(R){R.plural(/$/,"s"),R.plural(/s$/i,"s"),R.plural(/^(ax|test)is$/i,"$1es"),R.plural(/(octop|vir)us$/i,"$1i"),R.plural(/(octop|vir)i$/i,"$1i"),R.plural(/(alias|status)$/i,"$1es"),R.plural(/(bu)s$/i,"$1ses"),R.plural(/(buffal|tomat)o$/i,"$1oes"),R.plural(/([ti])um$/i,"$1a"),R.plural(/([ti])a$/i,"$1a"),R.plural(/sis$/i,"ses"),R.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),R.plural(/(hive)$/i,"$1s"),R.plural(/([^aeiouy]|qu)y$/i,"$1ies"),R.plural(/(x|ch|ss|sh)$/i,"$1es"),R.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),R.plural(/^(m|l)ouse$/i,"$1ice"),R.plural(/^(m|l)ice$/i,"$1ice"),R.plural(/^(ox)$/i,"$1en"),R.plural(/^(oxen)$/i,"$1"),R.plural(/(quiz)$/i,"$1zes"),R.singular(/s$/i,""),R.singular(/(ss)$/i,"$1"),R.singular(/(n)ews$/i,"$1ews"),R.singular(/([ti])a$/i,"$1um"),R.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),R.singular(/(^analy)(sis|ses)$/i,"$1sis"),R.singular(/([^f])ves$/i,"$1fe"),R.singular(/(hive)s$/i,"$1"),R.singular(/(tive)s$/i,"$1"),R.singular(/([lr])ves$/i,"$1f"),R.singular(/([^aeiouy]|qu)ies$/i,"$1y"),R.singular(/(s)eries$/i,"$1eries"),R.singular(/(m)ovies$/i,"$1ovie"),R.singular(/(x|ch|ss|sh)es$/i,"$1"),R.singular(/^(m|l)ice$/i,"$1ouse"),R.singular(/(bus)(es)?$/i,"$1"),R.singular(/(o)es$/i,"$1"),R.singular(/(shoe)s$/i,"$1"),R.singular(/(cris|test)(is|es)$/i,"$1is"),R.singular(/^(a)x[ie]s$/i,"$1xis"),R.singular(/(octop|vir)(us|i)$/i,"$1us"),R.singular(/(alias|status)(es)?$/i,"$1"),R.singular(/^(ox)en/i,"$1"),R.singular(/(vert|ind)ices$/i,"$1ex"),R.singular(/(matr)ices$/i,"$1ix"),R.singular(/(quiz)zes$/i,"$1"),R.singular(/(database)s$/i,"$1"),R.irregular("person","people"),R.irregular("man","men"),R.irregular("child","children"),R.irregular("sex","sexes"),R.irregular("move","moves"),R.irregular("zombie","zombies"),R.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}var defaults$1={en};function inflections(R,E){if(isFunc(R)&&(E=R,R=null),R=R||"en",E)E(Inflector.getInstance(R));else return Inflector.getInstance(R)}for(var locale in defaults$1)inflections(locale,defaults$1[locale]);function applyInflections(R,E){var U=""+R,G,Y,J;if(U.length===0)return U;var Q=U.toLowerCase().match(/\b\w+$/);if(Q&&inflections().uncountables.indexOf(Q[0])>-1)return U;for(var X=0,Z=E.length;X<Z;X++)if(G=E[X],Y=G[0],J=G[1],U.match(Y)){U=U.replace(Y,J);break}return U}function pluralize(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en";return applyInflections(R,inflections(E).plurals)}var DEFAULT_APPROXIMATIONS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00C6:"AE",\u00C7:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O","\xD7":"x",\u00D8:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00DE:"Th",\u00DF:"ss",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00E6:"ae",\u00E7:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00FD:"y",\u00FE:"th",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u011D:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014A:"NG",\u014B:"ng",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041A:"K",\u041B:"L",\u041C:"M",\u041D:"N",\u041E:"O",\u041F:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042A:"",\u042B:"Y",\u042C:"",\u042D:"E",\u042E:"YU",\u042F:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043A:"k",\u043B:"l",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044A:"",\u044B:"y",\u044C:"",\u044D:"e",\u044E:"yu",\u044F:"ya"},DEFAULT_REPLACEMENT_CHAR="?",instances$1={};(function(){createClass(R,null,[{key:"getInstance",value:function(U){return instances$1[U]=instances$1[U]||new R,instances$1[U]}}]);function R(){classCallCheck(this,R),this.approximations={};for(var E in DEFAULT_APPROXIMATIONS)this.approximate(E,DEFAULT_APPROXIMATIONS[E])}return createClass(R,[{key:"approximate",value:function(U,G){this.approximations[U]=G}},{key:"transliterate",value:function(U,G){var Y=this;return U.replace(/[^\u0000-\u007f]/g,function(J){return Y.approximations[J]||G||DEFAULT_REPLACEMENT_CHAR})}}]),R})();var toggleSelection=function(){var R=document.getSelection();if(!R.rangeCount)return function(){};for(var E=document.activeElement,U=[],G=0;G<R.rangeCount;G++)U.push(R.getRangeAt(G));switch(E.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":E.blur();break;default:E=null;break}return R.removeAllRanges(),function(){R.type==="Caret"&&R.removeAllRanges(),R.rangeCount||U.forEach(function(Y){R.addRange(Y)}),E&&E.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(R){var E=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return R.replace(/#{\s*key\s*}/g,E)}function copy(R,E){var U,G,Y,J,Q,X,Z=!1;E||(E={}),U=E.debug||!1;try{Y=deselectCurrent(),J=document.createRange(),Q=document.getSelection(),X=document.createElement("span"),X.textContent=R,X.style.all="unset",X.style.position="fixed",X.style.top=0,X.style.clip="rect(0, 0, 0, 0)",X.style.whiteSpace="pre",X.style.webkitUserSelect="text",X.style.MozUserSelect="text",X.style.msUserSelect="text",X.style.userSelect="text",X.addEventListener("copy",function(te){if(te.stopPropagation(),E.format)if(te.preventDefault(),typeof te.clipboardData>"u"){U&&console.warn("unable to use e.clipboardData"),U&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var ne=clipboardToIE11Formatting[E.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(ne,R)}else te.clipboardData.clearData(),te.clipboardData.setData(E.format,R);E.onCopy&&(te.preventDefault(),E.onCopy(te.clipboardData))}),document.body.appendChild(X),J.selectNodeContents(X),Q.addRange(J);var ee=document.execCommand("copy");if(!ee)throw new Error("copy command was unsuccessful");Z=!0}catch(te){U&&console.error("unable to copy using execCommand: ",te),U&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(E.format||"text",R),E.onCopy&&E.onCopy(window.clipboardData),Z=!0}catch(ne){U&&console.error("unable to copy using clipboardData: ",ne),U&&console.error("falling back to prompt"),G=format("message"in E?E.message:defaultMessage),window.prompt(G,R)}}finally{Q&&(typeof Q.removeRange=="function"?Q.removeRange(J):Q.removeAllRanges()),X&&document.body.removeChild(X),Y()}return Z}var copyToClipboard=copy;const copy$1=copyToClipboard;/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(R,E){var U=Object.keys(R);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(R);E&&(G=G.filter(function(Y){return Object.getOwnPropertyDescriptor(R,Y).enumerable})),U.push.apply(U,G)}return U}function _objectSpread2(R){for(var E=1;E<arguments.length;E++){var U=arguments[E]!=null?arguments[E]:{};E%2?ownKeys(Object(U),!0).forEach(function(G){_defineProperty(R,G,U[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(U)):ownKeys(Object(U)).forEach(function(G){Object.defineProperty(R,G,Object.getOwnPropertyDescriptor(U,G))})}return R}function _typeof(R){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(E){return typeof E}:_typeof=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof(R)}function _defineProperty(R,E,U){return E in R?Object.defineProperty(R,E,{value:U,enumerable:!0,configurable:!0,writable:!0}):R[E]=U,R}function _extends(){return _extends=Object.assign||function(R){for(var E=1;E<arguments.length;E++){var U=arguments[E];for(var G in U)Object.prototype.hasOwnProperty.call(U,G)&&(R[G]=U[G])}return R},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(R,E){if(R==null)return{};var U={},G=Object.keys(R),Y,J;for(J=0;J<G.length;J++)Y=G[J],!(E.indexOf(Y)>=0)&&(U[Y]=R[Y]);return U}function _objectWithoutProperties(R,E){if(R==null)return{};var U=_objectWithoutPropertiesLoose(R,E),G,Y;if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(R);for(Y=0;Y<J.length;Y++)G=J[Y],!(E.indexOf(G)>=0)&&(!Object.prototype.propertyIsEnumerable.call(R,G)||(U[G]=R[G]))}return U}function _toConsumableArray(R){return _arrayWithoutHoles(R)||_iterableToArray(R)||_unsupportedIterableToArray(R)||_nonIterableSpread()}function _arrayWithoutHoles(R){if(Array.isArray(R))return _arrayLikeToArray(R)}function _iterableToArray(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}function _unsupportedIterableToArray(R,E){if(!!R){if(typeof R=="string")return _arrayLikeToArray(R,E);var U=Object.prototype.toString.call(R).slice(8,-1);if(U==="Object"&&R.constructor&&(U=R.constructor.name),U==="Map"||U==="Set")return Array.from(R);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return _arrayLikeToArray(R,E)}}function _arrayLikeToArray(R,E){(E==null||E>R.length)&&(E=R.length);for(var U=0,G=new Array(E);U<E;U++)G[U]=R[U];return G}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.14.0";function userAgent(R){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(R)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(R,E,U){R.addEventListener(E,U,!IE11OrLess&&captureMode)}function off(R,E,U){R.removeEventListener(E,U,!IE11OrLess&&captureMode)}function matches(R,E){if(!!E){if(E[0]===">"&&(E=E.substring(1)),R)try{if(R.matches)return R.matches(E);if(R.msMatchesSelector)return R.msMatchesSelector(E);if(R.webkitMatchesSelector)return R.webkitMatchesSelector(E)}catch{return!1}return!1}}function getParentOrHost(R){return R.host&&R!==document&&R.host.nodeType?R.host:R.parentNode}function closest(R,E,U,G){if(R){U=U||document;do{if(E!=null&&(E[0]===">"?R.parentNode===U&&matches(R,E):matches(R,E))||G&&R===U)return R;if(R===U)break}while(R=getParentOrHost(R))}return null}var R_SPACE=/\s+/g;function toggleClass(R,E,U){if(R&&E)if(R.classList)R.classList[U?"add":"remove"](E);else{var G=(" "+R.className+" ").replace(R_SPACE," ").replace(" "+E+" "," ");R.className=(G+(U?" "+E:"")).replace(R_SPACE," ")}}function css(R,E,U){var G=R&&R.style;if(G){if(U===void 0)return document.defaultView&&document.defaultView.getComputedStyle?U=document.defaultView.getComputedStyle(R,""):R.currentStyle&&(U=R.currentStyle),E===void 0?U:U[E];!(E in G)&&E.indexOf("webkit")===-1&&(E="-webkit-"+E),G[E]=U+(typeof U=="string"?"":"px")}}function matrix(R,E){var U="";if(typeof R=="string")U=R;else do{var G=css(R,"transform");G&&G!=="none"&&(U=G+" "+U)}while(!E&&(R=R.parentNode));var Y=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Y&&new Y(U)}function find(R,E,U){if(R){var G=R.getElementsByTagName(E),Y=0,J=G.length;if(U)for(;Y<J;Y++)U(G[Y],Y);return G}return[]}function getWindowScrollingElement(){var R=document.scrollingElement;return R||document.documentElement}function getRect(R,E,U,G,Y){if(!(!R.getBoundingClientRect&&R!==window)){var J,Q,X,Z,ee,te,ne;if(R!==window&&R.parentNode&&R!==getWindowScrollingElement()?(J=R.getBoundingClientRect(),Q=J.top,X=J.left,Z=J.bottom,ee=J.right,te=J.height,ne=J.width):(Q=0,X=0,Z=window.innerHeight,ee=window.innerWidth,te=window.innerHeight,ne=window.innerWidth),(E||U)&&R!==window&&(Y=Y||R.parentNode,!IE11OrLess))do if(Y&&Y.getBoundingClientRect&&(css(Y,"transform")!=="none"||U&&css(Y,"position")!=="static")){var oe=Y.getBoundingClientRect();Q-=oe.top+parseInt(css(Y,"border-top-width")),X-=oe.left+parseInt(css(Y,"border-left-width")),Z=Q+J.height,ee=X+J.width;break}while(Y=Y.parentNode);if(G&&R!==window){var ce=matrix(Y||R),pe=ce&&ce.a,ye=ce&&ce.d;ce&&(Q/=ye,X/=pe,ne/=pe,te/=ye,Z=Q+te,ee=X+ne)}return{top:Q,left:X,bottom:Z,right:ee,width:ne,height:te}}}function isScrolledPast(R,E,U){for(var G=getParentAutoScrollElement(R,!0),Y=getRect(R)[E];G;){var J=getRect(G)[U],Q=void 0;if(U==="top"||U==="left"?Q=Y>=J:Q=Y<=J,!Q)return G;if(G===getWindowScrollingElement())break;G=getParentAutoScrollElement(G,!1)}return!1}function getChild(R,E,U,G){for(var Y=0,J=0,Q=R.children;J<Q.length;){if(Q[J].style.display!=="none"&&Q[J]!==Sortable.ghost&&(G||Q[J]!==Sortable.dragged)&&closest(Q[J],U.draggable,R,!1)){if(Y===E)return Q[J];Y++}J++}return null}function lastChild(R,E){for(var U=R.lastElementChild;U&&(U===Sortable.ghost||css(U,"display")==="none"||E&&!matches(U,E));)U=U.previousElementSibling;return U||null}function index(R,E){var U=0;if(!R||!R.parentNode)return-1;for(;R=R.previousElementSibling;)R.nodeName.toUpperCase()!=="TEMPLATE"&&R!==Sortable.clone&&(!E||matches(R,E))&&U++;return U}function getRelativeScrollOffset(R){var E=0,U=0,G=getWindowScrollingElement();if(R)do{var Y=matrix(R),J=Y.a,Q=Y.d;E+=R.scrollLeft*J,U+=R.scrollTop*Q}while(R!==G&&(R=R.parentNode));return[E,U]}function indexOfObject(R,E){for(var U in R)if(!!R.hasOwnProperty(U)){for(var G in E)if(E.hasOwnProperty(G)&&E[G]===R[U][G])return Number(U)}return-1}function getParentAutoScrollElement(R,E){if(!R||!R.getBoundingClientRect)return getWindowScrollingElement();var U=R,G=!1;do if(U.clientWidth<U.scrollWidth||U.clientHeight<U.scrollHeight){var Y=css(U);if(U.clientWidth<U.scrollWidth&&(Y.overflowX=="auto"||Y.overflowX=="scroll")||U.clientHeight<U.scrollHeight&&(Y.overflowY=="auto"||Y.overflowY=="scroll")){if(!U.getBoundingClientRect||U===document.body)return getWindowScrollingElement();if(G||E)return U;G=!0}}while(U=U.parentNode);return getWindowScrollingElement()}function extend(R,E){if(R&&E)for(var U in E)E.hasOwnProperty(U)&&(R[U]=E[U]);return R}function isRectEqual(R,E){return Math.round(R.top)===Math.round(E.top)&&Math.round(R.left)===Math.round(E.left)&&Math.round(R.height)===Math.round(E.height)&&Math.round(R.width)===Math.round(E.width)}var _throttleTimeout;function throttle(R,E){return function(){if(!_throttleTimeout){var U=arguments,G=this;U.length===1?R.call(G,U[0]):R.apply(G,U),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},E)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(R,E,U){R.scrollLeft+=E,R.scrollTop+=U}function clone(R){var E=window.Polymer,U=window.jQuery||window.Zepto;return E&&E.dom?E.dom(R).cloneNode(!0):U?U(R).clone(!0)[0]:R.cloneNode(!0)}function setRect(R,E){css(R,"position","absolute"),css(R,"top",E.top),css(R,"left",E.left),css(R,"width",E.width),css(R,"height",E.height)}function unsetRect(R){css(R,"position",""),css(R,"top",""),css(R,"left",""),css(R,"width",""),css(R,"height","")}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var R=[],E;return{captureAnimationState:function(){if(R=[],!!this.options.animation){var G=[].slice.call(this.el.children);G.forEach(function(Y){if(!(css(Y,"display")==="none"||Y===Sortable.ghost)){R.push({target:Y,rect:getRect(Y)});var J=_objectSpread2({},R[R.length-1].rect);if(Y.thisAnimationDuration){var Q=matrix(Y,!0);Q&&(J.top-=Q.f,J.left-=Q.e)}Y.fromRect=J}})}},addAnimationState:function(G){R.push(G)},removeAnimationState:function(G){R.splice(indexOfObject(R,{target:G}),1)},animateAll:function(G){var Y=this;if(!this.options.animation){clearTimeout(E),typeof G=="function"&&G();return}var J=!1,Q=0;R.forEach(function(X){var Z=0,ee=X.target,te=ee.fromRect,ne=getRect(ee),oe=ee.prevFromRect,ce=ee.prevToRect,pe=X.rect,ye=matrix(ee,!0);ye&&(ne.top-=ye.f,ne.left-=ye.e),ee.toRect=ne,ee.thisAnimationDuration&&isRectEqual(oe,ne)&&!isRectEqual(te,ne)&&(pe.top-ne.top)/(pe.left-ne.left)===(te.top-ne.top)/(te.left-ne.left)&&(Z=calculateRealTime(pe,oe,ce,Y.options)),isRectEqual(ne,te)||(ee.prevFromRect=te,ee.prevToRect=ne,Z||(Z=Y.options.animation),Y.animate(ee,pe,ne,Z)),Z&&(J=!0,Q=Math.max(Q,Z),clearTimeout(ee.animationResetTimer),ee.animationResetTimer=setTimeout(function(){ee.animationTime=0,ee.prevFromRect=null,ee.fromRect=null,ee.prevToRect=null,ee.thisAnimationDuration=null},Z),ee.thisAnimationDuration=Z)}),clearTimeout(E),J?E=setTimeout(function(){typeof G=="function"&&G()},Q):typeof G=="function"&&G(),R=[]},animate:function(G,Y,J,Q){if(Q){css(G,"transition",""),css(G,"transform","");var X=matrix(this.el),Z=X&&X.a,ee=X&&X.d,te=(Y.left-J.left)/(Z||1),ne=(Y.top-J.top)/(ee||1);G.animatingX=!!te,G.animatingY=!!ne,css(G,"transform","translate3d("+te+"px,"+ne+"px,0)"),this.forRepaintDummy=repaint(G),css(G,"transition","transform "+Q+"ms"+(this.options.easing?" "+this.options.easing:"")),css(G,"transform","translate3d(0,0,0)"),typeof G.animated=="number"&&clearTimeout(G.animated),G.animated=setTimeout(function(){css(G,"transition",""),css(G,"transform",""),G.animated=!1,G.animatingX=!1,G.animatingY=!1},Q)}}}}function repaint(R){return R.offsetWidth}function calculateRealTime(R,E,U,G){return Math.sqrt(Math.pow(E.top-R.top,2)+Math.pow(E.left-R.left,2))/Math.sqrt(Math.pow(E.top-U.top,2)+Math.pow(E.left-U.left,2))*G.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function R(E){for(var U in defaults)defaults.hasOwnProperty(U)&&!(U in E)&&(E[U]=defaults[U]);plugins.forEach(function(G){if(G.pluginName===E.pluginName)throw"Sortable: Cannot mount plugin ".concat(E.pluginName," more than once")}),plugins.push(E)},pluginEvent:function R(E,U,G){var Y=this;this.eventCanceled=!1,G.cancel=function(){Y.eventCanceled=!0};var J=E+"Global";plugins.forEach(function(Q){!U[Q.pluginName]||(U[Q.pluginName][J]&&U[Q.pluginName][J](_objectSpread2({sortable:U},G)),U.options[Q.pluginName]&&U[Q.pluginName][E]&&U[Q.pluginName][E](_objectSpread2({sortable:U},G)))})},initializePlugins:function R(E,U,G,Y){plugins.forEach(function(X){var Z=X.pluginName;if(!(!E.options[Z]&&!X.initializeByDefault)){var ee=new X(E,U,E.options);ee.sortable=E,ee.options=E.options,E[Z]=ee,_extends(G,ee.defaults)}});for(var J in E.options)if(!!E.options.hasOwnProperty(J)){var Q=this.modifyOption(E,J,E.options[J]);typeof Q<"u"&&(E.options[J]=Q)}},getEventProperties:function R(E,U){var G={};return plugins.forEach(function(Y){typeof Y.eventProperties=="function"&&_extends(G,Y.eventProperties.call(U[Y.pluginName],E))}),G},modifyOption:function R(E,U,G){var Y;return plugins.forEach(function(J){!E[J.pluginName]||J.optionListeners&&typeof J.optionListeners[U]=="function"&&(Y=J.optionListeners[U].call(E[J.pluginName],G))}),Y}};function dispatchEvent(R){var E=R.sortable,U=R.rootEl,G=R.name,Y=R.targetEl,J=R.cloneEl,Q=R.toEl,X=R.fromEl,Z=R.oldIndex,ee=R.newIndex,te=R.oldDraggableIndex,ne=R.newDraggableIndex,oe=R.originalEvent,ce=R.putSortable,pe=R.extraEventProperties;if(E=E||U&&U[expando],!!E){var ye,Se=E.options,ge="on"+G.charAt(0).toUpperCase()+G.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?ye=new CustomEvent(G,{bubbles:!0,cancelable:!0}):(ye=document.createEvent("Event"),ye.initEvent(G,!0,!0)),ye.to=Q||U,ye.from=X||U,ye.item=Y||U,ye.clone=J,ye.oldIndex=Z,ye.newIndex=ee,ye.oldDraggableIndex=te,ye.newDraggableIndex=ne,ye.originalEvent=oe,ye.pullMode=ce?ce.lastPutMode:void 0;var _e=_objectSpread2(_objectSpread2({},pe),PluginManager.getEventProperties(G,E));for(var Te in _e)ye[Te]=_e[Te];U&&U.dispatchEvent(ye),Se[ge]&&Se[ge].call(E,ye)}}var _excluded=["evt"],pluginEvent=function R(E,U){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Y=G.evt,J=_objectWithoutProperties(G,_excluded);PluginManager.pluginEvent.bind(Sortable)(E,U,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:Y,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(X){_dispatchEvent({sortable:U,name:X,originalEvent:Y})}},J))};function _dispatchEvent(R){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},R))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(!!documentExists){if(IE11OrLess)return!1;var R=document.createElement("x");return R.style.cssText="pointer-events:auto",R.style.pointerEvents==="auto"}}(),_detectDirection=function R(E,U){var G=css(E),Y=parseInt(G.width)-parseInt(G.paddingLeft)-parseInt(G.paddingRight)-parseInt(G.borderLeftWidth)-parseInt(G.borderRightWidth),J=getChild(E,0,U),Q=getChild(E,1,U),X=J&&css(J),Z=Q&&css(Q),ee=X&&parseInt(X.marginLeft)+parseInt(X.marginRight)+getRect(J).width,te=Z&&parseInt(Z.marginLeft)+parseInt(Z.marginRight)+getRect(Q).width;if(G.display==="flex")return G.flexDirection==="column"||G.flexDirection==="column-reverse"?"vertical":"horizontal";if(G.display==="grid")return G.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(J&&X.float&&X.float!=="none"){var ne=X.float==="left"?"left":"right";return Q&&(Z.clear==="both"||Z.clear===ne)?"vertical":"horizontal"}return J&&(X.display==="block"||X.display==="flex"||X.display==="table"||X.display==="grid"||ee>=Y&&G[CSSFloatProperty]==="none"||Q&&G[CSSFloatProperty]==="none"&&ee+te>Y)?"vertical":"horizontal"},_dragElInRowColumn=function R(E,U,G){var Y=G?E.left:E.top,J=G?E.right:E.bottom,Q=G?E.width:E.height,X=G?U.left:U.top,Z=G?U.right:U.bottom,ee=G?U.width:U.height;return Y===X||J===Z||Y+Q/2===X+ee/2},_detectNearestEmptySortable=function R(E,U){var G;return sortables.some(function(Y){var J=Y[expando].options.emptyInsertThreshold;if(!(!J||lastChild(Y))){var Q=getRect(Y),X=E>=Q.left-J&&E<=Q.right+J,Z=U>=Q.top-J&&U<=Q.bottom+J;if(X&&Z)return G=Y}}),G},_prepareGroup=function R(E){function U(J,Q){return function(X,Z,ee,te){var ne=X.options.group.name&&Z.options.group.name&&X.options.group.name===Z.options.group.name;if(J==null&&(Q||ne))return!0;if(J==null||J===!1)return!1;if(Q&&J==="clone")return J;if(typeof J=="function")return U(J(X,Z,ee,te),Q)(X,Z,ee,te);var oe=(Q?X:Z).options.group.name;return J===!0||typeof J=="string"&&J===oe||J.join&&J.indexOf(oe)>-1}}var G={},Y=E.group;(!Y||_typeof(Y)!="object")&&(Y={name:Y}),G.name=Y.name,G.checkPull=U(Y.pull,!0),G.checkPut=U(Y.put),G.revertClone=Y.revertClone,E.group=G},_hideGhostForTarget=function R(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function R(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(R){if(ignoreNextClick)return R.preventDefault(),R.stopPropagation&&R.stopPropagation(),R.stopImmediatePropagation&&R.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function R(E){if(dragEl){E=E.touches?E.touches[0]:E;var U=_detectNearestEmptySortable(E.clientX,E.clientY);if(U){var G={};for(var Y in E)E.hasOwnProperty(Y)&&(G[Y]=E[Y]);G.target=G.rootEl=U,G.preventDefault=void 0,G.stopPropagation=void 0,U[expando]._onDragOver(G)}}},_checkOutsideTargetEl=function R(E){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(E.target)};function Sortable(R,E){if(!(R&&R.nodeType&&R.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(R));this.el=R,this.options=E=_extends({},E),R[expando]=this;var U={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(R.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(R,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Q,X){Q.setData("Text",X.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,R,U);for(var G in U)!(G in E)&&(E[G]=U[G]);_prepareGroup(E);for(var Y in this)Y.charAt(0)==="_"&&typeof this[Y]=="function"&&(this[Y]=this[Y].bind(this));this.nativeDraggable=E.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),E.supportPointer?on(R,"pointerdown",this._onTapStart):(on(R,"mousedown",this._onTapStart),on(R,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(R,"dragover",this),on(R,"dragenter",this)),sortables.push(this.el),E.store&&E.store.get&&this.sort(E.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function R(E){!this.el.contains(E)&&E!==this.el&&(lastTarget=null)},_getDirection:function R(E,U){return typeof this.options.direction=="function"?this.options.direction.call(this,E,U,dragEl):this.options.direction},_onTapStart:function R(E){if(!!E.cancelable){var U=this,G=this.el,Y=this.options,J=Y.preventOnFilter,Q=E.type,X=E.touches&&E.touches[0]||E.pointerType&&E.pointerType==="touch"&&E,Z=(X||E).target,ee=E.target.shadowRoot&&(E.path&&E.path[0]||E.composedPath&&E.composedPath()[0])||Z,te=Y.filter;if(_saveInputCheckedState(G),!dragEl&&!(/mousedown|pointerdown/.test(Q)&&E.button!==0||Y.disabled)&&!ee.isContentEditable&&!(!this.nativeDraggable&&Safari&&Z&&Z.tagName.toUpperCase()==="SELECT")&&(Z=closest(Z,Y.draggable,G,!1),!(Z&&Z.animated)&&lastDownEl!==Z)){if(oldIndex=index(Z),oldDraggableIndex=index(Z,Y.draggable),typeof te=="function"){if(te.call(this,E,Z,this)){_dispatchEvent({sortable:U,rootEl:ee,name:"filter",targetEl:Z,toEl:G,fromEl:G}),pluginEvent("filter",U,{evt:E}),J&&E.cancelable&&E.preventDefault();return}}else if(te&&(te=te.split(",").some(function(ne){if(ne=closest(ee,ne.trim(),G,!1),ne)return _dispatchEvent({sortable:U,rootEl:ne,name:"filter",targetEl:Z,fromEl:G,toEl:G}),pluginEvent("filter",U,{evt:E}),!0}),te)){J&&E.cancelable&&E.preventDefault();return}Y.handle&&!closest(ee,Y.handle,G,!1)||this._prepareDragStart(E,X,Z)}}},_prepareDragStart:function R(E,U,G){var Y=this,J=Y.el,Q=Y.options,X=J.ownerDocument,Z;if(G&&!dragEl&&G.parentNode===J){var ee=getRect(G);if(rootEl=J,dragEl=G,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=G,activeGroup=Q.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(U||E).clientX,clientY:(U||E).clientY},tapDistanceLeft=tapEvt.clientX-ee.left,tapDistanceTop=tapEvt.clientY-ee.top,this._lastX=(U||E).clientX,this._lastY=(U||E).clientY,dragEl.style["will-change"]="all",Z=function(){if(pluginEvent("delayEnded",Y,{evt:E}),Sortable.eventCanceled){Y._onDrop();return}Y._disableDelayedDragEvents(),!FireFox&&Y.nativeDraggable&&(dragEl.draggable=!0),Y._triggerDragStart(E,U),_dispatchEvent({sortable:Y,name:"choose",originalEvent:E}),toggleClass(dragEl,Q.chosenClass,!0)},Q.ignore.split(",").forEach(function(te){find(dragEl,te.trim(),_disableDraggable)}),on(X,"dragover",nearestEmptyInsertDetectEvent),on(X,"mousemove",nearestEmptyInsertDetectEvent),on(X,"touchmove",nearestEmptyInsertDetectEvent),on(X,"mouseup",Y._onDrop),on(X,"touchend",Y._onDrop),on(X,"touchcancel",Y._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:E}),Q.delay&&(!Q.delayOnTouchOnly||U)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(X,"mouseup",Y._disableDelayedDrag),on(X,"touchend",Y._disableDelayedDrag),on(X,"touchcancel",Y._disableDelayedDrag),on(X,"mousemove",Y._delayedDragTouchMoveHandler),on(X,"touchmove",Y._delayedDragTouchMoveHandler),Q.supportPointer&&on(X,"pointermove",Y._delayedDragTouchMoveHandler),Y._dragStartTimer=setTimeout(Z,Q.delay)}else Z()}},_delayedDragTouchMoveHandler:function R(E){var U=E.touches?E.touches[0]:E;Math.max(Math.abs(U.clientX-this._lastX),Math.abs(U.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function R(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function R(){var E=this.el.ownerDocument;off(E,"mouseup",this._disableDelayedDrag),off(E,"touchend",this._disableDelayedDrag),off(E,"touchcancel",this._disableDelayedDrag),off(E,"mousemove",this._delayedDragTouchMoveHandler),off(E,"touchmove",this._delayedDragTouchMoveHandler),off(E,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function R(E,U){U=U||E.pointerType=="touch"&&E,!this.nativeDraggable||U?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):U?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function R(E,U){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:U}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var G=this.options;!E&&toggleClass(dragEl,G.dragClass,!1),toggleClass(dragEl,G.ghostClass,!0),Sortable.active=this,E&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:U})}else this._nulling()},_emulateDragOver:function R(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var E=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),U=E;E&&E.shadowRoot&&(E=E.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),E!==U);)U=E;if(dragEl.parentNode[expando]._isOutsideThisEl(E),U)do{if(U[expando]){var G=void 0;if(G=U[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:E,rootEl:U}),G&&!this.options.dragoverBubble)break}E=U}while(U=U.parentNode);_unhideGhostForTarget()}},_onTouchMove:function R(E){if(tapEvt){var U=this.options,G=U.fallbackTolerance,Y=U.fallbackOffset,J=E.touches?E.touches[0]:E,Q=ghostEl&&matrix(ghostEl,!0),X=ghostEl&&Q&&Q.a,Z=ghostEl&&Q&&Q.d,ee=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),te=(J.clientX-tapEvt.clientX+Y.x)/(X||1)+(ee?ee[0]-ghostRelativeParentInitialScroll[0]:0)/(X||1),ne=(J.clientY-tapEvt.clientY+Y.y)/(Z||1)+(ee?ee[1]-ghostRelativeParentInitialScroll[1]:0)/(Z||1);if(!Sortable.active&&!awaitingDragStarted){if(G&&Math.max(Math.abs(J.clientX-this._lastX),Math.abs(J.clientY-this._lastY))<G)return;this._onDragStart(E,!0)}if(ghostEl){Q?(Q.e+=te-(lastDx||0),Q.f+=ne-(lastDy||0)):Q={a:1,b:0,c:0,d:1,e:te,f:ne};var oe="matrix(".concat(Q.a,",").concat(Q.b,",").concat(Q.c,",").concat(Q.d,",").concat(Q.e,",").concat(Q.f,")");css(ghostEl,"webkitTransform",oe),css(ghostEl,"mozTransform",oe),css(ghostEl,"msTransform",oe),css(ghostEl,"transform",oe),lastDx=te,lastDy=ne,touchEvt=J}E.cancelable&&E.preventDefault()}},_appendGhost:function R(){if(!ghostEl){var E=this.options.fallbackOnBody?document.body:rootEl,U=getRect(dragEl,!0,PositionGhostAbsolutely,!0,E),G=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=E;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),U.top+=ghostRelativeParent.scrollTop,U.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,G.ghostClass,!1),toggleClass(ghostEl,G.fallbackClass,!0),toggleClass(ghostEl,G.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",U.top),css(ghostEl,"left",U.left),css(ghostEl,"width",U.width),css(ghostEl,"height",U.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,E.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function R(E,U){var G=this,Y=E.dataTransfer,J=G.options;if(pluginEvent("dragStart",this,{evt:E}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),G.cloneId=_nextTick(function(){pluginEvent("clone",G),!Sortable.eventCanceled&&(G.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),G._hideClone(),_dispatchEvent({sortable:G,name:"clone"}))}),!U&&toggleClass(dragEl,J.dragClass,!0),U?(ignoreNextClick=!0,G._loopId=setInterval(G._emulateDragOver,50)):(off(document,"mouseup",G._onDrop),off(document,"touchend",G._onDrop),off(document,"touchcancel",G._onDrop),Y&&(Y.effectAllowed="move",J.setData&&J.setData.call(G,Y,dragEl)),on(document,"drop",G),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,G._dragStartId=_nextTick(G._dragStarted.bind(G,U,E)),on(document,"selectstart",G),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function R(E){var U=this.el,G=E.target,Y,J,Q,X=this.options,Z=X.group,ee=Sortable.active,te=activeGroup===Z,ne=X.sort,oe=putSortable||ee,ce,pe=this,ye=!1;if(_silent)return;function Se(ve,xe){pluginEvent(ve,pe,_objectSpread2({evt:E,isOwner:te,axis:ce?"vertical":"horizontal",revert:Q,dragRect:Y,targetRect:J,canSort:ne,fromSortable:oe,target:G,completed:_e,onMove:function(me,de){return _onMove(rootEl,U,dragEl,Y,me,getRect(me),E,de)},changed:Te},xe))}function ge(){Se("dragOverAnimationCapture"),pe.captureAnimationState(),pe!==oe&&oe.captureAnimationState()}function _e(ve){return Se("dragOverCompleted",{insertion:ve}),ve&&(te?ee._hideClone():ee._showClone(pe),pe!==oe&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:ee.options.ghostClass,!1),toggleClass(dragEl,X.ghostClass,!0)),putSortable!==pe&&pe!==Sortable.active?putSortable=pe:pe===Sortable.active&&putSortable&&(putSortable=null),oe===pe&&(pe._ignoreWhileAnimating=G),pe.animateAll(function(){Se("dragOverAnimationComplete"),pe._ignoreWhileAnimating=null}),pe!==oe&&(oe.animateAll(),oe._ignoreWhileAnimating=null)),(G===dragEl&&!dragEl.animated||G===U&&!G.animated)&&(lastTarget=null),!X.dragoverBubble&&!E.rootEl&&G!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(E.target),!ve&&nearestEmptyInsertDetectEvent(E)),!X.dragoverBubble&&E.stopPropagation&&E.stopPropagation(),ye=!0}function Te(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,X.draggable),_dispatchEvent({sortable:pe,name:"change",toEl:U,newIndex,newDraggableIndex,originalEvent:E})}if(E.preventDefault!==void 0&&E.cancelable&&E.preventDefault(),G=closest(G,X.draggable,U,!0),Se("dragOver"),Sortable.eventCanceled)return ye;if(dragEl.contains(E.target)||G.animated&&G.animatingX&&G.animatingY||pe._ignoreWhileAnimating===G)return _e(!1);if(ignoreNextClick=!1,ee&&!X.disabled&&(te?ne||(Q=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,ee,dragEl,E))&&Z.checkPut(this,ee,dragEl,E))){if(ce=this._getDirection(E,G)==="vertical",Y=getRect(dragEl),Se("dragOverValid"),Sortable.eventCanceled)return ye;if(Q)return parentEl=rootEl,ge(),this._hideClone(),Se("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),_e(!0);var Ee=lastChild(U,X.draggable);if(!Ee||_ghostIsLast(E,ce,this)&&!Ee.animated){if(Ee===dragEl)return _e(!1);if(Ee&&U===E.target&&(G=Ee),G&&(J=getRect(G)),_onMove(rootEl,U,dragEl,Y,G,J,E,!!G)!==!1)return ge(),U.appendChild(dragEl),parentEl=U,Te(),_e(!0)}else if(Ee&&_ghostIsFirst(E,ce,this)){var Re=getChild(U,0,X,!0);if(Re===dragEl)return _e(!1);if(G=Re,J=getRect(G),_onMove(rootEl,U,dragEl,Y,G,J,E,!1)!==!1)return ge(),U.insertBefore(dragEl,Re),parentEl=U,Te(),_e(!0)}else if(G.parentNode===U){J=getRect(G);var Ae=0,Ie,Oe=dragEl.parentNode!==U,Pe=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||Y,G.animated&&G.toRect||J,ce),Le=ce?"top":"left",Me=isScrolledPast(G,"top","top")||isScrolledPast(dragEl,"top","top"),ue=Me?Me.scrollTop:void 0;lastTarget!==G&&(Ie=J[Le],pastFirstInvertThresh=!1,isCircumstantialInvert=!Pe&&X.invertSwap||Oe),Ae=_getSwapDirection(E,G,J,ce,Pe?1:X.swapThreshold,X.invertedSwapThreshold==null?X.swapThreshold:X.invertedSwapThreshold,isCircumstantialInvert,lastTarget===G);var ae;if(Ae!==0){var se=index(dragEl);do se-=Ae,ae=parentEl.children[se];while(ae&&(css(ae,"display")==="none"||ae===ghostEl))}if(Ae===0||ae===G)return _e(!1);lastTarget=G,lastDirection=Ae;var le=G.nextElementSibling,fe=!1;fe=Ae===1;var be=_onMove(rootEl,U,dragEl,Y,G,J,E,fe);if(be!==!1)return(be===1||be===-1)&&(fe=be===1),_silent=!0,setTimeout(_unsilent,30),ge(),fe&&!le?U.appendChild(dragEl):G.parentNode.insertBefore(dragEl,fe?le:G),Me&&scrollBy(Me,0,ue-Me.scrollTop),parentEl=dragEl.parentNode,Ie!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(Ie-getRect(G)[Le])),Te(),_e(!0)}if(U.contains(dragEl))return _e(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function R(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function R(){var E=this.el.ownerDocument;off(E,"mouseup",this._onDrop),off(E,"touchend",this._onDrop),off(E,"pointerup",this._onDrop),off(E,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function R(E){var U=this.el,G=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,G.draggable),pluginEvent("drop",this,{evt:E}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,G.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(U,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),E&&(moved&&(E.cancelable&&E.preventDefault(),!G.dropBubble&&E.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:E}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:E}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:E}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:E}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:E})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:E}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:E})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:E}),this.save()))),this._nulling()},_nulling:function R(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(E){E.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function R(E){switch(E.type){case"drop":case"dragend":this._onDrop(E);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(E),_globalDragOver(E));break;case"selectstart":E.preventDefault();break}},toArray:function R(){for(var E=[],U,G=this.el.children,Y=0,J=G.length,Q=this.options;Y<J;Y++)U=G[Y],closest(U,Q.draggable,this.el,!1)&&E.push(U.getAttribute(Q.dataIdAttr)||_generateId(U));return E},sort:function R(E,U){var G={},Y=this.el;this.toArray().forEach(function(J,Q){var X=Y.children[Q];closest(X,this.options.draggable,Y,!1)&&(G[J]=X)},this),U&&this.captureAnimationState(),E.forEach(function(J){G[J]&&(Y.removeChild(G[J]),Y.appendChild(G[J]))}),U&&this.animateAll()},save:function R(){var E=this.options.store;E&&E.set&&E.set(this)},closest:function R(E,U){return closest(E,U||this.options.draggable,this.el,!1)},option:function R(E,U){var G=this.options;if(U===void 0)return G[E];var Y=PluginManager.modifyOption(this,E,U);typeof Y<"u"?G[E]=Y:G[E]=U,E==="group"&&_prepareGroup(G)},destroy:function R(){pluginEvent("destroy",this);var E=this.el;E[expando]=null,off(E,"mousedown",this._onTapStart),off(E,"touchstart",this._onTapStart),off(E,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(E,"dragover",this),off(E,"dragenter",this)),Array.prototype.forEach.call(E.querySelectorAll("[draggable]"),function(U){U.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=E=null},_hideClone:function R(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function R(E){if(E.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(R){R.dataTransfer&&(R.dataTransfer.dropEffect="move"),R.cancelable&&R.preventDefault()}function _onMove(R,E,U,G,Y,J,Q,X){var Z,ee=R[expando],te=ee.options.onMove,ne;return window.CustomEvent&&!IE11OrLess&&!Edge?Z=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Z=document.createEvent("Event"),Z.initEvent("move",!0,!0)),Z.to=E,Z.from=R,Z.dragged=U,Z.draggedRect=G,Z.related=Y||E,Z.relatedRect=J||getRect(E),Z.willInsertAfter=X,Z.originalEvent=Q,R.dispatchEvent(Z),te&&(ne=te.call(ee,Z,Q)),ne}function _disableDraggable(R){R.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(R,E,U){var G=getRect(getChild(U.el,0,U.options,!0)),Y=10;return E?R.clientX<G.left-Y||R.clientY<G.top&&R.clientX<G.right:R.clientY<G.top-Y||R.clientY<G.bottom&&R.clientX<G.left}function _ghostIsLast(R,E,U){var G=getRect(lastChild(U.el,U.options.draggable)),Y=10;return E?R.clientX>G.right+Y||R.clientX<=G.right&&R.clientY>G.bottom&&R.clientX>=G.left:R.clientX>G.right&&R.clientY>G.top||R.clientX<=G.right&&R.clientY>G.bottom+Y}function _getSwapDirection(R,E,U,G,Y,J,Q,X){var Z=G?R.clientY:R.clientX,ee=G?U.height:U.width,te=G?U.top:U.left,ne=G?U.bottom:U.right,oe=!1;if(!Q){if(X&&targetMoveDistance<ee*Y){if(!pastFirstInvertThresh&&(lastDirection===1?Z>te+ee*J/2:Z<ne-ee*J/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)oe=!0;else if(lastDirection===1?Z<te+targetMoveDistance:Z>ne-targetMoveDistance)return-lastDirection}else if(Z>te+ee*(1-Y)/2&&Z<ne-ee*(1-Y)/2)return _getInsertDirection(E)}return oe=oe||Q,oe&&(Z<te+ee*J/2||Z>ne-ee*J/2)?Z>te+ee/2?1:-1:0}function _getInsertDirection(R){return index(dragEl)<index(R)?1:-1}function _generateId(R){for(var E=R.tagName+R.className+R.src+R.href+R.textContent,U=E.length,G=0;U--;)G+=E.charCodeAt(U);return G.toString(36)}function _saveInputCheckedState(R){savedInputChecked.length=0;for(var E=R.getElementsByTagName("input"),U=E.length;U--;){var G=E[U];G.checked&&savedInputChecked.push(G)}}function _nextTick(R){return setTimeout(R,0)}function _cancelNextTick(R){return clearTimeout(R)}documentExists&&on(document,"touchmove",function(R){(Sortable.active||awaitingDragStarted)&&R.cancelable&&R.preventDefault()});Sortable.utils={on,off,css,find,is:function R(E,U){return!!closest(E,U,E,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(R){return R[expando]};Sortable.mount=function(){for(var R=arguments.length,E=new Array(R),U=0;U<R;U++)E[U]=arguments[U];E[0].constructor===Array&&(E=E[0]),E.forEach(function(G){if(!G.prototype||!G.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(G));G.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),G.utils)),PluginManager.mount(G)})};Sortable.create=function(R,E){return new Sortable(R,E)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function R(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var E in this)E.charAt(0)==="_"&&typeof this[E]=="function"&&(this[E]=this[E].bind(this))}return R.prototype={dragStarted:function(U){var G=U.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):G.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(U){var G=U.originalEvent;!this.options.dragOverBubble&&!G.rootEl&&this._handleAutoScroll(G)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(U){this._handleAutoScroll(U,!0)},_handleAutoScroll:function(U,G){var Y=this,J=(U.touches?U.touches[0]:U).clientX,Q=(U.touches?U.touches[0]:U).clientY,X=document.elementFromPoint(J,Q);if(touchEvt$1=U,G||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(U,this.options,X,G);var Z=getParentAutoScrollElement(X,!0);scrolling&&(!pointerElemChangedInterval||J!==lastAutoScrollX||Q!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var ee=getParentAutoScrollElement(document.elementFromPoint(J,Q),!0);ee!==Z&&(Z=ee,clearAutoScrolls()),autoScroll(U,Y.options,ee,G)},10),lastAutoScrollX=J,lastAutoScrollY=Q)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(X,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(U,this.options,getParentAutoScrollElement(X,!1),!1)}}},_extends(R,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(R){clearInterval(R.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(R,E,U,G){if(!!E.scroll){var Y=(R.touches?R.touches[0]:R).clientX,J=(R.touches?R.touches[0]:R).clientY,Q=E.scrollSensitivity,X=E.scrollSpeed,Z=getWindowScrollingElement(),ee=!1,te;scrollRootEl!==U&&(scrollRootEl=U,clearAutoScrolls(),scrollEl=E.scroll,te=E.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(U,!0)));var ne=0,oe=scrollEl;do{var ce=oe,pe=getRect(ce),ye=pe.top,Se=pe.bottom,ge=pe.left,_e=pe.right,Te=pe.width,Ee=pe.height,Re=void 0,Ae=void 0,Ie=ce.scrollWidth,Oe=ce.scrollHeight,Pe=css(ce),Le=ce.scrollLeft,Me=ce.scrollTop;ce===Z?(Re=Te<Ie&&(Pe.overflowX==="auto"||Pe.overflowX==="scroll"||Pe.overflowX==="visible"),Ae=Ee<Oe&&(Pe.overflowY==="auto"||Pe.overflowY==="scroll"||Pe.overflowY==="visible")):(Re=Te<Ie&&(Pe.overflowX==="auto"||Pe.overflowX==="scroll"),Ae=Ee<Oe&&(Pe.overflowY==="auto"||Pe.overflowY==="scroll"));var ue=Re&&(Math.abs(_e-Y)<=Q&&Le+Te<Ie)-(Math.abs(ge-Y)<=Q&&!!Le),ae=Ae&&(Math.abs(Se-J)<=Q&&Me+Ee<Oe)-(Math.abs(ye-J)<=Q&&!!Me);if(!autoScrolls[ne])for(var se=0;se<=ne;se++)autoScrolls[se]||(autoScrolls[se]={});(autoScrolls[ne].vx!=ue||autoScrolls[ne].vy!=ae||autoScrolls[ne].el!==ce)&&(autoScrolls[ne].el=ce,autoScrolls[ne].vx=ue,autoScrolls[ne].vy=ae,clearInterval(autoScrolls[ne].pid),(ue!=0||ae!=0)&&(ee=!0,autoScrolls[ne].pid=setInterval(function(){G&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var le=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*X:0,fe=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*X:0;typeof te=="function"&&te.call(Sortable.dragged.parentNode[expando],fe,le,R,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,fe,le)}.bind({layer:ne}),24))),ne++}while(E.bubbleScroll&&oe!==Z&&(oe=getParentAutoScrollElement(oe,!1)));scrolling=ee}},30),drop=function R(E){var U=E.originalEvent,G=E.putSortable,Y=E.dragEl,J=E.activeSortable,Q=E.dispatchSortableEvent,X=E.hideGhostForTarget,Z=E.unhideGhostForTarget;if(!!U){var ee=G||J;X();var te=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:U,ne=document.elementFromPoint(te.clientX,te.clientY);Z(),ee&&!ee.el.contains(ne)&&(Q("spill"),this.onSpill({dragEl:Y,putSortable:G}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function R(E){var U=E.oldDraggableIndex;this.startIndex=U},onSpill:function R(E){var U=E.dragEl,G=E.putSortable;this.sortable.captureAnimationState(),G&&G.captureAnimationState();var Y=getChild(this.sortable.el,this.startIndex,this.options);Y?this.sortable.el.insertBefore(U,Y):this.sortable.el.appendChild(U),this.sortable.animateAll(),G&&G.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function R(E){var U=E.dragEl,G=E.putSortable,Y=G||this.sortable;Y.captureAnimationState(),U.parentNode&&U.parentNode.removeChild(U),Y.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var lastSwapEl;function SwapPlugin(){function R(){this.defaults={swapClass:"sortable-swap-highlight"}}return R.prototype={dragStart:function(U){var G=U.dragEl;lastSwapEl=G},dragOverValid:function(U){var G=U.completed,Y=U.target,J=U.onMove,Q=U.activeSortable,X=U.changed,Z=U.cancel;if(!!Q.options.swap){var ee=this.sortable.el,te=this.options;if(Y&&Y!==ee){var ne=lastSwapEl;J(Y)!==!1?(toggleClass(Y,te.swapClass,!0),lastSwapEl=Y):lastSwapEl=null,ne&&ne!==lastSwapEl&&toggleClass(ne,te.swapClass,!1)}X(),G(!0),Z()}},drop:function(U){var G=U.activeSortable,Y=U.putSortable,J=U.dragEl,Q=Y||this.sortable,X=this.options;lastSwapEl&&toggleClass(lastSwapEl,X.swapClass,!1),lastSwapEl&&(X.swap||Y&&Y.options.swap)&&J!==lastSwapEl&&(Q.captureAnimationState(),Q!==G&&G.captureAnimationState(),swapNodes(J,lastSwapEl),Q.animateAll(),Q!==G&&G.animateAll())},nulling:function(){lastSwapEl=null}},_extends(R,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(R,E){var U=R.parentNode,G=E.parentNode,Y,J;!U||!G||U.isEqualNode(E)||G.isEqualNode(R)||(Y=index(R),J=index(E),U.isEqualNode(G)&&Y<J&&J++,U.insertBefore(E,U.children[Y]),G.insertBefore(R,G.children[J]))}var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function R(E){for(var U in this)U.charAt(0)==="_"&&typeof this[U]=="function"&&(this[U]=this[U].bind(this));E.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag)),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(Y,J){var Q="";multiDragElements.length&&multiDragSortable===E?multiDragElements.forEach(function(X,Z){Q+=(Z?", ":"")+X.textContent}):Q=J.textContent,Y.setData("Text",Q)}}}return R.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(U){var G=U.dragEl;dragEl$1=G},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(U){var G=U.sortable,Y=U.cancel;if(!!this.isMultiDrag){for(var J=0;J<multiDragElements.length;J++)multiDragClones.push(clone(multiDragElements[J])),multiDragClones[J].sortableIndex=multiDragElements[J].sortableIndex,multiDragClones[J].draggable=!1,multiDragClones[J].style["will-change"]="",toggleClass(multiDragClones[J],this.options.selectedClass,!1),multiDragElements[J]===dragEl$1&&toggleClass(multiDragClones[J],this.options.chosenClass,!1);G._hideClone(),Y()}},clone:function(U){var G=U.sortable,Y=U.rootEl,J=U.dispatchSortableEvent,Q=U.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===G&&(insertMultiDragClones(!0,Y),J("clone"),Q())},showClone:function(U){var G=U.cloneNowShown,Y=U.rootEl,J=U.cancel;!this.isMultiDrag||(insertMultiDragClones(!1,Y),multiDragClones.forEach(function(Q){css(Q,"display","")}),G(),clonesHidden=!1,J())},hideClone:function(U){var G=this;U.sortable;var Y=U.cloneNowHidden,J=U.cancel;!this.isMultiDrag||(multiDragClones.forEach(function(Q){css(Q,"display","none"),G.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q)}),Y(),clonesHidden=!0,J())},dragStartGlobal:function(U){U.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(G){G.sortableIndex=index(G)}),multiDragElements=multiDragElements.sort(function(G,Y){return G.sortableIndex-Y.sortableIndex}),dragStarted=!0},dragStarted:function(U){var G=this,Y=U.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(Y.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(Q){Q!==dragEl$1&&css(Q,"position","absolute")});var J=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(Q){Q!==dragEl$1&&setRect(Q,J)}),folding=!0,initialFolding=!0}Y.animateAll(function(){folding=!1,initialFolding=!1,G.options.animation&&multiDragElements.forEach(function(Q){unsetRect(Q)}),G.options.sort&&removeMultiDragElements()})}},dragOver:function(U){var G=U.target,Y=U.completed,J=U.cancel;folding&&~multiDragElements.indexOf(G)&&(Y(!1),J())},revert:function(U){var G=U.fromSortable,Y=U.rootEl,J=U.sortable,Q=U.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(X){J.addAnimationState({target:X,rect:folding?getRect(X):Q}),unsetRect(X),X.fromRect=Q,G.removeAnimationState(X)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,Y))},dragOverCompleted:function(U){var G=U.sortable,Y=U.isOwner,J=U.insertion,Q=U.activeSortable,X=U.parentEl,Z=U.putSortable,ee=this.options;if(J){if(Y&&Q._hideClone(),initialFolding=!1,ee.animation&&multiDragElements.length>1&&(folding||!Y&&!Q.options.sort&&!Z)){var te=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(oe){oe!==dragEl$1&&(setRect(oe,te),X.appendChild(oe))}),folding=!0}if(!Y)if(folding||removeMultiDragElements(),multiDragElements.length>1){var ne=clonesHidden;Q._showClone(G),Q.options.animation&&!clonesHidden&&ne&&multiDragClones.forEach(function(oe){Q.addAnimationState({target:oe,rect:clonesFromRect}),oe.fromRect=clonesFromRect,oe.thisAnimationDuration=null})}else Q._showClone(G)}},dragOverAnimationCapture:function(U){var G=U.dragRect,Y=U.isOwner,J=U.activeSortable;if(multiDragElements.forEach(function(X){X.thisAnimationDuration=null}),J.options.animation&&!Y&&J.multiDrag.isMultiDrag){clonesFromRect=_extends({},G);var Q=matrix(dragEl$1,!0);clonesFromRect.top-=Q.f,clonesFromRect.left-=Q.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(U){var G=U.originalEvent,Y=U.rootEl,J=U.parentEl,Q=U.sortable,X=U.dispatchSortableEvent,Z=U.oldIndex,ee=U.putSortable,te=ee||this.sortable;if(!!G){var ne=this.options,oe=J.children;if(!dragStarted)if(ne.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,ne.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:Q,rootEl:Y,name:"deselect",targetEl:dragEl$1,originalEvt:G});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:Q,rootEl:Y,name:"select",targetEl:dragEl$1,originalEvt:G}),G.shiftKey&&lastMultiDragSelect&&Q.el.contains(lastMultiDragSelect)){var ce=index(lastMultiDragSelect),pe=index(dragEl$1);if(~ce&&~pe&&ce!==pe){var ye,Se;for(pe>ce?(Se=ce,ye=pe):(Se=pe,ye=ce+1);Se<ye;Se++)~multiDragElements.indexOf(oe[Se])||(toggleClass(oe[Se],ne.selectedClass,!0),multiDragElements.push(oe[Se]),dispatchEvent({sortable:Q,rootEl:Y,name:"select",targetEl:oe[Se],originalEvt:G}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=te}if(dragStarted&&this.isMultiDrag){if(folding=!1,(J[expando].options.sort||J!==Y)&&multiDragElements.length>1){var ge=getRect(dragEl$1),_e=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&ne.animation&&(dragEl$1.thisAnimationDuration=null),te.captureAnimationState(),!initialFolding&&(ne.animation&&(dragEl$1.fromRect=ge,multiDragElements.forEach(function(Ee){if(Ee.thisAnimationDuration=null,Ee!==dragEl$1){var Re=folding?getRect(Ee):ge;Ee.fromRect=Re,te.addAnimationState({target:Ee,rect:Re})}})),removeMultiDragElements(),multiDragElements.forEach(function(Ee){oe[_e]?J.insertBefore(Ee,oe[_e]):J.appendChild(Ee),_e++}),Z===index(dragEl$1))){var Te=!1;multiDragElements.forEach(function(Ee){if(Ee.sortableIndex!==index(Ee)){Te=!0;return}}),Te&&X("update")}multiDragElements.forEach(function(Ee){unsetRect(Ee)}),te.animateAll()}multiDragSortable=te}(Y===J||ee&&ee.lastPutMode!=="clone")&&multiDragClones.forEach(function(Ee){Ee.parentNode&&Ee.parentNode.removeChild(Ee)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(U){if(!(typeof dragStarted<"u"&&dragStarted)&&multiDragSortable===this.sortable&&!(U&&closest(U.target,this.options.draggable,this.sortable.el,!1))&&!(U&&U.button!==0))for(;multiDragElements.length;){var G=multiDragElements[0];toggleClass(G,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:G,originalEvt:U})}},_checkKeyDown:function(U){U.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(U){U.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(R,{pluginName:"multiDrag",utils:{select:function(U){var G=U.parentNode[expando];!G||!G.options.multiDrag||~multiDragElements.indexOf(U)||(multiDragSortable&&multiDragSortable!==G&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=G),toggleClass(U,G.options.selectedClass,!0),multiDragElements.push(U))},deselect:function(U){var G=U.parentNode[expando],Y=multiDragElements.indexOf(U);!G||!G.options.multiDrag||!~Y||(toggleClass(U,G.options.selectedClass,!1),multiDragElements.splice(Y,1))}},eventProperties:function(){var U=this,G=[],Y=[];return multiDragElements.forEach(function(J){G.push({multiDragElement:J,index:J.sortableIndex});var Q;folding&&J!==dragEl$1?Q=-1:folding?Q=index(J,":not(."+U.options.selectedClass+")"):Q=index(J),Y.push({multiDragElement:J,index:Q})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:G,newIndicies:Y}},optionListeners:{multiDragKey:function(U){return U=U.toLowerCase(),U==="ctrl"?U="Control":U.length>1&&(U=U.charAt(0).toUpperCase()+U.substr(1)),U}}})}function insertMultiDragElements(R,E){multiDragElements.forEach(function(U,G){var Y=E.children[U.sortableIndex+(R?Number(G):0)];Y?E.insertBefore(U,Y):E.appendChild(U)})}function insertMultiDragClones(R,E){multiDragClones.forEach(function(U,G){var Y=E.children[U.sortableIndex+(R?Number(G):0)];Y?E.insertBefore(U,Y):E.appendChild(U)})}function removeMultiDragElements(){multiDragElements.forEach(function(R){R!==dragEl$1&&R.parentNode&&R.parentNode.removeChild(R)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);const sortable_esm=Object.freeze(Object.defineProperty({__proto__:null,default:Sortable,MultiDrag:MultiDragPlugin,Sortable,Swap:SwapPlugin},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(sortable_esm);export{nextTick as $,onBeforeMount as A,BN$2 as B,Comment as C,onActivated as D,onDeactivated as E,Fragment$2 as F,provide as G,computed as H,useSsrAdapter as I,watchEffect as J,murmur2 as K,exists as L,h$2 as M,isMounted as N,TransitionGroup as O,toRef as P,rgba as Q,scaleColor as R,composite as S,Transition as T,useIsIos as U,VResizeObserver as V,mergeProps as W,getPreciseEventTarget as X,VVirtualList as Y,happensIn as Z,createIndexGetter as _,aes as a,capitalize as a$,depx as a0,getMargin as a1,VFollower as a2,clickoutside$1 as a3,mousemoveoutside$1 as a4,FocusTrap as a5,withDirectives as a6,useMergedState as a7,useCompitable as a8,cloneVNode as a9,beforeNextFrameOnce as aA,Teleport as aB,onFontsReady as aC,VXScroll as aD,EffectScope as aE,ReactiveEffect as aF,customRef as aG,effect$3 as aH,effectScope as aI,getCurrentScope as aJ,isProxy as aK,isReactive as aL,isReadonly as aM,isRef as aN,isShallow as aO,onScopeDispose as aP,proxyRefs as aQ,readonly$1 as aR,shallowReactive as aS,shallowReadonly as aT,shallowRef as aU,stop as aV,toRaw as aW,toRefs as aX,triggerRef as aY,unref as aZ,camelize as a_,VBinder as aa,zindexable$1 as ab,VTarget as ac,changeColor as ad,VOverflow as ae,LazyTeleport as af,unwrapElement as ag,getScrollParent$2 as ah,onUnmounted as ai,onBeforeUpdate as aj,indexMap as ak,onUpdated as al,normalizeStyle as am,createId$1 as an,markRaw as ao,createTreeMate as ap,useKeyboard as aq,formatInTimeZone as ar,renderSlot as as,useClicked as at,useClickPosition as au,reactive as av,Schema$1 as aw,pxfy as ax,useBreakpoints as ay,parseResponsivePropValue as az,scrypt as b,watchPostEffect as b$,normalizeClass as b0,normalizeProps as b1,toDisplayString as b2,toHandlerKey as b3,BaseTransition as b4,KeepAlive as b5,Static as b6,Suspense as b7,Text$1 as b8,assertNumber as b9,onRenderTracked as bA,onRenderTriggered as bB,onServerPrefetch as bC,openBlock as bD,popScopeId as bE,pushScopeId as bF,queuePostFlushCb as bG,registerRuntimeCompiler as bH,renderList as bI,resolveComponent as bJ,resolveDirective as bK,resolveDynamicComponent as bL,resolveFilter as bM,resolveTransitionHooks as bN,setBlockTracking as bO,setDevtoolsHook as bP,setTransitionHooks as bQ,ssrContextKey$1 as bR,ssrUtils as bS,toHandlers as bT,transformVNodeArgs as bU,useAttrs as bV,useSSRContext as bW,useSlots as bX,useTransitionState as bY,version$4 as bZ,warn$2 as b_,callWithAsyncErrorHandling as ba,callWithErrorHandling as bb,compatUtils as bc,createBlock$1 as bd,createCommentVNode as be,createElementBlock as bf,createBaseVNode as bg,createHydrationRenderer as bh,createPropsRestProxy as bi,createRenderer as bj,createSlots as bk,createStaticVNode as bl,createVNode as bm,defineAsyncComponent as bn,defineEmits as bo,defineExpose as bp,defineProps as bq,devtools as br,getTransitionRawChildren as bs,guardReactiveProps as bt,handleError as bu,initCustomFormatter as bv,isMemoSame as bw,isRuntimeOnly as bx,mergeDefaults as by,onErrorCaptured as bz,bech32 as c,watchSyncEffect as c0,withAsyncContext as c1,withCtx as c2,withDefaults as c3,withMemo as c4,withScopeId as c5,VueElement as c6,createApp as c7,createSSRApp as c8,defineCustomElement as c9,EditorContent as cA,useEditor as cB,StarterKit as cC,Underline as cD,Placeholder as cE,CharacterCount as cF,pluralize as cG,format$4 as cH,copy$1 as cI,defineSSRCustomElement as ca,hydrate as cb,initDirectivesForSSR as cc,render$2 as cd,useCssModule as ce,useCssVars as cf,vModelCheckbox as cg,vModelDynamic as ch,vModelRadio as ci,vModelSelect as cj,vModelText as ck,withKeys as cl,withModifiers as cm,isVue2 as cn,require$$1 as co,useMediaQuery as cp,CoinbaseWalletSDK as cq,register as cr,dayjs as cs,durationPlugin as ct,utcPlugin as cu,Big as cv,init as cw,BrowserTracing as cx,captureMessage as cy,create as cz,commonjsGlobal as d,getDefaultExportFromCjs as e,base64Js as f,getAugmentedNamespace as g,hash$3 as h,ieee754 as i,createTextVNode as j,isVNode as k,defineComponent as l,CssRender as m,inject as n,getCurrentInstance as o,plugin as p,onBeforeUnmount as q,ref as r,sha3 as s,onMounted as t,on$1 as u,vShow as v,watch as w,off$1 as x,useMemo as y,resizeObserverManager as z};
